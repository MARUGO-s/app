(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function sv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wd={exports:{}},Ni={};var Um;function Ib(){if(Um)return Ni;Um=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(l,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var f in c)f!=="key"&&(u[f]=c[f])}else u=c;return c=u.ref,{$$typeof:r,type:l,key:d,ref:c!==void 0?c:null,props:u}}return Ni.Fragment=t,Ni.jsx=s,Ni.jsxs=s,Ni}var Mm;function qb(){return Mm||(Mm=1,wd.exports=Ib()),wd.exports}var i=qb(),Sd={exports:{}},ze={};var Lm;function $b(){if(Lm)return ze;Lm=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,A={};function N(M,P,ie){this.props=M,this.context=P,this.refs=A,this.updater=ie||_}N.prototype.isReactComponent={},N.prototype.setState=function(M,P){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,P,"setState")},N.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=N.prototype;function R(M,P,ie){this.props=M,this.context=P,this.refs=A,this.updater=ie||_}var D=R.prototype=new C;D.constructor=R,j(D,N.prototype),D.isPureReactComponent=!0;var U=Array.isArray;function T(){}var L={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function q(M,P,ie){var pe=ie.ref;return{$$typeof:r,type:M,key:P,ref:pe!==void 0?pe:null,props:ie}}function V(M,P){return q(M.type,P,M.props)}function z(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function O(M){var P={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return P[ie]})}var F=/\/+/g;function I(M,P){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):P.toString(36)}function K(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(T,T):(M.status="pending",M.then(function(P){M.status==="pending"&&(M.status="fulfilled",M.value=P)},function(P){M.status==="pending"&&(M.status="rejected",M.reason=P)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function k(M,P,ie,pe,xe){var ce=typeof M;(ce==="undefined"||ce==="boolean")&&(M=null);var Oe=!1;if(M===null)Oe=!0;else switch(ce){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(M.$$typeof){case r:case t:Oe=!0;break;case y:return Oe=M._init,k(Oe(M._payload),P,ie,pe,xe)}}if(Oe)return xe=xe(M),Oe=pe===""?"."+I(M,0):pe,U(xe)?(ie="",Oe!=null&&(ie=Oe.replace(F,"$&/")+"/"),k(xe,P,ie,"",function(De){return De})):xe!=null&&(z(xe)&&(xe=V(xe,ie+(xe.key==null||M&&M.key===xe.key?"":(""+xe.key).replace(F,"$&/")+"/")+Oe)),P.push(xe)),1;Oe=0;var Be=pe===""?".":pe+":";if(U(M))for(var ke=0;ke<M.length;ke++)pe=M[ke],ce=Be+I(pe,ke),Oe+=k(pe,P,ie,ce,xe);else if(ke=S(M),typeof ke=="function")for(M=ke.call(M),ke=0;!(pe=M.next()).done;)pe=pe.value,ce=Be+I(pe,ke++),Oe+=k(pe,P,ie,ce,xe);else if(ce==="object"){if(typeof M.then=="function")return k(K(M),P,ie,pe,xe);throw P=String(M),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function $(M,P,ie){if(M==null)return M;var pe=[],xe=0;return k(M,pe,"","",function(ce){return P.call(ie,ce,xe++)}),pe}function X(M){if(M._status===-1){var P=M._result;P=P(),P.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=P)}if(M._status===1)return M._result.default;throw M._result}var ue=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},de={map:$,forEach:function(M,P,ie){$(M,function(){P.apply(this,arguments)},ie)},count:function(M){var P=0;return $(M,function(){P++}),P},toArray:function(M){return $(M,function(P){return P})||[]},only:function(M){if(!z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ze.Activity=v,ze.Children=de,ze.Component=N,ze.Fragment=s,ze.Profiler=c,ze.PureComponent=R,ze.StrictMode=l,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,ze.__COMPILER_RUNTIME={__proto__:null,c:function(M){return L.H.useMemoCache(M)}},ze.cache=function(M){return function(){return M.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(M,P,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var pe=j({},M.props),xe=M.key;if(P!=null)for(ce in P.key!==void 0&&(xe=""+P.key),P)!G.call(P,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&P.ref===void 0||(pe[ce]=P[ce]);var ce=arguments.length-2;if(ce===1)pe.children=ie;else if(1<ce){for(var Oe=Array(ce),Be=0;Be<ce;Be++)Oe[Be]=arguments[Be+2];pe.children=Oe}return q(M.type,xe,pe)},ze.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},ze.createElement=function(M,P,ie){var pe,xe={},ce=null;if(P!=null)for(pe in P.key!==void 0&&(ce=""+P.key),P)G.call(P,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(xe[pe]=P[pe]);var Oe=arguments.length-2;if(Oe===1)xe.children=ie;else if(1<Oe){for(var Be=Array(Oe),ke=0;ke<Oe;ke++)Be[ke]=arguments[ke+2];xe.children=Be}if(M&&M.defaultProps)for(pe in Oe=M.defaultProps,Oe)xe[pe]===void 0&&(xe[pe]=Oe[pe]);return q(M,ce,xe)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(M){return{$$typeof:f,render:M}},ze.isValidElement=z,ze.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:X}},ze.memo=function(M,P){return{$$typeof:m,type:M,compare:P===void 0?null:P}},ze.startTransition=function(M){var P=L.T,ie={};L.T=ie;try{var pe=M(),xe=L.S;xe!==null&&xe(ie,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(T,ue)}catch(ce){ue(ce)}finally{P!==null&&ie.types!==null&&(P.types=ie.types),L.T=P}},ze.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},ze.use=function(M){return L.H.use(M)},ze.useActionState=function(M,P,ie){return L.H.useActionState(M,P,ie)},ze.useCallback=function(M,P){return L.H.useCallback(M,P)},ze.useContext=function(M){return L.H.useContext(M)},ze.useDebugValue=function(){},ze.useDeferredValue=function(M,P){return L.H.useDeferredValue(M,P)},ze.useEffect=function(M,P){return L.H.useEffect(M,P)},ze.useEffectEvent=function(M){return L.H.useEffectEvent(M)},ze.useId=function(){return L.H.useId()},ze.useImperativeHandle=function(M,P,ie){return L.H.useImperativeHandle(M,P,ie)},ze.useInsertionEffect=function(M,P){return L.H.useInsertionEffect(M,P)},ze.useLayoutEffect=function(M,P){return L.H.useLayoutEffect(M,P)},ze.useMemo=function(M,P){return L.H.useMemo(M,P)},ze.useOptimistic=function(M,P){return L.H.useOptimistic(M,P)},ze.useReducer=function(M,P,ie){return L.H.useReducer(M,P,ie)},ze.useRef=function(M){return L.H.useRef(M)},ze.useState=function(M){return L.H.useState(M)},ze.useSyncExternalStore=function(M,P,ie){return L.H.useSyncExternalStore(M,P,ie)},ze.useTransition=function(){return L.H.useTransition()},ze.version="19.2.3",ze}var Bm;function tl(){return Bm||(Bm=1,Sd.exports=$b()),Sd.exports}var w=tl();const Ce=sv(w);var jd={exports:{}},Oi={},_d={exports:{}},Cd={};var Im;function Hb(){return Im||(Im=1,(function(r){function t(k,$){var X=k.length;k.push($);e:for(;0<X;){var ue=X-1>>>1,de=k[ue];if(0<c(de,$))k[ue]=$,k[X]=de,X=ue;else break e}}function s(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var $=k[0],X=k.pop();if(X!==$){k[0]=X;e:for(var ue=0,de=k.length,M=de>>>1;ue<M;){var P=2*(ue+1)-1,ie=k[P],pe=P+1,xe=k[pe];if(0>c(ie,X))pe<de&&0>c(xe,ie)?(k[ue]=xe,k[pe]=X,ue=pe):(k[ue]=ie,k[P]=X,ue=P);else if(pe<de&&0>c(xe,X))k[ue]=xe,k[pe]=X,ue=pe;else break e}}return $}function c(k,$){var X=k.sortIndex-$.sortIndex;return X!==0?X:k.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var p=[],m=[],y=1,v=null,b=3,S=!1,_=!1,j=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var $=s(m);$!==null;){if($.callback===null)l(m);else if($.startTime<=k)l(m),$.sortIndex=$.expirationTime,t(p,$);else break;$=s(m)}}function U(k){if(j=!1,D(k),!_)if(s(p)!==null)_=!0,T||(T=!0,O());else{var $=s(m);$!==null&&K(U,$.startTime-k)}}var T=!1,L=-1,G=5,q=-1;function V(){return A?!0:!(r.unstable_now()-q<G)}function z(){if(A=!1,T){var k=r.unstable_now();q=k;var $=!0;try{e:{_=!1,j&&(j=!1,C(L),L=-1),S=!0;var X=b;try{t:{for(D(k),v=s(p);v!==null&&!(v.expirationTime>k&&V());){var ue=v.callback;if(typeof ue=="function"){v.callback=null,b=v.priorityLevel;var de=ue(v.expirationTime<=k);if(k=r.unstable_now(),typeof de=="function"){v.callback=de,D(k),$=!0;break t}v===s(p)&&l(p),D(k)}else l(p);v=s(p)}if(v!==null)$=!0;else{var M=s(m);M!==null&&K(U,M.startTime-k),$=!1}}break e}finally{v=null,b=X,S=!1}$=void 0}}finally{$?O():T=!1}}}var O;if(typeof R=="function")O=function(){R(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,I=F.port2;F.port1.onmessage=z,O=function(){I.postMessage(null)}}else O=function(){N(z,0)};function K(k,$){L=N(function(){k(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(k){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var X=b;b=$;try{return k()}finally{b=X}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var X=b;b=k;try{return $()}finally{b=X}},r.unstable_scheduleCallback=function(k,$,X){var ue=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,k){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=X+de,k={id:y++,callback:$,priorityLevel:k,startTime:X,expirationTime:de,sortIndex:-1},X>ue?(k.sortIndex=X,t(m,k),s(p)===null&&k===s(m)&&(j?(C(L),L=-1):j=!0,K(U,X-ue))):(k.sortIndex=de,t(p,k),_||S||(_=!0,T||(T=!0,O()))),k},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(k){var $=b;return function(){var X=b;b=$;try{return k.apply(this,arguments)}finally{b=X}}}})(Cd)),Cd}var qm;function Pb(){return qm||(qm=1,_d.exports=Hb()),_d.exports}var Ed={exports:{}},Zt={};var $m;function Gb(){if($m)return Zt;$m=1;var r=tl();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:p,containerInfo:m,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Zt.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(p,m,null,y)},Zt.flushSync=function(p){var m=d.T,y=l.p;try{if(d.T=null,l.p=2,p)return p()}finally{d.T=m,l.p=y,l.d.f()}},Zt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(p,m))},Zt.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},Zt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,v=f(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?l.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&l.d.X(p,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Zt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=f(m.as,m.crossOrigin);l.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(p)},Zt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=f(y,m.crossOrigin);l.d.L(p,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Zt.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=f(m.as,m.crossOrigin);l.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(p)},Zt.requestFormReset=function(p){l.d.r(p)},Zt.unstable_batchedUpdates=function(p,m){return p(m)},Zt.useFormState=function(p,m,y){return d.H.useFormState(p,m,y)},Zt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Zt.version="19.2.3",Zt}var Hm;function av(){if(Hm)return Ed.exports;Hm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ed.exports=Gb(),Ed.exports}var Pm;function Vb(){if(Pm)return Oi;Pm=1;var r=Pb(),t=tl(),s=av();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return p(h),e;if(g===o)return p(h),n;g=g.sibling}throw Error(l(188))}if(a.return!==o.return)a=h,o=g;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,o=g;break}if(E===o){x=!0,o=h,a=g;break}E=E.sibling}if(!x){for(E=g.child;E;){if(E===a){x=!0,a=g,o=h;break}if(E===o){x=!0,o=g,a=h;break}E=E.sibling}if(!x)throw Error(l(189))}}if(a.alternate!==o)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function O(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function I(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case N:return"Profiler";case A:return"StrictMode";case U:return"Suspense";case T:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case R:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case D:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:I(e.type)||"Memo";case G:n=e._payload,e=e._init;try{return I(e(n))}catch{}}return null}var K=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ue=[],de=-1;function M(e){return{current:e}}function P(e){0>de||(e.current=ue[de],ue[de]=null,de--)}function ie(e,n){de++,ue[de]=e.current,e.current=n}var pe=M(null),xe=M(null),ce=M(null),Oe=M(null);function Be(e,n){switch(ie(ce,n),ie(xe,e),ie(pe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?sm(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=sm(n),e=am(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(pe),ie(pe,e)}function ke(){P(pe),P(xe),P(ce)}function De(e){e.memoizedState!==null&&ie(Oe,e);var n=pe.current,a=am(n,e.type);n!==a&&(ie(xe,e),ie(pe,a))}function vt(e){xe.current===e&&(P(pe),P(xe)),Oe.current===e&&(P(Oe),Ei._currentValue=X)}var tt,We;function Ke(e){if(tt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);tt=n&&n[1]||"",We=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+e+We}var Pt=!1;function it(e,n){if(!e||Pt)return"";Pt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(te){var Z=te}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(te){Z=te}e.call(oe.prototype)}}else{try{throw Error()}catch(te){Z=te}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),x=g[0],E=g[1];if(x&&E){var B=x.split(`
`),W=E.split(`
`);for(h=o=0;o<B.length&&!B[o].includes("DetermineComponentFrameRoot");)o++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(o===B.length||h===W.length)for(o=B.length-1,h=W.length-1;1<=o&&0<=h&&B[o]!==W[h];)h--;for(;1<=o&&0<=h;o--,h--)if(B[o]!==W[h]){if(o!==1||h!==1)do if(o--,h--,0>h||B[o]!==W[h]){var ae=`
`+B[o].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=o&&0<=h);break}}}finally{Pt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ke(a):""}function cn(e,n){switch(e.tag){case 26:case 27:case 5:return Ke(e.type);case 16:return Ke("Lazy");case 13:return e.child!==n&&n!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return Ke("Activity");default:return""}}function bn(e){try{var n="",a=null;do n+=cn(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Lt=Object.prototype.hasOwnProperty,lt=r.unstable_scheduleCallback,Wt=r.unstable_cancelCallback,un=r.unstable_shouldYield,Dn=r.unstable_requestPaint,bt=r.unstable_now,tn=r.unstable_getCurrentPriorityLevel,nn=r.unstable_ImmediatePriority,Bt=r.unstable_UserBlockingPriority,gt=r.unstable_NormalPriority,dn=r.unstable_LowPriority,rn=r.unstable_IdlePriority,mt=r.log,wn=r.unstable_setDisableYieldValue,It=null,fe=null;function he(e){if(typeof mt=="function"&&wn(e),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(It,e)}catch{}}var ge=Math.clz32?Math.clz32:ee,Se=Math.log,Ie=Math.LN2;function ee(e){return e>>>=0,e===0?32:31-(Se(e)/Ie|0)|0}var ve=256,H=262144,re=4194304;function ne(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function me(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,g=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~g,o!==0?h=ne(o):(x&=E,x!==0?h=ne(x):a||(a=E&~e,a!==0&&(h=ne(a))))):(E=o&~g,E!==0?h=ne(E):x!==0?h=ne(x):a||(a=o&~e,a!==0&&(h=ne(a)))),h===0?0:n!==0&&n!==h&&(n&g)===0&&(g=h&-h,a=n&-n,g>=a||g===32&&(a&4194048)!==0)?n:h}function be(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Le(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var e=re;return re<<=1,(re&62914560)===0&&(re=4194304),e}function rt(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Pe(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Je(e,n,a,o,h,g){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,B=e.expirationTimes,W=e.hiddenUpdates;for(a=x&~a;0<a;){var ae=31-ge(a),oe=1<<ae;E[ae]=0,B[ae]=-1;var Z=W[ae];if(Z!==null)for(W[ae]=null,ae=0;ae<Z.length;ae++){var te=Z[ae];te!==null&&(te.lane&=-536870913)}a&=~oe}o!==0&&qe(e,o,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(x&~n))}function qe(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-ge(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Fe(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-ge(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Gt(e,n){var a=n&-n;return a=(a&42)!==0?1:Sn(a),(a&(e.suspendedLanes|n))!==0?0:a}function Sn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function cr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Qn(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Tm(e.type))}function Mr(e,n){var a=$.p;try{return $.p=e,n()}finally{$.p=a}}var zn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+zn,hn="__reactProps$"+zn,Ls="__reactContainer$"+zn,hc="__reactEvents$"+zn,T0="__reactListeners$"+zn,A0="__reactHandles$"+zn,Gh="__reactResources$"+zn,$a="__reactMarker$"+zn;function fc(e){delete e[Vt],delete e[hn],delete e[hc],delete e[T0],delete e[A0]}function Bs(e){var n=e[Vt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ls]||a[Vt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=hm(e);e!==null;){if(a=e[Vt])return a;e=hm(e)}return n}e=a,a=e.parentNode}return null}function Is(e){if(e=e[Vt]||e[Ls]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ha(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function qs(e){var n=e[Gh];return n||(n=e[Gh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function qt(e){e[$a]=!0}var Vh=new Set,Yh={};function cs(e,n){$s(e,n),$s(e+"Capture",n)}function $s(e,n){for(Yh[e]=n,e=0;e<n.length;e++)Vh.add(n[e])}var N0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kh={},Fh={};function O0(e){return Lt.call(Fh,e)?!0:Lt.call(Kh,e)?!1:N0.test(e)?Fh[e]=!0:(Kh[e]=!0,!1)}function yl(e,n,a){if(O0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function vl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ur(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Un(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function k0(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,g.call(this,x)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pc(e){if(!e._valueTracker){var n=Qh(e)?"checked":"value";e._valueTracker=k0(e,n,""+e[n])}}function Xh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Qh(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function xl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var D0=/[\n"\\]/g;function Mn(e){return e.replace(D0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gc(e,n,a,o,h,g,x,E){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),n!=null?x==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Un(n)):e.value!==""+Un(n)&&(e.value=""+Un(n)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),n!=null?mc(e,x,Un(n)):a!=null?mc(e,x,Un(a)):o!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Un(E):e.removeAttribute("name")}function Jh(e,n,a,o,h,g,x,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){pc(e);return}a=a!=null?""+Un(a):"",n=n!=null?""+Un(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),pc(e)}function mc(e,n,a){n==="number"&&xl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Hs(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Un(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Wh(e,n,a){if(n!=null&&(n=""+Un(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Un(a):""}function Zh(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(l(92));if(K(o)){if(1<o.length)throw Error(l(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Un(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),pc(e)}function Ps(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var z0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ef(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||z0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function tf(e,n,a){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&ef(e,h,o)}else for(var g in n)n.hasOwnProperty(g)&&ef(e,g,n[g])}function yc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),M0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(e){return M0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function dr(){}var vc=null;function xc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gs=null,Vs=null;function nf(e){var n=Is(e);if(n&&(e=n.stateNode)){var a=e[hn]||null;e:switch(e=n.stateNode,n.type){case"input":if(gc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[hn]||null;if(!h)throw Error(l(90));gc(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Xh(o)}break e;case"textarea":Wh(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Hs(e,!!a.multiple,n,!1)}}}var bc=!1;function rf(e,n,a){if(bc)return e(n,a);bc=!0;try{var o=e(n);return o}finally{if(bc=!1,(Gs!==null||Vs!==null)&&(lo(),Gs&&(n=Gs,e=Vs,Vs=Gs=null,nf(n),e)))for(n=0;n<e.length;n++)nf(e[n])}}function Pa(e,n){var a=e.stateNode;if(a===null)return null;var o=a[hn]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,n,typeof a));return a}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=!1;if(hr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){wc=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{wc=!1}var Lr=null,Sc=null,wl=null;function sf(){if(wl)return wl;var e,n=Sc,a=n.length,o,h="value"in Lr?Lr.value:Lr.textContent,g=h.length;for(e=0;e<a&&n[e]===h[e];e++);var x=a-e;for(o=1;o<=x&&n[a-o]===h[g-o];o++);return wl=h.slice(e,1<o?1-o:void 0)}function Sl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function af(){return!1}function fn(e){function n(a,o,h,g,x){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jl:af,this.isPropagationStopped=af,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),n}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=fn(us),Va=v({},us,{view:0,detail:0}),L0=fn(Va),jc,_c,Ya,Cl=v({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ya&&(Ya&&e.type==="mousemove"?(jc=e.screenX-Ya.screenX,_c=e.screenY-Ya.screenY):_c=jc=0,Ya=e),jc)},movementY:function(e){return"movementY"in e?e.movementY:_c}}),lf=fn(Cl),B0=v({},Cl,{dataTransfer:0}),I0=fn(B0),q0=v({},Va,{relatedTarget:0}),Cc=fn(q0),$0=v({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),H0=fn($0),P0=v({},us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G0=fn(P0),V0=v({},us,{data:0}),of=fn(V0),Y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=F0[e])?!!n[e]:!1}function Ec(){return Q0}var X0=v({},Va,{key:function(e){if(e.key){var n=Y0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ec,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J0=fn(X0),W0=v({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=fn(W0),Z0=v({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ec}),ex=fn(Z0),tx=v({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),nx=fn(tx),rx=v({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sx=fn(rx),ax=v({},us,{newState:0,oldState:0}),ix=fn(ax),lx=[9,13,27,32],Rc=hr&&"CompositionEvent"in window,Ka=null;hr&&"documentMode"in document&&(Ka=document.documentMode);var ox=hr&&"TextEvent"in window&&!Ka,uf=hr&&(!Rc||Ka&&8<Ka&&11>=Ka),df=" ",hf=!1;function ff(e,n){switch(e){case"keyup":return lx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ys=!1;function cx(e,n){switch(e){case"compositionend":return pf(n);case"keypress":return n.which!==32?null:(hf=!0,df);case"textInput":return e=n.data,e===df&&hf?null:e;default:return null}}function ux(e,n){if(Ys)return e==="compositionend"||!Rc&&ff(e,n)?(e=sf(),wl=Sc=Lr=null,Ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return uf&&n.locale!=="ko"?null:n.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!dx[e.type]:n==="textarea"}function mf(e,n,a,o){Gs?Vs?Vs.push(o):Vs=[o]:Gs=o,n=go(n,"onChange"),0<n.length&&(a=new _l("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Fa=null,Qa=null;function hx(e){Wg(e,0)}function El(e){var n=Ha(e);if(Xh(n))return e}function yf(e,n){if(e==="change")return n}var vf=!1;if(hr){var Tc;if(hr){var Ac="oninput"in document;if(!Ac){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),Ac=typeof xf.oninput=="function"}Tc=Ac}else Tc=!1;vf=Tc&&(!document.documentMode||9<document.documentMode)}function bf(){Fa&&(Fa.detachEvent("onpropertychange",wf),Qa=Fa=null)}function wf(e){if(e.propertyName==="value"&&El(Qa)){var n=[];mf(n,Qa,e,xc(e)),rf(hx,n)}}function fx(e,n,a){e==="focusin"?(bf(),Fa=n,Qa=a,Fa.attachEvent("onpropertychange",wf)):e==="focusout"&&bf()}function px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(Qa)}function gx(e,n){if(e==="click")return El(n)}function mx(e,n){if(e==="input"||e==="change")return El(n)}function yx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var jn=typeof Object.is=="function"?Object.is:yx;function Xa(e,n){if(jn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Lt.call(n,h)||!jn(e[h],n[h]))return!1}return!0}function Sf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jf(e,n){var a=Sf(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sf(a)}}function _f(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?_f(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Cf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=xl(e.document)}return n}function Nc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var vx=hr&&"documentMode"in document&&11>=document.documentMode,Ks=null,Oc=null,Ja=null,kc=!1;function Ef(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kc||Ks==null||Ks!==xl(o)||(o=Ks,"selectionStart"in o&&Nc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ja&&Xa(Ja,o)||(Ja=o,o=go(Oc,"onSelect"),0<o.length&&(n=new _l("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Ks)))}function ds(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Fs={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},Dc={},Rf={};hr&&(Rf=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function hs(e){if(Dc[e])return Dc[e];if(!Fs[e])return e;var n=Fs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Rf)return Dc[e]=n[a];return e}var Tf=hs("animationend"),Af=hs("animationiteration"),Nf=hs("animationstart"),xx=hs("transitionrun"),bx=hs("transitionstart"),wx=hs("transitioncancel"),Of=hs("transitionend"),kf=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");function Xn(e,n){kf.set(e,n),cs(n,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ln=[],Qs=0,Uc=0;function Tl(){for(var e=Qs,n=Uc=Qs=0;n<e;){var a=Ln[n];Ln[n++]=null;var o=Ln[n];Ln[n++]=null;var h=Ln[n];Ln[n++]=null;var g=Ln[n];if(Ln[n++]=null,o!==null&&h!==null){var x=o.pending;x===null?h.next=h:(h.next=x.next,x.next=h),o.pending=h}g!==0&&Df(a,h,g)}}function Al(e,n,a,o){Ln[Qs++]=e,Ln[Qs++]=n,Ln[Qs++]=a,Ln[Qs++]=o,Uc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Mc(e,n,a,o){return Al(e,n,a,o),Nl(e)}function fs(e,n){return Al(e,null,null,n),Nl(e)}function Df(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,g=e.return;g!==null;)g.childLanes|=a,o=g.alternate,o!==null&&(o.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&n!==null&&(h=31-ge(a),e=g.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),g):null}function Nl(e){if(50<xi)throw xi=0,Vu=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Xs={};function Sx(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,n,a,o){return new Sx(e,n,a,o)}function Lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fr(e,n){var a=e.alternate;return a===null?(a=_n(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function zf(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ol(e,n,a,o,h,g){var x=0;if(o=e,typeof e=="function")Lc(e)&&(x=1);else if(typeof e=="string")x=Rb(e,a,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=_n(31,a,n,h),e.elementType=q,e.lanes=g,e;case j:return ps(a.children,h,g,n);case A:x=8,h|=24;break;case N:return e=_n(12,a,n,h|2),e.elementType=N,e.lanes=g,e;case U:return e=_n(13,a,n,h),e.elementType=U,e.lanes=g,e;case T:return e=_n(19,a,n,h),e.elementType=T,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:x=10;break e;case C:x=9;break e;case D:x=11;break e;case L:x=14;break e;case G:x=16,o=null;break e}x=29,a=Error(l(130,e===null?"null":typeof e,"")),o=null}return n=_n(x,a,n,h),n.elementType=e,n.type=o,n.lanes=g,n}function ps(e,n,a,o){return e=_n(7,e,o,n),e.lanes=a,e}function Bc(e,n,a){return e=_n(6,e,null,n),e.lanes=a,e}function Uf(e){var n=_n(18,null,null,0);return n.stateNode=e,n}function Ic(e,n,a){return n=_n(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Mf=new WeakMap;function Bn(e,n){if(typeof e=="object"&&e!==null){var a=Mf.get(e);return a!==void 0?a:(n={value:e,source:n,stack:bn(n)},Mf.set(e,n),n)}return{value:e,source:n,stack:bn(n)}}var Js=[],Ws=0,kl=null,Wa=0,In=[],qn=0,Br=null,ar=1,ir="";function pr(e,n){Js[Ws++]=Wa,Js[Ws++]=kl,kl=e,Wa=n}function Lf(e,n,a){In[qn++]=ar,In[qn++]=ir,In[qn++]=Br,Br=e;var o=ar;e=ir;var h=32-ge(o)-1;o&=~(1<<h),a+=1;var g=32-ge(n)+h;if(30<g){var x=h-h%5;g=(o&(1<<x)-1).toString(32),o>>=x,h-=x,ar=1<<32-ge(n)+h|a<<h|o,ir=g+e}else ar=1<<g|a<<h|o,ir=e}function qc(e){e.return!==null&&(pr(e,1),Lf(e,1,0))}function $c(e){for(;e===kl;)kl=Js[--Ws],Js[Ws]=null,Wa=Js[--Ws],Js[Ws]=null;for(;e===Br;)Br=In[--qn],In[qn]=null,ir=In[--qn],In[qn]=null,ar=In[--qn],In[qn]=null}function Bf(e,n){In[qn++]=ar,In[qn++]=ir,In[qn++]=Br,ar=n.id,ir=n.overflow,Br=e}var Yt=null,ft=null,Qe=!1,Ir=null,$n=!1,Hc=Error(l(519));function qr(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Za(Bn(n,e)),Hc}function If(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Vt]=e,n[hn]=o,a){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(a=0;a<wi.length;a++)He(wi[a],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":He("invalid",n),Jh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":He("invalid",n);break;case"textarea":He("invalid",n),Zh(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||nm(n.textContent,a)?(o.popover!=null&&(He("beforetoggle",n),He("toggle",n)),o.onScroll!=null&&He("scroll",n),o.onScrollEnd!=null&&He("scrollend",n),o.onClick!=null&&(n.onclick=dr),n=!0):n=!1,n||qr(e,!0)}function qf(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Yt=Yt.return}}function Zs(e){if(e!==Yt)return!1;if(!Qe)return qf(e),Qe=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||id(e.type,e.memoizedProps)),a=!a),a&&ft&&qr(e),qf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ft=dm(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ft=dm(e)}else n===27?(n=ft,es(e.type)?(e=dd,dd=null,ft=e):ft=n):ft=Yt?Pn(e.stateNode.nextSibling):null;return!0}function gs(){ft=Yt=null,Qe=!1}function Pc(){var e=Ir;return e!==null&&(yn===null?yn=e:yn.push.apply(yn,e),Ir=null),e}function Za(e){Ir===null?Ir=[e]:Ir.push(e)}var Gc=M(null),ms=null,gr=null;function $r(e,n,a){ie(Gc,n._currentValue),n._currentValue=a}function mr(e){e._currentValue=Gc.current,P(Gc)}function Vc(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Yc(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var x=h.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=h;for(var B=0;B<n.length;B++)if(E.context===n[B]){g.lanes|=a,E=g.alternate,E!==null&&(E.lanes|=a),Vc(g.return,a,e),o||(x=null);break e}g=E.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(l(341));x.lanes|=a,g=x.alternate,g!==null&&(g.lanes|=a),Vc(x,a,e),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===e){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function ea(e,n,a,o){e=null;for(var h=n,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(l(387));if(x=x.memoizedProps,x!==null){var E=h.type;jn(h.pendingProps.value,x.value)||(e!==null?e.push(E):e=[E])}}else if(h===Oe.current){if(x=h.alternate,x===null)throw Error(l(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Ei):e=[Ei])}h=h.return}e!==null&&Yc(n,e,a,o),n.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ys(e){ms=e,gr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Kt(e){return $f(ms,e)}function zl(e,n){return ms===null&&ys(e),$f(e,n)}function $f(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},gr===null){if(e===null)throw Error(l(308));gr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else gr=gr.next=n;return a}var jx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},_x=r.unstable_scheduleCallback,Cx=r.unstable_NormalPriority,Rt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new jx,data:new Map,refCount:0}}function ei(e){e.refCount--,e.refCount===0&&_x(Cx,function(){e.controller.abort()})}var ti=null,Fc=0,ta=0,na=null;function Ex(e,n){if(ti===null){var a=ti=[];Fc=0,ta=Ju(),na={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Fc++,n.then(Hf,Hf),n}function Hf(){if(--Fc===0&&ti!==null){na!==null&&(na.status="fulfilled");var e=ti;ti=null,ta=0,na=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Rx(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Pf=k.S;k.S=function(e,n){Eg=bt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ex(e,n),Pf!==null&&Pf(e,n)};var vs=M(null);function Qc(){var e=vs.current;return e!==null?e:dt.pooledCache}function Ul(e,n){n===null?ie(vs,vs.current):ie(vs,n.pool)}function Gf(){var e=Qc();return e===null?null:{parent:Rt._currentValue,pool:e}}var ra=Error(l(460)),Xc=Error(l(474)),Ml=Error(l(542)),Ll={then:function(){}};function Vf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yf(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(dr,dr),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Ff(e),e;default:if(typeof n.status=="string")n.then(dr,dr);else{if(e=dt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Ff(e),e}throw bs=n,ra}}function xs(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(bs=a,ra):a}}var bs=null;function Kf(){if(bs===null)throw Error(l(459));var e=bs;return bs=null,e}function Ff(e){if(e===ra||e===Ml)throw Error(l(483))}var sa=null,ni=0;function Bl(e){var n=ni;return ni+=1,sa===null&&(sa=[]),Yf(sa,e,n)}function ri(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Il(e,n){throw n.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qf(e){function n(Q,Y){if(e){var J=Q.deletions;J===null?(Q.deletions=[Y],Q.flags|=16):J.push(Y)}}function a(Q,Y){if(!e)return null;for(;Y!==null;)n(Q,Y),Y=Y.sibling;return null}function o(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function h(Q,Y){return Q=fr(Q,Y),Q.index=0,Q.sibling=null,Q}function g(Q,Y,J){return Q.index=J,e?(J=Q.alternate,J!==null?(J=J.index,J<Y?(Q.flags|=67108866,Y):J):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function x(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function E(Q,Y,J,le){return Y===null||Y.tag!==6?(Y=Bc(J,Q.mode,le),Y.return=Q,Y):(Y=h(Y,J),Y.return=Q,Y)}function B(Q,Y,J,le){var Ee=J.type;return Ee===j?ae(Q,Y,J.props.children,le,J.key):Y!==null&&(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===G&&xs(Ee)===Y.type)?(Y=h(Y,J.props),ri(Y,J),Y.return=Q,Y):(Y=Ol(J.type,J.key,J.props,null,Q.mode,le),ri(Y,J),Y.return=Q,Y)}function W(Q,Y,J,le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=Ic(J,Q.mode,le),Y.return=Q,Y):(Y=h(Y,J.children||[]),Y.return=Q,Y)}function ae(Q,Y,J,le,Ee){return Y===null||Y.tag!==7?(Y=ps(J,Q.mode,le,Ee),Y.return=Q,Y):(Y=h(Y,J),Y.return=Q,Y)}function oe(Q,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Bc(""+Y,Q.mode,J),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return J=Ol(Y.type,Y.key,Y.props,null,Q.mode,J),ri(J,Y),J.return=Q,J;case _:return Y=Ic(Y,Q.mode,J),Y.return=Q,Y;case G:return Y=xs(Y),oe(Q,Y,J)}if(K(Y)||O(Y))return Y=ps(Y,Q.mode,J,null),Y.return=Q,Y;if(typeof Y.then=="function")return oe(Q,Bl(Y),J);if(Y.$$typeof===R)return oe(Q,zl(Q,Y),J);Il(Q,Y)}return null}function Z(Q,Y,J,le){var Ee=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ee!==null?null:E(Q,Y,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===Ee?B(Q,Y,J,le):null;case _:return J.key===Ee?W(Q,Y,J,le):null;case G:return J=xs(J),Z(Q,Y,J,le)}if(K(J)||O(J))return Ee!==null?null:ae(Q,Y,J,le,null);if(typeof J.then=="function")return Z(Q,Y,Bl(J),le);if(J.$$typeof===R)return Z(Q,Y,zl(Q,J),le);Il(Q,J)}return null}function te(Q,Y,J,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Q=Q.get(J)||null,E(Y,Q,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case S:return Q=Q.get(le.key===null?J:le.key)||null,B(Y,Q,le,Ee);case _:return Q=Q.get(le.key===null?J:le.key)||null,W(Y,Q,le,Ee);case G:return le=xs(le),te(Q,Y,J,le,Ee)}if(K(le)||O(le))return Q=Q.get(J)||null,ae(Y,Q,le,Ee,null);if(typeof le.then=="function")return te(Q,Y,J,Bl(le),Ee);if(le.$$typeof===R)return te(Q,Y,J,zl(Y,le),Ee);Il(Y,le)}return null}function we(Q,Y,J,le){for(var Ee=null,Ze=null,je=Y,Me=Y=0,Ve=null;je!==null&&Me<J.length;Me++){je.index>Me?(Ve=je,je=null):Ve=je.sibling;var et=Z(Q,je,J[Me],le);if(et===null){je===null&&(je=Ve);break}e&&je&&et.alternate===null&&n(Q,je),Y=g(et,Y,Me),Ze===null?Ee=et:Ze.sibling=et,Ze=et,je=Ve}if(Me===J.length)return a(Q,je),Qe&&pr(Q,Me),Ee;if(je===null){for(;Me<J.length;Me++)je=oe(Q,J[Me],le),je!==null&&(Y=g(je,Y,Me),Ze===null?Ee=je:Ze.sibling=je,Ze=je);return Qe&&pr(Q,Me),Ee}for(je=o(je);Me<J.length;Me++)Ve=te(je,Q,Me,J[Me],le),Ve!==null&&(e&&Ve.alternate!==null&&je.delete(Ve.key===null?Me:Ve.key),Y=g(Ve,Y,Me),Ze===null?Ee=Ve:Ze.sibling=Ve,Ze=Ve);return e&&je.forEach(function(as){return n(Q,as)}),Qe&&pr(Q,Me),Ee}function Re(Q,Y,J,le){if(J==null)throw Error(l(151));for(var Ee=null,Ze=null,je=Y,Me=Y=0,Ve=null,et=J.next();je!==null&&!et.done;Me++,et=J.next()){je.index>Me?(Ve=je,je=null):Ve=je.sibling;var as=Z(Q,je,et.value,le);if(as===null){je===null&&(je=Ve);break}e&&je&&as.alternate===null&&n(Q,je),Y=g(as,Y,Me),Ze===null?Ee=as:Ze.sibling=as,Ze=as,je=Ve}if(et.done)return a(Q,je),Qe&&pr(Q,Me),Ee;if(je===null){for(;!et.done;Me++,et=J.next())et=oe(Q,et.value,le),et!==null&&(Y=g(et,Y,Me),Ze===null?Ee=et:Ze.sibling=et,Ze=et);return Qe&&pr(Q,Me),Ee}for(je=o(je);!et.done;Me++,et=J.next())et=te(je,Q,Me,et.value,le),et!==null&&(e&&et.alternate!==null&&je.delete(et.key===null?Me:et.key),Y=g(et,Y,Me),Ze===null?Ee=et:Ze.sibling=et,Ze=et);return e&&je.forEach(function(Bb){return n(Q,Bb)}),Qe&&pr(Q,Me),Ee}function ut(Q,Y,J,le){if(typeof J=="object"&&J!==null&&J.type===j&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var Ee=J.key;Y!==null;){if(Y.key===Ee){if(Ee=J.type,Ee===j){if(Y.tag===7){a(Q,Y.sibling),le=h(Y,J.props.children),le.return=Q,Q=le;break e}}else if(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===G&&xs(Ee)===Y.type){a(Q,Y.sibling),le=h(Y,J.props),ri(le,J),le.return=Q,Q=le;break e}a(Q,Y);break}else n(Q,Y);Y=Y.sibling}J.type===j?(le=ps(J.props.children,Q.mode,le,J.key),le.return=Q,Q=le):(le=Ol(J.type,J.key,J.props,null,Q.mode,le),ri(le,J),le.return=Q,Q=le)}return x(Q);case _:e:{for(Ee=J.key;Y!==null;){if(Y.key===Ee)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){a(Q,Y.sibling),le=h(Y,J.children||[]),le.return=Q,Q=le;break e}else{a(Q,Y);break}else n(Q,Y);Y=Y.sibling}le=Ic(J,Q.mode,le),le.return=Q,Q=le}return x(Q);case G:return J=xs(J),ut(Q,Y,J,le)}if(K(J))return we(Q,Y,J,le);if(O(J)){if(Ee=O(J),typeof Ee!="function")throw Error(l(150));return J=Ee.call(J),Re(Q,Y,J,le)}if(typeof J.then=="function")return ut(Q,Y,Bl(J),le);if(J.$$typeof===R)return ut(Q,Y,zl(Q,J),le);Il(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(a(Q,Y.sibling),le=h(Y,J),le.return=Q,Q=le):(a(Q,Y),le=Bc(J,Q.mode,le),le.return=Q,Q=le),x(Q)):a(Q,Y)}return function(Q,Y,J,le){try{ni=0;var Ee=ut(Q,Y,J,le);return sa=null,Ee}catch(je){if(je===ra||je===Ml)throw je;var Ze=_n(29,je,null,Q.mode);return Ze.lanes=le,Ze.return=Q,Ze}}}var ws=Qf(!0),Xf=Qf(!1),Hr=!1;function Jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(nt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Nl(e),Df(e,null,a),n}return Al(e,o,n,a),Nl(e)}function si(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Fe(e,a)}}function Zc(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?h=g=x:g=g.next=x,a=a.next}while(a!==null);g===null?h=g=n:g=g.next=n}else h=g=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var eu=!1;function ai(){if(eu){var e=na;if(e!==null)throw e}}function ii(e,n,a,o){eu=!1;var h=e.updateQueue;Hr=!1;var g=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var B=E,W=B.next;B.next=null,x===null?g=W:x.next=W,x=B;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==x&&(E===null?ae.firstBaseUpdate=W:E.next=W,ae.lastBaseUpdate=B))}if(g!==null){var oe=h.baseState;x=0,ae=W=B=null,E=g;do{var Z=E.lane&-536870913,te=Z!==E.lane;if(te?(Ge&Z)===Z:(o&Z)===Z){Z!==0&&Z===ta&&(eu=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var we=e,Re=E;Z=n;var ut=a;switch(Re.tag){case 1:if(we=Re.payload,typeof we=="function"){oe=we.call(ut,oe,Z);break e}oe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Re.payload,Z=typeof we=="function"?we.call(ut,oe,Z):we,Z==null)break e;oe=v({},oe,Z);break e;case 2:Hr=!0}}Z=E.callback,Z!==null&&(e.flags|=64,te&&(e.flags|=8192),te=h.callbacks,te===null?h.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?(W=ae=te,B=oe):ae=ae.next=te,x|=Z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;te=E,E=te.next,te.next=null,h.lastBaseUpdate=te,h.shared.pending=null}}while(!0);ae===null&&(B=oe),h.baseState=B,h.firstBaseUpdate=W,h.lastBaseUpdate=ae,g===null&&(h.shared.lanes=0),Qr|=x,e.lanes=x,e.memoizedState=oe}}function Jf(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function Wf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Jf(a[e],n)}var aa=M(null),ql=M(0);function Zf(e,n){e=Cr,ie(ql,e),ie(aa,n),Cr=e|n.baseLanes}function tu(){ie(ql,Cr),ie(aa,aa.current)}function nu(){Cr=ql.current,P(aa),P(ql)}var Cn=M(null),Hn=null;function Vr(e){var n=e.alternate;ie(Ct,Ct.current&1),ie(Cn,e),Hn===null&&(n===null||aa.current!==null||n.memoizedState!==null)&&(Hn=e)}function ru(e){ie(Ct,Ct.current),ie(Cn,e),Hn===null&&(Hn=e)}function ep(e){e.tag===22?(ie(Ct,Ct.current),ie(Cn,e),Hn===null&&(Hn=e)):Yr()}function Yr(){ie(Ct,Ct.current),ie(Cn,Cn.current)}function En(e){P(Cn),Hn===e&&(Hn=null),P(Ct)}var Ct=M(0);function $l(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cd(a)||ud(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var yr=0,Ue=null,ot=null,Tt=null,Hl=!1,ia=!1,Ss=!1,Pl=0,li=0,la=null,Tx=0;function wt(){throw Error(l(321))}function su(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!jn(e[a],n[a]))return!1;return!0}function au(e,n,a,o,h,g){return yr=g,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Lp:bu,Ss=!1,g=a(o,h),Ss=!1,ia&&(g=np(n,a,o,h)),tp(e),g}function tp(e){k.H=ui;var n=ot!==null&&ot.next!==null;if(yr=0,Tt=ot=Ue=null,Hl=!1,li=0,la=null,n)throw Error(l(300));e===null||At||(e=e.dependencies,e!==null&&Dl(e)&&(At=!0))}function np(e,n,a,o){Ue=e;var h=0;do{if(ia&&(la=null),li=0,ia=!1,25<=h)throw Error(l(301));if(h+=1,Tt=ot=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}k.H=Bp,g=n(a,o)}while(ia);return g}function Ax(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?oi(n):n,e=e.useState()[0],(ot!==null?ot.memoizedState:null)!==e&&(Ue.flags|=1024),n}function iu(){var e=Pl!==0;return Pl=0,e}function lu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function ou(e){if(Hl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Hl=!1}yr=0,Tt=ot=Ue=null,ia=!1,li=Pl=0,la=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ue.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function Et(){if(ot===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var n=Tt===null?Ue.memoizedState:Tt.next;if(n!==null)Tt=n,ot=e;else{if(e===null)throw Ue.alternate===null?Error(l(467)):Error(l(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Tt===null?Ue.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function Gl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oi(e){var n=li;return li+=1,la===null&&(la=[]),e=Yf(la,e,n),n=Ue,(Tt===null?n.memoizedState:Tt.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Lp:bu),e}function Vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return oi(e);if(e.$$typeof===R)return Kt(e)}throw Error(l(438,String(e)))}function cu(e){var n=null,a=Ue.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Ue.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Gl(),Ue.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function vr(e,n){return typeof n=="function"?n(e):n}function Yl(e){var n=Et();return uu(n,ot,e)}function uu(e,n,a){var o=e.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=a;var h=e.baseQueue,g=o.pending;if(g!==null){if(h!==null){var x=h.next;h.next=g.next,g.next=x}n.baseQueue=h=g,o.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{n=h.next;var E=x=null,B=null,W=n,ae=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Ge&oe)===oe:(yr&oe)===oe){var Z=W.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===ta&&(ae=!0);else if((yr&Z)===Z){W=W.next,Z===ta&&(ae=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(E=B=oe,x=g):B=B.next=oe,Ue.lanes|=Z,Qr|=Z;oe=W.action,Ss&&a(g,oe),g=W.hasEagerState?W.eagerState:a(g,oe)}else Z={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(E=B=Z,x=g):B=B.next=Z,Ue.lanes|=oe,Qr|=oe;W=W.next}while(W!==null&&W!==n);if(B===null?x=g:B.next=E,!jn(g,e.memoizedState)&&(At=!0,ae&&(a=na,a!==null)))throw a;e.memoizedState=g,e.baseState=x,e.baseQueue=B,o.lastRenderedState=g}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function du(e){var n=Et(),a=n.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,g=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do g=e(g,x.action),x=x.next;while(x!==h);jn(g,n.memoizedState)||(At=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),a.lastRenderedState=g}return[g,o]}function rp(e,n,a){var o=Ue,h=Et(),g=Qe;if(g){if(a===void 0)throw Error(l(407));a=a()}else a=n();var x=!jn((ot||h).memoizedState,a);if(x&&(h.memoizedState=a,At=!0),h=h.queue,pu(ip.bind(null,o,h,e),[e]),h.getSnapshot!==n||x||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,oa(9,{destroy:void 0},ap.bind(null,o,h,a,n),null),dt===null)throw Error(l(349));g||(yr&127)!==0||sp(o,n,a)}return a}function sp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Ue.updateQueue,n===null?(n=Gl(),Ue.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function ap(e,n,a,o){n.value=a,n.getSnapshot=o,lp(n)&&op(e)}function ip(e,n,a){return a(function(){lp(n)&&op(e)})}function lp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!jn(e,a)}catch{return!0}}function op(e){var n=fs(e,2);n!==null&&vn(n,e,2)}function hu(e){var n=sn();if(typeof e=="function"){var a=e;if(e=a(),Ss){he(!0);try{a()}finally{he(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:e},n}function cp(e,n,a,o){return e.baseState=a,uu(e,ot,typeof o=="function"?o:vr)}function Nx(e,n,a,o,h){if(Ql(e))throw Error(l(485));if(e=n.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};k.T!==null?a(!0):g.isTransition=!1,o(g),a=n.pending,a===null?(g.next=n.pending=g,up(n,g)):(g.next=a.next,n.pending=a.next=g)}}function up(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var g=k.T,x={};k.T=x;try{var E=a(h,o),B=k.S;B!==null&&B(x,E),dp(e,n,E)}catch(W){fu(e,n,W)}finally{g!==null&&x.types!==null&&(g.types=x.types),k.T=g}}else try{g=a(h,o),dp(e,n,g)}catch(W){fu(e,n,W)}}function dp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){hp(e,n,o)},function(o){return fu(e,n,o)}):hp(e,n,a)}function hp(e,n,a){n.status="fulfilled",n.value=a,fp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,up(e,a)))}function fu(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,fp(n),n=n.next;while(n!==o)}e.action=null}function fp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function pp(e,n){return n}function gp(e,n){if(Qe){var a=dt.formState;if(a!==null){e:{var o=Ue;if(Qe){if(ft){t:{for(var h=ft,g=$n;h.nodeType!==8;){if(!g){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){ft=Pn(h.nextSibling),o=h.data==="F!";break e}}qr(o)}o=!1}o&&(n=a[0])}}return a=sn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:n},a.queue=o,a=zp.bind(null,Ue,o),o.dispatch=a,o=hu(!1),g=xu.bind(null,Ue,!1,o.queue),o=sn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=Nx.bind(null,Ue,h,g,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function mp(e){var n=Et();return yp(n,ot,e)}function yp(e,n,a){if(n=uu(e,n,pp)[0],e=Yl(vr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=oi(n)}catch(x){throw x===ra?Ml:x}else o=n;n=Et();var h=n.queue,g=h.dispatch;return a!==n.memoizedState&&(Ue.flags|=2048,oa(9,{destroy:void 0},Ox.bind(null,h,a),null)),[o,g,e]}function Ox(e,n){e.action=n}function vp(e){var n=Et(),a=ot;if(a!==null)return yp(n,a,e);Et(),n=n.memoizedState,a=Et();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function oa(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Gl(),Ue.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function xp(){return Et().memoizedState}function Kl(e,n,a,o){var h=sn();Ue.flags|=e,h.memoizedState=oa(1|n,{destroy:void 0},a,o===void 0?null:o)}function Fl(e,n,a,o){var h=Et();o=o===void 0?null:o;var g=h.memoizedState.inst;ot!==null&&o!==null&&su(o,ot.memoizedState.deps)?h.memoizedState=oa(n,g,a,o):(Ue.flags|=e,h.memoizedState=oa(1|n,g,a,o))}function bp(e,n){Kl(8390656,8,e,n)}function pu(e,n){Fl(2048,8,e,n)}function kx(e){Ue.flags|=4;var n=Ue.updateQueue;if(n===null)n=Gl(),Ue.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function wp(e){var n=Et().memoizedState;return kx({ref:n,nextImpl:e}),function(){if((nt&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function Sp(e,n){return Fl(4,2,e,n)}function jp(e,n){return Fl(4,4,e,n)}function _p(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Cp(e,n,a){a=a!=null?a.concat([e]):null,Fl(4,4,_p.bind(null,n,e),a)}function gu(){}function Ep(e,n){var a=Et();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&su(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Rp(e,n){var a=Et();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&su(n,o[1]))return o[0];if(o=e(),Ss){he(!0);try{e()}finally{he(!1)}}return a.memoizedState=[o,n],o}function mu(e,n,a){return a===void 0||(yr&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Tg(),Ue.lanes|=e,Qr|=e,a)}function Tp(e,n,a,o){return jn(a,n)?a:aa.current!==null?(e=mu(e,a,o),jn(e,n)||(At=!0),e):(yr&42)===0||(yr&1073741824)!==0&&(Ge&261930)===0?(At=!0,e.memoizedState=a):(e=Tg(),Ue.lanes|=e,Qr|=e,n)}function Ap(e,n,a,o,h){var g=$.p;$.p=g!==0&&8>g?g:8;var x=k.T,E={};k.T=E,xu(e,!1,n,a);try{var B=h(),W=k.S;if(W!==null&&W(E,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=Rx(B,o);ci(e,n,ae,An(e))}else ci(e,n,o,An(e))}catch(oe){ci(e,n,{then:function(){},status:"rejected",reason:oe},An())}finally{$.p=g,x!==null&&E.types!==null&&(x.types=E.types),k.T=x}}function Dx(){}function yu(e,n,a,o){if(e.tag!==5)throw Error(l(476));var h=Np(e).queue;Ap(e,h,n,X,a===null?Dx:function(){return Op(e),a(o)})}function Np(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:X},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Op(e){var n=Np(e);n.next===null&&(n=e.alternate.memoizedState),ci(e,n.next.queue,{},An())}function vu(){return Kt(Ei)}function kp(){return Et().memoizedState}function Dp(){return Et().memoizedState}function zx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=An();e=Pr(a);var o=Gr(n,e,a);o!==null&&(vn(o,n,a),si(o,n,a)),n={cache:Kc()},e.payload=n;return}n=n.return}}function Ux(e,n,a){var o=An();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ql(e)?Up(n,a):(a=Mc(e,n,a,o),a!==null&&(vn(a,e,o),Mp(a,n,o)))}function zp(e,n,a){var o=An();ci(e,n,a,o)}function ci(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ql(e))Up(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var x=n.lastRenderedState,E=g(x,a);if(h.hasEagerState=!0,h.eagerState=E,jn(E,x))return Al(e,n,h,0),dt===null&&Tl(),!1}catch{}if(a=Mc(e,n,h,o),a!==null)return vn(a,e,o),Mp(a,n,o),!0}return!1}function xu(e,n,a,o){if(o={lane:2,revertLane:Ju(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ql(e)){if(n)throw Error(l(479))}else n=Mc(e,a,o,2),n!==null&&vn(n,e,2)}function Ql(e){var n=e.alternate;return e===Ue||n!==null&&n===Ue}function Up(e,n){ia=Hl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Mp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Fe(e,a)}}var ui={readContext:Kt,use:Vl,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};ui.useEffectEvent=wt;var Lp={readContext:Kt,use:Vl,useCallback:function(e,n){return sn().memoizedState=[e,n===void 0?null:n],e},useContext:Kt,useEffect:bp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Kl(4194308,4,_p.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Kl(4194308,4,e,n)},useInsertionEffect:function(e,n){Kl(4,2,e,n)},useMemo:function(e,n){var a=sn();n=n===void 0?null:n;var o=e();if(Ss){he(!0);try{e()}finally{he(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=sn();if(a!==void 0){var h=a(n);if(Ss){he(!0);try{a(n)}finally{he(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Ux.bind(null,Ue,e),[o.memoizedState,e]},useRef:function(e){var n=sn();return e={current:e},n.memoizedState=e},useState:function(e){e=hu(e);var n=e.queue,a=zp.bind(null,Ue,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:gu,useDeferredValue:function(e,n){var a=sn();return mu(a,e,n)},useTransition:function(){var e=hu(!1);return e=Ap.bind(null,Ue,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Ue,h=sn();if(Qe){if(a===void 0)throw Error(l(407));a=a()}else{if(a=n(),dt===null)throw Error(l(349));(Ge&127)!==0||sp(o,n,a)}h.memoizedState=a;var g={value:a,getSnapshot:n};return h.queue=g,bp(ip.bind(null,o,g,e),[e]),o.flags|=2048,oa(9,{destroy:void 0},ap.bind(null,o,g,a,n),null),a},useId:function(){var e=sn(),n=dt.identifierPrefix;if(Qe){var a=ir,o=ar;a=(o&~(1<<32-ge(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Pl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Tx++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:vu,useFormState:gp,useActionState:gp,useOptimistic:function(e){var n=sn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=xu.bind(null,Ue,!0,a),a.dispatch=n,[e,n]},useMemoCache:cu,useCacheRefresh:function(){return sn().memoizedState=zx.bind(null,Ue)},useEffectEvent:function(e){var n=sn(),a={impl:e};return n.memoizedState=a,function(){if((nt&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},bu={readContext:Kt,use:Vl,useCallback:Ep,useContext:Kt,useEffect:pu,useImperativeHandle:Cp,useInsertionEffect:Sp,useLayoutEffect:jp,useMemo:Rp,useReducer:Yl,useRef:xp,useState:function(){return Yl(vr)},useDebugValue:gu,useDeferredValue:function(e,n){var a=Et();return Tp(a,ot.memoizedState,e,n)},useTransition:function(){var e=Yl(vr)[0],n=Et().memoizedState;return[typeof e=="boolean"?e:oi(e),n]},useSyncExternalStore:rp,useId:kp,useHostTransitionStatus:vu,useFormState:mp,useActionState:mp,useOptimistic:function(e,n){var a=Et();return cp(a,ot,e,n)},useMemoCache:cu,useCacheRefresh:Dp};bu.useEffectEvent=wp;var Bp={readContext:Kt,use:Vl,useCallback:Ep,useContext:Kt,useEffect:pu,useImperativeHandle:Cp,useInsertionEffect:Sp,useLayoutEffect:jp,useMemo:Rp,useReducer:du,useRef:xp,useState:function(){return du(vr)},useDebugValue:gu,useDeferredValue:function(e,n){var a=Et();return ot===null?mu(a,e,n):Tp(a,ot.memoizedState,e,n)},useTransition:function(){var e=du(vr)[0],n=Et().memoizedState;return[typeof e=="boolean"?e:oi(e),n]},useSyncExternalStore:rp,useId:kp,useHostTransitionStatus:vu,useFormState:vp,useActionState:vp,useOptimistic:function(e,n){var a=Et();return ot!==null?cp(a,ot,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:cu,useCacheRefresh:Dp};Bp.useEffectEvent=wp;function wu(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:v({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Su={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=An(),h=Pr(o);h.payload=n,a!=null&&(h.callback=a),n=Gr(e,h,o),n!==null&&(vn(n,e,o),si(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=An(),h=Pr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Gr(e,h,o),n!==null&&(vn(n,e,o),si(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=An(),o=Pr(a);o.tag=2,n!=null&&(o.callback=n),n=Gr(e,o,a),n!==null&&(vn(n,e,a),si(n,e,a))}};function Ip(e,n,a,o,h,g,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,x):n.prototype&&n.prototype.isPureReactComponent?!Xa(a,o)||!Xa(h,g):!0}function qp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Su.enqueueReplaceState(n,n.state,null)}function js(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=v({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function $p(e){Rl(e)}function Hp(e){console.error(e)}function Pp(e){Rl(e)}function Xl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Gp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ju(e,n,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){Xl(e,n)},a}function Vp(e){return e=Pr(e),e.tag=3,e}function Yp(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var g=o.value;e.payload=function(){return h(g)},e.callback=function(){Gp(n,a,o)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Gp(n,a,o),typeof h!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function Mx(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&ea(n,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?oo():a.alternate===null&&St===0&&(St=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Ll?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Fu(e,o,h)),!1;case 22:return a.flags|=65536,o===Ll?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Fu(e,o,h)),!1}throw Error(l(435,a.tag))}return Fu(e,o,h),oo(),!1}if(Qe)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Hc&&(e=Error(l(422),{cause:o}),Za(Bn(e,a)))):(o!==Hc&&(n=Error(l(423),{cause:o}),Za(Bn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Bn(o,a),h=ju(e.stateNode,o,h),Zc(e,h),St!==4&&(St=2)),!1;var g=Error(l(520),{cause:o});if(g=Bn(g,a),vi===null?vi=[g]:vi.push(g),St!==4&&(St=2),n===null)return!0;o=Bn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=ju(a.stateNode,o,e),Zc(a,e),!1;case 1:if(n=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xr===null||!Xr.has(g))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Vp(h),Yp(h,e,a,o),Zc(a,h),!1}a=a.return}while(a!==null);return!1}var _u=Error(l(461)),At=!1;function Ft(e,n,a,o){n.child=e===null?Xf(n,null,a,o):ws(n,e.child,a,o)}function Kp(e,n,a,o,h){a=a.render;var g=n.ref;if("ref"in o){var x={};for(var E in o)E!=="ref"&&(x[E]=o[E])}else x=o;return ys(n),o=au(e,n,a,x,g,h),E=iu(),e!==null&&!At?(lu(e,n,h),xr(e,n,h)):(Qe&&E&&qc(n),n.flags|=1,Ft(e,n,o,h),n.child)}function Fp(e,n,a,o,h){if(e===null){var g=a.type;return typeof g=="function"&&!Lc(g)&&g.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=g,Qp(e,n,g,o,h)):(e=Ol(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!ku(e,h)){var x=g.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(x,o)&&e.ref===n.ref)return xr(e,n,h)}return n.flags|=1,e=fr(g,o),e.ref=n.ref,e.return=n,n.child=e}function Qp(e,n,a,o,h){if(e!==null){var g=e.memoizedProps;if(Xa(g,o)&&e.ref===n.ref)if(At=!1,n.pendingProps=o=g,ku(e,h))(e.flags&131072)!==0&&(At=!0);else return n.lanes=e.lanes,xr(e,n,h)}return Cu(e,n,a,o,h)}function Xp(e,n,a,o){var h=o.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~g}else o=0,n.child=null;return Jp(e,n,g,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ul(n,g!==null?g.cachePool:null),g!==null?Zf(n,g):tu(),ep(n);else return o=n.lanes=536870912,Jp(e,n,g!==null?g.baseLanes|a:a,a,o)}else g!==null?(Ul(n,g.cachePool),Zf(n,g),Yr(),n.memoizedState=null):(e!==null&&Ul(n,null),tu(),Yr());return Ft(e,n,h,a),n.child}function di(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Jp(e,n,a,o,h){var g=Qc();return g=g===null?null:{parent:Rt._currentValue,pool:g},n.memoizedState={baseLanes:a,cachePool:g},e!==null&&Ul(n,null),tu(),ep(n),e!==null&&ea(e,n,o,!0),n.childLanes=h,null}function Jl(e,n){return n=Zl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Wp(e,n,a){return ws(n,e.child,null,a),e=Jl(n,n.pendingProps),e.flags|=2,En(n),n.memoizedState=null,e}function Lx(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Qe){if(o.mode==="hidden")return e=Jl(n,o),n.lanes=536870912,di(null,e);if(ru(n),(e=ft)?(e=um(e,$n),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Br!==null?{id:ar,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},a=Uf(e),a.return=n,n.child=a,Yt=n,ft=null)):e=null,e===null)throw qr(n);return n.lanes=536870912,null}return Jl(n,o)}var g=e.memoizedState;if(g!==null){var x=g.dehydrated;if(ru(n),h)if(n.flags&256)n.flags&=-257,n=Wp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if(At||ea(e,n,a,!1),h=(a&e.childLanes)!==0,At||h){if(o=dt,o!==null&&(x=Gt(o,a),x!==0&&x!==g.retryLane))throw g.retryLane=x,fs(e,x),vn(o,e,x),_u;oo(),n=Wp(e,n,a)}else e=g.treeContext,ft=Pn(x.nextSibling),Yt=n,Qe=!0,Ir=null,$n=!1,e!==null&&Bf(n,e),n=Jl(n,o),n.flags|=4096;return n}return e=fr(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Wl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Cu(e,n,a,o,h){return ys(n),a=au(e,n,a,o,void 0,h),o=iu(),e!==null&&!At?(lu(e,n,h),xr(e,n,h)):(Qe&&o&&qc(n),n.flags|=1,Ft(e,n,a,h),n.child)}function Zp(e,n,a,o,h,g){return ys(n),n.updateQueue=null,a=np(n,o,a,h),tp(e),o=iu(),e!==null&&!At?(lu(e,n,g),xr(e,n,g)):(Qe&&o&&qc(n),n.flags|=1,Ft(e,n,a,g),n.child)}function eg(e,n,a,o,h){if(ys(n),n.stateNode===null){var g=Xs,x=a.contextType;typeof x=="object"&&x!==null&&(g=Kt(x)),g=new a(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Su,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},Jc(n),x=a.contextType,g.context=typeof x=="object"&&x!==null?Kt(x):Xs,g.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(wu(n,a,x,o),g.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&Su.enqueueReplaceState(g,g.state,null),ii(n,o,g,h),ai(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){g=n.stateNode;var E=n.memoizedProps,B=js(a,E);g.props=B;var W=g.context,ae=a.contextType;x=Xs,typeof ae=="object"&&ae!==null&&(x=Kt(ae));var oe=a.getDerivedStateFromProps;ae=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||W!==x)&&qp(n,g,o,x),Hr=!1;var Z=n.memoizedState;g.state=Z,ii(n,o,g,h),ai(),W=n.memoizedState,E||Z!==W||Hr?(typeof oe=="function"&&(wu(n,a,oe,o),W=n.memoizedState),(B=Hr||Ip(n,a,B,o,Z,W,x))?(ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=W),g.props=o,g.state=W,g.context=x,o=B):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,Wc(e,n),x=n.memoizedProps,ae=js(a,x),g.props=ae,oe=n.pendingProps,Z=g.context,W=a.contextType,B=Xs,typeof W=="object"&&W!==null&&(B=Kt(W)),E=a.getDerivedStateFromProps,(W=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==oe||Z!==B)&&qp(n,g,o,B),Hr=!1,Z=n.memoizedState,g.state=Z,ii(n,o,g,h),ai();var te=n.memoizedState;x!==oe||Z!==te||Hr||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof E=="function"&&(wu(n,a,E,o),te=n.memoizedState),(ae=Hr||Ip(n,a,ae,o,Z,te,B)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,te,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,te,B)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&Z===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=te),g.props=o,g.state=te,g.context=B,o=ae):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&Z===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Z===e.memoizedState||(n.flags|=1024),o=!1)}return g=o,Wl(e,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&o?(n.child=ws(n,e.child,null,h),n.child=ws(n,null,a,h)):Ft(e,n,a,h),n.memoizedState=g.state,e=n.child):e=xr(e,n,h),e}function tg(e,n,a,o){return gs(),n.flags|=256,Ft(e,n,a,o),n.child}var Eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(e){return{baseLanes:e,cachePool:Gf()}}function Tu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Tn),e}function ng(e,n,a){var o=n.pendingProps,h=!1,g=(n.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qe){if(h?Vr(n):Yr(),(e=ft)?(e=um(e,$n),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Br!==null?{id:ar,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},a=Uf(e),a.return=n,n.child=a,Yt=n,ft=null)):e=null,e===null)throw qr(n);return ud(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(Yr(),h=n.mode,E=Zl({mode:"hidden",children:E},h),o=ps(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=Ru(a),o.childLanes=Tu(e,x,a),n.memoizedState=Eu,di(null,o)):(Vr(n),Au(n,E))}var B=e.memoizedState;if(B!==null&&(E=B.dehydrated,E!==null)){if(g)n.flags&256?(Vr(n),n.flags&=-257,n=Nu(e,n,a)):n.memoizedState!==null?(Yr(),n.child=e.child,n.flags|=128,n=null):(Yr(),E=o.fallback,h=n.mode,o=Zl({mode:"visible",children:o.children},h),E=ps(E,h,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,ws(n,e.child,null,a),o=n.child,o.memoizedState=Ru(a),o.childLanes=Tu(e,x,a),n.memoizedState=Eu,n=di(null,o));else if(Vr(n),ud(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var W=x.dgst;x=W,o=Error(l(419)),o.stack="",o.digest=x,Za({value:o,source:null,stack:null}),n=Nu(e,n,a)}else if(At||ea(e,n,a,!1),x=(a&e.childLanes)!==0,At||x){if(x=dt,x!==null&&(o=Gt(x,a),o!==0&&o!==B.retryLane))throw B.retryLane=o,fs(e,o),vn(x,e,o),_u;cd(E)||oo(),n=Nu(e,n,a)}else cd(E)?(n.flags|=192,n.child=e.child,n=null):(e=B.treeContext,ft=Pn(E.nextSibling),Yt=n,Qe=!0,Ir=null,$n=!1,e!==null&&Bf(n,e),n=Au(n,o.children),n.flags|=4096);return n}return h?(Yr(),E=o.fallback,h=n.mode,B=e.child,W=B.sibling,o=fr(B,{mode:"hidden",children:o.children}),o.subtreeFlags=B.subtreeFlags&65011712,W!==null?E=fr(W,E):(E=ps(E,h,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,di(null,o),o=n.child,E=e.child.memoizedState,E===null?E=Ru(a):(h=E.cachePool,h!==null?(B=Rt._currentValue,h=h.parent!==B?{parent:B,pool:B}:h):h=Gf(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=Tu(e,x,a),n.memoizedState=Eu,di(e.child,o)):(Vr(n),a=e.child,e=a.sibling,a=fr(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(x=n.deletions,x===null?(n.deletions=[e],n.flags|=16):x.push(e)),n.child=a,n.memoizedState=null,a)}function Au(e,n){return n=Zl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Zl(e,n){return e=_n(22,e,null,n),e.lanes=0,e}function Nu(e,n,a){return ws(n,e.child,null,a),e=Au(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function rg(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Vc(e.return,n,a)}function Ou(e,n,a,o,h,g){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:g}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=a,x.tailMode=h,x.treeForkCount=g)}function sg(e,n,a){var o=n.pendingProps,h=o.revealOrder,g=o.tail;o=o.children;var x=Ct.current,E=(x&2)!==0;if(E?(x=x&1|2,n.flags|=128):x&=1,ie(Ct,x),Ft(e,n,o,a),o=Qe?Wa:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rg(e,a,n);else if(e.tag===19)rg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&$l(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Ou(n,!1,h,a,g,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&$l(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Ou(n,!0,a,null,g,o);break;case"together":Ou(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function xr(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Qr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ea(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,a=fr(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=fr(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ku(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function Bx(e,n,a){switch(n.tag){case 3:Be(n,n.stateNode.containerInfo),$r(n,Rt,e.memoizedState.cache),gs();break;case 27:case 5:De(n);break;case 4:Be(n,n.stateNode.containerInfo);break;case 10:$r(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ru(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Vr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?ng(e,n,a):(Vr(n),e=xr(e,n,a),e!==null?e.sibling:null);Vr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(ea(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return sg(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Ct,Ct.current),o)break;return null;case 22:return n.lanes=0,Xp(e,n,a,n.pendingProps);case 24:$r(n,Rt,e.memoizedState.cache)}return xr(e,n,a)}function ag(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)At=!0;else{if(!ku(e,a)&&(n.flags&128)===0)return At=!1,Bx(e,n,a);At=(e.flags&131072)!==0}else At=!1,Qe&&(n.flags&1048576)!==0&&Lf(n,Wa,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=xs(n.elementType),n.type=e,typeof e=="function")Lc(e)?(o=js(e,o),n.tag=1,n=eg(null,n,e,o,a)):(n.tag=0,n=Cu(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===D){n.tag=11,n=Kp(null,n,e,o,a);break e}else if(h===L){n.tag=14,n=Fp(null,n,e,o,a);break e}}throw n=I(e)||e,Error(l(306,n,""))}}return n;case 0:return Cu(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=js(o,n.pendingProps),eg(e,n,o,h,a);case 3:e:{if(Be(n,n.stateNode.containerInfo),e===null)throw Error(l(387));o=n.pendingProps;var g=n.memoizedState;h=g.element,Wc(e,n),ii(n,o,null,a);var x=n.memoizedState;if(o=x.cache,$r(n,Rt,o),o!==g.cache&&Yc(n,[Rt],a,!0),ai(),o=x.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=tg(e,n,o,a);break e}else if(o!==h){h=Bn(Error(l(424)),n),Za(h),n=tg(e,n,o,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ft=Pn(e.firstChild),Yt=n,Qe=!0,Ir=null,$n=!0,a=Xf(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(gs(),o===h){n=xr(e,n,a);break e}Ft(e,n,o,a)}n=n.child}return n;case 26:return Wl(e,n),e===null?(a=mm(n.type,null,n.pendingProps,null))?n.memoizedState=a:Qe||(a=n.type,e=n.pendingProps,o=mo(ce.current).createElement(a),o[Vt]=n,o[hn]=e,Qt(o,a,e),qt(o),n.stateNode=o):n.memoizedState=mm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return De(n),e===null&&Qe&&(o=n.stateNode=fm(n.type,n.pendingProps,ce.current),Yt=n,$n=!0,h=ft,es(n.type)?(dd=h,ft=Pn(o.firstChild)):ft=h),Ft(e,n,n.pendingProps.children,a),Wl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Qe&&((h=o=ft)&&(o=pb(o,n.type,n.pendingProps,$n),o!==null?(n.stateNode=o,Yt=n,ft=Pn(o.firstChild),$n=!1,h=!0):h=!1),h||qr(n)),De(n),h=n.type,g=n.pendingProps,x=e!==null?e.memoizedProps:null,o=g.children,id(h,g)?o=null:x!==null&&id(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=au(e,n,Ax,null,null,a),Ei._currentValue=h),Wl(e,n),Ft(e,n,o,a),n.child;case 6:return e===null&&Qe&&((e=a=ft)&&(a=gb(a,n.pendingProps,$n),a!==null?(n.stateNode=a,Yt=n,ft=null,e=!0):e=!1),e||qr(n)),null;case 13:return ng(e,n,a);case 4:return Be(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ws(n,null,o,a):Ft(e,n,o,a),n.child;case 11:return Kp(e,n,n.type,n.pendingProps,a);case 7:return Ft(e,n,n.pendingProps,a),n.child;case 8:return Ft(e,n,n.pendingProps.children,a),n.child;case 12:return Ft(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,$r(n,n.type,o.value),Ft(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ys(n),h=Kt(h),o=o(h),n.flags|=1,Ft(e,n,o,a),n.child;case 14:return Fp(e,n,n.type,n.pendingProps,a);case 15:return Qp(e,n,n.type,n.pendingProps,a);case 19:return sg(e,n,a);case 31:return Lx(e,n,a);case 22:return Xp(e,n,a,n.pendingProps);case 24:return ys(n),o=Kt(Rt),e===null?(h=Qc(),h===null&&(h=dt,g=Kc(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=a),h=g),n.memoizedState={parent:o,cache:h},Jc(n),$r(n,Rt,h)):((e.lanes&a)!==0&&(Wc(e,n),ii(n,null,null,a),ai()),h=e.memoizedState,g=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),$r(n,Rt,o)):(o=g.cache,$r(n,Rt,o),o!==h.cache&&Yc(n,[Rt],a,!0))),Ft(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function br(e){e.flags|=4}function Du(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(kg())e.flags|=8192;else throw bs=Ll,Xc}else e.flags&=-16777217}function ig(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wm(n))if(kg())e.flags|=8192;else throw bs=Ll,Xc}function eo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Te():536870912,e.lanes|=n,ha|=n)}function hi(e,n){if(!Qe)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function pt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Ix(e,n,a){var o=n.pendingProps;switch($c(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(n),null;case 1:return pt(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),mr(Rt),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Zs(n)?br(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Pc())),pt(n),null;case 26:var h=n.type,g=n.memoizedState;return e===null?(br(n),g!==null?(pt(n),ig(n,g)):(pt(n),Du(n,h,null,o,a))):g?g!==e.memoizedState?(br(n),pt(n),ig(n,g)):(pt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&br(n),pt(n),Du(n,h,e,o,a)),null;case 27:if(vt(n),a=ce.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&br(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return pt(n),null}e=pe.current,Zs(n)?If(n):(e=fm(h,o,a),n.stateNode=e,br(n))}return pt(n),null;case 5:if(vt(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&br(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return pt(n),null}if(g=pe.current,Zs(n))If(n);else{var x=mo(ce.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?x.createElement(h,{is:o.is}):x.createElement(h)}}g[Vt]=n,g[hn]=o;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=g;e:switch(Qt(g,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&br(n)}}return pt(n),Du(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&br(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(l(166));if(e=ce.current,Zs(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=Yt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Vt]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||nm(e.nodeValue,a)),e||qr(n,!0)}else e=mo(e).createTextNode(o),e[Vt]=n,n.stateNode=e}return pt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zs(n),a!==null){if(e===null){if(!o)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Vt]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pt(n),e=!1}else a=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(En(n),n):(En(n),null);if((n.flags&128)!==0)throw Error(l(558))}return pt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Zs(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(l(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[Vt]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pt(n),h=!1}else h=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(En(n),n):(En(n),null)}return En(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),eo(n,n.updateQueue),pt(n),null);case 4:return ke(),e===null&&td(n.stateNode.containerInfo),pt(n),null;case 10:return mr(n.type),pt(n),null;case 19:if(P(Ct),o=n.memoizedState,o===null)return pt(n),null;if(h=(n.flags&128)!==0,g=o.rendering,g===null)if(h)hi(o,!1);else{if(St!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=$l(e),g!==null){for(n.flags|=128,hi(o,!1),e=g.updateQueue,n.updateQueue=e,eo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)zf(a,e),a=a.sibling;return ie(Ct,Ct.current&1|2),Qe&&pr(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&bt()>ao&&(n.flags|=128,h=!0,hi(o,!1),n.lanes=4194304)}else{if(!h)if(e=$l(g),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,eo(n,e),hi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Qe)return pt(n),null}else 2*bt()-o.renderingStartTime>ao&&a!==536870912&&(n.flags|=128,h=!0,hi(o,!1),n.lanes=4194304);o.isBackwards?(g.sibling=n.child,n.child=g):(e=o.last,e!==null?e.sibling=g:n.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bt(),e.sibling=null,a=Ct.current,ie(Ct,h?a&1|2:a&1),Qe&&pr(n,o.treeForkCount),e):(pt(n),null);case 22:case 23:return En(n),nu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(pt(n),n.subtreeFlags&6&&(n.flags|=8192)):pt(n),a=n.updateQueue,a!==null&&eo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&P(vs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),mr(Rt),pt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function qx(e,n){switch($c(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return mr(Rt),ke(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return vt(n),null;case 31:if(n.memoizedState!==null){if(En(n),n.alternate===null)throw Error(l(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(En(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return P(Ct),null;case 4:return ke(),null;case 10:return mr(n.type),null;case 22:case 23:return En(n),nu(),e!==null&&P(vs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return mr(Rt),null;case 25:return null;default:return null}}function lg(e,n){switch($c(n),n.tag){case 3:mr(Rt),ke();break;case 26:case 27:case 5:vt(n);break;case 4:ke();break;case 31:n.memoizedState!==null&&En(n);break;case 13:En(n);break;case 19:P(Ct);break;case 10:mr(n.type);break;case 22:case 23:En(n),nu(),e!==null&&P(vs);break;case 24:mr(Rt)}}function fi(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var g=a.create,x=a.inst;o=g(),x.destroy=o}a=a.next}while(a!==h)}}catch(E){at(n,n.return,E)}}function Kr(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&e)===e){var x=o.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,h=n;var B=a,W=E;try{W()}catch(ae){at(h,B,ae)}}}o=o.next}while(o!==g)}}catch(ae){at(n,n.return,ae)}}function og(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Wf(n,a)}catch(o){at(e,e.return,o)}}}function cg(e,n,a){a.props=js(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){at(e,n,o)}}function pi(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){at(e,n,h)}}function lr(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){at(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(e,n,h)}else a.current=null}function ug(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){at(e,e.return,h)}}function zu(e,n,a){try{var o=e.stateNode;ob(o,e.type,a,n),o[hn]=n}catch(h){at(e,e.return,h)}}function dg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&es(e.type)||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&es(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=dr));else if(o!==4&&(o===27&&es(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Mu(e,n,a),e=e.sibling;e!==null;)Mu(e,n,a),e=e.sibling}function to(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&es(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(to(e,n,a),e=e.sibling;e!==null;)to(e,n,a),e=e.sibling}function hg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Qt(n,o,a),n[Vt]=e,n[hn]=a}catch(g){at(e,e.return,g)}}var wr=!1,Nt=!1,Lu=!1,fg=typeof WeakSet=="function"?WeakSet:Set,$t=null;function $x(e,n){if(e=e.containerInfo,sd=jo,e=Cf(e),Nc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var x=0,E=-1,B=-1,W=0,ae=0,oe=e,Z=null;t:for(;;){for(var te;oe!==a||h!==0&&oe.nodeType!==3||(E=x+h),oe!==g||o!==0&&oe.nodeType!==3||(B=x+o),oe.nodeType===3&&(x+=oe.nodeValue.length),(te=oe.firstChild)!==null;)Z=oe,oe=te;for(;;){if(oe===e)break t;if(Z===a&&++W===h&&(E=x),Z===g&&++ae===o&&(B=x),(te=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=te}a=E===-1||B===-1?null:{start:E,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:e,selectionRange:a},jo=!1,$t=n;$t!==null;)if(n=$t,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,$t=e;else for(;$t!==null;){switch(n=$t,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=n,h=g.memoizedProps,g=g.memoizedState,o=a.stateNode;try{var we=js(a.type,h);e=o.getSnapshotBeforeUpdate(we,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(Re){at(a,a.return,Re)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)od(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,$t=e;break}$t=n.return}}function pg(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:jr(e,a),o&4&&fi(5,a);break;case 1:if(jr(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(x){at(a,a.return,x)}else{var h=js(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(x){at(a,a.return,x)}}o&64&&og(a),o&512&&pi(a,a.return);break;case 3:if(jr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Wf(e,n)}catch(x){at(a,a.return,x)}}break;case 27:n===null&&o&4&&hg(a);case 26:case 5:jr(e,a),n===null&&o&4&&ug(a),o&512&&pi(a,a.return);break;case 12:jr(e,a);break;case 31:jr(e,a),o&4&&yg(e,a);break;case 13:jr(e,a),o&4&&vg(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xx.bind(null,a),mb(e,a))));break;case 22:if(o=a.memoizedState!==null||wr,!o){n=n!==null&&n.memoizedState!==null||Nt,h=wr;var g=Nt;wr=o,(Nt=n)&&!g?_r(e,a,(a.subtreeFlags&8772)!==0):jr(e,a),wr=h,Nt=g}break;case 30:break;default:jr(e,a)}}function gg(e){var n=e.alternate;n!==null&&(e.alternate=null,gg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&fc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var yt=null,pn=!1;function Sr(e,n,a){for(a=a.child;a!==null;)mg(e,n,a),a=a.sibling}function mg(e,n,a){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(It,a)}catch{}switch(a.tag){case 26:Nt||lr(a,n),Sr(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||lr(a,n);var o=yt,h=pn;es(a.type)&&(yt=a.stateNode,pn=!1),Sr(e,n,a),ji(a.stateNode),yt=o,pn=h;break;case 5:Nt||lr(a,n);case 6:if(o=yt,h=pn,yt=null,Sr(e,n,a),yt=o,pn=h,yt!==null)if(pn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(g){at(a,n,g)}else try{yt.removeChild(a.stateNode)}catch(g){at(a,n,g)}break;case 18:yt!==null&&(pn?(e=yt,om(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ba(e)):om(yt,a.stateNode));break;case 4:o=yt,h=pn,yt=a.stateNode.containerInfo,pn=!0,Sr(e,n,a),yt=o,pn=h;break;case 0:case 11:case 14:case 15:Kr(2,a,n),Nt||Kr(4,a,n),Sr(e,n,a);break;case 1:Nt||(lr(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&cg(a,n,o)),Sr(e,n,a);break;case 21:Sr(e,n,a);break;case 22:Nt=(o=Nt)||a.memoizedState!==null,Sr(e,n,a),Nt=o;break;default:Sr(e,n,a)}}function yg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ba(e)}catch(a){at(n,n.return,a)}}}function vg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ba(e)}catch(a){at(n,n.return,a)}}function Hx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new fg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new fg),n;default:throw Error(l(435,e.tag))}}function no(e,n){var a=Hx(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=Jx.bind(null,e,o);o.then(h,h)}})}function gn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],g=e,x=n,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(es(E.type)){yt=E.stateNode,pn=!1;break e}break;case 5:yt=E.stateNode,pn=!1;break e;case 3:case 4:yt=E.stateNode.containerInfo,pn=!0;break e}E=E.return}if(yt===null)throw Error(l(160));mg(g,x,h),yt=null,pn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)xg(n,e),n=n.sibling}var Jn=null;function xg(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(n,e),mn(e),o&4&&(Kr(3,e,e.return),fi(3,e),Kr(5,e,e.return));break;case 1:gn(n,e),mn(e),o&512&&(Nt||a===null||lr(a,a.return)),o&64&&wr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Jn;if(gn(n,e),mn(e),o&512&&(Nt||a===null||lr(a,a.return)),o&4){var g=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":g=h.getElementsByTagName("title")[0],(!g||g[$a]||g[Vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(o),h.head.insertBefore(g,h.querySelector("head > title"))),Qt(g,o,a),g[Vt]=e,qt(g),o=g;break e;case"link":var x=xm("link","href",h).get(o+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(g=x[E],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}g=h.createElement(o),Qt(g,o,a),h.head.appendChild(g);break;case"meta":if(x=xm("meta","content",h).get(o+(a.content||""))){for(E=0;E<x.length;E++)if(g=x[E],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}g=h.createElement(o),Qt(g,o,a),h.head.appendChild(g);break;default:throw Error(l(468,o))}g[Vt]=e,qt(g),o=g}e.stateNode=o}else bm(h,e.type,e.stateNode);else e.stateNode=vm(h,o,e.memoizedProps);else g!==o?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,o===null?bm(h,e.type,e.stateNode):vm(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&zu(e,e.memoizedProps,a.memoizedProps)}break;case 27:gn(n,e),mn(e),o&512&&(Nt||a===null||lr(a,a.return)),a!==null&&o&4&&zu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gn(n,e),mn(e),o&512&&(Nt||a===null||lr(a,a.return)),e.flags&32){h=e.stateNode;try{Ps(h,"")}catch(we){at(e,e.return,we)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,zu(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Lu=!0);break;case 6:if(gn(n,e),mn(e),o&4){if(e.stateNode===null)throw Error(l(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(we){at(e,e.return,we)}}break;case 3:if(xo=null,h=Jn,Jn=yo(n.containerInfo),gn(n,e),Jn=h,mn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ba(n.containerInfo)}catch(we){at(e,e.return,we)}Lu&&(Lu=!1,bg(e));break;case 4:o=Jn,Jn=yo(e.stateNode.containerInfo),gn(n,e),mn(e),Jn=o;break;case 12:gn(n,e),mn(e);break;case 31:gn(n,e),mn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 13:gn(n,e),mn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(so=bt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 22:h=e.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,W=wr,ae=Nt;if(wr=W||h,Nt=ae||B,gn(n,e),Nt=ae,wr=W,mn(e),o&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||B||wr||Nt||_s(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){B=a=n;try{if(g=B.stateNode,h)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=B.stateNode;var oe=B.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;E.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(we){at(B,B.return,we)}}}else if(n.tag===6){if(a===null){B=n;try{B.stateNode.nodeValue=h?"":B.memoizedProps}catch(we){at(B,B.return,we)}}}else if(n.tag===18){if(a===null){B=n;try{var te=B.stateNode;h?cm(te,!0):cm(B.stateNode,!1)}catch(we){at(B,B.return,we)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,no(e,a))));break;case 19:gn(n,e),mn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 30:break;case 21:break;default:gn(n,e),mn(e)}}function mn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(dg(o)){a=o;break}o=o.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var h=a.stateNode,g=Uu(e);to(e,g,h);break;case 5:var x=a.stateNode;a.flags&32&&(Ps(x,""),a.flags&=-33);var E=Uu(e);to(e,E,x);break;case 3:case 4:var B=a.stateNode.containerInfo,W=Uu(e);Mu(e,W,B);break;default:throw Error(l(161))}}catch(ae){at(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function bg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;bg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function jr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)pg(e,n.alternate,n),n=n.sibling}function _s(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Kr(4,n,n.return),_s(n);break;case 1:lr(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&cg(n,n.return,a),_s(n);break;case 27:ji(n.stateNode);case 26:case 5:lr(n,n.return),_s(n);break;case 22:n.memoizedState===null&&_s(n);break;case 30:_s(n);break;default:_s(n)}e=e.sibling}}function _r(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,g=n,x=g.flags;switch(g.tag){case 0:case 11:case 15:_r(h,g,a),fi(4,g);break;case 1:if(_r(h,g,a),o=g,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){at(o,o.return,W)}if(o=g,h=o.updateQueue,h!==null){var E=o.stateNode;try{var B=h.shared.hiddenCallbacks;if(B!==null)for(h.shared.hiddenCallbacks=null,h=0;h<B.length;h++)Jf(B[h],E)}catch(W){at(o,o.return,W)}}a&&x&64&&og(g),pi(g,g.return);break;case 27:hg(g);case 26:case 5:_r(h,g,a),a&&o===null&&x&4&&ug(g),pi(g,g.return);break;case 12:_r(h,g,a);break;case 31:_r(h,g,a),a&&x&4&&yg(h,g);break;case 13:_r(h,g,a),a&&x&4&&vg(h,g);break;case 22:g.memoizedState===null&&_r(h,g,a),pi(g,g.return);break;case 30:break;default:_r(h,g,a)}n=n.sibling}}function Bu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ei(a))}function Iu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ei(e))}function Wn(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wg(e,n,a,o),n=n.sibling}function wg(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Wn(e,n,a,o),h&2048&&fi(9,n);break;case 1:Wn(e,n,a,o);break;case 3:Wn(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ei(e)));break;case 12:if(h&2048){Wn(e,n,a,o),e=n.stateNode;try{var g=n.memoizedProps,x=g.id,E=g.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){at(n,n.return,B)}}else Wn(e,n,a,o);break;case 31:Wn(e,n,a,o);break;case 13:Wn(e,n,a,o);break;case 23:break;case 22:g=n.stateNode,x=n.alternate,n.memoizedState!==null?g._visibility&2?Wn(e,n,a,o):gi(e,n):g._visibility&2?Wn(e,n,a,o):(g._visibility|=2,ca(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Bu(x,n);break;case 24:Wn(e,n,a,o),h&2048&&Iu(n.alternate,n);break;default:Wn(e,n,a,o)}}function ca(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,x=n,E=a,B=o,W=x.flags;switch(x.tag){case 0:case 11:case 15:ca(g,x,E,B,h),fi(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?ca(g,x,E,B,h):gi(g,x):(ae._visibility|=2,ca(g,x,E,B,h)),h&&W&2048&&Bu(x.alternate,x);break;case 24:ca(g,x,E,B,h),h&&W&2048&&Iu(x.alternate,x);break;default:ca(g,x,E,B,h)}n=n.sibling}}function gi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:gi(a,o),h&2048&&Bu(o.alternate,o);break;case 24:gi(a,o),h&2048&&Iu(o.alternate,o);break;default:gi(a,o)}n=n.sibling}}var mi=8192;function ua(e,n,a){if(e.subtreeFlags&mi)for(e=e.child;e!==null;)Sg(e,n,a),e=e.sibling}function Sg(e,n,a){switch(e.tag){case 26:ua(e,n,a),e.flags&mi&&e.memoizedState!==null&&Tb(a,Jn,e.memoizedState,e.memoizedProps);break;case 5:ua(e,n,a);break;case 3:case 4:var o=Jn;Jn=yo(e.stateNode.containerInfo),ua(e,n,a),Jn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=mi,mi=16777216,ua(e,n,a),mi=o):ua(e,n,a));break;default:ua(e,n,a)}}function jg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function yi(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];$t=o,Cg(o,e)}jg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_g(e),e=e.sibling}function _g(e){switch(e.tag){case 0:case 11:case 15:yi(e),e.flags&2048&&Kr(9,e,e.return);break;case 3:yi(e);break;case 12:yi(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ro(e)):yi(e);break;default:yi(e)}}function ro(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];$t=o,Cg(o,e)}jg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Kr(8,n,n.return),ro(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ro(n));break;default:ro(n)}e=e.sibling}}function Cg(e,n){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:Kr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ei(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,$t=o;else e:for(a=e;$t!==null;){o=$t;var h=o.sibling,g=o.return;if(gg(o),o===a){$t=null;break e}if(h!==null){h.return=g,$t=h;break e}$t=g}}}var Px={getCacheForType:function(e){var n=Kt(Rt),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Kt(Rt).controller.signal}},Gx=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,$e=null,Ge=0,st=0,Rn=null,Fr=!1,da=!1,qu=!1,Cr=0,St=0,Qr=0,Cs=0,$u=0,Tn=0,ha=0,vi=null,yn=null,Hu=!1,so=0,Eg=0,ao=1/0,io=null,Xr=null,kt=0,Jr=null,fa=null,Er=0,Pu=0,Gu=null,Rg=null,xi=0,Vu=null;function An(){return(nt&2)!==0&&Ge!==0?Ge&-Ge:k.T!==null?Ju():Qn()}function Tg(){if(Tn===0)if((Ge&536870912)===0||Qe){var e=H;H<<=1,(H&3932160)===0&&(H=262144),Tn=e}else Tn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Tn}function vn(e,n,a){(e===dt&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(pa(e,0),Wr(e,Ge,Tn,!1)),Pe(e,a),((nt&2)===0||e!==dt)&&(e===dt&&((nt&2)===0&&(Cs|=a),St===4&&Wr(e,Ge,Tn,!1)),or(e))}function Ag(e,n,a){if((nt&6)!==0)throw Error(l(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||be(e,n),h=o?Kx(e,n):Ku(e,n,!0),g=o;do{if(h===0){da&&!o&&Wr(e,n,0,!1);break}else{if(a=e.current.alternate,g&&!Vx(a)){h=Ku(e,n,!1),g=!1;continue}if(h===2){if(g=n,e.errorRecoveryDisabledLanes&g)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var E=e;h=vi;var B=E.current.memoizedState.isDehydrated;if(B&&(pa(E,x).flags|=256),x=Ku(E,x,!1),x!==2){if(qu&&!B){E.errorRecoveryDisabledLanes|=g,Cs|=g,h=4;break e}g=yn,yn=h,g!==null&&(yn===null?yn=g:yn.push.apply(yn,g))}h=x}if(g=!1,h!==2)continue}}if(h===1){pa(e,0),Wr(e,n,0,!0);break}e:{switch(o=e,g=h,g){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Wr(o,n,Tn,!Fr);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(h=so+300-bt(),10<h)){if(Wr(o,n,Tn,!Fr),me(o,0,!0)!==0)break e;Er=n,o.timeoutHandle=im(Ng.bind(null,o,a,yn,io,Hu,n,Tn,Cs,ha,Fr,g,"Throttled",-0,0),h);break e}Ng(o,a,yn,io,Hu,n,Tn,Cs,ha,Fr,g,null,-0,0)}}break}while(!0);or(e)}function Ng(e,n,a,o,h,g,x,E,B,W,ae,oe,Z,te){if(e.timeoutHandle=-1,oe=n.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dr},Sg(n,g,oe);var we=(g&62914560)===g?so-bt():(g&4194048)===g?Eg-bt():0;if(we=Ab(oe,we),we!==null){Er=g,e.cancelPendingCommit=we(Bg.bind(null,e,n,g,a,o,h,x,E,B,ae,oe,null,Z,te)),Wr(e,g,x,!W);return}}Bg(e,n,g,a,o,h,x,E,B)}function Vx(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],g=h.getSnapshot;h=h.value;try{if(!jn(g(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Wr(e,n,a,o){n&=~$u,n&=~Cs,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var g=31-ge(h),x=1<<g;o[g]=-1,h&=~x}a!==0&&qe(e,a,n)}function lo(){return(nt&6)===0?(bi(0),!1):!0}function Yu(){if($e!==null){if(st===0)var e=$e.return;else e=$e,gr=ms=null,ou(e),sa=null,ni=0,e=$e;for(;e!==null;)lg(e.alternate,e),e=e.return;$e=null}}function pa(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,db(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Er=0,Yu(),dt=e,$e=a=fr(e.current,null),Ge=n,st=0,Rn=null,Fr=!1,da=be(e,n),qu=!1,ha=Tn=$u=Cs=Qr=St=0,yn=vi=null,Hu=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-ge(o),g=1<<h;n|=e[h],o&=~g}return Cr=n,Tl(),a}function Og(e,n){Ue=null,k.H=ui,n===ra||n===Ml?(n=Kf(),st=3):n===Xc?(n=Kf(),st=4):st=n===_u?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,$e===null&&(St=1,Xl(e,Bn(n,e.current)))}function kg(){var e=Cn.current;return e===null?!0:(Ge&4194048)===Ge?Hn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===Hn:!1}function Dg(){var e=k.H;return k.H=ui,e===null?ui:e}function zg(){var e=k.A;return k.A=Px,e}function oo(){St=4,Fr||(Ge&4194048)!==Ge&&Cn.current!==null||(da=!0),(Qr&134217727)===0&&(Cs&134217727)===0||dt===null||Wr(dt,Ge,Tn,!1)}function Ku(e,n,a){var o=nt;nt|=2;var h=Dg(),g=zg();(dt!==e||Ge!==n)&&(io=null,pa(e,n)),n=!1;var x=St;e:do try{if(st!==0&&$e!==null){var E=$e,B=Rn;switch(st){case 8:Yu(),x=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var W=st;if(st=0,Rn=null,ga(e,E,B,W),a&&da){x=0;break e}break;default:W=st,st=0,Rn=null,ga(e,E,B,W)}}Yx(),x=St;break}catch(ae){Og(e,ae)}while(!0);return n&&e.shellSuspendCounter++,gr=ms=null,nt=o,k.H=h,k.A=g,$e===null&&(dt=null,Ge=0,Tl()),x}function Yx(){for(;$e!==null;)Ug($e)}function Kx(e,n){var a=nt;nt|=2;var o=Dg(),h=zg();dt!==e||Ge!==n?(io=null,ao=bt()+500,pa(e,n)):da=be(e,n);e:do try{if(st!==0&&$e!==null){n=$e;var g=Rn;t:switch(st){case 1:st=0,Rn=null,ga(e,n,g,1);break;case 2:case 9:if(Vf(g)){st=0,Rn=null,Mg(n);break}n=function(){st!==2&&st!==9||dt!==e||(st=7),or(e)},g.then(n,n);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Vf(g)?(st=0,Rn=null,Mg(n)):(st=0,Rn=null,ga(e,n,g,7));break;case 5:var x=null;switch($e.tag){case 26:x=$e.memoizedState;case 5:case 27:var E=$e;if(x?wm(x):E.stateNode.complete){st=0,Rn=null;var B=E.sibling;if(B!==null)$e=B;else{var W=E.return;W!==null?($e=W,co(W)):$e=null}break t}}st=0,Rn=null,ga(e,n,g,5);break;case 6:st=0,Rn=null,ga(e,n,g,6);break;case 8:Yu(),St=6;break e;default:throw Error(l(462))}}Fx();break}catch(ae){Og(e,ae)}while(!0);return gr=ms=null,k.H=o,k.A=h,nt=a,$e!==null?0:(dt=null,Ge=0,Tl(),St)}function Fx(){for(;$e!==null&&!un();)Ug($e)}function Ug(e){var n=ag(e.alternate,e,Cr);e.memoizedProps=e.pendingProps,n===null?co(e):$e=n}function Mg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Zp(a,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=Zp(a,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:ou(n);default:lg(a,n),n=$e=zf(n,Cr),n=ag(a,n,Cr)}e.memoizedProps=e.pendingProps,n===null?co(e):$e=n}function ga(e,n,a,o){gr=ms=null,ou(n),sa=null,ni=0;var h=n.return;try{if(Mx(e,h,n,a,Ge)){St=1,Xl(e,Bn(a,e.current)),$e=null;return}}catch(g){if(h!==null)throw $e=h,g;St=1,Xl(e,Bn(a,e.current)),$e=null;return}n.flags&32768?(Qe||o===1?e=!0:da||(Ge&536870912)!==0?e=!1:(Fr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Lg(n,e)):co(n)}function co(e){var n=e;do{if((n.flags&32768)!==0){Lg(n,Fr);return}e=n.return;var a=Ix(n.alternate,n,Cr);if(a!==null){$e=a;return}if(n=n.sibling,n!==null){$e=n;return}$e=n=e}while(n!==null);St===0&&(St=5)}function Lg(e,n){do{var a=qx(e.alternate,e);if(a!==null){a.flags&=32767,$e=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){$e=e;return}$e=e=a}while(e!==null);St=6,$e=null}function Bg(e,n,a,o,h,g,x,E,B){e.cancelPendingCommit=null;do uo();while(kt!==0);if((nt&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(g=n.lanes|n.childLanes,g|=Uc,Je(e,a,g,x,E,B),e===dt&&($e=dt=null,Ge=0),fa=n,Jr=e,Er=a,Pu=g,Gu=h,Rg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Wx(gt,function(){return Pg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,h=$.p,$.p=2,x=nt,nt|=4;try{$x(e,n,a)}finally{nt=x,$.p=h,k.T=o}}kt=1,Ig(),qg(),$g()}}function Ig(){if(kt===1){kt=0;var e=Jr,n=fa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var o=$.p;$.p=2;var h=nt;nt|=4;try{xg(n,e);var g=ad,x=Cf(e.containerInfo),E=g.focusedElem,B=g.selectionRange;if(x!==E&&E&&E.ownerDocument&&_f(E.ownerDocument.documentElement,E)){if(B!==null&&Nc(E)){var W=B.start,ae=B.end;if(ae===void 0&&(ae=W),"selectionStart"in E)E.selectionStart=W,E.selectionEnd=Math.min(ae,E.value.length);else{var oe=E.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),we=E.textContent.length,Re=Math.min(B.start,we),ut=B.end===void 0?Re:Math.min(B.end,we);!te.extend&&Re>ut&&(x=ut,ut=Re,Re=x);var Q=jf(E,Re),Y=jf(E,ut);if(Q&&Y&&(te.rangeCount!==1||te.anchorNode!==Q.node||te.anchorOffset!==Q.offset||te.focusNode!==Y.node||te.focusOffset!==Y.offset)){var J=oe.createRange();J.setStart(Q.node,Q.offset),te.removeAllRanges(),Re>ut?(te.addRange(J),te.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),te.addRange(J))}}}}for(oe=[],te=E;te=te.parentNode;)te.nodeType===1&&oe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<oe.length;E++){var le=oe[E];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}jo=!!sd,ad=sd=null}finally{nt=h,$.p=o,k.T=a}}e.current=n,kt=2}}function qg(){if(kt===2){kt=0;var e=Jr,n=fa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var o=$.p;$.p=2;var h=nt;nt|=4;try{pg(e,n.alternate,n)}finally{nt=h,$.p=o,k.T=a}}kt=3}}function $g(){if(kt===4||kt===3){kt=0,Dn();var e=Jr,n=fa,a=Er,o=Rg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?kt=5:(kt=0,fa=Jr=null,Hg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Xr=null),cr(a),n=n.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(It,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=k.T,h=$.p,$.p=2,k.T=null;try{for(var g=e.onRecoverableError,x=0;x<o.length;x++){var E=o[x];g(E.value,{componentStack:E.stack})}}finally{k.T=n,$.p=h}}(Er&3)!==0&&uo(),or(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Vu?xi++:(xi=0,Vu=e):xi=0,bi(0)}}function Hg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ei(n)))}function uo(){return Ig(),qg(),$g(),Pg()}function Pg(){if(kt!==5)return!1;var e=Jr,n=Pu;Pu=0;var a=cr(Er),o=k.T,h=$.p;try{$.p=32>a?32:a,k.T=null,a=Gu,Gu=null;var g=Jr,x=Er;if(kt=0,fa=Jr=null,Er=0,(nt&6)!==0)throw Error(l(331));var E=nt;if(nt|=4,_g(g.current),wg(g,g.current,x,a),nt=E,bi(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(It,g)}catch{}return!0}finally{$.p=h,k.T=o,Hg(e,n)}}function Gg(e,n,a){n=Bn(a,n),n=ju(e.stateNode,n,2),e=Gr(e,n,2),e!==null&&(Pe(e,2),or(e))}function at(e,n,a){if(e.tag===3)Gg(e,e,a);else for(;n!==null;){if(n.tag===3){Gg(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xr===null||!Xr.has(o))){e=Bn(a,e),a=Vp(2),o=Gr(n,a,2),o!==null&&(Yp(a,o,n,e),Pe(o,2),or(o));break}}n=n.return}}function Fu(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Gx;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(qu=!0,h.add(a),e=Qx.bind(null,e,n,a),n.then(e,e))}function Qx(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,dt===e&&(Ge&a)===a&&(St===4||St===3&&(Ge&62914560)===Ge&&300>bt()-so?(nt&2)===0&&pa(e,0):$u|=a,ha===Ge&&(ha=0)),or(e)}function Vg(e,n){n===0&&(n=Te()),e=fs(e,n),e!==null&&(Pe(e,n),or(e))}function Xx(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Vg(e,a)}function Jx(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(n),Vg(e,a)}function Wx(e,n){return lt(e,n)}var ho=null,ma=null,Qu=!1,fo=!1,Xu=!1,Zr=0;function or(e){e!==ma&&e.next===null&&(ma===null?ho=ma=e:ma=ma.next=e),fo=!0,Qu||(Qu=!0,eb())}function bi(e,n){if(!Xu&&fo){Xu=!0;do for(var a=!1,o=ho;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var g=0;else{var x=o.suspendedLanes,E=o.pingedLanes;g=(1<<31-ge(42|e)+1)-1,g&=h&~(x&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Qg(o,g))}else g=Ge,g=me(o,o===dt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||be(o,g)||(a=!0,Qg(o,g));o=o.next}while(a);Xu=!1}}function Zx(){Yg()}function Yg(){fo=Qu=!1;var e=0;Zr!==0&&ub()&&(e=Zr);for(var n=bt(),a=null,o=ho;o!==null;){var h=o.next,g=Kg(o,n);g===0?(o.next=null,a===null?ho=h:a.next=h,h===null&&(ma=a)):(a=o,(e!==0||(g&3)!==0)&&(fo=!0)),o=h}kt!==0&&kt!==5||bi(e),Zr!==0&&(Zr=0)}function Kg(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var x=31-ge(g),E=1<<x,B=h[x];B===-1?((E&a)===0||(E&o)!==0)&&(h[x]=Le(E,n)):B<=n&&(e.expiredLanes|=E),g&=~E}if(n=dt,a=Ge,a=me(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(st===2||st===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Wt(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||be(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Wt(o),cr(a)){case 2:case 8:a=Bt;break;case 32:a=gt;break;case 268435456:a=rn;break;default:a=gt}return o=Fg.bind(null,e),a=lt(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Wt(o),e.callbackPriority=2,e.callbackNode=null,2}function Fg(e,n){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(uo()&&e.callbackNode!==a)return null;var o=Ge;return o=me(e,e===dt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ag(e,o,n),Kg(e,bt()),e.callbackNode!=null&&e.callbackNode===a?Fg.bind(null,e):null)}function Qg(e,n){if(uo())return null;Ag(e,n,!0)}function eb(){hb(function(){(nt&6)!==0?lt(nn,Zx):Yg()})}function Ju(){if(Zr===0){var e=ta;e===0&&(e=ve,ve<<=1,(ve&261888)===0&&(ve=256)),Zr=e}return Zr}function Xg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bl(""+e)}function Jg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function tb(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var g=Xg((h[hn]||null).action),x=o.submitter;x&&(n=(n=x[hn]||null)?Xg(n.formAction):x.getAttribute("formAction"),n!==null&&(g=n,x=null));var E=new _l("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Zr!==0){var B=x?Jg(h,x):new FormData(h);yu(a,{pending:!0,data:B,method:h.method,action:g},null,B)}}else typeof g=="function"&&(E.preventDefault(),B=x?Jg(h,x):new FormData(h),yu(a,{pending:!0,data:B,method:h.method,action:g},g,B))},currentTarget:h}]})}}for(var Wu=0;Wu<zc.length;Wu++){var Zu=zc[Wu],nb=Zu.toLowerCase(),rb=Zu[0].toUpperCase()+Zu.slice(1);Xn(nb,"on"+rb)}Xn(Tf,"onAnimationEnd"),Xn(Af,"onAnimationIteration"),Xn(Nf,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(xx,"onTransitionRun"),Xn(bx,"onTransitionStart"),Xn(wx,"onTransitionCancel"),Xn(Of,"onTransitionEnd"),$s("onMouseEnter",["mouseout","mouseover"]),$s("onMouseLeave",["mouseout","mouseover"]),$s("onPointerEnter",["pointerout","pointerover"]),$s("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wi));function Wg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;e:{var g=void 0;if(n)for(var x=o.length-1;0<=x;x--){var E=o[x],B=E.instance,W=E.currentTarget;if(E=E.listener,B!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=W;try{g(h)}catch(ae){Rl(ae)}h.currentTarget=null,g=B}else for(x=0;x<o.length;x++){if(E=o[x],B=E.instance,W=E.currentTarget,E=E.listener,B!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=W;try{g(h)}catch(ae){Rl(ae)}h.currentTarget=null,g=B}}}}function He(e,n){var a=n[hc];a===void 0&&(a=n[hc]=new Set);var o=e+"__bubble";a.has(o)||(Zg(n,e,2,!1),a.add(o))}function ed(e,n,a){var o=0;n&&(o|=4),Zg(a,e,o,n)}var po="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[po]){e[po]=!0,Vh.forEach(function(a){a!=="selectionchange"&&(sb.has(a)||ed(a,!1,e),ed(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[po]||(n[po]=!0,ed("selectionchange",!1,n))}}function Zg(e,n,a,o){switch(Tm(n)){case 2:var h=kb;break;case 8:h=Db;break;default:h=md}a=h.bind(null,n,a,e),h=void 0,!wc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function nd(e,n,a,o,h){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var E=o.stateNode.containerInfo;if(E===h)break;if(x===4)for(x=o.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;E!==null;){if(x=Bs(E),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){o=g=x;continue e}E=E.parentNode}}o=o.return}rf(function(){var W=g,ae=xc(a),oe=[];e:{var Z=kf.get(e);if(Z!==void 0){var te=_l,we=e;switch(e){case"keypress":if(Sl(a)===0)break e;case"keydown":case"keyup":te=J0;break;case"focusin":we="focus",te=Cc;break;case"focusout":we="blur",te=Cc;break;case"beforeblur":case"afterblur":te=Cc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=I0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=ex;break;case Tf:case Af:case Nf:te=H0;break;case Of:te=nx;break;case"scroll":case"scrollend":te=L0;break;case"wheel":te=sx;break;case"copy":case"cut":case"paste":te=G0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=cf;break;case"toggle":case"beforetoggle":te=ix}var Re=(n&4)!==0,ut=!Re&&(e==="scroll"||e==="scrollend"),Q=Re?Z!==null?Z+"Capture":null:Z;Re=[];for(var Y=W,J;Y!==null;){var le=Y;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||Q===null||(le=Pa(Y,Q),le!=null&&Re.push(Si(Y,le,J))),ut)break;Y=Y.return}0<Re.length&&(Z=new te(Z,we,null,a,ae),oe.push({event:Z,listeners:Re}))}}if((n&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",Z&&a!==vc&&(we=a.relatedTarget||a.fromElement)&&(Bs(we)||we[Ls]))break e;if((te||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(we=a.relatedTarget||a.toElement,te=W,we=we?Bs(we):null,we!==null&&(ut=u(we),Re=we.tag,we!==ut||Re!==5&&Re!==27&&Re!==6)&&(we=null)):(te=null,we=W),te!==we)){if(Re=lf,le="onMouseLeave",Q="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(Re=cf,le="onPointerLeave",Q="onPointerEnter",Y="pointer"),ut=te==null?Z:Ha(te),J=we==null?Z:Ha(we),Z=new Re(le,Y+"leave",te,a,ae),Z.target=ut,Z.relatedTarget=J,le=null,Bs(ae)===W&&(Re=new Re(Q,Y+"enter",we,a,ae),Re.target=J,Re.relatedTarget=ut,le=Re),ut=le,te&&we)t:{for(Re=ab,Q=te,Y=we,J=0,le=Q;le;le=Re(le))J++;le=0;for(var Ee=Y;Ee;Ee=Re(Ee))le++;for(;0<J-le;)Q=Re(Q),J--;for(;0<le-J;)Y=Re(Y),le--;for(;J--;){if(Q===Y||Y!==null&&Q===Y.alternate){Re=Q;break t}Q=Re(Q),Y=Re(Y)}Re=null}else Re=null;te!==null&&em(oe,Z,te,Re,!1),we!==null&&ut!==null&&em(oe,ut,we,Re,!0)}}e:{if(Z=W?Ha(W):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var Ze=yf;else if(gf(Z))if(vf)Ze=mx;else{Ze=px;var je=fx}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&yc(W.elementType)&&(Ze=yf):Ze=gx;if(Ze&&(Ze=Ze(e,W))){mf(oe,Ze,a,ae);break e}je&&je(e,Z,W),e==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&mc(Z,"number",Z.value)}switch(je=W?Ha(W):window,e){case"focusin":(gf(je)||je.contentEditable==="true")&&(Ks=je,Oc=W,Ja=null);break;case"focusout":Ja=Oc=Ks=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,Ef(oe,a,ae);break;case"selectionchange":if(vx)break;case"keydown":case"keyup":Ef(oe,a,ae)}var Me;if(Rc)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ys?ff(e,a)&&(Ve="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(uf&&a.locale!=="ko"&&(Ys||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ys&&(Me=sf()):(Lr=ae,Sc="value"in Lr?Lr.value:Lr.textContent,Ys=!0)),je=go(W,Ve),0<je.length&&(Ve=new of(Ve,e,null,a,ae),oe.push({event:Ve,listeners:je}),Me?Ve.data=Me:(Me=pf(a),Me!==null&&(Ve.data=Me)))),(Me=ox?cx(e,a):ux(e,a))&&(Ve=go(W,"onBeforeInput"),0<Ve.length&&(je=new of("onBeforeInput","beforeinput",null,a,ae),oe.push({event:je,listeners:Ve}),je.data=Me)),tb(oe,e,W,a,ae)}Wg(oe,n)})}function Si(e,n,a){return{instance:e,listener:n,currentTarget:a}}function go(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Pa(e,a),h!=null&&o.unshift(Si(e,h,g)),h=Pa(e,n),h!=null&&o.push(Si(e,h,g))),e.tag===3)return o;e=e.return}return[]}function ab(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function em(e,n,a,o,h){for(var g=n._reactName,x=[];a!==null&&a!==o;){var E=a,B=E.alternate,W=E.stateNode;if(E=E.tag,B!==null&&B===o)break;E!==5&&E!==26&&E!==27||W===null||(B=W,h?(W=Pa(a,g),W!=null&&x.unshift(Si(a,W,B))):h||(W=Pa(a,g),W!=null&&x.push(Si(a,W,B)))),a=a.return}x.length!==0&&e.push({event:n,listeners:x})}var ib=/\r\n?/g,lb=/\u0000|\uFFFD/g;function tm(e){return(typeof e=="string"?e:""+e).replace(ib,`
`).replace(lb,"")}function nm(e,n){return n=tm(n),tm(e)===n}function ct(e,n,a,o,h,g){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ps(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ps(e,""+o);break;case"className":vl(e,"class",o);break;case"tabIndex":vl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vl(e,a,o);break;case"style":tf(e,o,g);break;case"data":if(n!=="object"){vl(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bl(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(n!=="input"&&ct(e,n,"name",h.name,h,null),ct(e,n,"formEncType",h.formEncType,h,null),ct(e,n,"formMethod",h.formMethod,h,null),ct(e,n,"formTarget",h.formTarget,h,null)):(ct(e,n,"encType",h.encType,h,null),ct(e,n,"method",h.method,h,null),ct(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bl(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=dr);break;case"onScroll":o!=null&&He("scroll",e);break;case"onScrollEnd":o!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=bl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":He("beforetoggle",e),He("toggle",e),yl(e,"popover",o);break;case"xlinkActuate":ur(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ur(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ur(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ur(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ur(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ur(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ur(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ur(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ur(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":yl(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=U0.get(a)||a,yl(e,a,o))}}function rd(e,n,a,o,h,g){switch(a){case"style":tf(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Ps(e,o):(typeof o=="number"||typeof o=="bigint")&&Ps(e,""+o);break;case"onScroll":o!=null&&He("scroll",e);break;case"onScrollEnd":o!=null&&He("scrollend",e);break;case"onClick":o!=null&&(e.onclick=dr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yh.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),g=e[hn]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(n,g,h),typeof o=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):yl(e,a,o)}}}function Qt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var o=!1,h=!1,g;for(g in a)if(a.hasOwnProperty(g)){var x=a[g];if(x!=null)switch(g){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,g,x,a,null)}}h&&ct(e,n,"srcSet",a.srcSet,a,null),o&&ct(e,n,"src",a.src,a,null);return;case"input":He("invalid",e);var E=g=x=h=null,B=null,W=null;for(o in a)if(a.hasOwnProperty(o)){var ae=a[o];if(ae!=null)switch(o){case"name":h=ae;break;case"type":x=ae;break;case"checked":B=ae;break;case"defaultChecked":W=ae;break;case"value":g=ae;break;case"defaultValue":E=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,n));break;default:ct(e,n,o,ae,a,null)}}Jh(e,g,E,B,W,x,h,!1);return;case"select":He("invalid",e),o=x=g=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":g=E;break;case"defaultValue":x=E;break;case"multiple":o=E;default:ct(e,n,h,E,a,null)}n=g,a=x,e.multiple=!!o,n!=null?Hs(e,!!o,n,!1):a!=null&&Hs(e,!!o,a,!0);return;case"textarea":He("invalid",e),g=h=o=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":o=E;break;case"defaultValue":h=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(l(91));break;default:ct(e,n,x,E,a,null)}Zh(e,o,h,g);return;case"option":for(B in a)a.hasOwnProperty(B)&&(o=a[B],o!=null)&&(B==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ct(e,n,B,o,a,null));return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(o=0;o<wi.length;o++)He(wi[o],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(o=a[W],o!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,W,o,a,null)}return;default:if(yc(n)){for(ae in a)a.hasOwnProperty(ae)&&(o=a[ae],o!==void 0&&rd(e,n,ae,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ct(e,n,E,o,a,null))}function ob(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,x=null,E=null,B=null,W=null,ae=null;for(te in a){var oe=a[te];if(a.hasOwnProperty(te)&&oe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":B=oe;default:o.hasOwnProperty(te)||ct(e,n,te,null,o,oe)}}for(var Z in o){var te=o[Z];if(oe=a[Z],o.hasOwnProperty(Z)&&(te!=null||oe!=null))switch(Z){case"type":g=te;break;case"name":h=te;break;case"checked":W=te;break;case"defaultChecked":ae=te;break;case"value":x=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(l(137,n));break;default:te!==oe&&ct(e,n,Z,te,o,oe)}}gc(e,x,E,B,W,ae,g,h);return;case"select":te=x=E=Z=null;for(g in a)if(B=a[g],a.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":te=B;default:o.hasOwnProperty(g)||ct(e,n,g,null,o,B)}for(h in o)if(g=o[h],B=a[h],o.hasOwnProperty(h)&&(g!=null||B!=null))switch(h){case"value":Z=g;break;case"defaultValue":E=g;break;case"multiple":x=g;default:g!==B&&ct(e,n,h,g,o,B)}n=E,a=x,o=te,Z!=null?Hs(e,!!a,Z,!1):!!o!=!!a&&(n!=null?Hs(e,!!a,n,!0):Hs(e,!!a,a?[]:"",!1));return;case"textarea":te=Z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ct(e,n,E,null,o,h)}for(x in o)if(h=o[x],g=a[x],o.hasOwnProperty(x)&&(h!=null||g!=null))switch(x){case"value":Z=h;break;case"defaultValue":te=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==g&&ct(e,n,x,h,o,g)}Wh(e,Z,te);return;case"option":for(var we in a)Z=a[we],a.hasOwnProperty(we)&&Z!=null&&!o.hasOwnProperty(we)&&(we==="selected"?e.selected=!1:ct(e,n,we,null,o,Z));for(B in o)Z=o[B],te=a[B],o.hasOwnProperty(B)&&Z!==te&&(Z!=null||te!=null)&&(B==="selected"?e.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":ct(e,n,B,Z,o,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)Z=a[Re],a.hasOwnProperty(Re)&&Z!=null&&!o.hasOwnProperty(Re)&&ct(e,n,Re,null,o,Z);for(W in o)if(Z=o[W],te=a[W],o.hasOwnProperty(W)&&Z!==te&&(Z!=null||te!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(137,n));break;default:ct(e,n,W,Z,o,te)}return;default:if(yc(n)){for(var ut in a)Z=a[ut],a.hasOwnProperty(ut)&&Z!==void 0&&!o.hasOwnProperty(ut)&&rd(e,n,ut,void 0,o,Z);for(ae in o)Z=o[ae],te=a[ae],!o.hasOwnProperty(ae)||Z===te||Z===void 0&&te===void 0||rd(e,n,ae,Z,o,te);return}}for(var Q in a)Z=a[Q],a.hasOwnProperty(Q)&&Z!=null&&!o.hasOwnProperty(Q)&&ct(e,n,Q,null,o,Z);for(oe in o)Z=o[oe],te=a[oe],!o.hasOwnProperty(oe)||Z===te||Z==null&&te==null||ct(e,n,oe,Z,o,te)}function rm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],g=h.transferSize,x=h.initiatorType,E=h.duration;if(g&&E&&rm(x)){for(x=0,E=h.responseEnd,o+=1;o<a.length;o++){var B=a[o],W=B.startTime;if(W>E)break;var ae=B.transferSize,oe=B.initiatorType;ae&&rm(oe)&&(B=B.responseEnd,x+=ae*(B<E?1:(E-W)/(B-W)))}if(--o,n+=8*(g+x)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sd=null,ad=null;function mo(e){return e.nodeType===9?e:e.ownerDocument}function sm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function am(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function id(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ld=null;function ub(){var e=window.event;return e&&e.type==="popstate"?e===ld?!1:(ld=e,!0):(ld=null,!1)}var im=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,lm=typeof Promise=="function"?Promise:void 0,hb=typeof queueMicrotask=="function"?queueMicrotask:typeof lm<"u"?function(e){return lm.resolve(null).then(e).catch(fb)}:im;function fb(e){setTimeout(function(){throw e})}function es(e){return e==="head"}function om(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),ba(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")ji(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ji(a);for(var g=a.firstChild;g;){var x=g.nextSibling,E=g.nodeName;g[$a]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=x}}else a==="body"&&ji(e.ownerDocument.body);a=h}while(a);ba(n)}function cm(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":od(a),fc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function pb(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[$a])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Pn(e.nextSibling),e===null)break}return null}function gb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Pn(e.nextSibling),e===null))return null;return e}function um(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Pn(e.nextSibling),e===null))return null;return e}function cd(e){return e.data==="$?"||e.data==="$~"}function ud(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function mb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Pn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var dd=null;function dm(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Pn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function hm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function fm(e,n,a){switch(n=mo(a),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function ji(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);fc(e)}var Gn=new Map,pm=new Set;function yo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Rr=$.d;$.d={f:yb,r:vb,D:xb,C:bb,L:wb,m:Sb,X:_b,S:jb,M:Cb};function yb(){var e=Rr.f(),n=lo();return e||n}function vb(e){var n=Is(e);n!==null&&n.tag===5&&n.type==="form"?Op(n):Rr.r(e)}var ya=typeof document>"u"?null:document;function gm(e,n,a){var o=ya;if(o&&typeof n=="string"&&n){var h=Mn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),pm.has(h)||(pm.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Qt(n,"link",e),qt(n),o.head.appendChild(n)))}}function xb(e){Rr.D(e),gm("dns-prefetch",e,null)}function bb(e,n){Rr.C(e,n),gm("preconnect",e,n)}function wb(e,n,a){Rr.L(e,n,a);var o=ya;if(o&&e&&n){var h='link[rel="preload"][as="'+Mn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Mn(a.imageSizes)+'"]')):h+='[href="'+Mn(e)+'"]';var g=h;switch(n){case"style":g=va(e);break;case"script":g=xa(e)}Gn.has(g)||(e=v({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Gn.set(g,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(_i(g))||n==="script"&&o.querySelector(Ci(g))||(n=o.createElement("link"),Qt(n,"link",e),qt(n),o.head.appendChild(n)))}}function Sb(e,n){Rr.m(e,n);var a=ya;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Mn(o)+'"][href="'+Mn(e)+'"]',g=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xa(e)}if(!Gn.has(g)&&(e=v({rel:"modulepreload",href:e},n),Gn.set(g,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ci(g)))return}o=a.createElement("link"),Qt(o,"link",e),qt(o),a.head.appendChild(o)}}}function jb(e,n,a){Rr.S(e,n,a);var o=ya;if(o&&e){var h=qs(o).hoistableStyles,g=va(e);n=n||"default";var x=h.get(g);if(!x){var E={loading:0,preload:null};if(x=o.querySelector(_i(g)))E.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Gn.get(g))&&hd(e,a);var B=x=o.createElement("link");qt(B),Qt(B,"link",e),B._p=new Promise(function(W,ae){B.onload=W,B.onerror=ae}),B.addEventListener("load",function(){E.loading|=1}),B.addEventListener("error",function(){E.loading|=2}),E.loading|=4,vo(x,n,o)}x={type:"stylesheet",instance:x,count:1,state:E},h.set(g,x)}}}function _b(e,n){Rr.X(e,n);var a=ya;if(a&&e){var o=qs(a).hoistableScripts,h=xa(e),g=o.get(h);g||(g=a.querySelector(Ci(h)),g||(e=v({src:e,async:!0},n),(n=Gn.get(h))&&fd(e,n),g=a.createElement("script"),qt(g),Qt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function Cb(e,n){Rr.M(e,n);var a=ya;if(a&&e){var o=qs(a).hoistableScripts,h=xa(e),g=o.get(h);g||(g=a.querySelector(Ci(h)),g||(e=v({src:e,async:!0,type:"module"},n),(n=Gn.get(h))&&fd(e,n),g=a.createElement("script"),qt(g),Qt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function mm(e,n,a,o){var h=(h=ce.current)?yo(h):null;if(!h)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=va(a.href),a=qs(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=va(a.href);var g=qs(h).hoistableStyles,x=g.get(e);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,x),(g=h.querySelector(_i(e)))&&!g._p&&(x.instance=g,x.state.loading=5),Gn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(e,a),g||Eb(h,e,a,x.state))),n&&o===null)throw Error(l(528,""));return x}if(n&&o!==null)throw Error(l(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=qs(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function va(e){return'href="'+Mn(e)+'"'}function _i(e){return'link[rel="stylesheet"]['+e+"]"}function ym(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Eb(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Qt(n,"link",a),qt(n),e.head.appendChild(n))}function xa(e){return'[src="'+Mn(e)+'"]'}function Ci(e){return"script[async]"+e}function vm(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Mn(a.href)+'"]');if(o)return n.instance=o,qt(o),o;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),qt(o),Qt(o,"style",h),vo(o,a.precedence,e),n.instance=o;case"stylesheet":h=va(a.href);var g=e.querySelector(_i(h));if(g)return n.state.loading|=4,n.instance=g,qt(g),g;o=ym(a),(h=Gn.get(h))&&hd(o,h),g=(e.ownerDocument||e).createElement("link"),qt(g);var x=g;return x._p=new Promise(function(E,B){x.onload=E,x.onerror=B}),Qt(g,"link",o),n.state.loading|=4,vo(g,a.precedence,e),n.instance=g;case"script":return g=xa(a.src),(h=e.querySelector(Ci(g)))?(n.instance=h,qt(h),h):(o=a,(h=Gn.get(g))&&(o=v({},a),fd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),qt(h),Qt(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,vo(o,a.precedence,e));return n.instance}function vo(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,g=h,x=0;x<o.length;x++){var E=o[x];if(E.dataset.precedence===n)g=E;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function hd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function fd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var xo=null;function xm(e,n,a){if(xo===null){var o=new Map,h=xo=new Map;h.set(a,o)}else h=xo,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var g=a[h];if(!(g[$a]||g[Vt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(n)||"";x=e+x;var E=o.get(x);E?E.push(g):o.set(x,[g])}}return o}function bm(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Rb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function wm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Tb(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=va(o.href),g=n.querySelector(_i(h));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=bo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=g,qt(g);return}g=n.ownerDocument||n,o=ym(o),(h=Gn.get(h))&&hd(o,h),g=g.createElement("link"),qt(g);var x=g;x._p=new Promise(function(E,B){x.onload=E,x.onerror=B}),Qt(g,"link",o),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=bo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var pd=0;function Ab(e,n){return e.stylesheets&&e.count===0&&So(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&So(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&pd===0&&(pd=62500*cb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&So(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>pd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)So(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wo=null;function So(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wo=new Map,n.forEach(Nb,e),wo=null,bo.call(e))}function Nb(e,n){if(!(n.state.loading&4)){var a=wo.get(e);if(a)var o=a.get(null);else{a=new Map,wo.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var x=h[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),o=x)}o&&a.set(null,o)}h=n.instance,x=h.getAttribute("data-precedence"),g=a.get(x)||o,g===o&&a.set(null,h),a.set(x,h),this.count++,o=bo.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Ei={$$typeof:R,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Ob(e,n,a,o,h,g,x,E,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rt(0),this.hiddenUpdates=rt(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Sm(e,n,a,o,h,g,x,E,B,W,ae,oe){return e=new Ob(e,n,a,x,B,W,ae,oe,E),n=1,g===!0&&(n|=24),g=_n(3,null,null,n),e.current=g,g.stateNode=e,n=Kc(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:a,cache:n},Jc(g),e}function jm(e){return e?(e=Xs,e):Xs}function _m(e,n,a,o,h,g){h=jm(h),o.context===null?o.context=h:o.pendingContext=h,o=Pr(n),o.payload={element:a},g=g===void 0?null:g,g!==null&&(o.callback=g),a=Gr(e,o,n),a!==null&&(vn(a,e,n),si(a,e,n))}function Cm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function gd(e,n){Cm(e,n),(e=e.alternate)&&Cm(e,n)}function Em(e){if(e.tag===13||e.tag===31){var n=fs(e,67108864);n!==null&&vn(n,e,67108864),gd(e,67108864)}}function Rm(e){if(e.tag===13||e.tag===31){var n=An();n=Sn(n);var a=fs(e,n);a!==null&&vn(a,e,n),gd(e,n)}}var jo=!0;function kb(e,n,a,o){var h=k.T;k.T=null;var g=$.p;try{$.p=2,md(e,n,a,o)}finally{$.p=g,k.T=h}}function Db(e,n,a,o){var h=k.T;k.T=null;var g=$.p;try{$.p=8,md(e,n,a,o)}finally{$.p=g,k.T=h}}function md(e,n,a,o){if(jo){var h=yd(o);if(h===null)nd(e,n,o,_o,a),Am(e,o);else if(Ub(h,e,n,a,o))o.stopPropagation();else if(Am(e,o),n&4&&-1<zb.indexOf(e)){for(;h!==null;){var g=Is(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=ne(g.pendingLanes);if(x!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var B=1<<31-ge(x);E.entanglements[1]|=B,x&=~B}or(g),(nt&6)===0&&(ao=bt()+500,bi(0))}}break;case 31:case 13:E=fs(g,2),E!==null&&vn(E,g,2),lo(),gd(g,2)}if(g=yd(o),g===null&&nd(e,n,o,_o,a),g===h)break;h=g}h!==null&&o.stopPropagation()}else nd(e,n,o,null,a)}}function yd(e){return e=xc(e),vd(e)}var _o=null;function vd(e){if(_o=null,e=Bs(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===31){if(e=f(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return _o=e,null}function Tm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case nn:return 2;case Bt:return 8;case gt:case dn:return 32;case rn:return 268435456;default:return 32}default:return 32}}var xd=!1,ts=null,ns=null,rs=null,Ri=new Map,Ti=new Map,ss=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Am(e,n){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ri.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(n.pointerId)}}function Ai(e,n,a,o,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:g,targetContainers:[h]},n!==null&&(n=Is(n),n!==null&&Em(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Ub(e,n,a,o,h){switch(n){case"focusin":return ts=Ai(ts,e,n,a,o,h),!0;case"dragenter":return ns=Ai(ns,e,n,a,o,h),!0;case"mouseover":return rs=Ai(rs,e,n,a,o,h),!0;case"pointerover":var g=h.pointerId;return Ri.set(g,Ai(Ri.get(g)||null,e,n,a,o,h)),!0;case"gotpointercapture":return g=h.pointerId,Ti.set(g,Ai(Ti.get(g)||null,e,n,a,o,h)),!0}return!1}function Nm(e){var n=Bs(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Mr(e.priority,function(){Rm(a)});return}}else if(n===31){if(n=f(a),n!==null){e.blockedOn=n,Mr(e.priority,function(){Rm(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=yd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);vc=o,a.target.dispatchEvent(o),vc=null}else return n=Is(a),n!==null&&Em(n),e.blockedOn=a,!1;n.shift()}return!0}function Om(e,n,a){Co(e)&&a.delete(n)}function Mb(){xd=!1,ts!==null&&Co(ts)&&(ts=null),ns!==null&&Co(ns)&&(ns=null),rs!==null&&Co(rs)&&(rs=null),Ri.forEach(Om),Ti.forEach(Om)}function Eo(e,n){e.blockedOn===n&&(e.blockedOn=null,xd||(xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Mb)))}var Ro=null;function km(e){Ro!==e&&(Ro=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ro===e&&(Ro=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(vd(o||a)===null)continue;break}var g=Is(a);g!==null&&(e.splice(n,3),n-=3,yu(g,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function ba(e){function n(B){return Eo(B,e)}ts!==null&&Eo(ts,e),ns!==null&&Eo(ns,e),rs!==null&&Eo(rs,e),Ri.forEach(n),Ti.forEach(n);for(var a=0;a<ss.length;a++){var o=ss[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)Nm(a),a.blockedOn===null&&ss.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],g=a[o+1],x=h[hn]||null;if(typeof g=="function")x||km(a);else if(x){var E=null;if(g&&g.hasAttribute("formAction")){if(h=g,x=g[hn]||null)E=x.formAction;else if(vd(h)!==null)continue}else E=x.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),km(a)}}}function Dm(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function bd(e){this._internalRoot=e}To.prototype.render=bd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var a=n.current,o=An();_m(a,o,e,n,null,null)},To.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;_m(e.current,2,null,e,null,null),lo(),n[Ls]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var n=Qn();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ss.length&&n!==0&&n<ss[a].priority;a++);ss.splice(a,0,e),a===0&&Nm(e)}};var zm=t.version;if(zm!=="19.2.3")throw Error(l(527,zm,"19.2.3"));$.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Lb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ao.isDisabled&&Ao.supportsFiber)try{It=Ao.inject(Lb),fe=Ao}catch{}}return Oi.createRoot=function(e,n){if(!c(e))throw Error(l(299));var a=!1,o="",h=$p,g=Hp,x=Pp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Sm(e,1,!1,null,null,a,o,null,h,g,x,Dm),e[Ls]=n.current,td(e),new bd(n)},Oi.hydrateRoot=function(e,n,a){if(!c(e))throw Error(l(299));var o=!1,h="",g=$p,x=Hp,E=Pp,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(B=a.formState)),n=Sm(e,1,!0,n,a??null,o,h,B,g,x,E,Dm),n.context=jm(null),a=n.current,o=An(),o=Sn(o),h=Pr(o),h.callback=null,Gr(a,h,o),a=o,n.current.lanes=a,Pe(n,a),or(n),e[Ls]=n.current,td(e),new To(n)},Oi.version="19.2.3",Oi}var Gm;function Yb(){if(Gm)return jd.exports;Gm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),jd.exports=Vb(),jd.exports}var Kb=Yb();var Vm="popstate";function Fb(r={}){function t(l,c){let{pathname:u,search:d,hash:f}=l.location;return ah("",{pathname:u,search:d,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(l,c){return typeof c=="string"?c:Gi(c)}return Xb(t,s,null,r)}function Mt(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Yn(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qb(){return Math.random().toString(36).substring(2,10)}function Ym(r,t){return{usr:r.state,key:r.key,idx:t}}function ah(r,t,s=null,l){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?nl(t):t,state:s,key:t&&t.key||l||Qb()}}function Gi({pathname:r="/",search:t="",hash:s=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function nl(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substring(s),r=r.substring(0,s));let l=r.indexOf("?");l>=0&&(t.search=r.substring(l),r=r.substring(0,l)),r&&(t.pathname=r)}return t}function Xb(r,t,s,l={}){let{window:c=document.defaultView,v5Compat:u=!1}=l,d=c.history,f="POP",p=null,m=y();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function y(){return(d.state||{idx:null}).idx}function v(){f="POP";let A=y(),N=A==null?null:A-m;m=A,p&&p({action:f,location:j.location,delta:N})}function b(A,N){f="PUSH";let C=ah(j.location,A,N);m=y()+1;let R=Ym(C,m),D=j.createHref(C);try{d.pushState(R,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;c.location.assign(D)}u&&p&&p({action:f,location:j.location,delta:1})}function S(A,N){f="REPLACE";let C=ah(j.location,A,N);m=y();let R=Ym(C,m),D=j.createHref(C);d.replaceState(R,"",D),u&&p&&p({action:f,location:j.location,delta:0})}function _(A){return Jb(A)}let j={get action(){return f},get location(){return r(c,d)},listen(A){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(Vm,v),p=A,()=>{c.removeEventListener(Vm,v),p=null}},createHref(A){return t(c,A)},createURL:_,encodeLocation(A){let N=_(A);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:S,go(A){return d.go(A)}};return j}function Jb(r,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(s,"No window.location.(origin|href) available to create URL");let l=typeof r=="string"?r:Gi(r);return l=l.replace(/ $/,"%20"),!t&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function iv(r,t,s="/"){return Wb(r,t,s,!1)}function Wb(r,t,s,l){let c=typeof t=="string"?nl(t):t,u=kr(c.pathname||"/",s);if(u==null)return null;let d=lv(r);Zb(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let m=uw(u);f=ow(d[p],m,l)}return f}function lv(r,t=[],s=[],l="",c=!1){let u=(d,f,p=c,m)=>{let y={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(l)&&p)return;Mt(y.relativePath.startsWith(l),`Absolute route path "${y.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(l.length)}let v=Or([l,y.relativePath]),b=s.concat(y);d.children&&d.children.length>0&&(Mt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),lv(d.children,t,b,v,p)),!(d.path==null&&!d.index)&&t.push({path:v,score:iw(v,d.index),routesMeta:b})};return r.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))u(d,f);else for(let p of ov(d.path))u(d,f,!0,p)}),t}function ov(r){let t=r.split("/");if(t.length===0)return[];let[s,...l]=t,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(l.length===0)return c?[u,""]:[u];let d=ov(l.join("/")),f=[];return f.push(...d.map(p=>p===""?u:[u,p].join("/"))),c&&f.push(...d),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function Zb(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:lw(t.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var ew=/^:[\w-]+$/,tw=3,nw=2,rw=1,sw=10,aw=-2,Km=r=>r==="*";function iw(r,t){let s=r.split("/"),l=s.length;return s.some(Km)&&(l+=aw),t&&(l+=nw),s.filter(c=>!Km(c)).reduce((c,u)=>c+(ew.test(u)?tw:u===""?rw:sw),l)}function lw(r,t){return r.length===t.length&&r.slice(0,-1).every((l,c)=>l===t[c])?r[r.length-1]-t[t.length-1]:0}function ow(r,t,s=!1){let{routesMeta:l}=r,c={},u="/",d=[];for(let f=0;f<l.length;++f){let p=l[f],m=f===l.length-1,y=u==="/"?t:t.slice(u.length)||"/",v=Po({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),b=p.route;if(!v&&m&&s&&!l[l.length-1].route.index&&(v=Po({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!v)return null;Object.assign(c,v.params),d.push({params:c,pathname:Or([u,v.pathname]),pathnameBase:pw(Or([u,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(u=Or([u,v.pathnameBase]))}return d}function Po(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,l]=cw(r.path,r.caseSensitive,r.end),c=t.match(s);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:l.reduce((m,{paramName:y,isOptional:v},b)=>{if(y==="*"){let _=f[b]||"";d=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const S=f[b];return v&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:d,pattern:r}}function cw(r,t=!1,s=!0){Yn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let l=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(l.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(l.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),l]}function uw(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function kr(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,l=r.charAt(s);return l&&l!=="/"?null:r.slice(s)||"/"}var cv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dw=r=>cv.test(r);function hw(r,t="/"){let{pathname:s,search:l="",hash:c=""}=typeof r=="string"?nl(r):r,u;if(s)if(dw(s))u=s;else{if(s.includes("//")){let d=s;s=s.replace(/\/\/+/g,"/"),Yn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${s}`)}s.startsWith("/")?u=Fm(s.substring(1),"/"):u=Fm(s,t)}else u=t;return{pathname:u,search:gw(l),hash:mw(c)}}function Fm(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Rd(r,t,s,l){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fw(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function uv(r){let t=fw(r);return t.map((s,l)=>l===t.length-1?s.pathname:s.pathnameBase)}function dv(r,t,s,l=!1){let c;typeof r=="string"?c=nl(r):(c={...r},Mt(!c.pathname||!c.pathname.includes("?"),Rd("?","pathname","search",c)),Mt(!c.pathname||!c.pathname.includes("#"),Rd("#","pathname","hash",c)),Mt(!c.search||!c.search.includes("#"),Rd("#","search","hash",c)));let u=r===""||c.pathname==="",d=u?"/":c.pathname,f;if(d==null)f=s;else{let v=t.length-1;if(!l&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),v-=1;c.pathname=b.join("/")}f=v>=0?t[v]:"/"}let p=hw(c,f),m=d&&d!=="/"&&d.endsWith("/"),y=(u||d===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var Or=r=>r.join("/").replace(/\/\/+/g,"/"),pw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),gw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,mw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,yw=class{constructor(r,t,s,l=!1){this.status=r,this.statusText=t||"",this.internal=l,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function vw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function xw(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fv(r,t){let s=r;if(typeof s!="string"||!cv.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let l=s,c=!1;if(hv)try{let u=new URL(window.location.href),d=s.startsWith("//")?new URL(u.protocol+s):new URL(s),f=kr(d.pathname,t);d.origin===u.origin&&f!=null?s=f+d.search+d.hash:c=!0}catch{Yn(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:l,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pv=["POST","PUT","PATCH","DELETE"];new Set(pv);var bw=["GET",...pv];new Set(bw);var Ma=w.createContext(null);Ma.displayName="DataRouter";var ec=w.createContext(null);ec.displayName="DataRouterState";var ww=w.createContext(!1),gv=w.createContext({isTransitioning:!1});gv.displayName="ViewTransition";var Sw=w.createContext(new Map);Sw.displayName="Fetchers";var jw=w.createContext(null);jw.displayName="Await";var Fn=w.createContext(null);Fn.displayName="Navigation";var tc=w.createContext(null);tc.displayName="Location";var Dr=w.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var _h=w.createContext(null);_h.displayName="RouteError";var mv="REACT_ROUTER_ERROR",_w="REDIRECT",Cw="ROUTE_ERROR_RESPONSE";function Ew(r){if(r.startsWith(`${mv}:${_w}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Rw(r){if(r.startsWith(`${mv}:${Cw}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new yw(t.status,t.statusText,t.data)}catch{}}function Tw(r,{relative:t}={}){Mt(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=w.useContext(Fn),{hash:c,pathname:u,search:d}=sl(r,{relative:t}),f=u;return s!=="/"&&(f=u==="/"?s:Or([s,u])),l.createHref({pathname:f,search:d,hash:c})}function rl(){return w.useContext(tc)!=null}function zr(){return Mt(rl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(tc).location}var yv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vv(r){w.useContext(Fn).static||w.useLayoutEffect(r)}function xv(){let{isDataRoute:r}=w.useContext(Dr);return r?$w():Aw()}function Aw(){Mt(rl(),"useNavigate() may be used only in the context of a <Router> component.");let r=w.useContext(Ma),{basename:t,navigator:s}=w.useContext(Fn),{matches:l}=w.useContext(Dr),{pathname:c}=zr(),u=JSON.stringify(uv(l)),d=w.useRef(!1);return vv(()=>{d.current=!0}),w.useCallback((p,m={})=>{if(Yn(d.current,yv),!d.current)return;if(typeof p=="number"){s.go(p);return}let y=dv(p,JSON.parse(u),c,m.relative==="path");r==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Or([t,y.pathname])),(m.replace?s.replace:s.push)(y,m.state,m)},[t,s,u,c,r])}w.createContext(null);function sl(r,{relative:t}={}){let{matches:s}=w.useContext(Dr),{pathname:l}=zr(),c=JSON.stringify(uv(s));return w.useMemo(()=>dv(r,JSON.parse(c),l,t==="path"),[r,c,l,t])}function Nw(r,t,s,l,c){Mt(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Fn),{matches:d}=w.useContext(Dr),f=d[d.length-1],p=f?f.params:{},m=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let C=v&&v.path||"";wv(m,!v||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=zr(),S;S=b;let _=S.pathname||"/",j=_;if(y!=="/"){let C=y.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=iv(r,{pathname:j});return Yn(v||A!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Yn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Uw(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},p,C.params),pathname:Or([y,u.encodeLocation?u.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?y:Or([y,u.encodeLocation?u.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),d,s,l,c)}function Ow(){let r=qw(),t=vw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),s?w.createElement("pre",{style:c},s):null,d)}var kw=w.createElement(Ow,null),bv=class extends w.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const s=Rw(r.digest);s&&(r=s)}let t=r!==void 0?w.createElement(Dr.Provider,{value:this.props.routeContext},w.createElement(_h.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?w.createElement(Dw,{error:r},t):t}};bv.contextType=ww;var Td=new WeakMap;function Dw({children:r,error:t}){let{basename:s}=w.useContext(Fn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let l=Ew(t.digest);if(l){let c=Td.get(t);if(c)throw c;let u=fv(l.location,s);if(hv&&!Td.get(t))if(u.isExternal||l.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:l.replace}));throw Td.set(t,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function zw({routeContext:r,match:t,children:s}){let l=w.useContext(Ma);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Dr.Provider,{value:r},s)}function Uw(r,t=[],s=null,l=null,c=null){if(r==null){if(!s)return null;if(s.errors)r=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)r=s.matches;else return null}let u=r,d=s?.errors;if(d!=null){let y=u.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Mt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let v=u[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:b,errors:S}=s,_=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||_){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let m=s&&l?(y,v)=>{l(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:xw(s.matches),errorInfo:v})}:void 0;return u.reduceRight((y,v,b)=>{let S,_=!1,j=null,A=null;s&&(S=d&&v.route.id?d[v.route.id]:void 0,j=v.route.errorElement||kw,f&&(p<0&&b===0?(wv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,A=null):p===b&&(_=!0,A=v.route.hydrateFallbackElement||null)));let N=t.concat(u.slice(0,b+1)),C=()=>{let R;return S?R=j:_?R=A:v.route.Component?R=w.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=y,w.createElement(zw,{match:v,routeContext:{outlet:y,matches:N,isDataRoute:s!=null},children:R})};return s&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?w.createElement(bv,{location:s.location,revalidation:s.revalidation,component:j,error:S,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:m}):C()},null)}function Ch(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mw(r){let t=w.useContext(Ma);return Mt(t,Ch(r)),t}function Lw(r){let t=w.useContext(ec);return Mt(t,Ch(r)),t}function Bw(r){let t=w.useContext(Dr);return Mt(t,Ch(r)),t}function Eh(r){let t=Bw(r),s=t.matches[t.matches.length-1];return Mt(s.route.id,`${r} can only be used on routes that contain a unique "id"`),s.route.id}function Iw(){return Eh("useRouteId")}function qw(){let r=w.useContext(_h),t=Lw("useRouteError"),s=Eh("useRouteError");return r!==void 0?r:t.errors?.[s]}function $w(){let{router:r}=Mw("useNavigate"),t=Eh("useNavigate"),s=w.useRef(!1);return vv(()=>{s.current=!0}),w.useCallback(async(c,u={})=>{Yn(s.current,yv),s.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:t,...u}))},[r,t])}var Qm={};function wv(r,t,s){!t&&!Qm[r]&&(Qm[r]=!0,Yn(!1,s))}w.memo(Hw);function Hw({routes:r,future:t,state:s,onError:l}){return Nw(r,void 0,s,l,t)}function Pw({basename:r="/",children:t=null,location:s,navigationType:l="POP",navigator:c,static:u=!1,unstable_useTransitions:d}){Mt(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),p=w.useMemo(()=>({basename:f,navigator:c,static:u,unstable_useTransitions:d,future:{}}),[f,c,u,d]);typeof s=="string"&&(s=nl(s));let{pathname:m="/",search:y="",hash:v="",state:b=null,key:S="default"}=s,_=w.useMemo(()=>{let j=kr(m,f);return j==null?null:{location:{pathname:j,search:y,hash:v,state:b,key:S},navigationType:l}},[f,m,y,v,b,S,l]);return Yn(_!=null,`<Router basename="${f}"> is not able to match the URL "${m}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:w.createElement(Fn.Provider,{value:p},w.createElement(tc.Provider,{children:t,value:_}))}var qo="get",$o="application/x-www-form-urlencoded";function nc(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Gw(r){return nc(r)&&r.tagName.toLowerCase()==="button"}function Vw(r){return nc(r)&&r.tagName.toLowerCase()==="form"}function Yw(r){return nc(r)&&r.tagName.toLowerCase()==="input"}function Kw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Fw(r,t){return r.button===0&&(!t||t==="_self")&&!Kw(r)}function ih(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let l=r[s];return t.concat(Array.isArray(l)?l.map(c=>[s,c]):[[s,l]])},[]))}function Qw(r,t){let s=ih(r);return t&&t.forEach((l,c)=>{s.has(c)||t.getAll(c).forEach(u=>{s.append(c,u)})}),s}var No=null;function Xw(){if(No===null)try{new FormData(document.createElement("form"),0),No=!1}catch{No=!0}return No}var Jw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ad(r){return r!=null&&!Jw.has(r)?(Yn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$o}"`),null):r}function Ww(r,t){let s,l,c,u,d;if(Vw(r)){let f=r.getAttribute("action");l=f?kr(f,t):null,s=r.getAttribute("method")||qo,c=Ad(r.getAttribute("enctype"))||$o,u=new FormData(r)}else if(Gw(r)||Yw(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(l=p?kr(p,t):null,s=r.getAttribute("formmethod")||f.getAttribute("method")||qo,c=Ad(r.getAttribute("formenctype"))||Ad(f.getAttribute("enctype"))||$o,u=new FormData(f,r),!Xw()){let{name:m,type:y,value:v}=r;if(y==="image"){let b=m?`${m}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else m&&u.append(m,v)}}else{if(nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=qo,l=null,c=$o,d=r}return u&&c==="text/plain"&&(d=u,u=void 0),{action:l,method:s.toLowerCase(),encType:c,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rh(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Zw(r,t,s){let l=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return l.pathname==="/"?l.pathname=`_root.${s}`:t&&kr(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function eS(r,t){if(r.id in t)return t[r.id];try{let s=await import(r.module);return t[r.id]=s,s}catch(s){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function nS(r,t,s){let l=await Promise.all(r.map(async c=>{let u=t.routes[c.route.id];if(u){let d=await eS(u,s);return d.links?d.links():[]}return[]}));return iS(l.flat(1).filter(tS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Xm(r,t,s,l,c,u){let d=(p,m)=>s[m]?p.route.id!==s[m].route.id:!0,f=(p,m)=>s[m].pathname!==p.pathname||s[m].route.path?.endsWith("*")&&s[m].params["*"]!==p.params["*"];return u==="assets"?t.filter((p,m)=>d(p,m)||f(p,m)):u==="data"?t.filter((p,m)=>{let y=l.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,m)||f(p,m))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function rS(r,t,{includeHydrateFallback:s}={}){return sS(r.map(l=>{let c=t.routes[l.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function sS(r){return[...new Set(r)]}function aS(r){let t={},s=Object.keys(r).sort();for(let l of s)t[l]=r[l];return t}function iS(r,t){let s=new Set;return new Set(t),r.reduce((l,c)=>{let u=JSON.stringify(aS(c));return s.has(u)||(s.add(u),l.push({key:u,link:c})),l},[])}function Sv(){let r=w.useContext(Ma);return Rh(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function lS(){let r=w.useContext(ec);return Rh(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Th=w.createContext(void 0);Th.displayName="FrameworkContext";function jv(){let r=w.useContext(Th);return Rh(r,"You must render this element inside a <HydratedRouter> element"),r}function oS(r,t){let s=w.useContext(Th),[l,c]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:v}=t,b=w.useRef(null);w.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let j=N=>{N.forEach(C=>{d(C.isIntersecting)})},A=new IntersectionObserver(j,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[r]),w.useEffect(()=>{if(l){let j=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(j)}}},[l]);let S=()=>{c(!0)},_=()=>{c(!1),d(!1)};return s?r!=="intent"?[u,b,{}]:[u,b,{onFocus:ki(f,S),onBlur:ki(p,_),onMouseEnter:ki(m,S),onMouseLeave:ki(y,_),onTouchStart:ki(v,S)}]:[!1,b,{}]}function ki(r,t){return s=>{r&&r(s),s.defaultPrevented||t(s)}}function cS({page:r,...t}){let{router:s}=Sv(),l=w.useMemo(()=>iv(s.routes,r,s.basename),[s.routes,r,s.basename]);return l?w.createElement(dS,{page:r,matches:l,...t}):null}function uS(r){let{manifest:t,routeModules:s}=jv(),[l,c]=w.useState([]);return w.useEffect(()=>{let u=!1;return nS(r,t,s).then(d=>{u||c(d)}),()=>{u=!0}},[r,t,s]),l}function dS({page:r,matches:t,...s}){let l=zr(),{manifest:c,routeModules:u}=jv(),{basename:d}=Sv(),{loaderData:f,matches:p}=lS(),m=w.useMemo(()=>Xm(r,t,p,c,l,"data"),[r,t,p,c,l]),y=w.useMemo(()=>Xm(r,t,p,c,l,"assets"),[r,t,p,c,l]),v=w.useMemo(()=>{if(r===l.pathname+l.search+l.hash)return[];let _=new Set,j=!1;if(t.forEach(N=>{let C=c.routes[N.route.id];!C||!C.hasLoader||(!m.some(R=>R.route.id===N.route.id)&&N.route.id in f&&u[N.route.id]?.shouldRevalidate||C.hasClientLoader?j=!0:_.add(N.route.id))}),_.size===0)return[];let A=Zw(r,d,"data");return j&&_.size>0&&A.searchParams.set("_routes",t.filter(N=>_.has(N.route.id)).map(N=>N.route.id).join(",")),[A.pathname+A.search]},[d,f,l,c,m,t,r,u]),b=w.useMemo(()=>rS(y,c),[y,c]),S=uS(y);return w.createElement(w.Fragment,null,v.map(_=>w.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),b.map(_=>w.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),S.map(({key:_,link:j})=>w.createElement("link",{key:_,nonce:s.nonce,...j})))}function hS(...r){return t=>{r.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var fS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fS&&(window.__reactRouterVersion="7.11.0")}catch{}function pS({basename:r,children:t,unstable_useTransitions:s,window:l}){let c=w.useRef();c.current==null&&(c.current=Fb({window:l,v5Compat:!0}));let u=c.current,[d,f]=w.useState({action:u.action,location:u.location}),p=w.useCallback(m=>{s===!1?f(m):w.startTransition(()=>f(m))},[s]);return w.useLayoutEffect(()=>u.listen(p),[u,p]),w.createElement(Pw,{basename:r,children:t,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:s})}var _v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cv=w.forwardRef(function({onClick:t,discover:s="render",prefetch:l="none",relative:c,reloadDocument:u,replace:d,state:f,target:p,to:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...S},_){let{basename:j,unstable_useTransitions:A}=w.useContext(Fn),N=typeof m=="string"&&_v.test(m),C=fv(m,j);m=C.to;let R=Tw(m,{relative:c}),[D,U,T]=oS(l,S),L=vS(m,{replace:d,state:f,target:p,preventScrollReset:y,relative:c,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:A});function G(V){t&&t(V),V.defaultPrevented||L(V)}let q=w.createElement("a",{...S,...T,href:C.absoluteURL||R,onClick:C.isExternal||u?t:G,ref:hS(_,U),target:p,"data-discover":!N&&s==="render"?"true":void 0});return D&&!N?w.createElement(w.Fragment,null,q,w.createElement(cS,{page:R})):q});Cv.displayName="Link";var gS=w.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:l="",end:c=!1,style:u,to:d,viewTransition:f,children:p,...m},y){let v=sl(d,{relative:m.relative}),b=zr(),S=w.useContext(ec),{navigator:_,basename:j}=w.useContext(Fn),A=S!=null&&_S(v)&&f===!0,N=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,C=b.pathname,R=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),R=R?R.toLowerCase():null,N=N.toLowerCase()),R&&j&&(R=kr(R,j)||R);const D=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let U=C===N||!c&&C.startsWith(N)&&C.charAt(D)==="/",T=R!=null&&(R===N||!c&&R.startsWith(N)&&R.charAt(N.length)==="/"),L={isActive:U,isPending:T,isTransitioning:A},G=U?t:void 0,q;typeof l=="function"?q=l(L):q=[l,U?"active":null,T?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(L):u;return w.createElement(Cv,{...m,"aria-current":G,className:q,ref:y,style:V,to:d,viewTransition:f},typeof p=="function"?p(L):p)});gS.displayName="NavLink";var mS=w.forwardRef(({discover:r="render",fetcherKey:t,navigate:s,reloadDocument:l,replace:c,state:u,method:d=qo,action:f,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...S},_)=>{let{unstable_useTransitions:j}=w.useContext(Fn),A=SS(),N=jS(f,{relative:m}),C=d.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&_v.test(f),D=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let T=U.nativeEvent.submitter,L=T?.getAttribute("formmethod")||d,G=()=>A(T||U.currentTarget,{fetcherKey:t,method:L,navigate:s,replace:c,state:u,relative:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});j&&s!==!1?w.startTransition(()=>G()):G()};return w.createElement("form",{ref:_,method:C,action:N,onSubmit:l?p:D,...S,"data-discover":!R&&r==="render"?"true":void 0})});mS.displayName="Form";function yS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ev(r){let t=w.useContext(Ma);return Mt(t,yS(r)),t}function vS(r,{target:t,replace:s,state:l,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let m=xv(),y=zr(),v=sl(r,{relative:u});return w.useCallback(b=>{if(Fw(b,t)){b.preventDefault();let S=s!==void 0?s:Gi(y)===Gi(v),_=()=>m(r,{replace:S,state:l,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:f});p?w.startTransition(()=>_()):_()}},[y,m,v,s,l,t,r,c,u,d,f,p])}function xS(r){Yn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=w.useRef(ih(r)),s=w.useRef(!1),l=zr(),c=w.useMemo(()=>Qw(l.search,s.current?null:t.current),[l.search]),u=xv(),d=w.useCallback((f,p)=>{const m=ih(typeof f=="function"?f(new URLSearchParams(c)):f);s.current=!0,u("?"+m,p)},[u,c]);return[c,d]}var bS=0,wS=()=>`__${String(++bS)}__`;function SS(){let{router:r}=Ev("useSubmit"),{basename:t}=w.useContext(Fn),s=Iw(),l=r.fetch,c=r.navigate;return w.useCallback(async(u,d={})=>{let{action:f,method:p,encType:m,formData:y,body:v}=Ww(u,t);if(d.navigate===!1){let b=d.fetcherKey||wS();await l(b,s,d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||m,flushSync:d.flushSync})}else await c(d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||m,replace:d.replace,state:d.state,fromRouteId:s,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,c,t,s])}function jS(r,{relative:t}={}){let{basename:s}=w.useContext(Fn),l=w.useContext(Dr);Mt(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),u={...sl(r||".",{relative:t})},d=zr();if(r==null){u.search=d.search;let f=new URLSearchParams(u.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();u.search=y?`?${y}`:""}}return(!r||r===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Or([s,u.pathname])),Gi(u)}function _S(r,{relative:t}={}){let s=w.useContext(gv);Mt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Ev("useViewTransitionState"),c=sl(r,{relative:t});if(!s.isTransitioning)return!1;let u=kr(s.currentLocation.pathname,l)||s.currentLocation.pathname,d=kr(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Po(c.pathname,d)!=null||Po(c.pathname,u)!=null}var ka=av();const se=({children:r,variant:t="primary",size:s="md",isLoading:l,block:c,className:u="",...d})=>{const f=["btn",`btn--${t}`,`btn--${s}`,c?"btn--block":"",l?"btn--loading":"",u].filter(Boolean).join(" ");return i.jsxs("button",{className:f,disabled:l,...d,children:[l&&i.jsx("span",{className:"btn__spinner"}),i.jsx("span",{className:"btn__content",children:r})]})},CS=({children:r})=>(zr(),i.jsxs("div",{className:"app-layout",children:[i.jsx("header",{className:"app-header",children:i.jsx("div",{className:"container app-header__content",children:i.jsx("img",{src:"/app/header-logo.png",alt:"recipe management",className:"app-logo-image"})})}),i.jsx("main",{className:"container app-main",children:r}),i.jsx("footer",{className:"app-footer",children:i.jsx("div",{className:"container",children:i.jsx("p",{children:" 2026 recipe management"})})})]})),_t=({children:r,className:t="",hoverable:s=!1,...l})=>i.jsx("div",{className:`glass-card ${s?"glass-card--hoverable":""} ${t}`,...l,children:r});function ES(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return w.useMemo(()=>l=>{t.forEach(c=>c(l))},t)}const rc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function La(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function Ah(r){return"nodeType"in r}function on(r){var t,s;return r?La(r)?r:Ah(r)&&(t=(s=r.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function Nh(r){const{Document:t}=on(r);return r instanceof t}function al(r){return La(r)?!1:r instanceof on(r).HTMLElement}function Rv(r){return r instanceof on(r).SVGElement}function Ba(r){return r?La(r)?r.document:Ah(r)?Nh(r)?r:al(r)||Rv(r)?r.ownerDocument:document:document:document}const rr=rc?w.useLayoutEffect:w.useEffect;function sc(r){const t=w.useRef(r);return rr(()=>{t.current=r}),w.useCallback(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return t.current==null?void 0:t.current(...l)},[])}function RS(){const r=w.useRef(null),t=w.useCallback((l,c)=>{r.current=setInterval(l,c)},[]),s=w.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,s]}function Vi(r,t){t===void 0&&(t=[r]);const s=w.useRef(r);return rr(()=>{s.current!==r&&(s.current=r)},t),s}function il(r,t){const s=w.useRef();return w.useMemo(()=>{const l=r(s.current);return s.current=l,l},[...t])}function Go(r){const t=sc(r),s=w.useRef(null),l=w.useCallback(c=>{c!==s.current&&t?.(c,s.current),s.current=c},[]);return[s,l]}function Vo(r){const t=w.useRef();return w.useEffect(()=>{t.current=r},[r]),t.current}let Nd={};function ll(r,t){return w.useMemo(()=>{if(t)return t;const s=Nd[r]==null?0:Nd[r]+1;return Nd[r]=s,r+"-"+s},[r,t])}function Tv(r){return function(t){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return l.reduce((u,d)=>{const f=Object.entries(d);for(const[p,m]of f){const y=u[p];y!=null&&(u[p]=y+r*m)}return u},{...t})}}const za=Tv(1),Yi=Tv(-1);function TS(r){return"clientX"in r&&"clientY"in r}function ac(r){if(!r)return!1;const{KeyboardEvent:t}=on(r.target);return t&&r instanceof t}function AS(r){if(!r)return!1;const{TouchEvent:t}=on(r.target);return t&&r instanceof t}function Yo(r){if(AS(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:s}=r.touches[0];return{x:t,y:s}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:s}=r.changedTouches[0];return{x:t,y:s}}}return TS(r)?{x:r.clientX,y:r.clientY}:null}const Kn=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:s}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:s}=r;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(r){if(r)return[Kn.Translate.toString(r),Kn.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:s,easing:l}=r;return t+" "+s+"ms "+l}}}),Jm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function NS(r){return r.matches(Jm)?r:r.querySelector(Jm)}const OS={display:"none"};function kS(r){let{id:t,value:s}=r;return Ce.createElement("div",{id:t,style:OS},s)}function DS(r){let{id:t,announcement:s,ariaLiveType:l="assertive"}=r;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:t,style:c,role:"status","aria-live":l,"aria-atomic":!0},s)}function zS(){const[r,t]=w.useState("");return{announce:w.useCallback(l=>{l!=null&&t(l)},[]),announcement:r}}const Av=w.createContext(null);function US(r){const t=w.useContext(Av);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function MS(){const[r]=w.useState(()=>new Set),t=w.useCallback(l=>(r.add(l),()=>r.delete(l)),[r]);return[w.useCallback(l=>{let{type:c,event:u}=l;r.forEach(d=>{var f;return(f=d[c])==null?void 0:f.call(d,u)})},[r]),t]}const LS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},BS={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:s}=r;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:s}=r;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function IS(r){let{announcements:t=BS,container:s,hiddenTextDescribedById:l,screenReaderInstructions:c=LS}=r;const{announce:u,announcement:d}=zS(),f=ll("DndLiveRegion"),[p,m]=w.useState(!1);if(w.useEffect(()=>{m(!0)},[]),US(w.useMemo(()=>({onDragStart(v){let{active:b}=v;u(t.onDragStart({active:b}))},onDragMove(v){let{active:b,over:S}=v;t.onDragMove&&u(t.onDragMove({active:b,over:S}))},onDragOver(v){let{active:b,over:S}=v;u(t.onDragOver({active:b,over:S}))},onDragEnd(v){let{active:b,over:S}=v;u(t.onDragEnd({active:b,over:S}))},onDragCancel(v){let{active:b,over:S}=v;u(t.onDragCancel({active:b,over:S}))}}),[u,t])),!p)return null;const y=Ce.createElement(Ce.Fragment,null,Ce.createElement(kS,{id:l,value:c.draggable}),Ce.createElement(DS,{id:f,announcement:d}));return s?ka.createPortal(y,s):y}var Ut;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));function Ko(){}function en(r,t){return w.useMemo(()=>({sensor:r,options:t??{}}),[r,t])}function zs(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return w.useMemo(()=>[...t].filter(l=>l!=null),[...t])}const sr=Object.freeze({x:0,y:0});function Oh(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function qS(r,t){const s=Yo(r);if(!s)return"0 0";const l={x:(s.x-t.left)/t.width*100,y:(s.y-t.top)/t.height*100};return l.x+"% "+l.y+"%"}function kh(r,t){let{data:{value:s}}=r,{data:{value:l}}=t;return s-l}function $S(r,t){let{data:{value:s}}=r,{data:{value:l}}=t;return l-s}function lh(r){let{left:t,top:s,height:l,width:c}=r;return[{x:t,y:s},{x:t+c,y:s},{x:t,y:s+l},{x:t+c,y:s+l}]}function Nv(r,t){if(!r||r.length===0)return null;const[s]=r;return s[t]}function Wm(r,t,s){return t===void 0&&(t=r.left),s===void 0&&(s=r.top),{x:t+r.width*.5,y:s+r.height*.5}}const oh=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=Wm(t,t.left,t.top),u=[];for(const d of l){const{id:f}=d,p=s.get(f);if(p){const m=Oh(Wm(p),c);u.push({id:f,data:{droppableContainer:d,value:m}})}}return u.sort(kh)},HS=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=lh(t),u=[];for(const d of l){const{id:f}=d,p=s.get(f);if(p){const m=lh(p),y=c.reduce((b,S,_)=>b+Oh(m[_],S),0),v=Number((y/4).toFixed(4));u.push({id:f,data:{droppableContainer:d,value:v}})}}return u.sort(kh)};function PS(r,t){const s=Math.max(t.top,r.top),l=Math.max(t.left,r.left),c=Math.min(t.left+t.width,r.left+r.width),u=Math.min(t.top+t.height,r.top+r.height),d=c-l,f=u-s;if(l<c&&s<u){const p=t.width*t.height,m=r.width*r.height,y=d*f,v=y/(p+m-y);return Number(v.toFixed(4))}return 0}const GS=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=[];for(const u of l){const{id:d}=u,f=s.get(d);if(f){const p=PS(f,t);p>0&&c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort($S)};function VS(r,t){const{top:s,left:l,bottom:c,right:u}=t;return s<=r.y&&r.y<=c&&l<=r.x&&r.x<=u}const Ov=r=>{let{droppableContainers:t,droppableRects:s,pointerCoordinates:l}=r;if(!l)return[];const c=[];for(const u of t){const{id:d}=u,f=s.get(d);if(f&&VS(l,f)){const m=lh(f).reduce((v,b)=>v+Oh(l,b),0),y=Number((m/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:y}})}}return c.sort(kh)};function YS(r,t,s){return{...r,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function kv(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:sr}function KS(r){return function(s){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return c.reduce((d,f)=>({...d,top:d.top+r*f.y,bottom:d.bottom+r*f.y,left:d.left+r*f.x,right:d.right+r*f.x}),{...s})}}const FS=KS(1);function Dv(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function QS(r,t,s){const l=Dv(t);if(!l)return r;const{scaleX:c,scaleY:u,x:d,y:f}=l,p=r.left-d-(1-c)*parseFloat(s),m=r.top-f-(1-u)*parseFloat(s.slice(s.indexOf(" ")+1)),y=c?r.width/c:r.width,v=u?r.height/u:r.height;return{width:y,height:v,top:m,right:p+y,bottom:m+v,left:p}}const XS={ignoreTransform:!1};function Ia(r,t){t===void 0&&(t=XS);let s=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:m,transformOrigin:y}=on(r).getComputedStyle(r);m&&(s=QS(s,m,y))}const{top:l,left:c,width:u,height:d,bottom:f,right:p}=s;return{top:l,left:c,width:u,height:d,bottom:f,right:p}}function Zm(r){return Ia(r,{ignoreTransform:!0})}function JS(r){const t=r.innerWidth,s=r.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function WS(r,t){return t===void 0&&(t=on(r).getComputedStyle(r)),t.position==="fixed"}function ZS(r,t){t===void 0&&(t=on(r).getComputedStyle(r));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const u=t[c];return typeof u=="string"?s.test(u):!1})}function ic(r,t){const s=[];function l(c){if(t!=null&&s.length>=t||!c)return s;if(Nh(c)&&c.scrollingElement!=null&&!s.includes(c.scrollingElement))return s.push(c.scrollingElement),s;if(!al(c)||Rv(c)||s.includes(c))return s;const u=on(r).getComputedStyle(c);return c!==r&&ZS(c,u)&&s.push(c),WS(c,u)?s:l(c.parentNode)}return r?l(r):s}function zv(r){const[t]=ic(r,1);return t??null}function Od(r){return!rc||!r?null:La(r)?r:Ah(r)?Nh(r)||r===Ba(r).scrollingElement?window:al(r)?r:null:null}function Uv(r){return La(r)?r.scrollX:r.scrollLeft}function Mv(r){return La(r)?r.scrollY:r.scrollTop}function ch(r){return{x:Uv(r),y:Mv(r)}}var Ht;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Ht||(Ht={}));function Lv(r){return!rc||!r?!1:r===document.scrollingElement}function Bv(r){const t={x:0,y:0},s=Lv(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},l={x:r.scrollWidth-s.width,y:r.scrollHeight-s.height},c=r.scrollTop<=t.y,u=r.scrollLeft<=t.x,d=r.scrollTop>=l.y,f=r.scrollLeft>=l.x;return{isTop:c,isLeft:u,isBottom:d,isRight:f,maxScroll:l,minScroll:t}}const ej={x:.2,y:.2};function tj(r,t,s,l,c){let{top:u,left:d,right:f,bottom:p}=s;l===void 0&&(l=10),c===void 0&&(c=ej);const{isTop:m,isBottom:y,isLeft:v,isRight:b}=Bv(r),S={x:0,y:0},_={x:0,y:0},j={height:t.height*c.y,width:t.width*c.x};return!m&&u<=t.top+j.height?(S.y=Ht.Backward,_.y=l*Math.abs((t.top+j.height-u)/j.height)):!y&&p>=t.bottom-j.height&&(S.y=Ht.Forward,_.y=l*Math.abs((t.bottom-j.height-p)/j.height)),!b&&f>=t.right-j.width?(S.x=Ht.Forward,_.x=l*Math.abs((t.right-j.width-f)/j.width)):!v&&d<=t.left+j.width&&(S.x=Ht.Backward,_.x=l*Math.abs((t.left+j.width-d)/j.width)),{direction:S,speed:_}}function nj(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:t,left:s,right:l,bottom:c}=r.getBoundingClientRect();return{top:t,left:s,right:l,bottom:c,width:r.clientWidth,height:r.clientHeight}}function Iv(r){return r.reduce((t,s)=>za(t,ch(s)),sr)}function rj(r){return r.reduce((t,s)=>t+Uv(s),0)}function sj(r){return r.reduce((t,s)=>t+Mv(s),0)}function qv(r,t){if(t===void 0&&(t=Ia),!r)return;const{top:s,left:l,bottom:c,right:u}=t(r);zv(r)&&(c<=0||u<=0||s>=window.innerHeight||l>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const aj=[["x",["left","right"],rj],["y",["top","bottom"],sj]];class Dh{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=ic(s),c=Iv(l);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,d,f]of aj)for(const p of d)Object.defineProperty(this,p,{get:()=>{const m=f(l),y=c[u]-m;return this.rect[p]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ii{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...s)})},this.target=t}add(t,s,l){var c;(c=this.target)==null||c.addEventListener(t,s,l),this.listeners.push([t,s,l])}}function ij(r){const{EventTarget:t}=on(r);return r instanceof t?r:Ba(r)}function kd(r,t){const s=Math.abs(r.x),l=Math.abs(r.y);return typeof t=="number"?Math.sqrt(s**2+l**2)>t:"x"in t&&"y"in t?s>t.x&&l>t.y:"x"in t?s>t.x:"y"in t?l>t.y:!1}var Vn;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function ey(r){r.preventDefault()}function lj(r){r.stopPropagation()}var Xe;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Xe||(Xe={}));const $v={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter,Xe.Tab]},oj=(r,t)=>{let{currentCoordinates:s}=t;switch(r.code){case Xe.Right:return{...s,x:s.x+25};case Xe.Left:return{...s,x:s.x-25};case Xe.Down:return{...s,y:s.y+25};case Xe.Up:return{...s,y:s.y-25}}};class Us{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new Ii(Ba(s)),this.windowListeners=new Ii(on(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,l=t.node.current;l&&qv(l),s(sr)}handleKeyDown(t){if(ac(t)){const{active:s,context:l,options:c}=this.props,{keyboardCodes:u=$v,coordinateGetter:d=oj,scrollBehavior:f="smooth"}=c,{code:p}=t;if(u.end.includes(p)){this.handleEnd(t);return}if(u.cancel.includes(p)){this.handleCancel(t);return}const{collisionRect:m}=l.current,y=m?{x:m.left,y:m.top}:sr;this.referenceCoordinates||(this.referenceCoordinates=y);const v=d(t,{active:s,context:l.current,currentCoordinates:y});if(v){const b=Yi(v,y),S={x:0,y:0},{scrollableAncestors:_}=l.current;for(const j of _){const A=t.code,{isTop:N,isRight:C,isLeft:R,isBottom:D,maxScroll:U,minScroll:T}=Bv(j),L=nj(j),G={x:Math.min(A===Xe.Right?L.right-L.width/2:L.right,Math.max(A===Xe.Right?L.left:L.left+L.width/2,v.x)),y:Math.min(A===Xe.Down?L.bottom-L.height/2:L.bottom,Math.max(A===Xe.Down?L.top:L.top+L.height/2,v.y))},q=A===Xe.Right&&!C||A===Xe.Left&&!R,V=A===Xe.Down&&!D||A===Xe.Up&&!N;if(q&&G.x!==v.x){const z=j.scrollLeft+b.x,O=A===Xe.Right&&z<=U.x||A===Xe.Left&&z>=T.x;if(O&&!b.y){j.scrollTo({left:z,behavior:f});return}O?S.x=j.scrollLeft-z:S.x=A===Xe.Right?j.scrollLeft-U.x:j.scrollLeft-T.x,S.x&&j.scrollBy({left:-S.x,behavior:f});break}else if(V&&G.y!==v.y){const z=j.scrollTop+b.y,O=A===Xe.Down&&z<=U.y||A===Xe.Up&&z>=T.y;if(O&&!b.x){j.scrollTo({top:z,behavior:f});return}O?S.y=j.scrollTop-z:S.y=A===Xe.Down?j.scrollTop-U.y:j.scrollTop-T.y,S.y&&j.scrollBy({top:-S.y,behavior:f});break}}this.handleMove(t,za(Yi(v,this.referenceCoordinates),S))}}}handleMove(t,s){const{onMove:l}=this.props;t.preventDefault(),l(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Us.activators=[{eventName:"onKeyDown",handler:(r,t,s)=>{let{keyboardCodes:l=$v,onActivation:c}=t,{active:u}=s;const{code:d}=r.nativeEvent;if(l.start.includes(d)){const f=u.activatorNode.current;return f&&r.target!==f?!1:(r.preventDefault(),c?.({event:r.nativeEvent}),!0)}return!1}}];function ty(r){return!!(r&&"distance"in r)}function ny(r){return!!(r&&"delay"in r)}class zh{constructor(t,s,l){var c;l===void 0&&(l=ij(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:u}=t,{target:d}=u;this.props=t,this.events=s,this.document=Ba(d),this.documentListeners=new Ii(this.document),this.listeners=new Ii(l),this.windowListeners=new Ii(on(d)),this.initialCoordinates=(c=Yo(u))!=null?c:sr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:l}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,ey),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,ey),this.documentListeners.add(Vn.Keydown,this.handleKeydown),s){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ny(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ty(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:l,onPending:c}=this.props;c(l,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Vn.Click,lj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:l,initialCoordinates:c,props:u}=this,{onMove:d,options:{activationConstraint:f}}=u;if(!c)return;const p=(s=Yo(t))!=null?s:sr,m=Yi(c,p);if(!l&&f){if(ty(f)){if(f.tolerance!=null&&kd(m,f.tolerance))return this.handleCancel();if(kd(m,f.distance))return this.handleStart()}if(ny(f)&&kd(m,f.tolerance))return this.handleCancel();this.handlePending(f,m);return}t.cancelable&&t.preventDefault(),d(p)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ol extends zh{constructor(t){const{event:s}=t,l=Ba(s.target);super(t,cj,l)}}ol.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;return!s.isPrimary||s.button!==0?!1:(l?.({event:s}),!0)}}];const uj={move:{name:"mousemove"},end:{name:"mouseup"}};var uh;(function(r){r[r.RightClick=2]="RightClick"})(uh||(uh={}));class cl extends zh{constructor(t){super(t,uj,Ba(t.event.target))}}cl.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;return s.button===uh.RightClick?!1:(l?.({event:s}),!0)}}];const Dd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ul extends zh{constructor(t){super(t,Dd)}static setup(){return window.addEventListener(Dd.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dd.move.name,t)};function t(){}}}ul.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;const{touches:c}=s;return c.length>1?!1:(l?.({event:s}),!0)}}];var qi;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(qi||(qi={}));var Fo;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fo||(Fo={}));function dj(r){let{acceleration:t,activator:s=qi.Pointer,canScroll:l,draggingRect:c,enabled:u,interval:d=5,order:f=Fo.TreeOrder,pointerCoordinates:p,scrollableAncestors:m,scrollableAncestorRects:y,delta:v,threshold:b}=r;const S=fj({delta:v,disabled:!u}),[_,j]=RS(),A=w.useRef({x:0,y:0}),N=w.useRef({x:0,y:0}),C=w.useMemo(()=>{switch(s){case qi.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case qi.DraggableRect:return c}},[s,c,p]),R=w.useRef(null),D=w.useCallback(()=>{const T=R.current;if(!T)return;const L=A.current.x*N.current.x,G=A.current.y*N.current.y;T.scrollBy(L,G)},[]),U=w.useMemo(()=>f===Fo.TreeOrder?[...m].reverse():m,[f,m]);w.useEffect(()=>{if(!u||!m.length||!C){j();return}for(const T of U){if(l?.(T)===!1)continue;const L=m.indexOf(T),G=y[L];if(!G)continue;const{direction:q,speed:V}=tj(T,G,C,t,b);for(const z of["x","y"])S[z][q[z]]||(V[z]=0,q[z]=0);if(V.x>0||V.y>0){j(),R.current=T,_(D,d),A.current=V,N.current=q;return}}A.current={x:0,y:0},N.current={x:0,y:0},j()},[t,D,l,j,u,d,JSON.stringify(C),JSON.stringify(S),_,m,U,y,JSON.stringify(b)])}const hj={x:{[Ht.Backward]:!1,[Ht.Forward]:!1},y:{[Ht.Backward]:!1,[Ht.Forward]:!1}};function fj(r){let{delta:t,disabled:s}=r;const l=Vo(t);return il(c=>{if(s||!l||!c)return hj;const u={x:Math.sign(t.x-l.x),y:Math.sign(t.y-l.y)};return{x:{[Ht.Backward]:c.x[Ht.Backward]||u.x===-1,[Ht.Forward]:c.x[Ht.Forward]||u.x===1},y:{[Ht.Backward]:c.y[Ht.Backward]||u.y===-1,[Ht.Forward]:c.y[Ht.Forward]||u.y===1}}},[s,t,l])}function pj(r,t){const s=t!=null?r.get(t):void 0,l=s?s.node.current:null;return il(c=>{var u;return t==null?null:(u=l??c)!=null?u:null},[l,t])}function gj(r,t){return w.useMemo(()=>r.reduce((s,l)=>{const{sensor:c}=l,u=c.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,l)}));return[...s,...u]},[]),[r,t])}var Ki;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Ki||(Ki={}));var dh;(function(r){r.Optimized="optimized"})(dh||(dh={}));const ry=new Map;function mj(r,t){let{dragging:s,dependencies:l,config:c}=t;const[u,d]=w.useState(null),{frequency:f,measure:p,strategy:m}=c,y=w.useRef(r),v=A(),b=Vi(v),S=w.useCallback(function(N){N===void 0&&(N=[]),!b.current&&d(C=>C===null?N:C.concat(N.filter(R=>!C.includes(R))))},[b]),_=w.useRef(null),j=il(N=>{if(v&&!s)return ry;if(!N||N===ry||y.current!==r||u!=null){const C=new Map;for(let R of r){if(!R)continue;if(u&&u.length>0&&!u.includes(R.id)&&R.rect.current){C.set(R.id,R.rect.current);continue}const D=R.node.current,U=D?new Dh(p(D),D):null;R.rect.current=U,U&&C.set(R.id,U)}return C}return N},[r,u,s,v,p]);return w.useEffect(()=>{y.current=r},[r]),w.useEffect(()=>{v||S()},[s,v]),w.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),w.useEffect(()=>{v||typeof f!="number"||_.current!==null||(_.current=setTimeout(()=>{S(),_.current=null},f))},[f,v,S,...l]),{droppableRects:j,measureDroppableContainers:S,measuringScheduled:u!=null};function A(){switch(m){case Ki.Always:return!1;case Ki.BeforeDragging:return s;default:return!s}}}function Uh(r,t){return il(s=>r?s||(typeof t=="function"?t(r):r):null,[t,r])}function yj(r,t){return Uh(r,t)}function vj(r){let{callback:t,disabled:s}=r;const l=sc(t),c=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(l)},[l,s]);return w.useEffect(()=>()=>c?.disconnect(),[c]),c}function lc(r){let{callback:t,disabled:s}=r;const l=sc(t),c=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(l)},[s]);return w.useEffect(()=>()=>c?.disconnect(),[c]),c}function xj(r){return new Dh(Ia(r),r)}function sy(r,t,s){t===void 0&&(t=xj);const[l,c]=w.useState(null);function u(){c(p=>{if(!r)return null;if(r.isConnected===!1){var m;return(m=p??s)!=null?m:null}const y=t(r);return JSON.stringify(p)===JSON.stringify(y)?p:y})}const d=vj({callback(p){if(r)for(const m of p){const{type:y,target:v}=m;if(y==="childList"&&v instanceof HTMLElement&&v.contains(r)){u();break}}}}),f=lc({callback:u});return rr(()=>{u(),r?(f?.observe(r),d?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),d?.disconnect())},[r]),l}function bj(r){const t=Uh(r);return kv(r,t)}const ay=[];function wj(r){const t=w.useRef(r),s=il(l=>r?l&&l!==ay&&r&&t.current&&r.parentNode===t.current.parentNode?l:ic(r):ay,[r]);return w.useEffect(()=>{t.current=r},[r]),s}function Sj(r){const[t,s]=w.useState(null),l=w.useRef(r),c=w.useCallback(u=>{const d=Od(u.target);d&&s(f=>f?(f.set(d,ch(d)),new Map(f)):null)},[]);return w.useEffect(()=>{const u=l.current;if(r!==u){d(u);const f=r.map(p=>{const m=Od(p);return m?(m.addEventListener("scroll",c,{passive:!0}),[m,ch(m)]):null}).filter(p=>p!=null);s(f.length?new Map(f):null),l.current=r}return()=>{d(r),d(u)};function d(f){f.forEach(p=>{const m=Od(p);m?.removeEventListener("scroll",c)})}},[c,r]),w.useMemo(()=>r.length?t?Array.from(t.values()).reduce((u,d)=>za(u,d),sr):Iv(r):sr,[r,t])}function iy(r,t){t===void 0&&(t=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},t),w.useEffect(()=>{const l=r!==sr;l&&!s.current&&(s.current=r),!l&&s.current&&(s.current=null)},[r]),s.current?Yi(r,s.current):sr}function jj(r){w.useEffect(()=>{if(!rc)return;const t=r.map(s=>{let{sensor:l}=s;return l.setup==null?void 0:l.setup()});return()=>{for(const s of t)s?.()}},r.map(t=>{let{sensor:s}=t;return s}))}function _j(r,t){return w.useMemo(()=>r.reduce((s,l)=>{let{eventName:c,handler:u}=l;return s[c]=d=>{u(d,t)},s},{}),[r,t])}function Hv(r){return w.useMemo(()=>r?JS(r):null,[r])}const ly=[];function Cj(r,t){t===void 0&&(t=Ia);const[s]=r,l=Hv(s?on(s):null),[c,u]=w.useState(ly);function d(){u(()=>r.length?r.map(p=>Lv(p)?l:new Dh(t(p),p)):ly)}const f=lc({callback:d});return rr(()=>{f?.disconnect(),d(),r.forEach(p=>f?.observe(p))},[r]),c}function Pv(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return al(t)?t:r}function Ej(r){let{measure:t}=r;const[s,l]=w.useState(null),c=w.useCallback(m=>{for(const{target:y}of m)if(al(y)){l(v=>{const b=t(y);return v?{...v,width:b.width,height:b.height}:b});break}},[t]),u=lc({callback:c}),d=w.useCallback(m=>{const y=Pv(m);u?.disconnect(),y&&u?.observe(y),l(y?t(y):null)},[t,u]),[f,p]=Go(d);return w.useMemo(()=>({nodeRef:f,rect:s,setRef:p}),[s,f,p])}const Rj=[{sensor:ol,options:{}},{sensor:Us,options:{}}],Tj={current:{}},Ho={draggable:{measure:Zm},droppable:{measure:Zm,strategy:Ki.WhileDragging,frequency:dh.Optimized},dragOverlay:{measure:Ia}};class $i extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,l;return(s=(l=this.get(t))==null?void 0:l.node.current)!=null?s:void 0}}const Aj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $i,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ko},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ho,measureDroppableContainers:Ko,windowRect:null,measuringScheduled:!1},Gv={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ko,draggableNodes:new Map,over:null,measureDroppableContainers:Ko},dl=w.createContext(Gv),Vv=w.createContext(Aj);function Nj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $i}}}function Oj(r,t){switch(t.type){case Ut.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ut.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:s}=t,{id:l}=s,c=new $i(r.droppable.containers);return c.set(l,s),{...r,droppable:{...r.droppable,containers:c}}}case Ut.SetDroppableDisabled:{const{id:s,key:l,disabled:c}=t,u=r.droppable.containers.get(s);if(!u||l!==u.key)return r;const d=new $i(r.droppable.containers);return d.set(s,{...u,disabled:c}),{...r,droppable:{...r.droppable,containers:d}}}case Ut.UnregisterDroppable:{const{id:s,key:l}=t,c=r.droppable.containers.get(s);if(!c||l!==c.key)return r;const u=new $i(r.droppable.containers);return u.delete(s),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function kj(r){let{disabled:t}=r;const{active:s,activatorEvent:l,draggableNodes:c}=w.useContext(dl),u=Vo(l),d=Vo(s?.id);return w.useEffect(()=>{if(!t&&!l&&u&&d!=null){if(!ac(u)||document.activeElement===u.target)return;const f=c.get(d);if(!f)return;const{activatorNode:p,node:m}=f;if(!p.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[p.current,m.current]){if(!y)continue;const v=NS(y);if(v){v.focus();break}}})}},[l,t,c,d,u]),null}function Yv(r,t){let{transform:s,...l}=t;return r!=null&&r.length?r.reduce((c,u)=>u({transform:c,...l}),s):s}function Dj(r){return w.useMemo(()=>({draggable:{...Ho.draggable,...r?.draggable},droppable:{...Ho.droppable,...r?.droppable},dragOverlay:{...Ho.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function zj(r){let{activeNode:t,measure:s,initialRect:l,config:c=!0}=r;const u=w.useRef(!1),{x:d,y:f}=typeof c=="boolean"?{x:c,y:c}:c;rr(()=>{if(!d&&!f||!t){u.current=!1;return}if(u.current||!l)return;const m=t?.node.current;if(!m||m.isConnected===!1)return;const y=s(m),v=kv(y,l);if(d||(v.x=0),f||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=zv(m);b&&b.scrollBy({top:v.y,left:v.x})}},[t,d,f,l,s])}const oc=w.createContext({...sr,scaleX:1,scaleY:1});var is;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(is||(is={}));const Ds=w.memo(function(t){var s,l,c,u;let{id:d,accessibility:f,autoScroll:p=!0,children:m,sensors:y=Rj,collisionDetection:v=GS,measuring:b,modifiers:S,..._}=t;const j=w.useReducer(Oj,void 0,Nj),[A,N]=j,[C,R]=MS(),[D,U]=w.useState(is.Uninitialized),T=D===is.Initialized,{draggable:{active:L,nodes:G,translate:q},droppable:{containers:V}}=A,z=L!=null?G.get(L):null,O=w.useRef({initial:null,translated:null}),F=w.useMemo(()=>{var re;return L!=null?{id:L,data:(re=z?.data)!=null?re:Tj,rect:O}:null},[L,z]),I=w.useRef(null),[K,k]=w.useState(null),[$,X]=w.useState(null),ue=Vi(_,Object.values(_)),de=ll("DndDescribedBy",d),M=w.useMemo(()=>V.getEnabled(),[V]),P=Dj(b),{droppableRects:ie,measureDroppableContainers:pe,measuringScheduled:xe}=mj(M,{dragging:T,dependencies:[q.x,q.y],config:P.droppable}),ce=pj(G,L),Oe=w.useMemo(()=>$?Yo($):null,[$]),Be=H(),ke=yj(ce,P.draggable.measure);zj({activeNode:L!=null?G.get(L):null,config:Be.layoutShiftCompensation,initialRect:ke,measure:P.draggable.measure});const De=sy(ce,P.draggable.measure,ke),vt=sy(ce?ce.parentElement:null),tt=w.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:G,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),We=V.getNodeFor((s=tt.current.over)==null?void 0:s.id),Ke=Ej({measure:P.dragOverlay.measure}),Pt=(l=Ke.nodeRef.current)!=null?l:ce,it=T?(c=Ke.rect)!=null?c:De:null,cn=!!(Ke.nodeRef.current&&Ke.rect),bn=bj(cn?null:De),Lt=Hv(Pt?on(Pt):null),lt=wj(T?We??ce:null),Wt=Cj(lt),un=Yv(S,{transform:{x:q.x-bn.x,y:q.y-bn.y,scaleX:1,scaleY:1},activatorEvent:$,active:F,activeNodeRect:De,containerNodeRect:vt,draggingNodeRect:it,over:tt.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:lt,scrollableAncestorRects:Wt,windowRect:Lt}),Dn=Oe?za(Oe,q):null,bt=Sj(lt),tn=iy(bt),nn=iy(bt,[De]),Bt=za(un,tn),gt=it?FS(it,un):null,dn=F&&gt?v({active:F,collisionRect:gt,droppableRects:ie,droppableContainers:M,pointerCoordinates:Dn}):null,rn=Nv(dn,"id"),[mt,wn]=w.useState(null),It=cn?un:za(un,nn),fe=YS(It,(u=mt?.rect)!=null?u:null,De),he=w.useRef(null),ge=w.useCallback((re,ne)=>{let{sensor:me,options:be}=ne;if(I.current==null)return;const Le=G.get(I.current);if(!Le)return;const Te=re.nativeEvent,rt=new me({active:I.current,activeNode:Le,event:Te,options:be,context:tt,onAbort(Je){if(!G.get(Je))return;const{onDragAbort:Fe}=ue.current,Gt={id:Je};Fe?.(Gt),C({type:"onDragAbort",event:Gt})},onPending(Je,qe,Fe,Gt){if(!G.get(Je))return;const{onDragPending:cr}=ue.current,Qn={id:Je,constraint:qe,initialCoordinates:Fe,offset:Gt};cr?.(Qn),C({type:"onDragPending",event:Qn})},onStart(Je){const qe=I.current;if(qe==null)return;const Fe=G.get(qe);if(!Fe)return;const{onDragStart:Gt}=ue.current,Sn={activatorEvent:Te,active:{id:qe,data:Fe.data,rect:O}};ka.unstable_batchedUpdates(()=>{Gt?.(Sn),U(is.Initializing),N({type:Ut.DragStart,initialCoordinates:Je,active:qe}),C({type:"onDragStart",event:Sn}),k(he.current),X(Te)})},onMove(Je){N({type:Ut.DragMove,coordinates:Je})},onEnd:Pe(Ut.DragEnd),onCancel:Pe(Ut.DragCancel)});he.current=rt;function Pe(Je){return async function(){const{active:Fe,collisions:Gt,over:Sn,scrollAdjustedTranslate:cr}=tt.current;let Qn=null;if(Fe&&cr){const{cancelDrop:Mr}=ue.current;Qn={activatorEvent:Te,active:Fe,collisions:Gt,delta:cr,over:Sn},Je===Ut.DragEnd&&typeof Mr=="function"&&await Promise.resolve(Mr(Qn))&&(Je=Ut.DragCancel)}I.current=null,ka.unstable_batchedUpdates(()=>{N({type:Je}),U(is.Uninitialized),wn(null),k(null),X(null),he.current=null;const Mr=Je===Ut.DragEnd?"onDragEnd":"onDragCancel";if(Qn){const zn=ue.current[Mr];zn?.(Qn),C({type:Mr,event:Qn})}})}}},[G]),Se=w.useCallback((re,ne)=>(me,be)=>{const Le=me.nativeEvent,Te=G.get(be);if(I.current!==null||!Te||Le.dndKit||Le.defaultPrevented)return;const rt={active:Te};re(me,ne.options,rt)===!0&&(Le.dndKit={capturedBy:ne.sensor},I.current=be,ge(me,ne))},[G,ge]),Ie=gj(y,Se);jj(y),rr(()=>{De&&D===is.Initializing&&U(is.Initialized)},[De,D]),w.useEffect(()=>{const{onDragMove:re}=ue.current,{active:ne,activatorEvent:me,collisions:be,over:Le}=tt.current;if(!ne||!me)return;const Te={active:ne,activatorEvent:me,collisions:be,delta:{x:Bt.x,y:Bt.y},over:Le};ka.unstable_batchedUpdates(()=>{re?.(Te),C({type:"onDragMove",event:Te})})},[Bt.x,Bt.y]),w.useEffect(()=>{const{active:re,activatorEvent:ne,collisions:me,droppableContainers:be,scrollAdjustedTranslate:Le}=tt.current;if(!re||I.current==null||!ne||!Le)return;const{onDragOver:Te}=ue.current,rt=be.get(rn),Pe=rt&&rt.rect.current?{id:rt.id,rect:rt.rect.current,data:rt.data,disabled:rt.disabled}:null,Je={active:re,activatorEvent:ne,collisions:me,delta:{x:Le.x,y:Le.y},over:Pe};ka.unstable_batchedUpdates(()=>{wn(Pe),Te?.(Je),C({type:"onDragOver",event:Je})})},[rn]),rr(()=>{tt.current={activatorEvent:$,active:F,activeNode:ce,collisionRect:gt,collisions:dn,droppableRects:ie,draggableNodes:G,draggingNode:Pt,draggingNodeRect:it,droppableContainers:V,over:mt,scrollableAncestors:lt,scrollAdjustedTranslate:Bt},O.current={initial:it,translated:gt}},[F,ce,dn,gt,G,Pt,it,ie,V,mt,lt,Bt]),dj({...Be,delta:q,draggingRect:gt,pointerCoordinates:Dn,scrollableAncestors:lt,scrollableAncestorRects:Wt});const ee=w.useMemo(()=>({active:F,activeNode:ce,activeNodeRect:De,activatorEvent:$,collisions:dn,containerNodeRect:vt,dragOverlay:Ke,draggableNodes:G,droppableContainers:V,droppableRects:ie,over:mt,measureDroppableContainers:pe,scrollableAncestors:lt,scrollableAncestorRects:Wt,measuringConfiguration:P,measuringScheduled:xe,windowRect:Lt}),[F,ce,De,$,dn,vt,Ke,G,V,ie,mt,pe,lt,Wt,P,xe,Lt]),ve=w.useMemo(()=>({activatorEvent:$,activators:Ie,active:F,activeNodeRect:De,ariaDescribedById:{draggable:de},dispatch:N,draggableNodes:G,over:mt,measureDroppableContainers:pe}),[$,Ie,F,De,N,de,G,mt,pe]);return Ce.createElement(Av.Provider,{value:R},Ce.createElement(dl.Provider,{value:ve},Ce.createElement(Vv.Provider,{value:ee},Ce.createElement(oc.Provider,{value:fe},m)),Ce.createElement(kj,{disabled:f?.restoreFocus===!1})),Ce.createElement(IS,{...f,hiddenTextDescribedById:de}));function H(){const re=K?.autoScrollEnabled===!1,ne=typeof p=="object"?p.enabled===!1:p===!1,me=T&&!re&&!ne;return typeof p=="object"?{...p,enabled:me}:{enabled:me}}}),Uj=w.createContext(null),oy="button",Mj="Draggable";function Mh(r){let{id:t,data:s,disabled:l=!1,attributes:c}=r;const u=ll(Mj),{activators:d,activatorEvent:f,active:p,activeNodeRect:m,ariaDescribedById:y,draggableNodes:v,over:b}=w.useContext(dl),{role:S=oy,roleDescription:_="draggable",tabIndex:j=0}=c??{},A=p?.id===t,N=w.useContext(A?oc:Uj),[C,R]=Go(),[D,U]=Go(),T=_j(d,t),L=Vi(s);rr(()=>(v.set(t,{id:t,key:u,node:C,activatorNode:D,data:L}),()=>{const q=v.get(t);q&&q.key===u&&v.delete(t)}),[v,t]);const G=w.useMemo(()=>({role:S,tabIndex:j,"aria-disabled":l,"aria-pressed":A&&S===oy?!0:void 0,"aria-roledescription":_,"aria-describedby":y.draggable}),[l,S,j,A,_,y.draggable]);return{active:p,activatorEvent:f,activeNodeRect:m,attributes:G,isDragging:A,listeners:l?void 0:T,node:C,over:b,setNodeRef:R,setActivatorNodeRef:U,transform:N}}function Kv(){return w.useContext(Vv)}const Lj="Droppable",Bj={timeout:25};function hl(r){let{data:t,disabled:s=!1,id:l,resizeObserverConfig:c}=r;const u=ll(Lj),{active:d,dispatch:f,over:p,measureDroppableContainers:m}=w.useContext(dl),y=w.useRef({disabled:s}),v=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:_,updateMeasurementsFor:j,timeout:A}={...Bj,...c},N=Vi(j??l),C=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{m(Array.isArray(N.current)?N.current:[N.current]),S.current=null},A)},[A]),R=lc({callback:C,disabled:_||!d}),D=w.useCallback((G,q)=>{R&&(q&&(R.unobserve(q),v.current=!1),G&&R.observe(G))},[R]),[U,T]=Go(D),L=Vi(t);return w.useEffect(()=>{!R||!U.current||(R.disconnect(),v.current=!1,R.observe(U.current))},[U,R]),w.useEffect(()=>(f({type:Ut.RegisterDroppable,element:{id:l,key:u,disabled:s,node:U,rect:b,data:L}}),()=>f({type:Ut.UnregisterDroppable,key:u,id:l})),[l]),w.useEffect(()=>{s!==y.current.disabled&&(f({type:Ut.SetDroppableDisabled,id:l,key:u,disabled:s}),y.current.disabled=s)},[l,u,s,f]),{active:d,rect:b,isOver:p?.id===l,node:U,over:p,setNodeRef:T}}function Ij(r){let{animation:t,children:s}=r;const[l,c]=w.useState(null),[u,d]=w.useState(null),f=Vo(s);return!s&&!l&&f&&c(f),rr(()=>{if(!u)return;const p=l?.key,m=l?.props.id;if(p==null||m==null){c(null);return}Promise.resolve(t(m,u)).then(()=>{c(null)})},[t,l,u]),Ce.createElement(Ce.Fragment,null,s,l?w.cloneElement(l,{ref:d}):null)}const qj={x:0,y:0,scaleX:1,scaleY:1};function $j(r){let{children:t}=r;return Ce.createElement(dl.Provider,{value:Gv},Ce.createElement(oc.Provider,{value:qj},t))}const Hj={position:"fixed",touchAction:"none"},Pj=r=>ac(r)?"transform 250ms ease":void 0,Gj=w.forwardRef((r,t)=>{let{as:s,activatorEvent:l,adjustScale:c,children:u,className:d,rect:f,style:p,transform:m,transition:y=Pj}=r;if(!f)return null;const v=c?m:{...m,scaleX:1,scaleY:1},b={...Hj,width:f.width,height:f.height,top:f.top,left:f.left,transform:Kn.Transform.toString(v),transformOrigin:c&&l?qS(l,f):void 0,transition:typeof y=="function"?y(l):y,...p};return Ce.createElement(s,{className:d,style:b,ref:t},u)}),Lh=r=>t=>{let{active:s,dragOverlay:l}=t;const c={},{styles:u,className:d}=r;if(u!=null&&u.active)for(const[f,p]of Object.entries(u.active))p!==void 0&&(c[f]=s.node.style.getPropertyValue(f),s.node.style.setProperty(f,p));if(u!=null&&u.dragOverlay)for(const[f,p]of Object.entries(u.dragOverlay))p!==void 0&&l.node.style.setProperty(f,p);return d!=null&&d.active&&s.node.classList.add(d.active),d!=null&&d.dragOverlay&&l.node.classList.add(d.dragOverlay),function(){for(const[p,m]of Object.entries(c))s.node.style.setProperty(p,m);d!=null&&d.active&&s.node.classList.remove(d.active)}},Vj=r=>{let{transform:{initial:t,final:s}}=r;return[{transform:Kn.Transform.toString(t)},{transform:Kn.Transform.toString(s)}]},Yj={duration:250,easing:"ease",keyframes:Vj,sideEffects:Lh({styles:{active:{opacity:"0"}}})};function Kj(r){let{config:t,draggableNodes:s,droppableContainers:l,measuringConfiguration:c}=r;return sc((u,d)=>{if(t===null)return;const f=s.get(u);if(!f)return;const p=f.node.current;if(!p)return;const m=Pv(d);if(!m)return;const{transform:y}=on(d).getComputedStyle(d),v=Dv(y);if(!v)return;const b=typeof t=="function"?t:Fj(t);return qv(p,c.draggable.measure),b({active:{id:u,data:f.data,node:p,rect:c.draggable.measure(p)},draggableNodes:s,dragOverlay:{node:d,rect:c.dragOverlay.measure(m)},droppableContainers:l,measuringConfiguration:c,transform:v})})}function Fj(r){const{duration:t,easing:s,sideEffects:l,keyframes:c}={...Yj,...r};return u=>{let{active:d,dragOverlay:f,transform:p,...m}=u;if(!t)return;const y={x:f.rect.left-d.rect.left,y:f.rect.top-d.rect.top},v={scaleX:p.scaleX!==1?d.rect.width*p.scaleX/f.rect.width:1,scaleY:p.scaleY!==1?d.rect.height*p.scaleY/f.rect.height:1},b={x:p.x-y.x,y:p.y-y.y,...v},S=c({...m,active:d,dragOverlay:f,transform:{initial:p,final:b}}),[_]=S,j=S[S.length-1];if(JSON.stringify(_)===JSON.stringify(j))return;const A=l?.({active:d,dragOverlay:f,...m}),N=f.node.animate(S,{duration:t,easing:s,fill:"forwards"});return new Promise(C=>{N.onfinish=()=>{A?.(),C()}})}}let cy=0;function Qj(r){return w.useMemo(()=>{if(r!=null)return cy++,cy},[r])}const Fv=Ce.memo(r=>{let{adjustScale:t=!1,children:s,dropAnimation:l,style:c,transition:u,modifiers:d,wrapperElement:f="div",className:p,zIndex:m=999}=r;const{activatorEvent:y,active:v,activeNodeRect:b,containerNodeRect:S,draggableNodes:_,droppableContainers:j,dragOverlay:A,over:N,measuringConfiguration:C,scrollableAncestors:R,scrollableAncestorRects:D,windowRect:U}=Kv(),T=w.useContext(oc),L=Qj(v?.id),G=Yv(d,{activatorEvent:y,active:v,activeNodeRect:b,containerNodeRect:S,draggingNodeRect:A.rect,over:N,overlayNodeRect:A.rect,scrollableAncestors:R,scrollableAncestorRects:D,transform:T,windowRect:U}),q=Uh(b),V=Kj({config:l,draggableNodes:_,droppableContainers:j,measuringConfiguration:C}),z=q?A.setRef:void 0;return Ce.createElement($j,null,Ce.createElement(Ij,{animation:V},v&&L?Ce.createElement(Gj,{key:L,id:v.id,ref:z,as:f,activatorEvent:y,adjustScale:t,className:p,transition:u,rect:q,style:{zIndex:m,...c},transform:G},s):null))});function qa(r,t,s){const l=r.slice();return l.splice(s<0?l.length+s:s,0,l.splice(t,1)[0]),l}function Xj(r,t){return r.reduce((s,l,c)=>{const u=t.get(l);return u&&(s[c]=u),s},Array(r.length))}function Oo(r){return r!==null&&r>=0}function Jj(r,t){if(r===t)return!0;if(r.length!==t.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==t[s])return!1;return!0}function Wj(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Bh=r=>{let{rects:t,activeIndex:s,overIndex:l,index:c}=r;const u=qa(t,l,s),d=t[c],f=u[c];return!f||!d?null:{x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height}},ko={scaleX:1,scaleY:1},Qo=r=>{var t;let{activeIndex:s,activeNodeRect:l,index:c,rects:u,overIndex:d}=r;const f=(t=u[s])!=null?t:l;if(!f)return null;if(c===s){const m=u[d];return m?{x:0,y:s<d?m.top+m.height-(f.top+f.height):m.top-f.top,...ko}:null}const p=Zj(u,c,s);return c>s&&c<=d?{x:0,y:-f.height-p,...ko}:c<s&&c>=d?{x:0,y:f.height+p,...ko}:{x:0,y:0,...ko}};function Zj(r,t,s){const l=r[t],c=r[t-1],u=r[t+1];return l?s<t?c?l.top-(c.top+c.height):u?u.top-(l.top+l.height):0:u?u.top-(l.top+l.height):c?l.top-(c.top+c.height):0:0}const Qv="Sortable",Xv=Ce.createContext({activeIndex:-1,containerId:Qv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bh,disabled:{draggable:!1,droppable:!1}});function Fi(r){let{children:t,id:s,items:l,strategy:c=Bh,disabled:u=!1}=r;const{active:d,dragOverlay:f,droppableRects:p,over:m,measureDroppableContainers:y}=Kv(),v=ll(Qv,s),b=f.rect!==null,S=w.useMemo(()=>l.map(T=>typeof T=="object"&&"id"in T?T.id:T),[l]),_=d!=null,j=d?S.indexOf(d.id):-1,A=m?S.indexOf(m.id):-1,N=w.useRef(S),C=!Jj(S,N.current),R=A!==-1&&j===-1||C,D=Wj(u);rr(()=>{C&&_&&y(S)},[C,S,_,y]),w.useEffect(()=>{N.current=S},[S]);const U=w.useMemo(()=>({activeIndex:j,containerId:v,disabled:D,disableTransforms:R,items:S,overIndex:A,useDragOverlay:b,sortedRects:Xj(S,p),strategy:c}),[j,v,D.draggable,D.droppable,R,S,A,p,b,c]);return Ce.createElement(Xv.Provider,{value:U},t)}const e1=r=>{let{id:t,items:s,activeIndex:l,overIndex:c}=r;return qa(s,l,c).indexOf(t)},t1=r=>{let{containerId:t,isSorting:s,wasDragging:l,index:c,items:u,newIndex:d,previousItems:f,previousContainerId:p,transition:m}=r;return!m||!l||f!==u&&c===d?!1:s?!0:d!==c&&t===p},n1={duration:200,easing:"ease"},Jv="transform",r1=Kn.Transition.toString({property:Jv,duration:0,easing:"linear"}),s1={roleDescription:"sortable"};function a1(r){let{disabled:t,index:s,node:l,rect:c}=r;const[u,d]=w.useState(null),f=w.useRef(s);return rr(()=>{if(!t&&s!==f.current&&l.current){const p=c.current;if(p){const m=Ia(l.current,{ignoreTransform:!0}),y={x:p.left-m.left,y:p.top-m.top,scaleX:p.width/m.width,scaleY:p.height/m.height};(y.x||y.y)&&d(y)}}s!==f.current&&(f.current=s)},[t,s,l,c]),w.useEffect(()=>{u&&d(null)},[u]),u}function fl(r){let{animateLayoutChanges:t=t1,attributes:s,disabled:l,data:c,getNewIndex:u=e1,id:d,strategy:f,resizeObserverConfig:p,transition:m=n1}=r;const{items:y,containerId:v,activeIndex:b,disabled:S,disableTransforms:_,sortedRects:j,overIndex:A,useDragOverlay:N,strategy:C}=w.useContext(Xv),R=i1(l,S),D=y.indexOf(d),U=w.useMemo(()=>({sortable:{containerId:v,index:D,items:y},...c}),[v,c,D,y]),T=w.useMemo(()=>y.slice(y.indexOf(d)),[y,d]),{rect:L,node:G,isOver:q,setNodeRef:V}=hl({id:d,data:U,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...p}}),{active:z,activatorEvent:O,activeNodeRect:F,attributes:I,setNodeRef:K,listeners:k,isDragging:$,over:X,setActivatorNodeRef:ue,transform:de}=Mh({id:d,data:U,attributes:{...s1,...s},disabled:R.draggable}),M=ES(V,K),P=!!z,ie=P&&!_&&Oo(b)&&Oo(A),pe=!N&&$,xe=pe&&ie?de:null,Oe=ie?xe??(f??C)({rects:j,activeNodeRect:F,activeIndex:b,overIndex:A,index:D}):null,Be=Oo(b)&&Oo(A)?u({id:d,items:y,activeIndex:b,overIndex:A}):D,ke=z?.id,De=w.useRef({activeId:ke,items:y,newIndex:Be,containerId:v}),vt=y!==De.current.items,tt=t({active:z,containerId:v,isDragging:$,isSorting:P,id:d,index:D,items:y,newIndex:De.current.newIndex,previousItems:De.current.items,previousContainerId:De.current.containerId,transition:m,wasDragging:De.current.activeId!=null}),We=a1({disabled:!tt,index:D,node:G,rect:L});return w.useEffect(()=>{P&&De.current.newIndex!==Be&&(De.current.newIndex=Be),v!==De.current.containerId&&(De.current.containerId=v),y!==De.current.items&&(De.current.items=y)},[P,Be,v,y]),w.useEffect(()=>{if(ke===De.current.activeId)return;if(ke!=null&&De.current.activeId==null){De.current.activeId=ke;return}const Pt=setTimeout(()=>{De.current.activeId=ke},50);return()=>clearTimeout(Pt)},[ke]),{active:z,activeIndex:b,attributes:I,data:U,rect:L,index:D,newIndex:Be,items:y,isOver:q,isSorting:P,isDragging:$,listeners:k,node:G,overIndex:A,over:X,setNodeRef:M,setActivatorNodeRef:ue,setDroppableNodeRef:V,setDraggableNodeRef:K,transform:We??Oe,transition:Ke()};function Ke(){if(We||vt&&De.current.newIndex===D)return r1;if(!(pe&&!ac(O)||!m)&&(P||tt))return Kn.Transition.toString({...m,property:Jv})}}function i1(r,t){var s,l;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(s=r?.draggable)!=null?s:t.draggable,droppable:(l=r?.droppable)!=null?l:t.droppable}}function Xo(r){if(!r)return!1;const t=r.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const l1=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],pl=(r,t)=>{let{context:{active:s,collisionRect:l,droppableRects:c,droppableContainers:u,over:d,scrollableAncestors:f}}=t;if(l1.includes(r.code)){if(r.preventDefault(),!s||!l)return;const p=[];u.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=c.get(v.id);if(b)switch(r.code){case Xe.Down:l.top<b.top&&p.push(v);break;case Xe.Up:l.top>b.top&&p.push(v);break;case Xe.Left:l.left>b.left&&p.push(v);break;case Xe.Right:l.left<b.left&&p.push(v);break}});const m=HS({collisionRect:l,droppableRects:c,droppableContainers:p});let y=Nv(m,"id");if(y===d?.id&&m.length>1&&(y=m[1].id),y!=null){const v=u.get(s.id),b=u.get(y),S=b?c.get(b.id):null,_=b?.node.current;if(_&&S&&v&&b){const A=ic(_).some((T,L)=>f[L]!==T),N=Wv(v,b),C=o1(v,b),R=A||!N?{x:0,y:0}:{x:C?l.width-S.width:0,y:C?l.height-S.height:0},D={x:S.left,y:S.top};return R.x&&R.y?D:Yi(D,R)}}}};function Wv(r,t){return!Xo(r)||!Xo(t)?!1:r.data.current.sortable.containerId===t.data.current.sortable.containerId}function o1(r,t){return!Xo(r)||!Xo(t)||!Wv(r,t)?!1:r.data.current.sortable.index<t.data.current.sortable.index}const uy=r=>{if(!r)return"";const t=new Date(r);return`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`},c1=({recipe:r,isSelected:t,isSelectMode:s,onSelectRecipe:l,onToggleSelection:c,disableDrag:u,showOwner:d,ownerLabelFn:f})=>{const{attributes:p,listeners:m,setNodeRef:y,transform:v,transition:b,isDragging:S}=fl({id:r.id,disabled:u}),_={transform:Kn.Transform.toString(v),transition:b,opacity:S?.5:1,touchAction:"pan-y",height:"100%",outline:"none",cursor:u?"default":"grab"};return i.jsx("div",{ref:y,style:_,...p,...m,children:i.jsxs(_t,{hoverable:!0,className:`recipe-card ${t?"selected":""} ${r.type==="bread"?"recipe-card--bread":""} ${/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(j=>/|Dessert/i.test(j))?"recipe-card--dessert":""} ${r.category==="URL"||r.sourceUrl?"recipe-card--url":""}`,style:{height:"100%"},onClick:()=>{s?c(r.id):l(r)},children:[i.jsxs("div",{className:"recipe-card__image-wrapper",children:[r.image?i.jsx("img",{src:r.image,alt:r.title,className:"recipe-card__image"}):i.jsx("div",{className:"recipe-card__image placeholder"}),i.jsx("div",{className:"recipe-card__overlay"}),s&&i.jsx("div",{className:"recipe-card__selection-overlay",children:i.jsx("div",{className:`selection-checkbox ${t?"checked":""}`})}),i.jsx("div",{className:"recipe-card__tags",children:(()=>{if(!r.tags)return null;const j=r.tags.flatMap(C=>(C||"").split(/[,]/)).map(C=>C.trim()).filter(Boolean);return(j.includes("URL")?["URL"]:j).slice(0,1).map((C,R)=>i.jsx("span",{className:"recipe-tag",children:C},`${C}-${R}`))})()})]}),i.jsxs("div",{className:"recipe-card__content",children:[i.jsx("h3",{className:"recipe-title",children:r.title}),i.jsx("p",{className:"recipe-desc",children:r.description}),i.jsxs("div",{className:"recipe-meta",children:[r.storeName&&i.jsxs("span",{children:[" ",r.storeName]}),d&&typeof f=="function"&&i.jsxs("span",{className:"recipe-owner",children:[" ",f(r)]}),i.jsxs("div",{className:"recipe-dates",children:[i.jsxs("span",{className:"recipe-date",children:[" : ",uy(r.created_at)]}),r.updated_at&&i.jsxs("span",{className:"recipe-date",children:[" : ",uy(r.updated_at)]})]})]})]})]})})},dy=r=>r.type==="bread"||r.tags&&r.tags.some(t=>/|Bread/i.test(t)),hy=r=>{const t=s=>/|Dessert/i.test(s);return/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(t)},fy=r=>/|Sauce/i.test(r.category||"")||r.tags&&r.tags.some(t=>/|Sauce/i.test(t)),py=r=>/||Decor/i.test(r.category||"")||r.tags&&r.tags.some(t=>/||Decor/i.test(t)),gy=({recipes:r,onSelectRecipe:t,isSelectMode:s,selectedIds:l,onToggleSelection:c,disableDrag:u,displayMode:d="normal",showOwner:f=!1,ownerLabelFn:p})=>{const[m,y]=w.useState({}),v=V=>{y(z=>({...z,[V]:!z[V]}))},b=r.filter(V=>dy(V)),S=r.filter(V=>!dy(V)),_=S.filter(V=>fy(V)),j=S.filter(V=>!fy(V)),A=j.filter(V=>py(V)),N=j.filter(V=>!py(V)),C=V=>{const z=V.category||"",O=V.tags||[];return/|Dressing||Vinaigrette||Mayonnaise/i.test(z)||O.some(F=>/|Dressing||Vinaigrette||Mayonnaise/i.test(F))},R=N.filter(V=>C(V)),D=N.filter(V=>!C(V)),U=D.filter(V=>hy(V)),T=D.filter(V=>!hy(V)),[L,G]=w.useState(typeof window<"u"&&window.innerWidth>=1024?9:8);Ce.useEffect(()=>{const V=()=>{window.innerWidth>=1024?G(9):G(8)};return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const q=(V,z,O,F)=>{if(z.length===0)return null;const I=d==="all";let K=z,k=!1,$=!1;return I||(k=m[F],$=z.length>L,K=k?z:z.slice(0,L)),i.jsxs("div",{className:"recipe-section",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{onClick:()=>!I&&$&&v(F),style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px",cursor:!I&&$?"pointer":"default",userSelect:"none"},children:[i.jsx("span",{children:O})," ",V,i.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal"},children:["(",z.length,")"]}),!I&&$&&i.jsx("span",{className:"section-toggle-btn",children:k?" ":" "})]}),i.jsx("div",{className:"recipe-grid",children:i.jsx(Fi,{items:K.map(X=>X.id),strategy:Bh,children:K.map(X=>{const ue=l&&l.has(X.id);return i.jsx(c1,{recipe:X,isSelected:ue,isSelectMode:s,onSelectRecipe:t,onToggleSelection:c,disableDrag:u,showOwner:f,ownerLabelFn:p},X.id)})})})]})};return i.jsxs("div",{className:"recipe-list-container",children:[q("",T,"","cooking"),q("",b,"","bread"),q("",U,"","dessert"),q("",_,"","sauce"),q("",R,"","dressing"),q("",A,"","decoration"),r.length===0&&i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:""})]})},xn=({isOpen:r,onClose:t,title:s,children:l,size:c="medium",showCloseButton:u=!0})=>{if(w.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),w.useEffect(()=>{const f=p=>{p.key==="Escape"&&r&&t()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[r,t]),!r)return null;const d=f=>{f.target===f.currentTarget&&t()};return i.jsx("div",{className:"modal-overlay",onClick:d,children:i.jsxs("div",{className:`modal-content modal-${c}`,children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{className:"modal-title",children:s}),u&&i.jsx("button",{className:"modal-close-btn",onClick:t,"aria-label":"",children:""})]}),i.jsx("div",{className:"modal-body",children:l})]})})};function cc(r,t){var s={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&t.indexOf(l)<0&&(s[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(r);c<l.length;c++)t.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(r,l[c])&&(s[l[c]]=r[l[c]]);return s}function u1(r,t,s,l){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function f(y){try{m(l.next(y))}catch(v){d(v)}}function p(y){try{m(l.throw(y))}catch(v){d(v)}}function m(y){y.done?u(y.value):c(y.value).then(f,p)}m((l=l.apply(r,t||[])).next())})}const d1=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class Ih extends Error{constructor(t,s="FunctionsError",l){super(t),this.name=s,this.context=l}}class h1 extends Ih{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class my extends Ih{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class yy extends Ih{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hh;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(hh||(hh={}));class f1{constructor(t,{headers:s={},customFetch:l,region:c=hh.Any}={}){this.url=t,this.headers=s,this.region=c,this.fetch=d1(l)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return u1(this,arguments,void 0,function*(s,l={}){var c;let u,d;try{const{headers:f,method:p,body:m,signal:y,timeout:v}=l;let b={},{region:S}=l;S||(S=this.region);const _=new URL(`${this.url}/${s}`);S&&S!=="any"&&(b["x-region"]=S,_.searchParams.set("forceFunctionRegion",S));let j;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",j=m):typeof m=="string"?(b["Content-Type"]="text/plain",j=m):typeof FormData<"u"&&m instanceof FormData?j=m:(b["Content-Type"]="application/json",j=JSON.stringify(m)):j=m;let A=y;v&&(d=new AbortController,u=setTimeout(()=>d.abort(),v),y?(A=d.signal,y.addEventListener("abort",()=>d.abort())):A=d.signal);const N=yield this.fetch(_.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:j,signal:A}).catch(U=>{throw new h1(U)}),C=N.headers.get("x-relay-error");if(C&&C==="true")throw new my(N);if(!N.ok)throw new yy(N);let R=((c=N.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),D;return R==="application/json"?D=yield N.json():R==="application/octet-stream"||R==="application/pdf"?D=yield N.blob():R==="text/event-stream"?D=N:R==="multipart/form-data"?D=yield N.formData():D=yield N.text(),{data:D,error:null,response:N}}catch(f){return{data:null,error:f,response:f instanceof yy||f instanceof my?f.context:void 0}}finally{u&&clearTimeout(u)}})}}var p1=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},g1=class{constructor(r){var t,s;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(t=r.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=r.signal,this.isMaybeSingle=(s=r.isMaybeSingle)!==null&&s!==void 0?s:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,t){return this.headers=new Headers(this.headers),this.headers.set(r,t),this}then(r,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,f=null,p=null,m=u.status,y=u.statusText;if(u.ok){var v,b;if(s.method!=="HEAD"){var S;const N=await u.text();N===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((S=s.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?f=N:f=JSON.parse(N))}const j=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),A=(b=u.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");j&&A&&A.length>1&&(p=parseInt(A[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var _;const j=await u.text();try{d=JSON.parse(j),Array.isArray(d)&&u.status===404&&(f=[],d=null,m=200,y="OK")}catch{u.status===404&&j===""?(m=204,y="No Content"):d={message:j}}if(d&&s.isMaybeSingle&&(!(d==null||(_=d.details)===null||_===void 0)&&_.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&s.shouldThrowOnError)throw new p1(d)}return{error:d,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(c=c.catch(u=>{var d;let f="";const p=u?.cause;if(p){var m,y,v,b;const _=(m=p?.message)!==null&&m!==void 0?m:"",j=(y=p?.code)!==null&&y!==void 0?y:"";f=`${(v=u?.name)!==null&&v!==void 0?v:"FetchError"}: ${u?.message}`,f+=`

Caused by: ${(b=p?.name)!==null&&b!==void 0?b:"Error"}: ${_}`,j&&(f+=` (${j})`),p?.stack&&(f+=`
${p.stack}`)}else{var S;f=(S=u?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(r,t)}returns(){return this}overrideTypes(){return this}},m1=class extends g1{select(r){let t=!1;const s=(r??"*").split("").map(l=>/\s/.test(l)&&!t?"":(l==='"'&&(t=!t),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:t=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${r}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:t,referencedTable:s=t}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,t,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(u,`${t-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:t=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[r?"analyze":null,t?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const vy=new RegExp("[,()]");var Ta=class extends m1{eq(r,t){return this.url.searchParams.append(r,`eq.${t}`),this}neq(r,t){return this.url.searchParams.append(r,`neq.${t}`),this}gt(r,t){return this.url.searchParams.append(r,`gt.${t}`),this}gte(r,t){return this.url.searchParams.append(r,`gte.${t}`),this}lt(r,t){return this.url.searchParams.append(r,`lt.${t}`),this}lte(r,t){return this.url.searchParams.append(r,`lte.${t}`),this}like(r,t){return this.url.searchParams.append(r,`like.${t}`),this}likeAllOf(r,t){return this.url.searchParams.append(r,`like(all).{${t.join(",")}}`),this}likeAnyOf(r,t){return this.url.searchParams.append(r,`like(any).{${t.join(",")}}`),this}ilike(r,t){return this.url.searchParams.append(r,`ilike.${t}`),this}ilikeAllOf(r,t){return this.url.searchParams.append(r,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(r,t){return this.url.searchParams.append(r,`ilike(any).{${t.join(",")}}`),this}regexMatch(r,t){return this.url.searchParams.append(r,`match.${t}`),this}regexIMatch(r,t){return this.url.searchParams.append(r,`imatch.${t}`),this}is(r,t){return this.url.searchParams.append(r,`is.${t}`),this}isDistinct(r,t){return this.url.searchParams.append(r,`isdistinct.${t}`),this}in(r,t){const s=Array.from(new Set(t)).map(l=>typeof l=="string"&&vy.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`in.(${s})`),this}notIn(r,t){const s=Array.from(new Set(t)).map(l=>typeof l=="string"&&vy.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`not.in.(${s})`),this}contains(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cs.{${t.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(t)}`),this}containedBy(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cd.{${t.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(t)}`),this}rangeGt(r,t){return this.url.searchParams.append(r,`sr.${t}`),this}rangeGte(r,t){return this.url.searchParams.append(r,`nxl.${t}`),this}rangeLt(r,t){return this.url.searchParams.append(r,`sl.${t}`),this}rangeLte(r,t){return this.url.searchParams.append(r,`nxr.${t}`),this}rangeAdjacent(r,t){return this.url.searchParams.append(r,`adj.${t}`),this}overlaps(r,t){return typeof t=="string"?this.url.searchParams.append(r,`ov.${t}`):this.url.searchParams.append(r,`ov.{${t.join(",")}}`),this}textSearch(r,t,{config:s,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(r,`${c}fts${u}.${t}`),this}match(r){return Object.entries(r).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(r,t,s){return this.url.searchParams.append(r,`not.${t}.${s}`),this}or(r,{foreignTable:t,referencedTable:s=t}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${r})`),this}filter(r,t,s){return this.url.searchParams.append(r,`${t}.${s}`),this}},y1=class{constructor(r,{headers:t={},schema:s,fetch:l}){this.url=r,this.headers=new Headers(t),this.schema=s,this.fetch=l}select(r,t){const{head:s=!1,count:l}=t??{},c=s?"HEAD":"GET";let u=!1;const d=(r??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new Ta({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:t,defaultToNull:s=!0}={}){var l;const c="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ta({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(r,{onConflict:t,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new Ta({method:d,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:t}={}){var s;const l="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ta({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:r}={}){var t;const s="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Ta({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},v1=class Zv{constructor(t,{headers:s={},schema:l,fetch:c}={}){this.url=t,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new y1(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Zv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const p=new URL(`${this.url}/rpc/${t}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{p.searchParams.append(v,b)})):(f="POST",m=s);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new Ta({method:f,url:p,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class x1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const l=s.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const l=this.getWebSocketConstructor();return new l(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const b1="2.89.0",w1=`realtime-js/${b1}`,e0="1.0.0",S1="2.0.0",xy=e0,fh=1e4,j1=1e3,_1=100;var ls;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ls||(ls={}));var Dt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Dt||(Dt={}));var tr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(tr||(tr={}));var ph;(function(r){r.websocket="websocket"})(ph||(ph={}));var Ns;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ns||(Ns={}));class C1{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let l=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,l;const c=(l=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(t){var s,l;const c=(l=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:{},d=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,s,l){var c,u;const d=t.topic,f=(c=t.ref)!==null&&c!==void 0?c:"",p=(u=t.join_ref)!==null&&u!==void 0?u:"",m=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+d.length+m.length+v.length,S=new ArrayBuffer(this.HEADER_LENGTH+b);let _=new DataView(S),j=0;_.setUint8(j++,this.KINDS.userBroadcastPush),_.setUint8(j++,p.length),_.setUint8(j++,f.length),_.setUint8(j++,d.length),_.setUint8(j++,m.length),_.setUint8(j++,v.length),_.setUint8(j++,s),Array.from(p,N=>_.setUint8(j++,N.charCodeAt(0))),Array.from(f,N=>_.setUint8(j++,N.charCodeAt(0))),Array.from(d,N=>_.setUint8(j++,N.charCodeAt(0))),Array.from(m,N=>_.setUint8(j++,N.charCodeAt(0))),Array.from(v,N=>_.setUint8(j++,N.charCodeAt(0)));var A=new Uint8Array(S.byteLength+l.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(l),S.byteLength),A.buffer}decode(t,s){if(this._isArrayBuffer(t)){let l=this._binaryDecode(t);return s(l)}if(typeof t=="string"){const l=JSON.parse(t),[c,u,d,f,p]=l;return s({join_ref:c,ref:u,topic:d,event:f,payload:p})}return s({})}_binaryDecode(t){const s=new DataView(t),l=s.getUint8(0),c=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,c)}_decodeUserBroadcast(t,s,l){const c=s.getUint8(1),u=s.getUint8(2),d=s.getUint8(3),f=s.getUint8(4);let p=this.HEADER_LENGTH+4;const m=l.decode(t.slice(p,p+c));p=p+c;const y=l.decode(t.slice(p,p+u));p=p+u;const v=l.decode(t.slice(p,p+d));p=p+d;const b=t.slice(p,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(l.decode(b)):b,_={type:this.BROADCAST_EVENT,event:y,payload:S};return d>0&&(_.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([l])=>s.includes(l)))}}class t0{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ht;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ht||(ht={}));const by=(r,t,s={})=>{var l;const c=(l=s.skipTypes)!==null&&l!==void 0?l:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=E1(d,r,t,c),u),{}):{}},E1=(r,t,s,l)=>{const c=t.find(f=>f.name===r),u=c?.type,d=s[r];return u&&!l.includes(u)?n0(u,d):gh(d)},n0=(r,t)=>{if(r.charAt(0)==="_"){const s=r.slice(1,r.length);return N1(t,s)}switch(r){case ht.bool:return R1(t);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return T1(t);case ht.json:case ht.jsonb:return A1(t);case ht.timestamp:return O1(t);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return gh(t);default:return gh(t)}},gh=r=>r,R1=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},T1=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},A1=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},N1=(r,t)=>{if(typeof r!="string")return r;const s=r.length-1,l=r[s];if(r[0]==="{"&&l==="}"){let u;const d=r.slice(1,s);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(f=>n0(t,f))}return r},O1=r=>typeof r=="string"?r.replace(" ","T"):r,r0=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zd{constructor(t,s,l={},c=fh){this.channel=t,this.event=s,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var l;return this._hasReceived(t)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(l=>l.status===t).forEach(l=>l.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wy;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(wy||(wy={}));class Hi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hi.syncState(this.state,c,u,d),this.pendingDiffs.forEach(p=>{this.state=Hi.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],f()}),this.channel._on(l.diff,{},c=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Hi.syncDiff(this.state,c,u,d),f())}),this.onJoin((c,u,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:d})}),this.onLeave((c,u,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,l,c){const u=this.cloneDeep(t),d=this.transformState(s),f={},p={};return this.map(u,(m,y)=>{d[m]||(p[m]=y)}),this.map(d,(m,y)=>{const v=u[m];if(v){const b=y.map(A=>A.presence_ref),S=v.map(A=>A.presence_ref),_=y.filter(A=>S.indexOf(A.presence_ref)<0),j=v.filter(A=>b.indexOf(A.presence_ref)<0);_.length>0&&(f[m]=_),j.length>0&&(p[m]=j)}else f[m]=y}),this.syncDiff(u,{joins:f,leaves:p},l,c)}static syncDiff(t,s,l,c){const{joins:u,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(u,(f,p)=>{var m;const y=(m=t[f])!==null&&m!==void 0?m:[];if(t[f]=this.cloneDeep(p),y.length>0){const v=t[f].map(S=>S.presence_ref),b=y.filter(S=>v.indexOf(S.presence_ref)<0);t[f].unshift(...b)}l(f,y,p)}),this.map(d,(f,p)=>{let m=t[f];if(!m)return;const y=p.map(v=>v.presence_ref);m=m.filter(v=>y.indexOf(v.presence_ref)<0),t[f]=m,c(f,m,p),m.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(l=>s(l,t[l]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,l)=>{const c=t[l];return"metas"in c?s[l]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[l]=c,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sy;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Sy||(Sy={}));var Pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Pi||(Pi={}));var Nr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Nr||(Nr={}));class Da{constructor(t,s={config:{}},l){var c,u;if(this.topic=t,this.params=s,this.socket=l,this.bindings={},this.state=Dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zd(this,tr.join,this.params,this.timeout),this.rejoinTimer=new t0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tr.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new Hi(this),this.broadcastEndpointURL=r0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var l,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Dt.closed){const{config:{broadcast:d,presence:f,private:p}}=this.params,m=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&c!==void 0?c:[],y=!!this.bindings[Pi.PRESENCE]&&this.bindings[Pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},b={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Nr.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Nr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:S})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t?.(Nr.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,A=(_=j?.length)!==null&&_!==void 0?_:0,N=[];for(let C=0;C<A;C++){const R=j[C],{filter:{event:D,schema:U,table:T,filter:L}}=R,G=S&&S[C];if(G&&G.event===D&&Da.isFilterValueEqual(G.schema,U)&&Da.isFilterValueEqual(G.table,T)&&Da.isFilterValueEqual(G.filter,L))N.push(Object.assign(Object.assign({},R),{id:G.id}));else{this.unsubscribe(),this.state=Dt.errored,t?.(Nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Nr.SUBSCRIBED);return}}).receive("error",S=>{this.state=Dt.errored,t?.(Nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,l){return this.state===Dt.joined&&t===Pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,l)}async httpSend(t,s,l={}){var c;if(s==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(t,s={}){var l,c;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,f,p;const m=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Dt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tr.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new zd(this,tr.leave,{},t),l.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dt.closed,this.bindings={}}async _fetchWithTimeout(t,s,l){const c=new AbortController,u=setTimeout(()=>c.abort(),l),d=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(u),d}_push(t,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new zd(this,t,s,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_1){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,l){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,l){var c,u;const d=t.toLocaleLowerCase(),{close:f,error:p,leave:m,join:y}=tr;if(l&&[f,p,m,y].indexOf(d)>=0&&l!==this._joinRef())return;let b=this._onMessage(d,s,l);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var _,j,A;return((_=S.filter)===null||_===void 0?void 0:_.event)==="*"||((A=(j=S.filter)===null||j===void 0?void 0:j.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===d}).map(S=>S.callback(b,l)):(u=this.bindings[d])===null||u===void 0||u.filter(S=>{var _,j,A,N,C,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in S){const D=S.id,U=(_=S.filter)===null||_===void 0?void 0:_.event;return D&&((j=s.ids)===null||j===void 0?void 0:j.includes(D))&&(U==="*"||U?.toLocaleLowerCase()===((A=s.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const D=(C=(N=S?.filter)===null||N===void 0?void 0:N.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return D==="*"||D===((R=s?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===d}).map(S=>{if(typeof b=="object"&&"ids"in b){const _=b.data,{schema:j,table:A,commit_timestamp:N,type:C,errors:R}=_;b=Object.assign(Object.assign({},{schema:j,table:A,commit_timestamp:N,eventType:C,new:{},old:{},errors:R}),this._getPayloadRecords(_))}S.callback(b,l)})}_isClosed(){return this.state===Dt.closed}_isJoined(){return this.state===Dt.joined}_isJoining(){return this.state===Dt.joining}_isLeaving(){return this.state===Dt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,l){const c=t.toLocaleLowerCase(),u={type:c,filter:s,callback:l};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(t,s){const l=t.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Da.isEqual(c.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const l in t)if(t[l]!==s[l])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(tr.close,{},t)}_onError(t){this._on(tr.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=by(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=by(t.columns,t.old_record)),s}}const Ud=()=>{},Do={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},k1=[1e3,2e3,5e3,1e4],D1=1e4,z1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class U1{constructor(t,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=Do.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ud,this.ref=0,this.reconnectTimer=null,this.vsn=xy,this.logger=Ud,this.conn=null,this.sendBuffer=[],this.serializer=new C1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((l=s?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${ph.websocket}`,this.httpEndpoint=r0(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=x1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,l){this.logger(t,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return Ns.Connecting;case ls.open:return Ns.Open;case ls.closing:return Ns.Closing;default:return Ns.Closed}}isConnected(){return this.connectionState()===Ns.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const l=`realtime:${t}`,c=this.getChannels().find(u=>u.topic===l);if(c)return c;{const u=new Da(`realtime:${t}`,s,this);return this.channels.push(u),u}}push(t){const{topic:s,event:l,payload:c,ref:u}=t,d=()=>{this.encode(t,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${s} ${l} (${u})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(j1,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Do.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(l=>l.topic===t&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:c,payload:u,ref:d}=s,f=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${l} ${c} ${f}`.trim(),u),this.channels.filter(m=>m._isMember(l)).forEach(m=>m._trigger(c,u,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ls.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ls.open||this.conn.readyState===ls.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(tr.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const l=t.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${t}${l}${c}`}_workerObjectUrl(t){let s;if(t)s=t;else{const l=new Blob([z1],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,l=!1;if(t)s=t,l=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),s=this.accessTokenValue}else s=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(c=>{const u={access_token:s,version:w1};s&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(tr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(l=>{try{l(s)}catch(c){this.log("error",`error in ${t} callback`,c)}})}catch(l){this.log("error",`error triggering ${t} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new t0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Do.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,l,c,u,d,f,p,m,y,v,b,S;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(l=t?.timeout)!==null&&l!==void 0?l:fh,this.heartbeatIntervalMs=(c=t?.heartbeatIntervalMs)!==null&&c!==void 0?c:Do.HEARTBEAT_INTERVAL,this.worker=(u=t?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Ud,this.vsn=(p=t?.vsn)!==null&&p!==void 0?p:xy,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t?.reconnectAfterMs)!==null&&m!==void 0?m:(_=>k1[_-1]||D1),this.vsn){case e0:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((_,j)=>j(JSON.stringify(_))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((_,j)=>j(JSON.parse(_)));break;case S1:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Qi=class extends Error{constructor(r,t){super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function M1(r,t,s){const l=new URL(t,r);if(s)for(const[c,u]of Object.entries(s))u!==void 0&&l.searchParams.set(c,u);return l.toString()}async function L1(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function B1(r){const t=r.fetchImpl??globalThis.fetch;return{async request({method:s,path:l,query:c,body:u,headers:d}){const f=M1(r.baseUrl,l,c),p=await L1(r.auth),m=await t(f,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...p,...d},body:u?JSON.stringify(u):void 0}),y=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),b=v&&y?JSON.parse(y):y;if(!m.ok){const S=v?b:void 0,_=S?.error;throw new Qi(_?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:_?.type,icebergCode:_?.code,details:S})}return{status:m.status,headers:m.headers,data:b}}}}function zo(r){return r.join("")}var I1=class{constructor(r,t=""){this.client=r,this.prefix=t}async listNamespaces(r){const t=r?{parent:zo(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(r,t){const s={namespace:r.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zo(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zo(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zo(r.namespace)}`}),!0}catch(t){if(t instanceof Qi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(r,t){try{return await this.createNamespace(r,t)}catch(s){if(s instanceof Qi&&s.status===409)return;throw s}}};function wa(r){return r.join("")}var q1=class{constructor(r,t="",s){this.client=r,this.prefix=t,this.accessDelegation=s}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables`})).data.identifiers}async createTable(r,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(r,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(r,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(r){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata}async tableExists(r){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(s){if(s instanceof Qi&&s.status===404)return!1;throw s}}async createTableIfNotExists(r,t){try{return await this.createTable(r,t)}catch(s){if(s instanceof Qi&&s.status===409)return await this.loadTable({namespace:r.namespace,name:t.name});throw s}}},$1=class{constructor(r){let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const s=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=B1({baseUrl:s,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new I1(this.client,t),this.tableOps=new q1(this.client,t,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,t){return this.namespaceOps.createNamespace(r,t)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,t){return this.tableOps.createTable(r,t)}async updateTable(r,t){return this.tableOps.updateTable(r,t)}async dropTable(r,t){await this.tableOps.dropTable(r,t)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,t){return this.namespaceOps.createNamespaceIfNotExists(r,t)}async createTableIfNotExists(r,t){return this.tableOps.createTableIfNotExists(r,t)}},uc=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function xt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var H1=class extends uc{constructor(r,t,s){super(r),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mh=class extends uc{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}};const qh=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),P1=()=>Response,yh=r=>{if(Array.isArray(r))return r.map(s=>yh(s));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([s,l])=>{const c=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[c]=yh(l)}),t},G1=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},V1=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Xi(r){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(r)}function Y1(r,t){if(Xi(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var l=s.call(r,t);if(Xi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function K1(r){var t=Y1(r,"string");return Xi(t)=="symbol"?t:t+""}function F1(r,t,s){return(t=K1(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function jy(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,l)}return s}function Ne(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?jy(Object(s),!0).forEach(function(l){F1(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):jy(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}const Md=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},Q1=async(r,t,s)=>{r instanceof await P1()&&!s?.noResolveJson?r.json().then(l=>{const c=r.status||500,u=l?.statusCode||c+"";t(new H1(Md(l),c,u))}).catch(l=>{t(new mh(Md(l),l))}):t(new mh(Md(r),r))},X1=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return r==="GET"||!l?c:(G1(l)?(c.headers=Ne({"Content-Type":"application/json"},t?.headers),c.body=JSON.stringify(l)):c.body=l,t?.duplex&&(c.duplex=t.duplex),Ne(Ne({},c),s))};async function gl(r,t,s,l,c,u){return new Promise((d,f)=>{r(s,X1(t,l,c,u)).then(p=>{if(!p.ok)throw p;return l?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>Q1(p,f,l))})}async function Ji(r,t,s,l){return gl(r,"GET",t,s,l)}async function er(r,t,s,l,c){return gl(r,"POST",t,l,c,s)}async function vh(r,t,s,l,c){return gl(r,"PUT",t,l,c,s)}async function J1(r,t,s,l){return gl(r,"HEAD",t,Ne(Ne({},s),{},{noResolveJson:!0}),l)}async function $h(r,t,s,l,c){return gl(r,"DELETE",t,l,c,s)}var W1=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t}then(r,t){return this.execute().then(r,t)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}}};let s0;s0=Symbol.toStringTag;var Z1=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t,this[s0]="BlobDownloadBuilder",this.promise=null}asStream(){return new W1(this.downloadFn,this.shouldThrowOnError)}then(r,t){return this.getPromise().then(r,t)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}}};const e_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_y={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var t_=class{constructor(r,t={},s,l){this.shouldThrowOnError=!1,this.url=r,this.headers=t,this.bucketId=s,this.fetch=qh(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,t,s,l){var c=this;try{let u;const d=Ne(Ne({},_y),l);let f=Ne(Ne({},c.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",c.encodeMetadata(p)),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),p&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(p))):(u=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,p&&(f["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),l?.headers&&(f=Ne(Ne({},f),l.headers));const m=c._removeEmptyFolders(t),y=c._getFinalPath(m),v=await(r=="PUT"?vh:er)(c.fetch,`${c.url}/object/${y}`,u,Ne({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(c.shouldThrowOnError)throw u;if(xt(u))return{data:null,error:u};throw u}}async upload(r,t,s){return this.uploadOrUpdate("POST",r,t,s)}async uploadToSignedUrl(r,t,s,l){var c=this;const u=c._removeEmptyFolders(r),d=c._getFinalPath(u),f=new URL(c.url+`/object/upload/sign/${d}`);f.searchParams.set("token",t);try{let p;const m=Ne({upsert:_y.upsert},l),y=Ne(Ne({},c.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",m.cacheControl)):(p=s,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType),{data:{path:u,fullPath:(await vh(c.fetch,f.toString(),p,{headers:y})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(xt(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(r,t){var s=this;try{let l=s._getFinalPath(r);const c=Ne({},s.headers);t?.upsert&&(c["x-upsert"]="true");const u=await er(s.fetch,`${s.url}/object/upload/sign/${l}`,{},{headers:c}),d=new URL(s.url+u.url),f=d.searchParams.get("token");if(!f)throw new uc("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:f},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}}async update(r,t,s){return this.uploadOrUpdate("PUT",r,t,s)}async move(r,t,s){var l=this;try{return{data:await er(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:r,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:l.headers}),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}}async copy(r,t,s){var l=this;try{return{data:{path:(await er(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:r,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}}async createSignedUrl(r,t,s){var l=this;try{let c=l._getFinalPath(r),u=await er(l.fetch,`${l.url}/object/sign/${c}`,Ne({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:l.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u={signedUrl:encodeURI(`${l.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}}async createSignedUrls(r,t,s){var l=this;try{const c=await er(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:t,paths:r},{headers:l.headers}),u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(d=>Ne(Ne({},d),{},{signedUrl:d.signedURL?encodeURI(`${l.url}${d.signedURL}${u}`):null})),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}}download(r,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),c=l?`?${l}`:"",u=this._getFinalPath(r),d=()=>Ji(this.fetch,`${this.url}/${s}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new Z1(d,this.shouldThrowOnError)}async info(r){var t=this;const s=t._getFinalPath(r);try{return{data:yh(await Ji(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(l){if(t.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}}async exists(r){var t=this;const s=t._getFinalPath(r);try{return await J1(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(l){if(t.shouldThrowOnError)throw l;if(xt(l)&&l instanceof mh){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}}getPublicUrl(r,t){const s=this._getFinalPath(r),l=[],c=t?.download?`download=${t.download===!0?"":t.download}`:"";c!==""&&l.push(c);const u=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&l.push(d);let f=l.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${f}`)}}}async remove(r){var t=this;try{return{data:await $h(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async list(r,t,s){var l=this;try{const c=Ne(Ne(Ne({},e_),t),{},{prefix:r||""});return{data:await er(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},s),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}}async listV2(r,t){var s=this;try{const l=Ne({},r);return{data:await er(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,l,{headers:s.headers},t),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const t=[];return r.width&&t.push(`width=${r.width}`),r.height&&t.push(`height=${r.height}`),r.resize&&t.push(`resize=${r.resize}`),r.format&&t.push(`format=${r.format}`),r.quality&&t.push(`quality=${r.quality}`),t.join("&")}};const a0="2.89.0",i0={"X-Client-Info":`storage-js/${a0}`};var n_=class{constructor(r,t={},s,l){this.shouldThrowOnError=!1;const c=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Ne(Ne({},i0),t),this.fetch=qh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var t=this;try{const s=t.listBucketOptionsToQueryString(r);return{data:await Ji(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async getBucket(r){var t=this;try{return{data:await Ji(t.fetch,`${t.url}/bucket/${r}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async createBucket(r,t={public:!1}){var s=this;try{return{data:await er(s.fetch,`${s.url}/bucket`,{id:r,name:r,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}}async updateBucket(r,t){var s=this;try{return{data:await vh(s.fetch,`${s.url}/bucket/${r}`,{id:r,name:r,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}}async emptyBucket(r){var t=this;try{return{data:await er(t.fetch,`${t.url}/bucket/${r}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await $h(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(r){const t={};return r&&("limit"in r&&(t.limit=String(r.limit)),"offset"in r&&(t.offset=String(r.offset)),r.search&&(t.search=r.search),r.sortColumn&&(t.sortColumn=r.sortColumn),r.sortOrder&&(t.sortOrder=r.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},r_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ne(Ne({},i0),t),this.fetch=qh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var t=this;try{return{data:await er(t.fetch,`${t.url}/bucket`,{name:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async listBuckets(r){var t=this;try{const s=new URLSearchParams;r?.limit!==void 0&&s.set("limit",r.limit.toString()),r?.offset!==void 0&&s.set("offset",r.offset.toString()),r?.sortColumn&&s.set("sortColumn",r.sortColumn),r?.sortOrder&&s.set("sortOrder",r.sortOrder),r?.search&&s.set("search",r.search);const l=s.toString(),c=l?`${t.url}/bucket?${l}`:`${t.url}/bucket`;return{data:await Ji(t.fetch,c,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await $h(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}from(r){var t=this;if(!V1(r))throw new uc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new $1({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(s,{get(c,u){const d=c[u];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(c,f),error:null}}catch(p){if(l)throw p;return{data:null,error:p}}}}})}};const Hh={"X-Client-Info":`storage-js/${a0}`,"Content-Type":"application/json"};var l0=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function On(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Ld=class extends l0{constructor(r,t,s){super(r),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},s_=class extends l0{constructor(r,t){super(r),this.name="StorageVectorsUnknownError",this.originalError=t}};const Ph=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),a_=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Cy=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),i_=async(r,t,s)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!s?.noResolveJson){const l=r.status||500,c=r;if(typeof c.json=="function")c.json().then(u=>{const d=u?.statusCode||u?.code||l+"";t(new Ld(Cy(u),l,d))}).catch(()=>{const u=l+"";t(new Ld(c.statusText||`HTTP ${l} error`,l,u))});else{const u=l+"";t(new Ld(c.statusText||`HTTP ${l} error`,l,u))}}else t(new s_(Cy(r),r))},l_=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return l?(a_(l)?(c.headers=Ne({"Content-Type":"application/json"},t?.headers),c.body=JSON.stringify(l)):c.body=l,Ne(Ne({},c),s)):c};async function o_(r,t,s,l,c,u){return new Promise((d,f)=>{r(s,l_(t,l,c,u)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>i_(p,f,l))})}async function kn(r,t,s,l,c){return o_(r,"POST",t,l,c,s)}var c_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ne(Ne({},Hh),t),this.fetch=Ph(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/CreateIndex`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async getIndex(r,t){var s=this;try{return{data:await kn(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:r,indexName:t},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(On(l))return{data:null,error:l};throw l}}async listIndexes(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/ListIndexes`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async deleteIndex(r,t){var s=this;try{return{data:await kn(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:r,indexName:t},{headers:s.headers})||{},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(On(l))return{data:null,error:l};throw l}}},u_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ne(Ne({},Hh),t),this.fetch=Ph(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var t=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await kn(t.fetch,`${t.url}/PutVectors`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async getVectors(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/GetVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async listVectors(r){var t=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await kn(t.fetch,`${t.url}/ListVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async queryVectors(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/QueryVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async deleteVectors(r){var t=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await kn(t.fetch,`${t.url}/DeleteVectors`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}},d_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ne(Ne({},Hh),t),this.fetch=Ph(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async getBucket(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async listBuckets(r={}){var t=this;try{return{data:await kn(t.fetch,`${t.url}/ListVectorBuckets`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await kn(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}}},h_=class extends d_{constructor(r,t={}){super(r,t.headers||{},t.fetch)}from(r){return new f_(this.url,this.headers,r,this.fetch)}async createBucket(r){var t=()=>super.createBucket,s=this;return t().call(s,r)}async getBucket(r){var t=()=>super.getBucket,s=this;return t().call(s,r)}async listBuckets(r={}){var t=()=>super.listBuckets,s=this;return t().call(s,r)}async deleteBucket(r){var t=()=>super.deleteBucket,s=this;return t().call(s,r)}},f_=class extends c_{constructor(r,t,s,l){super(r,t,l),this.vectorBucketName=s}async createIndex(r){var t=()=>super.createIndex,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(r={}){var t=()=>super.listIndexes,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(r){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,r)}async deleteIndex(r){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,r)}index(r){return new p_(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},p_=class extends u_{constructor(r,t,s,l,c){super(r,t,c),this.vectorBucketName=s,this.indexName=l}async putVectors(r){var t=()=>super.putVectors,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(r){var t=()=>super.getVectors,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(r={}){var t=()=>super.listVectors,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(r){var t=()=>super.queryVectors,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(r){var t=()=>super.deleteVectors,s=this;return t().call(s,Ne(Ne({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},g_=class extends n_{constructor(r,t={},s,l){super(r,t,s,l)}from(r){return new t_(this.url,this.headers,r,this.fetch)}get vectors(){return new h_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new r_(this.url+"/iceberg",this.headers,this.fetch)}};const o0="2.89.0",Aa=30*1e3,xh=3,Bd=xh*Aa,m_="http://localhost:9999",y_="supabase.auth.token",v_={"X-Client-Info":`gotrue-js/${o0}`},bh="X-Supabase-Api-Version",c0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},x_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,b_=600*1e3;class Wi extends Error{constructor(t,s,l){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function _e(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class w_ extends Wi{constructor(t,s,l){super(t,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function S_(r){return _e(r)&&r.name==="AuthApiError"}class Os extends Wi{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Ur extends Wi{constructor(t,s,l,c){super(t,l,c),this.name=s,this.status=l}}class Nn extends Ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function j_(r){return _e(r)&&r.name==="AuthSessionMissingError"}class Sa extends Ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uo extends Ur{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mo extends Ur{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function __(r){return _e(r)&&r.name==="AuthImplicitGrantRedirectError"}class Ey extends Ur{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class C_ extends Ur{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wh extends Ur{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Id(r){return _e(r)&&r.name==="AuthRetryableFetchError"}class Ry extends Ur{constructor(t,s,l){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class Sh extends Ur{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ty=` 	
\r=`.split(""),E_=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<Ty.length;t+=1)r[Ty[t].charCodeAt(0)]=-2;for(let t=0;t<Jo.length;t+=1)r[Jo[t].charCodeAt(0)]=t;return r})();function Ay(r,t,s){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;s(Jo[l]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;s(Jo[l]),t.queuedBits-=6}}function u0(r,t,s){const l=E_[r];if(l>-1)for(t.queue=t.queue<<6|l,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Ny(r){const t=[],s=d=>{t.push(String.fromCodePoint(d))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=d=>{A_(d,l,s)};for(let d=0;d<r.length;d+=1)u0(r.charCodeAt(d),c,u);return t.join("")}function R_(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function T_(r,t){for(let s=0;s<r.length;s+=1){let l=r.charCodeAt(s);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(r.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}R_(l,t)}}function A_(r,t,s){if(t.utf8seq===0){if(r<=127){s(r);return}for(let l=1;l<6;l+=1)if((r>>7-l&1)===0){t.utf8seq=l;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Ua(r){const t=[],s={queue:0,queuedBits:0},l=c=>{t.push(c)};for(let c=0;c<r.length;c+=1)u0(r.charCodeAt(c),s,l);return new Uint8Array(t)}function N_(r){const t=[];return T_(r,s=>t.push(s)),new Uint8Array(t)}function ks(r){const t=[],s={queue:0,queuedBits:0},l=c=>{t.push(c)};return r.forEach(c=>Ay(c,s,l)),Ay(null,s,l),t.join("")}function O_(r){return Math.round(Date.now()/1e3)+r}function k_(){return Symbol("auth-callback")}const Jt=()=>typeof window<"u"&&typeof document<"u",Es={tested:!1,writable:!1},d0=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function D_(r){const t={},s=new URL(r);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,u)=>{t[u]=c})}catch{}return s.searchParams.forEach((l,c)=>{t[c]=l}),t}const h0=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),z_=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Na=async(r,t,s)=>{await r.setItem(t,JSON.stringify(s))},Rs=async(r,t)=>{const s=await r.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Xt=async(r,t)=>{await r.removeItem(t)};class dc{constructor(){this.promise=new dc.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}dc.promiseConstructor=Promise;function qd(r){const t=r.split(".");if(t.length!==3)throw new Sh("Invalid JWT structure");for(let l=0;l<t.length;l++)if(!x_.test(t[l]))throw new Sh("JWT not in base64url format");return{header:JSON.parse(Ny(t[0])),payload:JSON.parse(Ny(t[1])),signature:Ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function U_(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function M_(r,t){return new Promise((l,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await r(u);if(!t(u,null,d)){l(d);return}}catch(d){if(!t(u,d)){c(d);return}}})()})}function L_(r){return("0"+r.toString(16)).substr(-2)}function B_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let c="";for(let u=0;u<56;u++)c+=s.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(t),Array.from(t,L_).join("")}async function I_(r){const s=new TextEncoder().encode(r),l=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(l);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function q_(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const s=await I_(r);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ja(r,t,s=!1){const l=B_();let c=l;s&&(c+="/PASSWORD_RECOVERY"),await Na(r,`${t}-code-verifier`,c);const u=await q_(l);return[u,l===u?"plain":"s256"]}const $_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H_(r){const t=r.headers.get(bh);if(!t||!t.match($_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function P_(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function G_(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const V_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _a(r){if(!V_.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $d(){const r={};return new Proxy(r,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Y_(r,t){return new Proxy(r,{get:(s,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const u=l.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,c)}return!t.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,l,c)}})}function Oy(r){return JSON.parse(JSON.stringify(r))}const As=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),K_=[502,503,504];async function ky(r){var t;if(!z_(r))throw new wh(As(r),0);if(K_.includes(r.status))throw new wh(As(r),r.status);let s;try{s=await r.json()}catch(u){throw new Os(As(u),u)}let l;const c=H_(r);if(c&&c.getTime()>=c0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Ry(As(s),r.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(l==="session_not_found")throw new Nn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Ry(As(s),r.status,s.weak_password.reasons);throw new w_(As(s),r.status||500,l)}const F_=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return r==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),s))};async function Ae(r,t,s,l){var c;const u=Object.assign({},l?.headers);u[bh]||(u[bh]=c0["2024-01-01"].name),l?.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const d=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(d.redirect_to=l.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await Q_(r,t,s+f,{headers:u,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(p):{data:Object.assign({},p),error:null}}async function Q_(r,t,s,l,c,u){const d=F_(t,l,c,u);let f;try{f=await r(s,Object.assign({},d))}catch(p){throw console.error(p),new wh(As(p),0)}if(f.ok||await ky(f),l?.noResolveJson)return f;try{return await f.json()}catch(p){await ky(p)}}function Zn(r){var t;let s=null;W_(r)&&(s=Object.assign({},r),r.expires_at||(s.expires_at=O_(r.expires_in)));const l=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:s,user:l},error:null}}function Dy(r){const t=Zn(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(t.data.weak_password=r.weak_password),t}function os(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function X_(r){return{data:r,error:null}}function J_(r){const{action_link:t,email_otp:s,hashed_token:l,redirect_to:c,verification_type:u}=r,d=cc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:l,redirect_to:c,verification_type:u},p=Object.assign({},d);return{data:{properties:f,user:p},error:null}}function zy(r){return r}function W_(r){return r.access_token&&r.refresh_token&&r.expires_in}const Hd=["global","local","others"];class Z_{constructor({url:t="",headers:s={},fetch:l}){this.url=t,this.headers=s,this.fetch=h0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Hd[0]){if(Hd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hd.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(l){if(_e(l))return{data:null,error:l};throw l}}async inviteUserByEmail(t,s={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:os})}catch(l){if(_e(l))return{data:{user:null},error:l};throw l}}async generateLink(t){try{const{options:s}=t,l=cc(t,["options"]),c=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:J_,redirectTo:s?.redirectTo})}catch(s){if(_e(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:os})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,l,c,u,d,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:zy});if(y.error)throw y.error;const v=await y.json(),b=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(_.split(";")[1].split("=")[1]);m[`${A}Page`]=j}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(_e(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){_a(t);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:os})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){_a(t);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:os})}catch(l){if(_e(l))return{data:{user:null},error:l};throw l}}async deleteUser(t,s=!1){_a(t);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:os})}catch(l){if(_e(l))return{data:{user:null},error:l};throw l}}async _listFactors(t){_a(t.userId);try{const{data:s,error:l}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:l}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteFactor(t){_a(t.userId),_a(t.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,l,c,u,d,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:zy});if(y.error)throw y.error;const v=await y.json(),b=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(_.split(";")[1].split("=")[1]);m[`${A}Page`]=j}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(_e(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(_e(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(t){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}}function Uy(r={}){return{getItem:t=>r[t]||null,setItem:(t,s)=>{r[t]=s},removeItem:t=>{delete r[t]}}}const Ca={debug:!!(globalThis&&d0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class eC extends f0{}async function tC(r,t,s){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const l=new globalThis.AbortController;return t>0&&setTimeout(()=>{l.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,c.name);try{return await s()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,c.name)}}else{if(t===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new eC(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ca.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function nC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function p0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function rC(r){return parseInt(r,16)}function sC(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,l=>l.toString(16).padStart(2,"0")).join("")}function aC(r){var t;const{chainId:s,domain:l,expirationTime:c,issuedAt:u=new Date,nonce:d,notBefore:f,requestId:p,resources:m,scheme:y,uri:v,version:b}=r;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=p0(r.address),_=y?`${y}://${l}`:l,j=r.statement?`${r.statement}
`:"",A=`${_} wants you to sign in with your Ethereum account:
${S}

${j}`;let N=`URI: ${v}
Version: ${b}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(c&&(N+=`
Expiration Time: ${c.toISOString()}`),f&&(N+=`
Not Before: ${f.toISOString()}`),p&&(N+=`
Request ID: ${p}`),m){let C=`
Resources:`;for(const R of m){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);C+=`
- ${R}`}N+=C}return`${A}
${N}`}class Ot extends Error{constructor({message:t,code:s,cause:l,name:c}){var u;super(t,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=c??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class Wo extends Ot{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function iC({error:r,options:t}){var s,l,c;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Ot({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const d=window.location.hostname;if(g0(d)){if(u.rp.id!==d)return new Ot({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function lC({error:r,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Ot({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const l=window.location.hostname;if(g0(l)){if(s.rpId!==l)return new Ot({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class oC{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const cC=new oC;function uC(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:s,excludeCredentials:l}=r,c=cc(r,["challenge","user","excludeCredentials"]),u=Ua(t).buffer,d=Object.assign(Object.assign({},s),{id:Ua(s.id).buffer}),f=Object.assign(Object.assign({},c),{challenge:u,user:d});if(l&&l.length>0){f.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const m=l[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Ua(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function dC(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:s}=r,l=cc(r,["challenge","allowCredentials"]),c=Ua(t).buffer,u=Object.assign(Object.assign({},l),{challenge:c});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];u.allowCredentials[d]=Object.assign(Object.assign({},f),{id:Ua(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function hC(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r;return{id:r.id,rawId:r.id,response:{attestationObject:ks(new Uint8Array(r.response.attestationObject)),clientDataJSON:ks(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fC(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r,l=r.getClientExtensionResults(),c=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ks(new Uint8Array(c.authenticatorData)),clientDataJSON:ks(new Uint8Array(c.clientDataJSON)),signature:ks(new Uint8Array(c.signature)),userHandle:c.userHandle?ks(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function g0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function My(){var r,t;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pC(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:iC({error:t,options:r})}}}async function gC(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:lC({error:t,options:r})}}}const mC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},yC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zo(...r){const t=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of r)if(c)for(const u in c){const d=c[u];if(d!==void 0)if(Array.isArray(d))l[u]=d;else if(s(d))l[u]=d;else if(t(d)){const f=l[u];t(f)?l[u]=Zo(f,d):l[u]=Zo(d)}else l[u]=d}return l}function vC(r,t){return Zo(mC,r,t||{})}function xC(r,t){return Zo(yC,r,t||{})}class bC{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:l,signal:c},u){try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!d)return{data:null,error:f};const p=c??cC.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:m}=d.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${l}`),m.displayName||(m.displayName=m.name)}switch(d.webauthn.type){case"create":{const m=vC(d.webauthn.credential_options.publicKey,u?.create),{data:y,error:v}=await pC({publicKey:m,signal:p});return y?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const m=xC(d.webauthn.credential_options.publicKey,u?.request),{data:y,error:v}=await gC(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:m,signal:p}));return y?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(d){return _e(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:l})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Wi("rpId is required for WebAuthn authentication")};try{if(!My())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:l},signal:c},{request:u});if(!d)return{data:null,error:f};const{webauthn:p}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:l,credential_response:p.credential_response}})}catch(d){return _e(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Wi("rpId is required for WebAuthn registration")};try{if(!My())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:c},{create:u});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(d){return _e(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in register",d)}}}}nC();const wC={url:m_,storageKey:y_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:v_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ly(r,t,s){return await s()}const Ea={};class Zi{get jwks(){var t,s;return(s=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:t})}constructor(t){var s,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},wC),t);if(this.storageKey=u.storageKey,this.instanceID=(s=Zi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Zi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Jt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Z_({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=h0(u.fetch),this.lock=u.lock||Ly,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Jt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=tC:this.lock=Ly,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:d0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uy(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Uy(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${o0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},l="none";if(Jt()&&(s=D_(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),Jt()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:u}=await this._getSessionFromURL(s,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),__(u)){const p=(t=u.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:f}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return _e(s)?this._returnResult({error:s}):this._returnResult({error:new Os("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,l,c;try{const u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=t?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Zn}),{data:d,error:f}=u;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(_e(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var s,l,c;try{let u;if("email"in t){const{email:y,password:v,options:b}=t;let S=null,_=null;this.flowType==="pkce"&&([S,_]=await ja(this.storage,this.storageKey)),u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:y,password:v,data:(s=b?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:_},xform:Zn})}else if("phone"in t){const{phone:y,password:v,options:b}=t;u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(l=b?.data)!==null&&l!==void 0?l:{},channel:(c=b?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Zn})}else throw new Uo("You must provide either an email or phone number and a password");const{data:d,error:f}=u;if(f||!d)return await Xt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let s;if("email"in t){const{email:u,password:d,options:f}=t;s=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Dy})}else if("phone"in t){const{phone:u,password:d,options:f}=t;s=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Dy})}else throw new Uo("You must provide either an email or phone number and a password");const{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Sa;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(s){if(_e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,l,c,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,l,c,u,d,f,p,m,y,v,b;let S,_;if("message"in t)S=t.message,_=t.signature;else{const{chain:j,wallet:A,statement:N,options:C}=t;let R;if(Jt())if(typeof A=="object")R=A;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")R=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=A}const D=new URL((s=C?.url)!==null&&s!==void 0?s:window.location.href),U=await R.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=p0(U[0]);let L=(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!L){const q=await R.request({method:"eth_chainId"});L=rC(q)}const G={domain:D.host,address:T,statement:N,uri:D.href,version:"1",chainId:L,nonce:(c=C?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(d=(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=C?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=C?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=aC(G),_=await R.request({method:"personal_sign",params:[sC(S),T]})}try{const{data:j,error:A}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:_},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Zn});if(A)throw A;if(!j||!j.session||!j.user){const N=new Sa;return this._returnResult({data:{user:null,session:null},error:N})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:A})}catch(j){if(_e(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(t){var s,l,c,u,d,f,p,m,y,v,b,S;let _,j;if("message"in t)_=t.message,j=t.signature;else{const{chain:A,wallet:N,statement:C,options:R}=t;let D;if(Jt())if(typeof N=="object")D=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))D=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=N}const U=new URL((s=R?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in D&&D.signIn){const T=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),C?{statement:C}:null));let L;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")L=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)L=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),j=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${U.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(c=(l=R?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((v=(y=R?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...R.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const T=await D.signMessage(new TextEncoder().encode(_),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=T}}try{const{data:A,error:N}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ks(j)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Zn});if(N)throw N;if(!A||!A.session||!A.user){const C=new Sa;return this._returnResult({data:{user:null,session:null},error:C})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:N})}catch(A){if(_e(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const s=await Rs(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(s??"").split("/");try{if(!l&&this.flowType==="pkce")throw new C_;const{data:u,error:d}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:l},xform:Zn});if(await Xt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const f=new Sa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:d})}catch(u){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Zn}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const y=new Sa;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(s){if(_e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,l,c,u,d;try{if("email"in t){const{email:f,options:p}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await ja(this.storage,this.storageKey));const{error:v}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:f,options:p}=t,{data:m,error:y}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:y})}throw new Uo("You must provide either an email or phone number.")}catch(f){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var s,l;try{let c,u;"options"in t&&(c=(s=t.options)===null||s===void 0?void 0:s.redirectTo,u=(l=t.options)===null||l===void 0?void 0:l.captchaToken);const{data:d,error:f}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:Zn});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,m=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(_e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(t){var s,l,c,u,d;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await ja(this.storage,this.storageKey));const m=await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(l=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=t?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:X_});return!((u=m.data)===null||u===void 0)&&u.url&&Jt()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:l}=t;if(l)throw l;if(!s)throw new Nn;const{error:c}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(t){if(_e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:l,type:c,options:u}=t,{error:d}=await Ae(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:l,type:c,options:u}=t,{data:d,error:f}=await Ae(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new Uo("You must provide either an email or phone number and a type")}catch(s){if(_e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const l=t.expires_at?t.expires_at*1e3-Date.now()<Bd:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",t.expires_at),!l){if(this.userStorage){const d=await Rs(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=$d()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=Y_(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:os}):await this._useSession(async s=>{var l,c,u;const{data:d,error:f}=s;if(f)throw f;return!(!((l=d.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nn}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:os})})}catch(s){if(_e(s))return j_(s)&&(await this._removeSession(),await Xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async l=>{const{data:c,error:u}=l;if(u)throw u;if(!c.session)throw new Nn;const d=c.session;let f=null,p=null;this.flowType==="pkce"&&t.email!=null&&([f,p]=await ja(this.storage,this.storageKey));const{data:m,error:y}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:p}),jwt:d.access_token,xform:os});if(y)throw y;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(l){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Nn;const s=Date.now()/1e3;let l=s,c=!0,u=null;const{payload:d}=qd(t.access_token);if(d.exp&&(l=d.exp,c=l<=s),c){const{data:f,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:p}=await this._getUser(t.access_token);if(p)throw p;u={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(_e(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var l;if(!t){const{data:d,error:f}=s;if(f)throw f;t=(l=d.session)!==null&&l!==void 0?l:void 0}if(!t?.refresh_token)throw new Nn;const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(_e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!Jt())throw new Mo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ey("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ey("No code detected.");const{data:C,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:u,refresh_token:d,expires_in:f,expires_at:p,token_type:m}=t;if(!u||!f||!d||!m)throw new Mo("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(f);let b=y+v;p&&(b=parseInt(p));const S=b-y;S*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const _=b-v;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,b,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,b,y);const{data:j,error:A}=await this._getUser(u);if(A)throw A;const N={provider_token:l,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:b,refresh_token:d,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(l){if(_e(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Rs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({error:u});const d=(l=c.session)===null||l===void 0?void 0:l.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(S_(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await Xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=k_(),l={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(t){return await this._useSession(async s=>{var l,c;try{const{data:{session:u},error:d}=s;if(d)throw d;await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,s={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ja(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:l,error:c}=await this._useSession(async u=>{var d,f,p,m,y;const{data:v,error:b}=u;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(c)throw c;return Jt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:t.provider,url:l?.url},error:null})}catch(l){if(_e(l))return this._returnResult({data:{provider:t.provider,url:null},error:l});throw l}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var l;try{const{error:c,data:{session:u}}=s;if(c)throw c;const{options:d,provider:f,token:p,access_token:m,nonce:y}=t,v=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:f,id_token:p,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Zn}),{data:b,error:S}=v;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Sa}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(c){if(await Xt(this.storage,`${this.storageKey}-code-verifier`),_e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var l,c;const{data:u,error:d}=s;if(d)throw d;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await M_(async c=>(c>0&&await U_(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zn})),(c,u)=>{const d=200*Math.pow(2,c);return u&&Id(u)&&Date.now()+d-l<Aa})}catch(l){if(this._debug(s,"error",l),_e(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",l),Jt()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:t,url:l},error:null}}async _recoverAndRefresh(){var t,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await Rs(this.storage,this.storageKey);if(c&&this.userStorage){let d=await Rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:c.user},await Na(this.userStorage,this.storageKey+"-user",d)),c.user=(t=d?.user)!==null&&t!==void 0?t:$d()}else if(c&&!c.user&&!c.user){const d=await Rs(this.storage,this.storageKey+"-user");d&&d?.user?(c.user=d.user,await Xt(this.storage,this.storageKey+"-user"),await Na(this.storage,this.storageKey,c)):c.user=$d()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const u=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Bd;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Bd}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:d}=await this._callRefreshToken(c.refresh_token);d&&(console.error(d),Id(d)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(c.access_token);!f&&d?.user?(c.user=d.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(l,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(t){var s,l;if(!t)throw new Nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new dc;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new Nn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={data:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(c,"error",u),_e(u)){const d={data:null,error:u};return Id(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(t,s,l=!0){const c=`#_notifyAllSubscribers(${t})`;this._debug(c,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:t,session:s});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Xt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await Na(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const u=Oy(c);await Na(this.storage,this.storageKey,u)}else{const c=Oy(s);await Na(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Xt(this.storage,this.storageKey),await Xt(this.storage,this.storageKey+"-code-verifier"),await Xt(this.storage,this.storageKey+"-user"),this.userStorage&&await Xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Jt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-t)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Aa}ms, refresh threshold is ${xh} ticks`),c<=xh&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof f0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,l){const c=[`provider=${encodeURIComponent(s)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,d]=await ja(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(f.toString())}if(l?.queryParams){const u=new URLSearchParams(l.queryParams);c.push(u.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${t}?${c.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;return u?this._returnResult({data:null,error:u}):await Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var l,c;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:m}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?hC(t.webauthn.credential_response):fC(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:p}=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:uC(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:dC(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:l}=await this._challenge({factorId:t.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=s?.factors)!==null&&t!==void 0?t:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=qd(l.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((s=(t=l.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const m=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;return c?this._returnResult({data:null,error:c}):l?await Ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Nn});const d=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Jt()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(l){if(_e(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(t,s){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Nn});const d=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Jt()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(l){if(_e(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:l}=t;return l?this._returnResult({data:null,error:l}):s?await Ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;return c?this._returnResult({data:null,error:c}):l?(await Ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nn})})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let l=s.keys.find(f=>f.kid===t);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(f=>f.kid===t),l&&this.jwks_cached_at+b_>c)return l;const{data:u,error:d}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,l=u.keys.find(f=>f.kid===t),!l)?null:l}async getClaims(t,s={}){try{let l=t;if(!l){const{data:S,error:_}=await this.getSession();if(_||!S.session)return this._returnResult({data:null,error:_});l=S.session.access_token}const{header:c,payload:u,signature:d,raw:{header:f,payload:p}}=qd(l);s?.allowExpired||P_(u.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!m){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:u,header:c,signature:d},error:null}}const y=G_(c.alg),v=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,d,N_(`${f}.${p}`)))throw new Sh("Invalid JWT signature");return{data:{claims:u,header:c,signature:d},error:null}}catch(l){if(_e(l))return this._returnResult({data:null,error:l});throw l}}}Zi.nextInstanceID={};const SC=Zi,jC="2.89.0";let Li="";typeof Deno<"u"?Li="deno":typeof document<"u"?Li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Li="react-native":Li="node";const _C={"X-Client-Info":`supabase-js-${Li}/${jC}`},CC={headers:_C},EC={schema:"public"},RC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TC={};function el(r){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(r)}function AC(r,t){if(el(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var l=s.call(r,t);if(el(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function NC(r){var t=AC(r,"string");return el(t)=="symbol"?t:t+""}function OC(r,t,s){return(t=NC(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function By(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,l)}return s}function jt(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?By(Object(s),!0).forEach(function(l){OC(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):By(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}const kC=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),DC=()=>Headers,zC=(r,t,s)=>{const l=kC(s),c=DC();return async(u,d)=>{var f;const p=(f=await t())!==null&&f!==void 0?f:r;let m=new c(d?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),l(u,jt(jt({},d),{},{headers:m}))}};function UC(r){return r.endsWith("/")?r:r+"/"}function MC(r,t){var s,l;const{db:c,auth:u,realtime:d,global:f}=r,{db:p,auth:m,realtime:y,global:v}=t,b={db:jt(jt({},p),c),auth:jt(jt({},m),u),realtime:jt(jt({},y),d),storage:{},global:jt(jt(jt({},v),f),{},{headers:jt(jt({},(s=v?.headers)!==null&&s!==void 0?s:{}),(l=f?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function LC(r){const t=r?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(UC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var BC=class extends SC{constructor(r){super(r)}},IC=class{constructor(r,t,s){var l,c;this.supabaseUrl=r,this.supabaseKey=t;const u=LC(r);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:EC,realtime:TC,auth:jt(jt({},RC),{},{storageKey:d}),global:CC},p=MC(s??{},f);if(this.storageKey=(l=p.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=zC(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(jt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new v1(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new g_(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new f1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,t,s)}channel(r,t={config:{}}){return this.realtime.channel(r,t)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,t,s;if(r.accessToken)return await r.accessToken();const{data:l}=await r.auth.getSession();return(t=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:t,detectSessionInUrl:s,storage:l,userStorage:c,storageKey:u,flowType:d,lock:f,debug:p,throwOnError:m},y,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BC({url:this.authUrl.href,headers:jt(jt({},b),y),storageKey:u,autoRefreshToken:r,persistSession:t,detectSessionInUrl:s,storage:l,userStorage:c,flowType:d,lock:f,debug:p,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new U1(this.realtimeUrl.href,jt(jt({},r),{},{params:jt(jt({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t?.access_token)})}_handleTokenChanged(r,t,s){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qC=(r,t,s)=>new IC(r,t,s);function $C(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}$C()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pd={BASE_URL:"/app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Gd={};const m0=r=>typeof import.meta<"u"&&Pd&&Pd[r]?Pd[r]:typeof process<"u"&&process&&Gd&&Gd[r]?Gd[r]:null,HC=m0("VITE_SUPABASE_URL")||"https://hocbnifuactbvmyjraxy.supabase.co",PC=m0("VITE_SUPABASE_ANON_KEY")||"sb_publishable_CmEv4H4dXwtqm65i_jpsCQ_8BtDOucx",ye=qC(HC,PC),GC={async translateRecipe(r,t="EN-US"){const s=[];s.push(r.title||""),s.push(r.description||"");let l=2,c=2;if(r.type==="bread"){const d=r.flours||[],f=r.breadIngredients||[];d.forEach(p=>s.push(p.name||"")),f.forEach(p=>s.push(p.name||"")),c=l+d.length+f.length}else{const d=r.ingredients||[];d.forEach(f=>{const p=typeof f=="string"?f:f.name||"";s.push(p)}),c=l+d.length}const u=r.steps||[];if(u.forEach(d=>{const f=typeof d=="object"&&d!==null?d.text||"":d||"";s.push(f)}),s.length===0)return r;try{const d=await this.translateList(s,t),f={...r};if(f.title=d[0],f.description=d[1],r.type==="bread"){const p=(r.flours||[]).length,m=(r.breadIngredients||[]).length;f.flours=(r.flours||[]).map((y,v)=>({...y,name:d[l+v]})),f.breadIngredients=(r.breadIngredients||[]).map((y,v)=>({...y,name:d[l+p+v]}))}else f.ingredients=(r.ingredients||[]).map((p,m)=>{const y=d[l+m];return typeof p=="string"?y:{...p,name:y}});return f.steps=u.map((p,m)=>{const y=d[c+m];return typeof p=="object"&&p!==null?{...p,text:y}:y}),f}catch(d){throw console.error("Translation failed:",d),d}},async translateList(r,t){const{data:s,error:l}=await ye.functions.invoke("translate",{body:{text:r,target_lang:t}});if(l)throw console.error("Supabase Function Invocation Error:",l),new Error(`Translation Error: ${l.message}`);if(s&&s.error)throw console.error("Edge Function returned error:",s.error),new Error(`Translation Error: ${s.error}`);return s.translations.map(c=>c.text)}},zt={async fetchRecipes(r){let t=[];try{const{data:d,error:f}=await ye.from("recipes").select("*, recipe_sources(url)").order("order_index",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});if(f)throw f;t=d.map(Ar)}catch(d){console.warn("Supabase fetch failed, falling back to LocalStorage:",d);try{const f=localStorage.getItem("local_recipes");f&&(t=JSON.parse(f).map(p=>typeof Ar=="function"?Ar(p):p))}catch(f){console.error("LocalStorage read error:",f),t=[]}}if(!r)return console.warn("fetchRecipes: No currentUser, returning empty list."),[];console.log("fetchRecipes: Filtering for user:",r);let s=!1;const l=`user_prefs_${r.id}`;try{const d=JSON.parse(localStorage.getItem(l)||"{}");d.show_master_recipes!==void 0&&(s=d.show_master_recipes===!0,console.log("Using LocalStorage preference:",s))}catch(d){console.warn("Local preference read error",d)}try{const{data:d}=await ye.from("profiles").select("show_master_recipes").eq("id",r.id).single();d&&d.show_master_recipes!==null&&(s=d.show_master_recipes===!0)}catch(d){console.warn("Failed to fetch user preference from DB",d)}const c=r.role==="admin",u=[String(r.id)];return r.displayId&&u.push(String(r.displayId)),t.filter(d=>{if(c)return!0;const f=d.tags||[],p=f.find(b=>b&&b.startsWith("owner:"));if(console.log(`Recipe ${d.title} tags:`,f,"OwnerTag:",p),!p)return f.includes("public")?!0:s?(console.log("Visible (Master/Implicit)"),!0):!1;const m=!!p&&u.some(b=>p===`owner:${b}`),y=f.includes("public"),v=p==="owner:yoshito";return!!(m||y||v&&s)})},_filterRecipesInApp(r,t){return this.fetchRecipes(t)},async uploadImage(r){const t=r.name.split(".").pop(),l=`${`${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`}`,{error:c}=await ye.storage.from("recipe-images").upload(l,r);if(c)throw c;const{data:u}=ye.storage.from("recipe-images").getPublicUrl(l);return u.publicUrl},async createRecipe(r,t){console.log("createRecipe called with user:",t);const{id:s,created_at:l,sourceUrl:c,...u}=r;if(u.image instanceof File&&(u.image=await this.uploadImage(u.image)),t){const p=(u.tags||[]).filter(m=>!m.startsWith("owner:"));u.tags=[...p,`owner:${t.id}`],console.log("Added owner tag. New tags:",u.tags)}else console.warn("createRecipe: No currentUser provided! Recipe will be public.");const d=Lo(u);try{const{data:f,error:p}=await ye.from("recipes").insert([d]).select().single();if(p)throw p;if(c){const{error:m}=await ye.from("recipe_sources").insert([{recipe_id:f.id,url:c}]);m&&console.error("Failed to save source URL:",m)}return Ar({...f,recipe_sources:c?[{url:c}]:[]})}catch(f){console.warn("Supabase create failed, using LocalStorage fallback:",f);const p=Date.now(),m={...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),tags:u.tags||[]},y=Lo(m);y.id=p,y.created_at=m.created_at,console.log("Saving to LocalStorage:",y);try{const v=localStorage.getItem("local_recipes"),b=v?JSON.parse(v):[];b.push(y),localStorage.setItem("local_recipes",JSON.stringify(b)),console.log("Saved to LocalStorage success. Total recipes:",b.length)}catch(v){throw console.error("Failed to save to LocalStorage:",v),f}return Ar(y)}},async updateRecipe(r){const{id:t,created_at:s,sourceUrl:l,...c}=r;c.image instanceof File&&(c.image=await this.uploadImage(c.image));const u=Lo(c);try{const{data:d,error:f}=await ye.from("recipes").update(u).eq("id",r.id).select().single();if(f)throw f;if(l!==void 0&&(await ye.from("recipe_sources").delete().eq("recipe_id",r.id),l)){const{error:p}=await ye.from("recipe_sources").insert([{recipe_id:r.id,url:l}]);p&&console.error("Failed to update source URL:",p)}return Ar({...d,recipe_sources:l?[{url:l}]:[]})}catch(d){console.warn("Supabase update failed, using LocalStorage fallback:",d);const f=localStorage.getItem("local_recipes");if(f){let p=JSON.parse(f);const m=p.findIndex(y=>y.id==r.id);if(m!==-1){const y={...p[m],...u,updated_at:new Date().toISOString()};return p[m]=y,localStorage.setItem("local_recipes",JSON.stringify(p)),Ar(y)}}throw d}},async duplicateRecipe(r,t){const{id:s,created_at:l,updated_at:c,image:u,...d}=r;d.title=`${d.title} ()`;let f=null;if(u)try{const p=u.split("/").pop(),m=`copy-${Date.now()}-${p}`,{error:y}=await ye.storage.from("recipe-images").copy(p,m);if(y)console.warn("Image copy failed, using original URL:",y),f=u;else{const{data:v}=ye.storage.from("recipe-images").getPublicUrl(m);f=v.publicUrl}}catch(p){console.warn("Image copy logic error:",p),f=u}return d.image=f,await this.createRecipe(d,t)},async fetchDeletedRecipes(){const{data:r,error:t}=await ye.from("deleted_recipes").select("*").order("deleted_at",{ascending:!1});if(t)throw t;return r.map(VC)},async getDeletedCount(){const{count:r,error:t}=await ye.from("deleted_recipes").select("*",{count:"exact",head:!0});if(t)throw t;return r},async deleteRecipe(r){try{const{data:t,error:s}=await ye.from("recipes").select("*").eq("id",r).single();if(s)throw s;const{error:l}=await ye.from("deleted_recipes").insert([{original_id:t.id,title:t.title,description:t.description,image:t.image,prep_time:t.prep_time,cook_time:t.cook_time,servings:t.servings,tags:t.tags,ingredients:t.ingredients,steps:t.steps,created_at:t.created_at}]);if(l)throw l;const{error:c}=await ye.from("recipes").delete().eq("id",r);if(c)throw c;return!0}catch(t){console.warn("Supabase delete failed, using LocalStorage fallback:",t);const s=localStorage.getItem("local_recipes");if(s){let l=JSON.parse(s);const c=l.length;if(l=l.filter(u=>u.id!=r),l.length<c)return localStorage.setItem("local_recipes",JSON.stringify(l)),!0}throw t}},async restoreRecipe(r){const{data:t,error:s}=await ye.from("deleted_recipes").select("*").eq("id",r).single();if(s)throw s;const{error:l}=await ye.from("recipes").insert([{title:t.title,description:t.description,image:t.image,prep_time:t.prep_time,cook_time:t.cook_time,servings:t.servings,tags:t.tags,ingredients:t.ingredients,steps:t.steps,created_at:t.created_at}]);if(l)throw l;const{error:c}=await ye.from("deleted_recipes").delete().eq("id",r);if(c)throw c;return!0},async hardDeleteRecipe(r){const{error:t}=await ye.from("deleted_recipes").delete().eq("id",r);if(t)throw t;return!0},async fetchRecentRecipes(){const{data:r,error:t}=await ye.from("recent_views").select("recipe_id").order("viewed_at",{ascending:!1}).limit(20);if(t)throw t;return r.map(s=>s.recipe_id)},async addToHistory(r){const{error:t}=await ye.from("recent_views").upsert({recipe_id:r,viewed_at:new Date().toISOString()},{onConflict:"recipe_id"});if(t)throw t;return!0},async updateOrder(r){const t=r.map(s=>ye.from("recipes").update({order_index:s.order_index}).eq("id",s.id));await Promise.all(t)},async exportAllRecipes(){return await this.fetchRecipes()},async importRecipes(r){if(!Array.isArray(r))throw new Error("Invalid backup format");let t=0,s=[];for(const l of r)try{await this.createRecipe(l),t++}catch(c){console.error("Import failed for recipe:",l.title,c),s.push({title:l.title,error:c.message})}return{success:!0,count:t,errors:s}},async updateRecipeCosts(r){const{data:t,error:s}=await ye.from("recipes").select("*");if(s)throw s;let l=0;const c=[];for(const u of t){const d=Ar(u);let f=!1;const p=m=>m.map(y=>{if(!y.name)return y;const v=r.get(y.name);if(v&&y.purchaseCost!==v.price){f=!0;const b={...y,purchaseCost:v.price};if(d.type==="bread"){const S=parseFloat(b.quantity)||0;b.cost=Math.round(S/1e3*b.purchaseCost)}else if(y.cost&&y.purchaseCost){const S=y.cost/y.purchaseCost;b.cost=Math.round(b.purchaseCost*S)}return b}return y});if(d.type==="bread"){const m=p(d.flours||[]),y=p(d.breadIngredients||[]);f&&(d.flours=m,d.breadIngredients=y)}else{const m=p(d.ingredients||[]);f&&(d.ingredients=m)}if(f){const m=Lo(d);c.push(ye.from("recipes").update(m).eq("id",d.id)),l++}}return c.length>0&&await Promise.all(c),l}},Lo=r=>{let t=r.ingredients||[];const s={_meta:!0,type:r.type||"normal"};if(r.ingredientGroups&&r.ingredientGroups.length>0&&(s.groups=r.ingredientGroups),r.stepGroups&&r.stepGroups.length>0){const c=r.steps||[],u=r.stepGroups.map(d=>({...d,count:c.filter(f=>f.groupId===d.id).length}));s.stepGroups=u}if(r.type==="bread"){const c=(r.flours||[]).map(d=>({...d,_group:"flour"})),u=(r.breadIngredients||[]).map(d=>({...d,_group:"other"}));t=[s,...c,...u]}else t=[s,...t];const l=(r.steps||[]).map(c=>typeof c=="string"?c:c.text);return{title:r.title,description:r.description,image:r.image,servings:r.servings,course:r.course,category:r.category,store_name:r.storeName,ingredients:t,steps:l,tags:r.tags||[]}},Ar=r=>{const t=r.ingredients||[];let s="normal",l=[],c=[],u=[],d=[],f=t;if(Array.isArray(t)&&t.length>0&&t[0]._meta){const m=t[0];s=m.type||"normal",m.groups&&(u=m.groups),m.stepGroups&&(d=m.stepGroups);const y=t.slice(1);s==="bread"?(l=y.filter(v=>v._group==="flour").map(({_group:v,...b})=>b),c=y.filter(v=>v._group==="other").map(({_group:v,...b})=>b),f=[...l,...c]):f=y}let p=r.steps||[];if(d.length>0&&Array.isArray(p)){let m=0;p=p.map(v=>({text:v}));const y=[];for(d.forEach(v=>{const b=v.count||0;for(let S=0;S<b;S++)m<p.length&&(y.push({...p[m],text:p[m].text,groupId:v.id}),m++)});m<p.length;)y.push({...p[m],groupId:"default"}),m++;p=y}return{...r,prepTime:r.prep_time,cookTime:r.cook_time,storeName:r.store_name,type:s,flours:l,breadIngredients:c,ingredientGroups:u,stepGroups:d,ingredients:f,steps:p.length>0&&typeof p[0]=="object"?p:r.steps,sourceUrl:r.recipe_sources&&r.recipe_sources.length>0?r.recipe_sources[0].url:""}},VC=r=>({...Ar(r),deletedAt:r.deleted_at,originalId:r.original_id}),Vd=Object.freeze(Object.defineProperty({__proto__:null,recipeService:zt},Symbol.toStringTag,{value:"Module"})),y0=w.createContext(null),Di=async(r,t,s)=>{let l=null;try{const c=new Promise((u,d)=>{l=setTimeout(()=>d(new Error(`${s||"operation"} timed out after ${t}ms`)),t)});return await Promise.race([r,c])}finally{l&&clearTimeout(l)}},Iy=r=>{if(!r)return"";const t=r.indexOf("@");return t>0?r.slice(0,t):r},YC=({children:r})=>{const[t,s]=w.useState(null),[l,c]=w.useState(!0),[u,d]=w.useState(!1),f=w.useCallback(async j=>{if(!j){s(null);return}const A=j.id,N=j.email||"";let C=null;try{let T=null,L=null;const G=await Di(ye.from("profiles").select("id, display_id, role, show_master_recipes, email").eq("id",A).single(),8e3,"profiles.select(with_email)");if(T=G?.data??null,L=G?.error??null,L&&String(L.message||"").toLowerCase().includes("email")){const q=await Di(ye.from("profiles").select("id, display_id, role, show_master_recipes").eq("id",A).single(),8e3,"profiles.select");T=q?.data??null,L=q?.error??null}if(L)if(L.code==="PGRST116"){const q=j.user_metadata&&j.user_metadata.display_id?String(j.user_metadata.display_id):Iy(N)||A.slice(0,8);let V=null,z=null;const O=await Di(ye.from("profiles").insert([{id:A,display_id:q,email:N||null,role:"user",show_master_recipes:!1}]).select("id, display_id, role, show_master_recipes, email").single(),8e3,"profiles.insert(with_email)");if(V=O?.data??null,z=O?.error??null,z&&String(z.message||"").toLowerCase().includes("email")){const F=await Di(ye.from("profiles").insert([{id:A,display_id:q,role:"user",show_master_recipes:!1}]).select("id, display_id, role, show_master_recipes").single(),8e3,"profiles.insert");V=F?.data??null,z=F?.error??null}if(z)throw z;C=V}else throw L;else C=T;if(C&&Object.prototype.hasOwnProperty.call(C,"email")&&N&&!C.email)try{await ye.from("profiles").update({email:N}).eq("id",A)}catch(q){console.warn("Failed to backfill profile email",q)}}catch(T){console.error("Failed to load/create profile:",T)}const R=C?.display_id||Iy(N)||A.slice(0,8),D=C?.role||"user",U=C?.show_master_recipes===!0;s({id:A,email:N,displayId:R,role:D,showMasterRecipes:U})},[]);w.useEffect(()=>{let j=null;return(async()=>{try{const{data:C}=await Di(ye.auth.getSession(),8e3,"auth.getSession");await f(C?.session?.user||null)}catch(C){console.error("Auth init failed:",C)}finally{c(!1)}const{data:N}=ye.auth.onAuthStateChange(async(C,R)=>{C==="PASSWORD_RECOVERY"&&d(!0);try{await f(R?.user||null)}catch(D){console.error("Auth state change handler failed:",D)}});j=N?.subscription})(),()=>{try{j?.unsubscribe?.()}catch{}}},[f]);const p=w.useCallback(async(j,A)=>{const{error:N}=await ye.auth.signInWithPassword({email:j,password:A});if(N)throw console.error("Login error:",N),new Error("")},[]),m=w.useCallback(async(j,A,N)=>{const{data:C,error:R}=await ye.auth.signUp({email:j,password:A,options:{data:{display_id:N}}});if(R)throw console.error("SignUp error:",R),new Error(R.message||"");const D=C?.user;if(D?.id){let U=null;U=(await ye.from("profiles").insert([{id:D.id,display_id:N,email:j||null,role:"user",show_master_recipes:!1}]))?.error??null,U&&String(U.message||"").toLowerCase().includes("email")&&(U=(await ye.from("profiles").insert([{id:D.id,display_id:N,role:"user",show_master_recipes:!1}]))?.error??null),U&&U.code!=="23505"&&console.error("Profile create error:",U)}return{needsEmailConfirmation:!C?.session}},[]),y=w.useCallback(async()=>{await ye.auth.signOut(),s(null),d(!1)},[]),v=w.useCallback(async j=>{const{error:A}=await ye.auth.resetPasswordForEmail(j,{redirectTo:window.location.origin});if(A)throw console.error("Password reset email error:",A),new Error("");return!0},[]),b=w.useCallback(async j=>{const{error:A}=await ye.auth.updateUser({password:j});if(A)throw console.error("Update password error:",A),new Error("");return!0},[]),S=w.useCallback(()=>{d(!1);try{window.location.hash&&history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[]),_=w.useMemo(()=>({user:t,loading:l,login:p,register:m,logout:y,sendPasswordResetEmail:v,isPasswordRecovery:u,updatePassword:b,finishPasswordRecovery:S}),[t,l,p,m,y,v,u,b,S]);return i.jsx(y0.Provider,{value:_,children:r})},Ms=()=>w.useContext(y0),jh=["","MARUGO-D","MARUGO-OTTO","MARUGO-S","","","MARUGO","MARUGO2","MARUGO GRANDE","MARUGO MARUNOUCHI","","MARUGO YOTSUYA","371BAR","","BAR PELOTA","Claudia2","BISTRO CAVACAVA","eric'S","MITAN","","SOBA-JU","Bar Violet","X&C"," "],KC=[{code:"EN-US",label:" English",name:"English"},{code:"JA",label:" Japanese",name:"Japanese"},{code:"FR",label:" French",name:"French"},{code:"IT",label:" Italian",name:"Italian"},{code:"ES",label:" Spanish",name:"Spanish"},{code:"ZH",label:" Chinese",name:"Chinese"}],FC=({recipe:r,steps:t,onClose:s})=>{const[l,c]=w.useState(0),[u,d]=w.useState(0),[f,p]=w.useState(!1),m=w.useRef(null),y=t||r.steps||[],v=y[l];w.useEffect(()=>{const R=async()=>{try{"wakeLock"in navigator&&(m.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock is active"))}catch(U){console.error(`${U.name}, ${U.message}`)}};R();const D=async()=>{m.current!==null&&document.visibilityState==="visible"&&await R()};return document.addEventListener("visibilitychange",D),()=>{document.removeEventListener("visibilitychange",D),m.current&&(m.current.release(),m.current=null)}},[]),w.useEffect(()=>{let R=null;return f&&u>0?R=setInterval(()=>{d(D=>D-1)},1e3):u===0&&f&&(p(!1),new Audio("/timer_end.mp3")),()=>clearInterval(R)},[f,u]);const b=R=>{const D=Math.floor(R/60),U=R%60;return`${D}:${U.toString().padStart(2,"0")}`},S=R=>{d(D=>D+R)},[_,j]=w.useState(!1),A=()=>{l<y.length-1?c(l+1):j(!0)},N=()=>{l>0&&c(l-1)};w.useEffect(()=>{typeof v=="string"||v?.text||v?.content},[v]);const C=()=>{j(!1),s()};return i.jsxs("div",{className:"cooking-mode-overlay",children:[_&&i.jsx("div",{className:"cooking-modal-overlay",children:i.jsxs("div",{className:"cooking-modal",children:[i.jsx("h3",{children:""}),i.jsx("p",{children:""}),i.jsxs("div",{className:"cooking-modal-actions",children:[i.jsx(se,{variant:"secondary",onClick:()=>j(!1),children:""}),i.jsx(se,{variant:"primary",onClick:C,children:""})]})]})}),i.jsxs("div",{className:"cooking-header",children:[i.jsx(se,{variant:"ghost",onClick:s,style:{color:"white"},children:" "}),i.jsxs("div",{className:"cooking-progress",children:["Step ",l+1," / ",y.length]}),i.jsx("div",{className:"cooking-timer-mini"})]}),i.jsxs("div",{className:"cooking-content",children:[i.jsxs("div",{className:"step-card",children:[i.jsxs("h2",{className:"step-number",children:["Step ",l+1]}),i.jsx("p",{className:"step-text",children:typeof v=="string"?v:v?.text||v?.content||""})]}),i.jsxs("div",{className:"timer-controls",children:[i.jsx("div",{className:"timer-displaybox",children:i.jsx("span",{className:`timer-value ${u===0&&f?"blink":""}`,children:b(u)})}),i.jsxs("div",{className:"timer-buttons",children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>S(60),children:"+1"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>S(10),children:"+10"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>d(0),children:""}),i.jsx(se,{variant:f?"warning":"primary",onClick:()=>p(!f),children:f?"":""})]})]})]}),i.jsxs("div",{className:"cooking-navigation",children:[i.jsx(se,{variant:"secondary",onClick:N,disabled:l===0,className:"nav-btn",children:" "}),i.jsx(se,{variant:"primary",onClick:A,className:"nav-btn main-nav",children:l===y.length-1?"":" "})]})]})};var Ra={},Yd={exports:{}},Kd,qy;function QC(){if(qy)return Kd;qy=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Kd=r,Kd}var Fd,$y;function XC(){if($y)return Fd;$y=1;var r=QC();function t(){}function s(){}return s.resetWarningCache=t,Fd=function(){function l(d,f,p,m,y,v){if(v!==r){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}l.isRequired=l;function c(){return l}var u={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:c,element:l,elementType:l,instanceOf:c,node:l,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:t};return u.PropTypes=u,u},Fd}var Hy;function v0(){return Hy||(Hy=1,Yd.exports=XC()()),Yd.exports}var Qd,Py;function x0(){return Py||(Py=1,Qd={L:1,M:0,Q:3,H:2}),Qd}var Xd,Gy;function b0(){return Gy||(Gy=1,Xd={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Xd}var Jd,Vy;function JC(){if(Vy)return Jd;Vy=1;var r=b0();function t(s){this.mode=r.MODE_8BIT_BYTE,this.data=s}return t.prototype={getLength:function(s){return this.data.length},write:function(s){for(var l=0;l<this.data.length;l++)s.put(this.data.charCodeAt(l),8)}},Jd=t,Jd}var Wd,Yy;function WC(){if(Yy)return Wd;Yy=1;var r=x0();function t(s,l){this.totalCount=s,this.dataCount=l}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(s,l){var c=t.getRsBlockTable(s,l);if(c==null)throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+l);for(var u=c.length/3,d=new Array,f=0;f<u;f++)for(var p=c[f*3+0],m=c[f*3+1],y=c[f*3+2],v=0;v<p;v++)d.push(new t(m,y));return d},t.getRsBlockTable=function(s,l){switch(l){case r.L:return t.RS_BLOCK_TABLE[(s-1)*4+0];case r.M:return t.RS_BLOCK_TABLE[(s-1)*4+1];case r.Q:return t.RS_BLOCK_TABLE[(s-1)*4+2];case r.H:return t.RS_BLOCK_TABLE[(s-1)*4+3];default:return}},Wd=t,Wd}var Zd,Ky;function ZC(){if(Ky)return Zd;Ky=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(t){var s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)==1},put:function(t,s){for(var l=0;l<s;l++)this.putBit((t>>>s-l-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}},Zd=r,Zd}var eh,Fy;function w0(){if(Fy)return eh;Fy=1;for(var r={glog:function(s){if(s<1)throw new Error("glog("+s+")");return r.LOG_TABLE[s]},gexp:function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return r.EXP_TABLE[s]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)r.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)r.EXP_TABLE[t]=r.EXP_TABLE[t-4]^r.EXP_TABLE[t-5]^r.EXP_TABLE[t-6]^r.EXP_TABLE[t-8];for(var t=0;t<255;t++)r.LOG_TABLE[r.EXP_TABLE[t]]=t;return eh=r,eh}var th,Qy;function S0(){if(Qy)return th;Qy=1;var r=w0();function t(s,l){if(s.length==null)throw new Error(s.length+"/"+l);for(var c=0;c<s.length&&s[c]==0;)c++;this.num=new Array(s.length-c+l);for(var u=0;u<s.length-c;u++)this.num[u]=s[u+c]}return t.prototype={get:function(s){return this.num[s]},getLength:function(){return this.num.length},multiply:function(s){for(var l=new Array(this.getLength()+s.getLength()-1),c=0;c<this.getLength();c++)for(var u=0;u<s.getLength();u++)l[c+u]^=r.gexp(r.glog(this.get(c))+r.glog(s.get(u)));return new t(l,0)},mod:function(s){if(this.getLength()-s.getLength()<0)return this;for(var l=r.glog(this.get(0))-r.glog(s.get(0)),c=new Array(this.getLength()),u=0;u<this.getLength();u++)c[u]=this.get(u);for(var u=0;u<s.getLength();u++)c[u]^=r.gexp(r.glog(s.get(u))+l);return new t(c,0).mod(s)}},th=t,th}var nh,Xy;function eE(){if(Xy)return nh;Xy=1;var r=b0(),t=S0(),s=w0(),l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(u){for(var d=u<<10;c.getBCHDigit(d)-c.getBCHDigit(c.G15)>=0;)d^=c.G15<<c.getBCHDigit(d)-c.getBCHDigit(c.G15);return(u<<10|d)^c.G15_MASK},getBCHTypeNumber:function(u){for(var d=u<<12;c.getBCHDigit(d)-c.getBCHDigit(c.G18)>=0;)d^=c.G18<<c.getBCHDigit(d)-c.getBCHDigit(c.G18);return u<<12|d},getBCHDigit:function(u){for(var d=0;u!=0;)d++,u>>>=1;return d},getPatternPosition:function(u){return c.PATTERN_POSITION_TABLE[u-1]},getMask:function(u,d,f){switch(u){case l.PATTERN000:return(d+f)%2==0;case l.PATTERN001:return d%2==0;case l.PATTERN010:return f%3==0;case l.PATTERN011:return(d+f)%3==0;case l.PATTERN100:return(Math.floor(d/2)+Math.floor(f/3))%2==0;case l.PATTERN101:return d*f%2+d*f%3==0;case l.PATTERN110:return(d*f%2+d*f%3)%2==0;case l.PATTERN111:return(d*f%3+(d+f)%2)%2==0;default:throw new Error("bad maskPattern:"+u)}},getErrorCorrectPolynomial:function(u){for(var d=new t([1],0),f=0;f<u;f++)d=d.multiply(new t([1,s.gexp(f)],0));return d},getLengthInBits:function(u,d){if(1<=d&&d<10)switch(u){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+u)}else if(d<27)switch(u){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+u)}else if(d<41)switch(u){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+u)}else throw new Error("type:"+d)},getLostPoint:function(u){for(var d=u.getModuleCount(),f=0,p=0;p<d;p++)for(var m=0;m<d;m++){for(var y=0,v=u.isDark(p,m),b=-1;b<=1;b++)if(!(p+b<0||d<=p+b))for(var S=-1;S<=1;S++)m+S<0||d<=m+S||b==0&&S==0||v==u.isDark(p+b,m+S)&&y++;y>5&&(f+=3+y-5)}for(var p=0;p<d-1;p++)for(var m=0;m<d-1;m++){var _=0;u.isDark(p,m)&&_++,u.isDark(p+1,m)&&_++,u.isDark(p,m+1)&&_++,u.isDark(p+1,m+1)&&_++,(_==0||_==4)&&(f+=3)}for(var p=0;p<d;p++)for(var m=0;m<d-6;m++)u.isDark(p,m)&&!u.isDark(p,m+1)&&u.isDark(p,m+2)&&u.isDark(p,m+3)&&u.isDark(p,m+4)&&!u.isDark(p,m+5)&&u.isDark(p,m+6)&&(f+=40);for(var m=0;m<d;m++)for(var p=0;p<d-6;p++)u.isDark(p,m)&&!u.isDark(p+1,m)&&u.isDark(p+2,m)&&u.isDark(p+3,m)&&u.isDark(p+4,m)&&!u.isDark(p+5,m)&&u.isDark(p+6,m)&&(f+=40);for(var j=0,m=0;m<d;m++)for(var p=0;p<d;p++)u.isDark(p,m)&&j++;var A=Math.abs(100*j/d/d-50)/5;return f+=A*10,f}};return nh=c,nh}var rh,Jy;function tE(){if(Jy)return rh;Jy=1;var r=JC(),t=WC(),s=ZC(),l=eE(),c=S0();function u(f,p){this.typeNumber=f,this.errorCorrectLevel=p,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var d=u.prototype;return d.addData=function(f){var p=new r(f);this.dataList.push(p),this.dataCache=null},d.isDark=function(f,p){if(f<0||this.moduleCount<=f||p<0||this.moduleCount<=p)throw new Error(f+","+p);return this.modules[f][p]},d.getModuleCount=function(){return this.moduleCount},d.make=function(){if(this.typeNumber<1){var f=1;for(f=1;f<40;f++){for(var p=t.getRSBlocks(f,this.errorCorrectLevel),m=new s,y=0,v=0;v<p.length;v++)y+=p[v].dataCount;for(var v=0;v<this.dataList.length;v++){var b=this.dataList[v];m.put(b.mode,4),m.put(b.getLength(),l.getLengthInBits(b.mode,f)),b.write(m)}if(m.getLengthInBits()<=y*8)break}this.typeNumber=f}this.makeImpl(!1,this.getBestMaskPattern())},d.makeImpl=function(f,p){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++){this.modules[m]=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++)this.modules[m][y]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(f,p),this.typeNumber>=7&&this.setupTypeNumber(f),this.dataCache==null&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,p)},d.setupPositionProbePattern=function(f,p){for(var m=-1;m<=7;m++)if(!(f+m<=-1||this.moduleCount<=f+m))for(var y=-1;y<=7;y++)p+y<=-1||this.moduleCount<=p+y||(0<=m&&m<=6&&(y==0||y==6)||0<=y&&y<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=y&&y<=4?this.modules[f+m][p+y]=!0:this.modules[f+m][p+y]=!1)},d.getBestMaskPattern=function(){for(var f=0,p=0,m=0;m<8;m++){this.makeImpl(!0,m);var y=l.getLostPoint(this);(m==0||f>y)&&(f=y,p=m)}return p},d.createMovieClip=function(f,p,m){var y=f.createEmptyMovieClip(p,m),v=1;this.make();for(var b=0;b<this.modules.length;b++)for(var S=b*v,_=0;_<this.modules[b].length;_++){var j=_*v,A=this.modules[b][_];A&&(y.beginFill(0,100),y.moveTo(j,S),y.lineTo(j+v,S),y.lineTo(j+v,S+v),y.lineTo(j,S+v),y.endFill())}return y},d.setupTimingPattern=function(){for(var f=8;f<this.moduleCount-8;f++)this.modules[f][6]==null&&(this.modules[f][6]=f%2==0);for(var p=8;p<this.moduleCount-8;p++)this.modules[6][p]==null&&(this.modules[6][p]=p%2==0)},d.setupPositionAdjustPattern=function(){for(var f=l.getPatternPosition(this.typeNumber),p=0;p<f.length;p++)for(var m=0;m<f.length;m++){var y=f[p],v=f[m];if(this.modules[y][v]==null)for(var b=-2;b<=2;b++)for(var S=-2;S<=2;S++)b==-2||b==2||S==-2||S==2||b==0&&S==0?this.modules[y+b][v+S]=!0:this.modules[y+b][v+S]=!1}},d.setupTypeNumber=function(f){for(var p=l.getBCHTypeNumber(this.typeNumber),m=0;m<18;m++){var y=!f&&(p>>m&1)==1;this.modules[Math.floor(m/3)][m%3+this.moduleCount-8-3]=y}for(var m=0;m<18;m++){var y=!f&&(p>>m&1)==1;this.modules[m%3+this.moduleCount-8-3][Math.floor(m/3)]=y}},d.setupTypeInfo=function(f,p){for(var m=this.errorCorrectLevel<<3|p,y=l.getBCHTypeInfo(m),v=0;v<15;v++){var b=!f&&(y>>v&1)==1;v<6?this.modules[v][8]=b:v<8?this.modules[v+1][8]=b:this.modules[this.moduleCount-15+v][8]=b}for(var v=0;v<15;v++){var b=!f&&(y>>v&1)==1;v<8?this.modules[8][this.moduleCount-v-1]=b:v<9?this.modules[8][15-v-1+1]=b:this.modules[8][15-v-1]=b}this.modules[this.moduleCount-8][8]=!f},d.mapData=function(f,p){for(var m=-1,y=this.moduleCount-1,v=7,b=0,S=this.moduleCount-1;S>0;S-=2)for(S==6&&S--;;){for(var _=0;_<2;_++)if(this.modules[y][S-_]==null){var j=!1;b<f.length&&(j=(f[b]>>>v&1)==1);var A=l.getMask(p,y,S-_);A&&(j=!j),this.modules[y][S-_]=j,v--,v==-1&&(b++,v=7)}if(y+=m,y<0||this.moduleCount<=y){y-=m,m=-m;break}}},u.PAD0=236,u.PAD1=17,u.createData=function(f,p,m){for(var y=t.getRSBlocks(f,p),v=new s,b=0;b<m.length;b++){var S=m[b];v.put(S.mode,4),v.put(S.getLength(),l.getLengthInBits(S.mode,f)),S.write(v)}for(var _=0,b=0;b<y.length;b++)_+=y[b].dataCount;if(v.getLengthInBits()>_*8)throw new Error("code length overflow. ("+v.getLengthInBits()+">"+_*8+")");for(v.getLengthInBits()+4<=_*8&&v.put(0,4);v.getLengthInBits()%8!=0;)v.putBit(!1);for(;!(v.getLengthInBits()>=_*8||(v.put(u.PAD0,8),v.getLengthInBits()>=_*8));)v.put(u.PAD1,8);return u.createBytes(v,y)},u.createBytes=function(f,p){for(var m=0,y=0,v=0,b=new Array(p.length),S=new Array(p.length),_=0;_<p.length;_++){var j=p[_].dataCount,A=p[_].totalCount-j;y=Math.max(y,j),v=Math.max(v,A),b[_]=new Array(j);for(var N=0;N<b[_].length;N++)b[_][N]=255&f.buffer[N+m];m+=j;var C=l.getErrorCorrectPolynomial(A),R=new c(b[_],C.getLength()-1),D=R.mod(C);S[_]=new Array(C.getLength()-1);for(var N=0;N<S[_].length;N++){var U=N+D.getLength()-S[_].length;S[_][N]=U>=0?D.get(U):0}}for(var T=0,N=0;N<p.length;N++)T+=p[N].totalCount;for(var L=new Array(T),G=0,N=0;N<y;N++)for(var _=0;_<p.length;_++)N<b[_].length&&(L[G++]=b[_][N]);for(var N=0;N<v;N++)for(var _=0;_<p.length;_++)N<S[_].length&&(L[G++]=S[_][N]);return L},rh=u,rh}var Bo={},Wy;function nE(){if(Wy)return Bo;Wy=1,Object.defineProperty(Bo,"__esModule",{value:!0});var r=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var v=arguments[y];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},t=v0(),s=u(t),l=tl(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,y){var v={};for(var b in m)y.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(m,b)&&(v[b]=m[b]);return v}var f={bgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,bgD:s.default.string.isRequired,fgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,fgD:s.default.string.isRequired,size:s.default.number.isRequired,title:s.default.string,viewBoxSize:s.default.number.isRequired,xmlns:s.default.string},p=(0,l.forwardRef)(function(m,y){var v=m.bgColor,b=m.bgD,S=m.fgD,_=m.fgColor,j=m.size,A=m.title,N=m.viewBoxSize,C=m.xmlns,R=C===void 0?"http://www.w3.org/2000/svg":C,D=d(m,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return c.default.createElement("svg",r({},D,{height:j,ref:y,viewBox:"0 0 "+N+" "+N,width:j,xmlns:R}),A?c.default.createElement("title",null,A):null,c.default.createElement("path",{d:b,fill:v}),c.default.createElement("path",{d:S,fill:_}))});return p.displayName="QRCodeSvg",p.propTypes=f,Bo.default=p,Bo}var Zy;function rE(){if(Zy)return Ra;Zy=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.QRCode=void 0;var r=Object.assign||function(j){for(var A=1;A<arguments.length;A++){var N=arguments[A];for(var C in N)Object.prototype.hasOwnProperty.call(N,C)&&(j[C]=N[C])}return j},t=v0(),s=v(t),l=x0(),c=v(l),u=tE(),d=v(u),f=tl(),p=v(f),m=nE(),y=v(m);function v(j){return j&&j.__esModule?j:{default:j}}function b(j,A){var N={};for(var C in j)A.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(j,C)&&(N[C]=j[C]);return N}var S={bgColor:s.default.oneOfType([s.default.object,s.default.string]),fgColor:s.default.oneOfType([s.default.object,s.default.string]),level:s.default.string,size:s.default.number,value:s.default.string.isRequired},_=(0,f.forwardRef)(function(j,A){var N=j.bgColor,C=N===void 0?"#FFFFFF":N,R=j.fgColor,D=R===void 0?"#000000":R,U=j.level,T=U===void 0?"L":U,L=j.size,G=L===void 0?256:L,q=j.value,V=b(j,["bgColor","fgColor","level","size","value"]),z=new d.default(-1,c.default[T]);z.addData(q),z.make();var O=z.modules;return p.default.createElement(y.default,r({},V,{bgColor:C,bgD:O.map(function(F,I){return F.map(function(K,k){return K?"":"M "+k+" "+I+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:D,fgD:O.map(function(F,I){return F.map(function(K,k){return K?"M "+k+" "+I+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:A,size:G,viewBoxSize:O.length}))});return Ra.QRCode=_,_.displayName="QRCode",_.propTypes=S,Ra.default=_,Ra}var sE=rE();const aE=sv(sE),ev=r=>{if(!r)return"";const t=new Date(r);return`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`},iE=({recipe:r,ownerLabel:t,onBack:s,onEdit:l,onDelete:c,onHardDelete:u,isDeleted:d,onView:f,onDuplicate:p,backLabel:m,onList:y})=>{const{user:v}=Ms(),[b,S]=Ce.useState(!1),[_,j]=Ce.useState(!1),[A,N]=Ce.useState(!1),[C,R]=Ce.useState(!1),[D,U]=Ce.useState(new Set),[T,L]=Ce.useState({}),[G,q]=Ce.useState("ORIGINAL"),[V,z]=Ce.useState(!1),[O,F]=Ce.useState(!0),[I,K]=Ce.useState(!1),[k,$]=Ce.useState(""),[X,ue]=Ce.useState(1),[de,M]=Ce.useState(""),[P,ie]=Ce.useState(""),pe=(fe,he)=>{if(!fe)return"";const ge=parseFloat(fe);if(isNaN(ge))return fe;const Se=ge*parseFloat(he);return Number.isInteger(Se)?Se.toString():Se.toFixed(1).replace(/\.0$/,"")},xe=(fe,he)=>{if(!fe)return"";const ge=parseFloat(fe);return isNaN(ge)?fe:(ge*parseFloat(he)).toFixed(2).replace(/\.00$/,"")},ce=G==="ORIGINAL"?r:T[G]||r,[Oe,Be]=Ce.useState(r.tags?.includes("public")||!1),ke=v?.role==="admin"||r.tags&&r.tags.includes(`owner:${v?.id}`)||v?.displayId&&r.tags&&r.tags.includes(`owner:${v.displayId}`),vt=!(r.tags&&r.tags.some(fe=>fe.startsWith("owner:")))||ke,tt=async()=>{const fe=!Oe;try{const he=r.tags||[];let ge;fe?ge=[...he,"public"]:ge=he.filter(Se=>Se!=="public"),Be(fe),await zt.updateRecipe({...r,tags:ge})}catch(he){console.error("Failed to toggle public",he),alert(""),Be(!fe)}},We=(fe,he,ge=!1)=>G==="ORIGINAL"||!O||!he||fe===he?fe:i.jsxs(i.Fragment,{children:[fe,ge?i.jsx("br",{}):" ",i.jsxs("span",{className:"original-text-sub",style:{opacity:.6,fontSize:"0.85em",fontWeight:"normal"},children:["(",he,")"]})]}),Ke=async fe=>{const he=fe.target.value;if(q(he),he!=="ORIGINAL"&&!T[he]){z(!0);try{const ge=await GC.translateRecipe(r,he);L(Se=>({...Se,[he]:ge}))}catch(ge){console.error(ge),alert(""),q("ORIGINAL")}finally{z(!1)}}},Pt=fe=>{U(he=>{const ge=new Set(he);return ge.has(fe)?ge.delete(fe):ge.add(fe),ge})};Ce.useEffect(()=>{window.scrollTo(0,0),f&&r&&!d&&f(r.id);const fe=document.title;return r&&r.title&&(document.title=r.title),L({}),q("ORIGINAL"),U(new Set),Be(r.tags?.includes("public")||!1),()=>{document.title=fe}},[r.id,r.title]),Ce.useEffect(()=>{r&&r.servings?ie(r.servings.toString()):ie(""),M("")},[r]);const it=()=>{S(!0)},cn=()=>{S(!1),c(r)},bn=()=>{S(!1)},Lt=()=>{N(!0)},lt=()=>{N(!1),u(r)},Wt=()=>{N(!1)},un=()=>{j(!0)},Dn=async()=>{j(!1);try{const fe=await zt.duplicateRecipe(r,v);p&&p(fe)}catch(fe){console.error("Duplication failed",fe),alert("")}},bt=()=>{j(!1)},tn=Ce.useRef(null),nn=Ce.useRef(null),Bt=fe=>{nn.current=null,tn.current=fe.targetTouches[0].clientX},gt=fe=>{nn.current=fe.targetTouches[0].clientX},dn=()=>{if(C||!tn.current||!nn.current)return;const fe=tn.current-nn.current,he=tn.current<50,ge=fe<-100;he&&ge&&s()};if(!r)return null;const rn=fe=>{const he=Math.round(parseFloat(fe)),ge=parseFloat(de),Se=parseFloat(P);let Ie=null,ee=null;return!isNaN(he)&&!isNaN(ge)&&!isNaN(Se)&&ge>0&&Se>0&&(ee=ge*Se,Ie=he/ee*100),i.jsxs("div",{className:"profit-calculator screen-only",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[i.jsxs("h4",{style:{margin:"0 0 0.8rem 0",fontSize:"1rem",color:"#555",borderBottom:"1px solid #ddd",paddingBottom:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("span",{children:["  ",i.jsx("small",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"()"})]}),i.jsx("span",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"(8% or 10%)"})]}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" (1/1)"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("span",{style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",color:"#888"},children:""}),i.jsx("input",{type:"number",value:de,onChange:ve=>M(ve.target.value),placeholder:"0",style:{padding:"6px 6px 6px 20px",width:"100px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" ()"}),i.jsx("input",{type:"number",value:P,onChange:ve=>ie(ve.target.value),placeholder:"0",style:{padding:"6px",width:"60px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem",textAlign:"center"}})]}),Ie!==null&&i.jsxs("div",{style:{marginLeft:"auto",padding:"8px 12px",background:Ie>40?"#ffebee":"#e8f5e9",borderRadius:"6px",border:`1px solid ${Ie>40?"#ffcdd2":"#c8e6c9"}`,textAlign:"right"},children:[i.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"4px"},children:[": ",ee.toLocaleString()]}),i.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"4px",fontWeight:"bold"},children:[": ",(ee-he).toLocaleString()]}),i.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:Ie>40?"#d32f2f":"#2e7d32"},children:[": ",Ie.toFixed(1),"%"]})]})]})]})},mt=ce.ingredients||[];let wn=ce.steps||[];if(!wn.length&&ce.ingredientGroups){const fe=ce.ingredientGroups.find(he=>["","Steps","Method",""].includes(he.name));fe&&(wn=mt.filter(ge=>ge.groupId===fe.id).map(ge=>typeof ge=="string"?ge:ge.name||ge.text||""))}const It=wn;return i.jsxs("div",{className:"recipe-detail fade-in",onTouchStart:Bt,onTouchMove:gt,onTouchEnd:dn,children:[C&&i.jsx(FC,{recipe:ce,steps:wn,onClose:()=>R(!1)}),_&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(_t,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-primary)"},children:""}),i.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:""}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:bt,children:""}),i.jsx(se,{variant:"primary",onClick:Dn,children:""})]})]})}),A&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(_t,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:" "}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),""]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:Wt,children:""}),i.jsx(se,{variant:"danger",onClick:lt,children:""})]})]})}),b&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(_t,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:""}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),i.jsx("small",{style:{color:"#666"},children:""})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:bn,children:""}),i.jsx(se,{variant:"danger",onClick:cn,children:""})]})]})}),i.jsxs("div",{className:"recipe-detail__header",children:[i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx(se,{variant:"secondary",onClick:s,size:"sm",children:m||" "}),y&&i.jsx(se,{variant:"secondary",onClick:y,size:"sm",children:""})]}),!d&&i.jsxs("div",{className:"recipe-detail__actions",children:[vt&&(v?.displayId==="yoshito"||v?.role==="admin")&&i.jsx("div",{style:{marginRight:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:i.jsxs("label",{className:"switch",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:Oe,onChange:tt,style:{accentColor:"#4CAF50",transform:"scale(1.2)"}}),i.jsx("span",{style:{marginLeft:"4px",fontSize:"0.9rem",fontWeight:"bold",color:Oe?"#4CAF50":"#888"},children:Oe?"":""})]})}),!vt&&i.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#e0e0e0",color:"#555",borderRadius:"4px",fontSize:"0.85rem",marginRight:"0.5rem"},children:"  ()"}),i.jsxs("select",{className:"language-select",value:G,onChange:Ke,disabled:V,style:{padding:"0.4rem",borderRadius:"4px",border:"1px solid #ccc",marginRight:"0.5rem",cursor:"pointer"},children:[i.jsx("option",{value:"ORIGINAL",children:" Original ()"}),KC.map(fe=>i.jsx("option",{value:fe.code,children:fe.label},fe.code))]}),G!=="ORIGINAL"&&i.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"0.5rem",cursor:"pointer",fontSize:"0.9rem",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:O,onChange:fe=>F(fe.target.checked),style:{marginRight:"4px"}}),""]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>K(!0),children:" "}),i.jsx(se,{variant:"secondary",size:"sm",onClick:un,children:""}),vt&&i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:l,children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:it,style:{marginLeft:"0.5rem"},children:""})]}),i.jsx(se,{variant:"primary",size:"sm",onClick:()=>R(!0),children:""})]}),d&&i.jsxs("div",{className:"recipe-detail__actions",children:[i.jsx(se,{variant:"ghost",size:"sm",onClick:Lt,style:{color:"var(--color-danger)",marginRight:"auto"},children:""}),i.jsx(se,{variant:"primary",size:"sm",onClick:()=>c(r,!0),children:""})]})]}),i.jsx("div",{className:"recipe-detail__hero",children:ce.image?i.jsx("img",{src:ce.image,alt:ce.title,className:"recipe-detail__image"}):i.jsx("div",{className:"recipe-detail__image-placeholder",style:{height:"100%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:""})}),i.jsxs("div",{className:"recipe-detail__title-card glass-panel",children:[i.jsx("h1",{children:We(ce.title,r.title)}),i.jsx("p",{className:"recipe-detail__desc",children:We(ce.description,r.description,!0)}),v?.role==="admin"&&t&&i.jsxs("div",{style:{marginTop:"0.35rem",color:"#666",fontSize:"0.9rem"},children:[" : ",t]}),i.jsxs("div",{className:"recipe-detail__meta",children:[ce.course&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:We(ce.course,r.course)})]}),ce.category&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:We(ce.category,r.category)})]}),ce.storeName&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:We(ce.storeName,r.storeName)})]}),i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsxs("span",{className:"meta-value",children:[ce.servings,""]})]})]}),ce.sourceUrl&&i.jsxs("div",{className:"print-qr-container",style:{marginTop:"0.8rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsx("div",{style:{fontSize:"0.85rem"},children:i.jsxs("a",{href:ce.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px"},children:[" ",i.jsx("span",{className:"screen-only",children:""}),i.jsx("span",{className:"print-only",children:""})]})}),i.jsx("div",{style:{background:"white",padding:"4px",width:"fit-content"},children:i.jsx(aE,{value:ce.sourceUrl,size:64,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]})]}),i.jsxs("div",{className:"recipe-detail-dates",style:{marginTop:"0.5rem",marginBottom:"1.5rem",borderTop:"none",paddingRight:"0.5rem"},children:[i.jsxs("span",{children:[" : ",ev(r.created_at)]}),r.updated_at&&i.jsxs("span",{children:[" : ",ev(r.updated_at)]})]}),i.jsx("div",{className:"recipe-detail__content",children:i.jsxs("div",{className:"recipe-detail__main",children:[i.jsxs("section",{className:"detail-section",children:[i.jsx("h2",{children:""}),i.jsx(_t,{className:"ingredients-card",children:ce.type==="bread"?i.jsx("div",{className:"bread-detail-view",children:(()=>{const fe=ce.flours||[],he=ce.breadIngredients||[],ge=fe.reduce((ne,me)=>ne+(parseFloat(me.quantity)||0),0),Se=ge+he.reduce((ne,me)=>ne+(parseFloat(me.quantity)||0),0),Ie=ge?(Se/ge*100).toFixed(1):"0.0",ee=ne=>ge?((parseFloat(ne)||0)/ge*100).toFixed(1):"0.0",ve=parseFloat(k),H=ve&&Se?ve/Se:1,re=ne=>ve?((parseFloat(ne)||0)*H).toFixed(1):ne;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"screen-only",style:{background:"#f1f3f5",padding:"0.4rem 0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem 1rem",flexWrap:"wrap",border:"1px solid #dee2e6",lineHeight:1.2},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),i.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#000"},children:[Se.toLocaleString(),"g"]}),i.jsxs("span",{style:{fontSize:"0.75rem",color:"#444"},children:["(",Ie,"%)"]})]}),i.jsx("div",{style:{height:"16px",width:"1px",background:"#adb5bd"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("label",{htmlFor:"target-total-input",style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("input",{id:"target-total-input",type:"number",value:k,onChange:ne=>$(ne.target.value),placeholder:"1000",style:{padding:"2px 20px 2px 6px",width:"80px",borderRadius:"4px",border:"1.5px solid #333",fontSize:"0.9rem",fontWeight:"bold",textAlign:"right",color:"#000",backgroundColor:"#fff"}}),i.jsx("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",color:"#333"},children:"g"})]}),k&&i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>$(""),style:{padding:"0 4px",fontSize:"0.7rem",color:"#555",height:"22px",border:"1px solid #dee2e6"},children:""})]}),k&&i.jsxs("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"bold",marginLeft:"auto"},children:[" : ",H.toFixed(3)," "]})]}),i.jsxs("div",{className:"bread-section",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",marginTop:0,display:"flex",justifyContent:"space-between",alignItems:"center",color:"var(--color-text-main)"},children:[i.jsx("span",{children:""}),i.jsxs("span",{style:{fontSize:"0.9rem",background:"var(--color-primary)",color:"white",padding:"4px 12px",borderRadius:"20px",fontWeight:"bold"},children:["Total: ",k?re(ge):ge,"g (100%)"]})]}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:" (g)"}),i.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),i.jsx("tbody",{children:fe.map((ne,me)=>{const be=r.flours?.[me]||{};return i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`flour-${me}`}),i.jsx("label",{htmlFor:`flour-${me}`,children:We(ne.name,be?.name)})]})}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:k?i.jsx("span",{style:{color:"var(--color-primary)"},children:re(ne.quantity)}):ne.quantity}),i.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-primary)"},children:[ee(ne.quantity),"%"]}),i.jsx("td",{style:{textAlign:"right",color:"#666"},children:ne.purchaseCost?`${ne.purchaseCost}`:"-"}),i.jsx("td",{style:{textAlign:"right"},children:ne.cost?`${ne.cost}`:"-"})]},me)})})]})]}),i.jsxs("div",{className:"bread-section",style:{marginTop:"3rem"},children:[i.jsx("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid #f39c12",paddingLeft:"10px",marginBottom:"1rem",color:"var(--color-text-main)"},children:""}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:" (g)"}),i.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),i.jsx("tbody",{children:he.map((ne,me)=>{const be=r.breadIngredients?.[me]||{};return i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ingredient-${me}`}),i.jsx("label",{htmlFor:`ingredient-${me}`,children:We(ne.name,be?.name)})]})}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:k?i.jsx("span",{style:{color:"var(--color-primary)"},children:re(ne.quantity)}):ne.quantity}),i.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-text-muted)"},children:[ee(ne.quantity),"%"]}),i.jsx("td",{style:{textAlign:"right",color:"#666"},children:ne.purchaseCost?`${ne.purchaseCost}`:"-"}),i.jsx("td",{style:{textAlign:"right"},children:ne.cost?`${ne.cost}`:"-"})]},me)})})]}),i.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--color-bg-surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),i.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",(()=>{const ne=be=>be.reduce((Le,Te)=>{const rt=parseFloat(Te.cost)||0,Pe=Te.isAlcohol?1.1:1.08,Je=rt*H;return Le+Je*Pe},0),me=ne(fe)+ne(he);return Math.round(me).toLocaleString()})()]}),i.jsx("span",{style:{fontSize:"0.75rem",color:"#666",marginLeft:"8px"},children:"()"})]}),(()=>{const ne=be=>be.reduce((Le,Te)=>{const rt=parseFloat(Te.cost)||0,Pe=Te.isAlcohol?1.1:1.08,Je=rt*H;return Le+Je*Pe},0),me=ne(fe)+ne(he);return rn(me)})()]})]})})()}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"screen-only no-print",style:{background:"#f8f9fa",color:"#333",padding:"0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid #e9ecef"},children:[i.jsx("label",{htmlFor:"multiplier-input",style:{fontWeight:"bold",fontSize:"0.9rem",color:"#333"},children:":"}),i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold",marginRight:"4px",color:"#333"},children:""}),i.jsx("input",{id:"multiplier-input",type:"number",min:"0.1",step:"0.1",value:X,onChange:fe=>ue(fe.target.value),style:{width:"60px",padding:"4px",fontSize:"1rem",fontWeight:"bold",textAlign:"center",borderRadius:"4px",border:"1px solid #ced4da",background:"#fff",color:"#333"}})]}),parseFloat(X)!==1&&i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>ue("1"),style:{fontSize:"0.8rem",padding:"2px 8px",height:"auto",color:"#555",borderColor:"#ccc",background:"#fff"},children:""})]}),(()=>{const fe=ce.ingredientGroups&&ce.ingredientGroups.length>0?ce.ingredientGroups:null;return fe?fe.map(he=>{const ge=mt.filter(Se=>Se.groupId===he.id);return ge.length===0||["","Steps","Method",""].includes(he.name)?null:i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{fontSize:"1rem",borderBottom:"2px solid var(--color-border)",paddingBottom:"0.5rem",marginBottom:"0.5rem",marginTop:"0.5rem",color:"var(--color-text-main)",display:["","Ingredients","ingredients"].includes(he.name)?"none":"block"},children:he.name}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"40%"},children:""}),i.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:ge.map((Se,Ie)=>{const ee=mt.indexOf(Se),ve=r.ingredients?.[ee],H=typeof Se=="string"?Se:Se.name,re=ve?typeof ve=="string"?ve:ve.name:"",ne=pe(Se.quantity,X),me=xe(Se.cost,X),be=String(X)!=="1";return i.jsxs("tr",{className:"ingredient-row",children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ing-${he.id}-${Ie}`}),i.jsx("label",{htmlFor:`ing-${he.id}-${Ie}`,children:We(H,re)})]})}),i.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:be?"bold":"normal",color:be?"var(--color-primary)":"inherit"},children:ne}),i.jsx("td",{style:{paddingLeft:"0.5rem"},children:Se.unit}),i.jsx("td",{style:{textAlign:"right",color:"#666"},children:Se.purchaseCost?`${Se.purchaseCost}`:"-"}),i.jsxs("td",{style:{textAlign:"right"},children:[me?`${me}`:"-",Se.isAlcohol&&i.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},Ie)})})]})]},he.id)}):i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"40%"},children:""}),i.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:mt.map((he,ge)=>{const Se=r.ingredients?.[ge],Ie=typeof he=="string"?he:he.name,ee=Se?typeof Se=="string"?Se:Se.name:"",ve=pe(he.quantity,X),H=xe(he.cost,X),re=String(X)!=="1";return i.jsxs("tr",{className:"ingredient-row",children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ing-${ge}`}),i.jsx("label",{htmlFor:`ing-${ge}`,children:We(Ie,ee)})]})}),i.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:re?"bold":"normal",color:re?"var(--color-primary)":"inherit"},children:ve}),i.jsx("td",{style:{paddingLeft:"0.5rem"},children:he.unit}),i.jsx("td",{style:{textAlign:"right",color:"#666"},children:he.purchaseCost?`${he.purchaseCost}`:"-"}),i.jsxs("td",{style:{textAlign:"right"},children:[H?`${H}`:"-",he.isAlcohol&&i.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},ge)})})]})})(),i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"2px dashed var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),i.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",Math.round((he=>he.reduce((ge,Se)=>{const Ie=parseFloat(Se.cost)||0,ee=Se.isAlcohol?1.1:1.08,ve=xe(Ie,X),H=parseFloat(ve)||0;return ge+H*ee},0))(mt)).toLocaleString()]}),i.jsx("span",{style:{fontSize:"0.75rem",color:"#666"},children:"()"})]}),i.jsx("p",{style:{textAlign:"right",fontSize:"0.75rem",color:"#666",marginTop:"0.5rem"},children:"(8% or 10%)"}),(()=>{const he=(ge=>ge.reduce((Se,Ie)=>{const ee=parseFloat(Ie.cost)||0,ve=Ie.isAlcohol?1.1:1.08,H=parseFloat(xe(ee,X))||0;return Se+H*ve},0))(mt);return rn(he)})()]})})]}),i.jsxs("section",{className:"detail-section",children:[i.jsx("h2",{children:""}),(()=>{const fe=ce.stepGroups&&ce.stepGroups.length>0?ce.stepGroups:null;return fe?i.jsx("div",{className:"steps-container",children:fe.map(he=>{const ge=It.filter(Se=>(typeof Se=="object"?Se.groupId:null)===he.id);return ge.length===0?null:i.jsxs("div",{className:"step-group",style:{marginBottom:"2rem"},children:[he.name!==""&&he.name!=="Steps"&&i.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"var(--color-text-main)",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px"},children:he.name}),i.jsx("div",{className:"steps-list",children:ge.map((Se,Ie)=>{const ee=It.indexOf(Se),ve=typeof Se=="object"?Se.text:Se,H=r.steps?.[ee],re=typeof H=="object"?H.text:H,ne=me=>me?me.replace(/<[^>]*>?/gm,""):"";return i.jsxs(_t,{className:`step-card ${D.has(ee)?"is-completed":""}`,onClick:()=>Pt(ee),children:[i.jsx("div",{className:"step-number",children:ee+1}),i.jsx("p",{className:"step-text",children:We(ne(ve),ne(re),!0)})]},Ie)})})]},he.id)})}):i.jsx("div",{className:"steps-list",children:It.map((he,ge)=>{const Se=typeof he=="object"?he.text:he,Ie=r.steps?.[ge],ee=typeof Ie=="object"?Ie.text:Ie;return i.jsxs(_t,{className:`step-card ${D.has(ge)?"is-completed":""}`,onClick:()=>Pt(ge),children:[i.jsx("div",{className:"step-number",children:ge+1}),i.jsx("p",{className:"step-text",children:We(Se,ee,!0)})]},ge)})})})()]})]})}),i.jsx(xn,{isOpen:I,onClose:()=>K(!1),title:" ",size:"large",children:i.jsxs("div",{className:"print-preview-recipe",children:[i.jsxs("div",{className:"preview-header",children:[i.jsx("h2",{children:ce.title}),ce.image&&i.jsx("img",{src:ce.image,alt:ce.title,className:"preview-image"})]}),i.jsxs("div",{className:"preview-meta",children:[ce.course&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",ce.course]}),ce.category&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",ce.category]}),ce.storeName&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",ce.storeName]}),ce.servings&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",ce.servings,""]})]}),ce.description&&i.jsx("div",{className:"preview-description",children:i.jsx("p",{children:ce.description})}),i.jsxs("div",{className:"preview-section",children:[i.jsx("h3",{children:""}),ce.type==="bread"?i.jsxs("div",{className:"preview-ingredients-bread",children:[i.jsxs("div",{className:"bread-group",children:[i.jsx("h4",{children:""}),i.jsxs("table",{className:"preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:(ce.flours||[]).map((fe,he)=>i.jsxs("tr",{children:[i.jsx("td",{children:fe.name}),i.jsxs("td",{style:{textAlign:"right"},children:[fe.quantity,"g"]})]},he))})]})]}),i.jsxs("div",{className:"bread-group",children:[i.jsx("h4",{children:""}),i.jsxs("table",{className:"preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:(ce.breadIngredients||[]).map((fe,he)=>i.jsxs("tr",{children:[i.jsx("td",{children:fe.name}),i.jsxs("td",{style:{textAlign:"right"},children:[fe.quantity,"g"]})]},he))})]})]})]}):i.jsx("div",{className:"preview-ingredients-normal",children:(()=>{const fe=ce.ingredientGroups&&ce.ingredientGroups.length>0?ce.ingredientGroups:null;return fe?fe.map(he=>{const ge=mt.filter(Se=>Se.groupId===he.id);return ge.length===0||["","Steps","Method",""].includes(he.name)?null:i.jsxs("div",{className:"ingredient-group",children:[i.jsx("h4",{children:he.name}),i.jsx("ul",{children:ge.map((Se,Ie)=>i.jsxs("li",{children:[Se.name," ",Se.quantity&&`${Se.quantity}${Se.unit||""}`]},Ie))})]},he.id)}):i.jsx("ul",{children:mt.map((he,ge)=>i.jsxs("li",{children:[he.name," ",he.quantity&&`${he.quantity}${he.unit||""}`]},ge))})})()})]}),It.length>0&&i.jsxs("div",{className:"preview-section",children:[i.jsx("h3",{children:""}),i.jsx("ol",{className:"preview-steps",children:It.map((fe,he)=>{const ge=typeof fe=="object"?fe.text:fe;return i.jsx("li",{children:ge},he)})})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:()=>window.print(),children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>K(!1),children:""})]})]})})]})},Ye=({label:r,id:t,error:s,textarea:l,...c})=>{const u=l?"textarea":"input";return i.jsxs("div",{className:`input-group ${s?"input-group--error":""}`,children:[r&&i.jsx("label",{htmlFor:t,className:"input-label",children:r}),i.jsx(u,{id:t,className:`input-field ${c.className||""}`,...c}),s&&i.jsx("span",{className:"input-error",children:s})]})},zi="app-data",nr={_cacheByUserId:new Map,async _getCurrentUserId(){const{data:r,error:t}=await ye.auth.getUser();if(t)throw t;return r?.user?.id||null},_getUserScopedPath(r,t){if(!r)throw new Error("User ID is required");const s=String(t||"").replace(/^\/+/,"");return`${r}/${s}`},clearCache(r=null){r?this._cacheByUserId.delete(r):this._cacheByUserId.clear()},async fetchPriceList(r=null){const t=r||await this._getCurrentUserId();if(!t)return new Map;const s=this._cacheByUserId.get(t);if(s)return s;try{const{data:l,error:c}=await ye.storage.from(zi).list(t);if(c)return console.warn("Failed to list price files:",c.message),new Map;if(!l||l.length===0)return new Map;const u=new Map,d=l.filter(p=>p.name.endsWith(".csv")).map(async p=>{const m=this._getUserScopedPath(t,p.name),{data:y,error:v}=await ye.storage.from(zi).download(m);if(v)return console.error(`Failed to download ${p.name}:`,v),null;const b=await y.arrayBuffer();return new TextDecoder("shift-jis").decode(b)}),f=await Promise.all(d);for(const p of f){if(!p)continue;const m=this.parseCSV(p);for(const[y,v]of m)if(u.has(y)){const b=u.get(y);v.dateStr>b.dateStr&&u.set(y,v)}else u.set(y,v)}return this._cacheByUserId.set(t,u),u}catch(l){return console.error("Error in fetchPriceList:",l),new Map}},async getFileList(r=null){try{const t=r||await this._getCurrentUserId();if(!t)return[];const{data:s,error:l}=await ye.storage.from(zi).list(t);if(l)throw l;return s.filter(c=>c.name.endsWith(".csv"))||[]}catch(t){return console.error("Error fetching file list:",t),[]}},async uploadPriceList(r,t=null){try{const s=t||await this._getCurrentUserId();if(!s)throw new Error("");const l=r.name;this.clearCache(s);const c=this._getUserScopedPath(s,l),{data:u,error:d}=await ye.storage.from(zi).upload(c,r,{upsert:!0,contentType:"text/csv"});if(d)throw d;return{success:!0,data:u}}catch(s){return console.error("Error uploading price list:",s),{success:!1,error:s}}},async deletePriceFile(r,t=null){try{const s=t||await this._getCurrentUserId();if(!s)throw new Error("");this.clearCache(s);const l=this._getUserScopedPath(s,r),{data:c,error:u}=await ye.storage.from(zi).remove([l]);if(u)throw u;if(!c||c.length===0)throw new Error("");return{success:!0,data:c}}catch(s){return console.error("Error deleting price file:",s),{success:!1,error:s}}},parseCSV(r){const t=new Map,s=r.split(/\r?\n/).filter(c=>c.trim());if(s.length===0)return t;if(s.some(c=>c.startsWith("D,")||c.startsWith('"D",')))for(let c of s){const u=[];let d="",f=!1;for(let _=0;_<c.length;_++){const j=c[_];j==='"'?f=!f:j===","&&!f?(u.push(d),d=""):d+=j}u.push(d);const p=u.map(_=>(_=_.trim(),_.startsWith('"')&&_.endsWith('"')?_.slice(1,-1):_));if(p[0]!=="D")continue;const m=p[1],y=p[8],v=p[14],b=p[18],S=p[20];if(v&&b){const _=parseFloat(b);if(!isNaN(_)){const j={price:_,vendor:y,unit:S,dateStr:m};if(t.has(v)){const A=t.get(v);m>A.dateStr&&t.set(v,j)}else t.set(v,j)}}}else{let c={name:-1,price:-1,unit:-1,vendor:-1},u=0;if(s[0].split(",").map(p=>p.trim().replace(/^"|"$/g,"")).forEach((p,m)=>{["","","","","name","item"].some(y=>p.includes(y))&&(c.name=m),["","","","","price","cost"].some(y=>p.includes(y))&&(c.price=m),["","unit"].some(y=>p.includes(y))&&(c.unit=m),["","","","vendor","supplier"].some(y=>p.includes(y))&&(c.vendor=m)}),c.name===-1&&c.price===-1){c={name:0,price:1,unit:2,vendor:3};const p=s[0].split(",");isNaN(parseFloat(p[1]))&&(u=1)}else u=1;const f=new Date().toISOString().slice(0,10).replace(/-/g,"/");for(let p=u;p<s.length;p++){const m=s[p],y=[];let v="",b=!1;for(let C=0;C<m.length;C++){const R=m[C];R==='"'?b=!b:R===","&&!b?(y.push(v),v=""):v+=R}y.push(v);const S=y.map(C=>(C=C.trim(),C.startsWith('"')&&C.endsWith('"')?C.slice(1,-1):C)),_=c.name>-1?S[c.name]:null,j=c.price>-1?S[c.price]:null,A=c.unit>-1?S[c.unit]:"",N=c.vendor>-1?S[c.vendor]:"";if(_&&j){const C=parseFloat(j.replace(/[^0-9.]/g,""));isNaN(C)||t.set(_,{price:C,vendor:N,unit:A,dateStr:f})}}}return t},async getPriceListArray(r=null){const t=await this.fetchPriceList(r),s=[];for(const[l,c]of t.entries())typeof c=="object"?s.push({name:l,...c}):s.push({name:l,price:c});return s.sort((l,c)=>l.dateStr&&c.dateStr?c.dateStr.localeCompare(l.dateStr):l.name.localeCompare(c.name))},async getPrice(r,t=null){return r&&(await this.fetchPriceList(t)).get(r)||null}},ln={async _getCurrentUserId(){const{data:r,error:t}=await ye.auth.getUser();if(t)throw t;return r?.user?.id||null},async saveConversion(r,t,s,l=null){try{const c=await this._getCurrentUserId();if(!c)throw new Error("");const{data:u,error:d}=await ye.from("unit_conversions").upsert({user_id:c,ingredient_name:r,packet_size:parseFloat(t),packet_unit:s,last_price:l?parseFloat(l):null,updated_at:new Date().toISOString()},{onConflict:"user_id,ingredient_name"}).select().single();if(d)throw d;return{ingredientName:u.ingredient_name,packetSize:u.packet_size,packetUnit:u.packet_unit,lastPrice:u.last_price,updatedAt:u.updated_at}}catch(c){throw console.error("Error saving conversion:",c),c}},async getConversion(r){try{const t=await this._getCurrentUserId();if(!t)return null;const{data:s,error:l}=await ye.from("unit_conversions").select("*").eq("ingredient_name",r).eq("user_id",t).single();return l?(l.code==="PGRST116"||console.warn("Error fetching conversion:",l),null):{ingredientName:s.ingredient_name,packetSize:s.packet_size,packetUnit:s.packet_unit,lastPrice:s.last_price,updatedAt:s.updated_at}}catch(t){return console.error("Error in getConversion:",t),null}},async getAllConversions(){try{const r=await this._getCurrentUserId();if(!r)return new Map;const{data:t,error:s}=await ye.from("unit_conversions").select("*").eq("user_id",r);if(s)throw s;const l=new Map;return t.forEach(c=>{l.set(c.ingredient_name,{ingredientName:c.ingredient_name,packetSize:c.packet_size,packetUnit:c.packet_unit,lastPrice:c.last_price,updatedAt:c.updated_at})}),l}catch(r){return console.error("Error in getAllConversions:",r),new Map}},async deleteConversion(r){try{const t=await this._getCurrentUserId();if(!t)throw new Error("");const{error:s}=await ye.from("unit_conversions").delete().eq("ingredient_name",r).eq("user_id",t);if(s)throw s;return{success:!0}}catch(t){throw console.error("Error deleting conversion:",t),t}}},j0=({isOpen:r,onClose:t,onApply:s,ingredientName:l,currentCost:c,currentQuantity:u,unit:d="g",initialPurchaseCost:f,initialContentAmount:p})=>{const[m,y]=w.useState(""),[v,b]=w.useState(""),[S,_]=w.useState(d),[j,A]=w.useState(!1),[N,C]=w.useState(!1);w.useEffect(()=>{r&&l&&R()},[r,l]);const R=async()=>{if(C(!0),f&&p){y(f),b(p);const G=await ln.getConversion(l);_(G&&G.packetUnit||d)}else{const G=await ln.getConversion(l);if(G)b(G.packetSize),_(G.packetUnit||d),G.lastPrice&&y(G.lastPrice);else try{const q=await nr.getPrice(l);if(q)if(y(c||q.price),q.unit){const V=q.unit.match(/^(\d+(?:\.\d+)?)?\s*(.*)$/);if(V){let z=V[1]?parseFloat(V[1]):1,O=V[2]?V[2].trim().toLowerCase():"";O==="kg"?(z*=1e3,O="g"):O==="l"?(z*=1e3,O="ml"):O==="pk"||O==="pack"?O="":O==="bag"?O="":(O==="pc"||O==="pcs")&&(O=""),b(z),_(O||d)}else b(1),_(q.unit)}else b(""),_(d);else b(""),y(c||""),_(d)}catch(q){console.warn("Failed to load master price:",q),b(""),y(c||""),_(d)}}C(!1)},D=()=>{const G=parseFloat(m),q=parseFloat(v);return!G||!q?0:["g","ml","cc"].includes(S)?G/q*1e3:G/q},U=async()=>{const G=D();if(j&&v)try{await ln.saveConversion(l,v,S,m)}catch(q){console.error("Failed to save default conversion:",q)}s(G,S,m,v),t()};if(!r)return null;const T=D(),L=u?T*(u/(["g","ml"].includes(d)?1e3:1)):0;return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"90%",maxWidth:"350px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[i.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1.1rem",color:"#000"},children:""}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),i.jsx("div",{style:{fontWeight:"bold"},children:l||"()"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:" ()"}),i.jsx("input",{type:"number",value:m,onChange:G=>y(G.target.value),className:"input-field",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),i.jsxs("div",{style:{display:"flex",gap:"4px"},children:[i.jsx("input",{type:"number",value:v,onChange:G=>b(G.target.value),className:"input-field",style:{flex:1,padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"}),i.jsxs("select",{value:S,onChange:G=>_(G.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white"},children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:"p"}),i.jsx("option",{value:"cc",children:"cc"}),!["g","ml","","","","","","cc"].includes(S)&&i.jsx("option",{value:S,children:S})]})]})]})]}),i.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:N?i.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem"},children:"CSV..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{style:{fontSize:"0.9rem"},children:" (1kg/1):"}),i.jsxs("span",{style:{fontWeight:"bold"},children:["",Math.round(T).toLocaleString()]})]}),u&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#666",fontSize:"0.85rem"},children:[i.jsxs("span",{children:[" (",u,d,"):"]}),i.jsxs("span",{children:["",Math.round(L).toLocaleString()]})]})]})}),i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"checkbox",id:"saveDefault",checked:j,onChange:G=>A(G.target.checked),style:{marginRight:"8px"}}),i.jsxs("label",{htmlFor:"saveDefault",style:{fontSize:"0.9rem",cursor:"pointer"},children:["(",v,S,")"]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"10px",border:"1px solid #ccc",background:"white",borderRadius:"4px",cursor:"pointer"},children:""}),i.jsx("button",{type:"button",onClick:U,disabled:!m||!v,style:{flex:1,padding:"10px",border:"none",background:!m||!v?"#ccc":"#D2691E",color:"white",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:""})]})]})})},lE=({formData:r,setFormData:t})=>{const[s,l]=w.useState(new Map),c=w.useMemo(()=>Array.from(s.keys()),[s]),[u,d]=w.useState(null),[f,p]=w.useState([]),[m,y]=w.useState({isOpen:!1,type:null,index:null}),[v,b]=w.useState(new Map);w.useEffect(()=>{(async()=>{const[O,F]=await Promise.all([nr.fetchPriceList(),ln.getAllConversions()]);l(O),b(F)})()},[]);const _=(z=>z.reduce((O,F)=>O+(parseFloat(F.quantity)||0),0))(r.flours||[]),j=z=>!_||_===0?0:((parseFloat(z)||0)/_*100).toFixed(1),A=(z,O,F)=>{const I=[...r.flours||[]];if(I[z]={...I[z],[O]:F},O==="name"){if(F.trim()){const k=F.toLowerCase(),$=c.filter(X=>X.toLowerCase().includes(k));p($.slice(0,10)),d({type:"flour",index:z})}else p([]),d(null);const K=s.get(F);if(K){const k=typeof K=="object"?K.price:K,$=typeof K=="object"?K.vendor:null;I[z].purchaseCostRef=k,I[z].vendorRef=$;const X=v.get(F);if(X&&X.packetSize){let ue=0;["g","ml","cc",""].includes(X.packetUnit)?ue=k/X.packetSize*1e3:ue=k/X.packetSize,I[z].purchaseCost=Math.round(ue*100)/100,I[z].unit="g"}else I[z].purchaseCost||(I[z].purchaseCost=k)}else I[z].purchaseCostRef=null,I[z].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(O)||O==="name"){const K=I[z],k=parseFloat(K.quantity),$=parseFloat(K.purchaseCost);if(!isNaN(k)&&!isNaN($)){let X=0;K.unit==="g"||K.unit===""||!K.unit?X=k/1e3*$:X=k*$;const ue=Math.round(X*100)/100;ue!==K.cost&&(I[z].cost=ue)}}t(K=>({...K,flours:I}))},N=(z,O,F)=>{const I=[...r.breadIngredients||[]];if(I[z]={...I[z],[O]:F},O==="name"){if(F.trim()){const k=F.toLowerCase(),$=c.filter(X=>X.toLowerCase().includes(k));p($.slice(0,10)),d({type:"ingredient",index:z})}else p([]),d(null);const K=s.get(F);if(K){const k=typeof K=="object"?K.price:K,$=typeof K=="object"?K.vendor:null;I[z].purchaseCostRef=k,I[z].vendorRef=$;const X=v.get(F);if(X&&X.packetSize){let ue=0;["g","ml","cc",""].includes(X.packetUnit)?(ue=k/X.packetSize*1e3,I[z].unit="g"):["kg","l",""].includes(X.packetUnit.toLowerCase())?(ue=k/X.packetSize,I[z].unit="g"):(ue=k/X.packetSize,I[z].unit=X.packetUnit),I[z].purchaseCost=Math.round(ue*100)/100}else I[z].purchaseCost||(I[z].purchaseCost=k)}else I[z].purchaseCostRef=null,I[z].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(O)||O==="name"){const K=I[z],k=parseFloat(K.quantity),$=parseFloat(K.purchaseCost);if(!isNaN(k)&&!isNaN($)){let X=0;const ue=K.unit?K.unit.trim().toLowerCase():"g";ue==="g"||ue===""?X=k/1e3*$:X=k*$;const de=Math.round(X*100)/100;de!==K.cost&&(I[z].cost=de)}}t(K=>({...K,breadIngredients:I}))},C=()=>{t(z=>({...z,flours:[...z.flours||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},R=()=>{t(z=>({...z,breadIngredients:[...z.breadIngredients||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},D=z=>{t(O=>({...O,flours:O.flours.filter((F,I)=>I!==z)}))},U=z=>{t(O=>({...O,breadIngredients:O.breadIngredients.filter((F,I)=>I!==z)}))},T=(z,O,F)=>{z==="flour"?A(O,"name",F):N(O,"name",F),d(null),p([])},L=zs(en(ol),en(Us,{coordinateGetter:pl})),G=z=>{const{active:O,over:F}=z;O.id!==F.id&&t(I=>{const k=I.flours.some(ue=>ue.id===O.id)?"flours":"breadIngredients",$=I[k].findIndex(ue=>ue.id===O.id),X=I[k].findIndex(ue=>ue.id===F.id);return $!==-1&&X!==-1?{...I,[k]:qa(I[k],$,X)}:I})};w.useEffect(()=>{if(!r.flours)t(z=>({...z,flours:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const z=r.flours.map(O=>O.id?O:{...O,id:crypto.randomUUID()});JSON.stringify(z)!==JSON.stringify(r.flours)&&t(O=>({...O,flours:z}))}if(!r.breadIngredients)t(z=>({...z,breadIngredients:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const z=r.breadIngredients.map(O=>O.id?O:{...O,id:crypto.randomUUID()});JSON.stringify(z)!==JSON.stringify(r.breadIngredients)&&t(O=>({...O,breadIngredients:z}))}},[]);const q=(z,O,F,I)=>{const{type:K,index:k}=m;t($=>{if(K==="flour"){const X=[...$.flours],ue={...X[k],purchaseCost:z,unit:O,purchase_cost:F,content_amount:I},de=parseFloat(ue.quantity),M=parseFloat(z);if(!isNaN(de)&&!isNaN(M)){let P=0;O==="g"||O===""?P=de/1e3*M:P=de*M,ue.cost=Math.round(P*100)/100}return X[k]=ue,ln.getAllConversions().then(P=>b(P)),{...$,flours:X}}else if(K==="ingredient"){const X=[...$.breadIngredients],ue={...X[k],purchaseCost:z,unit:O,purchase_cost:F,content_amount:I},de=parseFloat(ue.quantity),M=parseFloat(z);if(!isNaN(de)&&!isNaN(M)){let P=0;O==="g"||O===""?P=de/1e3*M:P=de*M,ue.cost=Math.round(P*100)/100}return X[k]=ue,ln.getAllConversions().then(P=>b(P)),{...$,breadIngredients:X}}return $})},V=m.isOpen&&m.index!==null?m.type==="flour"?r.flours[m.index]:r.breadIngredients[m.index]:null;return i.jsxs("div",{className:"bread-form",children:[i.jsxs(_t,{className:"mb-md bread-card",style:{position:"relative",zIndex:10},children:[i.jsxs("div",{className:"bread-header",children:[i.jsxs("h3",{children:[" (Total: ",_,"g)"]}),i.jsx("span",{className:"bread-badge",children:"Base (100%)"})]}),i.jsxs("div",{className:"bread-scroll-wrapper",children:[i.jsxs("div",{className:"bread-grid-header",children:[i.jsx("span",{})," ",i.jsx("span",{children:""}),i.jsx("span",{children:" (g)"}),i.jsx("span",{className:"text-center",children:"%"}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsx("div",{className:"bread-grid-body",children:i.jsx(Ds,{sensors:L,collisionDetection:oh,onDragEnd:G,id:"flours-dnd",children:i.jsx(Fi,{items:r.flours||[],strategy:Qo,children:(r.flours||[]).map((z,O)=>i.jsx(oE,{id:z.id,index:O,item:z,onChange:A,onRemove:D,onSuggestionSelect:T,activeSuggestion:u,filteredSuggestions:f,setActiveSuggestion:d,setFilteredSuggestions:p,handleSuggestionSelect:T,allIngredientNames:c,calculatePercentage:j,floursLength:(r.flours||[]).length,onOpenConversion:()=>y({isOpen:!0,type:"flour",index:O})},z.id))})})})]}),i.jsx(se,{type:"button",variant:"secondary",size:"sm",onClick:C,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),i.jsxs(_t,{className:"mb-md bread-card",style:{position:"relative",zIndex:5},children:[i.jsxs("div",{className:"bread-header",children:[i.jsx("h3",{children:""}),i.jsx("span",{className:"bread-subtitle",children:"Water, Salt, Yeast, etc."})]}),i.jsxs("div",{className:"bread-scroll-wrapper",children:[i.jsxs("div",{className:"bread-grid-header",children:[i.jsx("span",{})," ",i.jsx("span",{children:""}),i.jsx("span",{children:" (g)"}),i.jsx("span",{className:"text-center",children:"%"}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsx("div",{className:"bread-grid-body",children:i.jsx(Ds,{sensors:L,collisionDetection:oh,onDragEnd:G,id:"breadIngredients-dnd",children:i.jsx(Fi,{items:r.breadIngredients||[],strategy:Qo,children:(r.breadIngredients||[]).map((z,O)=>i.jsx(cE,{id:z.id,index:O,item:z,onChange:N,onRemove:U,onSuggestionSelect:T,activeSuggestion:u,filteredSuggestions:f,setActiveSuggestion:d,setFilteredSuggestions:p,handleSuggestionSelect:T,allIngredientNames:c,calculatePercentage:j,onOpenConversion:()=>y({isOpen:!0,type:"ingredient",index:O})},z.id))})})})]}),i.jsx(se,{type:"button",variant:"secondary",size:"sm",onClick:R,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),i.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:i.jsx(se,{variant:"secondary",onClick:()=>window.history.back(),style:{width:"120px"},children:""})}),i.jsx(j0,{isOpen:m.isOpen,onClose:()=>y({isOpen:!1,type:null,index:null}),onApply:q,ingredientName:V?.name||"",currentCost:V?.purchaseCost,currentQuantity:V?.quantity,unit:V?.unit||"g",initialPurchaseCost:V?.purchase_cost,initialContentAmount:V?.content_amount})]})},oE=({id:r,index:t,item:s,onChange:l,onRemove:c,onSuggestionSelect:u,activeSuggestion:d,filteredSuggestions:f,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:y,allIngredientNames:v,calculatePercentage:b,floursLength:S,onOpenConversion:_})=>{const{attributes:j,listeners:A,setNodeRef:N,transform:C,transition:R,isDragging:D}=fl({id:r}),U={transform:Kn.Transform.toString(C),transition:R,opacity:D?.5:1,position:"relative",zIndex:D?999:"auto",backgroundColor:"white"};return i.jsxs("div",{ref:N,style:U,className:"bread-row",children:[i.jsx("div",{...j,...A,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),i.jsxs("div",{style:{position:"relative",zIndex:d?.type==="flour"&&d?.index===t?1e4:"auto"},children:[i.jsx(Ye,{value:s.name,onChange:T=>{if(l(t,"name",T.target.value),T.target.value.trim()){const L=T.target.value.toLowerCase(),G=v.filter(q=>q.toLowerCase().includes(L));m(G.slice(0,10)),p({type:"flour",index:t})}else m([]),p(null)},onFocus:()=>{if(s.name.trim()){const T=s.name.toLowerCase(),L=v.filter(G=>G.toLowerCase().includes(T));m(L.slice(0,10)),p({type:"flour",index:t})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),d&&d.type==="flour"&&d.index===t&&f.length>0&&i.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:f.map((T,L)=>i.jsx("li",{onMouseDown:()=>y("flour",t,T),style:{padding:"8px 12px",cursor:"pointer",borderBottom:L<f.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:G=>G.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:G=>G.currentTarget.style.backgroundColor="white",children:T},L))})]}),i.jsx(Ye,{type:"number",step:"any",value:s.quantity,onChange:T=>l(t,"quantity",T.target.value),placeholder:"0",className:"bread-input qty"}),i.jsxs("div",{className:"bread-percent",children:[b(s.quantity),"%"]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Ye,{type:"number",step:"any",value:s.purchaseCost||"",onChange:T=>l(t,"purchaseCost",T.target.value),placeholder:s.purchaseCostRef?`Ref: ${s.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:s.purchaseCostRef?`: ${s.purchaseCostRef}`:"No data"}),i.jsx("button",{type:"button",onClick:_,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",s.purchaseCostRef," ",s.vendorRef&&`(${s.vendorRef})`]})]}),i.jsx(Ye,{type:"number",step:"any",value:s.cost||"",onChange:T=>l(t,"cost",T.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:T=>l(t,"isAlcohol",T.target.checked),title:" (10%)"})}),S>1&&i.jsx("button",{type:"button",className:"bread-remove",onClick:()=>c(t),children:""})]})},cE=({id:r,index:t,item:s,onChange:l,onRemove:c,onSuggestionSelect:u,activeSuggestion:d,filteredSuggestions:f,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:y,allIngredientNames:v,calculatePercentage:b,onOpenConversion:S})=>{const{attributes:_,listeners:j,setNodeRef:A,transform:N,transition:C,isDragging:R}=fl({id:r}),D={transform:Kn.Transform.toString(N),transition:C,opacity:R?.5:1,position:"relative",zIndex:R?999:"auto",backgroundColor:"white"};return i.jsxs("div",{ref:A,style:D,className:"bread-row",children:[i.jsx("div",{..._,...j,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),i.jsxs("div",{style:{position:"relative",zIndex:d?.type==="ingredient"&&d?.index===t?1e4:"auto"},children:[i.jsx(Ye,{value:s.name,onChange:U=>{if(l(t,"name",U.target.value),U.target.value.trim()){const T=U.target.value.toLowerCase(),L=v.filter(G=>G.toLowerCase().includes(T));m(L.slice(0,10)),p({type:"ingredient",index:t})}else m([]),p(null)},onFocus:()=>{if(s.name.trim()){const U=s.name.toLowerCase(),T=v.filter(L=>L.toLowerCase().includes(U));m(T.slice(0,10)),p({type:"ingredient",index:t})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),d&&d.type==="ingredient"&&d.index===t&&f.length>0&&i.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:f.map((U,T)=>i.jsx("li",{onMouseDown:()=>y("ingredient",t,U),style:{padding:"8px 12px",cursor:"pointer",borderBottom:T<f.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:L=>L.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:L=>L.currentTarget.style.backgroundColor="white",children:U},T))})]}),i.jsx(Ye,{type:"number",step:"any",value:s.quantity,onChange:U=>l(t,"quantity",U.target.value),placeholder:"0",className:"bread-input qty"}),i.jsxs("div",{className:"bread-percent",children:[b(s.quantity),"%"]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Ye,{type:"number",step:"any",value:s.purchaseCost||"",onChange:U=>l(t,"purchaseCost",U.target.value),placeholder:s.purchaseCostRef?`Ref: ${s.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:s.purchaseCostRef?`: ${s.purchaseCostRef}`:"No data"}),i.jsx("button",{type:"button",onClick:S,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",s.purchaseCostRef," ",s.vendorRef&&`(${s.vendorRef})`]})]}),i.jsx(Ye,{type:"number",step:"any",value:s.cost||"",onChange:U=>l(t,"cost",U.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:U=>l(t,"isAlcohol",U.target.checked),title:" (10%)"})}),i.jsx("button",{type:"button",className:"bread-remove",onClick:()=>c(t),children:""})]})},uE={async search(r){if(!r||r.trim().length===0)return[];const t=r.toLowerCase().trim();try{const[s,l]=await Promise.all([nr.getPriceListArray(),ln.getAllConversions()]),c=Array.from(l.values()).filter(m=>m.ingredientName.toLowerCase().includes(t)).map(m=>({name:m.ingredientName,price:m.lastPrice,size:m.packetSize,unit:m.packetUnit,source:"manual",displaySource:" "})),u=s.filter(m=>m.name&&m.name.toLowerCase().includes(t)).map(m=>({name:m.name,price:m.price,size:null,unit:m.unit,source:"csv",displaySource:" CSV"})),d=new Set(c.map(m=>m.name)),f=u.filter(m=>!d.has(m.name));return[...c,...f].sort((m,y)=>{const v=m.name.toLowerCase(),b=y.name.toLowerCase();return v===t&&b!==t?-1:b===t&&v!==t?1:v.startsWith(t)&&!b.startsWith(t)?-1:b.startsWith(t)&&!v.startsWith(t)?1:v.localeCompare(b,"ja")})}catch(s){return console.error("Error searching ingredients:",s),[]}}},dE=({value:r,onChange:t,placeholder:s,disabled:l,onSelect:c})=>{const[u,d]=w.useState([]),[f,p]=w.useState(!1),[m,y]=w.useState(-1),v=w.useRef(null),b=w.useRef(null),[S,_]=w.useState({top:0,left:0,width:0});w.useEffect(()=>{const R=T=>{v.current&&!v.current.contains(T.target)&&b.current&&!b.current.contains(T.target)&&p(!1)},D=T=>{b.current&&b.current.contains(T.target)||p(!1)},U=()=>{f&&j()};return document.addEventListener("mousedown",R),window.addEventListener("scroll",D,{capture:!0}),window.addEventListener("resize",U),()=>{document.removeEventListener("mousedown",R),window.removeEventListener("scroll",D,{capture:!0}),window.removeEventListener("resize",U)}},[f]);const j=()=>{if(v.current){const R=v.current.getBoundingClientRect();_({top:R.bottom,left:R.left,width:R.width})}};w.useEffect(()=>{f&&j()},[f,u]);const A=async R=>{const D=R.target.value;if(t(R),D.length>0){const U=await uE.search(D);d(U),p(U.length>0),y(-1)}else p(!1)},N=R=>{const D={target:{value:R.name}};t(D),p(!1),c&&c(R)},C=R=>{f&&(R.key==="ArrowDown"?(R.preventDefault(),y(D=>D<u.length-1?D+1:D)):R.key==="ArrowUp"?(R.preventDefault(),y(D=>D>0?D-1:-1)):R.key==="Enter"?m>=0&&(R.preventDefault(),N(u[m])):R.key==="Escape"&&p(!1))};return i.jsxs("div",{className:"autocomplete-wrapper",ref:v,children:[i.jsx("input",{type:"text",className:"input-field autocomplete-input",value:r,onChange:A,onKeyDown:C,onFocus:()=>{r&&r.length>0&&(j(),p(!0))},placeholder:s,disabled:l}),f&&ka.createPortal(i.jsx("ul",{className:"suggestions-list",ref:b,style:{position:"fixed",top:S.top,left:S.left,width:S.width,zIndex:9999,marginTop:"4px"},children:u.map((R,D)=>i.jsxs("li",{className:`suggestion-item ${D===m?"selected":""}`,onClick:()=>N(R),onMouseEnter:()=>y(D),children:[i.jsxs("div",{className:"suggestion-main",children:[i.jsx("span",{className:"suggestion-name",children:R.name}),i.jsx("span",{className:"suggestion-source",children:R.displaySource})]}),i.jsxs("div",{className:"suggestion-details",children:[R.price&&`${Number(R.price).toLocaleString()}`,R.size&&` / ${R.size}${R.unit}`,!R.size&&R.unit&&` / ${R.unit}`]})]},`${R.source}-${D}`))}),document.body)]})},hE=({id:r,index:t,item:s,groupId:l,onChange:c,onRemove:u,handleSuggestionSelect:d,onOpenConversion:f})=>{const{attributes:p,listeners:m,setNodeRef:y,transform:v,transition:b,isDragging:S}=fl({id:s.id,data:{groupId:l,index:t}}),_={transform:Kn.Translate.toString(v),transition:b,opacity:S?.3:1,position:"relative",zIndex:S?999:"auto"};return i.jsxs("div",{ref:y,style:_,className:"form-ingredient-row",children:[i.jsx("div",{...p,...m,className:"ingredient-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",touchAction:"none"},children:""}),i.jsx("div",{className:"ingredient-name",children:i.jsx(dE,{value:s.name,onChange:j=>c(l,t,"name",j.target.value),onSelect:j=>d(l,t,j),placeholder:""})}),i.jsx("div",{className:"ingredient-qty",children:i.jsx(Ye,{value:s.quantity,onChange:j=>c(l,t,"quantity",j.target.value),placeholder:"0",style:{width:"100%"}})}),i.jsx("div",{className:"ingredient-unit",children:i.jsx(Ye,{value:s.unit,onChange:j=>c(l,t,"unit",j.target.value),placeholder:"",style:{width:"100%"}})}),i.jsxs("div",{className:"ingredient-cost",style:{position:"relative"},children:[i.jsx(Ye,{type:"number",value:s.purchaseCost,onChange:j=>c(l,t,"purchaseCost",j.target.value),step:"0.01",placeholder:s.purchaseCostRef?"Ref":"",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},title:s.purchaseCostRef?`: ${s.purchaseCostRef}${s.vendorRef?` (${s.vendorRef})`:""}`:"No data"}),i.jsx("button",{type:"button",onClick:f,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all",textAlign:"center"},children:["",s.purchaseCostRef]})]}),i.jsx("div",{className:"ingredient-cost",children:i.jsx(Ye,{type:"number",step:"0.01",value:s.cost,onChange:j=>c(l,t,"cost",j.target.value),placeholder:"",style:{width:"100%"}})}),i.jsx("div",{className:"ingredient-alcohol",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:j=>c(l,t,"isAlcohol",j.target.checked),title:" (10%)"})}),i.jsx("div",{className:"remove-button-cell",children:i.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(l,t),children:""})})]})},fE=({section:r,sections:t,onSectionChange:s,onRemoveSection:l,children:c})=>{const{setNodeRef:u}=hl({id:r.id});return i.jsxs(_t,{className:"ingredient-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[i.jsx(Ye,{value:r.name,onChange:d=>s(r.id,d.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:t.length>1&&i.jsx("button",{type:"button",onClick:()=>l(r.id),className:"group-delete-btn",children:""})})]}),i.jsxs("div",{className:"recipe-list-header",style:{marginBottom:"0.5rem"},children:[i.jsx("span",{}),i.jsx("span",{children:""}),i.jsx("span",{children:""}),i.jsx("span",{children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsxs("div",{ref:u,className:"section-ingredients-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[c,r.items.length===0&&i.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},pE=({formData:r,setFormData:t,priceList:s})=>{Array.from(s.keys());const[l,c]=w.useState(new Map);w.useEffect(()=>{ln.getAllConversions().then(D=>c(D))},[]);const[u,d]=w.useState({isOpen:!1,groupId:null,index:null});w.useEffect(()=>{if(!r.ingredientSections){const D=r.ingredientGroups||[{id:"default",name:""}],U=r.ingredients||[],T=D.map(q=>({id:q.id,name:q.name,items:U.filter(V=>q.id==="default"&&!V.groupId?!0:V.groupId===q.id)})),L=new Set(T.flatMap(q=>q.items.map(V=>V.id))),G=U.filter(q=>!L.has(q.id));G.length>0&&(T.length>0?T[0].items.push(...G):T.push({id:"default",name:"",items:G})),T.length===0&&T.push({id:crypto.randomUUID(),name:"",items:[]}),t(q=>({...q,ingredientSections:T}))}},[r.ingredients,r.ingredientGroups,r.ingredientSections,t]);const f=r.ingredientSections||[],p=zs(en(cl,{activationConstraint:{distance:10}}),en(ul,{activationConstraint:{delay:250,tolerance:5}}),en(Us,{coordinateGetter:pl})),m=({active:D,over:U})=>{if(!U)return;const T=D.id,L=U.id,G=f.find(V=>V.items.some(z=>z.id===T)),q=f.find(V=>V.items.some(z=>z.id===L))||f.find(V=>V.id===L);!G||!q||G===q||t(V=>{const z=G.items,O=q.items,F=z.findIndex(k=>k.id===T),I=O.findIndex(k=>k.id===L);let K;if(L===q.id)K=O.length+1;else{const $=U&&D.rect.current.translated&&D.rect.current.translated.top>U.rect.top+U.rect.height?1:0;K=I>=0?I+$:O.length+1}return{...V,ingredientSections:V.ingredientSections.map(k=>k.id===G.id?{...k,items:z.filter($=>$.id!==T)}:k.id===q.id?{...k,items:[...O.slice(0,K),z[F],...O.slice(K,O.length)]}:k)}})},y=({active:D,over:U})=>{if(!U)return;const T=D.id,L=U.id,G=f.find(V=>V.items.some(z=>z.id===T)),q=f.find(V=>V.items.some(z=>z.id===L))||f.find(V=>V.id===L);if(G&&q&&G===q){const V=G.items.findIndex(O=>O.id===T),z=q.items.findIndex(O=>O.id===L);V!==z&&t(O=>({...O,ingredientSections:O.ingredientSections.map(F=>F.id===G.id?{...F,items:qa(F.items,V,z)}:F)}))}},v=(D,U,T,L)=>{const{groupId:G,index:q}=u;G!==null&&q!==null&&t(V=>{const z=V.ingredientSections.map(O=>{if(O.id!==G)return O;const F=[...O.items],I={...F[q],purchaseCost:D,unit:U,purchase_cost:T,content_amount:L},K=parseFloat(I.quantity),k=parseFloat(D);if(!isNaN(K)&&!isNaN(k)){let $=0;const X=U?U.trim().toLowerCase():"";X==="g"||X===""?$=K/1e3*k:$=K*k,I.cost=Math.round($*100)/100}return F[q]=I,{...O,items:F}});return ln.getAllConversions().then(O=>c(O)),{...V,ingredientSections:z}})},b=u.isOpen&&u.groupId!==null&&u.index!==null?f.find(D=>D.id===u.groupId)?.items[u.index]:null,S=(D,U,T,L)=>{t(G=>{const q=G.ingredientSections.map(V=>{if(V.id!==D)return V;const z=[...V.items],O={...z[U],[T]:L};if(z[U]=O,["quantity","purchaseCost","unit","name","isAlcohol"].includes(T)){const F=parseFloat(O.quantity),I=parseFloat(O.purchaseCost);if(!isNaN(F)&&!isNaN(I)){let K=0;const k=O.unit?O.unit.trim().toLowerCase():"";k==="g"||k===""?K=F/1e3*I:K=F*I;const $=Math.round(K*100)/100;$!==O.cost&&(O.cost=$,z[U]=O)}}if(T==="name"){const F=s.get(L);if(F){const I=typeof F=="object"?F.price:F,K=typeof F=="object"?F.vendor:null,k=typeof F=="object"?F.unit:null,$=typeof F=="object"?F.size:null;O.purchaseCostRef=I,O.vendorRef=K;const X=l.get(L);if(X&&X.packetSize){let M=0;["g","ml","cc",""].includes(X.packetUnit)?(M=I/X.packetSize*1e3,O.unit="g"):["kg","l",""].includes(X.packetUnit.toLowerCase())?(M=I/X.packetSize,O.unit="g"):(M=I/X.packetSize,O.unit=X.packetUnit),O.purchaseCost=Math.round(M*100)/100}else{let M=I,P=k;$&&$>1&&(["g","ml","cc",""].includes(k)?(M=I/$*1e3,P="g"):["kg","l",""].includes(k?k.toLowerCase():"")?(M=I/$,P="g"):M=I/$),O.purchaseCost||(O.purchaseCost=Math.round(M*100)/100),!O.unit&&P&&(O.unit=P)}const ue=parseFloat(O.quantity),de=parseFloat(O.purchaseCost);if(!isNaN(ue)&&!isNaN(de)){const M=O.unit?O.unit.trim().toLowerCase():"";let P=0;M==="g"||M===""?P=ue/1e3*de:P=ue*de,O.cost=Math.round(P*100)/100}}else O.purchaseCostRef=null,O.vendorRef=null;z[U]=O}return{...V,items:z}});return{...G,ingredientSections:q}})},_=(D,U,T)=>{t(L=>{const G=L.ingredientSections.map(q=>{if(q.id!==D)return q;const V=[...q.items],z={...V[U]};if(z.name=T.name,T.price)if(z.purchaseCostRef=T.price,z.vendorRef=T.source==="csv"?"CSV":"Master",T.source==="manual")if(T.size&&T.size>0)if(["g","ml","cc",""].includes(T.unit)){const I=T.price/T.size*1e3;z.purchaseCost=Math.round(I*100)/100,z.unit="g"}else if(["kg","l",""].includes(T.unit?T.unit.toLowerCase():"")){const I=T.price/T.size;z.purchaseCost=Math.round(I*100)/100,z.unit="g"}else{const I=T.price/T.size;z.purchaseCost=Math.round(I*100)/100,z.unit=T.unit}else z.purchaseCost=T.price,z.unit=T.unit;else{const I=l.get(T.name);if(I&&I.packetSize){let K=0;["g","ml","cc",""].includes(I.packetUnit)?(K=T.price/I.packetSize*1e3,z.unit="g"):["kg","l",""].includes(I.packetUnit.toLowerCase())?(K=T.price/I.packetSize,z.unit="g"):(K=T.price/I.packetSize,z.unit=I.packetUnit),z.purchaseCost=Math.round(K*100)/100}else z.purchaseCost=T.price,z.unit=T.unit}const O=parseFloat(z.quantity),F=parseFloat(z.purchaseCost);if(!isNaN(O)&&!isNaN(F)){const I=z.unit?z.unit.trim().toLowerCase():"";let K=0;I==="g"||I===""?K=O/1e3*F:K=O*F,z.cost=Math.round(K*100)/100}return V[U]=z,{...q,items:V}});return{...L,ingredientSections:G}})},j=(D,U)=>{t(T=>({...T,ingredientSections:T.ingredientSections.map(L=>L.id===D?{...L,items:L.items.filter((G,q)=>q!==U)}:L)}))},A=D=>{const U={id:crypto.randomUUID(),name:"",quantity:"",unit:"",cost:"",purchaseCost:"",isAlcohol:!1};t(T=>({...T,ingredientSections:T.ingredientSections.map(L=>L.id===D?{...L,items:[...L.items,U]}:L)}))},N=()=>{t(D=>({...D,ingredientSections:[...D.ingredientSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},C=D=>{t(U=>({...U,ingredientSections:U.ingredientSections.filter(T=>T.id!==D)}))},R=(D,U)=>{t(T=>({...T,ingredientSections:T.ingredientSections.map(L=>L.id===D?{...L,name:U}:L)}))};return i.jsxs(Ds,{sensors:p,collisionDetection:Ov,onDragOver:m,onDragEnd:y,children:[i.jsxs("div",{className:"recipe-form-ingredients",children:[f.map(D=>i.jsx(Fi,{id:D.id,items:D.items.map(U=>U.id),strategy:Qo,children:i.jsxs(fE,{section:D,sections:f,onSectionChange:R,onRemoveSection:C,children:[D.items.map((U,T)=>i.jsx(hE,{id:U.id,index:T,item:U,groupId:D.id,onChange:S,onRemove:j,handleSuggestionSelect:_,onOpenConversion:()=>d({isOpen:!0,groupId:D.id,index:T})},U.id)),i.jsx(se,{type:"button",variant:"ghost",onClick:()=>A(D.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},D.id)),i.jsx(se,{type:"button",variant:"secondary",onClick:N,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),i.jsx(Fv,{dropAnimation:{sideEffects:Lh({styles:{active:{opacity:"0.5"}}})},children:null}),i.jsx(j0,{isOpen:u.isOpen,onClose:()=>d({isOpen:!1,groupId:null,index:null}),onApply:v,ingredientName:b?.name||"",currentCost:b?.purchaseCost,currentQuantity:b?.quantity,unit:b?.unit||"g",initialPurchaseCost:b?.purchase_cost,initialContentAmount:b?.content_amount})]})},gE=({id:r,index:t,item:s,groupId:l,onChange:c,onRemove:u})=>{const{attributes:d,listeners:f,setNodeRef:p,transform:m,transition:y,isDragging:v}=fl({id:s.id,data:{groupId:l,index:t}}),b={transform:Kn.Translate.toString(m),transition:y,opacity:v?.3:1,position:"relative",zIndex:v?999:"auto"};return i.jsxs("div",{ref:p,style:{...b,display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"flex-start"},className:"step-row",children:[i.jsx("div",{...d,...f,className:"step-drag-handle",style:{cursor:"grab",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",alignSelf:"stretch",touchAction:"none"},children:""}),i.jsx("div",{className:"step-count",style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",borderRadius:"50%",background:"#eee",fontSize:"0.8rem",fontWeight:"bold",marginTop:"8px"},children:t+1}),i.jsx("div",{style:{flex:1},children:i.jsx(Ye,{textarea:!0,value:s.text,onChange:S=>c(l,t,S.target.value),placeholder:` ${t+1}...`,style:{minHeight:"60px",width:"100%"}})}),i.jsx("div",{className:"remove-button-cell",children:i.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(l,t),title:"",children:""})})]})},mE=({section:r,sections:t,onSectionChange:s,onRemoveSection:l,children:c})=>{const{setNodeRef:u}=hl({id:r.id});return i.jsxs(_t,{className:"step-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[i.jsx(Ye,{value:r.name,onChange:d=>s(r.id,d.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:t.length>1&&i.jsx("button",{type:"button",onClick:()=>l(r.id),className:"group-delete-btn",children:""})})]}),i.jsxs("div",{ref:u,className:"section-steps-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[c,r.items.length===0&&i.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},yE=({formData:r,setFormData:t})=>{w.useEffect(()=>{if(!r.stepSections){const b=r.stepGroups||[{id:"default",name:""}],_=(r.steps||[]||[]).map(C=>typeof C=="string"?{id:crypto.randomUUID(),text:C}:C),j=b.map(C=>({id:C.id,name:C.name,items:_.filter(R=>C.id==="default"&&!R.groupId?!0:R.groupId===C.id)})),A=new Set(j.flatMap(C=>C.items.map(R=>R.id))),N=_.filter(C=>!A.has(C.id));N.length>0&&(j.length>0?j[0].items.push(...N):j.push({id:"default",name:"",items:N})),j.length===0&&j.push({id:crypto.randomUUID(),name:"",items:[]}),t(C=>({...C,stepSections:j}))}},[r.steps,r.stepGroups,r.stepSections,t]);const s=r.stepSections||[],l=zs(en(cl,{activationConstraint:{distance:10}}),en(ul,{activationConstraint:{delay:250,tolerance:5}}),en(Us,{coordinateGetter:pl})),c=({active:b,over:S})=>{if(!S)return;const _=b.id,j=S.id,A=s.find(C=>C.items.some(R=>R.id===_)),N=s.find(C=>C.items.some(R=>R.id===j))||s.find(C=>C.id===j);!A||!N||A===N||t(C=>{const R=A.items,D=N.items,U=R.findIndex(G=>G.id===_),T=D.findIndex(G=>G.id===j);let L;if(j===N.id)L=D.length+1;else{const q=S&&b.rect.current.translated&&b.rect.current.translated.top>S.rect.top+S.rect.height?1:0;L=T>=0?T+q:D.length+1}return{...C,stepSections:C.stepSections.map(G=>G.id===A.id?{...G,items:R.filter(q=>q.id!==_)}:G.id===N.id?{...G,items:[...D.slice(0,L),R[U],...D.slice(L,D.length)]}:G)}})},u=({active:b,over:S})=>{if(!S)return;const _=b.id,j=S.id,A=s.find(C=>C.items.some(R=>R.id===_)),N=s.find(C=>C.items.some(R=>R.id===j))||s.find(C=>C.id===j);if(A&&N&&A===N){const C=A.items.findIndex(D=>D.id===_),R=N.items.findIndex(D=>D.id===j);C!==R&&t(D=>({...D,stepSections:D.stepSections.map(U=>U.id===A.id?{...U,items:qa(U.items,C,R)}:U)}))}},d=(b,S,_)=>{t(j=>({...j,stepSections:j.stepSections.map(A=>{if(A.id!==b)return A;const N=[...A.items];return N[S]={...N[S],text:_},{...A,items:N}})}))},f=(b,S)=>{t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,items:j.items.filter((A,N)=>N!==S)}:j)}))},p=b=>{const S={id:crypto.randomUUID(),text:""};t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,items:[...j.items,S]}:j)}))},m=()=>{t(b=>({...b,stepSections:[...b.stepSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},y=b=>{t(S=>({...S,stepSections:S.stepSections.filter(_=>_.id!==b)}))},v=(b,S)=>{t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,name:S}:j)}))};return i.jsxs(Ds,{sensors:l,collisionDetection:Ov,onDragOver:c,onDragEnd:u,children:[i.jsxs("div",{className:"recipe-form-steps",children:[s.map(b=>i.jsx(Fi,{id:b.id,items:b.items.map(S=>S.id),strategy:Qo,children:i.jsxs(mE,{section:b,sections:s,onSectionChange:v,onRemoveSection:y,children:[b.items.map((S,_)=>i.jsx(gE,{id:S.id,index:_,item:S,groupId:b.id,onChange:d,onRemove:f},S.id)),i.jsx(se,{type:"button",variant:"ghost",onClick:()=>p(b.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},b.id)),i.jsx(se,{type:"button",variant:"secondary",onClick:m,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),i.jsx(Fv,{dropAnimation:{sideEffects:Lh({styles:{active:{opacity:"0.5"}}})},children:null})]})},_0=({onClose:r,onImport:t,initialMode:s="url"})=>{const[l,c]=w.useState(s),[u,d]=w.useState(null),[f,p]=w.useState(""),[m,y]=w.useState(""),[v,b]=w.useState(null),[S,_]=w.useState(null),[j,A]=w.useState(!1),[N,C]=w.useState(null),[R,D]=w.useState(!1),U=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?D(!0):I.type==="dragleave"&&D(!1)},T=I=>{if(I.preventDefault(),I.stopPropagation(),D(!1),I.dataTransfer.files&&I.dataTransfer.files[0]){const K=I.dataTransfer.files[0];K.type.startsWith("image/")&&(b(K),_(URL.createObjectURL(K)))}},L=I=>/[---]/.test(I||""),G=async I=>{try{const K=[];K.push(I.name||""),K.push(I.description||"");const k=[];Array.isArray(I.ingredients)&&I.ingredients.forEach((ie,pe)=>{ie.name&&(K.push(ie.name),k.push(pe))});const $=[];if(Array.isArray(I.steps)&&I.steps.forEach((ie,pe)=>{K.push(ie),$.push(pe)}),K.length===0)return I;const{data:X,error:ue}=await ye.functions.invoke("translate",{body:{text:K,target_lang:"JA"}});if(ue)throw ue;const de=X.translations.map(ie=>ie.text);let M=0;const P={...I};return P.name=de[M++]||P.name,P.description=de[M++]||P.description,k.length>0&&(P.ingredients=P.ingredients.map((ie,pe)=>{const xe=k.indexOf(pe);return xe!==-1?{...ie,name:de[M+xe]}:ie}),M+=k.length),$.length>0&&(P.steps=P.steps.map((ie,pe)=>{const xe=$.indexOf(pe);return xe!==-1?de[M+xe]:ie})),P}catch(K){return console.error("Translation failed:",K),alert(""),I}},[q,V]=w.useState([]),z=async()=>{A(!0),C(null),V([]);try{let I,K="";if(l==="url"){if(!m)return;K=m;const{data:X,error:ue}=await ye.functions.invoke("scrape-recipe",{body:{url:m}});if(ue)throw ue;I=X}else{if(!v)return;const X=new FormData;X.append("image",v);const{data:{session:ue}}=await ye.auth.getSession(),de=`${ye.supabaseUrl}/functions/v1/analyze-image`,M={Authorization:`Bearer ${ue?.access_token||ye.supabaseKey}`},P=await fetch(de,{method:"POST",headers:M,body:X});if(!P.ok)throw new Error(`Server Error: ${P.statusText}`);const ie=P.body.getReader(),pe=new TextDecoder;let xe=null,ce="";for(;;){const{done:Oe,value:Be}=await ie.read();if(Oe)break;ce+=pe.decode(Be,{stream:!0});const ke=ce.split(`

`);ce=ke.pop()||"";for(const De of ke){const vt=De.trim();if(vt.startsWith("data: "))try{const tt=JSON.parse(vt.slice(6));if(tt.type==="log")V(We=>[...We,tt.message]);else if(tt.type==="result")xe=tt;else if(tt.type==="error")throw new Error(tt.message)}catch(tt){console.warn("Failed to parse SSE event",tt)}}}if(!xe)throw new Error("");I=xe}if(I.error)throw new Error(I.error);if(!I.recipe)throw new Error("No recipe found");let k=I.recipe;k.name=k.name||k.title||"",k.recipeYield=k.recipeYield||k.servings||"",k.description=k.description||"";const $=(k.name||"")+(k.steps?k.steps.slice(0,3).join(""):"");if($&&!L($)){d(k),p(K),c("confirm-translation"),A(!1);return}t(k,K),r()}catch(I){console.error("Import failed details:",I);const K=I.message||"Import failed. Please try again.";C(K)}finally{l!=="confirm-translation"&&A(!1)}},O=async I=>{A(!0);try{let K=u;I&&(K=await G(u)),t(K,f),r()}catch(K){console.error("Translation flow error:",K),C("Translation failed. Importing original."),t(u,f),r()}finally{A(!1)}},F=I=>{const K=I.target.files[0];K&&(b(K),_(URL.createObjectURL(K)))};return i.jsxs("div",{className:"modal-overlay fade-in",children:[j&&i.jsxs("div",{className:"loading-overlay",children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"..."}),q.length>0&&i.jsx("div",{className:"progress-log-container",children:i.jsxs("div",{className:"progress-log",children:[q.map((I,K)=>i.jsx("div",{className:"log-entry",children:i.jsx("span",{className:"log-message",children:I})},K)),i.jsx("div",{ref:I=>I?.scrollIntoView({behavior:"smooth"})})]})})]}),i.jsxs(_t,{className:"import-modal-card",children:[i.jsx("h3",{className:"modal-title",children:l==="confirm-translation"?"":""}),l==="confirm-translation"?i.jsxs("div",{className:"translation-confirm-content",children:[i.jsxs("div",{style:{textAlign:"center",padding:"1rem 0",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"  "}),i.jsx("p",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:""}),i.jsxs("p",{style:{fontSize:"0.9rem",color:"#666"},children:["",i.jsx("br",{}),i.jsx("span",{style:{fontSize:"0.8rem"},children:"(DeepL)"})]})]}),i.jsxs("div",{className:"modal-actions",style:{flexDirection:"column",gap:"8px"},children:[i.jsx(se,{type:"button",variant:"primary",onClick:()=>O(!0),isLoading:j,style:{width:"100%"},children:""}),i.jsx(se,{type:"button",variant:"secondary",onClick:()=>O(!1),disabled:j,style:{width:"100%"},children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"import-mode-tabs",children:[i.jsx("button",{type:"button",onClick:()=>c("url"),className:`tab-btn tab-import-web ${l==="url"?"active":""}`,children:" Web URL"}),i.jsx("button",{type:"button",onClick:()=>c("image"),className:`tab-btn tab-import-image ${l==="image"?"active":""}`,children:"  (Best Effort)"})]}),l==="url"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"URL"}),i.jsx("input",{type:"url",placeholder:"https://...",value:m,onChange:I=>y(I.target.value),className:"import-url-input",autoFocus:!0})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{children:""}),i.jsxs("div",{className:"image-upload-wrapper",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:F,id:"recipe-image-upload",className:"image-upload-input"}),i.jsx("label",{htmlFor:"recipe-image-upload",onDragEnter:U,onDragLeave:U,onDragOver:U,onDrop:T,className:`image-upload-label ${R?"drag-active":""}`,children:S?i.jsx("img",{src:S,alt:"Preview",className:"image-upload-preview"}):R?"":""})]})]}),N&&i.jsx("p",{className:"error-text",children:N}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:r,disabled:j,children:""}),i.jsx(se,{type:"button",variant:"primary",onClick:z,isLoading:j,disabled:l==="url"?!m:!v,children:""})]})]})]})]})},tv=({onSave:r,onCancel:t,initialData:s})=>{const l=s||{},[c,u]=w.useState(null),[d,f]=w.useState(new Map);w.useMemo(()=>Array.from(d.keys()),[d]);const[p,m]=w.useState(null),[y,v]=w.useState([]);Ce.useEffect(()=>{(async()=>{const F=await nr.fetchPriceList();f(F)})()},[]);const b=w.useMemo(()=>{const O=l.steps||[""];let F=l.stepGroups||[];const I=O.some(k=>typeof k=="object"&&k.group);if(F.length===0&&I){const k=new Map;O.forEach($=>{typeof $=="object"&&$.group&&!k.has($.group)&&k.set($.group,crypto.randomUUID())}),F=Array.from(k.entries()).map(([$,X])=>({id:X,name:$}))}return{steps:O.map(k=>{const $=typeof k=="string"?k:k.text||"",X=typeof k=="object"&&k.id?k.id:crypto.randomUUID();let ue=typeof k=="object"?k.groupId:void 0;const de=typeof k=="object"?k.group:void 0;if(!ue&&de&&F.length>0){const M=F.find(P=>P.name===de);M&&(ue=M.id)}return{id:X,text:$,groupId:ue}}),stepGroups:F}},[l]),S=b.steps,_=b.stepGroups,j=w.useMemo(()=>{const O=l.ingredients||[{name:"",quantity:"",unit:"",cost:"",purchaseCost:""}];let F=l.ingredientGroups||[];if(F.length===0&&O.some(K=>K.group)){const K=new Map;O.forEach(k=>{k.group&&!K.has(k.group)&&K.set(k.group,crypto.randomUUID())}),F=Array.from(K.entries()).map(([k,$])=>({id:$,name:k})),K.size>0&&O.some(k=>!k.group)}return{ingredients:O.map(K=>{const k=typeof K=="string"?{name:K,quantity:"",unit:"",cost:"",purchaseCost:""}:{...K,cost:K.cost||"",purchaseCost:K.purchaseCost||""};let $=k.groupId;if(!$&&k.group&&F.length>0){const X=F.find(ue=>ue.name===k.group);X&&($=X.id)}return{...k,id:k.id||crypto.randomUUID(),groupId:$}}),ingredientGroups:F}},[l]),A=j.ingredients,N=j.ingredientGroups,[C,R]=w.useState({title:l.title||"",description:l.description||"",image:l.image||"",imageFile:null,storeName:l.storeName||"",servings:l.servings||"",ingredients:A,ingredientGroups:N,steps:S,stepGroups:_,tags:l.tags||[""],course:l.course||"",category:l.category||"",type:l.type||"normal",flours:l.flours||[],breadIngredients:l.breadIngredients||[],sourceUrl:l.sourceUrl||""}),[D,U]=w.useState(!1);zs(en(cl,{activationConstraint:{distance:10}}),en(ul,{activationConstraint:{delay:1e3,tolerance:5}}),en(Us,{coordinateGetter:pl}));const T=(O,F="")=>{const I=new Map,K=O.ingredients||[];K.forEach(P=>{let ie=P.group||"";ie==="Main"&&(ie=""),I.has(ie)||I.set(ie,crypto.randomUUID())});const k=Array.from(I.entries()).map(([P,ie])=>({id:ie,name:P})),$=K.map(P=>{let ie=P.group||"";ie==="Main"&&(ie="");let pe;return I.has(ie)&&(pe=I.get(ie)),{id:crypto.randomUUID(),name:P.name||"",quantity:P.quantity||"",unit:P.unit||"",cost:"",purchaseCost:"",groupId:pe}}),X=new Map,ue=O.steps||[];ue.forEach(P=>{typeof P=="object"&&P.group&&P.group!=="Main"&&(X.has(P.group)||X.set(P.group,crypto.randomUUID()))});const de=Array.from(X.entries()).map(([P,ie])=>({id:ie,name:P})),M=ue.map(P=>{const ie=typeof P=="object",pe=ie?P.text||"":P,xe=ie?P.group:null;let ce;return xe&&X.has(xe)&&(ce=X.get(xe)),{id:crypto.randomUUID(),text:pe,groupId:ce}});R(P=>({...P,title:O.name||P.title,description:O.description||P.description,category:F?"URL":O.category||P.category,image:O.image||P.image,servings:O.recipeYield||P.servings,ingredients:$,ingredientGroups:k,steps:M,stepGroups:de,ingredientSections:void 0,stepSections:void 0,sourceUrl:F||P.sourceUrl})),u(null)},L=O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?U(!0):O.type==="dragleave"&&U(!1)},G=O=>{if(O.preventDefault(),O.stopPropagation(),U(!1),O.dataTransfer.files&&O.dataTransfer.files[0]){const F=O.dataTransfer.files[0];F.type.startsWith("image/")&&R(I=>({...I,imageFile:F,image:URL.createObjectURL(F)}))}},q=O=>{const{id:F,value:I}=O.target;R(K=>({...K,[F]:I}))},V=O=>{const F=O.target.files[0];F&&R(I=>({...I,imageFile:F,image:URL.createObjectURL(F)}))},z=O=>{O.preventDefault();let F=[],I=[];if(C.type==="bread")F=C.ingredients.map(({id:de,...M})=>M);else{const de=C.ingredientSections||[];de.length===0&&C.ingredients.length>0?F=C.ingredients.map(({id:M,...P})=>P):(F=de.flatMap(M=>M.items.map(P=>({...P,groupId:M.id}))).map(({id:M,...P})=>P),I=de.map(M=>({id:M.id,name:M.name})))}const K=new Set(C.tags||[]);C.course&&K.add(C.course),C.category&&K.add(C.category),C.type==="bread"&&K.add("");const k=Array.from(K).filter(Boolean);let $=[],X=[];const ue=C.stepSections||[];ue.length===0&&C.steps.length>0?$=C.steps.map(de=>typeof de=="string"?{text:de}:de):($=ue.flatMap(de=>de.items.map(M=>({text:M.text,groupId:de.id}))),X=ue.map(de=>({id:de.id,name:de.name}))),r({...C,ingredients:F,ingredientGroups:I,steps:$,stepGroups:X,image:C.imageFile||C.image,id:l.id||Date.now(),tags:k,ingredientSections:void 0,stepSections:void 0})};return i.jsxs("form",{className:"recipe-form fade-in",onSubmit:z,children:[c&&i.jsx(_0,{onClose:()=>u(null),onImport:T,initialMode:c}),i.jsxs("div",{className:"recipe-form__header",children:[i.jsx("h2",{className:"section-title",children:l.title?"":""}),i.jsxs("div",{className:"recipe-form__actions",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:t,children:""}),i.jsx(se,{type:"submit",variant:"primary",children:""})]})]}),i.jsxs("div",{className:"recipe-form__grid",children:[i.jsxs("div",{className:"form-column",children:[i.jsxs(_t,{children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"form-row-2",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{id:"course",value:C.course,onChange:q,placeholder:": , ",list:"course-options"}),i.jsxs("datalist",{id:"course-options",children:[i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{id:"category",value:C.category,onChange:q,placeholder:": , ",list:"category-options"}),i.jsxs("datalist",{id:"category-options",children:[i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""})]})]})]}),i.jsx(Ye,{label:"",id:"title",value:C.title,onChange:q,placeholder:": ",required:!0}),i.jsx(Ye,{label:"",id:"description",textarea:!0,value:C.description,onChange:q,placeholder:"..."}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"URL"}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx(Ye,{id:"sourceUrl",value:C.sourceUrl||"",onChange:q,placeholder:"https://example.com/recipe/...",style:{flex:1}}),C.sourceUrl&&i.jsx(se,{type:"button",variant:"ghost",onClick:()=>R(O=>({...O,sourceUrl:""})),title:"URL",style:{color:"var(--color-danger)"},children:""})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"hsl(var(--color-primary))"},children:""}),i.jsxs("div",{onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:G,style:{position:"relative",marginBottom:"1rem",borderRadius:"var(--radius-md)",overflow:"hidden",border:D?"2px dashed var(--color-primary)":"1px dashed hsl(var(--color-border))",backgroundColor:D?"#f0f9ff":"#f9f9f9",transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[C.image?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{width:"100%",height:"200px",backgroundColor:"#f0f0f0",position:"relative"},children:[i.jsx("img",{src:C.image,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",opacity:D?.5:1},onError:O=>{O.target.style.display="none",O.target.parentElement.textContent=""}}),i.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),R(F=>({...F,image:"",imageFile:null}))},style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",lineHeight:1,zIndex:10},title:"",children:""})]}),i.jsx("div",{style:{padding:"0.5rem",fontSize:"0.8rem",color:"#666"},children:""})]}):i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:D?"":""}),i.jsx("input",{type:"file",accept:"image/*",onChange:V,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",display:C.image?"none":"block"}}),C.image&&i.jsx("input",{type:"file",accept:"image/*",onChange:V,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1}})]})]})]}),!l.id&&i.jsxs(_t,{className:"mb-md glass-card",children:[i.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"0.8rem",marginBottom:"0.8rem"},children:""}),i.jsxs("div",{className:"import-actions-row",children:[i.jsx(se,{variant:"secondary",type:"button",onClick:()=>u("url"),className:"btn-import-web",children:" Web URL"}),i.jsx(se,{variant:"secondary",type:"button",onClick:()=>u("image"),className:"btn-import-image",children:"  (Best Effort)"})]}),i.jsxs("div",{className:"image-upload-section",style:{marginTop:"0.2rem"},children:[i.jsx("label",{style:{fontSize:"0.9rem",color:"#555",marginBottom:"0.4rem",display:"block"},children:""}),i.jsx("input",{type:"file",accept:"image/*",onChange:V,style:{marginBottom:"0.5rem"}}),C.image&&i.jsx("div",{style:{marginTop:"0.5rem"},children:i.jsx("img",{src:C.image,alt:"Preview",style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"form-row-2",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:""}),i.jsx(Ye,{id:"storeName",value:C.storeName,onChange:q,placeholder:"",list:"store-options"}),i.jsx("datalist",{id:"store-options",children:jh.map(O=>i.jsx("option",{value:O},O))})]}),i.jsx(Ye,{label:"",id:"servings",value:C.servings,onChange:q,placeholder:"4"})]})]}),i.jsxs("div",{className:"form-column",children:[i.jsxs(_t,{className:"mb-md",style:{position:"relative",zIndex:10},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"mode-toggle",style:{display:"flex",gap:"0.5rem",background:"#eee",padding:"4px",borderRadius:"8px"},children:[i.jsx("button",{type:"button",onClick:()=>R(O=>({...O,type:"normal"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:C.type==="normal"?"white":"transparent",fontWeight:C.type==="normal"?"bold":"normal",boxShadow:C.type==="normal"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:""}),i.jsx("button",{type:"button",onClick:()=>R(O=>({...O,type:"bread"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:C.type==="bread"?"white":"transparent",fontWeight:C.type==="bread"?"bold":"normal",boxShadow:C.type==="bread"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",color:C.type==="bread"?"var(--color-primary)":"inherit"},children:" (Baker's %)"})]})]}),C.type==="bread"?i.jsx(lE,{formData:C,setFormData:R}):i.jsx(pE,{formData:C,setFormData:R,priceList:d})]}),i.jsxs(_t,{children:[i.jsx("h3",{children:""}),i.jsx(yE,{formData:C,setFormData:R})]})]})]})]})},vE="modulepreload",xE=function(r){return"/app/"+r},nv={},sh=function(t,s,l){let c=Promise.resolve();if(s&&s.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");c=p(s.map(m=>{if(m=xE(m),m in nv)return;nv[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":vE,y||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),y)return new Promise((S,_)=>{b.addEventListener("load",S),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return c.then(d=>{for(const f of d||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})},bE=({id:r,message:t,type:s="info",onClose:l})=>{w.useEffect(()=>{const u=setTimeout(()=>{l(r)},3e3);return()=>clearTimeout(u)},[r,l]);const c=()=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return i.jsxs("div",{className:`toast toast-${s}`,children:[i.jsx("div",{className:"toast-icon",children:c()}),i.jsx("div",{className:"toast-message",children:t}),i.jsx("button",{className:"toast-close",onClick:()=>l(r),"aria-label":"",children:""})]})},wE=({toasts:r,onRemove:t})=>r.length===0?null:i.jsx("div",{className:"toast-container",children:r.map(s=>i.jsx(bE,{id:s.id,message:s.message,type:s.type,onClose:t},s.id))}),C0=w.createContext(),SE=({children:r})=>{const[t,s]=w.useState([]),l=w.useCallback((d,f="info")=>{const p=Date.now()+Math.random();s(m=>[...m,{id:p,message:d,type:f}].slice(-5))},[]),c=w.useCallback(d=>{s(f=>f.filter(p=>p.id!==d))},[]),u={showToast:l,success:d=>l(d,"success"),error:d=>l(d,"error"),warning:d=>l(d,"warning"),info:d=>l(d,"info")};return i.jsxs(C0.Provider,{value:u,children:[r,i.jsx(wE,{toasts:t,onRemove:c})]})},ml=()=>{const r=w.useContext(C0);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},jE=`
.input-with-hint {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.unit-hint {
    font-size: 0.75rem;
    color: #f59e0b; /* Warning/Info color */
    white-space: nowrap;
}
`,E0=document.createElement("style");E0.innerText=jE;document.head.appendChild(E0);const _E=()=>{const r=ml(),[t,s]=w.useState([]),[l,c]=w.useState(""),[u,d]=w.useState(null),[f,p]=w.useState(!1);w.useEffect(()=>{m()},[]);const m=async()=>{p(!0);try{const C=await ln.getAllConversions(),R=Array.from(C.values()).map(D=>({...D,isNew:!1,isEditing:!1}));s(R.sort((D,U)=>D.ingredientName.localeCompare(U.ingredientName,"ja")))}catch(C){r.error(""),console.error("Failed to load ingredients:",C)}p(!1)},y=()=>{s([{ingredientName:"",packetSize:"",packetUnit:"g",lastPrice:"",isNew:!0,isEditing:!0},...t]),d(0)},v=async C=>{const R=t[C];if(!R.ingredientName||!R.packetSize||!R.lastPrice){r.warning("");return}try{await ln.saveConversion(R.ingredientName,R.packetSize,R.packetUnit,R.lastPrice),r.success(""),m(),d(null)}catch(D){r.error(""),console.error("Save error:",D)}},b=async(C,R)=>{if(t[R].isNew){s(t.filter((U,T)=>T!==R)),d(null);return}try{await ln.deleteConversion(C),r.success(""),m()}catch(U){r.error(""),console.error("Delete error:",U)}},S=C=>{d(C);const R=[...t];R[C].isEditing=!0,s(R)},_=C=>{t[C].isNew?s(t.filter((R,D)=>D!==C)):m(),d(null)},j=(C,R,D)=>{const U=[...t];U[C][R]=D,s(U)},A=C=>{const R=parseFloat(C.lastPrice),D=parseFloat(C.packetSize);if(!R||!D)return"-";const U=C.packetUnit?C.packetUnit.trim().toLowerCase():"";return U==="g"||U===""?`${Math.round(R/D*1e3).toLocaleString()}/kg`:U==="ml"||U==="cc"||U===""||U===""?`${Math.round(R/D*1e3).toLocaleString()}/L`:`${Math.round(R/D).toLocaleString()}/${C.packetUnit}`},N=t.filter(C=>C.ingredientName.toLowerCase().includes(l.toLowerCase()));return i.jsxs("div",{className:"ingredient-master-container",children:[i.jsxs("div",{className:"master-header",children:[i.jsx("h3",{children:" "}),i.jsx(se,{variant:"primary",onClick:y,disabled:u!==null,children:"+ "})]}),i.jsx("div",{className:"master-search",children:i.jsx(Ye,{placeholder:"...",value:l,onChange:C=>c(C.target.value)})}),f?i.jsx("div",{className:"master-loading",children:"..."}):i.jsx("div",{className:"master-table-wrapper",children:i.jsxs("table",{className:"master-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsx("tbody",{children:N.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",style:{textAlign:"center",color:"#999"},children:l?"":""})}):N.map((C,R)=>i.jsxs("tr",{className:C.isEditing?"editing":"",children:[i.jsx("td",{children:C.isEditing?i.jsx(Ye,{value:C.ingredientName,onChange:D=>j(R,"ingredientName",D.target.value),placeholder:": ",disabled:!C.isNew}):C.ingredientName}),i.jsx("td",{children:C.isEditing?i.jsx(Ye,{type:"number",value:C.lastPrice,onChange:D=>j(R,"lastPrice",D.target.value),placeholder:": 500"}):`${parseFloat(C.lastPrice||0).toLocaleString()}`}),i.jsx("td",{children:C.isEditing?i.jsxs("div",{className:"input-with-hint",children:[i.jsx(Ye,{type:"number",value:C.packetSize,onChange:D=>j(R,"packetSize",D.target.value),placeholder:["","","","PC","","",""].includes(C.packetUnit)?" (: 1)":": 1000"}),["","","","PC","","",""].includes(C.packetUnit)&&i.jsxs("span",{className:"unit-hint",children:["1",C.packetUnit,"1"]})]}):C.packetSize}),i.jsx("td",{children:C.isEditing?i.jsxs("select",{value:C.packetUnit,onChange:D=>j(R,"packetUnit",D.target.value),className:"unit-select",children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"cc",children:"cc"})]}):C.packetUnit}),i.jsx("td",{className:"normalized-cost",children:A(C)}),i.jsx("td",{children:i.jsx("div",{className:"action-buttons",children:C.isEditing?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"primary",size:"sm",onClick:()=>v(R),children:""}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>_(R),children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>S(R),disabled:u!==null,children:""}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>b(C.ingredientName,R),disabled:u!==null,children:""})]})})})]},R))})]})}),i.jsx("div",{className:"master-info",children:i.jsx("p",{children:" "})})]})},CE=()=>{const[r,t]=w.useState([]),[s,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState("all"),[p,m]=w.useState(""),[y,v]=w.useState(null),b=ml(),[S,_]=w.useState({isOpen:!1,title:"",message:"",onConfirm:null});w.useEffect(()=>{j()},[]);const j=async()=>{l(!0),v(null);try{console.log("Starting data load for CsvToMasterImporter...");const[T,L]=await Promise.all([nr.getPriceListArray().catch(q=>(console.error("Error fetching price list:",q),[])),ln.getAllConversions().catch(q=>(console.error("Error fetching conversions:",q),new Map))]);if(console.log("Data fetched:",{csvCount:T?.length,masterSize:L?.size}),!Array.isArray(T))throw new Error("CSV");if(!(L instanceof Map))throw new Error("Map");const G=[];for(const q of T){if(!q||!q.name)continue;const V=L.get(q.name);G.push({name:q.name,csvPrice:q.price,csvUnit:q.unit,csvVendor:q.vendor,masterSize:V?V.packetSize:"",masterUnit:V?V.packetUnit:q.unit||"g",masterPrice:V?V.lastPrice:q.price||0,isRegistered:!!V,inputSize:V?V.packetSize:"",inputUnit:V?V.packetUnit:q.unit||"g",inputPrice:V?V.lastPrice:q.price||0,isModified:!1})}console.log("Merge completed. Items:",G.length),t(G)}catch(T){console.error("Failed to load data for importer:",T),v(T.message||"")}finally{l(!1)}},A=async T=>{u(T.name);try{const L=parseFloat(T.inputSize),G=parseFloat(T.inputPrice);if(isNaN(L)||L<=0){b.error("");return}if(!T.inputUnit){b.error("");return}await ln.saveConversion(T.name,L,T.inputUnit,G),t(q=>q.map(V=>V.name===T.name?{...V,isRegistered:!0,isModified:!1,masterSize:L,masterUnit:T.inputUnit,masterPrice:G}:V)),b.success("")}catch(L){console.error("Failed to save ingredient:",L),b.error("")}finally{u(null)}},N=async T=>{_(q=>({...q,isOpen:!1})),u("bulk");let L=0,G=0;try{const q=await Promise.allSettled(T.map(async O=>{const F=parseFloat(O.inputSize),I=parseFloat(O.inputPrice);if(isNaN(F)||F<=0)throw new Error("Invalid size");if(!O.inputUnit)throw new Error("Invalid unit");return await ln.saveConversion(O.name,F,O.inputUnit,I),O})),V=[];q.forEach((O,F)=>{O.status==="fulfilled"?(L++,V.push(T[F])):(G++,console.error(`Failed to save ${T[F].name}: `,O.reason))});const z=new Set(V.map(O=>O.name));t(O=>O.map(F=>{if(z.has(F.name)){const I=T.find(K=>K.name===F.name);return{...F,isRegistered:!0,isModified:!1,masterSize:parseFloat(I.inputSize),masterUnit:I.inputUnit,masterPrice:parseFloat(I.inputPrice)}}return F})),G===0?b.success(`${L} `):b.warning(`:  ${L}  /  ${G} `)}catch(q){console.error("Bulk save error:",q),b.error("")}finally{u(null)}},C=()=>{const T=r.filter(L=>L.isModified);T.length!==0&&_({isOpen:!0,title:"",message:`${T.length} `,onConfirm:()=>N(T)})},R=(T,L,G)=>{t(q=>q.map(V=>V.name===T?{...V,[L]:G,isModified:!0}:V))},D=r.filter(T=>!(d==="unregistered"&&T.isRegistered||d==="registered"&&!T.isRegistered||p&&!T.name.includes(p))),U=r.filter(T=>T.isModified).length;return s?i.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",color:"#666",padding:"2rem"},children:"..."}):y?i.jsxs("div",{style:{padding:"2rem",color:"#c62828",background:"#ffebee",borderRadius:"4px"},children:[i.jsx("h3",{children:""}),i.jsx("p",{children:y}),i.jsx(se,{variant:"secondary",onClick:j,children:""})]}):i.jsxs("div",{className:"csv-importer",children:[i.jsxs("div",{className:"importer-header",children:[i.jsx(Ye,{placeholder:"...",value:p,onChange:T=>m(T.target.value),style:{maxWidth:"300px"}}),i.jsxs("div",{className:"filter-buttons",children:[i.jsxs(se,{variant:d==="all"?"primary":"secondary",onClick:()=>f("all"),size:"sm",style:{marginRight:"0.5rem"},children:[" (",r.length,")"]}),i.jsxs(se,{variant:d==="unregistered"?"primary":"secondary",onClick:()=>f("unregistered"),size:"sm",style:{marginRight:"0.5rem"},children:[" (",r.filter(T=>!T.isRegistered).length,")"]}),i.jsxs(se,{variant:d==="registered"?"primary":"secondary",onClick:()=>f("registered"),size:"sm",children:[" (",r.filter(T=>T.isRegistered).length,")"]})]}),i.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[U>0&&i.jsx(se,{variant:"primary",size:"sm",onClick:C,disabled:c==="bulk",style:{fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:c==="bulk"?"...":`(${U})`}),i.jsx(se,{variant:"secondary",size:"sm",onClick:j,children:" "})]})]}),i.jsx("div",{className:"table-wrapper",style:{overflowX:"auto",flex:1},children:i.jsxs("table",{className:"enterprise-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"25%"},children:" (CSV)"}),i.jsx("th",{style:{width:"15%"},children:" (CSV)"}),i.jsxs("th",{style:{width:"20%"},children:[" () ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsxs("th",{style:{width:"15%"},children:[" () ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("th",{style:{width:"15%"},children:" ()"}),i.jsx("th",{style:{width:"10%"},children:""})]})}),i.jsx("tbody",{children:D.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"no-data",children:""})}):D.map((T,L)=>i.jsxs("tr",{style:{backgroundColor:T.isModified?"#fff8e1":T.isRegistered?"#f9fff9":"inherit",transition:"background-color 0.3s"},children:[i.jsxs("td",{style:{fontWeight:"500"},children:[T.name,T.csvVendor&&i.jsx("div",{style:{fontSize:"0.75rem",color:"#888"},children:T.csvVendor})]}),i.jsxs("td",{children:[T.csvPrice?`${T.csvPrice.toLocaleString()} `:"-",T.csvUnit&&i.jsxs("span",{style:{fontSize:"0.8rem",color:"#888"},children:[" / ",T.csvUnit]})]}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsx(Ye,{type:"number",value:T.inputSize,onChange:G=>R(T.name,"inputSize",G.target.value),placeholder:["","","","PC","","",""].includes(T.inputUnit)?" (: 1)":": 1000",style:{width:"100%"}}),["","","","PC","","",""].includes(T.inputUnit)&&i.jsxs("span",{style:{fontSize:"0.7rem",color:"#e67e22",whiteSpace:"nowrap"},children:["1",T.inputUnit,"1"]})]})}),i.jsx("td",{children:i.jsxs("select",{className:"input-field",value:T.inputUnit,onChange:G=>R(T.name,"inputUnit",G.target.value),style:{width:"100%",padding:"8px",cursor:"pointer"},children:[!["g","kg","ml","L","cc","","","","","PC","","",""].includes(T.inputUnit)&&T.inputUnit&&i.jsxs("option",{value:T.inputUnit,children:[T.inputUnit," (CSV)"]}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"cc",children:"cc"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"PC",children:"PC"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})}),i.jsx("td",{children:i.jsx(Ye,{type:"number",value:T.inputPrice,onChange:G=>R(T.name,"inputPrice",G.target.value),placeholder:"",style:{width:"100%"}})}),i.jsx("td",{children:i.jsx(se,{variant:T.isRegistered?"secondary":"primary",size:"sm",onClick:()=>A(T),disabled:c===T.name||c==="bulk",block:!0,children:c===T.name?"...":T.isRegistered?"":""})})]},T.name+L))})]})}),i.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#666"},children:[i.jsx("p",{children:" CSV"}),i.jsx("p",{children:" "})]}),i.jsxs(xn,{isOpen:S.isOpen,onClose:()=>_({...S,isOpen:!1}),title:S.title,size:"small",children:[i.jsx("div",{style:{marginBottom:"1.5rem"},children:S.message}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[i.jsx(se,{variant:"secondary",onClick:()=>_({...S,isOpen:!1}),children:""}),i.jsx(se,{variant:"primary",onClick:S.onConfirm,children:""})]})]})]})},EE=({onBack:r})=>{const[t,s]=w.useState("price"),[l,c]=w.useState(null),[u,d]=w.useState({type:"",message:""}),[f,p]=w.useState(!1),[m,y]=w.useState([]),[v,b]=w.useState(!1),[S,_]=w.useState(null),[j,A]=w.useState({key:"dateStr",direction:"desc"}),[N,C]=w.useState(""),R=z=>{let O="asc";j.key===z&&j.direction==="asc"&&(O="desc"),A({key:z,direction:O})},D=Ce.useMemo(()=>{let z=[...m];if(N){const O=N.toLowerCase().trim();z=z.filter(F=>F.name&&F.name.toLowerCase().includes(O)||F.vendor&&F.vendor.toLowerCase().includes(O)||F.dateStr&&F.dateStr.includes(O))}return j.key&&z.sort((O,F)=>{let I=O[j.key]||"",K=F[j.key]||"";return I<K?j.direction==="asc"?-1:1:I>K?j.direction==="asc"?1:-1:0}),z},[m,j,N]),[U,T]=w.useState([]);w.useEffect(()=>{L()},[]);const L=async()=>{b(!0);try{const z=await nr.getPriceListArray();y(z);const O=await nr.getFileList();T(O)}catch(z){console.error("Failed to load price data",z)}finally{b(!1)}},G=z=>{z.target.files&&z.target.files[0]&&(c(z.target.files[0]),d({type:"",message:""}))},q=async()=>{if(!l)return;p(!0),d({type:"info",message:"..."});const z=await nr.uploadPriceList(l);if(z.success){d({type:"success",message:"..."});try{const{recipeService:F}=await sh(async()=>{const{recipeService:k}=await Promise.resolve().then(()=>Vd);return{recipeService:k}},[]),I=await nr.fetchPriceList(),K=await F.updateRecipeCosts(I);d({type:"success",message:`${K}`})}catch(F){console.error("Cost update failed",F),d({type:"warning",message:""})}c(null);const O=document.getElementById("csv-upload-input");O&&(O.value=""),L()}else d({type:"error",message:`: ${z.error.message}`});p(!1)},V=z=>{_({message:`${z}
`,onConfirm:async()=>{p(!0);const O=await nr.deletePriceFile(z);p(!1),O.success?(d({type:"success",message:""}),L()):d({type:"error",message:`: ${O.error.message}`})}})};return i.jsxs("div",{className:"dashboard-container fade-in",children:[i.jsxs("div",{className:"dashboard-header",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("h2",{className:"section-title",style:{margin:0,fontSize:"1.5rem"},children:""}),i.jsx("span",{style:{fontSize:"0.85rem",color:"#666",background:"#eee",padding:"2px 8px",borderRadius:"12px"},children:"Admin Mode"})]}),i.jsx(se,{variant:"ghost",onClick:r,children:" "})]}),i.jsx("div",{className:"tabs-container",children:i.jsxs("div",{className:"tabs",children:[i.jsx("button",{className:`tab ${t==="price"?"active":""}`,onClick:()=>s("price"),children:" "}),i.jsx("button",{className:`tab ${t==="ingredients"?"active":""}`,onClick:()=>s("ingredients"),children:" "}),i.jsx("button",{className:`tab ${t==="csv-import"?"active":""}`,onClick:()=>s("csv-import"),children:" CSV"})]})}),t==="ingredients"?i.jsx(_E,{}):t==="csv-import"?i.jsx(CE,{}):i.jsxs("div",{className:"dashboard-content",children:[i.jsxs("aside",{className:"dashboard-sidebar",children:[i.jsxs("div",{className:"sidebar-card",style:{borderColor:"var(--color-primary)"},children:[i.jsxs("div",{className:"sidebar-title",style:{color:"#000"},children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("p",{style:{fontSize:"0.85rem",color:"#333",marginBottom:"0.5rem"},children:""}),i.jsx(se,{variant:"secondary",size:"sm",block:!0,onClick:async()=>{try{const z=await sh(()=>Promise.resolve().then(()=>Vd),void 0).then(K=>K.recipeService.exportAllRecipes()),O=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),F=URL.createObjectURL(O),I=document.createElement("a");I.href=F,I.download=`recipe_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(F)}catch(z){alert(""),console.error(z)}},children:" JSON"})]}),i.jsxs("div",{children:[i.jsx("p",{style:{fontSize:"0.85rem",color:"#333",marginBottom:"0.5rem"},children:" / "}),i.jsx("input",{type:"file",accept:".json",id:"backup-upload-input",style:{display:"none"},onChange:async z=>{const O=z.target.files[0];if(O){if(!window.confirm(`
`)){z.target.value="";return}try{d({type:"info",message:"..."}),p(!0);const F=await O.text(),I=JSON.parse(F),{recipeService:K}=await sh(async()=>{const{recipeService:$}=await Promise.resolve().then(()=>Vd);return{recipeService:$}},void 0),k=await K.importRecipes(I);alert(`${k.count}${k.errors.length>0?`
: ${k.errors.length}`:""}`),d({type:"success",message:""})}catch(F){console.error(F),alert(""),d({type:"error",message:""})}finally{p(!1),z.target.value=""}}}}),i.jsx(se,{variant:"secondary",size:"sm",block:!0,onClick:()=>document.getElementById("backup-upload-input").click(),disabled:f,children:" "})]})]}),i.jsxs("div",{className:"sidebar-card",children:[i.jsxs("div",{className:"sidebar-title",children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{className:"upload-area",children:[i.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:["CSV (Shift-JIS)",i.jsx("br",{}),i.jsxs("span",{style:{fontSize:"0.75rem",color:"#888"},children:[" 1: ...",i.jsx("br",{})," 2: "]})]}),i.jsx("input",{type:"file",accept:".csv",onChange:G,id:"csv-upload-input",className:"csv-input",style:{width:"100%",marginBottom:"0.5rem",fontSize:"0.85rem"}}),i.jsx(se,{variant:"primary",onClick:q,disabled:!l||f,className:"upload-btn",size:"sm",block:!0,children:f?"...":""})]}),u.message&&i.jsx("div",{className:`status-msg ${u.type}`,children:u.message})]}),i.jsxs("div",{className:"sidebar-card",style:{flex:1},children:[i.jsxs("div",{className:"sidebar-title",children:[i.jsx("span",{children:""})," ",i.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal",marginLeft:"auto"},children:[U.length,""]})]}),U.length===0?i.jsx("p",{style:{color:"#aaa",fontStyle:"italic",fontSize:"0.85rem",textAlign:"center"},children:""}):i.jsx("div",{className:"file-list",children:U.map(z=>i.jsxs("div",{className:"file-list-item",children:[i.jsx("span",{className:"file-name",title:z.name,children:z.name}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>V(z.name),disabled:f,style:{padding:"2px 8px",fontSize:"0.75rem",minWidth:"auto"},children:""})]},z.name))})]}),i.jsxs("div",{className:"sidebar-card",children:[i.jsx("div",{className:"sidebar-title",children:" "}),i.jsxs("ul",{style:{fontSize:"0.75rem",color:"#666",paddingLeft:"1.2rem",margin:0},children:[i.jsx("li",{style:{marginBottom:"4px"},children:""}),i.jsx("li",{style:{marginBottom:"4px"},children:""})]})]})]}),i.jsxs("main",{className:"dashboard-main",children:[i.jsxs("div",{className:"main-toolbar",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"#333"},children:""}),i.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},children:[" ",D.length.toLocaleString()," "]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx(Ye,{placeholder:" (, , )...",value:N,onChange:z=>C(z.target.value),style:{width:"250px",fontSize:"0.9rem"}}),i.jsx(se,{variant:"secondary",size:"sm",onClick:L,children:" "})]})]}),i.jsx("div",{className:"table-wrapper",children:v?i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:"#888"},children:"..."}):i.jsxs("table",{className:"enterprise-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsxs("th",{onClick:()=>R("dateStr"),style:{width:"120px"},children:[" ",j.key==="dateStr"&&(j.direction==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>R("vendor"),children:[" ",j.key==="vendor"&&(j.direction==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>R("name"),children:[" ",j.key==="name"&&(j.direction==="asc"?"":"")]}),i.jsx("th",{style:{textAlign:"right",width:"150px"},children:" ()"})]})}),i.jsx("tbody",{children:D.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"no-data",children:""})}):D.map((z,O)=>i.jsxs("tr",{children:[i.jsx("td",{className:"col-date",children:z.dateStr||"-"}),i.jsx("td",{children:z.vendor||"-"}),i.jsx("td",{style:{fontWeight:"500"},children:z.name}),i.jsxs("td",{className:"col-number",children:[z.price?z.price.toLocaleString():"-",z.unit&&i.jsxs("span",{style:{color:"#888",fontSize:"0.85em",marginLeft:"4px"},children:["/ ",z.unit]})]})]},O))})]})})]})]}),S&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,animation:"fadeIn 0.2s ease-out"},onClick:()=>_(null),children:i.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},onClick:z=>z.stopPropagation(),children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#333"},children:""}),i.jsx("p",{style:{whiteSpace:"pre-wrap",marginBottom:"24px",color:"#666"},children:S.message}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>_(null),children:""}),i.jsx(se,{variant:"danger",onClick:()=>{S.onConfirm(),_(null)},children:""})]})]})})]})},RE=({recipes:r,recentIds:t,onSelect:s})=>{if(!t||t.length===0)return null;const l=t.map(c=>r.find(u=>u.id===c)).filter(Boolean).slice(0,7);return l.length===0?null:i.jsxs("div",{className:"recent-recipes",children:[i.jsx("h3",{className:"recent-header",children:""}),i.jsx("div",{className:"recent-list",children:l.map(c=>i.jsxs("div",{className:"recent-item",onClick:()=>s(c),children:[i.jsx("div",{className:"recent-thumbnail",children:c.image?i.jsx("img",{src:c.image,alt:c.title}):i.jsx("div",{className:"recent-placeholder"})}),i.jsx("div",{className:"recent-info",children:i.jsx("div",{className:"recent-title",children:c.title})})]},c.id))})]})},TE=({onBack:r})=>(w.useEffect(()=>{window.scrollTo(0,0)},[]),i.jsxs("div",{className:"levain-guide-container",children:[i.jsxs("header",{className:"levain-guide-header",children:[i.jsx("h1",{children:"LEVAIN GUIDE"}),i.jsx("p",{className:"subtitle",children:" "}),i.jsx("p",{className:"subtitle",children:""}),i.jsx("div",{className:"divider"})]}),i.jsxs("main",{className:"levain-guide-main",children:[i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("p",{children:"Levain"}),i.jsx("h3",{children:""}),i.jsx("p",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"Yeast"})," Saccharomyces cerevisiae, Saccharomyces pastorianus ",i.jsx("br",{}),i.jsx("strong",{children:"LAB"})," Lactobacillus plantarum, Lactobacillus brevis ",i.jsx("br",{}),i.jsx("strong",{children:""})," Acetobacter aceti "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:["",i.jsx("br",{}),i.jsxs("div",{className:"formula",children:["CHO  2CHOH + 2CO + ",i.jsx("br",{}),"(   +  + )"]}),"",i.jsx("br",{}),i.jsxs("div",{className:"formula",children:["CHO  2CHO",i.jsx("br",{}),"(  )"]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[" ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"- 7-10"}),i.jsxs("div",{className:"timeline",children:[i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 1-2 "}),i.jsx("p",{children:"100g + 100ml 20-22"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," "]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 3-4 "}),i.jsx("p",{children:"50%50g + 50ml "}),i.jsx("p",{children:"100g  50g50g + 50ml"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," pH 3.5-4.5"]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 5-6 2"}),i.jsx("p",{children:"50%50g + 50ml "}),i.jsxs("div",{className:"success-box",children:[" ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 7-10 3"}),i.jsx("p",{children:"1150%1:1"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," 15",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," pH 3.5-4.0"]})]})]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:"(g)"}),i.jsx("th",{children:"(ml)"}),i.jsx("th",{children:"(g)"}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"0"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"2"}),i.jsx("td",{children:"1"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"0"}),i.jsx("td",{children:""})]})]})]})})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"5-8"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"2-4"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"15-18"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"1-2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"20-22"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"3-5"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"25-28"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"2-3"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"30"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"1-2"})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"1"}),i.jsx("br",{}),"100g50g + 50ml"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),"8-12"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),""]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"2%100ml2g"}),i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"2"}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 12 8:00"}),i.jsx("br",{}),"50g25g + 25ml "]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 1  14:00"}),i.jsx("br",{}),"25g + 25ml 2"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 1  20:00"}),i.jsx("br",{}),""]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:" "})," ",i.jsx("br",{}),"",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:" "})," pH",i.jsx("br",{}),"pH 3.5-4.0pH"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"18"}),i.jsx("td",{children:"16-24"}),i.jsx("td",{children:"1"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"20-22"}),i.jsx("td",{children:"12-16"}),i.jsx("td",{children:"2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"24-26"}),i.jsx("td",{children:"8-12"}),i.jsx("td",{children:"2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"28"}),i.jsx("td",{children:"4-8"}),i.jsx("td",{children:"2"})]})]})]})})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"1"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. 22",i.jsx("br",{}),"2. 12",i.jsx("br",{}),"3. 1",i.jsx("br",{}),"4. 1-2"]}),i.jsx("h3",{children:"2"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," pH",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," "]}),i.jsx("h3",{children:"3"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. ",i.jsx("br",{}),"2. 15",i.jsx("br",{}),"3. 80%"]}),i.jsx("h3",{children:"4"}),i.jsxs("div",{className:"success-box",children:["",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," "]}),i.jsx("h3",{children:"5"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. 1:0.8",i.jsx("br",{}),"2. ",i.jsx("br",{}),"3. "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"pH"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"pH4-8.0"}),i.jsx("br",{}),i.jsx("br",{})," pH 7.0",i.jsx("br",{})," pH 4.5-5.5",i.jsx("br",{})," pH 3.5-4.0",i.jsx("br",{})," pH 3.0"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:[i.jsx("strong",{children:"pH 3.8-4.0"})," ",i.jsx("br",{}),i.jsx("strong",{children:"pH 3.5"})," ",i.jsx("br",{}),i.jsx("strong",{children:"pH 4.5"})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," 1",i.jsx("br",{})," ",i.jsx("br",{})," -203"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"15-20"}),i.jsx("td",{children:"18-20"}),i.jsx("td",{children:"1-2"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"25+"}),i.jsx("td",{children:"22-24"}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"18-22"}),i.jsx("td",{children:"20-22"}),i.jsx("td",{children:"1-2"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"5-15"}),i.jsx("td",{children:"18"}),i.jsx("td",{children:"2-3"}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," 24",i.jsx("br",{})," ",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," 18",i.jsx("br",{})," "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),":=1:1 :=1:2 or 1:3"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),"100g + 50g + 150ml 12-24",i.jsx("br",{}),"11-2"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"100ml"}),i.jsx("br",{})," 110 to 110 CFU/ml",i.jsx("br",{})," 110 to 110 CFU/ml",i.jsx("br",{})," pH3.5-4.0",i.jsx("br",{})," 0.5-1.5%",i.jsx("br",{})," 0.3-0.8%"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"15-25% ()"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"5-15%"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"20-30%"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"30-50%"}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"formula",children:[" 18   - 8",i.jsx("br",{}),i.jsx("br",{}),"",i.jsx("br",{})," 2018  (20-8) = 1.5",i.jsx("br",{})," 2418  (24-8) = 1.125",i.jsx("br",{})," 2818  (28-8) = 0.954"]})]})]})]}),i.jsxs("footer",{className:"levain-footer",children:[i.jsx("p",{children:" Maitriser le Levain, c'est comprendre la vie "}),i.jsx("p",{children:""})]}),i.jsxs("button",{className:"levain-back-button",onClick:r,children:[i.jsx("span",{children:""})," "]})]})),Bi={async fetchAllProfiles(){const r=await ye.from("profiles").select("id, display_id, email, role, show_master_recipes, created_at, updated_at").order("created_at",{ascending:!1});if(!r.error)return r.data||[];if(String(r.error.message||"").toLowerCase().includes("email")){const t=await ye.from("profiles").select("id, display_id, role, show_master_recipes, created_at, updated_at").order("created_at",{ascending:!1});if(t.error)throw t.error;return t.data||[]}throw r.error},async updateProfile(r,t){const s=await ye.from("profiles").update(t).eq("id",r).select("id, display_id, email, role, show_master_recipes, created_at, updated_at").single();if(!s.error)return s.data;if(String(s.error.message||"").toLowerCase().includes("email")){const l=await ye.from("profiles").update(t).eq("id",r).select("id, display_id, role, show_master_recipes, created_at, updated_at").single();if(l.error)throw l.error;return l.data}throw s.error},async adminResetPassword(r,t){const{data:s,error:l}=await ye.functions.invoke("admin-reset-password",{body:{userId:r,newPassword:t}});if(l)throw l;if(s?.error)throw new Error(s.error);return s},async sendPasswordResetEmail(r){const{error:t}=await ye.auth.resetPasswordForEmail(r,{redirectTo:window.location.origin});if(t)throw t;return!0}},AE=({onBack:r})=>{const[t,s]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,p]=w.useState(null),[m,y]=w.useState(""),[v,b]=w.useState(""),[S,_]=w.useState(""),[j,A]=w.useState(""),[N,C]=w.useState(!1),[R,D]=w.useState(!1);w.useEffect(()=>{U()},[]);const U=async()=>{try{c(!0);const q=await Bi.fetchAllProfiles();s(q)}catch(q){console.error(q),d("")}finally{c(!1)}},T=t.filter(q=>q.role==="admin"),L=t.filter(q=>q.role!=="admin"),G=({user:q,isAdmin:V})=>i.jsxs(_t,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",backgroundColor:"white"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#333"},children:[q.display_id," ",V&&i.jsx("span",{style:{fontSize:"0.8rem",backgroundColor:"#e0e0e0",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",color:"#555"},children:""})]}),q.email&&i.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px",wordBreak:"break-all"},children:q.email}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[": ",new Date(q.created_at).toLocaleString()]}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",q.updated_at?new Date(q.updated_at).toLocaleString():"---"]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.9rem",color:"#555"},children:[i.jsx("input",{type:"checkbox",checked:q.show_master_recipes||!1,onChange:async z=>{const O=z.target.checked;s(F=>F.map(I=>I.id===q.id?{...I,show_master_recipes:O}:I));try{const F=`user_prefs_${q.id}`,I=JSON.parse(localStorage.getItem(F)||"{}");I.show_master_recipes=O,localStorage.setItem(F,JSON.stringify(I))}catch(F){console.error(F)}try{await Bi.updateProfile(q.id,{show_master_recipes:O})}catch(F){console.error(F)}}}),""]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>{p({id:q.id,display_id:q.display_id,email:q.email}),y(""),b(""),_(""),A("")},style:{whiteSpace:"nowrap"},children:""})]})]},q.id);return i.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",height:"100%",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",color:"var(--text-color)"},children:[i.jsx("h2",{children:""}),i.jsx(se,{variant:"ghost",onClick:r,children:""})]}),u&&i.jsx("div",{style:{padding:"10px",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",marginBottom:"20px"},children:u}),l?i.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"..."}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[T.length>0&&i.jsxs("div",{children:[i.jsx("h3",{style:{borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--color-primary)"},children:""}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:T.map(q=>i.jsx(G,{user:q,isAdmin:!0},q.id))})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{borderBottom:"2px solid #ddd",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--text-color)"},children:""}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:L.length>0?L.map(q=>i.jsx(G,{user:q,isAdmin:!1},q.id)):i.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:""})})]})]}),i.jsx(xn,{isOpen:!!f,onClose:()=>{N||p(null)},title:": ",size:"small",children:i.jsxs("div",{style:{color:"#333",lineHeight:1.5},children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"6px"},children:[": ",f?.display_id||f?.email||f?.id]}),f?.email&&i.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"12px",wordBreak:"break-all"},children:f.email}),i.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"12px"},children:"8"}),S&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"6px",marginBottom:"12px"},children:S}),j&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"6px",marginBottom:"12px"},children:j}),i.jsxs("div",{style:{display:"grid",gap:"10px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#555",marginBottom:"6px"},children:""}),i.jsx("input",{type:"password",value:m,onChange:q=>y(q.target.value),autoComplete:"new-password",placeholder:"8",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #ddd"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#555",marginBottom:"6px"},children:""}),i.jsx("input",{type:"password",value:v,onChange:q=>b(q.target.value),autoComplete:"new-password",placeholder:"",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #ddd"}})]})]}),i.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"16px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>p(null),disabled:N,children:""}),i.jsx(se,{variant:"secondary",isLoading:R,disabled:!f?.email||N,onClick:async()=>{if(_(""),A(""),!f?.email){_("");return}D(!0);try{await Bi.sendPasswordResetEmail(f.email),A("")}catch(q){console.error(q),_(q?.message||"")}finally{D(!1)}},style:{whiteSpace:"nowrap"},children:""}),i.jsx(se,{variant:"danger",isLoading:N,onClick:async()=>{if(_(""),A(""),!!f?.id){if(!m||m.length<8){_("8");return}if(m!==v){_("");return}C(!0);try{await Bi.adminResetPassword(f.id,m),A(""),y(""),b("")}catch(q){console.error(q);const V=q?.message||"";/FunctionsHttpError|not found|404/i.test(V)||/admin-reset-password/i.test(V)?_(""):_(V)}finally{C(!1)}}},children:""})]})]})})]})},Tr="inventory_items",Ts="inventory_snapshots",Ui="deleted_inventory_snapshots",rv=(r,t)=>{const s=String(r?.message||"");return String(r?.code||"")==="42703"?s.toLowerCase().includes(String(t).toLowerCase()):s.toLowerCase().includes(`column "${String(t).toLowerCase()}"`)&&s.toLowerCase().includes("does not exist")},an={getAll:async r=>{if(!r)return[];const{data:t,error:s}=await ye.from(Tr).select("*").eq("user_id",r).order("created_at",{ascending:!0});return s?(console.error("Error fetching inventory:",s),[]):t||[]},add:async(r,t)=>{if(!r)throw new Error("User ID is required");const{id:s,isPhantom:l,...c}=t,{data:u,error:d}=await ye.from(Tr).insert([{...c,user_id:r,quantity:parseFloat(t.quantity)||0,threshold:parseFloat(t.threshold)||0,price:parseFloat(t.price)||0}]).select().single();if(d)throw console.error("Error adding item:",d),d;return u},update:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t.id)throw new Error("Item ID is required for update");const{id:s,isPhantom:l,created_at:c,...u}=t,{data:d,error:f}=await ye.from(Tr).update({...u,quantity:parseFloat(t.quantity)||0,threshold:parseFloat(t.threshold)||0,price:parseFloat(t.price)||0,updated_at:new Date().toISOString()}).eq("id",t.id).eq("user_id",r).select().single();if(f)throw console.error("Error updating item:",f),f;return d},delete:async(r,t)=>{if(!r)throw new Error("User ID is required");const{error:s}=await ye.from(Tr).delete().eq("id",t).eq("user_id",r);if(s)throw console.error("Error deleting item:",s),s},adjustStock:async(r,t,s)=>{if(!r)throw new Error("User ID is required");const{data:l,error:c}=await ye.from(Tr).select("quantity").eq("id",t).eq("user_id",r).single();if(c||!l)throw new Error("Item not found");const u=Math.max(0,(l.quantity||0)+s),{data:d,error:f}=await ye.from(Tr).update({quantity:u,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r).select().single();if(f)throw f;return d},clearAll:async r=>{if(!r)throw new Error("User ID is required");const{error:t}=await ye.from(Tr).delete().eq("user_id",r).not("id","is",null);if(t)throw console.error("Error clearing inventory:",t),t},getIgnoredItems:async r=>{if(!r)return new Set;const{data:t,error:s}=await ye.from("ignored_items").select("name").eq("user_id",r);return s?(console.error("Error fetching ignored items:",s),new Set):new Set(t.map(l=>l.name))},ignoreItem:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)return;const{error:s}=await ye.from("ignored_items").insert([{user_id:r,name:t}]).select();if(s&&s.code!=="23505")throw console.error("Error ignoring item:",s),s},getSnapshots:async r=>{if(!r)return[];const{data:t,error:s}=await ye.from(Ts).select("*").eq("user_id",r).order("snapshot_date",{ascending:!1});return s?(console.error("Error fetching snapshots:",s),[]):t||[]},getDeletedSnapshots:async r=>{if(!r)return[];const{data:t,error:s}=await ye.from(Ui).select("*").eq("user_id",r).order("deleted_at",{ascending:!1});return s?(console.error("Error fetching deleted snapshots:",s),[]):t||[]},createSnapshot:async(r,t,s,l)=>{if(!r)throw new Error("User ID is required");let c=null,u=null;const d=await ye.from(Ts).insert([{user_id:r,title:t,items:s,total_value:l,snapshot_date:new Date().toISOString()}]).select().single();if(c=d.data??null,u=d.error??null,u&&rv(u,"user_id")){const f=await ye.from(Ts).insert([{title:t,items:s,total_value:l,snapshot_date:new Date().toISOString()}]).select().single();c=f.data??null,u=f.error??null}if(u)throw console.error("Error creating snapshot:",u),u;return c},deleteSnapshotToTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Snapshot ID is required");const{data:s,error:l}=await ye.from(Ts).select("*").eq("id",t).eq("user_id",r).single();if(l||!s)throw console.error("Error fetching snapshot for delete:",l),l||new Error("Snapshot not found");const{error:c}=await ye.from(Ui).insert([{original_id:s.id,user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at,deleted_at:new Date().toISOString()}]);if(c)throw console.error("Error moving snapshot to trash:",c),c;const{error:u}=await ye.from(Ts).delete().eq("id",t).eq("user_id",r);if(u)throw console.error("Error deleting snapshot from main table:",u),u;return!0},restoreSnapshotFromTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Deleted snapshot ID is required");const{data:s,error:l}=await ye.from(Ui).select("*").eq("id",t).eq("user_id",r).single();if(l||!s)throw console.error("Error fetching deleted snapshot:",l),l||new Error("Deleted snapshot not found");let c=null;{const{error:d}=await ye.from(Ts).insert([{id:s.original_id,user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at}]);c=d}if(c){const{error:d}=await ye.from(Ts).insert([{user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at}]);if(d)throw console.error("Error restoring snapshot (fallback) :",d),d}const{error:u}=await ye.from(Ui).delete().eq("id",t).eq("user_id",r);if(u)throw console.error("Error removing restored snapshot from trash:",u),u;return!0},hardDeleteSnapshotFromTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Deleted snapshot ID is required");const{error:s}=await ye.from(Ui).delete().eq("id",t).eq("user_id",r);if(s)throw console.error("Error hard deleting snapshot from trash:",s),s;return!0},resetStockQuantities:async r=>{if(!r)throw new Error("User ID is required");const t=await ye.from(Tr).update({quantity:0,updated_at:new Date().toISOString()}).eq("user_id",r).not("id","is",null);if(t.error){if(rv(t.error,"user_id")){const s=await ye.from(Tr).update({quantity:0,updated_at:new Date().toISOString()}).not("id","is",null);if(s.error)throw console.error("Error resetting quantities (fallback):",s.error),s.error;return}throw console.error("Error resetting quantities:",t.error),t.error}}},NE=({item:r,isLowStock:t,onUpdateQuantity:s,onDelete:l})=>{const[c,u]=Ce.useState(r.quantity===""?"":parseFloat(r.quantity)||0);Ce.useEffect(()=>{u(r.quantity===""?"":parseFloat(r.quantity)||0)},[r.quantity]);const d=parseFloat(r.price)||0,f=c===""?0:parseFloat(c),p=d*f,m=()=>{const b=parseFloat(c);!isNaN(b)&&b!==r.quantity&&s(r.id,b)},y=b=>{b.key==="Enter"&&b.target.blur()},v=b=>{const S=b?.target;S&&requestAnimationFrame(()=>{try{const _=String(S.value??"").length;S.setSelectionRange(_,_)}catch{}})};return i.jsxs("tr",{className:t(r)?"low-stock":"",children:[i.jsxs("td",{children:[r.name,t(r)&&i.jsx("span",{style:{marginLeft:"4px",fontSize:"0.7rem",color:"red"},children:""})]}),i.jsx("td",{style:{textAlign:"right"},children:d>0?`${d.toLocaleString()}`:"-"}),i.jsx("td",{children:r.unit}),i.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[i.jsx("input",{type:"text",inputMode:"decimal",value:c,onChange:b=>u(b.target.value),className:"inventory-quantity-input no-print",onBlur:m,onKeyDown:y,onFocus:v,onClick:v,style:{width:"80px",textAlign:"right",padding:"4px",border:"1px solid #ddd",borderRadius:"4px",background:"transparent"}}),i.jsx("span",{className:"print-only",style:{display:"none"},children:c})]}),i.jsx("td",{style:{textAlign:"right"},children:p>0?`${Math.round(p).toLocaleString()}`:"-"}),i.jsx("td",{style:{fontSize:"0.8rem",color:"#666"},children:r.vendor||"-"}),i.jsx("td",{style:{textAlign:"center"},children:i.jsx("button",{onClick:()=>l(r),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1rem",opacity:.6},title:"",children:""})})]})},OE=({items:r,loading:t,onSearch:s,searchQuery:l,onEdit:c,onDelete:u,onUpdateQuantity:d})=>{const{setNodeRef:f,isOver:p}=hl({id:"inventory-list-droppable"}),m=_=>_.threshold>0&&_.quantity<=_.threshold,[y,v]=Ce.useState({key:null,direction:"asc"}),b=_=>{v(j=>j.key===_?{key:_,direction:j.direction==="asc"?"desc":"asc"}:{key:_,direction:"asc"})},S=Ce.useMemo(()=>{if(!y.key)return r;const _=[...r];return y.key==="vendor"&&_.sort((j,A)=>{const N=(j?.vendor||"").toString(),C=(A?.vendor||"").toString(),R=N.localeCompare(C,"ja");if(R!==0)return y.direction==="asc"?R:-R;const D=(j?.name||"").toString(),U=(A?.name||"").toString(),T=D.localeCompare(U,"ja");return y.direction==="asc"?T:-T}),_},[r,y]);return i.jsxs("div",{ref:f,className:`inventory-list-droppable ${p?"highlight-drop":""}`,style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:p?"#f0f9ff":"transparent",transition:"background-color 0.2s",borderRadius:"8px",padding:"8px"},children:[i.jsx("div",{className:"inventory-table-container",children:t?i.jsx("p",{children:"Loading..."}):i.jsxs("table",{className:"inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsxs("th",{onClick:()=>b("vendor"),title:"",style:{cursor:"pointer",userSelect:"none"},children:[" ",y.key==="vendor"&&(y.direction==="asc"?"":"")]}),i.jsx("th",{style:{width:"40px"}})]})}),i.jsxs("tbody",{children:[S.map(_=>i.jsx(NE,{item:_,isLowStock:m,onUpdateQuantity:d,onDelete:u},_.id)),S.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:"7",style:{textAlign:"center",color:"#888",padding:"2rem"},children:p?"":""})})]}),i.jsx("tfoot",{children:i.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f9f9f9"},children:[i.jsx("td",{colSpan:"4",style:{textAlign:"right",paddingRight:"10px"},children:":"}),i.jsxs("td",{style:{textAlign:"right"},children:["",Math.round(r.reduce((_,j)=>_+(parseFloat(j.price)||0)*(parseFloat(j.quantity)||0),0)).toLocaleString()]}),i.jsx("td",{colSpan:"2"})]})})]})}),p&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(52, 152, 219, 0.1)",border:"2px dashed #3498db",borderRadius:"8px",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",color:"#3498db",fontWeight:"bold"},children:"+ "})]})},kE=({onBack:r})=>{const{user:t}=Ms(),s=t?.id,[l,c]=w.useState([]),[u,d]=w.useState([]),[f,p]=w.useState([]),[m,y]=w.useState([]),[v,b]=w.useState(new Set),[S,_]=w.useState(!0),[j,A]=w.useState(""),[N,C]=w.useState(!1),[R,D]=w.useState(null),[U,T]=w.useState(!1),[L,G]=w.useState(""),[q,V]=w.useState(!0),[z,O]=w.useState(!1),[F,I]=w.useState(null),[K,k]=w.useState("history"),[$,X]=w.useState(null),[ue,de]=w.useState(""),[M,P]=w.useState(!1),[ie,pe]=w.useState(null),[xe,ce]=w.useState(new Set),[Oe,Be]=w.useState(!1),[ke,De]=w.useState(""),[vt,tt]=w.useState(!1),[We,Ke]=w.useState(null),Pt=zs(en(ol,{activationConstraint:{distance:8}})),[it,cn]=w.useState("all"),[bn,Lt]=w.useState(new Set);w.useEffect(()=>{s&&lt()},[s]);const lt=async(ee=!1)=>{ee||_(!0);try{const[ve,H,re,ne,me]=await Promise.all([an.getAll(s),nr.getPriceListArray(),an.getIgnoredItems(s),an.getSnapshots(s),an.getDeletedSnapshots(s)]);c(ve),y(H),b(re),d(ne||[]),p(me||[]);const be=new Set(ve.map(Le=>Le.id));Lt(be)}catch(ve){console.error("Failed to load data:",ve)}finally{ee||_(!1)}},Wt=ee=>{if(!ee)return"-";const ve=new Date(ee);if(Number.isNaN(ve.getTime()))return String(ee);const H=ve.getFullYear(),re=String(ve.getMonth()+1).padStart(2,"0"),ne=String(ve.getDate()).padStart(2,"0"),me=String(ve.getHours()).padStart(2,"0"),be=String(ve.getMinutes()).padStart(2,"0");return`${H}/${re}/${ne} ${me}:${be}`},un=ee=>{const ve=ee?.items;return Array.isArray(ve)?ve:ve?[]:[]},Dn=ee=>{ee?.id&&s&&(de(""),X({title:"",message:`${ee.title||""}
`,onConfirm:async()=>{try{await an.deleteSnapshotToTrash(s,ee.id),await lt(!0),Ke({title:"",message:"",type:"success"})}catch(ve){console.error(ve),Ke({title:"",message:"()",type:"error"})}finally{X(null)}}}))},bt=ee=>{ee?.id&&s&&(de(""),X({title:"",message:`${ee.title||""}`,onConfirm:async()=>{try{await an.restoreSnapshotFromTrash(s,ee.id),await lt(!0),Ke({title:"",message:"",type:"success"})}catch(ve){console.error(ve),Ke({title:"",message:"",type:"error"})}finally{X(null)}}}))},tn=ee=>{ee?.id&&s&&(de(""),X({title:" ",message:`${ee.title||""}


 delete `,requireText:"delete",onConfirm:async()=>{try{await an.hardDeleteSnapshotFromTrash(s,ee.id),await lt(!0),Ke({title:"",message:"",type:"success"})}catch(ve){console.error(ve),Ke({title:"",message:"",type:"error"})}finally{X(null)}}}))},nn=ee=>{if(!ee)return;const ve=un(ee),H=["","","","","",""],re=ve.map(qe=>{const Fe=parseFloat(qe?.price)||0,Gt=qe?.quantity===""?0:parseFloat(qe?.quantity)||0,Sn=Math.round(Fe*Gt);return[qe?.name??"",Fe||"",qe?.unit??"",qe?.quantity??"",Sn||"",qe?.vendor??""]}),ne=qe=>{const Fe=String(qe??"");return Fe.includes(",")||Fe.includes('"')||Fe.includes(`
`)||Fe.includes("\r")?`"${Fe.replace(/"/g,'""')}"`:Fe},me=[H.map(ne).join(","),...re.map(qe=>qe.map(ne).join(","))].join(`
`),be=new Uint8Array([239,187,191]),Le=new Blob([be,me],{type:"text/csv"}),Te=URL.createObjectURL(Le),rt=(ee.title||"inventory_snapshot").toString().replace(/[\\/:*?"<>|]/g,"_"),Pe=(ee.snapshot_date?new Date(ee.snapshot_date):new Date).toISOString().slice(0,10),Je=document.createElement("a");Je.href=Te,Je.download=`InventorySnapshot_${Pe}_${rt}.csv`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(Te)},Bt=Ce.useMemo(()=>{const ee=re=>re?re.toString().trim():"",ve=new Map(l.map(re=>[ee(re.name),re])),H=[...l];return m.forEach((re,ne)=>{const me=ee(re.name);v.has(re.name)||v.has(me)||ve.has(me)||H.push({id:`phantom-${ne}`,isPhantom:!0,name:re.name.trim(),quantity:"",unit:re.unit||"",category:"",price:re.price,vendor:re.vendor,threshold:0})}),H.filter(re=>{const ne=ee(re.name);return!(v.has(re.name)||v.has(ne)||xe.has(re.name)||xe.has(ne))})},[l,m,v,xe]),gt=ee=>{const{active:ve,over:H}=ee;if(H&&H.id==="inventory-list-droppable"){const re=ve.data.current.item;ve.data.current.type==="csv-item"&&(D({name:re.name,price:re.price,unit:re.unit,category:"",threshold:0,quantity:0,vendor:re.vendor,isNewFromCsv:!0}),C(!0))}},dn=async ee=>{if(ee.preventDefault(),!s)return;const ve=new FormData(ee.target),H={name:ve.get("name"),quantity:parseFloat(ve.get("quantity")),unit:ve.get("unit"),category:ve.get("category"),threshold:parseFloat(ve.get("threshold")),vendor:R.vendor||"",price:R.price||0};try{R.id&&!R.isPhantom?await an.update(s,{...R,...H}):await an.add(s,H),C(!1),D(null),lt()}catch(re){console.error("Failed to save item:",re),Ke({title:"",message:"",type:"error"})}},rn=ee=>{pe(ee),P(!0)},mt=async()=>{if(ie)try{const ve=(H=>H?H.toString().trim():"")(ie?.name);ve&&ce(H=>{const re=new Set(H);return re.add(ve),re}),P(!1),pe(null)}catch(ee){console.error("Failed to delete/ignore item:",ee)}},wn=async(ee,ve)=>{try{if(!s)return;const H=Bt.find(re=>re.id===ee);if(!H)return;if(H.isPhantom){const re={name:H.name.trim(),quantity:ve,unit:H.unit,category:H.category||"",price:H.price,vendor:H.vendor,threshold:0},ne=await an.add(s,re);await lt(!0),Lt(me=>{const be=new Set(me);return be.add(ne.id),be})}else c(re=>re.map(ne=>ne.id===ee?{...ne,quantity:ve}:ne)),Lt(re=>{const ne=new Set(re);return ne.add(ee),ne}),await an.update(s,{...H,quantity:ve})}catch(H){console.error(H),Ke({title:"",message:"",type:"error"}),lt()}},It=async()=>{if(L&&s)try{const ee=l.reduce((ve,H)=>ve+(parseFloat(H.price)||0)*(parseFloat(H.quantity)||0),0);await an.createSnapshot(s,L,l,ee),q?(await an.resetStockQuantities(s),await lt(),Lt(new Set)):await lt(!0),T(!1),tt(!0)}catch(ee){console.error("Failed to complete inventory:",ee);const ve=ee?.message||ee?.error_description||(typeof ee=="string"?ee:null)||(()=>{try{return JSON.stringify(ee)}catch{return null}})()||"";Ke({title:"",message:`
${ve}`,type:"error"})}},fe=()=>{const ee=["","","","","",""],ve=Ie.map(Te=>{const rt=parseFloat(Te.price)||0,Pe=Te.quantity===""?0:parseFloat(Te.quantity)||0,Je=Math.round(rt*Pe);return[Te.name,rt,Te.unit,Te.quantity,Je,Te.vendor||""]}),H=[ee.join(","),...ve.map(Te=>Te.map(rt=>{const Pe=String(rt??"");return Pe.includes(",")||Pe.includes('"')||Pe.includes(`
`)?`"${Pe.replace(/"/g,'""')}"`:Pe}).join(","))].join(`
`),re=new Uint8Array([239,187,191]),ne=new Blob([re,H],{type:"text/csv"}),me=document.createElement("a"),be=URL.createObjectURL(ne),Le=new Date().toISOString().split("T")[0];me.href=be,me.download=`Inventory_${Le}.csv`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(be)},he=["","","","","","","","","","","",""],ge=[...new Set(Bt.map(ee=>ee.vendor).filter(ee=>ee))].sort(),Se=Bt.some(ee=>!ee.vendor),Ie=Bt.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())?it==="all"?!0:it==="inventory-check"?bn.has(ee.id)||!ee.isPhantom:it==="other"?!ee.vendor:ee.vendor===it:!1);return N?i.jsxs("div",{className:"inventory-edit-container fade-in",children:[i.jsx("div",{className:"container-header",children:i.jsx("h2",{className:"section-title",children:R&&!R.isNewFromCsv?"":""})}),i.jsx(_t,{className:"edit-form-card",children:i.jsxs("form",{onSubmit:dn,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"name",defaultValue:R?.name,required:!0,placeholder:": "})]}),i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"quantity",type:"number",step:"0.01",defaultValue:R?.quantity,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"unit",defaultValue:R?.unit||"g",required:!0,placeholder:"g, ml, ..."})]})]}),i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"category",defaultValue:R?.category,list:"category-list",placeholder:"",autoComplete:"off"}),i.jsx("datalist",{id:"category-list",children:he.map(ee=>i.jsx("option",{value:ee},ee))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:" ()"}),i.jsx(Ye,{name:"threshold",type:"number",step:"0.01",defaultValue:R?.threshold||0})]})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx(se,{variant:"ghost",type:"button",onClick:()=>{C(!1),D(null)},children:""}),i.jsx(se,{variant:"primary",type:"submit",children:""})]})]})})]}):i.jsx(Ds,{onDragEnd:gt,sensors:Pt,autoScroll:!1,children:i.jsxs("div",{className:"inventory-container fade-in",children:[i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:"  ()"}),i.jsxs("div",{className:"header-actions inventory-header-actions",children:[i.jsx(se,{variant:"ghost",onClick:r,children:" "}),i.jsx(se,{variant:"danger",className:"inventory-header-actions__btn inventory-header-actions__btn--compact",onClick:()=>{De(""),Be(!0)},children:" "}),i.jsx(se,{variant:"primary",className:"inventory-header-actions__btn inventory-header-actions__btn--main",style:{backgroundColor:"#2ecc71",borderColor:"#27ae60"},onClick:()=>{const ee=new Date;G(`${ee.getFullYear()}${ee.getMonth()+1} `),V(!0),T(!0)},children:" "}),i.jsx(se,{variant:"secondary",className:"inventory-header-actions__btn",onClick:()=>{I(null),k("history"),O(!0)},title:"",children:" "}),i.jsx(se,{variant:"primary",className:"inventory-header-actions__btn",onClick:()=>{D(null),C(!0)},children:"+ "})]})]}),i.jsx("div",{className:"inventory-split-layout",children:i.jsxs("div",{className:"inventory-right-panel",style:{paddingLeft:0,borderLeft:"none"},children:[i.jsxs("div",{className:"inventory-controls",children:[i.jsxs("div",{className:"inventory-controls__row inventory-controls__row--filters",children:[i.jsxs("div",{className:"inventory-controls__field",children:[i.jsx("label",{className:"inventory-controls__label",children:":"}),i.jsxs("select",{className:"inventory-controls__select",value:it==="inventory-check"?"":it,onChange:ee=>{ee.target.value&&cn(ee.target.value)},children:[i.jsx("option",{value:"",disabled:!0,children:""}),i.jsxs("optgroup",{label:"",children:[ge.map(ee=>i.jsx("option",{value:ee,children:ee},ee)),Se&&i.jsx("option",{value:"other",children:""})]})]})]}),i.jsx("input",{className:"inventory-controls__search",placeholder:" ...",value:j,onChange:ee=>A(ee.target.value)})]}),i.jsxs("div",{className:"inventory-controls__row inventory-controls__row--actions",children:[i.jsxs("button",{className:"inventory-controls__btn",onClick:()=>cn("inventory-check"),"data-active":it==="inventory-check"?"true":"false",children:["  (",bn.size,")"]}),i.jsx("button",{className:"inventory-controls__btn",onClick:fe,title:"CSV",children:" CSV (.csv)"}),it==="inventory-check"&&i.jsx("button",{className:"inventory-controls__btn",onClick:()=>window.print(),title:" / PDF",children:" "})]})]}),i.jsx(OE,{items:Ie,loading:S,onSearch:A,searchQuery:j,onEdit:ee=>{D(ee),C(!0)},onDelete:rn,onUpdateQuantity:wn})]})}),i.jsx(xn,{isOpen:U,onClose:()=>T(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{fontSize:"1rem",marginBottom:"1rem",lineHeight:"1.6"},children:""}),i.jsxs("div",{style:{background:"#e3f2fd",padding:"10px",borderRadius:"4px",marginBottom:"1.5rem",fontSize:"0.9rem",color:"#0d47a1"},children:[i.jsx("strong",{children:":"}),i.jsx("br",{}),"1. ",i.jsx("br",{}),"2. ",q?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"()0"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:""}),""]}),i.jsx("br",{}),""]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:q,onChange:ee=>V(ee.target.checked)}),i.jsxs("span",{style:{fontSize:"0.95rem",color:"#333"},children:["",i.jsx("strong",{children:"0"}),""]})]}),i.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"6px",lineHeight:1.4},children:""})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:" ()"}),i.jsx("input",{type:"text",value:L,onChange:ee=>G(ee.target.value),style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[i.jsx("button",{onClick:()=>T(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:It,style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:"#2ecc71",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:q?"":""})]})]})}),i.jsxs(xn,{isOpen:z,onClose:()=>O(!1),title:" ",size:"large",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[i.jsx("div",{style:{color:"#555",fontSize:"0.9rem"},children:K==="history"?i.jsxs(i.Fragment,{children:[": ",i.jsx("strong",{children:u.length})," "]}):i.jsxs(i.Fragment,{children:[": ",i.jsx("strong",{children:f.length})," "]})}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[i.jsx("button",{type:"button",onClick:()=>k("history"),style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #ccc",background:K==="history"?"#111":"#fff",color:K==="history"?"#fff":"#333",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"},children:""}),i.jsx("button",{type:"button",onClick:()=>k("trash"),style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #ccc",background:K==="trash"?"#111":"#fff",color:K==="trash"?"#fff":"#333",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"},children:""})]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>lt(!0),title:"",children:" "})]})]}),K==="history"&&u.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:""}):K==="trash"&&f.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:""}):i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:K==="trash"?"":""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",width:"120px"}})]})}),i.jsx("tbody",{children:(K==="history"?u:f).map(ee=>{const ve=un(ee).length,H=Math.round(parseFloat(ee.total_value)||0),re=K==="trash"?`trash-${ee.id}`:ee.id,ne=Wt(K==="trash"?ee.deleted_at:ee.snapshot_date);return i.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[i.jsx("td",{style:{padding:"10px",whiteSpace:"nowrap"},children:ne}),i.jsx("td",{style:{padding:"10px"},children:ee.title||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:ve.toLocaleString()}),i.jsxs("td",{style:{padding:"10px",textAlign:"right"},children:["",H.toLocaleString()]}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:K==="history"?i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>nn(ee),disabled:ve===0,title:ve===0?"items CSV":"CSV",children:" CSV"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>I(ee),children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>Dn(ee),title:"",children:""})]}):i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>nn(ee),disabled:ve===0,children:" CSV"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>I(ee),children:""}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>bt(ee),title:"",children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>tn(ee),title:"",children:""})]})})]},re)})})]})})]}),i.jsx(xn,{isOpen:!!$,onClose:()=>X(null),title:$?.title||"",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.6},children:$?.message}),$?.requireText&&i.jsxs("div",{style:{marginTop:"14px"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:[" ",i.jsx("span",{style:{fontFamily:"monospace",background:"#eee",padding:"2px 4px"},children:$.requireText})," "]}),i.jsx("input",{type:"text",value:ue,onChange:ee=>de(ee.target.value),placeholder:$.requireText,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>X(null),children:""}),i.jsx(se,{variant:"danger",disabled:!!$?.requireText&&ue!==$.requireText,onClick:()=>$?.onConfirm&&$.onConfirm(),children:""})]})]})}),i.jsx(xn,{isOpen:!!F,onClose:()=>I(null),title:F?` ${F.title||""}`:" ",size:"large",children:(()=>{const ee=F;if(!ee)return null;const ve=un(ee),H=Math.round(parseFloat(ee.total_value)||0),re=[...ve].sort((ne,me)=>{const be=(ne?.name||"").toString(),Le=(me?.name||"").toString();return be.localeCompare(Le,"ja")});return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"12px",color:"#555",fontSize:"0.9rem"},children:[i.jsxs("div",{children:[": ",i.jsx("strong",{children:Wt(ee.snapshot_date)})]}),i.jsxs("div",{children:[": ",i.jsx("strong",{children:re.length.toLocaleString()})]}),i.jsxs("div",{style:{marginLeft:"auto"},children:[": ",i.jsxs("strong",{children:["",H.toLocaleString()]})]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"12px"},children:i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>nn(ee),children:" CSV (.csv)"})}),re.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:" items "}):i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:""})]})}),i.jsx("tbody",{children:re.map((ne,me)=>{const be=parseFloat(ne?.price)||0,Le=ne?.quantity===""?0:parseFloat(ne?.quantity)||0,Te=Math.round(be*Le);return i.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[i.jsx("td",{style:{padding:"10px"},children:ne?.name||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:be?`${Math.round(be).toLocaleString()}`:"-"}),i.jsx("td",{style:{padding:"10px"},children:ne?.unit||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:Le?Le.toLocaleString():"0"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:Te?`${Te.toLocaleString()}`:"-"}),i.jsx("td",{style:{padding:"10px"},children:ne?.vendor||"-"})]},ne?.id||`${ne?.name||"item"}-${me}`)})})]})})]})})()}),i.jsx(xn,{isOpen:M,onClose:()=>P(!1),title:"",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsxs("p",{style:{fontSize:"1.1rem",marginBottom:"1rem",lineHeight:"1.6"},children:["",i.jsx("strong",{children:ie?.name}),""]}),i.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1.5rem",lineHeight:"1.5"},children:["",i.jsx("strong",{children:""}),"",i.jsx("br",{}),"CSV"]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx("button",{onClick:()=>P(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:mt,style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:"#d32f2f",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:""})]})]})}),i.jsx(xn,{isOpen:Oe,onClose:()=>Be(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{fontSize:"1rem",marginBottom:"1rem",lineHeight:"1.6",color:"#d32f2f",fontWeight:"bold"},children:""}),i.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1.5rem",lineHeight:"1.5"},children:["",i.jsx("br",{}),"CSV",i.jsx("br",{}),i.jsx("span",{style:{fontSize:"0.8rem"},children:""})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:[" ",i.jsx("span",{style:{fontFamily:"monospace",background:"#eee",padding:"2px 4px"},children:"delete"})," "]}),i.jsx("input",{type:"text",value:ke,onChange:ee=>De(ee.target.value),placeholder:"delete",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[i.jsx("button",{onClick:()=>Be(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:async()=>{if(ke==="delete")try{if(!s)return;await an.clearAll(s),lt(),Lt(new Set),Be(!1),Ke({title:"",message:"",type:"success"})}catch(ee){console.error(ee),Ke({title:"",message:"",type:"error"})}},disabled:ke!=="delete",style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:ke==="delete"?"#d32f2f":"#ccc",color:"white",cursor:ke==="delete"?"pointer":"not-allowed",fontSize:"0.9rem",fontWeight:"bold",transition:"background 0.2s"},children:""})]})]})}),i.jsx(xn,{isOpen:vt,onClose:()=>tt(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333",textAlign:"center",padding:"1rem"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsxs("h3",{style:{marginBottom:"1rem"},children:[L," "]}),i.jsxs("p",{style:{color:"#666",marginBottom:"1.5rem",lineHeight:"1.6"},children:["",i.jsx("br",{}),""]}),i.jsx("button",{onClick:()=>tt(!1),style:{padding:"8px 24px",borderRadius:"4px",border:"none",background:"#2ecc71",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"OK"})]})}),i.jsx(xn,{isOpen:!!We,onClose:()=>Ke(null),title:We?.title||"",size:"small",children:i.jsxs("div",{style:{color:"#333",textAlign:"center",padding:"1rem"},children:[We?.type==="success"&&i.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:""}),We?.type==="error"&&i.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:""}),i.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1.5rem",lineHeight:"1.6"},children:We?.message}),i.jsx("button",{onClick:()=>Ke(null),style:{padding:"8px 24px",borderRadius:"4px",border:"none",background:We?.type==="error"?"#e74c3c":"#2ecc71",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"OK"})]})})]})})},R0=r=>`planner_data_${r}`,Mi=r=>{try{if(!r)return{};let t=localStorage.getItem(R0(r));return t?JSON.parse(t):{}}catch{return{}}},Io=(r,t)=>{r&&localStorage.setItem(R0(r),JSON.stringify(t))},Oa={getAll:async r=>Mi(r),cleanupInvalidPlans:async(r,t)=>{const s=Mi(r);let l=!1;const c=new Set(t);return Object.keys(s).forEach(u=>{const d=s[u].length;s[u]=s[u].filter(f=>c.has(f.recipeId)),s[u].length!==d&&(l=!0),s[u].length===0&&(delete s[u],l=!0)}),l&&Io(r,s),s},addMeal:async(r,t,s,l)=>{const c=Mi(r);c[t]||(c[t]=[]);const u={id:Date.now().toString(),recipeId:s,type:l,note:""};return c[t].push(u),Io(r,c),u},removeMeal:async(r,t,s)=>{const l=Mi(r);l[t]&&(l[t]=l[t].filter(c=>c.id!==s),l[t].length===0&&delete l[t],Io(r,l))},updateMeal:async(r,t,s,l)=>{const c=Mi(r);if(c[t]){const u=c[t].findIndex(d=>d.id===s);u!==-1&&(c[t][u]={...c[t][u],...l},Io(r,c))}}},DE=({recipe:r})=>{const{attributes:t,listeners:s,setNodeRef:l,transform:c}=Mh({id:`recipe-${r.id}`,data:{recipe:r}}),u=c?{transform:`translate3d(${c.x}px, ${c.y}px, 0)`,position:"relative",zIndex:999}:void 0;return i.jsx("div",{ref:l,style:u,...s,...t,className:"draggable-recipe",children:r.title})},zE=({meal:r,dateStr:t,children:s})=>{const{attributes:l,listeners:c,setNodeRef:u,transform:d}=Mh({id:`meal-${r.id}`,data:{meal:r,dateStr:t,type:"meal"}}),f=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,position:"relative",zIndex:999}:void 0;return i.jsx("div",{ref:u,style:f,...c,...l,className:"draggable-meal-wrapper",children:s})},UE=({dateStr:r,dayNum:t,isToday:s,isOutside:l,children:c,onDrop:u})=>{const{setNodeRef:d,isOver:f}=hl({id:`date-${r}`,data:{dateStr:r}});return i.jsxs("div",{ref:d,className:`calendar-cell ${s?"today":""} ${l?"outside-month":""}`,style:{backgroundColor:f?"#ffe0b2":void 0},children:[i.jsx("div",{className:"day-number",children:t}),c]})},ME=({onBack:r,onSelectRecipe:t})=>{const{user:s}=Ms(),l=ml(),[c,u]=w.useState([]),[d,f]=w.useState({}),[p,m]=w.useState(new Date),[y,v]=w.useState(""),[b,S]=w.useState(!1),[_,j]=w.useState(null),A=zs(en(ol,{activationConstraint:{distance:8}}));w.useEffect(()=>{N()},[p]);const N=async()=>{const V=await zt.fetchRecipes(s);if(u(V),s?.id){const z=V.map(F=>F.id),O=await Oa.cleanupInvalidPlans(s.id,z);f(O)}},C=async V=>{const{active:z,over:O}=V;if(O&&O.id.startsWith("date-")){const F=O.data.current.dateStr;if(z.id.startsWith("recipe-")){const I=z.data.current.recipe;await Oa.addMeal(s.id,F,I.id,"dinner"),N()}else if(z.id.startsWith("meal-")){const{meal:I,dateStr:K}=z.data.current;if(K===F)return;await Oa.addMeal(s.id,F,I.recipeId,I.type||"dinner"),await Oa.removeMeal(s.id,K,I.id),N()}}},R=async(V,z,O)=>{O&&O.stopPropagation(),j({dateStr:V,mealId:z}),S(!0)},D=async()=>{if(!_)return;const{dateStr:V,mealId:z}=_;S(!1),j(null);try{await Oa.removeMeal(s.id,V,z),await N(),l.success("")}catch(O){l.error(""),console.error("Delete meal error:",O)}},U=()=>{S(!1),j(null)},T=()=>{const V=p.getFullYear(),z=p.getMonth(),O=new Date(V,z,1),F=new Date(V,z+1,0),I=[],K=O.getDay();for(let $=K-1;$>=0;$--){const X=new Date(V,z,-$);I.push({date:X,isOutside:!0})}for(let $=1;$<=F.getDate();$++){const X=new Date(V,z,$);I.push({date:X,isOutside:!1})}const k=42-I.length;for(let $=1;$<=k;$++){const X=new Date(V,z+1,$);I.push({date:X,isOutside:!0})}return I},L=V=>`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`,G=c.filter(V=>V.title.toLowerCase().includes(y.toLowerCase())),q=V=>{m(new Date(p.getFullYear(),p.getMonth()+V,1))};return i.jsxs("div",{className:"planner-container fade-in",children:[b&&i.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(_t,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[i.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:""})," "]}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),i.jsx("strong",{children:""})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:U,children:""}),i.jsx(se,{variant:"danger",onClick:D,children:""})]})]})}),i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:" "}),i.jsx("div",{className:"header-actions",children:i.jsx(se,{variant:"ghost",onClick:r,children:" "})})]}),i.jsx(Ds,{onDragEnd:C,sensors:A,children:i.jsxs("div",{className:"planner-layout",children:[i.jsxs("div",{className:"recipe-sidebar",children:[i.jsx("div",{className:"sidebar-search",children:i.jsx(Ye,{placeholder:"...",value:y,onChange:V=>v(V.target.value)})}),i.jsx("div",{className:"draggable-list",children:G.map(V=>i.jsx(DE,{recipe:V},V.id))})]}),i.jsxs("div",{className:"planner-calendar",children:[i.jsxs("div",{className:"calendar-header",children:[i.jsx(se,{variant:"ghost",onClick:()=>q(-1),children:" "}),i.jsxs("h3",{style:{margin:0},children:[p.getFullYear()," ",p.getMonth()+1,""]}),i.jsx(se,{variant:"ghost",onClick:()=>q(1),children:" "})]}),i.jsxs("div",{className:"calendar-grid",children:[["","","","","","",""].map(V=>i.jsx("div",{className:"calendar-day-header",children:V},V)),T().map((V,z)=>{const O=L(V.date),F=d[O]||[],I=O===L(new Date);return i.jsx(UE,{dateStr:O,dayNum:V.date.getDate(),isToday:I,isOutside:V.isOutside,children:F.map(K=>{const k=c.find($=>$.id===K.recipeId);return i.jsx(zE,{meal:K,dateStr:O,children:i.jsxs("div",{className:"planned-meal",title:k?.title,onClick:()=>k&&t&&t(k),children:[i.jsx("span",{children:k?.title||"Unknown"}),i.jsx("span",{className:"delete-meal-btn",onPointerDown:$=>{$.stopPropagation()},onClick:$=>R(O,K.id,$),children:""})]})},K.id)})},z)})]})]})]})})]})},LE=({onBack:r})=>{const{user:t}=Ms(),s=ml(),[l,c]=w.useState(new Date().toISOString().slice(0,10)),[u,d]=w.useState(new Date(Date.now()+7*864e5).toISOString().slice(0,10)),[f,p]=w.useState([]),[m,y]=w.useState(!1),[v,b]=w.useState(!1),[S,_]=w.useState(!1),[j,A]=w.useState(!1),N=async()=>{y(!0);try{if(!t?.id){s.error(""),y(!1);return}const T=await Oa.getAll(t.id),L=new Date(l),G=new Date(u);G.setHours(23,59,59,999);const q=[];if(Object.keys(T).forEach(K=>{const k=new Date(K);k>=L&&k<=G&&T[K].forEach($=>{q.push($.recipeId)})}),q.length===0){s.info(""),b(!1);return}const V=await zt.fetchRecipes(t),z=q.map(K=>V.find(k=>k.id===K)).filter(Boolean),O={};z.forEach(K=>{[...K.ingredients||[],...K.flours||[],...K.breadIngredients||[]].forEach(X=>{if(!X.name)return;const ue=X.name.trim(),de=parseFloat(X.quantity)||0,M=X.unit||"";O[ue]||(O[ue]={quantity:0,unit:M,count:0}),O[ue].quantity+=de})});const F=await an.getAll(t.id),I=Object.keys(O).map(K=>{const k=O[K],$=F.find(de=>de.name===K),X=$?parseFloat($.quantity):0,ue=Math.max(0,k.quantity-X);return{name:K,required:k.quantity,stock:X,toOrder:ue,unit:k.unit}}).filter(K=>K.toOrder>.01);p(I),b(!0)}catch(T){console.error(T),s.error("")}finally{y(!1)}},C=()=>{_(!0)},R=()=>{A(!0)},D=()=>f.map(T=>`${T.name}: ${T.toOrder.toFixed(1)}${T.unit}`).join(`
`),U=async()=>{const T=document.getElementById("copy-textarea");if(T){T.select();try{await navigator.clipboard.writeText(T.value),s.success("")}catch{document.execCommand("copy"),s.success("")}}};return i.jsxs("div",{className:"order-list-container fade-in",children:[i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:" "}),i.jsx("div",{className:"header-actions",children:i.jsx(se,{variant:"ghost",onClick:r,children:" "})})]}),i.jsx("div",{className:"filter-card",children:i.jsxs("div",{className:"date-range-inputs",children:[i.jsxs("div",{children:[i.jsx("label",{children:""}),i.jsx("input",{type:"date",value:l,onChange:T=>c(T.target.value)})]}),i.jsx("span",{children:""}),i.jsxs("div",{children:[i.jsx("label",{children:""}),i.jsx("input",{type:"date",value:u,onChange:T=>d(T.target.value)})]}),i.jsx(se,{variant:"primary",onClick:N,disabled:m,children:m?"...":""})]})}),v&&i.jsxs("div",{className:"order-results",children:[i.jsxs("div",{className:"results-header",children:[i.jsxs("h3",{children:[" (",f.length,")"]}),i.jsxs("div",{className:"result-actions",children:[i.jsx(se,{variant:"secondary",onClick:C,children:" "}),i.jsx(se,{variant:"secondary",onClick:R,children:" "})]})]}),i.jsxs("table",{className:"order-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:f.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:""})}):f.map((T,L)=>i.jsxs("tr",{children:[i.jsx("td",{children:T.name}),i.jsxs("td",{style:{textAlign:"right"},children:[T.required.toFixed(1)," ",T.unit]}),i.jsxs("td",{style:{textAlign:"right"},children:["-",T.stock.toFixed(1)]}),i.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[T.toOrder.toFixed(1)," ",i.jsx("span",{style:{fontSize:"0.8em"},children:T.unit})]})]},L))})]})]}),i.jsx(xn,{isOpen:S,onClose:()=>_(!1),title:" ",size:"medium",children:i.jsxs("div",{className:"copy-modal-content",children:[i.jsx("p",{className:"copy-instructions",children:""}),i.jsx("textarea",{id:"copy-textarea",className:"copy-textarea",readOnly:!0,value:D(),onClick:T=>T.target.select()}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:U,children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>_(!1),children:""})]})]})}),i.jsx(xn,{isOpen:j,onClose:()=>A(!1),title:" ",size:"large",children:i.jsxs("div",{className:"print-preview-content",children:[i.jsxs("div",{className:"print-preview-header",children:[i.jsx("h3",{children:""}),i.jsxs("p",{className:"print-period",children:[": ",l,"  ",u]})]}),i.jsxs("table",{className:"print-preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:f.map((T,L)=>i.jsxs("tr",{children:[i.jsx("td",{children:T.name}),i.jsxs("td",{style:{textAlign:"right"},children:[T.required.toFixed(1)," ",T.unit]}),i.jsxs("td",{style:{textAlign:"right"},children:["-",T.stock.toFixed(1)]}),i.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[T.toOrder.toFixed(1)," ",T.unit]})]},L))})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:()=>window.print(),children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>A(!1),children:""})]})]})})]})},BE=()=>{const[r,t]=w.useState(!0),[s,l]=w.useState(!1),[c,u]=w.useState(""),[d,f]=w.useState(""),[p,m]=w.useState(""),[y,v]=w.useState(""),[b,S]=w.useState(""),[_,j]=w.useState(!1),{login:A,register:N,sendPasswordResetEmail:C}=Ms(),R=async T=>{T.preventDefault(),v(""),S(""),j(!0);try{await A(c.trim(),d)}catch(L){v(L.message||"")}finally{j(!1)}},D=async T=>{T.preventDefault(),v(""),S(""),j(!0);try{if(!p.trim()){v("ID: yoshito");return}(await N(c.trim(),d,p.trim()))?.needsEmailConfirmation?S(""):S(""),t(!0),f("")}catch(L){v(L.message||"")}finally{j(!1)}},U=async T=>{T.preventDefault(),v(""),S(""),j(!0);try{await C(c.trim()),S(""),l(!1)}catch(L){v(L.message||"")}finally{j(!1)}};return i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:i.jsxs(_t,{style:{width:"100%",maxWidth:"420px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsxs("h1",{style:{fontFamily:'"Pinyon Script", cursive',fontSize:"3rem",margin:0,color:"var(--color-primary)"},children:["Recipe",i.jsx("br",{}),"Management"]}),i.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:s?"":r?"":""})]}),y&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:y}),b&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:b}),i.jsxs("form",{onSubmit:s?U:r?R:D,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"email",value:c,onChange:T=>u(T.target.value),placeholder:"name@example.com",autoComplete:"email",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!s&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:d,onChange:T=>f(T.target.value),placeholder:"",autoComplete:r?"current-password":"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!s&&!r&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:["ID ",i.jsx("span",{style:{fontSize:"0.85em",fontWeight:"normal",color:"#666"},children:"(: yoshito / staff)"})]}),i.jsx("input",{type:"text",value:p,onChange:T=>m(T.target.value),placeholder:"ID",autoComplete:"username",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0}),i.jsx("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"6px",lineHeight:1.4},children:"//"})]}),i.jsx(se,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.05rem"},disabled:_,children:s?"":r?"":""})]}),i.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s?i.jsx("button",{type:"button",onClick:()=>{l(!1),v(""),S("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""}):i.jsx("button",{type:"button",onClick:()=>{l(!0),v(""),S("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""}),!s&&i.jsx("button",{type:"button",onClick:()=>{t(!r),v(""),S("")},style:{background:"none",border:"none",color:"var(--color-primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:r?"":""})]})]})})},IE=()=>{const{updatePassword:r,finishPasswordRecovery:t,logout:s}=Ms(),[l,c]=Ce.useState(""),[u,d]=Ce.useState(""),[f,p]=Ce.useState(""),[m,y]=Ce.useState(""),[v,b]=Ce.useState(!1),S=async _=>{if(_.preventDefault(),p(""),y(""),!l||l.length<8){p("8");return}if(l!==u){p("");return}b(!0);try{await r(l),y(""),t()}catch(j){console.error(j),p(j.message||"")}finally{b(!1)}};return i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:i.jsxs(_t,{style:{width:"100%",maxWidth:"420px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[i.jsx("h2",{style:{textAlign:"center",color:"var(--color-primary)",marginBottom:"1rem"},children:""}),i.jsx("p",{style:{color:"#666",fontSize:"0.9rem",lineHeight:1.5,marginTop:0},children:""}),f&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:f}),m&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:m}),i.jsxs("form",{onSubmit:S,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:l,onChange:_=>c(_.target.value),placeholder:"8",autoComplete:"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:u,onChange:_=>d(_.target.value),placeholder:"",autoComplete:"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),i.jsx(se,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.05rem"},disabled:v,children:""})]}),i.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",gap:"10px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>{t()},style:{flex:1},children:""}),i.jsx(se,{variant:"ghost",onClick:s,style:{flex:1},children:""})]})]})})};function qE(){const{user:r,logout:t,loading:s,isPasswordRecovery:l}=Ms(),c=ml(),[u,d]=xS(),[f,p]=w.useState([]),[m,y]=w.useState(!0),[v,b]=w.useState(0),[S,_]=w.useState([]),[j,A]=w.useState(!1),[N,C]=w.useState({}),[R,D]=w.useState({}),U=u.get("view")||"list",T=u.get("id"),L=f.find(H=>String(H.id)===T)||null,[G,q]=w.useState(""),[V,z]=w.useState(null),[O,F]=w.useState(null),[I,K]=w.useState(""),[k,$]=w.useState(!1),[X,ue]=w.useState(!1),[de,M]=w.useState(new Set),[P,ie]=w.useState("normal"),[pe,xe]=w.useState(!1),[ce,Oe]=w.useState(null),[Be,ke]=w.useState(()=>typeof window>"u"?!1:window.matchMedia?.("(max-width: 700px)")?.matches??!1),De={data:"",users:"","order-list":""};w.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const H=window.matchMedia("(max-width: 700px)"),re=()=>ke(!!H.matches);return re(),H.addEventListener?H.addEventListener("change",re):H.addListener(re),()=>{H.removeEventListener?H.removeEventListener("change",re):H.removeListener(re)}},[]),w.useEffect(()=>{if(!Be||!De[U]||typeof window>"u")return;const H=`pc-recommend-shown:${U}`;try{if(window.sessionStorage.getItem(H)==="1")return;window.sessionStorage.setItem(H,"1")}catch{}Oe(U)},[U,Be]),w.useEffect(()=>{if(!s){A(!1);return}const H=setTimeout(()=>A(!0),3500);return()=>clearTimeout(H)},[s]),w.useEffect(()=>{s||r&&(cn(),it(),Ke())},[s,r?.id]),w.useEffect(()=>{if(s)return;if(!r||r.role!=="admin"){C({}),D({});return}let H=!1;return(async()=>{try{const re=await Bi.fetchAllProfiles();if(H)return;const ne={},me={};for(const be of re||[])be?.id&&(ne[String(be.id)]=be),be?.display_id&&(me[String(be.display_id)]=be);C(ne),D(me)}catch(re){console.warn("Failed to load profiles for admin owner labels",re)}})(),()=>{H=!0}},[s,r?.id,r?.role]);const vt=H=>{const ne=(H?.tags||[]).find(Le=>Le&&Le.startsWith("owner:"));if(!ne)return"/";const me=String(ne.slice(6)),be=N[me]||R[me]||null;return be?be.display_id||be.email||me:me.length>12?`${me.slice(0,8)}`:me},tt=zs(en(cl,{activationConstraint:{distance:10}}),en(ul,{activationConstraint:{delay:1e3,tolerance:5}}),en(Us,{coordinateGetter:pl})),We=H=>{const{active:re,over:ne}=H;re.id!==ne.id&&p(me=>{const be=me.findIndex(Pe=>Pe.id===re.id),Le=me.findIndex(Pe=>Pe.id===ne.id);if(be===-1||Le===-1)return me;const Te=qa(me,be,Le),rt=Te.map((Pe,Je)=>({id:Pe.id,order_index:Je}));return zt.updateOrder(rt).catch(Pe=>console.error("Order update failed",Pe)),Te})},Ke=async()=>{try{const H=await zt.fetchRecentRecipes();_(H||[])}catch(H){console.error("Failed to load history:",H)}},Pt=async H=>{const re=[H,...S.filter(ne=>ne!==H)].slice(0,20);_(re);try{await zt.addToHistory(H)}catch(ne){console.error("Failed to sync history",ne)}},it=async()=>{try{const H=await zt.getDeletedCount();b(H||0)}catch(H){console.error("Failed to load trash count:",H)}},cn=async()=>{try{y(!0);const H=await zt.fetchRecipes(r);p(H||[])}catch(H){console.error("Failed to fetch recipes:",H)}finally{y(!1)}},bn=[...new Set(f.map(H=>H.course).filter(Boolean))],Lt=[...new Set(f.map(H=>H.category).filter(Boolean))],lt=f.reduce((H,re)=>(re.storeName&&(H[re.storeName]=(H[re.storeName]||0)+1),H),{}),Wt=f.reduce((H,re)=>(re.course&&(H[re.course]=(H[re.course]||0)+1),H),{}),un=f.reduce((H,re)=>(re.category&&(H[re.category]=(H[re.category]||0)+1),H),{}),Dn=f.filter(H=>{const re=G===""||G==="recent"&&S.includes(H.id)||H.tags&&H.tags.includes(G)||H.category&&H.category===G||H.storeName&&H.storeName===G,ne=I.toLowerCase().trim(),me=!ne||H.title.toLowerCase().includes(ne)||H.description&&H.description.toLowerCase().includes(ne)||H.ingredients&&H.ingredients.some(be=>be.name.toLowerCase().includes(ne));return re&&me}),bt=G===""&&!I.trim()&&U==="list",tn=(H,re={})=>{d({view:"detail",id:H.id,...re})},nn=async(H,re=!1)=>{try{if(H.tags&&r.role!=="admin"&&r.displayId!=="yoshito"&&H.tags.some(me=>me==="owner:yoshito")){c.warning("");return}re?(await zt.restoreRecipe(H.id),(U==="trash"||U==="detail")&&(d({view:"trash"}),gt()),c.success("")):(await zt.deleteRecipe(H.id),p(f.filter(ne=>ne.id!==H.id)),d({view:"list"}),it())}catch(ne){console.error("Failed to delete/restore recipe:",ne),c.error("")}finally{it()}},Bt=async H=>{try{await zt.hardDeleteRecipe(H.id),p(f.filter(re=>re.id!==H.id)),d({view:"trash"}),c.success(""),gt(),it()}catch(re){console.error("Failed to hard delete recipe:",re),c.error("")}},gt=async()=>{try{y(!0);const H=await zt.fetchDeletedRecipes();p(H||[]),q("")}catch(H){console.error("Failed to fetch deleted recipes:",H)}finally{y(!1)}},dn=()=>{d({view:"trash"}),gt()},rn=()=>{d({view:"list"}),cn()},mt=async(H,re)=>{try{let ne,me=re;if(re&&r.role!=="admin"){const be=H.tags?.find(Te=>Te.startsWith("owner:"));be===`owner:${r.id}`||r.displayId&&be===`owner:${r.displayId}`||(console.log(`Editing Recipe (Owner Tag: ${be||"None"}) as ${r.id}. Not the owner. Switching to Create mode (Copy).`),me=!1)}me?(ne=await zt.updateRecipe(H,r),p(f.map(be=>be.id===ne.id?ne:be))):(ne=await zt.createRecipe(H,r),p([ne,...f])),d(me?{view:"detail",id:ne.id}:{view:"detail",id:ne.id})}catch(ne){console.error("Failed to save recipe:",ne),c.error(`
: ${ne.message||ne.error_description||JSON.stringify(ne)}`)}},wn=(H,re="")=>{const me=["","baker","","","","dough","fermentation"].some(qe=>(H.title||"").toLowerCase().includes(qe)),be=["flour","","","","","","","","",""],Le=["yeast","","",""],Te=H.ingredients||[],rt=Te.some(qe=>Le.some(Fe=>(qe.name||"").toLowerCase().includes(Fe))),Pe=Te.some(qe=>be.some(Fe=>(qe.name||"").toLowerCase().includes(Fe))&&!qe.name.includes(""));if(Te.some(qe=>qe.quantity&&String(qe.quantity).includes("%")||qe.unit&&String(qe.unit).includes("%"))||rt||me&&Pe){H.type="bread",H.flours=[],H.breadIngredients=[];const qe=["flour","","","","","","","",""];if(Te.forEach(Fe=>{qe.some(Sn=>(Fe.name||"").includes(Sn))?H.flours.push(Fe):H.breadIngredients.push(Fe)}),H.flours.length===0&&Te.length>0){const Fe=Te[0];(Fe.name||"").includes("")&&(H.flours.push(Fe),H.breadIngredients=H.breadIngredients.filter(Gt=>Gt!==Fe))}}H.sourceUrl=re,re&&(H.category="URL"),F(H),d({view:"create"})},It=()=>{ue(!X),M(new Set)},fe=H=>{const re=new Set(de);re.has(H)?re.delete(H):re.add(H),M(re)},he=()=>{xe(!0)},ge=()=>{xe(!1)},Se=async()=>{xe(!1);try{y(!0),U==="trash"?(await Promise.all(Array.from(de).map(H=>zt.hardDeleteRecipe(H))),gt()):(await Promise.all(Array.from(de).map(H=>zt.deleteRecipe(H))),p(f.filter(H=>!de.has(H.id))),it()),M(new Set),ue(!1),c.success("")}catch(H){console.error("Bulk delete failed",H),c.warning(""),U==="trash"?gt():cn()}finally{y(!1)}},Ie=async()=>{if(window.confirm(`${de.size}`))try{y(!0);for(const H of de)await zt.restoreRecipe(H);p(f.filter(H=>!de.has(H.id))),it(),ue(!1),M(new Set),c.success(""),gt()}catch(H){console.error("Bulk restore failed",H),c.warning(""),gt()}finally{y(!1)}},ee=()=>{const H=Dn.map(re=>re.id);M(new Set(H))},ve=H=>{p([H,...f]),d({view:"edit",id:H.id})};return w.useEffect(()=>{U==="trash"?gt():r&&cn()},[U,r]),s&&!j?i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):r?l?i.jsx(IE,{}):i.jsxs(CS,{children:[pe&&i.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(_t,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[i.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:""})," ",de.size,"",U==="trash"?"":""]}),i.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:U==="trash"?"":""}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:ge,children:""}),i.jsx(se,{variant:"danger",onClick:Se,children:U==="trash"?"":""})]})]})}),i.jsx(xn,{isOpen:!!ce,onClose:()=>Oe(null),title:"PC",size:"small",children:i.jsxs("div",{style:{color:"#333",lineHeight:1.6},children:[i.jsx("p",{style:{marginTop:0},children:De[ce]?i.jsxs(i.Fragment,{children:["",i.jsx("strong",{children:De[ce]}),"/"]}):i.jsx(i.Fragment,{children:"/"})}),i.jsxs("p",{style:{marginBottom:0},children:["",i.jsx("strong",{children:"PC"}),""]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"18px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>{Oe(null),d({view:"list"})},children:""}),i.jsx(se,{variant:"primary",onClick:()=>Oe(null),children:"OK"})]})]})}),(U==="list"||U==="trash")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"container-header",children:[i.jsxs("h2",{className:"section-title",children:[U==="trash"?" ()":"",U==="list"&&i.jsxs("span",{style:{fontSize:"0.8em",marginLeft:"8px",color:"#666",fontWeight:"normal"},children:["(",f.length,")"]})]}),i.jsx("div",{className:"header-actions",children:U==="list"||U==="trash"?i.jsxs(i.Fragment,{children:[X?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"ghost",onClick:It,children:""}),i.jsx(se,{variant:"secondary",onClick:ee,children:""}),U==="trash"&&i.jsxs(se,{variant:"secondary",onClick:Ie,disabled:de.size===0,style:{marginRight:"8px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:[" (",de.size,")"]}),i.jsxs(se,{variant:"danger",onClick:he,disabled:de.size===0,children:[U==="trash"?"":""," (",de.size,")"]})]}):i.jsx(i.Fragment,{children:U==="list"?i.jsx(se,{onClick:()=>d({view:"create"}),className:"primary-action-btn",children:"+ "}):i.jsx(se,{variant:"ghost",onClick:rn,children:" "})}),i.jsx("button",{className:"mobile-menu-toggle",onClick:()=>$(!k),"aria-label":"",children:""}),i.jsxs("div",{className:`secondary-actions ${k?"open":""}`,children:[i.jsx("button",{type:"button",className:"slide-menu-close",onClick:()=>$(!1),"aria-label":"",children:""}),i.jsxs("div",{className:"slide-menu-user",style:{marginBottom:"1rem",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.25)",background:"rgba(0,0,0,0.15)",color:"white",fontSize:"0.9rem",lineHeight:1.4},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px"},children:[i.jsxs("div",{style:{fontWeight:"bold"},children:[": ",r?.displayId||r?.email||(r?.id?`${String(r.id).slice(0,8)}`:"---")]}),r?.role==="admin"&&i.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"999px",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.25)",whiteSpace:"nowrap"},children:""})]}),r?.email&&r?.displayId&&i.jsx("div",{style:{opacity:.85,fontSize:"0.8rem",marginTop:"4px",wordBreak:"break-all"},children:r.email})]}),U==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs(se,{variant:"secondary",onClick:()=>{z("url"),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," Web"]}),i.jsxs(se,{variant:"secondary",onClick:()=>{z("image"),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"inventory"}),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"planner"}),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"data"}),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),r?.role==="admin"&&i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"users"}),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"order-list"}),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"})]}),!X&&i.jsxs(se,{variant:"ghost",onClick:()=>{It(),$(!1)},className:"danger-text",children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," ",U==="trash"?"":""]}),U==="list"&&i.jsxs(se,{variant:"ghost",onClick:()=>{dn(),$(!1)},style:{position:"relative"},children:[i.jsx("span",{style:{marginRight:"8px"},children:""}),"  ",v>0&&i.jsx("span",{className:"trash-badge",children:v})]}),i.jsxs(se,{variant:"ghost",onClick:()=>{rn(),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"ghost",onClick:()=>{t(),$(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]})]}),i.jsx("div",{className:`menu-backdrop ${k?"open":""}`,onClick:()=>$(!1),"aria-hidden":"true"})]}):null})]}),U==="list"&&i.jsxs("div",{className:"search-container",children:[i.jsx("span",{className:"search-icon",children:""}),i.jsx("input",{type:"text",className:"search-input",placeholder:"...",value:I,onChange:H=>K(H.target.value)})]}),i.jsxs("div",{className:"tag-filter-container",children:[i.jsxs("select",{className:"store-filter-select",value:jh.includes(G)?G:"",onChange:H=>q(H.target.value||""),children:[i.jsx("option",{value:"",children:""}),jh.map(H=>i.jsxs("option",{value:H,children:[H," (",lt[H]||0,")"]},H))]}),i.jsxs("select",{className:"store-filter-select",value:bn.includes(G)?G:"",onChange:H=>q(H.target.value||""),children:[i.jsx("option",{value:"",children:""}),bn.sort().map(H=>i.jsxs("option",{value:H,children:[H," (",Wt[H]||0,")"]},H))]}),i.jsxs("select",{className:"store-filter-select",value:Lt.includes(G)?G:"",onChange:H=>q(H.target.value||""),children:[i.jsx("option",{value:"",children:""}),Lt.sort().map(H=>i.jsxs("option",{value:H,children:[H," (",un[H]||0,")"]},H))]}),i.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"16px",display:"flex",gap:"8px",borderLeft:"1px solid #ccc",paddingLeft:"16px"},children:[i.jsx("button",{className:`tag-filter-btn ${P==="normal"?"active":""}`,onClick:()=>ie("normal"),style:{minWidth:"auto",padding:"4px 12px"},children:""}),i.jsx("button",{className:`tag-filter-btn ${P==="all"?"active":""}`,onClick:()=>ie("all"),style:{minWidth:"auto",padding:"4px 12px"},children:""})]})]}),m?i.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"..."}):f.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#888"},children:[U==="trash"?"":"",G!==""&&i.jsx("p",{children:""})]}):i.jsxs("div",{className:"main-content-wrapper",children:[U==="list"&&i.jsx("div",{className:"recent-list-wrapper",children:i.jsx(RE,{recipes:f,recentIds:S,onSelect:tn})}),i.jsx("div",{className:"recipe-list-container",children:U==="list"?i.jsx(Ds,{sensors:tt,collisionDetection:oh,onDragEnd:We,children:i.jsx(gy,{recipes:Dn,onSelectRecipe:tn,isSelectMode:X,selectedIds:de,onToggleSelection:fe,disableDrag:!bt,displayMode:P,showOwner:r?.role==="admin",ownerLabelFn:vt})}):i.jsx(gy,{recipes:Dn,onSelectRecipe:tn,isSelectMode:X,selectedIds:de,onToggleSelection:fe,disableDrag:!0,displayMode:P,showOwner:r?.role==="admin",ownerLabelFn:vt})})]})]}),U==="detail"&&L&&i.jsx(iE,{recipe:L,ownerLabel:r?.role==="admin"?vt(L):void 0,isDeleted:!!L.deletedAt,onBack:()=>{u.get("from")==="planner"?d({view:"planner"}):L.deletedAt?dn():rn()},backLabel:u.get("from")==="planner"?" ":void 0,onList:u.get("from")==="planner"?rn:void 0,onEdit:()=>d({view:"edit",id:L.id,from:u.get("from")}),onDelete:nn,onView:Pt,onHardDelete:Bt,onDuplicate:ve}),U==="edit"&&L&&i.jsx(tv,{initialData:L,onCancel:()=>d({view:"detail",id:L.id}),onSave:H=>mt(H,!0)},`edit-${L.id}`),U==="create"&&i.jsx(tv,{initialData:O,onCancel:()=>{d({view:"list"}),F(null)},onSave:H=>mt(H,!1)},O?"create-form-imported":"create-form"),V&&i.jsx(_0,{initialMode:V,onClose:()=>z(null),onImport:wn}),(U==="data"||U==="data-management")&&i.jsx(EE,{onBack:()=>d({view:"list"})}),U==="levain-guide"&&i.jsx(TE,{onBack:()=>d({view:"list"})}),U==="users"&&r?.role==="admin"&&i.jsx(AE,{onBack:()=>d({view:"list"})}),U==="inventory"&&i.jsx(kE,{onBack:()=>d({view:"list"})}),U==="planner"&&i.jsx(ME,{onBack:()=>d({view:"list"}),onSelectRecipe:H=>tn(H,{from:"planner"})}),U==="order-list"&&i.jsx(LE,{onBack:()=>d({view:"list"})})]}):i.jsx(BE,{})}function $E(){return i.jsx(SE,{children:i.jsx(YC,{children:i.jsx(qE,{})})})}class HE extends Ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){console.error("Uncaught error:",t,s),this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?i.jsxs("div",{style:{padding:"2rem",color:"red"},children:[i.jsx("h1",{children:""}),i.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),i.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),i.jsx("br",{}),i.jsx("button",{onClick:()=>window.location.reload(),children:""})]}):this.props.children}}Kb.createRoot(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(HE,{children:i.jsx(pS,{children:i.jsx($E,{})})})}));
