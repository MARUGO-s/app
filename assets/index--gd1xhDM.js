(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function cv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wd={exports:{}},Ni={};var Lm;function Gb(){if(Lm)return Ni;Lm=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(l,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var f in c)f!=="key"&&(u[f]=c[f])}else u=c;return c=u.ref,{$$typeof:r,type:l,key:d,ref:c!==void 0?c:null,props:u}}return Ni.Fragment=t,Ni.jsx=s,Ni.jsxs=s,Ni}var Bm;function Vb(){return Bm||(Bm=1,wd.exports=Gb()),wd.exports}var i=Vb(),Sd={exports:{}},Be={};var Im;function Yb(){if(Im)return Be;Im=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,O={};function D(M,V,Z){this.props=M,this.context=V,this.refs=O,this.updater=Z||_}D.prototype.isReactComponent={},D.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},D.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=D.prototype;function z(M,V,Z){this.props=M,this.context=V,this.refs=O,this.updater=Z||_}var q=z.prototype=new N;q.constructor=z,j(q,D.prototype),q.isPureReactComponent=!0;var U=Array.isArray;function C(){}var B={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function $(M,V,Z){var le=Z.ref;return{$$typeof:r,type:M,key:V,ref:le!==void 0?le:null,props:Z}}function Y(M,V){return $(M.type,V,M.props)}function T(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function A(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return V[Z]})}var P=/\/+/g;function L(M,V){return typeof M=="object"&&M!==null&&M.key!=null?A(""+M.key):V.toString(36)}function K(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(C,C):(M.status="pending",M.then(function(V){M.status==="pending"&&(M.status="fulfilled",M.value=V)},function(V){M.status==="pending"&&(M.status="rejected",M.reason=V)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function k(M,V,Z,le,fe){var ye=typeof M;(ye==="undefined"||ye==="boolean")&&(M=null);var Ce=!1;if(M===null)Ce=!0;else switch(ye){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(M.$$typeof){case r:case t:Ce=!0;break;case y:return Ce=M._init,k(Ce(M._payload),V,Z,le,fe)}}if(Ce)return fe=fe(M),Ce=le===""?"."+L(M,0):le,U(fe)?(Z="",Ce!=null&&(Z=Ce.replace(P,"$&/")+"/"),k(fe,V,Z,"",function(he){return he})):fe!=null&&(T(fe)&&(fe=Y(fe,Z+(fe.key==null||M&&M.key===fe.key?"":(""+fe.key).replace(P,"$&/")+"/")+Ce)),V.push(fe)),1;Ce=0;var Ie=le===""?".":le+":";if(U(M))for(var Ue=0;Ue<M.length;Ue++)le=M[Ue],ye=Ie+L(le,Ue),Ce+=k(le,V,Z,ye,fe);else if(Ue=S(M),typeof Ue=="function")for(M=Ue.call(M),Ue=0;!(le=M.next()).done;)le=le.value,ye=Ie+L(le,Ue++),Ce+=k(le,V,Z,ye,fe);else if(ye==="object"){if(typeof M.then=="function")return k(K(M),V,Z,le,fe);throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function G(M,V,Z){if(M==null)return M;var le=[],fe=0;return k(M,le,"","",function(ye){return V.call(Z,ye,fe++)}),le}function X(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var ce=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},de={map:G,forEach:function(M,V,Z){G(M,function(){V.apply(this,arguments)},Z)},count:function(M){var V=0;return G(M,function(){V++}),V},toArray:function(M){return G(M,function(V){return V})||[]},only:function(M){if(!T(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Be.Activity=v,Be.Children=de,Be.Component=D,Be.Fragment=s,Be.Profiler=c,Be.PureComponent=z,Be.StrictMode=l,Be.Suspense=p,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Be.__COMPILER_RUNTIME={__proto__:null,c:function(M){return B.H.useMemoCache(M)}},Be.cache=function(M){return function(){return M.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(M,V,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=j({},M.props),fe=M.key;if(V!=null)for(ye in V.key!==void 0&&(fe=""+V.key),V)!I.call(V,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&V.ref===void 0||(le[ye]=V[ye]);var ye=arguments.length-2;if(ye===1)le.children=Z;else if(1<ye){for(var Ce=Array(ye),Ie=0;Ie<ye;Ie++)Ce[Ie]=arguments[Ie+2];le.children=Ce}return $(M.type,fe,le)},Be.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Be.createElement=function(M,V,Z){var le,fe={},ye=null;if(V!=null)for(le in V.key!==void 0&&(ye=""+V.key),V)I.call(V,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(fe[le]=V[le]);var Ce=arguments.length-2;if(Ce===1)fe.children=Z;else if(1<Ce){for(var Ie=Array(Ce),Ue=0;Ue<Ce;Ue++)Ie[Ue]=arguments[Ue+2];fe.children=Ie}if(M&&M.defaultProps)for(le in Ce=M.defaultProps,Ce)fe[le]===void 0&&(fe[le]=Ce[le]);return $(M,ye,fe)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(M){return{$$typeof:f,render:M}},Be.isValidElement=T,Be.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:X}},Be.memo=function(M,V){return{$$typeof:m,type:M,compare:V===void 0?null:V}},Be.startTransition=function(M){var V=B.T,Z={};B.T=Z;try{var le=M(),fe=B.S;fe!==null&&fe(Z,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(C,ce)}catch(ye){ce(ye)}finally{V!==null&&Z.types!==null&&(V.types=Z.types),B.T=V}},Be.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Be.use=function(M){return B.H.use(M)},Be.useActionState=function(M,V,Z){return B.H.useActionState(M,V,Z)},Be.useCallback=function(M,V){return B.H.useCallback(M,V)},Be.useContext=function(M){return B.H.useContext(M)},Be.useDebugValue=function(){},Be.useDeferredValue=function(M,V){return B.H.useDeferredValue(M,V)},Be.useEffect=function(M,V){return B.H.useEffect(M,V)},Be.useEffectEvent=function(M){return B.H.useEffectEvent(M)},Be.useId=function(){return B.H.useId()},Be.useImperativeHandle=function(M,V,Z){return B.H.useImperativeHandle(M,V,Z)},Be.useInsertionEffect=function(M,V){return B.H.useInsertionEffect(M,V)},Be.useLayoutEffect=function(M,V){return B.H.useLayoutEffect(M,V)},Be.useMemo=function(M,V){return B.H.useMemo(M,V)},Be.useOptimistic=function(M,V){return B.H.useOptimistic(M,V)},Be.useReducer=function(M,V,Z){return B.H.useReducer(M,V,Z)},Be.useRef=function(M){return B.H.useRef(M)},Be.useState=function(M){return B.H.useState(M)},Be.useSyncExternalStore=function(M,V,Z){return B.H.useSyncExternalStore(M,V,Z)},Be.useTransition=function(){return B.H.useTransition()},Be.version="19.2.3",Be}var qm;function tl(){return qm||(qm=1,Sd.exports=Yb()),Sd.exports}var w=tl();const _e=cv(w);var jd={exports:{}},Oi={},_d={exports:{}},Cd={};var $m;function Kb(){return $m||($m=1,(function(r){function t(k,G){var X=k.length;k.push(G);e:for(;0<X;){var ce=X-1>>>1,de=k[ce];if(0<c(de,G))k[ce]=G,k[X]=de,X=ce;else break e}}function s(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var G=k[0],X=k.pop();if(X!==G){k[0]=X;e:for(var ce=0,de=k.length,M=de>>>1;ce<M;){var V=2*(ce+1)-1,Z=k[V],le=V+1,fe=k[le];if(0>c(Z,X))le<de&&0>c(fe,Z)?(k[ce]=fe,k[le]=X,ce=le):(k[ce]=Z,k[V]=X,ce=V);else if(le<de&&0>c(fe,X))k[ce]=fe,k[le]=X,ce=le;else break e}}return G}function c(k,G){var X=k.sortIndex-G.sortIndex;return X!==0?X:k.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var p=[],m=[],y=1,v=null,b=3,S=!1,_=!1,j=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function q(k){for(var G=s(m);G!==null;){if(G.callback===null)l(m);else if(G.startTime<=k)l(m),G.sortIndex=G.expirationTime,t(p,G);else break;G=s(m)}}function U(k){if(j=!1,q(k),!_)if(s(p)!==null)_=!0,C||(C=!0,A());else{var G=s(m);G!==null&&K(U,G.startTime-k)}}var C=!1,B=-1,I=5,$=-1;function Y(){return O?!0:!(r.unstable_now()-$<I)}function T(){if(O=!1,C){var k=r.unstable_now();$=k;var G=!0;try{e:{_=!1,j&&(j=!1,N(B),B=-1),S=!0;var X=b;try{t:{for(q(k),v=s(p);v!==null&&!(v.expirationTime>k&&Y());){var ce=v.callback;if(typeof ce=="function"){v.callback=null,b=v.priorityLevel;var de=ce(v.expirationTime<=k);if(k=r.unstable_now(),typeof de=="function"){v.callback=de,q(k),G=!0;break t}v===s(p)&&l(p),q(k)}else l(p);v=s(p)}if(v!==null)G=!0;else{var M=s(m);M!==null&&K(U,M.startTime-k),G=!1}}break e}finally{v=null,b=X,S=!1}G=void 0}}finally{G?A():C=!1}}}var A;if(typeof z=="function")A=function(){z(T)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,L=P.port2;P.port1.onmessage=T,A=function(){L.postMessage(null)}}else A=function(){D(T,0)};function K(k,G){B=D(function(){k(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(k){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var X=b;b=G;try{return k()}finally{b=X}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var X=b;b=k;try{return G()}finally{b=X}},r.unstable_scheduleCallback=function(k,G,X){var ce=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,k){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=X+de,k={id:y++,callback:G,priorityLevel:k,startTime:X,expirationTime:de,sortIndex:-1},X>ce?(k.sortIndex=X,t(m,k),s(p)===null&&k===s(m)&&(j?(N(B),B=-1):j=!0,K(U,X-ce))):(k.sortIndex=de,t(p,k),_||S||(_=!0,C||(C=!0,A()))),k},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(k){var G=b;return function(){var X=b;b=G;try{return k.apply(this,arguments)}finally{b=X}}}})(Cd)),Cd}var Hm;function Fb(){return Hm||(Hm=1,_d.exports=Kb()),_d.exports}var Ed={exports:{}},cn={};var Pm;function Qb(){if(Pm)return cn;Pm=1;var r=tl();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:p,containerInfo:m,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,cn.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(p,m,null,y)},cn.flushSync=function(p){var m=d.T,y=l.p;try{if(d.T=null,l.p=2,p)return p()}finally{d.T=m,l.p=y,l.d.f()}},cn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(p,m))},cn.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},cn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,v=f(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?l.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&l.d.X(p,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},cn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=f(m.as,m.crossOrigin);l.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(p)},cn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=f(y,m.crossOrigin);l.d.L(p,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},cn.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=f(m.as,m.crossOrigin);l.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(p)},cn.requestFormReset=function(p){l.d.r(p)},cn.unstable_batchedUpdates=function(p,m){return p(m)},cn.useFormState=function(p,m,y){return d.H.useFormState(p,m,y)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var Gm;function uv(){if(Gm)return Ed.exports;Gm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ed.exports=Qb(),Ed.exports}var Vm;function Xb(){if(Vm)return Oi;Vm=1;var r=Fb(),t=tl(),s=uv();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return p(h),e;if(g===o)return p(h),n;g=g.sibling}throw Error(l(188))}if(a.return!==o.return)a=h,o=g;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,o=g;break}if(E===o){x=!0,o=h,a=g;break}E=E.sibling}if(!x){for(E=g.child;E;){if(E===a){x=!0,a=g,o=h;break}if(E===o){x=!0,o=g,a=h;break}E=E.sibling}if(!x)throw Error(l(189))}}if(a.alternate!==o)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function L(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case D:return"Profiler";case O:return"StrictMode";case U:return"Suspense";case C:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case z:return e.displayName||"Context";case N:return(e._context.displayName||"Context")+".Consumer";case q:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:L(e.type)||"Memo";case I:n=e._payload,e=e._init;try{return L(e(n))}catch{}}return null}var K=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ce=[],de=-1;function M(e){return{current:e}}function V(e){0>de||(e.current=ce[de],ce[de]=null,de--)}function Z(e,n){de++,ce[de]=e.current,e.current=n}var le=M(null),fe=M(null),ye=M(null),Ce=M(null);function Ie(e,n){switch(Z(ye,n),Z(fe,e),Z(le,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?im(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=im(n),e=lm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(le),Z(le,e)}function Ue(){V(le),V(fe),V(ye)}function he(e){e.memoizedState!==null&&Z(Ce,e);var n=le.current,a=lm(n,e.type);n!==a&&(Z(fe,e),Z(le,a))}function Xe(e){fe.current===e&&(V(le),V(fe)),Ce.current===e&&(V(Ce),Ei._currentValue=X)}var Pe,bt;function ut(e){if(Pe===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Pe=n&&n[1]||"",bt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+bt}var nt=!1;function Ke(e,n){if(!e||nt)return"";nt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var te=ne}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(ne){te=ne}e.call(oe.prototype)}}else{try{throw Error()}catch(ne){te=ne}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),x=g[0],E=g[1];if(x&&E){var H=x.split(`
`),W=E.split(`
`);for(h=o=0;o<H.length&&!H[o].includes("DetermineComponentFrameRoot");)o++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(o===H.length||h===W.length)for(o=H.length-1,h=W.length-1;1<=o&&0<=h&&H[o]!==W[h];)h--;for(;1<=o&&0<=h;o--,h--)if(H[o]!==W[h]){if(o!==1||h!==1)do if(o--,h--,0>h||H[o]!==W[h]){var ae=`
`+H[o].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=o&&0<=h);break}}}finally{nt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ut(a):""}function ft(e,n){switch(e.tag){case 26:case 27:case 5:return ut(e.type);case 16:return ut("Lazy");case 13:return e.child!==n&&n!==null?ut("Suspense Fallback"):ut("Suspense");case 19:return ut("SuspenseList");case 0:case 15:return Ke(e.type,!1);case 11:return Ke(e.type.render,!1);case 1:return Ke(e.type,!0);case 31:return ut("Activity");default:return""}}function _t(e){try{var n="",a=null;do n+=ft(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Mt=Object.prototype.hasOwnProperty,Ot=r.unstable_scheduleCallback,kt=r.unstable_cancelCallback,at=r.unstable_shouldYield,Vt=r.unstable_requestPaint,it=r.unstable_now,gn=r.unstable_getCurrentPriorityLevel,mn=r.unstable_ImmediatePriority,dn=r.unstable_UserBlockingPriority,dt=r.unstable_NormalPriority,Dt=r.unstable_LowPriority,Zt=r.unstable_IdlePriority,en=r.log,lr=r.unstable_setDisableYieldValue,yn=null,wt=null;function gt(e){if(typeof en=="function"&&lr(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(yn,e)}catch{}}var mt=Math.clz32?Math.clz32:me,Rn=Math.log,xe=Math.LN2;function me(e){return e>>>=0,e===0?32:31-(Rn(e)/xe|0)|0}var be=256,R=262144,ee=4194304;function re(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ue(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,g=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~g,o!==0?h=re(o):(x&=E,x!==0?h=re(x):a||(a=E&~e,a!==0&&(h=re(a))))):(E=o&~g,E!==0?h=re(E):x!==0?h=re(x):a||(a=o&~e,a!==0&&(h=re(a)))),h===0?0:n!==0&&n!==h&&(n&g)===0&&(g=h&-h,a=n&-n,g>=a||g===32&&(a&4194048)!==0)?n:h}function pe(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Se(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ge(){var e=ee;return ee<<=1,(ee&62914560)===0&&(ee=4194304),e}function Te(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Oe(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function we(e,n,a,o,h,g){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,H=e.expirationTimes,W=e.hiddenUpdates;for(a=x&~a;0<a;){var ae=31-mt(a),oe=1<<ae;E[ae]=0,H[ae]=-1;var te=W[ae];if(te!==null)for(W[ae]=null,ae=0;ae<te.length;ae++){var ne=te[ae];ne!==null&&(ne.lane&=-536870913)}a&=~oe}o!==0&&Ae(e,o,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(x&~n))}function Ae(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-mt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Re(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-mt(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function ke(e,n){var a=n&-n;return a=(a&42)!==0?1:qe(a),(a&(e.suspendedLanes|n))!==0?0:a}function qe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ct(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function St(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Nm(e.type))}function vn(e,n){var a=G.p;try{return G.p=e,n()}finally{G.p=a}}var Lt=Math.random().toString(36).slice(2),Et="__reactFiber$"+Lt,Bt="__reactProps$"+Lt,Ls="__reactContainer$"+Lt,hc="__reactEvents$"+Lt,D0="__reactListeners$"+Lt,U0="__reactHandles$"+Lt,Yh="__reactResources$"+Lt,$a="__reactMarker$"+Lt;function fc(e){delete e[Et],delete e[Bt],delete e[hc],delete e[D0],delete e[U0]}function Bs(e){var n=e[Et];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ls]||a[Et]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=pm(e);e!==null;){if(a=e[Et])return a;e=pm(e)}return n}e=a,a=e.parentNode}return null}function Is(e){if(e=e[Et]||e[Ls]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ha(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function qs(e){var n=e[Yh];return n||(n=e[Yh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Xt(e){e[$a]=!0}var Kh=new Set,Fh={};function cs(e,n){$s(e,n),$s(e+"Capture",n)}function $s(e,n){for(Fh[e]=n,e=0;e<n.length;e++)Kh.add(n[e])}var z0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qh={},Xh={};function M0(e){return Mt.call(Xh,e)?!0:Mt.call(Qh,e)?!1:z0.test(e)?Xh[e]=!0:(Qh[e]=!0,!1)}function yl(e,n,a){if(M0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function vl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function hr(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Bn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function L0(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,g.call(this,x)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pc(e){if(!e._valueTracker){var n=Jh(e)?"checked":"value";e._valueTracker=L0(e,n,""+e[n])}}function Wh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Jh(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function xl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var B0=/[\n"\\]/g;function In(e){return e.replace(B0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gc(e,n,a,o,h,g,x,E){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),n!=null?x==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Bn(n)):e.value!==""+Bn(n)&&(e.value=""+Bn(n)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),n!=null?mc(e,x,Bn(n)):a!=null?mc(e,x,Bn(a)):o!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Bn(E):e.removeAttribute("name")}function Zh(e,n,a,o,h,g,x,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){pc(e);return}a=a!=null?""+Bn(a):"",n=n!=null?""+Bn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),pc(e)}function mc(e,n,a){n==="number"&&xl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Hs(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Bn(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function ef(e,n,a){if(n!=null&&(n=""+Bn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Bn(a):""}function tf(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(l(92));if(K(o)){if(1<o.length)throw Error(l(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Bn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),pc(e)}function Ps(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var I0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||I0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function rf(e,n,a){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&nf(e,h,o)}else for(var g in n)n.hasOwnProperty(g)&&nf(e,g,n[g])}function yc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(e){return $0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function fr(){}var vc=null;function xc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gs=null,Vs=null;function sf(e){var n=Is(e);if(n&&(e=n.stateNode)){var a=e[Bt]||null;e:switch(e=n.stateNode,n.type){case"input":if(gc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+In(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Bt]||null;if(!h)throw Error(l(90));gc(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Wh(o)}break e;case"textarea":ef(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Hs(e,!!a.multiple,n,!1)}}}var bc=!1;function af(e,n,a){if(bc)return e(n,a);bc=!0;try{var o=e(n);return o}finally{if(bc=!1,(Gs!==null||Vs!==null)&&(lo(),Gs&&(n=Gs,e=Vs,Vs=Gs=null,sf(n),e)))for(n=0;n<e.length;n++)sf(e[n])}}function Pa(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Bt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,n,typeof a));return a}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=!1;if(pr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){wc=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{wc=!1}var Lr=null,Sc=null,wl=null;function lf(){if(wl)return wl;var e,n=Sc,a=n.length,o,h="value"in Lr?Lr.value:Lr.textContent,g=h.length;for(e=0;e<a&&n[e]===h[e];e++);var x=a-e;for(o=1;o<=x&&n[a-o]===h[g-o];o++);return wl=h.slice(e,1<o?1-o:void 0)}function Sl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function of(){return!1}function xn(e){function n(a,o,h,g,x){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jl:of,this.isPropagationStopped=of,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),n}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=xn(us),Va=v({},us,{view:0,detail:0}),H0=xn(Va),jc,_c,Ya,Cl=v({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ya&&(Ya&&e.type==="mousemove"?(jc=e.screenX-Ya.screenX,_c=e.screenY-Ya.screenY):_c=jc=0,Ya=e),jc)},movementY:function(e){return"movementY"in e?e.movementY:_c}}),cf=xn(Cl),P0=v({},Cl,{dataTransfer:0}),G0=xn(P0),V0=v({},Va,{relatedTarget:0}),Cc=xn(V0),Y0=v({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),K0=xn(Y0),F0=v({},us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q0=xn(F0),X0=v({},us,{data:0}),uf=xn(X0),J0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Z0[e])?!!n[e]:!1}function Ec(){return ex}var tx=v({},Va,{key:function(e){if(e.key){var n=J0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?W0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ec,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nx=xn(tx),rx=v({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=xn(rx),sx=v({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ec}),ax=xn(sx),ix=v({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),lx=xn(ix),ox=v({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cx=xn(ox),ux=v({},us,{newState:0,oldState:0}),dx=xn(ux),hx=[9,13,27,32],Rc=pr&&"CompositionEvent"in window,Ka=null;pr&&"documentMode"in document&&(Ka=document.documentMode);var fx=pr&&"TextEvent"in window&&!Ka,hf=pr&&(!Rc||Ka&&8<Ka&&11>=Ka),ff=" ",pf=!1;function gf(e,n){switch(e){case"keyup":return hx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ys=!1;function px(e,n){switch(e){case"compositionend":return mf(n);case"keypress":return n.which!==32?null:(pf=!0,ff);case"textInput":return e=n.data,e===ff&&pf?null:e;default:return null}}function gx(e,n){if(Ys)return e==="compositionend"||!Rc&&gf(e,n)?(e=lf(),wl=Sc=Lr=null,Ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return hf&&n.locale!=="ko"?null:n.data;default:return null}}var mx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!mx[e.type]:n==="textarea"}function vf(e,n,a,o){Gs?Vs?Vs.push(o):Vs=[o]:Gs=o,n=go(n,"onChange"),0<n.length&&(a=new _l("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Fa=null,Qa=null;function yx(e){em(e,0)}function El(e){var n=Ha(e);if(Wh(n))return e}function xf(e,n){if(e==="change")return n}var bf=!1;if(pr){var Tc;if(pr){var Ac="oninput"in document;if(!Ac){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),Ac=typeof wf.oninput=="function"}Tc=Ac}else Tc=!1;bf=Tc&&(!document.documentMode||9<document.documentMode)}function Sf(){Fa&&(Fa.detachEvent("onpropertychange",jf),Qa=Fa=null)}function jf(e){if(e.propertyName==="value"&&El(Qa)){var n=[];vf(n,Qa,e,xc(e)),af(yx,n)}}function vx(e,n,a){e==="focusin"?(Sf(),Fa=n,Qa=a,Fa.attachEvent("onpropertychange",jf)):e==="focusout"&&Sf()}function xx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(Qa)}function bx(e,n){if(e==="click")return El(n)}function wx(e,n){if(e==="input"||e==="change")return El(n)}function Sx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Tn=typeof Object.is=="function"?Object.is:Sx;function Xa(e,n){if(Tn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Mt.call(n,h)||!Tn(e[h],n[h]))return!1}return!0}function _f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cf(e,n){var a=_f(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_f(a)}}function Ef(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Ef(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Rf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=xl(e.document)}return n}function Nc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var jx=pr&&"documentMode"in document&&11>=document.documentMode,Ks=null,Oc=null,Ja=null,kc=!1;function Tf(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kc||Ks==null||Ks!==xl(o)||(o=Ks,"selectionStart"in o&&Nc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ja&&Xa(Ja,o)||(Ja=o,o=go(Oc,"onSelect"),0<o.length&&(n=new _l("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Ks)))}function ds(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Fs={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},Dc={},Af={};pr&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function hs(e){if(Dc[e])return Dc[e];if(!Fs[e])return e;var n=Fs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Af)return Dc[e]=n[a];return e}var Nf=hs("animationend"),Of=hs("animationiteration"),kf=hs("animationstart"),_x=hs("transitionrun"),Cx=hs("transitionstart"),Ex=hs("transitioncancel"),Df=hs("transitionend"),Uf=new Map,Uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uc.push("scrollEnd");function Wn(e,n){Uf.set(e,n),cs(n,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],Qs=0,zc=0;function Tl(){for(var e=Qs,n=zc=Qs=0;n<e;){var a=qn[n];qn[n++]=null;var o=qn[n];qn[n++]=null;var h=qn[n];qn[n++]=null;var g=qn[n];if(qn[n++]=null,o!==null&&h!==null){var x=o.pending;x===null?h.next=h:(h.next=x.next,x.next=h),o.pending=h}g!==0&&zf(a,h,g)}}function Al(e,n,a,o){qn[Qs++]=e,qn[Qs++]=n,qn[Qs++]=a,qn[Qs++]=o,zc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Mc(e,n,a,o){return Al(e,n,a,o),Nl(e)}function fs(e,n){return Al(e,null,null,n),Nl(e)}function zf(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,g=e.return;g!==null;)g.childLanes|=a,o=g.alternate,o!==null&&(o.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&n!==null&&(h=31-mt(a),e=g.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),g):null}function Nl(e){if(50<xi)throw xi=0,Vu=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Xs={};function Rx(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,a,o){return new Rx(e,n,a,o)}function Lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gr(e,n){var a=e.alternate;return a===null?(a=An(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mf(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ol(e,n,a,o,h,g){var x=0;if(o=e,typeof e=="function")Lc(e)&&(x=1);else if(typeof e=="string")x=kb(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=An(31,a,n,h),e.elementType=$,e.lanes=g,e;case j:return ps(a.children,h,g,n);case O:x=8,h|=24;break;case D:return e=An(12,a,n,h|2),e.elementType=D,e.lanes=g,e;case U:return e=An(13,a,n,h),e.elementType=U,e.lanes=g,e;case C:return e=An(19,a,n,h),e.elementType=C,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:x=10;break e;case N:x=9;break e;case q:x=11;break e;case B:x=14;break e;case I:x=16,o=null;break e}x=29,a=Error(l(130,e===null?"null":typeof e,"")),o=null}return n=An(x,a,n,h),n.elementType=e,n.type=o,n.lanes=g,n}function ps(e,n,a,o){return e=An(7,e,o,n),e.lanes=a,e}function Bc(e,n,a){return e=An(6,e,null,n),e.lanes=a,e}function Lf(e){var n=An(18,null,null,0);return n.stateNode=e,n}function Ic(e,n,a){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Bf=new WeakMap;function $n(e,n){if(typeof e=="object"&&e!==null){var a=Bf.get(e);return a!==void 0?a:(n={value:e,source:n,stack:_t(n)},Bf.set(e,n),n)}return{value:e,source:n,stack:_t(n)}}var Js=[],Ws=0,kl=null,Wa=0,Hn=[],Pn=0,Br=null,or=1,cr="";function mr(e,n){Js[Ws++]=Wa,Js[Ws++]=kl,kl=e,Wa=n}function If(e,n,a){Hn[Pn++]=or,Hn[Pn++]=cr,Hn[Pn++]=Br,Br=e;var o=or;e=cr;var h=32-mt(o)-1;o&=~(1<<h),a+=1;var g=32-mt(n)+h;if(30<g){var x=h-h%5;g=(o&(1<<x)-1).toString(32),o>>=x,h-=x,or=1<<32-mt(n)+h|a<<h|o,cr=g+e}else or=1<<g|a<<h|o,cr=e}function qc(e){e.return!==null&&(mr(e,1),If(e,1,0))}function $c(e){for(;e===kl;)kl=Js[--Ws],Js[Ws]=null,Wa=Js[--Ws],Js[Ws]=null;for(;e===Br;)Br=Hn[--Pn],Hn[Pn]=null,cr=Hn[--Pn],Hn[Pn]=null,or=Hn[--Pn],Hn[Pn]=null}function qf(e,n){Hn[Pn++]=or,Hn[Pn++]=cr,Hn[Pn++]=Br,or=n.id,cr=n.overflow,Br=e}var tn=null,yt=null,Je=!1,Ir=null,Gn=!1,Hc=Error(l(519));function qr(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Za($n(n,e)),Hc}function $f(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Et]=e,n[Bt]=o,a){case"dialog":Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":case"embed":Ve("load",n);break;case"video":case"audio":for(a=0;a<wi.length;a++)Ve(wi[a],n);break;case"source":Ve("error",n);break;case"img":case"image":case"link":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"input":Ve("invalid",n),Zh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ve("invalid",n);break;case"textarea":Ve("invalid",n),tf(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||sm(n.textContent,a)?(o.popover!=null&&(Ve("beforetoggle",n),Ve("toggle",n)),o.onScroll!=null&&Ve("scroll",n),o.onScrollEnd!=null&&Ve("scrollend",n),o.onClick!=null&&(n.onclick=fr),n=!0):n=!1,n||qr(e,!0)}function Hf(e){for(tn=e.return;tn;)switch(tn.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:tn=tn.return}}function Zs(e){if(e!==tn)return!1;if(!Je)return Hf(e),Je=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||id(e.type,e.memoizedProps)),a=!a),a&&yt&&qr(e),Hf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));yt=fm(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));yt=fm(e)}else n===27?(n=yt,es(e.type)?(e=dd,dd=null,yt=e):yt=n):yt=tn?Yn(e.stateNode.nextSibling):null;return!0}function gs(){yt=tn=null,Je=!1}function Pc(){var e=Ir;return e!==null&&(jn===null?jn=e:jn.push.apply(jn,e),Ir=null),e}function Za(e){Ir===null?Ir=[e]:Ir.push(e)}var Gc=M(null),ms=null,yr=null;function $r(e,n,a){Z(Gc,n._currentValue),n._currentValue=a}function vr(e){e._currentValue=Gc.current,V(Gc)}function Vc(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Yc(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var x=h.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=h;for(var H=0;H<n.length;H++)if(E.context===n[H]){g.lanes|=a,E=g.alternate,E!==null&&(E.lanes|=a),Vc(g.return,a,e),o||(x=null);break e}g=E.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(l(341));x.lanes|=a,g=x.alternate,g!==null&&(g.lanes|=a),Vc(x,a,e),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===e){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function ea(e,n,a,o){e=null;for(var h=n,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(l(387));if(x=x.memoizedProps,x!==null){var E=h.type;Tn(h.pendingProps.value,x.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ce.current){if(x=h.alternate,x===null)throw Error(l(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Ei):e=[Ei])}h=h.return}e!==null&&Yc(n,e,a,o),n.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ys(e){ms=e,yr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return Pf(ms,e)}function Ul(e,n){return ms===null&&ys(e),Pf(e,n)}function Pf(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},yr===null){if(e===null)throw Error(l(308));yr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else yr=yr.next=n;return a}var Tx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Ax=r.unstable_scheduleCallback,Nx=r.unstable_NormalPriority,It={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new Tx,data:new Map,refCount:0}}function ei(e){e.refCount--,e.refCount===0&&Ax(Nx,function(){e.controller.abort()})}var ti=null,Fc=0,ta=0,na=null;function Ox(e,n){if(ti===null){var a=ti=[];Fc=0,ta=Ju(),na={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Fc++,n.then(Gf,Gf),n}function Gf(){if(--Fc===0&&ti!==null){na!==null&&(na.status="fulfilled");var e=ti;ti=null,ta=0,na=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function kx(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Vf=k.S;k.S=function(e,n){Tg=it(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ox(e,n),Vf!==null&&Vf(e,n)};var vs=M(null);function Qc(){var e=vs.current;return e!==null?e:ht.pooledCache}function zl(e,n){n===null?Z(vs,vs.current):Z(vs,n.pool)}function Yf(){var e=Qc();return e===null?null:{parent:It._currentValue,pool:e}}var ra=Error(l(460)),Xc=Error(l(474)),Ml=Error(l(542)),Ll={then:function(){}};function Kf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ff(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(fr,fr),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Xf(e),e;default:if(typeof n.status=="string")n.then(fr,fr);else{if(e=ht,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Xf(e),e}throw bs=n,ra}}function xs(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(bs=a,ra):a}}var bs=null;function Qf(){if(bs===null)throw Error(l(459));var e=bs;return bs=null,e}function Xf(e){if(e===ra||e===Ml)throw Error(l(483))}var sa=null,ni=0;function Bl(e){var n=ni;return ni+=1,sa===null&&(sa=[]),Ff(sa,e,n)}function ri(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Il(e,n){throw n.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Jf(e){function n(Q,F){if(e){var J=Q.deletions;J===null?(Q.deletions=[F],Q.flags|=16):J.push(F)}}function a(Q,F){if(!e)return null;for(;F!==null;)n(Q,F),F=F.sibling;return null}function o(Q){for(var F=new Map;Q!==null;)Q.key!==null?F.set(Q.key,Q):F.set(Q.index,Q),Q=Q.sibling;return F}function h(Q,F){return Q=gr(Q,F),Q.index=0,Q.sibling=null,Q}function g(Q,F,J){return Q.index=J,e?(J=Q.alternate,J!==null?(J=J.index,J<F?(Q.flags|=67108866,F):J):(Q.flags|=67108866,F)):(Q.flags|=1048576,F)}function x(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function E(Q,F,J,ie){return F===null||F.tag!==6?(F=Bc(J,Q.mode,ie),F.return=Q,F):(F=h(F,J),F.return=Q,F)}function H(Q,F,J,ie){var De=J.type;return De===j?ae(Q,F,J.props.children,ie,J.key):F!==null&&(F.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&xs(De)===F.type)?(F=h(F,J.props),ri(F,J),F.return=Q,F):(F=Ol(J.type,J.key,J.props,null,Q.mode,ie),ri(F,J),F.return=Q,F)}function W(Q,F,J,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Ic(J,Q.mode,ie),F.return=Q,F):(F=h(F,J.children||[]),F.return=Q,F)}function ae(Q,F,J,ie,De){return F===null||F.tag!==7?(F=ps(J,Q.mode,ie,De),F.return=Q,F):(F=h(F,J),F.return=Q,F)}function oe(Q,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Bc(""+F,Q.mode,J),F.return=Q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return J=Ol(F.type,F.key,F.props,null,Q.mode,J),ri(J,F),J.return=Q,J;case _:return F=Ic(F,Q.mode,J),F.return=Q,F;case I:return F=xs(F),oe(Q,F,J)}if(K(F)||A(F))return F=ps(F,Q.mode,J,null),F.return=Q,F;if(typeof F.then=="function")return oe(Q,Bl(F),J);if(F.$$typeof===z)return oe(Q,Ul(Q,F),J);Il(Q,F)}return null}function te(Q,F,J,ie){var De=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return De!==null?null:E(Q,F,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===De?H(Q,F,J,ie):null;case _:return J.key===De?W(Q,F,J,ie):null;case I:return J=xs(J),te(Q,F,J,ie)}if(K(J)||A(J))return De!==null?null:ae(Q,F,J,ie,null);if(typeof J.then=="function")return te(Q,F,Bl(J),ie);if(J.$$typeof===z)return te(Q,F,Ul(Q,J),ie);Il(Q,J)}return null}function ne(Q,F,J,ie,De){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Q=Q.get(J)||null,E(F,Q,""+ie,De);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:return Q=Q.get(ie.key===null?J:ie.key)||null,H(F,Q,ie,De);case _:return Q=Q.get(ie.key===null?J:ie.key)||null,W(F,Q,ie,De);case I:return ie=xs(ie),ne(Q,F,J,ie,De)}if(K(ie)||A(ie))return Q=Q.get(J)||null,ae(F,Q,ie,De,null);if(typeof ie.then=="function")return ne(Q,F,J,Bl(ie),De);if(ie.$$typeof===z)return ne(Q,F,J,Ul(F,ie),De);Il(F,ie)}return null}function je(Q,F,J,ie){for(var De=null,Ze=null,Ee=F,He=F=0,Qe=null;Ee!==null&&He<J.length;He++){Ee.index>He?(Qe=Ee,Ee=null):Qe=Ee.sibling;var et=te(Q,Ee,J[He],ie);if(et===null){Ee===null&&(Ee=Qe);break}e&&Ee&&et.alternate===null&&n(Q,Ee),F=g(et,F,He),Ze===null?De=et:Ze.sibling=et,Ze=et,Ee=Qe}if(He===J.length)return a(Q,Ee),Je&&mr(Q,He),De;if(Ee===null){for(;He<J.length;He++)Ee=oe(Q,J[He],ie),Ee!==null&&(F=g(Ee,F,He),Ze===null?De=Ee:Ze.sibling=Ee,Ze=Ee);return Je&&mr(Q,He),De}for(Ee=o(Ee);He<J.length;He++)Qe=ne(Ee,Q,He,J[He],ie),Qe!==null&&(e&&Qe.alternate!==null&&Ee.delete(Qe.key===null?He:Qe.key),F=g(Qe,F,He),Ze===null?De=Qe:Ze.sibling=Qe,Ze=Qe);return e&&Ee.forEach(function(as){return n(Q,as)}),Je&&mr(Q,He),De}function ze(Q,F,J,ie){if(J==null)throw Error(l(151));for(var De=null,Ze=null,Ee=F,He=F=0,Qe=null,et=J.next();Ee!==null&&!et.done;He++,et=J.next()){Ee.index>He?(Qe=Ee,Ee=null):Qe=Ee.sibling;var as=te(Q,Ee,et.value,ie);if(as===null){Ee===null&&(Ee=Qe);break}e&&Ee&&as.alternate===null&&n(Q,Ee),F=g(as,F,He),Ze===null?De=as:Ze.sibling=as,Ze=as,Ee=Qe}if(et.done)return a(Q,Ee),Je&&mr(Q,He),De;if(Ee===null){for(;!et.done;He++,et=J.next())et=oe(Q,et.value,ie),et!==null&&(F=g(et,F,He),Ze===null?De=et:Ze.sibling=et,Ze=et);return Je&&mr(Q,He),De}for(Ee=o(Ee);!et.done;He++,et=J.next())et=ne(Ee,Q,He,et.value,ie),et!==null&&(e&&et.alternate!==null&&Ee.delete(et.key===null?He:et.key),F=g(et,F,He),Ze===null?De=et:Ze.sibling=et,Ze=et);return e&&Ee.forEach(function(Pb){return n(Q,Pb)}),Je&&mr(Q,He),De}function ct(Q,F,J,ie){if(typeof J=="object"&&J!==null&&J.type===j&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var De=J.key;F!==null;){if(F.key===De){if(De=J.type,De===j){if(F.tag===7){a(Q,F.sibling),ie=h(F,J.props.children),ie.return=Q,Q=ie;break e}}else if(F.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&xs(De)===F.type){a(Q,F.sibling),ie=h(F,J.props),ri(ie,J),ie.return=Q,Q=ie;break e}a(Q,F);break}else n(Q,F);F=F.sibling}J.type===j?(ie=ps(J.props.children,Q.mode,ie,J.key),ie.return=Q,Q=ie):(ie=Ol(J.type,J.key,J.props,null,Q.mode,ie),ri(ie,J),ie.return=Q,Q=ie)}return x(Q);case _:e:{for(De=J.key;F!==null;){if(F.key===De)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){a(Q,F.sibling),ie=h(F,J.children||[]),ie.return=Q,Q=ie;break e}else{a(Q,F);break}else n(Q,F);F=F.sibling}ie=Ic(J,Q.mode,ie),ie.return=Q,Q=ie}return x(Q);case I:return J=xs(J),ct(Q,F,J,ie)}if(K(J))return je(Q,F,J,ie);if(A(J)){if(De=A(J),typeof De!="function")throw Error(l(150));return J=De.call(J),ze(Q,F,J,ie)}if(typeof J.then=="function")return ct(Q,F,Bl(J),ie);if(J.$$typeof===z)return ct(Q,F,Ul(Q,J),ie);Il(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(a(Q,F.sibling),ie=h(F,J),ie.return=Q,Q=ie):(a(Q,F),ie=Bc(J,Q.mode,ie),ie.return=Q,Q=ie),x(Q)):a(Q,F)}return function(Q,F,J,ie){try{ni=0;var De=ct(Q,F,J,ie);return sa=null,De}catch(Ee){if(Ee===ra||Ee===Ml)throw Ee;var Ze=An(29,Ee,null,Q.mode);return Ze.lanes=ie,Ze.return=Q,Ze}}}var ws=Jf(!0),Wf=Jf(!1),Hr=!1;function Jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(tt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Nl(e),zf(e,null,a),n}return Al(e,o,n,a),Nl(e)}function si(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Re(e,a)}}function Zc(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?h=g=x:g=g.next=x,a=a.next}while(a!==null);g===null?h=g=n:g=g.next=n}else h=g=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var eu=!1;function ai(){if(eu){var e=na;if(e!==null)throw e}}function ii(e,n,a,o){eu=!1;var h=e.updateQueue;Hr=!1;var g=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var H=E,W=H.next;H.next=null,x===null?g=W:x.next=W,x=H;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==x&&(E===null?ae.firstBaseUpdate=W:E.next=W,ae.lastBaseUpdate=H))}if(g!==null){var oe=h.baseState;x=0,ae=W=H=null,E=g;do{var te=E.lane&-536870913,ne=te!==E.lane;if(ne?(Fe&te)===te:(o&te)===te){te!==0&&te===ta&&(eu=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var je=e,ze=E;te=n;var ct=a;switch(ze.tag){case 1:if(je=ze.payload,typeof je=="function"){oe=je.call(ct,oe,te);break e}oe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ze.payload,te=typeof je=="function"?je.call(ct,oe,te):je,te==null)break e;oe=v({},oe,te);break e;case 2:Hr=!0}}te=E.callback,te!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?(W=ae=ne,H=oe):ae=ae.next=ne,x|=te;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;ne=E,E=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);ae===null&&(H=oe),h.baseState=H,h.firstBaseUpdate=W,h.lastBaseUpdate=ae,g===null&&(h.shared.lanes=0),Qr|=x,e.lanes=x,e.memoizedState=oe}}function Zf(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function ep(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Zf(a[e],n)}var aa=M(null),ql=M(0);function tp(e,n){e=Rr,Z(ql,e),Z(aa,n),Rr=e|n.baseLanes}function tu(){Z(ql,Rr),Z(aa,aa.current)}function nu(){Rr=ql.current,V(aa),V(ql)}var Nn=M(null),Vn=null;function Vr(e){var n=e.alternate;Z(Ut,Ut.current&1),Z(Nn,e),Vn===null&&(n===null||aa.current!==null||n.memoizedState!==null)&&(Vn=e)}function ru(e){Z(Ut,Ut.current),Z(Nn,e),Vn===null&&(Vn=e)}function np(e){e.tag===22?(Z(Ut,Ut.current),Z(Nn,e),Vn===null&&(Vn=e)):Yr()}function Yr(){Z(Ut,Ut.current),Z(Nn,Nn.current)}function On(e){V(Nn),Vn===e&&(Vn=null),V(Ut)}var Ut=M(0);function $l(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cd(a)||ud(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var xr=0,$e=null,lt=null,qt=null,Hl=!1,ia=!1,Ss=!1,Pl=0,li=0,la=null,Dx=0;function Rt(){throw Error(l(321))}function su(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Tn(e[a],n[a]))return!1;return!0}function au(e,n,a,o,h,g){return xr=g,$e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Ip:bu,Ss=!1,g=a(o,h),Ss=!1,ia&&(g=sp(n,a,o,h)),rp(e),g}function rp(e){k.H=ui;var n=lt!==null&&lt.next!==null;if(xr=0,qt=lt=$e=null,Hl=!1,li=0,la=null,n)throw Error(l(300));e===null||$t||(e=e.dependencies,e!==null&&Dl(e)&&($t=!0))}function sp(e,n,a,o){$e=e;var h=0;do{if(ia&&(la=null),li=0,ia=!1,25<=h)throw Error(l(301));if(h+=1,qt=lt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}k.H=qp,g=n(a,o)}while(ia);return g}function Ux(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?oi(n):n,e=e.useState()[0],(lt!==null?lt.memoizedState:null)!==e&&($e.flags|=1024),n}function iu(){var e=Pl!==0;return Pl=0,e}function lu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function ou(e){if(Hl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Hl=!1}xr=0,qt=lt=$e=null,ia=!1,li=Pl=0,la=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?$e.memoizedState=qt=e:qt=qt.next=e,qt}function zt(){if(lt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var n=qt===null?$e.memoizedState:qt.next;if(n!==null)qt=n,lt=e;else{if(e===null)throw $e.alternate===null?Error(l(467)):Error(l(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},qt===null?$e.memoizedState=qt=e:qt=qt.next=e}return qt}function Gl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oi(e){var n=li;return li+=1,la===null&&(la=[]),e=Ff(la,e,n),n=$e,(qt===null?n.memoizedState:qt.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Ip:bu),e}function Vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return oi(e);if(e.$$typeof===z)return nn(e)}throw Error(l(438,String(e)))}function cu(e){var n=null,a=$e.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=$e.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Gl(),$e.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=Y;return n.index++,a}function br(e,n){return typeof n=="function"?n(e):n}function Yl(e){var n=zt();return uu(n,lt,e)}function uu(e,n,a){var o=e.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=a;var h=e.baseQueue,g=o.pending;if(g!==null){if(h!==null){var x=h.next;h.next=g.next,g.next=x}n.baseQueue=h=g,o.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{n=h.next;var E=x=null,H=null,W=n,ae=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Fe&oe)===oe:(xr&oe)===oe){var te=W.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===ta&&(ae=!0);else if((xr&te)===te){W=W.next,te===ta&&(ae=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(E=H=oe,x=g):H=H.next=oe,$e.lanes|=te,Qr|=te;oe=W.action,Ss&&a(g,oe),g=W.hasEagerState?W.eagerState:a(g,oe)}else te={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(E=H=te,x=g):H=H.next=te,$e.lanes|=oe,Qr|=oe;W=W.next}while(W!==null&&W!==n);if(H===null?x=g:H.next=E,!Tn(g,e.memoizedState)&&($t=!0,ae&&(a=na,a!==null)))throw a;e.memoizedState=g,e.baseState=x,e.baseQueue=H,o.lastRenderedState=g}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function du(e){var n=zt(),a=n.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,g=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do g=e(g,x.action),x=x.next;while(x!==h);Tn(g,n.memoizedState)||($t=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),a.lastRenderedState=g}return[g,o]}function ap(e,n,a){var o=$e,h=zt(),g=Je;if(g){if(a===void 0)throw Error(l(407));a=a()}else a=n();var x=!Tn((lt||h).memoizedState,a);if(x&&(h.memoizedState=a,$t=!0),h=h.queue,pu(op.bind(null,o,h,e),[e]),h.getSnapshot!==n||x||qt!==null&&qt.memoizedState.tag&1){if(o.flags|=2048,oa(9,{destroy:void 0},lp.bind(null,o,h,a,n),null),ht===null)throw Error(l(349));g||(xr&127)!==0||ip(o,n,a)}return a}function ip(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=$e.updateQueue,n===null?(n=Gl(),$e.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function lp(e,n,a,o){n.value=a,n.getSnapshot=o,cp(n)&&up(e)}function op(e,n,a){return a(function(){cp(n)&&up(e)})}function cp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Tn(e,a)}catch{return!0}}function up(e){var n=fs(e,2);n!==null&&_n(n,e,2)}function hu(e){var n=hn();if(typeof e=="function"){var a=e;if(e=a(),Ss){gt(!0);try{a()}finally{gt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},n}function dp(e,n,a,o){return e.baseState=a,uu(e,lt,typeof o=="function"?o:br)}function zx(e,n,a,o,h){if(Ql(e))throw Error(l(485));if(e=n.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};k.T!==null?a(!0):g.isTransition=!1,o(g),a=n.pending,a===null?(g.next=n.pending=g,hp(n,g)):(g.next=a.next,n.pending=a.next=g)}}function hp(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var g=k.T,x={};k.T=x;try{var E=a(h,o),H=k.S;H!==null&&H(x,E),fp(e,n,E)}catch(W){fu(e,n,W)}finally{g!==null&&x.types!==null&&(g.types=x.types),k.T=g}}else try{g=a(h,o),fp(e,n,g)}catch(W){fu(e,n,W)}}function fp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){pp(e,n,o)},function(o){return fu(e,n,o)}):pp(e,n,a)}function pp(e,n,a){n.status="fulfilled",n.value=a,gp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,hp(e,a)))}function fu(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,gp(n),n=n.next;while(n!==o)}e.action=null}function gp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function mp(e,n){return n}function yp(e,n){if(Je){var a=ht.formState;if(a!==null){e:{var o=$e;if(Je){if(yt){t:{for(var h=yt,g=Gn;h.nodeType!==8;){if(!g){h=null;break t}if(h=Yn(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){yt=Yn(h.nextSibling),o=h.data==="F!";break e}}qr(o)}o=!1}o&&(n=a[0])}}return a=hn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:n},a.queue=o,a=Mp.bind(null,$e,o),o.dispatch=a,o=hu(!1),g=xu.bind(null,$e,!1,o.queue),o=hn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=zx.bind(null,$e,h,g,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function vp(e){var n=zt();return xp(n,lt,e)}function xp(e,n,a){if(n=uu(e,n,mp)[0],e=Yl(br)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=oi(n)}catch(x){throw x===ra?Ml:x}else o=n;n=zt();var h=n.queue,g=h.dispatch;return a!==n.memoizedState&&($e.flags|=2048,oa(9,{destroy:void 0},Mx.bind(null,h,a),null)),[o,g,e]}function Mx(e,n){e.action=n}function bp(e){var n=zt(),a=lt;if(a!==null)return xp(n,a,e);zt(),n=n.memoizedState,a=zt();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function oa(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=$e.updateQueue,n===null&&(n=Gl(),$e.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function wp(){return zt().memoizedState}function Kl(e,n,a,o){var h=hn();$e.flags|=e,h.memoizedState=oa(1|n,{destroy:void 0},a,o===void 0?null:o)}function Fl(e,n,a,o){var h=zt();o=o===void 0?null:o;var g=h.memoizedState.inst;lt!==null&&o!==null&&su(o,lt.memoizedState.deps)?h.memoizedState=oa(n,g,a,o):($e.flags|=e,h.memoizedState=oa(1|n,g,a,o))}function Sp(e,n){Kl(8390656,8,e,n)}function pu(e,n){Fl(2048,8,e,n)}function Lx(e){$e.flags|=4;var n=$e.updateQueue;if(n===null)n=Gl(),$e.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function jp(e){var n=zt().memoizedState;return Lx({ref:n,nextImpl:e}),function(){if((tt&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function _p(e,n){return Fl(4,2,e,n)}function Cp(e,n){return Fl(4,4,e,n)}function Ep(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Rp(e,n,a){a=a!=null?a.concat([e]):null,Fl(4,4,Ep.bind(null,n,e),a)}function gu(){}function Tp(e,n){var a=zt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&su(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Ap(e,n){var a=zt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&su(n,o[1]))return o[0];if(o=e(),Ss){gt(!0);try{e()}finally{gt(!1)}}return a.memoizedState=[o,n],o}function mu(e,n,a){return a===void 0||(xr&1073741824)!==0&&(Fe&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Ng(),$e.lanes|=e,Qr|=e,a)}function Np(e,n,a,o){return Tn(a,n)?a:aa.current!==null?(e=mu(e,a,o),Tn(e,n)||($t=!0),e):(xr&42)===0||(xr&1073741824)!==0&&(Fe&261930)===0?($t=!0,e.memoizedState=a):(e=Ng(),$e.lanes|=e,Qr|=e,n)}function Op(e,n,a,o,h){var g=G.p;G.p=g!==0&&8>g?g:8;var x=k.T,E={};k.T=E,xu(e,!1,n,a);try{var H=h(),W=k.S;if(W!==null&&W(E,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ae=kx(H,o);ci(e,n,ae,Un(e))}else ci(e,n,o,Un(e))}catch(oe){ci(e,n,{then:function(){},status:"rejected",reason:oe},Un())}finally{G.p=g,x!==null&&E.types!==null&&(x.types=E.types),k.T=x}}function Bx(){}function yu(e,n,a,o){if(e.tag!==5)throw Error(l(476));var h=kp(e).queue;Op(e,h,n,X,a===null?Bx:function(){return Dp(e),a(o)})}function kp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:X},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Dp(e){var n=kp(e);n.next===null&&(n=e.alternate.memoizedState),ci(e,n.next.queue,{},Un())}function vu(){return nn(Ei)}function Up(){return zt().memoizedState}function zp(){return zt().memoizedState}function Ix(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Un();e=Pr(a);var o=Gr(n,e,a);o!==null&&(_n(o,n,a),si(o,n,a)),n={cache:Kc()},e.payload=n;return}n=n.return}}function qx(e,n,a){var o=Un();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ql(e)?Lp(n,a):(a=Mc(e,n,a,o),a!==null&&(_n(a,e,o),Bp(a,n,o)))}function Mp(e,n,a){var o=Un();ci(e,n,a,o)}function ci(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ql(e))Lp(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var x=n.lastRenderedState,E=g(x,a);if(h.hasEagerState=!0,h.eagerState=E,Tn(E,x))return Al(e,n,h,0),ht===null&&Tl(),!1}catch{}if(a=Mc(e,n,h,o),a!==null)return _n(a,e,o),Bp(a,n,o),!0}return!1}function xu(e,n,a,o){if(o={lane:2,revertLane:Ju(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ql(e)){if(n)throw Error(l(479))}else n=Mc(e,a,o,2),n!==null&&_n(n,e,2)}function Ql(e){var n=e.alternate;return e===$e||n!==null&&n===$e}function Lp(e,n){ia=Hl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Bp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Re(e,a)}}var ui={readContext:nn,use:Vl,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};ui.useEffectEvent=Rt;var Ip={readContext:nn,use:Vl,useCallback:function(e,n){return hn().memoizedState=[e,n===void 0?null:n],e},useContext:nn,useEffect:Sp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Kl(4194308,4,Ep.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Kl(4194308,4,e,n)},useInsertionEffect:function(e,n){Kl(4,2,e,n)},useMemo:function(e,n){var a=hn();n=n===void 0?null:n;var o=e();if(Ss){gt(!0);try{e()}finally{gt(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=hn();if(a!==void 0){var h=a(n);if(Ss){gt(!0);try{a(n)}finally{gt(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=qx.bind(null,$e,e),[o.memoizedState,e]},useRef:function(e){var n=hn();return e={current:e},n.memoizedState=e},useState:function(e){e=hu(e);var n=e.queue,a=Mp.bind(null,$e,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:gu,useDeferredValue:function(e,n){var a=hn();return mu(a,e,n)},useTransition:function(){var e=hu(!1);return e=Op.bind(null,$e,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=$e,h=hn();if(Je){if(a===void 0)throw Error(l(407));a=a()}else{if(a=n(),ht===null)throw Error(l(349));(Fe&127)!==0||ip(o,n,a)}h.memoizedState=a;var g={value:a,getSnapshot:n};return h.queue=g,Sp(op.bind(null,o,g,e),[e]),o.flags|=2048,oa(9,{destroy:void 0},lp.bind(null,o,g,a,n),null),a},useId:function(){var e=hn(),n=ht.identifierPrefix;if(Je){var a=cr,o=or;a=(o&~(1<<32-mt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Pl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Dx++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:vu,useFormState:yp,useActionState:yp,useOptimistic:function(e){var n=hn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=xu.bind(null,$e,!0,a),a.dispatch=n,[e,n]},useMemoCache:cu,useCacheRefresh:function(){return hn().memoizedState=Ix.bind(null,$e)},useEffectEvent:function(e){var n=hn(),a={impl:e};return n.memoizedState=a,function(){if((tt&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},bu={readContext:nn,use:Vl,useCallback:Tp,useContext:nn,useEffect:pu,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Cp,useMemo:Ap,useReducer:Yl,useRef:wp,useState:function(){return Yl(br)},useDebugValue:gu,useDeferredValue:function(e,n){var a=zt();return Np(a,lt.memoizedState,e,n)},useTransition:function(){var e=Yl(br)[0],n=zt().memoizedState;return[typeof e=="boolean"?e:oi(e),n]},useSyncExternalStore:ap,useId:Up,useHostTransitionStatus:vu,useFormState:vp,useActionState:vp,useOptimistic:function(e,n){var a=zt();return dp(a,lt,e,n)},useMemoCache:cu,useCacheRefresh:zp};bu.useEffectEvent=jp;var qp={readContext:nn,use:Vl,useCallback:Tp,useContext:nn,useEffect:pu,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Cp,useMemo:Ap,useReducer:du,useRef:wp,useState:function(){return du(br)},useDebugValue:gu,useDeferredValue:function(e,n){var a=zt();return lt===null?mu(a,e,n):Np(a,lt.memoizedState,e,n)},useTransition:function(){var e=du(br)[0],n=zt().memoizedState;return[typeof e=="boolean"?e:oi(e),n]},useSyncExternalStore:ap,useId:Up,useHostTransitionStatus:vu,useFormState:bp,useActionState:bp,useOptimistic:function(e,n){var a=zt();return lt!==null?dp(a,lt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:cu,useCacheRefresh:zp};qp.useEffectEvent=jp;function wu(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:v({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Su={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Un(),h=Pr(o);h.payload=n,a!=null&&(h.callback=a),n=Gr(e,h,o),n!==null&&(_n(n,e,o),si(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Un(),h=Pr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Gr(e,h,o),n!==null&&(_n(n,e,o),si(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Un(),o=Pr(a);o.tag=2,n!=null&&(o.callback=n),n=Gr(e,o,a),n!==null&&(_n(n,e,a),si(n,e,a))}};function $p(e,n,a,o,h,g,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,x):n.prototype&&n.prototype.isPureReactComponent?!Xa(a,o)||!Xa(h,g):!0}function Hp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Su.enqueueReplaceState(n,n.state,null)}function js(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=v({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Pp(e){Rl(e)}function Gp(e){console.error(e)}function Vp(e){Rl(e)}function Xl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Yp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ju(e,n,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){Xl(e,n)},a}function Kp(e){return e=Pr(e),e.tag=3,e}function Fp(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var g=o.value;e.payload=function(){return h(g)},e.callback=function(){Yp(n,a,o)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Yp(n,a,o),typeof h!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function $x(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&ea(n,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Vn===null?oo():a.alternate===null&&Tt===0&&(Tt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Ll?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Fu(e,o,h)),!1;case 22:return a.flags|=65536,o===Ll?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Fu(e,o,h)),!1}throw Error(l(435,a.tag))}return Fu(e,o,h),oo(),!1}if(Je)return n=Nn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Hc&&(e=Error(l(422),{cause:o}),Za($n(e,a)))):(o!==Hc&&(n=Error(l(423),{cause:o}),Za($n(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=$n(o,a),h=ju(e.stateNode,o,h),Zc(e,h),Tt!==4&&(Tt=2)),!1;var g=Error(l(520),{cause:o});if(g=$n(g,a),vi===null?vi=[g]:vi.push(g),Tt!==4&&(Tt=2),n===null)return!0;o=$n(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=ju(a.stateNode,o,e),Zc(a,e),!1;case 1:if(n=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xr===null||!Xr.has(g))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Kp(h),Fp(h,e,a,o),Zc(a,h),!1}a=a.return}while(a!==null);return!1}var _u=Error(l(461)),$t=!1;function rn(e,n,a,o){n.child=e===null?Wf(n,null,a,o):ws(n,e.child,a,o)}function Qp(e,n,a,o,h){a=a.render;var g=n.ref;if("ref"in o){var x={};for(var E in o)E!=="ref"&&(x[E]=o[E])}else x=o;return ys(n),o=au(e,n,a,x,g,h),E=iu(),e!==null&&!$t?(lu(e,n,h),wr(e,n,h)):(Je&&E&&qc(n),n.flags|=1,rn(e,n,o,h),n.child)}function Xp(e,n,a,o,h){if(e===null){var g=a.type;return typeof g=="function"&&!Lc(g)&&g.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=g,Jp(e,n,g,o,h)):(e=Ol(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!ku(e,h)){var x=g.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(x,o)&&e.ref===n.ref)return wr(e,n,h)}return n.flags|=1,e=gr(g,o),e.ref=n.ref,e.return=n,n.child=e}function Jp(e,n,a,o,h){if(e!==null){var g=e.memoizedProps;if(Xa(g,o)&&e.ref===n.ref)if($t=!1,n.pendingProps=o=g,ku(e,h))(e.flags&131072)!==0&&($t=!0);else return n.lanes=e.lanes,wr(e,n,h)}return Cu(e,n,a,o,h)}function Wp(e,n,a,o){var h=o.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~g}else o=0,n.child=null;return Zp(e,n,g,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&zl(n,g!==null?g.cachePool:null),g!==null?tp(n,g):tu(),np(n);else return o=n.lanes=536870912,Zp(e,n,g!==null?g.baseLanes|a:a,a,o)}else g!==null?(zl(n,g.cachePool),tp(n,g),Yr(),n.memoizedState=null):(e!==null&&zl(n,null),tu(),Yr());return rn(e,n,h,a),n.child}function di(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Zp(e,n,a,o,h){var g=Qc();return g=g===null?null:{parent:It._currentValue,pool:g},n.memoizedState={baseLanes:a,cachePool:g},e!==null&&zl(n,null),tu(),np(n),e!==null&&ea(e,n,o,!0),n.childLanes=h,null}function Jl(e,n){return n=Zl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function eg(e,n,a){return ws(n,e.child,null,a),e=Jl(n,n.pendingProps),e.flags|=2,On(n),n.memoizedState=null,e}function Hx(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Je){if(o.mode==="hidden")return e=Jl(n,o),n.lanes=536870912,di(null,e);if(ru(n),(e=yt)?(e=hm(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Br!==null?{id:or,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=Lf(e),a.return=n,n.child=a,tn=n,yt=null)):e=null,e===null)throw qr(n);return n.lanes=536870912,null}return Jl(n,o)}var g=e.memoizedState;if(g!==null){var x=g.dehydrated;if(ru(n),h)if(n.flags&256)n.flags&=-257,n=eg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if($t||ea(e,n,a,!1),h=(a&e.childLanes)!==0,$t||h){if(o=ht,o!==null&&(x=ke(o,a),x!==0&&x!==g.retryLane))throw g.retryLane=x,fs(e,x),_n(o,e,x),_u;oo(),n=eg(e,n,a)}else e=g.treeContext,yt=Yn(x.nextSibling),tn=n,Je=!0,Ir=null,Gn=!1,e!==null&&qf(n,e),n=Jl(n,o),n.flags|=4096;return n}return e=gr(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Wl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Cu(e,n,a,o,h){return ys(n),a=au(e,n,a,o,void 0,h),o=iu(),e!==null&&!$t?(lu(e,n,h),wr(e,n,h)):(Je&&o&&qc(n),n.flags|=1,rn(e,n,a,h),n.child)}function tg(e,n,a,o,h,g){return ys(n),n.updateQueue=null,a=sp(n,o,a,h),rp(e),o=iu(),e!==null&&!$t?(lu(e,n,g),wr(e,n,g)):(Je&&o&&qc(n),n.flags|=1,rn(e,n,a,g),n.child)}function ng(e,n,a,o,h){if(ys(n),n.stateNode===null){var g=Xs,x=a.contextType;typeof x=="object"&&x!==null&&(g=nn(x)),g=new a(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Su,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},Jc(n),x=a.contextType,g.context=typeof x=="object"&&x!==null?nn(x):Xs,g.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(wu(n,a,x,o),g.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&Su.enqueueReplaceState(g,g.state,null),ii(n,o,g,h),ai(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){g=n.stateNode;var E=n.memoizedProps,H=js(a,E);g.props=H;var W=g.context,ae=a.contextType;x=Xs,typeof ae=="object"&&ae!==null&&(x=nn(ae));var oe=a.getDerivedStateFromProps;ae=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||W!==x)&&Hp(n,g,o,x),Hr=!1;var te=n.memoizedState;g.state=te,ii(n,o,g,h),ai(),W=n.memoizedState,E||te!==W||Hr?(typeof oe=="function"&&(wu(n,a,oe,o),W=n.memoizedState),(H=Hr||$p(n,a,H,o,te,W,x))?(ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=W),g.props=o,g.state=W,g.context=x,o=H):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,Wc(e,n),x=n.memoizedProps,ae=js(a,x),g.props=ae,oe=n.pendingProps,te=g.context,W=a.contextType,H=Xs,typeof W=="object"&&W!==null&&(H=nn(W)),E=a.getDerivedStateFromProps,(W=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==oe||te!==H)&&Hp(n,g,o,H),Hr=!1,te=n.memoizedState,g.state=te,ii(n,o,g,h),ai();var ne=n.memoizedState;x!==oe||te!==ne||Hr||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof E=="function"&&(wu(n,a,E,o),ne=n.memoizedState),(ae=Hr||$p(n,a,ae,o,te,ne,H)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,ne,H),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,ne,H)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&te===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&te===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ne),g.props=o,g.state=ne,g.context=H,o=ae):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&te===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&te===e.memoizedState||(n.flags|=1024),o=!1)}return g=o,Wl(e,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&o?(n.child=ws(n,e.child,null,h),n.child=ws(n,null,a,h)):rn(e,n,a,h),n.memoizedState=g.state,e=n.child):e=wr(e,n,h),e}function rg(e,n,a,o){return gs(),n.flags|=256,rn(e,n,a,o),n.child}var Eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(e){return{baseLanes:e,cachePool:Yf()}}function Tu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Dn),e}function sg(e,n,a){var o=n.pendingProps,h=!1,g=(n.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(Ut.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,e===null){if(Je){if(h?Vr(n):Yr(),(e=yt)?(e=hm(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Br!==null?{id:or,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=Lf(e),a.return=n,n.child=a,tn=n,yt=null)):e=null,e===null)throw qr(n);return ud(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(Yr(),h=n.mode,E=Zl({mode:"hidden",children:E},h),o=ps(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=Ru(a),o.childLanes=Tu(e,x,a),n.memoizedState=Eu,di(null,o)):(Vr(n),Au(n,E))}var H=e.memoizedState;if(H!==null&&(E=H.dehydrated,E!==null)){if(g)n.flags&256?(Vr(n),n.flags&=-257,n=Nu(e,n,a)):n.memoizedState!==null?(Yr(),n.child=e.child,n.flags|=128,n=null):(Yr(),E=o.fallback,h=n.mode,o=Zl({mode:"visible",children:o.children},h),E=ps(E,h,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,ws(n,e.child,null,a),o=n.child,o.memoizedState=Ru(a),o.childLanes=Tu(e,x,a),n.memoizedState=Eu,n=di(null,o));else if(Vr(n),ud(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var W=x.dgst;x=W,o=Error(l(419)),o.stack="",o.digest=x,Za({value:o,source:null,stack:null}),n=Nu(e,n,a)}else if($t||ea(e,n,a,!1),x=(a&e.childLanes)!==0,$t||x){if(x=ht,x!==null&&(o=ke(x,a),o!==0&&o!==H.retryLane))throw H.retryLane=o,fs(e,o),_n(x,e,o),_u;cd(E)||oo(),n=Nu(e,n,a)}else cd(E)?(n.flags|=192,n.child=e.child,n=null):(e=H.treeContext,yt=Yn(E.nextSibling),tn=n,Je=!0,Ir=null,Gn=!1,e!==null&&qf(n,e),n=Au(n,o.children),n.flags|=4096);return n}return h?(Yr(),E=o.fallback,h=n.mode,H=e.child,W=H.sibling,o=gr(H,{mode:"hidden",children:o.children}),o.subtreeFlags=H.subtreeFlags&65011712,W!==null?E=gr(W,E):(E=ps(E,h,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,di(null,o),o=n.child,E=e.child.memoizedState,E===null?E=Ru(a):(h=E.cachePool,h!==null?(H=It._currentValue,h=h.parent!==H?{parent:H,pool:H}:h):h=Yf(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=Tu(e,x,a),n.memoizedState=Eu,di(e.child,o)):(Vr(n),a=e.child,e=a.sibling,a=gr(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(x=n.deletions,x===null?(n.deletions=[e],n.flags|=16):x.push(e)),n.child=a,n.memoizedState=null,a)}function Au(e,n){return n=Zl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Zl(e,n){return e=An(22,e,null,n),e.lanes=0,e}function Nu(e,n,a){return ws(n,e.child,null,a),e=Au(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ag(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Vc(e.return,n,a)}function Ou(e,n,a,o,h,g){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:g}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=a,x.tailMode=h,x.treeForkCount=g)}function ig(e,n,a){var o=n.pendingProps,h=o.revealOrder,g=o.tail;o=o.children;var x=Ut.current,E=(x&2)!==0;if(E?(x=x&1|2,n.flags|=128):x&=1,Z(Ut,x),rn(e,n,o,a),o=Je?Wa:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ag(e,a,n);else if(e.tag===19)ag(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&$l(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Ou(n,!1,h,a,g,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&$l(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Ou(n,!0,a,null,g,o);break;case"together":Ou(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function wr(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Qr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ea(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,a=gr(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=gr(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ku(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function Px(e,n,a){switch(n.tag){case 3:Ie(n,n.stateNode.containerInfo),$r(n,It,e.memoizedState.cache),gs();break;case 27:case 5:he(n);break;case 4:Ie(n,n.stateNode.containerInfo);break;case 10:$r(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ru(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Vr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?sg(e,n,a):(Vr(n),e=wr(e,n,a),e!==null?e.sibling:null);Vr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(ea(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return ig(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(Ut,Ut.current),o)break;return null;case 22:return n.lanes=0,Wp(e,n,a,n.pendingProps);case 24:$r(n,It,e.memoizedState.cache)}return wr(e,n,a)}function lg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)$t=!0;else{if(!ku(e,a)&&(n.flags&128)===0)return $t=!1,Px(e,n,a);$t=(e.flags&131072)!==0}else $t=!1,Je&&(n.flags&1048576)!==0&&If(n,Wa,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=xs(n.elementType),n.type=e,typeof e=="function")Lc(e)?(o=js(e,o),n.tag=1,n=ng(null,n,e,o,a)):(n.tag=0,n=Cu(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===q){n.tag=11,n=Qp(null,n,e,o,a);break e}else if(h===B){n.tag=14,n=Xp(null,n,e,o,a);break e}}throw n=L(e)||e,Error(l(306,n,""))}}return n;case 0:return Cu(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=js(o,n.pendingProps),ng(e,n,o,h,a);case 3:e:{if(Ie(n,n.stateNode.containerInfo),e===null)throw Error(l(387));o=n.pendingProps;var g=n.memoizedState;h=g.element,Wc(e,n),ii(n,o,null,a);var x=n.memoizedState;if(o=x.cache,$r(n,It,o),o!==g.cache&&Yc(n,[It],a,!0),ai(),o=x.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=rg(e,n,o,a);break e}else if(o!==h){h=$n(Error(l(424)),n),Za(h),n=rg(e,n,o,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,yt=Yn(e.firstChild),tn=n,Je=!0,Ir=null,Gn=!0,a=Wf(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(gs(),o===h){n=wr(e,n,a);break e}rn(e,n,o,a)}n=n.child}return n;case 26:return Wl(e,n),e===null?(a=vm(n.type,null,n.pendingProps,null))?n.memoizedState=a:Je||(a=n.type,e=n.pendingProps,o=mo(ye.current).createElement(a),o[Et]=n,o[Bt]=e,sn(o,a,e),Xt(o),n.stateNode=o):n.memoizedState=vm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return he(n),e===null&&Je&&(o=n.stateNode=gm(n.type,n.pendingProps,ye.current),tn=n,Gn=!0,h=yt,es(n.type)?(dd=h,yt=Yn(o.firstChild)):yt=h),rn(e,n,n.pendingProps.children,a),Wl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Je&&((h=o=yt)&&(o=xb(o,n.type,n.pendingProps,Gn),o!==null?(n.stateNode=o,tn=n,yt=Yn(o.firstChild),Gn=!1,h=!0):h=!1),h||qr(n)),he(n),h=n.type,g=n.pendingProps,x=e!==null?e.memoizedProps:null,o=g.children,id(h,g)?o=null:x!==null&&id(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=au(e,n,Ux,null,null,a),Ei._currentValue=h),Wl(e,n),rn(e,n,o,a),n.child;case 6:return e===null&&Je&&((e=a=yt)&&(a=bb(a,n.pendingProps,Gn),a!==null?(n.stateNode=a,tn=n,yt=null,e=!0):e=!1),e||qr(n)),null;case 13:return sg(e,n,a);case 4:return Ie(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ws(n,null,o,a):rn(e,n,o,a),n.child;case 11:return Qp(e,n,n.type,n.pendingProps,a);case 7:return rn(e,n,n.pendingProps,a),n.child;case 8:return rn(e,n,n.pendingProps.children,a),n.child;case 12:return rn(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,$r(n,n.type,o.value),rn(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ys(n),h=nn(h),o=o(h),n.flags|=1,rn(e,n,o,a),n.child;case 14:return Xp(e,n,n.type,n.pendingProps,a);case 15:return Jp(e,n,n.type,n.pendingProps,a);case 19:return ig(e,n,a);case 31:return Hx(e,n,a);case 22:return Wp(e,n,a,n.pendingProps);case 24:return ys(n),o=nn(It),e===null?(h=Qc(),h===null&&(h=ht,g=Kc(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=a),h=g),n.memoizedState={parent:o,cache:h},Jc(n),$r(n,It,h)):((e.lanes&a)!==0&&(Wc(e,n),ii(n,null,null,a),ai()),h=e.memoizedState,g=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),$r(n,It,o)):(o=g.cache,$r(n,It,o),o!==h.cache&&Yc(n,[It],a,!0))),rn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Sr(e){e.flags|=4}function Du(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Ug())e.flags|=8192;else throw bs=Ll,Xc}else e.flags&=-16777217}function og(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jm(n))if(Ug())e.flags|=8192;else throw bs=Ll,Xc}function eo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ge():536870912,e.lanes|=n,ha|=n)}function hi(e,n){if(!Je)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function vt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Gx(e,n,a){var o=n.pendingProps;switch($c(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(n),null;case 1:return vt(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),vr(It),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Zs(n)?Sr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Pc())),vt(n),null;case 26:var h=n.type,g=n.memoizedState;return e===null?(Sr(n),g!==null?(vt(n),og(n,g)):(vt(n),Du(n,h,null,o,a))):g?g!==e.memoizedState?(Sr(n),vt(n),og(n,g)):(vt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Sr(n),vt(n),Du(n,h,e,o,a)),null;case 27:if(Xe(n),a=ye.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Sr(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return vt(n),null}e=le.current,Zs(n)?$f(n):(e=gm(h,o,a),n.stateNode=e,Sr(n))}return vt(n),null;case 5:if(Xe(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Sr(n);else{if(!o){if(n.stateNode===null)throw Error(l(166));return vt(n),null}if(g=le.current,Zs(n))$f(n);else{var x=mo(ye.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?x.createElement(h,{is:o.is}):x.createElement(h)}}g[Et]=n,g[Bt]=o;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=g;e:switch(sn(g,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Sr(n)}}return vt(n),Du(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Sr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(l(166));if(e=ye.current,Zs(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=tn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Et]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||sm(e.nodeValue,a)),e||qr(n,!0)}else e=mo(e).createTextNode(o),e[Et]=n,n.stateNode=e}return vt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zs(n),a!==null){if(e===null){if(!o)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Et]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vt(n),e=!1}else a=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(On(n),n):(On(n),null);if((n.flags&128)!==0)throw Error(l(558))}return vt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Zs(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(l(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[Et]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vt(n),h=!1}else h=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(On(n),n):(On(n),null)}return On(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),eo(n,n.updateQueue),vt(n),null);case 4:return Ue(),e===null&&td(n.stateNode.containerInfo),vt(n),null;case 10:return vr(n.type),vt(n),null;case 19:if(V(Ut),o=n.memoizedState,o===null)return vt(n),null;if(h=(n.flags&128)!==0,g=o.rendering,g===null)if(h)hi(o,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=$l(e),g!==null){for(n.flags|=128,hi(o,!1),e=g.updateQueue,n.updateQueue=e,eo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Mf(a,e),a=a.sibling;return Z(Ut,Ut.current&1|2),Je&&mr(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&it()>ao&&(n.flags|=128,h=!0,hi(o,!1),n.lanes=4194304)}else{if(!h)if(e=$l(g),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,eo(n,e),hi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Je)return vt(n),null}else 2*it()-o.renderingStartTime>ao&&a!==536870912&&(n.flags|=128,h=!0,hi(o,!1),n.lanes=4194304);o.isBackwards?(g.sibling=n.child,n.child=g):(e=o.last,e!==null?e.sibling=g:n.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,a=Ut.current,Z(Ut,h?a&1|2:a&1),Je&&mr(n,o.treeForkCount),e):(vt(n),null);case 22:case 23:return On(n),nu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(vt(n),n.subtreeFlags&6&&(n.flags|=8192)):vt(n),a=n.updateQueue,a!==null&&eo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&V(vs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),vr(It),vt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function Vx(e,n){switch($c(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return vr(It),Ue(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Xe(n),null;case 31:if(n.memoizedState!==null){if(On(n),n.alternate===null)throw Error(l(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(On(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return V(Ut),null;case 4:return Ue(),null;case 10:return vr(n.type),null;case 22:case 23:return On(n),nu(),e!==null&&V(vs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return vr(It),null;case 25:return null;default:return null}}function cg(e,n){switch($c(n),n.tag){case 3:vr(It),Ue();break;case 26:case 27:case 5:Xe(n);break;case 4:Ue();break;case 31:n.memoizedState!==null&&On(n);break;case 13:On(n);break;case 19:V(Ut);break;case 10:vr(n.type);break;case 22:case 23:On(n),nu(),e!==null&&V(vs);break;case 24:vr(It)}}function fi(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var g=a.create,x=a.inst;o=g(),x.destroy=o}a=a.next}while(a!==h)}}catch(E){st(n,n.return,E)}}function Kr(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&e)===e){var x=o.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,h=n;var H=a,W=E;try{W()}catch(ae){st(h,H,ae)}}}o=o.next}while(o!==g)}}catch(ae){st(n,n.return,ae)}}function ug(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ep(n,a)}catch(o){st(e,e.return,o)}}}function dg(e,n,a){a.props=js(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){st(e,n,o)}}function pi(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){st(e,n,h)}}function ur(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){st(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){st(e,n,h)}else a.current=null}function hg(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){st(e,e.return,h)}}function Uu(e,n,a){try{var o=e.stateNode;fb(o,e.type,a,n),o[Bt]=n}catch(h){st(e,e.return,h)}}function fg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&es(e.type)||e.tag===4}function zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&es(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=fr));else if(o!==4&&(o===27&&es(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Mu(e,n,a),e=e.sibling;e!==null;)Mu(e,n,a),e=e.sibling}function to(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&es(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(to(e,n,a),e=e.sibling;e!==null;)to(e,n,a),e=e.sibling}function pg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);sn(n,o,a),n[Et]=e,n[Bt]=a}catch(g){st(e,e.return,g)}}var jr=!1,Ht=!1,Lu=!1,gg=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function Yx(e,n){if(e=e.containerInfo,sd=jo,e=Rf(e),Nc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var x=0,E=-1,H=-1,W=0,ae=0,oe=e,te=null;t:for(;;){for(var ne;oe!==a||h!==0&&oe.nodeType!==3||(E=x+h),oe!==g||o!==0&&oe.nodeType!==3||(H=x+o),oe.nodeType===3&&(x+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)te=oe,oe=ne;for(;;){if(oe===e)break t;if(te===a&&++W===h&&(E=x),te===g&&++ae===o&&(H=x),(ne=oe.nextSibling)!==null)break;oe=te,te=oe.parentNode}oe=ne}a=E===-1||H===-1?null:{start:E,end:H}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:e,selectionRange:a},jo=!1,Jt=n;Jt!==null;)if(n=Jt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Jt=e;else for(;Jt!==null;){switch(n=Jt,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=n,h=g.memoizedProps,g=g.memoizedState,o=a.stateNode;try{var je=js(a.type,h);e=o.getSnapshotBeforeUpdate(je,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(ze){st(a,a.return,ze)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)od(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,Jt=e;break}Jt=n.return}}function mg(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Cr(e,a),o&4&&fi(5,a);break;case 1:if(Cr(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(x){st(a,a.return,x)}else{var h=js(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(x){st(a,a.return,x)}}o&64&&ug(a),o&512&&pi(a,a.return);break;case 3:if(Cr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ep(e,n)}catch(x){st(a,a.return,x)}}break;case 27:n===null&&o&4&&pg(a);case 26:case 5:Cr(e,a),n===null&&o&4&&hg(a),o&512&&pi(a,a.return);break;case 12:Cr(e,a);break;case 31:Cr(e,a),o&4&&xg(e,a);break;case 13:Cr(e,a),o&4&&bg(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=tb.bind(null,a),wb(e,a))));break;case 22:if(o=a.memoizedState!==null||jr,!o){n=n!==null&&n.memoizedState!==null||Ht,h=jr;var g=Ht;jr=o,(Ht=n)&&!g?Er(e,a,(a.subtreeFlags&8772)!==0):Cr(e,a),jr=h,Ht=g}break;case 30:break;default:Cr(e,a)}}function yg(e){var n=e.alternate;n!==null&&(e.alternate=null,yg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&fc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,bn=!1;function _r(e,n,a){for(a=a.child;a!==null;)vg(e,n,a),a=a.sibling}function vg(e,n,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(yn,a)}catch{}switch(a.tag){case 26:Ht||ur(a,n),_r(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||ur(a,n);var o=xt,h=bn;es(a.type)&&(xt=a.stateNode,bn=!1),_r(e,n,a),ji(a.stateNode),xt=o,bn=h;break;case 5:Ht||ur(a,n);case 6:if(o=xt,h=bn,xt=null,_r(e,n,a),xt=o,bn=h,xt!==null)if(bn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(a.stateNode)}catch(g){st(a,n,g)}else try{xt.removeChild(a.stateNode)}catch(g){st(a,n,g)}break;case 18:xt!==null&&(bn?(e=xt,um(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ba(e)):um(xt,a.stateNode));break;case 4:o=xt,h=bn,xt=a.stateNode.containerInfo,bn=!0,_r(e,n,a),xt=o,bn=h;break;case 0:case 11:case 14:case 15:Kr(2,a,n),Ht||Kr(4,a,n),_r(e,n,a);break;case 1:Ht||(ur(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&dg(a,n,o)),_r(e,n,a);break;case 21:_r(e,n,a);break;case 22:Ht=(o=Ht)||a.memoizedState!==null,_r(e,n,a),Ht=o;break;default:_r(e,n,a)}}function xg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ba(e)}catch(a){st(n,n.return,a)}}}function bg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ba(e)}catch(a){st(n,n.return,a)}}function Kx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new gg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new gg),n;default:throw Error(l(435,e.tag))}}function no(e,n){var a=Kx(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=nb.bind(null,e,o);o.then(h,h)}})}function wn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],g=e,x=n,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(es(E.type)){xt=E.stateNode,bn=!1;break e}break;case 5:xt=E.stateNode,bn=!1;break e;case 3:case 4:xt=E.stateNode.containerInfo,bn=!0;break e}E=E.return}if(xt===null)throw Error(l(160));vg(g,x,h),xt=null,bn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)wg(n,e),n=n.sibling}var Zn=null;function wg(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wn(n,e),Sn(e),o&4&&(Kr(3,e,e.return),fi(3,e),Kr(5,e,e.return));break;case 1:wn(n,e),Sn(e),o&512&&(Ht||a===null||ur(a,a.return)),o&64&&jr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Zn;if(wn(n,e),Sn(e),o&512&&(Ht||a===null||ur(a,a.return)),o&4){var g=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":g=h.getElementsByTagName("title")[0],(!g||g[$a]||g[Et]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(o),h.head.insertBefore(g,h.querySelector("head > title"))),sn(g,o,a),g[Et]=e,Xt(g),o=g;break e;case"link":var x=wm("link","href",h).get(o+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(g=x[E],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}g=h.createElement(o),sn(g,o,a),h.head.appendChild(g);break;case"meta":if(x=wm("meta","content",h).get(o+(a.content||""))){for(E=0;E<x.length;E++)if(g=x[E],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}g=h.createElement(o),sn(g,o,a),h.head.appendChild(g);break;default:throw Error(l(468,o))}g[Et]=e,Xt(g),o=g}e.stateNode=o}else Sm(h,e.type,e.stateNode);else e.stateNode=bm(h,o,e.memoizedProps);else g!==o?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,o===null?Sm(h,e.type,e.stateNode):bm(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Uu(e,e.memoizedProps,a.memoizedProps)}break;case 27:wn(n,e),Sn(e),o&512&&(Ht||a===null||ur(a,a.return)),a!==null&&o&4&&Uu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(wn(n,e),Sn(e),o&512&&(Ht||a===null||ur(a,a.return)),e.flags&32){h=e.stateNode;try{Ps(h,"")}catch(je){st(e,e.return,je)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Uu(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Lu=!0);break;case 6:if(wn(n,e),Sn(e),o&4){if(e.stateNode===null)throw Error(l(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(je){st(e,e.return,je)}}break;case 3:if(xo=null,h=Zn,Zn=yo(n.containerInfo),wn(n,e),Zn=h,Sn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ba(n.containerInfo)}catch(je){st(e,e.return,je)}Lu&&(Lu=!1,Sg(e));break;case 4:o=Zn,Zn=yo(e.stateNode.containerInfo),wn(n,e),Sn(e),Zn=o;break;case 12:wn(n,e),Sn(e);break;case 31:wn(n,e),Sn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 13:wn(n,e),Sn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(so=it()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 22:h=e.memoizedState!==null;var H=a!==null&&a.memoizedState!==null,W=jr,ae=Ht;if(jr=W||h,Ht=ae||H,wn(n,e),Ht=ae,jr=W,Sn(e),o&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||H||jr||Ht||_s(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){H=a=n;try{if(g=H.stateNode,h)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=H.stateNode;var oe=H.memoizedProps.style,te=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;E.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(je){st(H,H.return,je)}}}else if(n.tag===6){if(a===null){H=n;try{H.stateNode.nodeValue=h?"":H.memoizedProps}catch(je){st(H,H.return,je)}}}else if(n.tag===18){if(a===null){H=n;try{var ne=H.stateNode;h?dm(ne,!0):dm(H.stateNode,!1)}catch(je){st(H,H.return,je)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,no(e,a))));break;case 19:wn(n,e),Sn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,no(e,o)));break;case 30:break;case 21:break;default:wn(n,e),Sn(e)}}function Sn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(fg(o)){a=o;break}o=o.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var h=a.stateNode,g=zu(e);to(e,g,h);break;case 5:var x=a.stateNode;a.flags&32&&(Ps(x,""),a.flags&=-33);var E=zu(e);to(e,E,x);break;case 3:case 4:var H=a.stateNode.containerInfo,W=zu(e);Mu(e,W,H);break;default:throw Error(l(161))}}catch(ae){st(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Sg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Sg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Cr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)mg(e,n.alternate,n),n=n.sibling}function _s(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Kr(4,n,n.return),_s(n);break;case 1:ur(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&dg(n,n.return,a),_s(n);break;case 27:ji(n.stateNode);case 26:case 5:ur(n,n.return),_s(n);break;case 22:n.memoizedState===null&&_s(n);break;case 30:_s(n);break;default:_s(n)}e=e.sibling}}function Er(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,g=n,x=g.flags;switch(g.tag){case 0:case 11:case 15:Er(h,g,a),fi(4,g);break;case 1:if(Er(h,g,a),o=g,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){st(o,o.return,W)}if(o=g,h=o.updateQueue,h!==null){var E=o.stateNode;try{var H=h.shared.hiddenCallbacks;if(H!==null)for(h.shared.hiddenCallbacks=null,h=0;h<H.length;h++)Zf(H[h],E)}catch(W){st(o,o.return,W)}}a&&x&64&&ug(g),pi(g,g.return);break;case 27:pg(g);case 26:case 5:Er(h,g,a),a&&o===null&&x&4&&hg(g),pi(g,g.return);break;case 12:Er(h,g,a);break;case 31:Er(h,g,a),a&&x&4&&xg(h,g);break;case 13:Er(h,g,a),a&&x&4&&bg(h,g);break;case 22:g.memoizedState===null&&Er(h,g,a),pi(g,g.return);break;case 30:break;default:Er(h,g,a)}n=n.sibling}}function Bu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ei(a))}function Iu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ei(e))}function er(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jg(e,n,a,o),n=n.sibling}function jg(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:er(e,n,a,o),h&2048&&fi(9,n);break;case 1:er(e,n,a,o);break;case 3:er(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ei(e)));break;case 12:if(h&2048){er(e,n,a,o),e=n.stateNode;try{var g=n.memoizedProps,x=g.id,E=g.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){st(n,n.return,H)}}else er(e,n,a,o);break;case 31:er(e,n,a,o);break;case 13:er(e,n,a,o);break;case 23:break;case 22:g=n.stateNode,x=n.alternate,n.memoizedState!==null?g._visibility&2?er(e,n,a,o):gi(e,n):g._visibility&2?er(e,n,a,o):(g._visibility|=2,ca(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Bu(x,n);break;case 24:er(e,n,a,o),h&2048&&Iu(n.alternate,n);break;default:er(e,n,a,o)}}function ca(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,x=n,E=a,H=o,W=x.flags;switch(x.tag){case 0:case 11:case 15:ca(g,x,E,H,h),fi(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?ca(g,x,E,H,h):gi(g,x):(ae._visibility|=2,ca(g,x,E,H,h)),h&&W&2048&&Bu(x.alternate,x);break;case 24:ca(g,x,E,H,h),h&&W&2048&&Iu(x.alternate,x);break;default:ca(g,x,E,H,h)}n=n.sibling}}function gi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:gi(a,o),h&2048&&Bu(o.alternate,o);break;case 24:gi(a,o),h&2048&&Iu(o.alternate,o);break;default:gi(a,o)}n=n.sibling}}var mi=8192;function ua(e,n,a){if(e.subtreeFlags&mi)for(e=e.child;e!==null;)_g(e,n,a),e=e.sibling}function _g(e,n,a){switch(e.tag){case 26:ua(e,n,a),e.flags&mi&&e.memoizedState!==null&&Db(a,Zn,e.memoizedState,e.memoizedProps);break;case 5:ua(e,n,a);break;case 3:case 4:var o=Zn;Zn=yo(e.stateNode.containerInfo),ua(e,n,a),Zn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=mi,mi=16777216,ua(e,n,a),mi=o):ua(e,n,a));break;default:ua(e,n,a)}}function Cg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function yi(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Jt=o,Rg(o,e)}Cg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Eg(e),e=e.sibling}function Eg(e){switch(e.tag){case 0:case 11:case 15:yi(e),e.flags&2048&&Kr(9,e,e.return);break;case 3:yi(e);break;case 12:yi(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ro(e)):yi(e);break;default:yi(e)}}function ro(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Jt=o,Rg(o,e)}Cg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Kr(8,n,n.return),ro(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ro(n));break;default:ro(n)}e=e.sibling}}function Rg(e,n){for(;Jt!==null;){var a=Jt;switch(a.tag){case 0:case 11:case 15:Kr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ei(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Jt=o;else e:for(a=e;Jt!==null;){o=Jt;var h=o.sibling,g=o.return;if(yg(o),o===a){Jt=null;break e}if(h!==null){h.return=g,Jt=h;break e}Jt=g}}}var Fx={getCacheForType:function(e){var n=nn(It),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return nn(It).controller.signal}},Qx=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,Ge=null,Fe=0,rt=0,kn=null,Fr=!1,da=!1,qu=!1,Rr=0,Tt=0,Qr=0,Cs=0,$u=0,Dn=0,ha=0,vi=null,jn=null,Hu=!1,so=0,Tg=0,ao=1/0,io=null,Xr=null,Yt=0,Jr=null,fa=null,Tr=0,Pu=0,Gu=null,Ag=null,xi=0,Vu=null;function Un(){return(tt&2)!==0&&Fe!==0?Fe&-Fe:k.T!==null?Ju():St()}function Ng(){if(Dn===0)if((Fe&536870912)===0||Je){var e=R;R<<=1,(R&3932160)===0&&(R=262144),Dn=e}else Dn=536870912;return e=Nn.current,e!==null&&(e.flags|=32),Dn}function _n(e,n,a){(e===ht&&(rt===2||rt===9)||e.cancelPendingCommit!==null)&&(pa(e,0),Wr(e,Fe,Dn,!1)),Oe(e,a),((tt&2)===0||e!==ht)&&(e===ht&&((tt&2)===0&&(Cs|=a),Tt===4&&Wr(e,Fe,Dn,!1)),dr(e))}function Og(e,n,a){if((tt&6)!==0)throw Error(l(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||pe(e,n),h=o?Wx(e,n):Ku(e,n,!0),g=o;do{if(h===0){da&&!o&&Wr(e,n,0,!1);break}else{if(a=e.current.alternate,g&&!Xx(a)){h=Ku(e,n,!1),g=!1;continue}if(h===2){if(g=n,e.errorRecoveryDisabledLanes&g)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var E=e;h=vi;var H=E.current.memoizedState.isDehydrated;if(H&&(pa(E,x).flags|=256),x=Ku(E,x,!1),x!==2){if(qu&&!H){E.errorRecoveryDisabledLanes|=g,Cs|=g,h=4;break e}g=jn,jn=h,g!==null&&(jn===null?jn=g:jn.push.apply(jn,g))}h=x}if(g=!1,h!==2)continue}}if(h===1){pa(e,0),Wr(e,n,0,!0);break}e:{switch(o=e,g=h,g){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Wr(o,n,Dn,!Fr);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(h=so+300-it(),10<h)){if(Wr(o,n,Dn,!Fr),ue(o,0,!0)!==0)break e;Tr=n,o.timeoutHandle=om(kg.bind(null,o,a,jn,io,Hu,n,Dn,Cs,ha,Fr,g,"Throttled",-0,0),h);break e}kg(o,a,jn,io,Hu,n,Dn,Cs,ha,Fr,g,null,-0,0)}}break}while(!0);dr(e)}function kg(e,n,a,o,h,g,x,E,H,W,ae,oe,te,ne){if(e.timeoutHandle=-1,oe=n.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},_g(n,g,oe);var je=(g&62914560)===g?so-it():(g&4194048)===g?Tg-it():0;if(je=Ub(oe,je),je!==null){Tr=g,e.cancelPendingCommit=je(qg.bind(null,e,n,g,a,o,h,x,E,H,ae,oe,null,te,ne)),Wr(e,g,x,!W);return}}qg(e,n,g,a,o,h,x,E,H)}function Xx(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],g=h.getSnapshot;h=h.value;try{if(!Tn(g(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Wr(e,n,a,o){n&=~$u,n&=~Cs,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var g=31-mt(h),x=1<<g;o[g]=-1,h&=~x}a!==0&&Ae(e,a,n)}function lo(){return(tt&6)===0?(bi(0),!1):!0}function Yu(){if(Ge!==null){if(rt===0)var e=Ge.return;else e=Ge,yr=ms=null,ou(e),sa=null,ni=0,e=Ge;for(;e!==null;)cg(e.alternate,e),e=e.return;Ge=null}}function pa(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,mb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Tr=0,Yu(),ht=e,Ge=a=gr(e.current,null),Fe=n,rt=0,kn=null,Fr=!1,da=pe(e,n),qu=!1,ha=Dn=$u=Cs=Qr=Tt=0,jn=vi=null,Hu=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-mt(o),g=1<<h;n|=e[h],o&=~g}return Rr=n,Tl(),a}function Dg(e,n){$e=null,k.H=ui,n===ra||n===Ml?(n=Qf(),rt=3):n===Xc?(n=Qf(),rt=4):rt=n===_u?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,kn=n,Ge===null&&(Tt=1,Xl(e,$n(n,e.current)))}function Ug(){var e=Nn.current;return e===null?!0:(Fe&4194048)===Fe?Vn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?e===Vn:!1}function zg(){var e=k.H;return k.H=ui,e===null?ui:e}function Mg(){var e=k.A;return k.A=Fx,e}function oo(){Tt=4,Fr||(Fe&4194048)!==Fe&&Nn.current!==null||(da=!0),(Qr&134217727)===0&&(Cs&134217727)===0||ht===null||Wr(ht,Fe,Dn,!1)}function Ku(e,n,a){var o=tt;tt|=2;var h=zg(),g=Mg();(ht!==e||Fe!==n)&&(io=null,pa(e,n)),n=!1;var x=Tt;e:do try{if(rt!==0&&Ge!==null){var E=Ge,H=kn;switch(rt){case 8:Yu(),x=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(n=!0);var W=rt;if(rt=0,kn=null,ga(e,E,H,W),a&&da){x=0;break e}break;default:W=rt,rt=0,kn=null,ga(e,E,H,W)}}Jx(),x=Tt;break}catch(ae){Dg(e,ae)}while(!0);return n&&e.shellSuspendCounter++,yr=ms=null,tt=o,k.H=h,k.A=g,Ge===null&&(ht=null,Fe=0,Tl()),x}function Jx(){for(;Ge!==null;)Lg(Ge)}function Wx(e,n){var a=tt;tt|=2;var o=zg(),h=Mg();ht!==e||Fe!==n?(io=null,ao=it()+500,pa(e,n)):da=pe(e,n);e:do try{if(rt!==0&&Ge!==null){n=Ge;var g=kn;t:switch(rt){case 1:rt=0,kn=null,ga(e,n,g,1);break;case 2:case 9:if(Kf(g)){rt=0,kn=null,Bg(n);break}n=function(){rt!==2&&rt!==9||ht!==e||(rt=7),dr(e)},g.then(n,n);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Kf(g)?(rt=0,kn=null,Bg(n)):(rt=0,kn=null,ga(e,n,g,7));break;case 5:var x=null;switch(Ge.tag){case 26:x=Ge.memoizedState;case 5:case 27:var E=Ge;if(x?jm(x):E.stateNode.complete){rt=0,kn=null;var H=E.sibling;if(H!==null)Ge=H;else{var W=E.return;W!==null?(Ge=W,co(W)):Ge=null}break t}}rt=0,kn=null,ga(e,n,g,5);break;case 6:rt=0,kn=null,ga(e,n,g,6);break;case 8:Yu(),Tt=6;break e;default:throw Error(l(462))}}Zx();break}catch(ae){Dg(e,ae)}while(!0);return yr=ms=null,k.H=o,k.A=h,tt=a,Ge!==null?0:(ht=null,Fe=0,Tl(),Tt)}function Zx(){for(;Ge!==null&&!at();)Lg(Ge)}function Lg(e){var n=lg(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,n===null?co(e):Ge=n}function Bg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=tg(a,n,n.pendingProps,n.type,void 0,Fe);break;case 11:n=tg(a,n,n.pendingProps,n.type.render,n.ref,Fe);break;case 5:ou(n);default:cg(a,n),n=Ge=Mf(n,Rr),n=lg(a,n,Rr)}e.memoizedProps=e.pendingProps,n===null?co(e):Ge=n}function ga(e,n,a,o){yr=ms=null,ou(n),sa=null,ni=0;var h=n.return;try{if($x(e,h,n,a,Fe)){Tt=1,Xl(e,$n(a,e.current)),Ge=null;return}}catch(g){if(h!==null)throw Ge=h,g;Tt=1,Xl(e,$n(a,e.current)),Ge=null;return}n.flags&32768?(Je||o===1?e=!0:da||(Fe&536870912)!==0?e=!1:(Fr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Nn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ig(n,e)):co(n)}function co(e){var n=e;do{if((n.flags&32768)!==0){Ig(n,Fr);return}e=n.return;var a=Gx(n.alternate,n,Rr);if(a!==null){Ge=a;return}if(n=n.sibling,n!==null){Ge=n;return}Ge=n=e}while(n!==null);Tt===0&&(Tt=5)}function Ig(e,n){do{var a=Vx(e.alternate,e);if(a!==null){a.flags&=32767,Ge=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ge=e;return}Ge=e=a}while(e!==null);Tt=6,Ge=null}function qg(e,n,a,o,h,g,x,E,H){e.cancelPendingCommit=null;do uo();while(Yt!==0);if((tt&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(g=n.lanes|n.childLanes,g|=zc,we(e,a,g,x,E,H),e===ht&&(Ge=ht=null,Fe=0),fa=n,Jr=e,Tr=a,Pu=g,Gu=h,Ag=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,rb(dt,function(){return Vg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,h=G.p,G.p=2,x=tt,tt|=4;try{Yx(e,n,a)}finally{tt=x,G.p=h,k.T=o}}Yt=1,$g(),Hg(),Pg()}}function $g(){if(Yt===1){Yt=0;var e=Jr,n=fa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var o=G.p;G.p=2;var h=tt;tt|=4;try{wg(n,e);var g=ad,x=Rf(e.containerInfo),E=g.focusedElem,H=g.selectionRange;if(x!==E&&E&&E.ownerDocument&&Ef(E.ownerDocument.documentElement,E)){if(H!==null&&Nc(E)){var W=H.start,ae=H.end;if(ae===void 0&&(ae=W),"selectionStart"in E)E.selectionStart=W,E.selectionEnd=Math.min(ae,E.value.length);else{var oe=E.ownerDocument||document,te=oe&&oe.defaultView||window;if(te.getSelection){var ne=te.getSelection(),je=E.textContent.length,ze=Math.min(H.start,je),ct=H.end===void 0?ze:Math.min(H.end,je);!ne.extend&&ze>ct&&(x=ct,ct=ze,ze=x);var Q=Cf(E,ze),F=Cf(E,ct);if(Q&&F&&(ne.rangeCount!==1||ne.anchorNode!==Q.node||ne.anchorOffset!==Q.offset||ne.focusNode!==F.node||ne.focusOffset!==F.offset)){var J=oe.createRange();J.setStart(Q.node,Q.offset),ne.removeAllRanges(),ze>ct?(ne.addRange(J),ne.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ne.addRange(J))}}}}for(oe=[],ne=E;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<oe.length;E++){var ie=oe[E];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}jo=!!sd,ad=sd=null}finally{tt=h,G.p=o,k.T=a}}e.current=n,Yt=2}}function Hg(){if(Yt===2){Yt=0;var e=Jr,n=fa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var o=G.p;G.p=2;var h=tt;tt|=4;try{mg(e,n.alternate,n)}finally{tt=h,G.p=o,k.T=a}}Yt=3}}function Pg(){if(Yt===4||Yt===3){Yt=0,Vt();var e=Jr,n=fa,a=Tr,o=Ag;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Yt=5:(Yt=0,fa=Jr=null,Gg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Xr=null),Ct(a),n=n.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(yn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=k.T,h=G.p,G.p=2,k.T=null;try{for(var g=e.onRecoverableError,x=0;x<o.length;x++){var E=o[x];g(E.value,{componentStack:E.stack})}}finally{k.T=n,G.p=h}}(Tr&3)!==0&&uo(),dr(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Vu?xi++:(xi=0,Vu=e):xi=0,bi(0)}}function Gg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ei(n)))}function uo(){return $g(),Hg(),Pg(),Vg()}function Vg(){if(Yt!==5)return!1;var e=Jr,n=Pu;Pu=0;var a=Ct(Tr),o=k.T,h=G.p;try{G.p=32>a?32:a,k.T=null,a=Gu,Gu=null;var g=Jr,x=Tr;if(Yt=0,fa=Jr=null,Tr=0,(tt&6)!==0)throw Error(l(331));var E=tt;if(tt|=4,Eg(g.current),jg(g,g.current,x,a),tt=E,bi(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(yn,g)}catch{}return!0}finally{G.p=h,k.T=o,Gg(e,n)}}function Yg(e,n,a){n=$n(a,n),n=ju(e.stateNode,n,2),e=Gr(e,n,2),e!==null&&(Oe(e,2),dr(e))}function st(e,n,a){if(e.tag===3)Yg(e,e,a);else for(;n!==null;){if(n.tag===3){Yg(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xr===null||!Xr.has(o))){e=$n(a,e),a=Kp(2),o=Gr(n,a,2),o!==null&&(Fp(a,o,n,e),Oe(o,2),dr(o));break}}n=n.return}}function Fu(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Qx;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(qu=!0,h.add(a),e=eb.bind(null,e,n,a),n.then(e,e))}function eb(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ht===e&&(Fe&a)===a&&(Tt===4||Tt===3&&(Fe&62914560)===Fe&&300>it()-so?(tt&2)===0&&pa(e,0):$u|=a,ha===Fe&&(ha=0)),dr(e)}function Kg(e,n){n===0&&(n=ge()),e=fs(e,n),e!==null&&(Oe(e,n),dr(e))}function tb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Kg(e,a)}function nb(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(n),Kg(e,a)}function rb(e,n){return Ot(e,n)}var ho=null,ma=null,Qu=!1,fo=!1,Xu=!1,Zr=0;function dr(e){e!==ma&&e.next===null&&(ma===null?ho=ma=e:ma=ma.next=e),fo=!0,Qu||(Qu=!0,ab())}function bi(e,n){if(!Xu&&fo){Xu=!0;do for(var a=!1,o=ho;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var g=0;else{var x=o.suspendedLanes,E=o.pingedLanes;g=(1<<31-mt(42|e)+1)-1,g&=h&~(x&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Jg(o,g))}else g=Fe,g=ue(o,o===ht?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||pe(o,g)||(a=!0,Jg(o,g));o=o.next}while(a);Xu=!1}}function sb(){Fg()}function Fg(){fo=Qu=!1;var e=0;Zr!==0&&gb()&&(e=Zr);for(var n=it(),a=null,o=ho;o!==null;){var h=o.next,g=Qg(o,n);g===0?(o.next=null,a===null?ho=h:a.next=h,h===null&&(ma=a)):(a=o,(e!==0||(g&3)!==0)&&(fo=!0)),o=h}Yt!==0&&Yt!==5||bi(e),Zr!==0&&(Zr=0)}function Qg(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var x=31-mt(g),E=1<<x,H=h[x];H===-1?((E&a)===0||(E&o)!==0)&&(h[x]=Se(E,n)):H<=n&&(e.expiredLanes|=E),g&=~E}if(n=ht,a=Fe,a=ue(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(rt===2||rt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&kt(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||pe(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&kt(o),Ct(a)){case 2:case 8:a=dn;break;case 32:a=dt;break;case 268435456:a=Zt;break;default:a=dt}return o=Xg.bind(null,e),a=Ot(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&kt(o),e.callbackPriority=2,e.callbackNode=null,2}function Xg(e,n){if(Yt!==0&&Yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(uo()&&e.callbackNode!==a)return null;var o=Fe;return o=ue(e,e===ht?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Og(e,o,n),Qg(e,it()),e.callbackNode!=null&&e.callbackNode===a?Xg.bind(null,e):null)}function Jg(e,n){if(uo())return null;Og(e,n,!0)}function ab(){yb(function(){(tt&6)!==0?Ot(mn,sb):Fg()})}function Ju(){if(Zr===0){var e=ta;e===0&&(e=be,be<<=1,(be&261888)===0&&(be=256)),Zr=e}return Zr}function Wg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bl(""+e)}function Zg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function ib(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var g=Wg((h[Bt]||null).action),x=o.submitter;x&&(n=(n=x[Bt]||null)?Wg(n.formAction):x.getAttribute("formAction"),n!==null&&(g=n,x=null));var E=new _l("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Zr!==0){var H=x?Zg(h,x):new FormData(h);yu(a,{pending:!0,data:H,method:h.method,action:g},null,H)}}else typeof g=="function"&&(E.preventDefault(),H=x?Zg(h,x):new FormData(h),yu(a,{pending:!0,data:H,method:h.method,action:g},g,H))},currentTarget:h}]})}}for(var Wu=0;Wu<Uc.length;Wu++){var Zu=Uc[Wu],lb=Zu.toLowerCase(),ob=Zu[0].toUpperCase()+Zu.slice(1);Wn(lb,"on"+ob)}Wn(Nf,"onAnimationEnd"),Wn(Of,"onAnimationIteration"),Wn(kf,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(_x,"onTransitionRun"),Wn(Cx,"onTransitionStart"),Wn(Ex,"onTransitionCancel"),Wn(Df,"onTransitionEnd"),$s("onMouseEnter",["mouseout","mouseover"]),$s("onMouseLeave",["mouseout","mouseover"]),$s("onPointerEnter",["pointerout","pointerover"]),$s("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wi));function em(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;e:{var g=void 0;if(n)for(var x=o.length-1;0<=x;x--){var E=o[x],H=E.instance,W=E.currentTarget;if(E=E.listener,H!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=W;try{g(h)}catch(ae){Rl(ae)}h.currentTarget=null,g=H}else for(x=0;x<o.length;x++){if(E=o[x],H=E.instance,W=E.currentTarget,E=E.listener,H!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=W;try{g(h)}catch(ae){Rl(ae)}h.currentTarget=null,g=H}}}}function Ve(e,n){var a=n[hc];a===void 0&&(a=n[hc]=new Set);var o=e+"__bubble";a.has(o)||(tm(n,e,2,!1),a.add(o))}function ed(e,n,a){var o=0;n&&(o|=4),tm(a,e,o,n)}var po="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[po]){e[po]=!0,Kh.forEach(function(a){a!=="selectionchange"&&(cb.has(a)||ed(a,!1,e),ed(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[po]||(n[po]=!0,ed("selectionchange",!1,n))}}function tm(e,n,a,o){switch(Nm(n)){case 2:var h=Lb;break;case 8:h=Bb;break;default:h=md}a=h.bind(null,n,a,e),h=void 0,!wc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function nd(e,n,a,o,h){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var E=o.stateNode.containerInfo;if(E===h)break;if(x===4)for(x=o.return;x!==null;){var H=x.tag;if((H===3||H===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;E!==null;){if(x=Bs(E),x===null)return;if(H=x.tag,H===5||H===6||H===26||H===27){o=g=x;continue e}E=E.parentNode}}o=o.return}af(function(){var W=g,ae=xc(a),oe=[];e:{var te=Uf.get(e);if(te!==void 0){var ne=_l,je=e;switch(e){case"keypress":if(Sl(a)===0)break e;case"keydown":case"keyup":ne=nx;break;case"focusin":je="focus",ne=Cc;break;case"focusout":je="blur",ne=Cc;break;case"beforeblur":case"afterblur":ne=Cc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=G0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=ax;break;case Nf:case Of:case kf:ne=K0;break;case Df:ne=lx;break;case"scroll":case"scrollend":ne=H0;break;case"wheel":ne=cx;break;case"copy":case"cut":case"paste":ne=Q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=df;break;case"toggle":case"beforetoggle":ne=dx}var ze=(n&4)!==0,ct=!ze&&(e==="scroll"||e==="scrollend"),Q=ze?te!==null?te+"Capture":null:te;ze=[];for(var F=W,J;F!==null;){var ie=F;if(J=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||J===null||Q===null||(ie=Pa(F,Q),ie!=null&&ze.push(Si(F,ie,J))),ct)break;F=F.return}0<ze.length&&(te=new ne(te,je,null,a,ae),oe.push({event:te,listeners:ze}))}}if((n&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",te&&a!==vc&&(je=a.relatedTarget||a.fromElement)&&(Bs(je)||je[Ls]))break e;if((ne||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(je=a.relatedTarget||a.toElement,ne=W,je=je?Bs(je):null,je!==null&&(ct=u(je),ze=je.tag,je!==ct||ze!==5&&ze!==27&&ze!==6)&&(je=null)):(ne=null,je=W),ne!==je)){if(ze=cf,ie="onMouseLeave",Q="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(ze=df,ie="onPointerLeave",Q="onPointerEnter",F="pointer"),ct=ne==null?te:Ha(ne),J=je==null?te:Ha(je),te=new ze(ie,F+"leave",ne,a,ae),te.target=ct,te.relatedTarget=J,ie=null,Bs(ae)===W&&(ze=new ze(Q,F+"enter",je,a,ae),ze.target=J,ze.relatedTarget=ct,ie=ze),ct=ie,ne&&je)t:{for(ze=ub,Q=ne,F=je,J=0,ie=Q;ie;ie=ze(ie))J++;ie=0;for(var De=F;De;De=ze(De))ie++;for(;0<J-ie;)Q=ze(Q),J--;for(;0<ie-J;)F=ze(F),ie--;for(;J--;){if(Q===F||F!==null&&Q===F.alternate){ze=Q;break t}Q=ze(Q),F=ze(F)}ze=null}else ze=null;ne!==null&&nm(oe,te,ne,ze,!1),je!==null&&ct!==null&&nm(oe,ct,je,ze,!0)}}e:{if(te=W?Ha(W):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var Ze=xf;else if(yf(te))if(bf)Ze=wx;else{Ze=xx;var Ee=vx}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&yc(W.elementType)&&(Ze=xf):Ze=bx;if(Ze&&(Ze=Ze(e,W))){vf(oe,Ze,a,ae);break e}Ee&&Ee(e,te,W),e==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&mc(te,"number",te.value)}switch(Ee=W?Ha(W):window,e){case"focusin":(yf(Ee)||Ee.contentEditable==="true")&&(Ks=Ee,Oc=W,Ja=null);break;case"focusout":Ja=Oc=Ks=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,Tf(oe,a,ae);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":Tf(oe,a,ae)}var He;if(Rc)e:{switch(e){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Ys?gf(e,a)&&(Qe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Qe="onCompositionStart");Qe&&(hf&&a.locale!=="ko"&&(Ys||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Ys&&(He=lf()):(Lr=ae,Sc="value"in Lr?Lr.value:Lr.textContent,Ys=!0)),Ee=go(W,Qe),0<Ee.length&&(Qe=new uf(Qe,e,null,a,ae),oe.push({event:Qe,listeners:Ee}),He?Qe.data=He:(He=mf(a),He!==null&&(Qe.data=He)))),(He=fx?px(e,a):gx(e,a))&&(Qe=go(W,"onBeforeInput"),0<Qe.length&&(Ee=new uf("onBeforeInput","beforeinput",null,a,ae),oe.push({event:Ee,listeners:Qe}),Ee.data=He)),ib(oe,e,W,a,ae)}em(oe,n)})}function Si(e,n,a){return{instance:e,listener:n,currentTarget:a}}function go(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Pa(e,a),h!=null&&o.unshift(Si(e,h,g)),h=Pa(e,n),h!=null&&o.push(Si(e,h,g))),e.tag===3)return o;e=e.return}return[]}function ub(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function nm(e,n,a,o,h){for(var g=n._reactName,x=[];a!==null&&a!==o;){var E=a,H=E.alternate,W=E.stateNode;if(E=E.tag,H!==null&&H===o)break;E!==5&&E!==26&&E!==27||W===null||(H=W,h?(W=Pa(a,g),W!=null&&x.unshift(Si(a,W,H))):h||(W=Pa(a,g),W!=null&&x.push(Si(a,W,H)))),a=a.return}x.length!==0&&e.push({event:n,listeners:x})}var db=/\r\n?/g,hb=/\u0000|\uFFFD/g;function rm(e){return(typeof e=="string"?e:""+e).replace(db,`
`).replace(hb,"")}function sm(e,n){return n=rm(n),rm(e)===n}function ot(e,n,a,o,h,g){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ps(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ps(e,""+o);break;case"className":vl(e,"class",o);break;case"tabIndex":vl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vl(e,a,o);break;case"style":rf(e,o,g);break;case"data":if(n!=="object"){vl(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bl(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(n!=="input"&&ot(e,n,"name",h.name,h,null),ot(e,n,"formEncType",h.formEncType,h,null),ot(e,n,"formMethod",h.formMethod,h,null),ot(e,n,"formTarget",h.formTarget,h,null)):(ot(e,n,"encType",h.encType,h,null),ot(e,n,"method",h.method,h,null),ot(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bl(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=fr);break;case"onScroll":o!=null&&Ve("scroll",e);break;case"onScrollEnd":o!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=bl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),yl(e,"popover",o);break;case"xlinkActuate":hr(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":hr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":hr(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":hr(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":hr(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":hr(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":hr(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":hr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":hr(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":yl(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=q0.get(a)||a,yl(e,a,o))}}function rd(e,n,a,o,h,g){switch(a){case"style":rf(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Ps(e,o):(typeof o=="number"||typeof o=="bigint")&&Ps(e,""+o);break;case"onScroll":o!=null&&Ve("scroll",e);break;case"onScrollEnd":o!=null&&Ve("scrollend",e);break;case"onClick":o!=null&&(e.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fh.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),g=e[Bt]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(n,g,h),typeof o=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):yl(e,a,o)}}}function sn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var o=!1,h=!1,g;for(g in a)if(a.hasOwnProperty(g)){var x=a[g];if(x!=null)switch(g){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ot(e,n,g,x,a,null)}}h&&ot(e,n,"srcSet",a.srcSet,a,null),o&&ot(e,n,"src",a.src,a,null);return;case"input":Ve("invalid",e);var E=g=x=h=null,H=null,W=null;for(o in a)if(a.hasOwnProperty(o)){var ae=a[o];if(ae!=null)switch(o){case"name":h=ae;break;case"type":x=ae;break;case"checked":H=ae;break;case"defaultChecked":W=ae;break;case"value":g=ae;break;case"defaultValue":E=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,n));break;default:ot(e,n,o,ae,a,null)}}Zh(e,g,E,H,W,x,h,!1);return;case"select":Ve("invalid",e),o=x=g=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":g=E;break;case"defaultValue":x=E;break;case"multiple":o=E;default:ot(e,n,h,E,a,null)}n=g,a=x,e.multiple=!!o,n!=null?Hs(e,!!o,n,!1):a!=null&&Hs(e,!!o,a,!0);return;case"textarea":Ve("invalid",e),g=h=o=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":o=E;break;case"defaultValue":h=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(l(91));break;default:ot(e,n,x,E,a,null)}tf(e,o,h,g);return;case"option":for(H in a)a.hasOwnProperty(H)&&(o=a[H],o!=null)&&(H==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ot(e,n,H,o,a,null));return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(o=0;o<wi.length;o++)Ve(wi[o],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(o=a[W],o!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ot(e,n,W,o,a,null)}return;default:if(yc(n)){for(ae in a)a.hasOwnProperty(ae)&&(o=a[ae],o!==void 0&&rd(e,n,ae,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ot(e,n,E,o,a,null))}function fb(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,x=null,E=null,H=null,W=null,ae=null;for(ne in a){var oe=a[ne];if(a.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":H=oe;default:o.hasOwnProperty(ne)||ot(e,n,ne,null,o,oe)}}for(var te in o){var ne=o[te];if(oe=a[te],o.hasOwnProperty(te)&&(ne!=null||oe!=null))switch(te){case"type":g=ne;break;case"name":h=ne;break;case"checked":W=ne;break;case"defaultChecked":ae=ne;break;case"value":x=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,n));break;default:ne!==oe&&ot(e,n,te,ne,o,oe)}}gc(e,x,E,H,W,ae,g,h);return;case"select":ne=x=E=te=null;for(g in a)if(H=a[g],a.hasOwnProperty(g)&&H!=null)switch(g){case"value":break;case"multiple":ne=H;default:o.hasOwnProperty(g)||ot(e,n,g,null,o,H)}for(h in o)if(g=o[h],H=a[h],o.hasOwnProperty(h)&&(g!=null||H!=null))switch(h){case"value":te=g;break;case"defaultValue":E=g;break;case"multiple":x=g;default:g!==H&&ot(e,n,h,g,o,H)}n=E,a=x,o=ne,te!=null?Hs(e,!!a,te,!1):!!o!=!!a&&(n!=null?Hs(e,!!a,n,!0):Hs(e,!!a,a?[]:"",!1));return;case"textarea":ne=te=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ot(e,n,E,null,o,h)}for(x in o)if(h=o[x],g=a[x],o.hasOwnProperty(x)&&(h!=null||g!=null))switch(x){case"value":te=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==g&&ot(e,n,x,h,o,g)}ef(e,te,ne);return;case"option":for(var je in a)te=a[je],a.hasOwnProperty(je)&&te!=null&&!o.hasOwnProperty(je)&&(je==="selected"?e.selected=!1:ot(e,n,je,null,o,te));for(H in o)te=o[H],ne=a[H],o.hasOwnProperty(H)&&te!==ne&&(te!=null||ne!=null)&&(H==="selected"?e.selected=te&&typeof te!="function"&&typeof te!="symbol":ot(e,n,H,te,o,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in a)te=a[ze],a.hasOwnProperty(ze)&&te!=null&&!o.hasOwnProperty(ze)&&ot(e,n,ze,null,o,te);for(W in o)if(te=o[W],ne=a[W],o.hasOwnProperty(W)&&te!==ne&&(te!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(l(137,n));break;default:ot(e,n,W,te,o,ne)}return;default:if(yc(n)){for(var ct in a)te=a[ct],a.hasOwnProperty(ct)&&te!==void 0&&!o.hasOwnProperty(ct)&&rd(e,n,ct,void 0,o,te);for(ae in o)te=o[ae],ne=a[ae],!o.hasOwnProperty(ae)||te===ne||te===void 0&&ne===void 0||rd(e,n,ae,te,o,ne);return}}for(var Q in a)te=a[Q],a.hasOwnProperty(Q)&&te!=null&&!o.hasOwnProperty(Q)&&ot(e,n,Q,null,o,te);for(oe in o)te=o[oe],ne=a[oe],!o.hasOwnProperty(oe)||te===ne||te==null&&ne==null||ot(e,n,oe,te,o,ne)}function am(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],g=h.transferSize,x=h.initiatorType,E=h.duration;if(g&&E&&am(x)){for(x=0,E=h.responseEnd,o+=1;o<a.length;o++){var H=a[o],W=H.startTime;if(W>E)break;var ae=H.transferSize,oe=H.initiatorType;ae&&am(oe)&&(H=H.responseEnd,x+=ae*(H<E?1:(E-W)/(H-W)))}if(--o,n+=8*(g+x)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sd=null,ad=null;function mo(e){return e.nodeType===9?e:e.ownerDocument}function im(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function id(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ld=null;function gb(){var e=window.event;return e&&e.type==="popstate"?e===ld?!1:(ld=e,!0):(ld=null,!1)}var om=typeof setTimeout=="function"?setTimeout:void 0,mb=typeof clearTimeout=="function"?clearTimeout:void 0,cm=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof cm<"u"?function(e){return cm.resolve(null).then(e).catch(vb)}:om;function vb(e){setTimeout(function(){throw e})}function es(e){return e==="head"}function um(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),ba(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")ji(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ji(a);for(var g=a.firstChild;g;){var x=g.nextSibling,E=g.nodeName;g[$a]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=x}}else a==="body"&&ji(e.ownerDocument.body);a=h}while(a);ba(n)}function dm(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":od(a),fc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function xb(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[$a])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Yn(e.nextSibling),e===null)break}return null}function bb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Yn(e.nextSibling),e===null))return null;return e}function hm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Yn(e.nextSibling),e===null))return null;return e}function cd(e){return e.data==="$?"||e.data==="$~"}function ud(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Yn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var dd=null;function fm(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Yn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function pm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function gm(e,n,a){switch(n=mo(a),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function ji(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);fc(e)}var Kn=new Map,mm=new Set;function yo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ar=G.d;G.d={f:Sb,r:jb,D:_b,C:Cb,L:Eb,m:Rb,X:Ab,S:Tb,M:Nb};function Sb(){var e=Ar.f(),n=lo();return e||n}function jb(e){var n=Is(e);n!==null&&n.tag===5&&n.type==="form"?Dp(n):Ar.r(e)}var ya=typeof document>"u"?null:document;function ym(e,n,a){var o=ya;if(o&&typeof n=="string"&&n){var h=In(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),mm.has(h)||(mm.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),sn(n,"link",e),Xt(n),o.head.appendChild(n)))}}function _b(e){Ar.D(e),ym("dns-prefetch",e,null)}function Cb(e,n){Ar.C(e,n),ym("preconnect",e,n)}function Eb(e,n,a){Ar.L(e,n,a);var o=ya;if(o&&e&&n){var h='link[rel="preload"][as="'+In(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+In(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+In(a.imageSizes)+'"]')):h+='[href="'+In(e)+'"]';var g=h;switch(n){case"style":g=va(e);break;case"script":g=xa(e)}Kn.has(g)||(e=v({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Kn.set(g,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(_i(g))||n==="script"&&o.querySelector(Ci(g))||(n=o.createElement("link"),sn(n,"link",e),Xt(n),o.head.appendChild(n)))}}function Rb(e,n){Ar.m(e,n);var a=ya;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+In(o)+'"][href="'+In(e)+'"]',g=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xa(e)}if(!Kn.has(g)&&(e=v({rel:"modulepreload",href:e},n),Kn.set(g,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ci(g)))return}o=a.createElement("link"),sn(o,"link",e),Xt(o),a.head.appendChild(o)}}}function Tb(e,n,a){Ar.S(e,n,a);var o=ya;if(o&&e){var h=qs(o).hoistableStyles,g=va(e);n=n||"default";var x=h.get(g);if(!x){var E={loading:0,preload:null};if(x=o.querySelector(_i(g)))E.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Kn.get(g))&&hd(e,a);var H=x=o.createElement("link");Xt(H),sn(H,"link",e),H._p=new Promise(function(W,ae){H.onload=W,H.onerror=ae}),H.addEventListener("load",function(){E.loading|=1}),H.addEventListener("error",function(){E.loading|=2}),E.loading|=4,vo(x,n,o)}x={type:"stylesheet",instance:x,count:1,state:E},h.set(g,x)}}}function Ab(e,n){Ar.X(e,n);var a=ya;if(a&&e){var o=qs(a).hoistableScripts,h=xa(e),g=o.get(h);g||(g=a.querySelector(Ci(h)),g||(e=v({src:e,async:!0},n),(n=Kn.get(h))&&fd(e,n),g=a.createElement("script"),Xt(g),sn(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function Nb(e,n){Ar.M(e,n);var a=ya;if(a&&e){var o=qs(a).hoistableScripts,h=xa(e),g=o.get(h);g||(g=a.querySelector(Ci(h)),g||(e=v({src:e,async:!0,type:"module"},n),(n=Kn.get(h))&&fd(e,n),g=a.createElement("script"),Xt(g),sn(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function vm(e,n,a,o){var h=(h=ye.current)?yo(h):null;if(!h)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=va(a.href),a=qs(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=va(a.href);var g=qs(h).hoistableStyles,x=g.get(e);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,x),(g=h.querySelector(_i(e)))&&!g._p&&(x.instance=g,x.state.loading=5),Kn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(e,a),g||Ob(h,e,a,x.state))),n&&o===null)throw Error(l(528,""));return x}if(n&&o!==null)throw Error(l(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=qs(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function va(e){return'href="'+In(e)+'"'}function _i(e){return'link[rel="stylesheet"]['+e+"]"}function xm(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Ob(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),sn(n,"link",a),Xt(n),e.head.appendChild(n))}function xa(e){return'[src="'+In(e)+'"]'}function Ci(e){return"script[async]"+e}function bm(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+In(a.href)+'"]');if(o)return n.instance=o,Xt(o),o;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Xt(o),sn(o,"style",h),vo(o,a.precedence,e),n.instance=o;case"stylesheet":h=va(a.href);var g=e.querySelector(_i(h));if(g)return n.state.loading|=4,n.instance=g,Xt(g),g;o=xm(a),(h=Kn.get(h))&&hd(o,h),g=(e.ownerDocument||e).createElement("link"),Xt(g);var x=g;return x._p=new Promise(function(E,H){x.onload=E,x.onerror=H}),sn(g,"link",o),n.state.loading|=4,vo(g,a.precedence,e),n.instance=g;case"script":return g=xa(a.src),(h=e.querySelector(Ci(g)))?(n.instance=h,Xt(h),h):(o=a,(h=Kn.get(g))&&(o=v({},a),fd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Xt(h),sn(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,vo(o,a.precedence,e));return n.instance}function vo(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,g=h,x=0;x<o.length;x++){var E=o[x];if(E.dataset.precedence===n)g=E;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function hd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function fd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var xo=null;function wm(e,n,a){if(xo===null){var o=new Map,h=xo=new Map;h.set(a,o)}else h=xo,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var g=a[h];if(!(g[$a]||g[Et]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(n)||"";x=e+x;var E=o.get(x);E?E.push(g):o.set(x,[g])}}return o}function Sm(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function kb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function jm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Db(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=va(o.href),g=n.querySelector(_i(h));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=bo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=g,Xt(g);return}g=n.ownerDocument||n,o=xm(o),(h=Kn.get(h))&&hd(o,h),g=g.createElement("link"),Xt(g);var x=g;x._p=new Promise(function(E,H){x.onload=E,x.onerror=H}),sn(g,"link",o),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=bo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var pd=0;function Ub(e,n){return e.stylesheets&&e.count===0&&So(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&So(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&pd===0&&(pd=62500*pb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&So(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>pd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)So(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wo=null;function So(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wo=new Map,n.forEach(zb,e),wo=null,bo.call(e))}function zb(e,n){if(!(n.state.loading&4)){var a=wo.get(e);if(a)var o=a.get(null);else{a=new Map,wo.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var x=h[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),o=x)}o&&a.set(null,o)}h=n.instance,x=h.getAttribute("data-precedence"),g=a.get(x)||o,g===o&&a.set(null,h),a.set(x,h),this.count++,o=bo.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Ei={$$typeof:z,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Mb(e,n,a,o,h,g,x,E,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function _m(e,n,a,o,h,g,x,E,H,W,ae,oe){return e=new Mb(e,n,a,x,H,W,ae,oe,E),n=1,g===!0&&(n|=24),g=An(3,null,null,n),e.current=g,g.stateNode=e,n=Kc(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:a,cache:n},Jc(g),e}function Cm(e){return e?(e=Xs,e):Xs}function Em(e,n,a,o,h,g){h=Cm(h),o.context===null?o.context=h:o.pendingContext=h,o=Pr(n),o.payload={element:a},g=g===void 0?null:g,g!==null&&(o.callback=g),a=Gr(e,o,n),a!==null&&(_n(a,e,n),si(a,e,n))}function Rm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function gd(e,n){Rm(e,n),(e=e.alternate)&&Rm(e,n)}function Tm(e){if(e.tag===13||e.tag===31){var n=fs(e,67108864);n!==null&&_n(n,e,67108864),gd(e,67108864)}}function Am(e){if(e.tag===13||e.tag===31){var n=Un();n=qe(n);var a=fs(e,n);a!==null&&_n(a,e,n),gd(e,n)}}var jo=!0;function Lb(e,n,a,o){var h=k.T;k.T=null;var g=G.p;try{G.p=2,md(e,n,a,o)}finally{G.p=g,k.T=h}}function Bb(e,n,a,o){var h=k.T;k.T=null;var g=G.p;try{G.p=8,md(e,n,a,o)}finally{G.p=g,k.T=h}}function md(e,n,a,o){if(jo){var h=yd(o);if(h===null)nd(e,n,o,_o,a),Om(e,o);else if(qb(h,e,n,a,o))o.stopPropagation();else if(Om(e,o),n&4&&-1<Ib.indexOf(e)){for(;h!==null;){var g=Is(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=re(g.pendingLanes);if(x!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var H=1<<31-mt(x);E.entanglements[1]|=H,x&=~H}dr(g),(tt&6)===0&&(ao=it()+500,bi(0))}}break;case 31:case 13:E=fs(g,2),E!==null&&_n(E,g,2),lo(),gd(g,2)}if(g=yd(o),g===null&&nd(e,n,o,_o,a),g===h)break;h=g}h!==null&&o.stopPropagation()}else nd(e,n,o,null,a)}}function yd(e){return e=xc(e),vd(e)}var _o=null;function vd(e){if(_o=null,e=Bs(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===31){if(e=f(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return _o=e,null}function Nm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case mn:return 2;case dn:return 8;case dt:case Dt:return 32;case Zt:return 268435456;default:return 32}default:return 32}}var xd=!1,ts=null,ns=null,rs=null,Ri=new Map,Ti=new Map,ss=[],Ib="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Om(e,n){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ri.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(n.pointerId)}}function Ai(e,n,a,o,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:g,targetContainers:[h]},n!==null&&(n=Is(n),n!==null&&Tm(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function qb(e,n,a,o,h){switch(n){case"focusin":return ts=Ai(ts,e,n,a,o,h),!0;case"dragenter":return ns=Ai(ns,e,n,a,o,h),!0;case"mouseover":return rs=Ai(rs,e,n,a,o,h),!0;case"pointerover":var g=h.pointerId;return Ri.set(g,Ai(Ri.get(g)||null,e,n,a,o,h)),!0;case"gotpointercapture":return g=h.pointerId,Ti.set(g,Ai(Ti.get(g)||null,e,n,a,o,h)),!0}return!1}function km(e){var n=Bs(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,vn(e.priority,function(){Am(a)});return}}else if(n===31){if(n=f(a),n!==null){e.blockedOn=n,vn(e.priority,function(){Am(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=yd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);vc=o,a.target.dispatchEvent(o),vc=null}else return n=Is(a),n!==null&&Tm(n),e.blockedOn=a,!1;n.shift()}return!0}function Dm(e,n,a){Co(e)&&a.delete(n)}function $b(){xd=!1,ts!==null&&Co(ts)&&(ts=null),ns!==null&&Co(ns)&&(ns=null),rs!==null&&Co(rs)&&(rs=null),Ri.forEach(Dm),Ti.forEach(Dm)}function Eo(e,n){e.blockedOn===n&&(e.blockedOn=null,xd||(xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$b)))}var Ro=null;function Um(e){Ro!==e&&(Ro=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ro===e&&(Ro=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(vd(o||a)===null)continue;break}var g=Is(a);g!==null&&(e.splice(n,3),n-=3,yu(g,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function ba(e){function n(H){return Eo(H,e)}ts!==null&&Eo(ts,e),ns!==null&&Eo(ns,e),rs!==null&&Eo(rs,e),Ri.forEach(n),Ti.forEach(n);for(var a=0;a<ss.length;a++){var o=ss[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)km(a),a.blockedOn===null&&ss.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],g=a[o+1],x=h[Bt]||null;if(typeof g=="function")x||Um(a);else if(x){var E=null;if(g&&g.hasAttribute("formAction")){if(h=g,x=g[Bt]||null)E=x.formAction;else if(vd(h)!==null)continue}else E=x.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Um(a)}}}function zm(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function bd(e){this._internalRoot=e}To.prototype.render=bd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var a=n.current,o=Un();Em(a,o,e,n,null,null)},To.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Em(e.current,2,null,e,null,null),lo(),n[Ls]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var n=St();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ss.length&&n!==0&&n<ss[a].priority;a++);ss.splice(a,0,e),a===0&&km(e)}};var Mm=t.version;if(Mm!=="19.2.3")throw Error(l(527,Mm,"19.2.3"));G.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Hb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ao.isDisabled&&Ao.supportsFiber)try{yn=Ao.inject(Hb),wt=Ao}catch{}}return Oi.createRoot=function(e,n){if(!c(e))throw Error(l(299));var a=!1,o="",h=Pp,g=Gp,x=Vp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=_m(e,1,!1,null,null,a,o,null,h,g,x,zm),e[Ls]=n.current,td(e),new bd(n)},Oi.hydrateRoot=function(e,n,a){if(!c(e))throw Error(l(299));var o=!1,h="",g=Pp,x=Gp,E=Vp,H=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(H=a.formState)),n=_m(e,1,!0,n,a??null,o,h,H,g,x,E,zm),n.context=Cm(null),a=n.current,o=Un(),o=qe(o),h=Pr(o),h.callback=null,Gr(a,h,o),a=o,n.current.lanes=a,Oe(n,a),dr(n),e[Ls]=n.current,td(e),new To(n)},Oi.version="19.2.3",Oi}var Ym;function Jb(){if(Ym)return jd.exports;Ym=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),jd.exports=Xb(),jd.exports}var Wb=Jb();var Km="popstate";function Zb(r={}){function t(l,c){let{pathname:u,search:d,hash:f}=l.location;return ah("",{pathname:u,search:d,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(l,c){return typeof c=="string"?c:Gi(c)}return tw(t,s,null,r)}function Qt(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Qn(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ew(){return Math.random().toString(36).substring(2,10)}function Fm(r,t){return{usr:r.state,key:r.key,idx:t}}function ah(r,t,s=null,l){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?nl(t):t,state:s,key:t&&t.key||l||ew()}}function Gi({pathname:r="/",search:t="",hash:s=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function nl(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substring(s),r=r.substring(0,s));let l=r.indexOf("?");l>=0&&(t.search=r.substring(l),r=r.substring(0,l)),r&&(t.pathname=r)}return t}function tw(r,t,s,l={}){let{window:c=document.defaultView,v5Compat:u=!1}=l,d=c.history,f="POP",p=null,m=y();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function y(){return(d.state||{idx:null}).idx}function v(){f="POP";let O=y(),D=O==null?null:O-m;m=O,p&&p({action:f,location:j.location,delta:D})}function b(O,D){f="PUSH";let N=ah(j.location,O,D);m=y()+1;let z=Fm(N,m),q=j.createHref(N);try{d.pushState(z,"",q)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;c.location.assign(q)}u&&p&&p({action:f,location:j.location,delta:1})}function S(O,D){f="REPLACE";let N=ah(j.location,O,D);m=y();let z=Fm(N,m),q=j.createHref(N);d.replaceState(z,"",q),u&&p&&p({action:f,location:j.location,delta:0})}function _(O){return nw(O)}let j={get action(){return f},get location(){return r(c,d)},listen(O){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(Km,v),p=O,()=>{c.removeEventListener(Km,v),p=null}},createHref(O){return t(c,O)},createURL:_,encodeLocation(O){let D=_(O);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:S,go(O){return d.go(O)}};return j}function nw(r,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(s,"No window.location.(origin|href) available to create URL");let l=typeof r=="string"?r:Gi(r);return l=l.replace(/ $/,"%20"),!t&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function dv(r,t,s="/"){return rw(r,t,s,!1)}function rw(r,t,s,l){let c=typeof t=="string"?nl(t):t,u=Dr(c.pathname||"/",s);if(u==null)return null;let d=hv(r);sw(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let m=gw(u);f=fw(d[p],m,l)}return f}function hv(r,t=[],s=[],l="",c=!1){let u=(d,f,p=c,m)=>{let y={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(l)&&p)return;Qt(y.relativePath.startsWith(l),`Absolute route path "${y.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(l.length)}let v=kr([l,y.relativePath]),b=s.concat(y);d.children&&d.children.length>0&&(Qt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),hv(d.children,t,b,v,p)),!(d.path==null&&!d.index)&&t.push({path:v,score:dw(v,d.index),routesMeta:b})};return r.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))u(d,f);else for(let p of fv(d.path))u(d,f,!0,p)}),t}function fv(r){let t=r.split("/");if(t.length===0)return[];let[s,...l]=t,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(l.length===0)return c?[u,""]:[u];let d=fv(l.join("/")),f=[];return f.push(...d.map(p=>p===""?u:[u,p].join("/"))),c&&f.push(...d),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function sw(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:hw(t.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var aw=/^:[\w-]+$/,iw=3,lw=2,ow=1,cw=10,uw=-2,Qm=r=>r==="*";function dw(r,t){let s=r.split("/"),l=s.length;return s.some(Qm)&&(l+=uw),t&&(l+=lw),s.filter(c=>!Qm(c)).reduce((c,u)=>c+(aw.test(u)?iw:u===""?ow:cw),l)}function hw(r,t){return r.length===t.length&&r.slice(0,-1).every((l,c)=>l===t[c])?r[r.length-1]-t[t.length-1]:0}function fw(r,t,s=!1){let{routesMeta:l}=r,c={},u="/",d=[];for(let f=0;f<l.length;++f){let p=l[f],m=f===l.length-1,y=u==="/"?t:t.slice(u.length)||"/",v=Po({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),b=p.route;if(!v&&m&&s&&!l[l.length-1].route.index&&(v=Po({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!v)return null;Object.assign(c,v.params),d.push({params:c,pathname:kr([u,v.pathname]),pathnameBase:xw(kr([u,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(u=kr([u,v.pathnameBase]))}return d}function Po(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,l]=pw(r.path,r.caseSensitive,r.end),c=t.match(s);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:l.reduce((m,{paramName:y,isOptional:v},b)=>{if(y==="*"){let _=f[b]||"";d=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const S=f[b];return v&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:d,pattern:r}}function pw(r,t=!1,s=!0){Qn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let l=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(l.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(l.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),l]}function gw(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Dr(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,l=r.charAt(s);return l&&l!=="/"?null:r.slice(s)||"/"}var pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mw=r=>pv.test(r);function yw(r,t="/"){let{pathname:s,search:l="",hash:c=""}=typeof r=="string"?nl(r):r,u;if(s)if(mw(s))u=s;else{if(s.includes("//")){let d=s;s=s.replace(/\/\/+/g,"/"),Qn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${s}`)}s.startsWith("/")?u=Xm(s.substring(1),"/"):u=Xm(s,t)}else u=t;return{pathname:u,search:bw(l),hash:ww(c)}}function Xm(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Rd(r,t,s,l){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vw(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function gv(r){let t=vw(r);return t.map((s,l)=>l===t.length-1?s.pathname:s.pathnameBase)}function mv(r,t,s,l=!1){let c;typeof r=="string"?c=nl(r):(c={...r},Qt(!c.pathname||!c.pathname.includes("?"),Rd("?","pathname","search",c)),Qt(!c.pathname||!c.pathname.includes("#"),Rd("#","pathname","hash",c)),Qt(!c.search||!c.search.includes("#"),Rd("#","search","hash",c)));let u=r===""||c.pathname==="",d=u?"/":c.pathname,f;if(d==null)f=s;else{let v=t.length-1;if(!l&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),v-=1;c.pathname=b.join("/")}f=v>=0?t[v]:"/"}let p=yw(c,f),m=d&&d!=="/"&&d.endsWith("/"),y=(u||d===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var kr=r=>r.join("/").replace(/\/\/+/g,"/"),xw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),bw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ww=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Sw=class{constructor(r,t,s,l=!1){this.status=r,this.statusText=t||"",this.internal=l,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function jw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function _w(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vv(r,t){let s=r;if(typeof s!="string"||!pv.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let l=s,c=!1;if(yv)try{let u=new URL(window.location.href),d=s.startsWith("//")?new URL(u.protocol+s):new URL(s),f=Dr(d.pathname,t);d.origin===u.origin&&f!=null?s=f+d.search+d.hash:c=!0}catch{Qn(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:l,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xv=["POST","PUT","PATCH","DELETE"];new Set(xv);var Cw=["GET",...xv];new Set(Cw);var Ma=w.createContext(null);Ma.displayName="DataRouter";var ec=w.createContext(null);ec.displayName="DataRouterState";var Ew=w.createContext(!1),bv=w.createContext({isTransitioning:!1});bv.displayName="ViewTransition";var Rw=w.createContext(new Map);Rw.displayName="Fetchers";var Tw=w.createContext(null);Tw.displayName="Await";var Jn=w.createContext(null);Jn.displayName="Navigation";var tc=w.createContext(null);tc.displayName="Location";var Ur=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var Eh=w.createContext(null);Eh.displayName="RouteError";var wv="REACT_ROUTER_ERROR",Aw="REDIRECT",Nw="ROUTE_ERROR_RESPONSE";function Ow(r){if(r.startsWith(`${wv}:${Aw}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function kw(r){if(r.startsWith(`${wv}:${Nw}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Sw(t.status,t.statusText,t.data)}catch{}}function Dw(r,{relative:t}={}){Qt(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=w.useContext(Jn),{hash:c,pathname:u,search:d}=sl(r,{relative:t}),f=u;return s!=="/"&&(f=u==="/"?s:kr([s,u])),l.createHref({pathname:f,search:d,hash:c})}function rl(){return w.useContext(tc)!=null}function zr(){return Qt(rl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(tc).location}var Sv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jv(r){w.useContext(Jn).static||w.useLayoutEffect(r)}function _v(){let{isDataRoute:r}=w.useContext(Ur);return r?Yw():Uw()}function Uw(){Qt(rl(),"useNavigate() may be used only in the context of a <Router> component.");let r=w.useContext(Ma),{basename:t,navigator:s}=w.useContext(Jn),{matches:l}=w.useContext(Ur),{pathname:c}=zr(),u=JSON.stringify(gv(l)),d=w.useRef(!1);return jv(()=>{d.current=!0}),w.useCallback((p,m={})=>{if(Qn(d.current,Sv),!d.current)return;if(typeof p=="number"){s.go(p);return}let y=mv(p,JSON.parse(u),c,m.relative==="path");r==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:kr([t,y.pathname])),(m.replace?s.replace:s.push)(y,m.state,m)},[t,s,u,c,r])}w.createContext(null);function sl(r,{relative:t}={}){let{matches:s}=w.useContext(Ur),{pathname:l}=zr(),c=JSON.stringify(gv(s));return w.useMemo(()=>mv(r,JSON.parse(c),l,t==="path"),[r,c,l,t])}function zw(r,t,s,l,c){Qt(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Jn),{matches:d}=w.useContext(Ur),f=d[d.length-1],p=f?f.params:{},m=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let N=v&&v.path||"";Ev(m,!v||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let b=zr(),S;S=b;let _=S.pathname||"/",j=_;if(y!=="/"){let N=y.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let O=dv(r,{pathname:j});return Qn(v||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Qn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),qw(O&&O.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:kr([y,u.encodeLocation?u.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?y:kr([y,u.encodeLocation?u.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),d,s,l,c)}function Mw(){let r=Vw(),t=jw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),s?w.createElement("pre",{style:c},s):null,d)}var Lw=w.createElement(Mw,null),Cv=class extends w.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const s=kw(r.digest);s&&(r=s)}let t=r!==void 0?w.createElement(Ur.Provider,{value:this.props.routeContext},w.createElement(Eh.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?w.createElement(Bw,{error:r},t):t}};Cv.contextType=Ew;var Td=new WeakMap;function Bw({children:r,error:t}){let{basename:s}=w.useContext(Jn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let l=Ow(t.digest);if(l){let c=Td.get(t);if(c)throw c;let u=vv(l.location,s);if(yv&&!Td.get(t))if(u.isExternal||l.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:l.replace}));throw Td.set(t,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function Iw({routeContext:r,match:t,children:s}){let l=w.useContext(Ma);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Ur.Provider,{value:r},s)}function qw(r,t=[],s=null,l=null,c=null){if(r==null){if(!s)return null;if(s.errors)r=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)r=s.matches;else return null}let u=r,d=s?.errors;if(d!=null){let y=u.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Qt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let v=u[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:b,errors:S}=s,_=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||_){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let m=s&&l?(y,v)=>{l(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:_w(s.matches),errorInfo:v})}:void 0;return u.reduceRight((y,v,b)=>{let S,_=!1,j=null,O=null;s&&(S=d&&v.route.id?d[v.route.id]:void 0,j=v.route.errorElement||Lw,f&&(p<0&&b===0?(Ev("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,O=null):p===b&&(_=!0,O=v.route.hydrateFallbackElement||null)));let D=t.concat(u.slice(0,b+1)),N=()=>{let z;return S?z=j:_?z=O:v.route.Component?z=w.createElement(v.route.Component,null):v.route.element?z=v.route.element:z=y,w.createElement(Iw,{match:v,routeContext:{outlet:y,matches:D,isDataRoute:s!=null},children:z})};return s&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?w.createElement(Cv,{location:s.location,revalidation:s.revalidation,component:j,error:S,children:N(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:m}):N()},null)}function Rh(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $w(r){let t=w.useContext(Ma);return Qt(t,Rh(r)),t}function Hw(r){let t=w.useContext(ec);return Qt(t,Rh(r)),t}function Pw(r){let t=w.useContext(Ur);return Qt(t,Rh(r)),t}function Th(r){let t=Pw(r),s=t.matches[t.matches.length-1];return Qt(s.route.id,`${r} can only be used on routes that contain a unique "id"`),s.route.id}function Gw(){return Th("useRouteId")}function Vw(){let r=w.useContext(Eh),t=Hw("useRouteError"),s=Th("useRouteError");return r!==void 0?r:t.errors?.[s]}function Yw(){let{router:r}=$w("useNavigate"),t=Th("useNavigate"),s=w.useRef(!1);return jv(()=>{s.current=!0}),w.useCallback(async(c,u={})=>{Qn(s.current,Sv),s.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:t,...u}))},[r,t])}var Jm={};function Ev(r,t,s){!t&&!Jm[r]&&(Jm[r]=!0,Qn(!1,s))}w.memo(Kw);function Kw({routes:r,future:t,state:s,onError:l}){return zw(r,void 0,s,l,t)}function Fw({basename:r="/",children:t=null,location:s,navigationType:l="POP",navigator:c,static:u=!1,unstable_useTransitions:d}){Qt(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),p=w.useMemo(()=>({basename:f,navigator:c,static:u,unstable_useTransitions:d,future:{}}),[f,c,u,d]);typeof s=="string"&&(s=nl(s));let{pathname:m="/",search:y="",hash:v="",state:b=null,key:S="default"}=s,_=w.useMemo(()=>{let j=Dr(m,f);return j==null?null:{location:{pathname:j,search:y,hash:v,state:b,key:S},navigationType:l}},[f,m,y,v,b,S,l]);return Qn(_!=null,`<Router basename="${f}"> is not able to match the URL "${m}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:w.createElement(Jn.Provider,{value:p},w.createElement(tc.Provider,{children:t,value:_}))}var qo="get",$o="application/x-www-form-urlencoded";function nc(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Qw(r){return nc(r)&&r.tagName.toLowerCase()==="button"}function Xw(r){return nc(r)&&r.tagName.toLowerCase()==="form"}function Jw(r){return nc(r)&&r.tagName.toLowerCase()==="input"}function Ww(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Zw(r,t){return r.button===0&&(!t||t==="_self")&&!Ww(r)}function ih(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let l=r[s];return t.concat(Array.isArray(l)?l.map(c=>[s,c]):[[s,l]])},[]))}function eS(r,t){let s=ih(r);return t&&t.forEach((l,c)=>{s.has(c)||t.getAll(c).forEach(u=>{s.append(c,u)})}),s}var No=null;function tS(){if(No===null)try{new FormData(document.createElement("form"),0),No=!1}catch{No=!0}return No}var nS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ad(r){return r!=null&&!nS.has(r)?(Qn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$o}"`),null):r}function rS(r,t){let s,l,c,u,d;if(Xw(r)){let f=r.getAttribute("action");l=f?Dr(f,t):null,s=r.getAttribute("method")||qo,c=Ad(r.getAttribute("enctype"))||$o,u=new FormData(r)}else if(Qw(r)||Jw(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(l=p?Dr(p,t):null,s=r.getAttribute("formmethod")||f.getAttribute("method")||qo,c=Ad(r.getAttribute("formenctype"))||Ad(f.getAttribute("enctype"))||$o,u=new FormData(f,r),!tS()){let{name:m,type:y,value:v}=r;if(y==="image"){let b=m?`${m}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else m&&u.append(m,v)}}else{if(nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=qo,l=null,c=$o,d=r}return u&&c==="text/plain"&&(d=u,u=void 0),{action:l,method:s.toLowerCase(),encType:c,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ah(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function sS(r,t,s){let l=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return l.pathname==="/"?l.pathname=`_root.${s}`:t&&Dr(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function aS(r,t){if(r.id in t)return t[r.id];try{let s=await import(r.module);return t[r.id]=s,s}catch(s){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function lS(r,t,s){let l=await Promise.all(r.map(async c=>{let u=t.routes[c.route.id];if(u){let d=await aS(u,s);return d.links?d.links():[]}return[]}));return dS(l.flat(1).filter(iS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Wm(r,t,s,l,c,u){let d=(p,m)=>s[m]?p.route.id!==s[m].route.id:!0,f=(p,m)=>s[m].pathname!==p.pathname||s[m].route.path?.endsWith("*")&&s[m].params["*"]!==p.params["*"];return u==="assets"?t.filter((p,m)=>d(p,m)||f(p,m)):u==="data"?t.filter((p,m)=>{let y=l.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,m)||f(p,m))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function oS(r,t,{includeHydrateFallback:s}={}){return cS(r.map(l=>{let c=t.routes[l.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function cS(r){return[...new Set(r)]}function uS(r){let t={},s=Object.keys(r).sort();for(let l of s)t[l]=r[l];return t}function dS(r,t){let s=new Set;return new Set(t),r.reduce((l,c)=>{let u=JSON.stringify(uS(c));return s.has(u)||(s.add(u),l.push({key:u,link:c})),l},[])}function Rv(){let r=w.useContext(Ma);return Ah(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function hS(){let r=w.useContext(ec);return Ah(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Nh=w.createContext(void 0);Nh.displayName="FrameworkContext";function Tv(){let r=w.useContext(Nh);return Ah(r,"You must render this element inside a <HydratedRouter> element"),r}function fS(r,t){let s=w.useContext(Nh),[l,c]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:v}=t,b=w.useRef(null);w.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let j=D=>{D.forEach(N=>{d(N.isIntersecting)})},O=new IntersectionObserver(j,{threshold:.5});return b.current&&O.observe(b.current),()=>{O.disconnect()}}},[r]),w.useEffect(()=>{if(l){let j=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(j)}}},[l]);let S=()=>{c(!0)},_=()=>{c(!1),d(!1)};return s?r!=="intent"?[u,b,{}]:[u,b,{onFocus:ki(f,S),onBlur:ki(p,_),onMouseEnter:ki(m,S),onMouseLeave:ki(y,_),onTouchStart:ki(v,S)}]:[!1,b,{}]}function ki(r,t){return s=>{r&&r(s),s.defaultPrevented||t(s)}}function pS({page:r,...t}){let{router:s}=Rv(),l=w.useMemo(()=>dv(s.routes,r,s.basename),[s.routes,r,s.basename]);return l?w.createElement(mS,{page:r,matches:l,...t}):null}function gS(r){let{manifest:t,routeModules:s}=Tv(),[l,c]=w.useState([]);return w.useEffect(()=>{let u=!1;return lS(r,t,s).then(d=>{u||c(d)}),()=>{u=!0}},[r,t,s]),l}function mS({page:r,matches:t,...s}){let l=zr(),{manifest:c,routeModules:u}=Tv(),{basename:d}=Rv(),{loaderData:f,matches:p}=hS(),m=w.useMemo(()=>Wm(r,t,p,c,l,"data"),[r,t,p,c,l]),y=w.useMemo(()=>Wm(r,t,p,c,l,"assets"),[r,t,p,c,l]),v=w.useMemo(()=>{if(r===l.pathname+l.search+l.hash)return[];let _=new Set,j=!1;if(t.forEach(D=>{let N=c.routes[D.route.id];!N||!N.hasLoader||(!m.some(z=>z.route.id===D.route.id)&&D.route.id in f&&u[D.route.id]?.shouldRevalidate||N.hasClientLoader?j=!0:_.add(D.route.id))}),_.size===0)return[];let O=sS(r,d,"data");return j&&_.size>0&&O.searchParams.set("_routes",t.filter(D=>_.has(D.route.id)).map(D=>D.route.id).join(",")),[O.pathname+O.search]},[d,f,l,c,m,t,r,u]),b=w.useMemo(()=>oS(y,c),[y,c]),S=gS(y);return w.createElement(w.Fragment,null,v.map(_=>w.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),b.map(_=>w.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),S.map(({key:_,link:j})=>w.createElement("link",{key:_,nonce:s.nonce,...j})))}function yS(...r){return t=>{r.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var vS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vS&&(window.__reactRouterVersion="7.11.0")}catch{}function xS({basename:r,children:t,unstable_useTransitions:s,window:l}){let c=w.useRef();c.current==null&&(c.current=Zb({window:l,v5Compat:!0}));let u=c.current,[d,f]=w.useState({action:u.action,location:u.location}),p=w.useCallback(m=>{s===!1?f(m):w.startTransition(()=>f(m))},[s]);return w.useLayoutEffect(()=>u.listen(p),[u,p]),w.createElement(Fw,{basename:r,children:t,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:s})}var Av=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nv=w.forwardRef(function({onClick:t,discover:s="render",prefetch:l="none",relative:c,reloadDocument:u,replace:d,state:f,target:p,to:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...S},_){let{basename:j,unstable_useTransitions:O}=w.useContext(Jn),D=typeof m=="string"&&Av.test(m),N=vv(m,j);m=N.to;let z=Dw(m,{relative:c}),[q,U,C]=fS(l,S),B=jS(m,{replace:d,state:f,target:p,preventScrollReset:y,relative:c,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:O});function I(Y){t&&t(Y),Y.defaultPrevented||B(Y)}let $=w.createElement("a",{...S,...C,href:N.absoluteURL||z,onClick:N.isExternal||u?t:I,ref:yS(_,U),target:p,"data-discover":!D&&s==="render"?"true":void 0});return q&&!D?w.createElement(w.Fragment,null,$,w.createElement(pS,{page:z})):$});Nv.displayName="Link";var bS=w.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:l="",end:c=!1,style:u,to:d,viewTransition:f,children:p,...m},y){let v=sl(d,{relative:m.relative}),b=zr(),S=w.useContext(ec),{navigator:_,basename:j}=w.useContext(Jn),O=S!=null&&AS(v)&&f===!0,D=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,N=b.pathname,z=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(N=N.toLowerCase(),z=z?z.toLowerCase():null,D=D.toLowerCase()),z&&j&&(z=Dr(z,j)||z);const q=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let U=N===D||!c&&N.startsWith(D)&&N.charAt(q)==="/",C=z!=null&&(z===D||!c&&z.startsWith(D)&&z.charAt(D.length)==="/"),B={isActive:U,isPending:C,isTransitioning:O},I=U?t:void 0,$;typeof l=="function"?$=l(B):$=[l,U?"active":null,C?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let Y=typeof u=="function"?u(B):u;return w.createElement(Nv,{...m,"aria-current":I,className:$,ref:y,style:Y,to:d,viewTransition:f},typeof p=="function"?p(B):p)});bS.displayName="NavLink";var wS=w.forwardRef(({discover:r="render",fetcherKey:t,navigate:s,reloadDocument:l,replace:c,state:u,method:d=qo,action:f,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...S},_)=>{let{unstable_useTransitions:j}=w.useContext(Jn),O=RS(),D=TS(f,{relative:m}),N=d.toLowerCase()==="get"?"get":"post",z=typeof f=="string"&&Av.test(f),q=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let C=U.nativeEvent.submitter,B=C?.getAttribute("formmethod")||d,I=()=>O(C||U.currentTarget,{fetcherKey:t,method:B,navigate:s,replace:c,state:u,relative:m,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});j&&s!==!1?w.startTransition(()=>I()):I()};return w.createElement("form",{ref:_,method:N,action:D,onSubmit:l?p:q,...S,"data-discover":!z&&r==="render"?"true":void 0})});wS.displayName="Form";function SS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ov(r){let t=w.useContext(Ma);return Qt(t,SS(r)),t}function jS(r,{target:t,replace:s,state:l,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let m=_v(),y=zr(),v=sl(r,{relative:u});return w.useCallback(b=>{if(Zw(b,t)){b.preventDefault();let S=s!==void 0?s:Gi(y)===Gi(v),_=()=>m(r,{replace:S,state:l,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:f});p?w.startTransition(()=>_()):_()}},[y,m,v,s,l,t,r,c,u,d,f,p])}function _S(r){Qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=w.useRef(ih(r)),s=w.useRef(!1),l=zr(),c=w.useMemo(()=>eS(l.search,s.current?null:t.current),[l.search]),u=_v(),d=w.useCallback((f,p)=>{const m=ih(typeof f=="function"?f(new URLSearchParams(c)):f);s.current=!0,u("?"+m,p)},[u,c]);return[c,d]}var CS=0,ES=()=>`__${String(++CS)}__`;function RS(){let{router:r}=Ov("useSubmit"),{basename:t}=w.useContext(Jn),s=Gw(),l=r.fetch,c=r.navigate;return w.useCallback(async(u,d={})=>{let{action:f,method:p,encType:m,formData:y,body:v}=rS(u,t);if(d.navigate===!1){let b=d.fetcherKey||ES();await l(b,s,d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||m,flushSync:d.flushSync})}else await c(d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||m,replace:d.replace,state:d.state,fromRouteId:s,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,c,t,s])}function TS(r,{relative:t}={}){let{basename:s}=w.useContext(Jn),l=w.useContext(Ur);Qt(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),u={...sl(r||".",{relative:t})},d=zr();if(r==null){u.search=d.search;let f=new URLSearchParams(u.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();u.search=y?`?${y}`:""}}return(!r||r===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:kr([s,u.pathname])),Gi(u)}function AS(r,{relative:t}={}){let s=w.useContext(bv);Qt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Ov("useViewTransitionState"),c=sl(r,{relative:t});if(!s.isTransitioning)return!1;let u=Dr(s.currentLocation.pathname,l)||s.currentLocation.pathname,d=Dr(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Po(c.pathname,d)!=null||Po(c.pathname,u)!=null}var ka=uv();const se=({children:r,variant:t="primary",size:s="md",isLoading:l,block:c,className:u="",...d})=>{const f=["btn",`btn--${t}`,`btn--${s}`,c?"btn--block":"",l?"btn--loading":"",u].filter(Boolean).join(" ");return i.jsxs("button",{className:f,disabled:l,...d,children:[l&&i.jsx("span",{className:"btn__spinner"}),i.jsx("span",{className:"btn__content",children:r})]})},NS=({children:r})=>(zr(),i.jsxs("div",{className:"app-layout",children:[i.jsx("header",{className:"app-header",children:i.jsx("div",{className:"container app-header__content",children:i.jsx("img",{src:"/app/header-logo.png",alt:"recipe management",className:"app-logo-image"})})}),i.jsx("main",{className:"container app-main",children:r}),i.jsx("footer",{className:"app-footer",children:i.jsx("div",{className:"container",children:i.jsx("p",{children:" 2026 recipe management"})})})]})),Nt=({children:r,className:t="",hoverable:s=!1,...l})=>i.jsx("div",{className:`glass-card ${s?"glass-card--hoverable":""} ${t}`,...l,children:r});function OS(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return w.useMemo(()=>l=>{t.forEach(c=>c(l))},t)}const rc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function La(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function Oh(r){return"nodeType"in r}function pn(r){var t,s;return r?La(r)?r:Oh(r)&&(t=(s=r.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function kh(r){const{Document:t}=pn(r);return r instanceof t}function al(r){return La(r)?!1:r instanceof pn(r).HTMLElement}function kv(r){return r instanceof pn(r).SVGElement}function Ba(r){return r?La(r)?r.document:Oh(r)?kh(r)?r:al(r)||kv(r)?r.ownerDocument:document:document:document}const ar=rc?w.useLayoutEffect:w.useEffect;function sc(r){const t=w.useRef(r);return ar(()=>{t.current=r}),w.useCallback(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return t.current==null?void 0:t.current(...l)},[])}function kS(){const r=w.useRef(null),t=w.useCallback((l,c)=>{r.current=setInterval(l,c)},[]),s=w.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,s]}function Vi(r,t){t===void 0&&(t=[r]);const s=w.useRef(r);return ar(()=>{s.current!==r&&(s.current=r)},t),s}function il(r,t){const s=w.useRef();return w.useMemo(()=>{const l=r(s.current);return s.current=l,l},[...t])}function Go(r){const t=sc(r),s=w.useRef(null),l=w.useCallback(c=>{c!==s.current&&t?.(c,s.current),s.current=c},[]);return[s,l]}function Vo(r){const t=w.useRef();return w.useEffect(()=>{t.current=r},[r]),t.current}let Nd={};function ll(r,t){return w.useMemo(()=>{if(t)return t;const s=Nd[r]==null?0:Nd[r]+1;return Nd[r]=s,r+"-"+s},[r,t])}function Dv(r){return function(t){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return l.reduce((u,d)=>{const f=Object.entries(d);for(const[p,m]of f){const y=u[p];y!=null&&(u[p]=y+r*m)}return u},{...t})}}const Ua=Dv(1),Yi=Dv(-1);function DS(r){return"clientX"in r&&"clientY"in r}function ac(r){if(!r)return!1;const{KeyboardEvent:t}=pn(r.target);return t&&r instanceof t}function US(r){if(!r)return!1;const{TouchEvent:t}=pn(r.target);return t&&r instanceof t}function Yo(r){if(US(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:s}=r.touches[0];return{x:t,y:s}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:s}=r.changedTouches[0];return{x:t,y:s}}}return DS(r)?{x:r.clientX,y:r.clientY}:null}const Xn=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:s}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:s}=r;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(r){if(r)return[Xn.Translate.toString(r),Xn.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:s,easing:l}=r;return t+" "+s+"ms "+l}}}),Zm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zS(r){return r.matches(Zm)?r:r.querySelector(Zm)}const MS={display:"none"};function LS(r){let{id:t,value:s}=r;return _e.createElement("div",{id:t,style:MS},s)}function BS(r){let{id:t,announcement:s,ariaLiveType:l="assertive"}=r;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _e.createElement("div",{id:t,style:c,role:"status","aria-live":l,"aria-atomic":!0},s)}function IS(){const[r,t]=w.useState("");return{announce:w.useCallback(l=>{l!=null&&t(l)},[]),announcement:r}}const Uv=w.createContext(null);function qS(r){const t=w.useContext(Uv);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function $S(){const[r]=w.useState(()=>new Set),t=w.useCallback(l=>(r.add(l),()=>r.delete(l)),[r]);return[w.useCallback(l=>{let{type:c,event:u}=l;r.forEach(d=>{var f;return(f=d[c])==null?void 0:f.call(d,u)})},[r]),t]}const HS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PS={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:s}=r;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:s}=r;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function GS(r){let{announcements:t=PS,container:s,hiddenTextDescribedById:l,screenReaderInstructions:c=HS}=r;const{announce:u,announcement:d}=IS(),f=ll("DndLiveRegion"),[p,m]=w.useState(!1);if(w.useEffect(()=>{m(!0)},[]),qS(w.useMemo(()=>({onDragStart(v){let{active:b}=v;u(t.onDragStart({active:b}))},onDragMove(v){let{active:b,over:S}=v;t.onDragMove&&u(t.onDragMove({active:b,over:S}))},onDragOver(v){let{active:b,over:S}=v;u(t.onDragOver({active:b,over:S}))},onDragEnd(v){let{active:b,over:S}=v;u(t.onDragEnd({active:b,over:S}))},onDragCancel(v){let{active:b,over:S}=v;u(t.onDragCancel({active:b,over:S}))}}),[u,t])),!p)return null;const y=_e.createElement(_e.Fragment,null,_e.createElement(LS,{id:l,value:c.draggable}),_e.createElement(BS,{id:f,announcement:d}));return s?ka.createPortal(y,s):y}var Ft;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Ft||(Ft={}));function Ko(){}function un(r,t){return w.useMemo(()=>({sensor:r,options:t??{}}),[r,t])}function Us(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return w.useMemo(()=>[...t].filter(l=>l!=null),[...t])}const ir=Object.freeze({x:0,y:0});function Dh(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function VS(r,t){const s=Yo(r);if(!s)return"0 0";const l={x:(s.x-t.left)/t.width*100,y:(s.y-t.top)/t.height*100};return l.x+"% "+l.y+"%"}function Uh(r,t){let{data:{value:s}}=r,{data:{value:l}}=t;return s-l}function YS(r,t){let{data:{value:s}}=r,{data:{value:l}}=t;return l-s}function lh(r){let{left:t,top:s,height:l,width:c}=r;return[{x:t,y:s},{x:t+c,y:s},{x:t,y:s+l},{x:t+c,y:s+l}]}function zv(r,t){if(!r||r.length===0)return null;const[s]=r;return s[t]}function ey(r,t,s){return t===void 0&&(t=r.left),s===void 0&&(s=r.top),{x:t+r.width*.5,y:s+r.height*.5}}const oh=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=ey(t,t.left,t.top),u=[];for(const d of l){const{id:f}=d,p=s.get(f);if(p){const m=Dh(ey(p),c);u.push({id:f,data:{droppableContainer:d,value:m}})}}return u.sort(Uh)},KS=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=lh(t),u=[];for(const d of l){const{id:f}=d,p=s.get(f);if(p){const m=lh(p),y=c.reduce((b,S,_)=>b+Dh(m[_],S),0),v=Number((y/4).toFixed(4));u.push({id:f,data:{droppableContainer:d,value:v}})}}return u.sort(Uh)};function FS(r,t){const s=Math.max(t.top,r.top),l=Math.max(t.left,r.left),c=Math.min(t.left+t.width,r.left+r.width),u=Math.min(t.top+t.height,r.top+r.height),d=c-l,f=u-s;if(l<c&&s<u){const p=t.width*t.height,m=r.width*r.height,y=d*f,v=y/(p+m-y);return Number(v.toFixed(4))}return 0}const QS=r=>{let{collisionRect:t,droppableRects:s,droppableContainers:l}=r;const c=[];for(const u of l){const{id:d}=u,f=s.get(d);if(f){const p=FS(f,t);p>0&&c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(YS)};function XS(r,t){const{top:s,left:l,bottom:c,right:u}=t;return s<=r.y&&r.y<=c&&l<=r.x&&r.x<=u}const Mv=r=>{let{droppableContainers:t,droppableRects:s,pointerCoordinates:l}=r;if(!l)return[];const c=[];for(const u of t){const{id:d}=u,f=s.get(d);if(f&&XS(l,f)){const m=lh(f).reduce((v,b)=>v+Dh(l,b),0),y=Number((m/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:y}})}}return c.sort(Uh)};function JS(r,t,s){return{...r,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function Lv(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:ir}function WS(r){return function(s){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return c.reduce((d,f)=>({...d,top:d.top+r*f.y,bottom:d.bottom+r*f.y,left:d.left+r*f.x,right:d.right+r*f.x}),{...s})}}const ZS=WS(1);function Bv(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ej(r,t,s){const l=Bv(t);if(!l)return r;const{scaleX:c,scaleY:u,x:d,y:f}=l,p=r.left-d-(1-c)*parseFloat(s),m=r.top-f-(1-u)*parseFloat(s.slice(s.indexOf(" ")+1)),y=c?r.width/c:r.width,v=u?r.height/u:r.height;return{width:y,height:v,top:m,right:p+y,bottom:m+v,left:p}}const tj={ignoreTransform:!1};function Ia(r,t){t===void 0&&(t=tj);let s=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:m,transformOrigin:y}=pn(r).getComputedStyle(r);m&&(s=ej(s,m,y))}const{top:l,left:c,width:u,height:d,bottom:f,right:p}=s;return{top:l,left:c,width:u,height:d,bottom:f,right:p}}function ty(r){return Ia(r,{ignoreTransform:!0})}function nj(r){const t=r.innerWidth,s=r.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function rj(r,t){return t===void 0&&(t=pn(r).getComputedStyle(r)),t.position==="fixed"}function sj(r,t){t===void 0&&(t=pn(r).getComputedStyle(r));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const u=t[c];return typeof u=="string"?s.test(u):!1})}function ic(r,t){const s=[];function l(c){if(t!=null&&s.length>=t||!c)return s;if(kh(c)&&c.scrollingElement!=null&&!s.includes(c.scrollingElement))return s.push(c.scrollingElement),s;if(!al(c)||kv(c)||s.includes(c))return s;const u=pn(r).getComputedStyle(c);return c!==r&&sj(c,u)&&s.push(c),rj(c,u)?s:l(c.parentNode)}return r?l(r):s}function Iv(r){const[t]=ic(r,1);return t??null}function Od(r){return!rc||!r?null:La(r)?r:Oh(r)?kh(r)||r===Ba(r).scrollingElement?window:al(r)?r:null:null}function qv(r){return La(r)?r.scrollX:r.scrollLeft}function $v(r){return La(r)?r.scrollY:r.scrollTop}function ch(r){return{x:qv(r),y:$v(r)}}var Wt;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Wt||(Wt={}));function Hv(r){return!rc||!r?!1:r===document.scrollingElement}function Pv(r){const t={x:0,y:0},s=Hv(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},l={x:r.scrollWidth-s.width,y:r.scrollHeight-s.height},c=r.scrollTop<=t.y,u=r.scrollLeft<=t.x,d=r.scrollTop>=l.y,f=r.scrollLeft>=l.x;return{isTop:c,isLeft:u,isBottom:d,isRight:f,maxScroll:l,minScroll:t}}const aj={x:.2,y:.2};function ij(r,t,s,l,c){let{top:u,left:d,right:f,bottom:p}=s;l===void 0&&(l=10),c===void 0&&(c=aj);const{isTop:m,isBottom:y,isLeft:v,isRight:b}=Pv(r),S={x:0,y:0},_={x:0,y:0},j={height:t.height*c.y,width:t.width*c.x};return!m&&u<=t.top+j.height?(S.y=Wt.Backward,_.y=l*Math.abs((t.top+j.height-u)/j.height)):!y&&p>=t.bottom-j.height&&(S.y=Wt.Forward,_.y=l*Math.abs((t.bottom-j.height-p)/j.height)),!b&&f>=t.right-j.width?(S.x=Wt.Forward,_.x=l*Math.abs((t.right-j.width-f)/j.width)):!v&&d<=t.left+j.width&&(S.x=Wt.Backward,_.x=l*Math.abs((t.left+j.width-d)/j.width)),{direction:S,speed:_}}function lj(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:t,left:s,right:l,bottom:c}=r.getBoundingClientRect();return{top:t,left:s,right:l,bottom:c,width:r.clientWidth,height:r.clientHeight}}function Gv(r){return r.reduce((t,s)=>Ua(t,ch(s)),ir)}function oj(r){return r.reduce((t,s)=>t+qv(s),0)}function cj(r){return r.reduce((t,s)=>t+$v(s),0)}function Vv(r,t){if(t===void 0&&(t=Ia),!r)return;const{top:s,left:l,bottom:c,right:u}=t(r);Iv(r)&&(c<=0||u<=0||s>=window.innerHeight||l>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const uj=[["x",["left","right"],oj],["y",["top","bottom"],cj]];class zh{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=ic(s),c=Gv(l);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,d,f]of uj)for(const p of d)Object.defineProperty(this,p,{get:()=>{const m=f(l),y=c[u]-m;return this.rect[p]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ii{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...s)})},this.target=t}add(t,s,l){var c;(c=this.target)==null||c.addEventListener(t,s,l),this.listeners.push([t,s,l])}}function dj(r){const{EventTarget:t}=pn(r);return r instanceof t?r:Ba(r)}function kd(r,t){const s=Math.abs(r.x),l=Math.abs(r.y);return typeof t=="number"?Math.sqrt(s**2+l**2)>t:"x"in t&&"y"in t?s>t.x&&l>t.y:"x"in t?s>t.x:"y"in t?l>t.y:!1}var Fn;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Fn||(Fn={}));function ny(r){r.preventDefault()}function hj(r){r.stopPropagation()}var We;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(We||(We={}));const Yv={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},fj=(r,t)=>{let{currentCoordinates:s}=t;switch(r.code){case We.Right:return{...s,x:s.x+25};case We.Left:return{...s,x:s.x-25};case We.Down:return{...s,y:s.y+25};case We.Up:return{...s,y:s.y-25}}};class zs{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new Ii(Ba(s)),this.windowListeners=new Ii(pn(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,l=t.node.current;l&&Vv(l),s(ir)}handleKeyDown(t){if(ac(t)){const{active:s,context:l,options:c}=this.props,{keyboardCodes:u=Yv,coordinateGetter:d=fj,scrollBehavior:f="smooth"}=c,{code:p}=t;if(u.end.includes(p)){this.handleEnd(t);return}if(u.cancel.includes(p)){this.handleCancel(t);return}const{collisionRect:m}=l.current,y=m?{x:m.left,y:m.top}:ir;this.referenceCoordinates||(this.referenceCoordinates=y);const v=d(t,{active:s,context:l.current,currentCoordinates:y});if(v){const b=Yi(v,y),S={x:0,y:0},{scrollableAncestors:_}=l.current;for(const j of _){const O=t.code,{isTop:D,isRight:N,isLeft:z,isBottom:q,maxScroll:U,minScroll:C}=Pv(j),B=lj(j),I={x:Math.min(O===We.Right?B.right-B.width/2:B.right,Math.max(O===We.Right?B.left:B.left+B.width/2,v.x)),y:Math.min(O===We.Down?B.bottom-B.height/2:B.bottom,Math.max(O===We.Down?B.top:B.top+B.height/2,v.y))},$=O===We.Right&&!N||O===We.Left&&!z,Y=O===We.Down&&!q||O===We.Up&&!D;if($&&I.x!==v.x){const T=j.scrollLeft+b.x,A=O===We.Right&&T<=U.x||O===We.Left&&T>=C.x;if(A&&!b.y){j.scrollTo({left:T,behavior:f});return}A?S.x=j.scrollLeft-T:S.x=O===We.Right?j.scrollLeft-U.x:j.scrollLeft-C.x,S.x&&j.scrollBy({left:-S.x,behavior:f});break}else if(Y&&I.y!==v.y){const T=j.scrollTop+b.y,A=O===We.Down&&T<=U.y||O===We.Up&&T>=C.y;if(A&&!b.x){j.scrollTo({top:T,behavior:f});return}A?S.y=j.scrollTop-T:S.y=O===We.Down?j.scrollTop-U.y:j.scrollTop-C.y,S.y&&j.scrollBy({top:-S.y,behavior:f});break}}this.handleMove(t,Ua(Yi(v,this.referenceCoordinates),S))}}}handleMove(t,s){const{onMove:l}=this.props;t.preventDefault(),l(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zs.activators=[{eventName:"onKeyDown",handler:(r,t,s)=>{let{keyboardCodes:l=Yv,onActivation:c}=t,{active:u}=s;const{code:d}=r.nativeEvent;if(l.start.includes(d)){const f=u.activatorNode.current;return f&&r.target!==f?!1:(r.preventDefault(),c?.({event:r.nativeEvent}),!0)}return!1}}];function ry(r){return!!(r&&"distance"in r)}function sy(r){return!!(r&&"delay"in r)}class Mh{constructor(t,s,l){var c;l===void 0&&(l=dj(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:u}=t,{target:d}=u;this.props=t,this.events=s,this.document=Ba(d),this.documentListeners=new Ii(this.document),this.listeners=new Ii(l),this.windowListeners=new Ii(pn(d)),this.initialCoordinates=(c=Yo(u))!=null?c:ir,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:l}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.DragStart,ny),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),this.windowListeners.add(Fn.ContextMenu,ny),this.documentListeners.add(Fn.Keydown,this.handleKeydown),s){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sy(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ry(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:l,onPending:c}=this.props;c(l,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Fn.Click,hj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fn.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:l,initialCoordinates:c,props:u}=this,{onMove:d,options:{activationConstraint:f}}=u;if(!c)return;const p=(s=Yo(t))!=null?s:ir,m=Yi(c,p);if(!l&&f){if(ry(f)){if(f.tolerance!=null&&kd(m,f.tolerance))return this.handleCancel();if(kd(m,f.distance))return this.handleStart()}if(sy(f)&&kd(m,f.tolerance))return this.handleCancel();this.handlePending(f,m);return}t.cancelable&&t.preventDefault(),d(p)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===We.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const pj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ol extends Mh{constructor(t){const{event:s}=t,l=Ba(s.target);super(t,pj,l)}}ol.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;return!s.isPrimary||s.button!==0?!1:(l?.({event:s}),!0)}}];const gj={move:{name:"mousemove"},end:{name:"mouseup"}};var uh;(function(r){r[r.RightClick=2]="RightClick"})(uh||(uh={}));class cl extends Mh{constructor(t){super(t,gj,Ba(t.event.target))}}cl.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;return s.button===uh.RightClick?!1:(l?.({event:s}),!0)}}];const Dd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ul extends Mh{constructor(t){super(t,Dd)}static setup(){return window.addEventListener(Dd.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dd.move.name,t)};function t(){}}}ul.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:s}=r,{onActivation:l}=t;const{touches:c}=s;return c.length>1?!1:(l?.({event:s}),!0)}}];var qi;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(qi||(qi={}));var Fo;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fo||(Fo={}));function mj(r){let{acceleration:t,activator:s=qi.Pointer,canScroll:l,draggingRect:c,enabled:u,interval:d=5,order:f=Fo.TreeOrder,pointerCoordinates:p,scrollableAncestors:m,scrollableAncestorRects:y,delta:v,threshold:b}=r;const S=vj({delta:v,disabled:!u}),[_,j]=kS(),O=w.useRef({x:0,y:0}),D=w.useRef({x:0,y:0}),N=w.useMemo(()=>{switch(s){case qi.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case qi.DraggableRect:return c}},[s,c,p]),z=w.useRef(null),q=w.useCallback(()=>{const C=z.current;if(!C)return;const B=O.current.x*D.current.x,I=O.current.y*D.current.y;C.scrollBy(B,I)},[]),U=w.useMemo(()=>f===Fo.TreeOrder?[...m].reverse():m,[f,m]);w.useEffect(()=>{if(!u||!m.length||!N){j();return}for(const C of U){if(l?.(C)===!1)continue;const B=m.indexOf(C),I=y[B];if(!I)continue;const{direction:$,speed:Y}=ij(C,I,N,t,b);for(const T of["x","y"])S[T][$[T]]||(Y[T]=0,$[T]=0);if(Y.x>0||Y.y>0){j(),z.current=C,_(q,d),O.current=Y,D.current=$;return}}O.current={x:0,y:0},D.current={x:0,y:0},j()},[t,q,l,j,u,d,JSON.stringify(N),JSON.stringify(S),_,m,U,y,JSON.stringify(b)])}const yj={x:{[Wt.Backward]:!1,[Wt.Forward]:!1},y:{[Wt.Backward]:!1,[Wt.Forward]:!1}};function vj(r){let{delta:t,disabled:s}=r;const l=Vo(t);return il(c=>{if(s||!l||!c)return yj;const u={x:Math.sign(t.x-l.x),y:Math.sign(t.y-l.y)};return{x:{[Wt.Backward]:c.x[Wt.Backward]||u.x===-1,[Wt.Forward]:c.x[Wt.Forward]||u.x===1},y:{[Wt.Backward]:c.y[Wt.Backward]||u.y===-1,[Wt.Forward]:c.y[Wt.Forward]||u.y===1}}},[s,t,l])}function xj(r,t){const s=t!=null?r.get(t):void 0,l=s?s.node.current:null;return il(c=>{var u;return t==null?null:(u=l??c)!=null?u:null},[l,t])}function bj(r,t){return w.useMemo(()=>r.reduce((s,l)=>{const{sensor:c}=l,u=c.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,l)}));return[...s,...u]},[]),[r,t])}var Ki;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Ki||(Ki={}));var dh;(function(r){r.Optimized="optimized"})(dh||(dh={}));const ay=new Map;function wj(r,t){let{dragging:s,dependencies:l,config:c}=t;const[u,d]=w.useState(null),{frequency:f,measure:p,strategy:m}=c,y=w.useRef(r),v=O(),b=Vi(v),S=w.useCallback(function(D){D===void 0&&(D=[]),!b.current&&d(N=>N===null?D:N.concat(D.filter(z=>!N.includes(z))))},[b]),_=w.useRef(null),j=il(D=>{if(v&&!s)return ay;if(!D||D===ay||y.current!==r||u!=null){const N=new Map;for(let z of r){if(!z)continue;if(u&&u.length>0&&!u.includes(z.id)&&z.rect.current){N.set(z.id,z.rect.current);continue}const q=z.node.current,U=q?new zh(p(q),q):null;z.rect.current=U,U&&N.set(z.id,U)}return N}return D},[r,u,s,v,p]);return w.useEffect(()=>{y.current=r},[r]),w.useEffect(()=>{v||S()},[s,v]),w.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),w.useEffect(()=>{v||typeof f!="number"||_.current!==null||(_.current=setTimeout(()=>{S(),_.current=null},f))},[f,v,S,...l]),{droppableRects:j,measureDroppableContainers:S,measuringScheduled:u!=null};function O(){switch(m){case Ki.Always:return!1;case Ki.BeforeDragging:return s;default:return!s}}}function Lh(r,t){return il(s=>r?s||(typeof t=="function"?t(r):r):null,[t,r])}function Sj(r,t){return Lh(r,t)}function jj(r){let{callback:t,disabled:s}=r;const l=sc(t),c=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(l)},[l,s]);return w.useEffect(()=>()=>c?.disconnect(),[c]),c}function lc(r){let{callback:t,disabled:s}=r;const l=sc(t),c=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(l)},[s]);return w.useEffect(()=>()=>c?.disconnect(),[c]),c}function _j(r){return new zh(Ia(r),r)}function iy(r,t,s){t===void 0&&(t=_j);const[l,c]=w.useState(null);function u(){c(p=>{if(!r)return null;if(r.isConnected===!1){var m;return(m=p??s)!=null?m:null}const y=t(r);return JSON.stringify(p)===JSON.stringify(y)?p:y})}const d=jj({callback(p){if(r)for(const m of p){const{type:y,target:v}=m;if(y==="childList"&&v instanceof HTMLElement&&v.contains(r)){u();break}}}}),f=lc({callback:u});return ar(()=>{u(),r?(f?.observe(r),d?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),d?.disconnect())},[r]),l}function Cj(r){const t=Lh(r);return Lv(r,t)}const ly=[];function Ej(r){const t=w.useRef(r),s=il(l=>r?l&&l!==ly&&r&&t.current&&r.parentNode===t.current.parentNode?l:ic(r):ly,[r]);return w.useEffect(()=>{t.current=r},[r]),s}function Rj(r){const[t,s]=w.useState(null),l=w.useRef(r),c=w.useCallback(u=>{const d=Od(u.target);d&&s(f=>f?(f.set(d,ch(d)),new Map(f)):null)},[]);return w.useEffect(()=>{const u=l.current;if(r!==u){d(u);const f=r.map(p=>{const m=Od(p);return m?(m.addEventListener("scroll",c,{passive:!0}),[m,ch(m)]):null}).filter(p=>p!=null);s(f.length?new Map(f):null),l.current=r}return()=>{d(r),d(u)};function d(f){f.forEach(p=>{const m=Od(p);m?.removeEventListener("scroll",c)})}},[c,r]),w.useMemo(()=>r.length?t?Array.from(t.values()).reduce((u,d)=>Ua(u,d),ir):Gv(r):ir,[r,t])}function oy(r,t){t===void 0&&(t=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},t),w.useEffect(()=>{const l=r!==ir;l&&!s.current&&(s.current=r),!l&&s.current&&(s.current=null)},[r]),s.current?Yi(r,s.current):ir}function Tj(r){w.useEffect(()=>{if(!rc)return;const t=r.map(s=>{let{sensor:l}=s;return l.setup==null?void 0:l.setup()});return()=>{for(const s of t)s?.()}},r.map(t=>{let{sensor:s}=t;return s}))}function Aj(r,t){return w.useMemo(()=>r.reduce((s,l)=>{let{eventName:c,handler:u}=l;return s[c]=d=>{u(d,t)},s},{}),[r,t])}function Kv(r){return w.useMemo(()=>r?nj(r):null,[r])}const cy=[];function Nj(r,t){t===void 0&&(t=Ia);const[s]=r,l=Kv(s?pn(s):null),[c,u]=w.useState(cy);function d(){u(()=>r.length?r.map(p=>Hv(p)?l:new zh(t(p),p)):cy)}const f=lc({callback:d});return ar(()=>{f?.disconnect(),d(),r.forEach(p=>f?.observe(p))},[r]),c}function Fv(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return al(t)?t:r}function Oj(r){let{measure:t}=r;const[s,l]=w.useState(null),c=w.useCallback(m=>{for(const{target:y}of m)if(al(y)){l(v=>{const b=t(y);return v?{...v,width:b.width,height:b.height}:b});break}},[t]),u=lc({callback:c}),d=w.useCallback(m=>{const y=Fv(m);u?.disconnect(),y&&u?.observe(y),l(y?t(y):null)},[t,u]),[f,p]=Go(d);return w.useMemo(()=>({nodeRef:f,rect:s,setRef:p}),[s,f,p])}const kj=[{sensor:ol,options:{}},{sensor:zs,options:{}}],Dj={current:{}},Ho={draggable:{measure:ty},droppable:{measure:ty,strategy:Ki.WhileDragging,frequency:dh.Optimized},dragOverlay:{measure:Ia}};class $i extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,l;return(s=(l=this.get(t))==null?void 0:l.node.current)!=null?s:void 0}}const Uj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $i,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ko},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ho,measureDroppableContainers:Ko,windowRect:null,measuringScheduled:!1},Qv={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ko,draggableNodes:new Map,over:null,measureDroppableContainers:Ko},dl=w.createContext(Qv),Xv=w.createContext(Uj);function zj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $i}}}function Mj(r,t){switch(t.type){case Ft.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ft.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case Ft.DragEnd:case Ft.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ft.RegisterDroppable:{const{element:s}=t,{id:l}=s,c=new $i(r.droppable.containers);return c.set(l,s),{...r,droppable:{...r.droppable,containers:c}}}case Ft.SetDroppableDisabled:{const{id:s,key:l,disabled:c}=t,u=r.droppable.containers.get(s);if(!u||l!==u.key)return r;const d=new $i(r.droppable.containers);return d.set(s,{...u,disabled:c}),{...r,droppable:{...r.droppable,containers:d}}}case Ft.UnregisterDroppable:{const{id:s,key:l}=t,c=r.droppable.containers.get(s);if(!c||l!==c.key)return r;const u=new $i(r.droppable.containers);return u.delete(s),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function Lj(r){let{disabled:t}=r;const{active:s,activatorEvent:l,draggableNodes:c}=w.useContext(dl),u=Vo(l),d=Vo(s?.id);return w.useEffect(()=>{if(!t&&!l&&u&&d!=null){if(!ac(u)||document.activeElement===u.target)return;const f=c.get(d);if(!f)return;const{activatorNode:p,node:m}=f;if(!p.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[p.current,m.current]){if(!y)continue;const v=zS(y);if(v){v.focus();break}}})}},[l,t,c,d,u]),null}function Jv(r,t){let{transform:s,...l}=t;return r!=null&&r.length?r.reduce((c,u)=>u({transform:c,...l}),s):s}function Bj(r){return w.useMemo(()=>({draggable:{...Ho.draggable,...r?.draggable},droppable:{...Ho.droppable,...r?.droppable},dragOverlay:{...Ho.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function Ij(r){let{activeNode:t,measure:s,initialRect:l,config:c=!0}=r;const u=w.useRef(!1),{x:d,y:f}=typeof c=="boolean"?{x:c,y:c}:c;ar(()=>{if(!d&&!f||!t){u.current=!1;return}if(u.current||!l)return;const m=t?.node.current;if(!m||m.isConnected===!1)return;const y=s(m),v=Lv(y,l);if(d||(v.x=0),f||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=Iv(m);b&&b.scrollBy({top:v.y,left:v.x})}},[t,d,f,l,s])}const oc=w.createContext({...ir,scaleX:1,scaleY:1});var is;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(is||(is={}));const Ds=w.memo(function(t){var s,l,c,u;let{id:d,accessibility:f,autoScroll:p=!0,children:m,sensors:y=kj,collisionDetection:v=QS,measuring:b,modifiers:S,..._}=t;const j=w.useReducer(Mj,void 0,zj),[O,D]=j,[N,z]=$S(),[q,U]=w.useState(is.Uninitialized),C=q===is.Initialized,{draggable:{active:B,nodes:I,translate:$},droppable:{containers:Y}}=O,T=B!=null?I.get(B):null,A=w.useRef({initial:null,translated:null}),P=w.useMemo(()=>{var ee;return B!=null?{id:B,data:(ee=T?.data)!=null?ee:Dj,rect:A}:null},[B,T]),L=w.useRef(null),[K,k]=w.useState(null),[G,X]=w.useState(null),ce=Vi(_,Object.values(_)),de=ll("DndDescribedBy",d),M=w.useMemo(()=>Y.getEnabled(),[Y]),V=Bj(b),{droppableRects:Z,measureDroppableContainers:le,measuringScheduled:fe}=wj(M,{dragging:C,dependencies:[$.x,$.y],config:V.droppable}),ye=xj(I,B),Ce=w.useMemo(()=>G?Yo(G):null,[G]),Ie=R(),Ue=Sj(ye,V.draggable.measure);Ij({activeNode:B!=null?I.get(B):null,config:Ie.layoutShiftCompensation,initialRect:Ue,measure:V.draggable.measure});const he=iy(ye,V.draggable.measure,Ue),Xe=iy(ye?ye.parentElement:null),Pe=w.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:Y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),bt=Y.getNodeFor((s=Pe.current.over)==null?void 0:s.id),ut=Oj({measure:V.dragOverlay.measure}),nt=(l=ut.nodeRef.current)!=null?l:ye,Ke=C?(c=ut.rect)!=null?c:he:null,ft=!!(ut.nodeRef.current&&ut.rect),_t=Cj(ft?null:he),Mt=Kv(nt?pn(nt):null),Ot=Ej(C?bt??ye:null),kt=Nj(Ot),at=Jv(S,{transform:{x:$.x-_t.x,y:$.y-_t.y,scaleX:1,scaleY:1},activatorEvent:G,active:P,activeNodeRect:he,containerNodeRect:Xe,draggingNodeRect:Ke,over:Pe.current.over,overlayNodeRect:ut.rect,scrollableAncestors:Ot,scrollableAncestorRects:kt,windowRect:Mt}),Vt=Ce?Ua(Ce,$):null,it=Rj(Ot),gn=oy(it),mn=oy(it,[he]),dn=Ua(at,gn),dt=Ke?ZS(Ke,at):null,Dt=P&&dt?v({active:P,collisionRect:dt,droppableRects:Z,droppableContainers:M,pointerCoordinates:Vt}):null,Zt=zv(Dt,"id"),[en,lr]=w.useState(null),yn=ft?at:Ua(at,mn),wt=JS(yn,(u=en?.rect)!=null?u:null,he),gt=w.useRef(null),mt=w.useCallback((ee,re)=>{let{sensor:ue,options:pe}=re;if(L.current==null)return;const Se=I.get(L.current);if(!Se)return;const ge=ee.nativeEvent,Te=new ue({active:L.current,activeNode:Se,event:ge,options:pe,context:Pe,onAbort(we){if(!I.get(we))return;const{onDragAbort:Re}=ce.current,ke={id:we};Re?.(ke),N({type:"onDragAbort",event:ke})},onPending(we,Ae,Re,ke){if(!I.get(we))return;const{onDragPending:Ct}=ce.current,St={id:we,constraint:Ae,initialCoordinates:Re,offset:ke};Ct?.(St),N({type:"onDragPending",event:St})},onStart(we){const Ae=L.current;if(Ae==null)return;const Re=I.get(Ae);if(!Re)return;const{onDragStart:ke}=ce.current,qe={activatorEvent:ge,active:{id:Ae,data:Re.data,rect:A}};ka.unstable_batchedUpdates(()=>{ke?.(qe),U(is.Initializing),D({type:Ft.DragStart,initialCoordinates:we,active:Ae}),N({type:"onDragStart",event:qe}),k(gt.current),X(ge)})},onMove(we){D({type:Ft.DragMove,coordinates:we})},onEnd:Oe(Ft.DragEnd),onCancel:Oe(Ft.DragCancel)});gt.current=Te;function Oe(we){return async function(){const{active:Re,collisions:ke,over:qe,scrollAdjustedTranslate:Ct}=Pe.current;let St=null;if(Re&&Ct){const{cancelDrop:vn}=ce.current;St={activatorEvent:ge,active:Re,collisions:ke,delta:Ct,over:qe},we===Ft.DragEnd&&typeof vn=="function"&&await Promise.resolve(vn(St))&&(we=Ft.DragCancel)}L.current=null,ka.unstable_batchedUpdates(()=>{D({type:we}),U(is.Uninitialized),lr(null),k(null),X(null),gt.current=null;const vn=we===Ft.DragEnd?"onDragEnd":"onDragCancel";if(St){const Lt=ce.current[vn];Lt?.(St),N({type:vn,event:St})}})}}},[I]),Rn=w.useCallback((ee,re)=>(ue,pe)=>{const Se=ue.nativeEvent,ge=I.get(pe);if(L.current!==null||!ge||Se.dndKit||Se.defaultPrevented)return;const Te={active:ge};ee(ue,re.options,Te)===!0&&(Se.dndKit={capturedBy:re.sensor},L.current=pe,mt(ue,re))},[I,mt]),xe=bj(y,Rn);Tj(y),ar(()=>{he&&q===is.Initializing&&U(is.Initialized)},[he,q]),w.useEffect(()=>{const{onDragMove:ee}=ce.current,{active:re,activatorEvent:ue,collisions:pe,over:Se}=Pe.current;if(!re||!ue)return;const ge={active:re,activatorEvent:ue,collisions:pe,delta:{x:dn.x,y:dn.y},over:Se};ka.unstable_batchedUpdates(()=>{ee?.(ge),N({type:"onDragMove",event:ge})})},[dn.x,dn.y]),w.useEffect(()=>{const{active:ee,activatorEvent:re,collisions:ue,droppableContainers:pe,scrollAdjustedTranslate:Se}=Pe.current;if(!ee||L.current==null||!re||!Se)return;const{onDragOver:ge}=ce.current,Te=pe.get(Zt),Oe=Te&&Te.rect.current?{id:Te.id,rect:Te.rect.current,data:Te.data,disabled:Te.disabled}:null,we={active:ee,activatorEvent:re,collisions:ue,delta:{x:Se.x,y:Se.y},over:Oe};ka.unstable_batchedUpdates(()=>{lr(Oe),ge?.(we),N({type:"onDragOver",event:we})})},[Zt]),ar(()=>{Pe.current={activatorEvent:G,active:P,activeNode:ye,collisionRect:dt,collisions:Dt,droppableRects:Z,draggableNodes:I,draggingNode:nt,draggingNodeRect:Ke,droppableContainers:Y,over:en,scrollableAncestors:Ot,scrollAdjustedTranslate:dn},A.current={initial:Ke,translated:dt}},[P,ye,Dt,dt,I,nt,Ke,Z,Y,en,Ot,dn]),mj({...Ie,delta:$,draggingRect:dt,pointerCoordinates:Vt,scrollableAncestors:Ot,scrollableAncestorRects:kt});const me=w.useMemo(()=>({active:P,activeNode:ye,activeNodeRect:he,activatorEvent:G,collisions:Dt,containerNodeRect:Xe,dragOverlay:ut,draggableNodes:I,droppableContainers:Y,droppableRects:Z,over:en,measureDroppableContainers:le,scrollableAncestors:Ot,scrollableAncestorRects:kt,measuringConfiguration:V,measuringScheduled:fe,windowRect:Mt}),[P,ye,he,G,Dt,Xe,ut,I,Y,Z,en,le,Ot,kt,V,fe,Mt]),be=w.useMemo(()=>({activatorEvent:G,activators:xe,active:P,activeNodeRect:he,ariaDescribedById:{draggable:de},dispatch:D,draggableNodes:I,over:en,measureDroppableContainers:le}),[G,xe,P,he,D,de,I,en,le]);return _e.createElement(Uv.Provider,{value:z},_e.createElement(dl.Provider,{value:be},_e.createElement(Xv.Provider,{value:me},_e.createElement(oc.Provider,{value:wt},m)),_e.createElement(Lj,{disabled:f?.restoreFocus===!1})),_e.createElement(GS,{...f,hiddenTextDescribedById:de}));function R(){const ee=K?.autoScrollEnabled===!1,re=typeof p=="object"?p.enabled===!1:p===!1,ue=C&&!ee&&!re;return typeof p=="object"?{...p,enabled:ue}:{enabled:ue}}}),qj=w.createContext(null),uy="button",$j="Draggable";function Bh(r){let{id:t,data:s,disabled:l=!1,attributes:c}=r;const u=ll($j),{activators:d,activatorEvent:f,active:p,activeNodeRect:m,ariaDescribedById:y,draggableNodes:v,over:b}=w.useContext(dl),{role:S=uy,roleDescription:_="draggable",tabIndex:j=0}=c??{},O=p?.id===t,D=w.useContext(O?oc:qj),[N,z]=Go(),[q,U]=Go(),C=Aj(d,t),B=Vi(s);ar(()=>(v.set(t,{id:t,key:u,node:N,activatorNode:q,data:B}),()=>{const $=v.get(t);$&&$.key===u&&v.delete(t)}),[v,t]);const I=w.useMemo(()=>({role:S,tabIndex:j,"aria-disabled":l,"aria-pressed":O&&S===uy?!0:void 0,"aria-roledescription":_,"aria-describedby":y.draggable}),[l,S,j,O,_,y.draggable]);return{active:p,activatorEvent:f,activeNodeRect:m,attributes:I,isDragging:O,listeners:l?void 0:C,node:N,over:b,setNodeRef:z,setActivatorNodeRef:U,transform:D}}function Wv(){return w.useContext(Xv)}const Hj="Droppable",Pj={timeout:25};function hl(r){let{data:t,disabled:s=!1,id:l,resizeObserverConfig:c}=r;const u=ll(Hj),{active:d,dispatch:f,over:p,measureDroppableContainers:m}=w.useContext(dl),y=w.useRef({disabled:s}),v=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:_,updateMeasurementsFor:j,timeout:O}={...Pj,...c},D=Vi(j??l),N=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{m(Array.isArray(D.current)?D.current:[D.current]),S.current=null},O)},[O]),z=lc({callback:N,disabled:_||!d}),q=w.useCallback((I,$)=>{z&&($&&(z.unobserve($),v.current=!1),I&&z.observe(I))},[z]),[U,C]=Go(q),B=Vi(t);return w.useEffect(()=>{!z||!U.current||(z.disconnect(),v.current=!1,z.observe(U.current))},[U,z]),w.useEffect(()=>(f({type:Ft.RegisterDroppable,element:{id:l,key:u,disabled:s,node:U,rect:b,data:B}}),()=>f({type:Ft.UnregisterDroppable,key:u,id:l})),[l]),w.useEffect(()=>{s!==y.current.disabled&&(f({type:Ft.SetDroppableDisabled,id:l,key:u,disabled:s}),y.current.disabled=s)},[l,u,s,f]),{active:d,rect:b,isOver:p?.id===l,node:U,over:p,setNodeRef:C}}function Gj(r){let{animation:t,children:s}=r;const[l,c]=w.useState(null),[u,d]=w.useState(null),f=Vo(s);return!s&&!l&&f&&c(f),ar(()=>{if(!u)return;const p=l?.key,m=l?.props.id;if(p==null||m==null){c(null);return}Promise.resolve(t(m,u)).then(()=>{c(null)})},[t,l,u]),_e.createElement(_e.Fragment,null,s,l?w.cloneElement(l,{ref:d}):null)}const Vj={x:0,y:0,scaleX:1,scaleY:1};function Yj(r){let{children:t}=r;return _e.createElement(dl.Provider,{value:Qv},_e.createElement(oc.Provider,{value:Vj},t))}const Kj={position:"fixed",touchAction:"none"},Fj=r=>ac(r)?"transform 250ms ease":void 0,Qj=w.forwardRef((r,t)=>{let{as:s,activatorEvent:l,adjustScale:c,children:u,className:d,rect:f,style:p,transform:m,transition:y=Fj}=r;if(!f)return null;const v=c?m:{...m,scaleX:1,scaleY:1},b={...Kj,width:f.width,height:f.height,top:f.top,left:f.left,transform:Xn.Transform.toString(v),transformOrigin:c&&l?VS(l,f):void 0,transition:typeof y=="function"?y(l):y,...p};return _e.createElement(s,{className:d,style:b,ref:t},u)}),Ih=r=>t=>{let{active:s,dragOverlay:l}=t;const c={},{styles:u,className:d}=r;if(u!=null&&u.active)for(const[f,p]of Object.entries(u.active))p!==void 0&&(c[f]=s.node.style.getPropertyValue(f),s.node.style.setProperty(f,p));if(u!=null&&u.dragOverlay)for(const[f,p]of Object.entries(u.dragOverlay))p!==void 0&&l.node.style.setProperty(f,p);return d!=null&&d.active&&s.node.classList.add(d.active),d!=null&&d.dragOverlay&&l.node.classList.add(d.dragOverlay),function(){for(const[p,m]of Object.entries(c))s.node.style.setProperty(p,m);d!=null&&d.active&&s.node.classList.remove(d.active)}},Xj=r=>{let{transform:{initial:t,final:s}}=r;return[{transform:Xn.Transform.toString(t)},{transform:Xn.Transform.toString(s)}]},Jj={duration:250,easing:"ease",keyframes:Xj,sideEffects:Ih({styles:{active:{opacity:"0"}}})};function Wj(r){let{config:t,draggableNodes:s,droppableContainers:l,measuringConfiguration:c}=r;return sc((u,d)=>{if(t===null)return;const f=s.get(u);if(!f)return;const p=f.node.current;if(!p)return;const m=Fv(d);if(!m)return;const{transform:y}=pn(d).getComputedStyle(d),v=Bv(y);if(!v)return;const b=typeof t=="function"?t:Zj(t);return Vv(p,c.draggable.measure),b({active:{id:u,data:f.data,node:p,rect:c.draggable.measure(p)},draggableNodes:s,dragOverlay:{node:d,rect:c.dragOverlay.measure(m)},droppableContainers:l,measuringConfiguration:c,transform:v})})}function Zj(r){const{duration:t,easing:s,sideEffects:l,keyframes:c}={...Jj,...r};return u=>{let{active:d,dragOverlay:f,transform:p,...m}=u;if(!t)return;const y={x:f.rect.left-d.rect.left,y:f.rect.top-d.rect.top},v={scaleX:p.scaleX!==1?d.rect.width*p.scaleX/f.rect.width:1,scaleY:p.scaleY!==1?d.rect.height*p.scaleY/f.rect.height:1},b={x:p.x-y.x,y:p.y-y.y,...v},S=c({...m,active:d,dragOverlay:f,transform:{initial:p,final:b}}),[_]=S,j=S[S.length-1];if(JSON.stringify(_)===JSON.stringify(j))return;const O=l?.({active:d,dragOverlay:f,...m}),D=f.node.animate(S,{duration:t,easing:s,fill:"forwards"});return new Promise(N=>{D.onfinish=()=>{O?.(),N()}})}}let dy=0;function e1(r){return w.useMemo(()=>{if(r!=null)return dy++,dy},[r])}const Zv=_e.memo(r=>{let{adjustScale:t=!1,children:s,dropAnimation:l,style:c,transition:u,modifiers:d,wrapperElement:f="div",className:p,zIndex:m=999}=r;const{activatorEvent:y,active:v,activeNodeRect:b,containerNodeRect:S,draggableNodes:_,droppableContainers:j,dragOverlay:O,over:D,measuringConfiguration:N,scrollableAncestors:z,scrollableAncestorRects:q,windowRect:U}=Wv(),C=w.useContext(oc),B=e1(v?.id),I=Jv(d,{activatorEvent:y,active:v,activeNodeRect:b,containerNodeRect:S,draggingNodeRect:O.rect,over:D,overlayNodeRect:O.rect,scrollableAncestors:z,scrollableAncestorRects:q,transform:C,windowRect:U}),$=Lh(b),Y=Wj({config:l,draggableNodes:_,droppableContainers:j,measuringConfiguration:N}),T=$?O.setRef:void 0;return _e.createElement(Yj,null,_e.createElement(Gj,{animation:Y},v&&B?_e.createElement(Qj,{key:B,id:v.id,ref:T,as:f,activatorEvent:y,adjustScale:t,className:p,transition:u,rect:$,style:{zIndex:m,...c},transform:I},s):null))});function qa(r,t,s){const l=r.slice();return l.splice(s<0?l.length+s:s,0,l.splice(t,1)[0]),l}function t1(r,t){return r.reduce((s,l,c)=>{const u=t.get(l);return u&&(s[c]=u),s},Array(r.length))}function Oo(r){return r!==null&&r>=0}function n1(r,t){if(r===t)return!0;if(r.length!==t.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==t[s])return!1;return!0}function r1(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const qh=r=>{let{rects:t,activeIndex:s,overIndex:l,index:c}=r;const u=qa(t,l,s),d=t[c],f=u[c];return!f||!d?null:{x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height}},ko={scaleX:1,scaleY:1},Qo=r=>{var t;let{activeIndex:s,activeNodeRect:l,index:c,rects:u,overIndex:d}=r;const f=(t=u[s])!=null?t:l;if(!f)return null;if(c===s){const m=u[d];return m?{x:0,y:s<d?m.top+m.height-(f.top+f.height):m.top-f.top,...ko}:null}const p=s1(u,c,s);return c>s&&c<=d?{x:0,y:-f.height-p,...ko}:c<s&&c>=d?{x:0,y:f.height+p,...ko}:{x:0,y:0,...ko}};function s1(r,t,s){const l=r[t],c=r[t-1],u=r[t+1];return l?s<t?c?l.top-(c.top+c.height):u?u.top-(l.top+l.height):0:u?u.top-(l.top+l.height):c?l.top-(c.top+c.height):0:0}const e0="Sortable",t0=_e.createContext({activeIndex:-1,containerId:e0,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qh,disabled:{draggable:!1,droppable:!1}});function Fi(r){let{children:t,id:s,items:l,strategy:c=qh,disabled:u=!1}=r;const{active:d,dragOverlay:f,droppableRects:p,over:m,measureDroppableContainers:y}=Wv(),v=ll(e0,s),b=f.rect!==null,S=w.useMemo(()=>l.map(C=>typeof C=="object"&&"id"in C?C.id:C),[l]),_=d!=null,j=d?S.indexOf(d.id):-1,O=m?S.indexOf(m.id):-1,D=w.useRef(S),N=!n1(S,D.current),z=O!==-1&&j===-1||N,q=r1(u);ar(()=>{N&&_&&y(S)},[N,S,_,y]),w.useEffect(()=>{D.current=S},[S]);const U=w.useMemo(()=>({activeIndex:j,containerId:v,disabled:q,disableTransforms:z,items:S,overIndex:O,useDragOverlay:b,sortedRects:t1(S,p),strategy:c}),[j,v,q.draggable,q.droppable,z,S,O,p,b,c]);return _e.createElement(t0.Provider,{value:U},t)}const a1=r=>{let{id:t,items:s,activeIndex:l,overIndex:c}=r;return qa(s,l,c).indexOf(t)},i1=r=>{let{containerId:t,isSorting:s,wasDragging:l,index:c,items:u,newIndex:d,previousItems:f,previousContainerId:p,transition:m}=r;return!m||!l||f!==u&&c===d?!1:s?!0:d!==c&&t===p},l1={duration:200,easing:"ease"},n0="transform",o1=Xn.Transition.toString({property:n0,duration:0,easing:"linear"}),c1={roleDescription:"sortable"};function u1(r){let{disabled:t,index:s,node:l,rect:c}=r;const[u,d]=w.useState(null),f=w.useRef(s);return ar(()=>{if(!t&&s!==f.current&&l.current){const p=c.current;if(p){const m=Ia(l.current,{ignoreTransform:!0}),y={x:p.left-m.left,y:p.top-m.top,scaleX:p.width/m.width,scaleY:p.height/m.height};(y.x||y.y)&&d(y)}}s!==f.current&&(f.current=s)},[t,s,l,c]),w.useEffect(()=>{u&&d(null)},[u]),u}function fl(r){let{animateLayoutChanges:t=i1,attributes:s,disabled:l,data:c,getNewIndex:u=a1,id:d,strategy:f,resizeObserverConfig:p,transition:m=l1}=r;const{items:y,containerId:v,activeIndex:b,disabled:S,disableTransforms:_,sortedRects:j,overIndex:O,useDragOverlay:D,strategy:N}=w.useContext(t0),z=d1(l,S),q=y.indexOf(d),U=w.useMemo(()=>({sortable:{containerId:v,index:q,items:y},...c}),[v,c,q,y]),C=w.useMemo(()=>y.slice(y.indexOf(d)),[y,d]),{rect:B,node:I,isOver:$,setNodeRef:Y}=hl({id:d,data:U,disabled:z.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...p}}),{active:T,activatorEvent:A,activeNodeRect:P,attributes:L,setNodeRef:K,listeners:k,isDragging:G,over:X,setActivatorNodeRef:ce,transform:de}=Bh({id:d,data:U,attributes:{...c1,...s},disabled:z.draggable}),M=OS(Y,K),V=!!T,Z=V&&!_&&Oo(b)&&Oo(O),le=!D&&G,fe=le&&Z?de:null,Ce=Z?fe??(f??N)({rects:j,activeNodeRect:P,activeIndex:b,overIndex:O,index:q}):null,Ie=Oo(b)&&Oo(O)?u({id:d,items:y,activeIndex:b,overIndex:O}):q,Ue=T?.id,he=w.useRef({activeId:Ue,items:y,newIndex:Ie,containerId:v}),Xe=y!==he.current.items,Pe=t({active:T,containerId:v,isDragging:G,isSorting:V,id:d,index:q,items:y,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:m,wasDragging:he.current.activeId!=null}),bt=u1({disabled:!Pe,index:q,node:I,rect:B});return w.useEffect(()=>{V&&he.current.newIndex!==Ie&&(he.current.newIndex=Ie),v!==he.current.containerId&&(he.current.containerId=v),y!==he.current.items&&(he.current.items=y)},[V,Ie,v,y]),w.useEffect(()=>{if(Ue===he.current.activeId)return;if(Ue!=null&&he.current.activeId==null){he.current.activeId=Ue;return}const nt=setTimeout(()=>{he.current.activeId=Ue},50);return()=>clearTimeout(nt)},[Ue]),{active:T,activeIndex:b,attributes:L,data:U,rect:B,index:q,newIndex:Ie,items:y,isOver:$,isSorting:V,isDragging:G,listeners:k,node:I,overIndex:O,over:X,setNodeRef:M,setActivatorNodeRef:ce,setDroppableNodeRef:Y,setDraggableNodeRef:K,transform:bt??Ce,transition:ut()};function ut(){if(bt||Xe&&he.current.newIndex===q)return o1;if(!(le&&!ac(A)||!m)&&(V||Pe))return Xn.Transition.toString({...m,property:n0})}}function d1(r,t){var s,l;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(s=r?.draggable)!=null?s:t.draggable,droppable:(l=r?.droppable)!=null?l:t.droppable}}function Xo(r){if(!r)return!1;const t=r.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const h1=[We.Down,We.Right,We.Up,We.Left],pl=(r,t)=>{let{context:{active:s,collisionRect:l,droppableRects:c,droppableContainers:u,over:d,scrollableAncestors:f}}=t;if(h1.includes(r.code)){if(r.preventDefault(),!s||!l)return;const p=[];u.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=c.get(v.id);if(b)switch(r.code){case We.Down:l.top<b.top&&p.push(v);break;case We.Up:l.top>b.top&&p.push(v);break;case We.Left:l.left>b.left&&p.push(v);break;case We.Right:l.left<b.left&&p.push(v);break}});const m=KS({collisionRect:l,droppableRects:c,droppableContainers:p});let y=zv(m,"id");if(y===d?.id&&m.length>1&&(y=m[1].id),y!=null){const v=u.get(s.id),b=u.get(y),S=b?c.get(b.id):null,_=b?.node.current;if(_&&S&&v&&b){const O=ic(_).some((C,B)=>f[B]!==C),D=r0(v,b),N=f1(v,b),z=O||!D?{x:0,y:0}:{x:N?l.width-S.width:0,y:N?l.height-S.height:0},q={x:S.left,y:S.top};return z.x&&z.y?q:Yi(q,z)}}}};function r0(r,t){return!Xo(r)||!Xo(t)?!1:r.data.current.sortable.containerId===t.data.current.sortable.containerId}function f1(r,t){return!Xo(r)||!Xo(t)||!r0(r,t)?!1:r.data.current.sortable.index<t.data.current.sortable.index}const hy=r=>{if(!r)return"";const t=new Date(r);return`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`},p1=({recipe:r,isSelected:t,isSelectMode:s,onSelectRecipe:l,onToggleSelection:c,disableDrag:u,showOwner:d,ownerLabelFn:f})=>{const{attributes:p,listeners:m,setNodeRef:y,transform:v,transition:b,isDragging:S}=fl({id:r.id,disabled:u}),_={transform:Xn.Transform.toString(v),transition:b,opacity:S?.5:1,touchAction:"pan-y",height:"100%",outline:"none",cursor:u?"default":"grab"};return i.jsx("div",{ref:y,style:_,...p,...m,children:i.jsxs(Nt,{hoverable:!0,className:`recipe-card ${t?"selected":""} ${r.type==="bread"?"recipe-card--bread":""} ${/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(j=>/|Dessert/i.test(j))?"recipe-card--dessert":""} ${r.category==="URL"||r.sourceUrl?"recipe-card--url":""}`,style:{height:"100%"},onClick:()=>{s?c(r.id):l(r)},children:[i.jsxs("div",{className:"recipe-card__image-wrapper",children:[r.image?i.jsx("img",{src:r.image,alt:r.title,className:"recipe-card__image",loading:"lazy",decoding:"async"}):i.jsx("div",{className:"recipe-card__image placeholder"}),i.jsx("div",{className:"recipe-card__overlay"}),s&&i.jsx("div",{className:"recipe-card__selection-overlay",children:i.jsx("div",{className:`selection-checkbox ${t?"checked":""}`})}),i.jsx("div",{className:"recipe-card__tags",children:(()=>{if(!r.tags)return null;const O=r.tags.flatMap(z=>(z||"").split(/[,]/)).map(z=>z.trim()).filter(Boolean).filter(z=>!z.startsWith("owner:"));return(O.includes("URL")?["URL"]:O).slice(0,1).map((z,q)=>i.jsx("span",{className:"recipe-tag",children:z},`${z}-${q}`))})()})]}),i.jsxs("div",{className:"recipe-card__content",children:[i.jsx("h3",{className:"recipe-title",children:r.title}),i.jsx("p",{className:"recipe-desc",children:r.description}),i.jsxs("div",{className:"recipe-meta",children:[r.storeName&&i.jsxs("span",{children:[" ",r.storeName]}),d&&typeof f=="function"&&i.jsxs("span",{className:"recipe-owner",children:[" ",f(r)]}),i.jsxs("div",{className:"recipe-dates",children:[i.jsxs("span",{className:"recipe-date",children:[" : ",hy(r.created_at)]}),r.updated_at&&i.jsxs("span",{className:"recipe-date",children:[" : ",hy(r.updated_at)]})]})]})]})]})})},fy=r=>r.type==="bread"||r.tags&&r.tags.some(t=>/|Bread/i.test(t)),py=r=>{const t=s=>/|Dessert/i.test(s);return/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(t)},gy=r=>/|Sauce/i.test(r.category||"")||r.tags&&r.tags.some(t=>/|Sauce/i.test(t)),my=r=>/||Decor/i.test(r.category||"")||r.tags&&r.tags.some(t=>/||Decor/i.test(t)),yy=({recipes:r,onSelectRecipe:t,isSelectMode:s,selectedIds:l,onToggleSelection:c,disableDrag:u,displayMode:d="normal",showOwner:f=!1,ownerLabelFn:p})=>{const[m,y]=w.useState({}),v=Y=>{y(T=>({...T,[Y]:!T[Y]}))},b=r.filter(Y=>fy(Y)),S=r.filter(Y=>!fy(Y)),_=S.filter(Y=>gy(Y)),j=S.filter(Y=>!gy(Y)),O=j.filter(Y=>my(Y)),D=j.filter(Y=>!my(Y)),N=Y=>{const T=Y.category||"",A=Y.tags||[];return/|Dressing||Vinaigrette||Mayonnaise/i.test(T)||A.some(P=>/|Dressing||Vinaigrette||Mayonnaise/i.test(P))},z=D.filter(Y=>N(Y)),q=D.filter(Y=>!N(Y)),U=q.filter(Y=>py(Y)),C=q.filter(Y=>!py(Y)),[B,I]=w.useState(typeof window<"u"&&window.innerWidth>=1024?9:8);_e.useEffect(()=>{const Y=()=>{window.innerWidth>=1024?I(9):I(8)};return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]);const $=(Y,T,A,P)=>{if(T.length===0)return null;const L=d==="all";let K=T,k=!1,G=!1;return L||(k=m[P],G=T.length>B,K=k?T:T.slice(0,B)),i.jsxs("div",{className:"recipe-section",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{onClick:()=>!L&&G&&v(P),style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px",cursor:!L&&G?"pointer":"default",userSelect:"none",color:"#ffffff"},children:[i.jsx("span",{children:A})," ",Y,i.jsxs("span",{style:{fontSize:"0.8rem",color:"#ccc",fontWeight:"normal"},children:["(",T.length,")"]}),!L&&G&&i.jsx("span",{className:"section-toggle-btn",children:k?" ":" "})]}),i.jsx("div",{className:"recipe-grid",children:i.jsx(Fi,{items:K.map(X=>X.id),strategy:qh,children:K.map(X=>{const ce=l&&l.has(X.id);return i.jsx(p1,{recipe:X,isSelected:ce,isSelectMode:s,onSelectRecipe:t,onToggleSelection:c,disableDrag:u,showOwner:f,ownerLabelFn:p},X.id)})})})]})};return i.jsxs("div",{className:"recipe-list-container",children:[$("",C,"","cooking"),$("",b,"","bread"),$("",U,"","dessert"),$("",_,"","sauce"),$("",z,"","dressing"),$("",O,"","decoration"),r.length===0&&i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:""})]})},Cn=({isOpen:r,onClose:t,title:s,children:l,size:c="medium",showCloseButton:u=!0})=>{if(w.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),w.useEffect(()=>{const f=p=>{p.key==="Escape"&&r&&t()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[r,t]),!r)return null;const d=f=>{f.target===f.currentTarget&&t()};return i.jsx("div",{className:"modal-overlay",onClick:d,children:i.jsxs("div",{className:`modal-content modal-${c}`,children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{className:"modal-title",children:s}),u&&i.jsx("button",{className:"modal-close-btn",onClick:t,"aria-label":"",children:""})]}),i.jsx("div",{className:"modal-body",children:l})]})})};function cc(r,t){var s={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&t.indexOf(l)<0&&(s[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(r);c<l.length;c++)t.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(r,l[c])&&(s[l[c]]=r[l[c]]);return s}function g1(r,t,s,l){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function f(y){try{m(l.next(y))}catch(v){d(v)}}function p(y){try{m(l.throw(y))}catch(v){d(v)}}function m(y){y.done?u(y.value):c(y.value).then(f,p)}m((l=l.apply(r,t||[])).next())})}const m1=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class $h extends Error{constructor(t,s="FunctionsError",l){super(t),this.name=s,this.context=l}}class y1 extends $h{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class vy extends $h{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class xy extends $h{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hh;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(hh||(hh={}));class v1{constructor(t,{headers:s={},customFetch:l,region:c=hh.Any}={}){this.url=t,this.headers=s,this.region=c,this.fetch=m1(l)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return g1(this,arguments,void 0,function*(s,l={}){var c;let u,d;try{const{headers:f,method:p,body:m,signal:y,timeout:v}=l;let b={},{region:S}=l;S||(S=this.region);const _=new URL(`${this.url}/${s}`);S&&S!=="any"&&(b["x-region"]=S,_.searchParams.set("forceFunctionRegion",S));let j;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",j=m):typeof m=="string"?(b["Content-Type"]="text/plain",j=m):typeof FormData<"u"&&m instanceof FormData?j=m:(b["Content-Type"]="application/json",j=JSON.stringify(m)):j=m;let O=y;v&&(d=new AbortController,u=setTimeout(()=>d.abort(),v),y?(O=d.signal,y.addEventListener("abort",()=>d.abort())):O=d.signal);const D=yield this.fetch(_.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:j,signal:O}).catch(U=>{throw new y1(U)}),N=D.headers.get("x-relay-error");if(N&&N==="true")throw new vy(D);if(!D.ok)throw new xy(D);let z=((c=D.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),q;return z==="application/json"?q=yield D.json():z==="application/octet-stream"||z==="application/pdf"?q=yield D.blob():z==="text/event-stream"?q=D:z==="multipart/form-data"?q=yield D.formData():q=yield D.text(),{data:q,error:null,response:D}}catch(f){return{data:null,error:f,response:f instanceof xy||f instanceof vy?f.context:void 0}}finally{u&&clearTimeout(u)}})}}var x1=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},b1=class{constructor(r){var t,s;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(t=r.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=r.signal,this.isMaybeSingle=(s=r.isMaybeSingle)!==null&&s!==void 0?s:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,t){return this.headers=new Headers(this.headers),this.headers.set(r,t),this}then(r,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,f=null,p=null,m=u.status,y=u.statusText;if(u.ok){var v,b;if(s.method!=="HEAD"){var S;const D=await u.text();D===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((S=s.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?f=D:f=JSON.parse(D))}const j=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),O=(b=u.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");j&&O&&O.length>1&&(p=parseInt(O[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var _;const j=await u.text();try{d=JSON.parse(j),Array.isArray(d)&&u.status===404&&(f=[],d=null,m=200,y="OK")}catch{u.status===404&&j===""?(m=204,y="No Content"):d={message:j}}if(d&&s.isMaybeSingle&&(!(d==null||(_=d.details)===null||_===void 0)&&_.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&s.shouldThrowOnError)throw new x1(d)}return{error:d,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(c=c.catch(u=>{var d;let f="";const p=u?.cause;if(p){var m,y,v,b;const _=(m=p?.message)!==null&&m!==void 0?m:"",j=(y=p?.code)!==null&&y!==void 0?y:"";f=`${(v=u?.name)!==null&&v!==void 0?v:"FetchError"}: ${u?.message}`,f+=`

Caused by: ${(b=p?.name)!==null&&b!==void 0?b:"Error"}: ${_}`,j&&(f+=` (${j})`),p?.stack&&(f+=`
${p.stack}`)}else{var S;f=(S=u?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(r,t)}returns(){return this}overrideTypes(){return this}},w1=class extends b1{select(r){let t=!1;const s=(r??"*").split("").map(l=>/\s/.test(l)&&!t?"":(l==='"'&&(t=!t),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:t=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${r}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:t,referencedTable:s=t}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,t,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(u,`${t-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:t=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[r?"analyze":null,t?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const by=new RegExp("[,()]");var Ta=class extends w1{eq(r,t){return this.url.searchParams.append(r,`eq.${t}`),this}neq(r,t){return this.url.searchParams.append(r,`neq.${t}`),this}gt(r,t){return this.url.searchParams.append(r,`gt.${t}`),this}gte(r,t){return this.url.searchParams.append(r,`gte.${t}`),this}lt(r,t){return this.url.searchParams.append(r,`lt.${t}`),this}lte(r,t){return this.url.searchParams.append(r,`lte.${t}`),this}like(r,t){return this.url.searchParams.append(r,`like.${t}`),this}likeAllOf(r,t){return this.url.searchParams.append(r,`like(all).{${t.join(",")}}`),this}likeAnyOf(r,t){return this.url.searchParams.append(r,`like(any).{${t.join(",")}}`),this}ilike(r,t){return this.url.searchParams.append(r,`ilike.${t}`),this}ilikeAllOf(r,t){return this.url.searchParams.append(r,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(r,t){return this.url.searchParams.append(r,`ilike(any).{${t.join(",")}}`),this}regexMatch(r,t){return this.url.searchParams.append(r,`match.${t}`),this}regexIMatch(r,t){return this.url.searchParams.append(r,`imatch.${t}`),this}is(r,t){return this.url.searchParams.append(r,`is.${t}`),this}isDistinct(r,t){return this.url.searchParams.append(r,`isdistinct.${t}`),this}in(r,t){const s=Array.from(new Set(t)).map(l=>typeof l=="string"&&by.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`in.(${s})`),this}notIn(r,t){const s=Array.from(new Set(t)).map(l=>typeof l=="string"&&by.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`not.in.(${s})`),this}contains(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cs.{${t.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(t)}`),this}containedBy(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cd.{${t.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(t)}`),this}rangeGt(r,t){return this.url.searchParams.append(r,`sr.${t}`),this}rangeGte(r,t){return this.url.searchParams.append(r,`nxl.${t}`),this}rangeLt(r,t){return this.url.searchParams.append(r,`sl.${t}`),this}rangeLte(r,t){return this.url.searchParams.append(r,`nxr.${t}`),this}rangeAdjacent(r,t){return this.url.searchParams.append(r,`adj.${t}`),this}overlaps(r,t){return typeof t=="string"?this.url.searchParams.append(r,`ov.${t}`):this.url.searchParams.append(r,`ov.{${t.join(",")}}`),this}textSearch(r,t,{config:s,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(r,`${c}fts${u}.${t}`),this}match(r){return Object.entries(r).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(r,t,s){return this.url.searchParams.append(r,`not.${t}.${s}`),this}or(r,{foreignTable:t,referencedTable:s=t}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${r})`),this}filter(r,t,s){return this.url.searchParams.append(r,`${t}.${s}`),this}},S1=class{constructor(r,{headers:t={},schema:s,fetch:l}){this.url=r,this.headers=new Headers(t),this.schema=s,this.fetch=l}select(r,t){const{head:s=!1,count:l}=t??{},c=s?"HEAD":"GET";let u=!1;const d=(r??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new Ta({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:t,defaultToNull:s=!0}={}){var l;const c="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ta({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(r,{onConflict:t,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new Ta({method:d,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:t}={}){var s;const l="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ta({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:r}={}){var t;const s="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Ta({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},j1=class s0{constructor(t,{headers:s={},schema:l,fetch:c}={}){this.url=t,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new S1(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new s0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const p=new URL(`${this.url}/rpc/${t}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{p.searchParams.append(v,b)})):(f="POST",m=s);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new Ta({method:f,url:p,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class _1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const l=s.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const l=this.getWebSocketConstructor();return new l(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const C1="2.89.0",E1=`realtime-js/${C1}`,a0="1.0.0",R1="2.0.0",wy=a0,fh=1e4,T1=1e3,A1=100;var ls;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ls||(ls={}));var Kt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Kt||(Kt={}));var sr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(sr||(sr={}));var ph;(function(r){r.websocket="websocket"})(ph||(ph={}));var Ns;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ns||(Ns={}));class N1{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let l=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,l;const c=(l=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(t){var s,l;const c=(l=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:{},d=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,s,l){var c,u;const d=t.topic,f=(c=t.ref)!==null&&c!==void 0?c:"",p=(u=t.join_ref)!==null&&u!==void 0?u:"",m=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+d.length+m.length+v.length,S=new ArrayBuffer(this.HEADER_LENGTH+b);let _=new DataView(S),j=0;_.setUint8(j++,this.KINDS.userBroadcastPush),_.setUint8(j++,p.length),_.setUint8(j++,f.length),_.setUint8(j++,d.length),_.setUint8(j++,m.length),_.setUint8(j++,v.length),_.setUint8(j++,s),Array.from(p,D=>_.setUint8(j++,D.charCodeAt(0))),Array.from(f,D=>_.setUint8(j++,D.charCodeAt(0))),Array.from(d,D=>_.setUint8(j++,D.charCodeAt(0))),Array.from(m,D=>_.setUint8(j++,D.charCodeAt(0))),Array.from(v,D=>_.setUint8(j++,D.charCodeAt(0)));var O=new Uint8Array(S.byteLength+l.byteLength);return O.set(new Uint8Array(S),0),O.set(new Uint8Array(l),S.byteLength),O.buffer}decode(t,s){if(this._isArrayBuffer(t)){let l=this._binaryDecode(t);return s(l)}if(typeof t=="string"){const l=JSON.parse(t),[c,u,d,f,p]=l;return s({join_ref:c,ref:u,topic:d,event:f,payload:p})}return s({})}_binaryDecode(t){const s=new DataView(t),l=s.getUint8(0),c=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,c)}_decodeUserBroadcast(t,s,l){const c=s.getUint8(1),u=s.getUint8(2),d=s.getUint8(3),f=s.getUint8(4);let p=this.HEADER_LENGTH+4;const m=l.decode(t.slice(p,p+c));p=p+c;const y=l.decode(t.slice(p,p+u));p=p+u;const v=l.decode(t.slice(p,p+d));p=p+d;const b=t.slice(p,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(l.decode(b)):b,_={type:this.BROADCAST_EVENT,event:y,payload:S};return d>0&&(_.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([l])=>s.includes(l)))}}class i0{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(pt||(pt={}));const Sy=(r,t,s={})=>{var l;const c=(l=s.skipTypes)!==null&&l!==void 0?l:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=O1(d,r,t,c),u),{}):{}},O1=(r,t,s,l)=>{const c=t.find(f=>f.name===r),u=c?.type,d=s[r];return u&&!l.includes(u)?l0(u,d):gh(d)},l0=(r,t)=>{if(r.charAt(0)==="_"){const s=r.slice(1,r.length);return z1(t,s)}switch(r){case pt.bool:return k1(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return D1(t);case pt.json:case pt.jsonb:return U1(t);case pt.timestamp:return M1(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return gh(t);default:return gh(t)}},gh=r=>r,k1=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},D1=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},U1=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},z1=(r,t)=>{if(typeof r!="string")return r;const s=r.length-1,l=r[s];if(r[0]==="{"&&l==="}"){let u;const d=r.slice(1,s);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(f=>l0(t,f))}return r},M1=r=>typeof r=="string"?r.replace(" ","T"):r,o0=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ud{constructor(t,s,l={},c=fh){this.channel=t,this.event=s,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var l;return this._hasReceived(t)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(l=>l.status===t).forEach(l=>l.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jy;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(jy||(jy={}));class Hi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hi.syncState(this.state,c,u,d),this.pendingDiffs.forEach(p=>{this.state=Hi.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],f()}),this.channel._on(l.diff,{},c=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Hi.syncDiff(this.state,c,u,d),f())}),this.onJoin((c,u,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:d})}),this.onLeave((c,u,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,l,c){const u=this.cloneDeep(t),d=this.transformState(s),f={},p={};return this.map(u,(m,y)=>{d[m]||(p[m]=y)}),this.map(d,(m,y)=>{const v=u[m];if(v){const b=y.map(O=>O.presence_ref),S=v.map(O=>O.presence_ref),_=y.filter(O=>S.indexOf(O.presence_ref)<0),j=v.filter(O=>b.indexOf(O.presence_ref)<0);_.length>0&&(f[m]=_),j.length>0&&(p[m]=j)}else f[m]=y}),this.syncDiff(u,{joins:f,leaves:p},l,c)}static syncDiff(t,s,l,c){const{joins:u,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(u,(f,p)=>{var m;const y=(m=t[f])!==null&&m!==void 0?m:[];if(t[f]=this.cloneDeep(p),y.length>0){const v=t[f].map(S=>S.presence_ref),b=y.filter(S=>v.indexOf(S.presence_ref)<0);t[f].unshift(...b)}l(f,y,p)}),this.map(d,(f,p)=>{let m=t[f];if(!m)return;const y=p.map(v=>v.presence_ref);m=m.filter(v=>y.indexOf(v.presence_ref)<0),t[f]=m,c(f,m,p),m.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(l=>s(l,t[l]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,l)=>{const c=t[l];return"metas"in c?s[l]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[l]=c,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _y;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(_y||(_y={}));var Pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Pi||(Pi={}));var Or;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Or||(Or={}));class Da{constructor(t,s={config:{}},l){var c,u;if(this.topic=t,this.params=s,this.socket=l,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ud(this,sr.join,this.params,this.timeout),this.rejoinTimer=new i0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sr.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new Hi(this),this.broadcastEndpointURL=o0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var l,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:d,presence:f,private:p}}=this.params,m=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&c!==void 0?c:[],y=!!this.bindings[Pi.PRESENCE]&&this.bindings[Pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},b={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Or.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Or.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:S})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t?.(Or.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,O=(_=j?.length)!==null&&_!==void 0?_:0,D=[];for(let N=0;N<O;N++){const z=j[N],{filter:{event:q,schema:U,table:C,filter:B}}=z,I=S&&S[N];if(I&&I.event===q&&Da.isFilterValueEqual(I.schema,U)&&Da.isFilterValueEqual(I.table,C)&&Da.isFilterValueEqual(I.filter,B))D.push(Object.assign(Object.assign({},z),{id:I.id}));else{this.unsubscribe(),this.state=Kt.errored,t?.(Or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(Or.SUBSCRIBED);return}}).receive("error",S=>{this.state=Kt.errored,t?.(Or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,l){return this.state===Kt.joined&&t===Pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,l)}async httpSend(t,s,l={}){var c;if(s==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(t,s={}){var l,c;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,f,p;const m=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sr.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Ud(this,sr.leave,{},t),l.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(t,s,l){const c=new AbortController,u=setTimeout(()=>c.abort(),l),d=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(u),d}_push(t,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Ud(this,t,s,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>A1){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,l){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,l){var c,u;const d=t.toLocaleLowerCase(),{close:f,error:p,leave:m,join:y}=sr;if(l&&[f,p,m,y].indexOf(d)>=0&&l!==this._joinRef())return;let b=this._onMessage(d,s,l);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var _,j,O;return((_=S.filter)===null||_===void 0?void 0:_.event)==="*"||((O=(j=S.filter)===null||j===void 0?void 0:j.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===d}).map(S=>S.callback(b,l)):(u=this.bindings[d])===null||u===void 0||u.filter(S=>{var _,j,O,D,N,z;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in S){const q=S.id,U=(_=S.filter)===null||_===void 0?void 0:_.event;return q&&((j=s.ids)===null||j===void 0?void 0:j.includes(q))&&(U==="*"||U?.toLocaleLowerCase()===((O=s.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const q=(N=(D=S?.filter)===null||D===void 0?void 0:D.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return q==="*"||q===((z=s?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===d}).map(S=>{if(typeof b=="object"&&"ids"in b){const _=b.data,{schema:j,table:O,commit_timestamp:D,type:N,errors:z}=_;b=Object.assign(Object.assign({},{schema:j,table:O,commit_timestamp:D,eventType:N,new:{},old:{},errors:z}),this._getPayloadRecords(_))}S.callback(b,l)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,l){const c=t.toLocaleLowerCase(),u={type:c,filter:s,callback:l};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(t,s){const l=t.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Da.isEqual(c.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const l in t)if(t[l]!==s[l])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(sr.close,{},t)}_onError(t){this._on(sr.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Sy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Sy(t.columns,t.old_record)),s}}const zd=()=>{},Do={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},L1=[1e3,2e3,5e3,1e4],B1=1e4,I1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class q1{constructor(t,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=Do.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zd,this.ref=0,this.reconnectTimer=null,this.vsn=wy,this.logger=zd,this.conn=null,this.sendBuffer=[],this.serializer=new N1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((l=s?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${ph.websocket}`,this.httpEndpoint=o0(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,l){this.logger(t,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return Ns.Connecting;case ls.open:return Ns.Open;case ls.closing:return Ns.Closing;default:return Ns.Closed}}isConnected(){return this.connectionState()===Ns.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const l=`realtime:${t}`,c=this.getChannels().find(u=>u.topic===l);if(c)return c;{const u=new Da(`realtime:${t}`,s,this);return this.channels.push(u),u}}push(t){const{topic:s,event:l,payload:c,ref:u}=t,d=()=>{this.encode(t,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${s} ${l} (${u})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(T1,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Do.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(l=>l.topic===t&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:c,payload:u,ref:d}=s,f=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${l} ${c} ${f}`.trim(),u),this.channels.filter(m=>m._isMember(l)).forEach(m=>m._trigger(c,u,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ls.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ls.open||this.conn.readyState===ls.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(sr.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const l=t.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${t}${l}${c}`}_workerObjectUrl(t){let s;if(t)s=t;else{const l=new Blob([I1],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,l=!1;if(t)s=t,l=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),s=this.accessTokenValue}else s=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(c=>{const u={access_token:s,version:E1};s&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(sr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(l=>{try{l(s)}catch(c){this.log("error",`error in ${t} callback`,c)}})}catch(l){this.log("error",`error triggering ${t} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new i0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Do.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,l,c,u,d,f,p,m,y,v,b,S;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(l=t?.timeout)!==null&&l!==void 0?l:fh,this.heartbeatIntervalMs=(c=t?.heartbeatIntervalMs)!==null&&c!==void 0?c:Do.HEARTBEAT_INTERVAL,this.worker=(u=t?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:zd,this.vsn=(p=t?.vsn)!==null&&p!==void 0?p:wy,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t?.reconnectAfterMs)!==null&&m!==void 0?m:(_=>L1[_-1]||B1),this.vsn){case a0:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((_,j)=>j(JSON.stringify(_))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((_,j)=>j(JSON.parse(_)));break;case R1:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Qi=class extends Error{constructor(r,t){super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $1(r,t,s){const l=new URL(t,r);if(s)for(const[c,u]of Object.entries(s))u!==void 0&&l.searchParams.set(c,u);return l.toString()}async function H1(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function P1(r){const t=r.fetchImpl??globalThis.fetch;return{async request({method:s,path:l,query:c,body:u,headers:d}){const f=$1(r.baseUrl,l,c),p=await H1(r.auth),m=await t(f,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...p,...d},body:u?JSON.stringify(u):void 0}),y=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),b=v&&y?JSON.parse(y):y;if(!m.ok){const S=v?b:void 0,_=S?.error;throw new Qi(_?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:_?.type,icebergCode:_?.code,details:S})}return{status:m.status,headers:m.headers,data:b}}}}function Uo(r){return r.join("")}var G1=class{constructor(r,t=""){this.client=r,this.prefix=t}async listNamespaces(r){const t=r?{parent:Uo(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(r,t){const s={namespace:r.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Uo(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Uo(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Uo(r.namespace)}`}),!0}catch(t){if(t instanceof Qi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(r,t){try{return await this.createNamespace(r,t)}catch(s){if(s instanceof Qi&&s.status===409)return;throw s}}};function wa(r){return r.join("")}var V1=class{constructor(r,t="",s){this.client=r,this.prefix=t,this.accessDelegation=s}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables`})).data.identifiers}async createTable(r,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(r,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(r,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(r){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata}async tableExists(r){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wa(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(s){if(s instanceof Qi&&s.status===404)return!1;throw s}}async createTableIfNotExists(r,t){try{return await this.createTable(r,t)}catch(s){if(s instanceof Qi&&s.status===409)return await this.loadTable({namespace:r.namespace,name:t.name});throw s}}},Y1=class{constructor(r){let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const s=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=P1({baseUrl:s,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new G1(this.client,t),this.tableOps=new V1(this.client,t,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,t){return this.namespaceOps.createNamespace(r,t)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,t){return this.tableOps.createTable(r,t)}async updateTable(r,t){return this.tableOps.updateTable(r,t)}async dropTable(r,t){await this.tableOps.dropTable(r,t)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,t){return this.namespaceOps.createNamespaceIfNotExists(r,t)}async createTableIfNotExists(r,t){return this.tableOps.createTableIfNotExists(r,t)}},uc=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function jt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var K1=class extends uc{constructor(r,t,s){super(r),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mh=class extends uc{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}};const Hh=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),F1=()=>Response,yh=r=>{if(Array.isArray(r))return r.map(s=>yh(s));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([s,l])=>{const c=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[c]=yh(l)}),t},Q1=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},X1=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Xi(r){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(r)}function J1(r,t){if(Xi(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var l=s.call(r,t);if(Xi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function W1(r){var t=J1(r,"string");return Xi(t)=="symbol"?t:t+""}function Z1(r,t,s){return(t=W1(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function Cy(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,l)}return s}function Le(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Cy(Object(s),!0).forEach(function(l){Z1(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):Cy(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}const Md=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},e_=async(r,t,s)=>{r instanceof await F1()&&!s?.noResolveJson?r.json().then(l=>{const c=r.status||500,u=l?.statusCode||c+"";t(new K1(Md(l),c,u))}).catch(l=>{t(new mh(Md(l),l))}):t(new mh(Md(r),r))},t_=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return r==="GET"||!l?c:(Q1(l)?(c.headers=Le({"Content-Type":"application/json"},t?.headers),c.body=JSON.stringify(l)):c.body=l,t?.duplex&&(c.duplex=t.duplex),Le(Le({},c),s))};async function gl(r,t,s,l,c,u){return new Promise((d,f)=>{r(s,t_(t,l,c,u)).then(p=>{if(!p.ok)throw p;return l?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>e_(p,f,l))})}async function Ji(r,t,s,l){return gl(r,"GET",t,s,l)}async function rr(r,t,s,l,c){return gl(r,"POST",t,l,c,s)}async function vh(r,t,s,l,c){return gl(r,"PUT",t,l,c,s)}async function n_(r,t,s,l){return gl(r,"HEAD",t,Le(Le({},s),{},{noResolveJson:!0}),l)}async function Ph(r,t,s,l,c){return gl(r,"DELETE",t,l,c,s)}var r_=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t}then(r,t){return this.execute().then(r,t)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(jt(t))return{data:null,error:t};throw t}}};let c0;c0=Symbol.toStringTag;var s_=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t,this[c0]="BlobDownloadBuilder",this.promise=null}asStream(){return new r_(this.downloadFn,this.shouldThrowOnError)}then(r,t){return this.getPromise().then(r,t)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(jt(t))return{data:null,error:t};throw t}}};const a_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ey={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var i_=class{constructor(r,t={},s,l){this.shouldThrowOnError=!1,this.url=r,this.headers=t,this.bucketId=s,this.fetch=Hh(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,t,s,l){var c=this;try{let u;const d=Le(Le({},Ey),l);let f=Le(Le({},c.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",c.encodeMetadata(p)),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),p&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(p))):(u=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,p&&(f["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),l?.headers&&(f=Le(Le({},f),l.headers));const m=c._removeEmptyFolders(t),y=c._getFinalPath(m),v=await(r=="PUT"?vh:rr)(c.fetch,`${c.url}/object/${y}`,u,Le({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(c.shouldThrowOnError)throw u;if(jt(u))return{data:null,error:u};throw u}}async upload(r,t,s){return this.uploadOrUpdate("POST",r,t,s)}async uploadToSignedUrl(r,t,s,l){var c=this;const u=c._removeEmptyFolders(r),d=c._getFinalPath(u),f=new URL(c.url+`/object/upload/sign/${d}`);f.searchParams.set("token",t);try{let p;const m=Le({upsert:Ey.upsert},l),y=Le(Le({},c.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",m.cacheControl)):(p=s,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType),{data:{path:u,fullPath:(await vh(c.fetch,f.toString(),p,{headers:y})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(jt(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(r,t){var s=this;try{let l=s._getFinalPath(r);const c=Le({},s.headers);t?.upsert&&(c["x-upsert"]="true");const u=await rr(s.fetch,`${s.url}/object/upload/sign/${l}`,{},{headers:c}),d=new URL(s.url+u.url),f=d.searchParams.get("token");if(!f)throw new uc("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:f},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}}async update(r,t,s){return this.uploadOrUpdate("PUT",r,t,s)}async move(r,t,s){var l=this;try{return{data:await rr(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:r,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:l.headers}),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(jt(c))return{data:null,error:c};throw c}}async copy(r,t,s){var l=this;try{return{data:{path:(await rr(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:r,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(jt(c))return{data:null,error:c};throw c}}async createSignedUrl(r,t,s){var l=this;try{let c=l._getFinalPath(r),u=await rr(l.fetch,`${l.url}/object/sign/${c}`,Le({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:l.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u={signedUrl:encodeURI(`${l.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(jt(c))return{data:null,error:c};throw c}}async createSignedUrls(r,t,s){var l=this;try{const c=await rr(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:t,paths:r},{headers:l.headers}),u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(d=>Le(Le({},d),{},{signedUrl:d.signedURL?encodeURI(`${l.url}${d.signedURL}${u}`):null})),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(jt(c))return{data:null,error:c};throw c}}download(r,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),c=l?`?${l}`:"",u=this._getFinalPath(r),d=()=>Ji(this.fetch,`${this.url}/${s}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new s_(d,this.shouldThrowOnError)}async info(r){var t=this;const s=t._getFinalPath(r);try{return{data:yh(await Ji(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(l){if(t.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}}async exists(r){var t=this;const s=t._getFinalPath(r);try{return await n_(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(l){if(t.shouldThrowOnError)throw l;if(jt(l)&&l instanceof mh){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}}getPublicUrl(r,t){const s=this._getFinalPath(r),l=[],c=t?.download?`download=${t.download===!0?"":t.download}`:"";c!==""&&l.push(c);const u=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&l.push(d);let f=l.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${f}`)}}}async remove(r){var t=this;try{return{data:await Ph(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async list(r,t,s){var l=this;try{const c=Le(Le(Le({},a_),t),{},{prefix:r||""});return{data:await rr(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},s),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(jt(c))return{data:null,error:c};throw c}}async listV2(r,t){var s=this;try{const l=Le({},r);return{data:await rr(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,l,{headers:s.headers},t),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const t=[];return r.width&&t.push(`width=${r.width}`),r.height&&t.push(`height=${r.height}`),r.resize&&t.push(`resize=${r.resize}`),r.format&&t.push(`format=${r.format}`),r.quality&&t.push(`quality=${r.quality}`),t.join("&")}};const u0="2.89.0",d0={"X-Client-Info":`storage-js/${u0}`};var l_=class{constructor(r,t={},s,l){this.shouldThrowOnError=!1;const c=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Le(Le({},d0),t),this.fetch=Hh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var t=this;try{const s=t.listBucketOptionsToQueryString(r);return{data:await Ji(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async getBucket(r){var t=this;try{return{data:await Ji(t.fetch,`${t.url}/bucket/${r}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async createBucket(r,t={public:!1}){var s=this;try{return{data:await rr(s.fetch,`${s.url}/bucket`,{id:r,name:r,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}}async updateBucket(r,t){var s=this;try{return{data:await vh(s.fetch,`${s.url}/bucket/${r}`,{id:r,name:r,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}}async emptyBucket(r){var t=this;try{return{data:await rr(t.fetch,`${t.url}/bucket/${r}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await Ph(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(r){const t={};return r&&("limit"in r&&(t.limit=String(r.limit)),"offset"in r&&(t.offset=String(r.offset)),r.search&&(t.search=r.search),r.sortColumn&&(t.sortColumn=r.sortColumn),r.sortOrder&&(t.sortOrder=r.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},o_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Le(Le({},d0),t),this.fetch=Hh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var t=this;try{return{data:await rr(t.fetch,`${t.url}/bucket`,{name:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async listBuckets(r){var t=this;try{const s=new URLSearchParams;r?.limit!==void 0&&s.set("limit",r.limit.toString()),r?.offset!==void 0&&s.set("offset",r.offset.toString()),r?.sortColumn&&s.set("sortColumn",r.sortColumn),r?.sortOrder&&s.set("sortOrder",r.sortOrder),r?.search&&s.set("search",r.search);const l=s.toString(),c=l?`${t.url}/bucket?${l}`:`${t.url}/bucket`;return{data:await Ji(t.fetch,c,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await Ph(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}}from(r){var t=this;if(!X1(r))throw new uc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Y1({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(s,{get(c,u){const d=c[u];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(c,f),error:null}}catch(p){if(l)throw p;return{data:null,error:p}}}}})}};const Gh={"X-Client-Info":`storage-js/${u0}`,"Content-Type":"application/json"};var h0=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Mn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Ld=class extends h0{constructor(r,t,s){super(r),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},c_=class extends h0{constructor(r,t){super(r),this.name="StorageVectorsUnknownError",this.originalError=t}};const Vh=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),u_=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ry=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),d_=async(r,t,s)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!s?.noResolveJson){const l=r.status||500,c=r;if(typeof c.json=="function")c.json().then(u=>{const d=u?.statusCode||u?.code||l+"";t(new Ld(Ry(u),l,d))}).catch(()=>{const u=l+"";t(new Ld(c.statusText||`HTTP ${l} error`,l,u))});else{const u=l+"";t(new Ld(c.statusText||`HTTP ${l} error`,l,u))}}else t(new c_(Ry(r),r))},h_=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return l?(u_(l)?(c.headers=Le({"Content-Type":"application/json"},t?.headers),c.body=JSON.stringify(l)):c.body=l,Le(Le({},c),s)):c};async function f_(r,t,s,l,c,u){return new Promise((d,f)=>{r(s,h_(t,l,c,u)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>d_(p,f,l))})}async function Ln(r,t,s,l,c){return f_(r,"POST",t,l,c,s)}var p_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Le(Le({},Gh),t),this.fetch=Vh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/CreateIndex`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async getIndex(r,t){var s=this;try{return{data:await Ln(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:r,indexName:t},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(Mn(l))return{data:null,error:l};throw l}}async listIndexes(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/ListIndexes`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async deleteIndex(r,t){var s=this;try{return{data:await Ln(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:r,indexName:t},{headers:s.headers})||{},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(Mn(l))return{data:null,error:l};throw l}}},g_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Le(Le({},Gh),t),this.fetch=Vh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var t=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ln(t.fetch,`${t.url}/PutVectors`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async getVectors(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/GetVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async listVectors(r){var t=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await Ln(t.fetch,`${t.url}/ListVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async queryVectors(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/QueryVectors`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async deleteVectors(r){var t=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ln(t.fetch,`${t.url}/DeleteVectors`,r,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}},m_=class{constructor(r,t={},s){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Le(Le({},Gh),t),this.fetch=Vh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async getBucket(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:r},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async listBuckets(r={}){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/ListVectorBuckets`,r,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}async deleteBucket(r){var t=this;try{return{data:await Ln(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}}},y_=class extends m_{constructor(r,t={}){super(r,t.headers||{},t.fetch)}from(r){return new v_(this.url,this.headers,r,this.fetch)}async createBucket(r){var t=()=>super.createBucket,s=this;return t().call(s,r)}async getBucket(r){var t=()=>super.getBucket,s=this;return t().call(s,r)}async listBuckets(r={}){var t=()=>super.listBuckets,s=this;return t().call(s,r)}async deleteBucket(r){var t=()=>super.deleteBucket,s=this;return t().call(s,r)}},v_=class extends p_{constructor(r,t,s,l){super(r,t,l),this.vectorBucketName=s}async createIndex(r){var t=()=>super.createIndex,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(r={}){var t=()=>super.listIndexes,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(r){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,r)}async deleteIndex(r){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,r)}index(r){return new x_(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},x_=class extends g_{constructor(r,t,s,l,c){super(r,t,c),this.vectorBucketName=s,this.indexName=l}async putVectors(r){var t=()=>super.putVectors,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(r){var t=()=>super.getVectors,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(r={}){var t=()=>super.listVectors,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(r){var t=()=>super.queryVectors,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(r){var t=()=>super.deleteVectors,s=this;return t().call(s,Le(Le({},r),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},b_=class extends l_{constructor(r,t={},s,l){super(r,t,s,l)}from(r){return new i_(this.url,this.headers,r,this.fetch)}get vectors(){return new y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new o_(this.url+"/iceberg",this.headers,this.fetch)}};const f0="2.89.0",Aa=30*1e3,xh=3,Bd=xh*Aa,w_="http://localhost:9999",S_="supabase.auth.token",j_={"X-Client-Info":`gotrue-js/${f0}`},bh="X-Supabase-Api-Version",p0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},__=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C_=600*1e3;class Wi extends Error{constructor(t,s,l){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function Ne(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class E_ extends Wi{constructor(t,s,l){super(t,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function R_(r){return Ne(r)&&r.name==="AuthApiError"}class Os extends Wi{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Mr extends Wi{constructor(t,s,l,c){super(t,l,c),this.name=s,this.status=l}}class zn extends Mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function T_(r){return Ne(r)&&r.name==="AuthSessionMissingError"}class Sa extends Mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zo extends Mr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mo extends Mr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A_(r){return Ne(r)&&r.name==="AuthImplicitGrantRedirectError"}class Ty extends Mr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class N_ extends Mr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wh extends Mr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Id(r){return Ne(r)&&r.name==="AuthRetryableFetchError"}class Ay extends Mr{constructor(t,s,l){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class Sh extends Mr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ny=` 	
\r=`.split(""),O_=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<Ny.length;t+=1)r[Ny[t].charCodeAt(0)]=-2;for(let t=0;t<Jo.length;t+=1)r[Jo[t].charCodeAt(0)]=t;return r})();function Oy(r,t,s){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;s(Jo[l]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;s(Jo[l]),t.queuedBits-=6}}function g0(r,t,s){const l=O_[r];if(l>-1)for(t.queue=t.queue<<6|l,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function ky(r){const t=[],s=d=>{t.push(String.fromCodePoint(d))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=d=>{U_(d,l,s)};for(let d=0;d<r.length;d+=1)g0(r.charCodeAt(d),c,u);return t.join("")}function k_(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function D_(r,t){for(let s=0;s<r.length;s+=1){let l=r.charCodeAt(s);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(r.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}k_(l,t)}}function U_(r,t,s){if(t.utf8seq===0){if(r<=127){s(r);return}for(let l=1;l<6;l+=1)if((r>>7-l&1)===0){t.utf8seq=l;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function za(r){const t=[],s={queue:0,queuedBits:0},l=c=>{t.push(c)};for(let c=0;c<r.length;c+=1)g0(r.charCodeAt(c),s,l);return new Uint8Array(t)}function z_(r){const t=[];return D_(r,s=>t.push(s)),new Uint8Array(t)}function ks(r){const t=[],s={queue:0,queuedBits:0},l=c=>{t.push(c)};return r.forEach(c=>Oy(c,s,l)),Oy(null,s,l),t.join("")}function M_(r){return Math.round(Date.now()/1e3)+r}function L_(){return Symbol("auth-callback")}const ln=()=>typeof window<"u"&&typeof document<"u",Es={tested:!1,writable:!1},m0=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function B_(r){const t={},s=new URL(r);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,u)=>{t[u]=c})}catch{}return s.searchParams.forEach((l,c)=>{t[c]=l}),t}const y0=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),I_=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Na=async(r,t,s)=>{await r.setItem(t,JSON.stringify(s))},Rs=async(r,t)=>{const s=await r.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},an=async(r,t)=>{await r.removeItem(t)};class dc{constructor(){this.promise=new dc.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}dc.promiseConstructor=Promise;function qd(r){const t=r.split(".");if(t.length!==3)throw new Sh("Invalid JWT structure");for(let l=0;l<t.length;l++)if(!__.test(t[l]))throw new Sh("JWT not in base64url format");return{header:JSON.parse(ky(t[0])),payload:JSON.parse(ky(t[1])),signature:za(t[2]),raw:{header:t[0],payload:t[1]}}}async function q_(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function $_(r,t){return new Promise((l,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await r(u);if(!t(u,null,d)){l(d);return}}catch(d){if(!t(u,d)){c(d);return}}})()})}function H_(r){return("0"+r.toString(16)).substr(-2)}function P_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let c="";for(let u=0;u<56;u++)c+=s.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(t),Array.from(t,H_).join("")}async function G_(r){const s=new TextEncoder().encode(r),l=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(l);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function V_(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const s=await G_(r);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ja(r,t,s=!1){const l=P_();let c=l;s&&(c+="/PASSWORD_RECOVERY"),await Na(r,`${t}-code-verifier`,c);const u=await V_(l);return[u,l===u?"plain":"s256"]}const Y_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K_(r){const t=r.headers.get(bh);if(!t||!t.match(Y_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function F_(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function Q_(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const X_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _a(r){if(!X_.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $d(){const r={};return new Proxy(r,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J_(r,t){return new Proxy(r,{get:(s,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const u=l.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,c)}return!t.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,l,c)}})}function Dy(r){return JSON.parse(JSON.stringify(r))}const As=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),W_=[502,503,504];async function Uy(r){var t;if(!I_(r))throw new wh(As(r),0);if(W_.includes(r.status))throw new wh(As(r),r.status);let s;try{s=await r.json()}catch(u){throw new Os(As(u),u)}let l;const c=K_(r);if(c&&c.getTime()>=p0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Ay(As(s),r.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(l==="session_not_found")throw new zn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Ay(As(s),r.status,s.weak_password.reasons);throw new E_(As(s),r.status||500,l)}const Z_=(r,t,s,l)=>{const c={method:r,headers:t?.headers||{}};return r==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),s))};async function Me(r,t,s,l){var c;const u=Object.assign({},l?.headers);u[bh]||(u[bh]=p0["2024-01-01"].name),l?.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const d=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(d.redirect_to=l.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await eC(r,t,s+f,{headers:u,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(p):{data:Object.assign({},p),error:null}}async function eC(r,t,s,l,c,u){const d=Z_(t,l,c,u);let f;try{f=await r(s,Object.assign({},d))}catch(p){throw console.error(p),new wh(As(p),0)}if(f.ok||await Uy(f),l?.noResolveJson)return f;try{return await f.json()}catch(p){await Uy(p)}}function tr(r){var t;let s=null;rC(r)&&(s=Object.assign({},r),r.expires_at||(s.expires_at=M_(r.expires_in)));const l=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:s,user:l},error:null}}function zy(r){const t=tr(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(t.data.weak_password=r.weak_password),t}function os(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function tC(r){return{data:r,error:null}}function nC(r){const{action_link:t,email_otp:s,hashed_token:l,redirect_to:c,verification_type:u}=r,d=cc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:l,redirect_to:c,verification_type:u},p=Object.assign({},d);return{data:{properties:f,user:p},error:null}}function My(r){return r}function rC(r){return r.access_token&&r.refresh_token&&r.expires_in}const Hd=["global","local","others"];class sC{constructor({url:t="",headers:s={},fetch:l}){this.url=t,this.headers=s,this.fetch=y0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Hd[0]){if(Hd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hd.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ne(l))return{data:null,error:l};throw l}}async inviteUserByEmail(t,s={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:os})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async generateLink(t){try{const{options:s}=t,l=cc(t,["options"]),c=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:nC,redirectTo:s?.redirectTo})}catch(s){if(Ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:os})}catch(s){if(Ne(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,l,c,u,d,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:My});if(y.error)throw y.error;const v=await y.json(),b=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(_.split(";")[1].split("=")[1]);m[`${O}Page`]=j}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Ne(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){_a(t);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:os})}catch(s){if(Ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){_a(t);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:os})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async deleteUser(t,s=!1){_a(t);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:os})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async _listFactors(t){_a(t.userId);try{const{data:s,error:l}=await Me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:l}}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _deleteFactor(t){_a(t.userId),_a(t.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,l,c,u,d,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:My});if(y.error)throw y.error;const v=await y.json(),b=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(_.split(";")[1].split("=")[1]);m[`${O}Page`]=j}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Ne(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ne(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(t){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}}function Ly(r={}){return{getItem:t=>r[t]||null,setItem:(t,s)=>{r[t]=s},removeItem:t=>{delete r[t]}}}const Ca={debug:!!(globalThis&&m0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class v0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aC extends v0{}async function iC(r,t,s){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const l=new globalThis.AbortController;return t>0&&setTimeout(()=>{l.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,c.name);try{return await s()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,c.name)}}else{if(t===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new aC(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ca.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function lC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function x0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function oC(r){return parseInt(r,16)}function cC(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,l=>l.toString(16).padStart(2,"0")).join("")}function uC(r){var t;const{chainId:s,domain:l,expirationTime:c,issuedAt:u=new Date,nonce:d,notBefore:f,requestId:p,resources:m,scheme:y,uri:v,version:b}=r;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=x0(r.address),_=y?`${y}://${l}`:l,j=r.statement?`${r.statement}
`:"",O=`${_} wants you to sign in with your Ethereum account:
${S}

${j}`;let D=`URI: ${v}
Version: ${b}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(c&&(D+=`
Expiration Time: ${c.toISOString()}`),f&&(D+=`
Not Before: ${f.toISOString()}`),p&&(D+=`
Request ID: ${p}`),m){let N=`
Resources:`;for(const z of m){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);N+=`
- ${z}`}D+=N}return`${O}
${D}`}class Gt extends Error{constructor({message:t,code:s,cause:l,name:c}){var u;super(t,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=c??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class Wo extends Gt{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function dC({error:r,options:t}){var s,l,c;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Gt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const d=window.location.hostname;if(b0(d)){if(u.rp.id!==d)return new Gt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function hC({error:r,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Gt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const l=window.location.hostname;if(b0(l)){if(s.rpId!==l)return new Gt({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class fC{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const pC=new fC;function gC(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:s,excludeCredentials:l}=r,c=cc(r,["challenge","user","excludeCredentials"]),u=za(t).buffer,d=Object.assign(Object.assign({},s),{id:za(s.id).buffer}),f=Object.assign(Object.assign({},c),{challenge:u,user:d});if(l&&l.length>0){f.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const m=l[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:za(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function mC(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:s}=r,l=cc(r,["challenge","allowCredentials"]),c=za(t).buffer,u=Object.assign(Object.assign({},l),{challenge:c});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];u.allowCredentials[d]=Object.assign(Object.assign({},f),{id:za(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function yC(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r;return{id:r.id,rawId:r.id,response:{attestationObject:ks(new Uint8Array(r.response.attestationObject)),clientDataJSON:ks(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function vC(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r,l=r.getClientExtensionResults(),c=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ks(new Uint8Array(c.authenticatorData)),clientDataJSON:ks(new Uint8Array(c.clientDataJSON)),signature:ks(new Uint8Array(c.signature)),userHandle:c.userHandle?ks(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function b0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function By(){var r,t;return!!(ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function xC(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:dC({error:t,options:r})}}}async function bC(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:hC({error:t,options:r})}}}const wC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},SC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zo(...r){const t=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of r)if(c)for(const u in c){const d=c[u];if(d!==void 0)if(Array.isArray(d))l[u]=d;else if(s(d))l[u]=d;else if(t(d)){const f=l[u];t(f)?l[u]=Zo(f,d):l[u]=Zo(d)}else l[u]=d}return l}function jC(r,t){return Zo(wC,r,t||{})}function _C(r,t){return Zo(SC,r,t||{})}class CC{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:l,signal:c},u){try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!d)return{data:null,error:f};const p=c??pC.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:m}=d.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${l}`),m.displayName||(m.displayName=m.name)}switch(d.webauthn.type){case"create":{const m=jC(d.webauthn.credential_options.publicKey,u?.create),{data:y,error:v}=await xC({publicKey:m,signal:p});return y?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const m=_C(d.webauthn.credential_options.publicKey,u?.request),{data:y,error:v}=await bC(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:m,signal:p}));return y?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(d){return Ne(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:l})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Wi("rpId is required for WebAuthn authentication")};try{if(!By())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:l},signal:c},{request:u});if(!d)return{data:null,error:f};const{webauthn:p}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:l,credential_response:p.credential_response}})}catch(d){return Ne(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!s)return{data:null,error:new Wi("rpId is required for WebAuthn registration")};try{if(!By())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:c},{create:u});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(d){return Ne(d)?{data:null,error:d}:{data:null,error:new Os("Unexpected error in register",d)}}}}lC();const EC={url:w_,storageKey:S_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Iy(r,t,s){return await s()}const Ea={};class Zi{get jwks(){var t,s;return(s=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:t})}constructor(t){var s,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},EC),t);if(this.storageKey=u.storageKey,this.instanceID=(s=Zi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Zi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&ln()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new sC({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=y0(u.fetch),this.lock=u.lock||Iy,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&ln()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=iC:this.lock=Iy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new CC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:m0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ly(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Ly(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${f0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},l="none";if(ln()&&(s=B_(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),ln()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:u}=await this._getSessionFromURL(s,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),A_(u)){const p=(t=u.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:f}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ne(s)?this._returnResult({error:s}):this._returnResult({error:new Os("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,l,c;try{const u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=t?.options)===null||c===void 0?void 0:c.captchaToken}},xform:tr}),{data:d,error:f}=u;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(Ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var s,l,c;try{let u;if("email"in t){const{email:y,password:v,options:b}=t;let S=null,_=null;this.flowType==="pkce"&&([S,_]=await ja(this.storage,this.storageKey)),u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:y,password:v,data:(s=b?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:_},xform:tr})}else if("phone"in t){const{phone:y,password:v,options:b}=t;u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(l=b?.data)!==null&&l!==void 0?l:{},channel:(c=b?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:tr})}else throw new zo("You must provide either an email or phone number and a password");const{data:d,error:f}=u;if(f||!d)return await an(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let s;if("email"in t){const{email:u,password:d,options:f}=t;s=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:zy})}else if("phone"in t){const{phone:u,password:d,options:f}=t;s=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:zy})}else throw new zo("You must provide either an email or phone number and a password");const{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Sa;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(s){if(Ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,l,c,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,l,c,u,d,f,p,m,y,v,b;let S,_;if("message"in t)S=t.message,_=t.signature;else{const{chain:j,wallet:O,statement:D,options:N}=t;let z;if(ln())if(typeof O=="object")z=O;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")z=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=O}const q=new URL((s=N?.url)!==null&&s!==void 0?s:window.location.href),U=await z.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=x0(U[0]);let B=(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!B){const $=await z.request({method:"eth_chainId"});B=oC($)}const I={domain:q.host,address:C,statement:D,uri:q.href,version:"1",chainId:B,nonce:(c=N?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(d=(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=N?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=N?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=N?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=uC(I),_=await z.request({method:"personal_sign",params:[cC(S),C]})}try{const{data:j,error:O}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:_},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:tr});if(O)throw O;if(!j||!j.session||!j.user){const D=new Sa;return this._returnResult({data:{user:null,session:null},error:D})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:O})}catch(j){if(Ne(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(t){var s,l,c,u,d,f,p,m,y,v,b,S;let _,j;if("message"in t)_=t.message,j=t.signature;else{const{chain:O,wallet:D,statement:N,options:z}=t;let q;if(ln())if(typeof D=="object")q=D;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))q=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const U=new URL((s=z?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const C=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),N?{statement:N}:null));let B;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")B=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)B=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)_=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),j=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${U.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(c=(l=z?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=z?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((d=z?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((f=z?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((p=z?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((m=z?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((v=(y=z?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...z.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const C=await q.signMessage(new TextEncoder().encode(_),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=C}}try{const{data:O,error:D}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ks(j)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:tr});if(D)throw D;if(!O||!O.session||!O.user){const N=new Sa;return this._returnResult({data:{user:null,session:null},error:N})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:D})}catch(O){if(Ne(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(t){const s=await Rs(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(s??"").split("/");try{if(!l&&this.flowType==="pkce")throw new N_;const{data:u,error:d}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:l},xform:tr});if(await an(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const f=new Sa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:d})}catch(u){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:tr}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const y=new Sa;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(s){if(Ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,l,c,u,d;try{if("email"in t){const{email:f,options:p}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await ja(this.storage,this.storageKey));const{error:v}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:f,options:p}=t,{data:m,error:y}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:y})}throw new zo("You must provide either an email or phone number.")}catch(f){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var s,l;try{let c,u;"options"in t&&(c=(s=t.options)===null||s===void 0?void 0:s.redirectTo,u=(l=t.options)===null||l===void 0?void 0:l.captchaToken);const{data:d,error:f}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:tr});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,m=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(Ne(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(t){var s,l,c,u,d;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await ja(this.storage,this.storageKey));const m=await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(l=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=t?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:tC});return!((u=m.data)===null||u===void 0)&&u.url&&ln()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:l}=t;if(l)throw l;if(!s)throw new zn;const{error:c}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(t){if(Ne(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:l,type:c,options:u}=t,{error:d}=await Me(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:l,type:c,options:u}=t,{data:d,error:f}=await Me(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new zo("You must provide either an email or phone number and a type")}catch(s){if(Ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const l=t.expires_at?t.expires_at*1e3-Date.now()<Bd:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",t.expires_at),!l){if(this.userStorage){const d=await Rs(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=$d()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=J_(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:os}):await this._useSession(async s=>{var l,c,u;const{data:d,error:f}=s;if(f)throw f;return!(!((l=d.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zn}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:os})})}catch(s){if(Ne(s))return T_(s)&&(await this._removeSession(),await an(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async l=>{const{data:c,error:u}=l;if(u)throw u;if(!c.session)throw new zn;const d=c.session;let f=null,p=null;this.flowType==="pkce"&&t.email!=null&&([f,p]=await ja(this.storage,this.storageKey));const{data:m,error:y}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:p}),jwt:d.access_token,xform:os});if(y)throw y;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(l){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zn;const s=Date.now()/1e3;let l=s,c=!0,u=null;const{payload:d}=qd(t.access_token);if(d.exp&&(l=d.exp,c=l<=s),c){const{data:f,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:p}=await this._getUser(t.access_token);if(p)throw p;u={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(Ne(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var l;if(!t){const{data:d,error:f}=s;if(f)throw f;t=(l=d.session)!==null&&l!==void 0?l:void 0}if(!t?.refresh_token)throw new zn;const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!ln())throw new Mo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ty("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ty("No code detected.");const{data:N,error:z}=await this._exchangeCodeForSession(t.code);if(z)throw z;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:u,refresh_token:d,expires_in:f,expires_at:p,token_type:m}=t;if(!u||!f||!d||!m)throw new Mo("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(f);let b=y+v;p&&(b=parseInt(p));const S=b-y;S*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const _=b-v;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,b,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,b,y);const{data:j,error:O}=await this._getUser(u);if(O)throw O;const D={provider_token:l,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:b,refresh_token:d,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(l){if(Ne(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Rs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({error:u});const d=(l=c.session)===null||l===void 0?void 0:l.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(R_(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await an(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=L_(),l={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(t){return await this._useSession(async s=>{var l,c;try{const{data:{session:u},error:d}=s;if(d)throw d;await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,s={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ja(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:l,error:c}=await this._useSession(async u=>{var d,f,p,m,y;const{data:v,error:b}=u;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(c)throw c;return ln()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:t.provider,url:l?.url},error:null})}catch(l){if(Ne(l))return this._returnResult({data:{provider:t.provider,url:null},error:l});throw l}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var l;try{const{error:c,data:{session:u}}=s;if(c)throw c;const{options:d,provider:f,token:p,access_token:m,nonce:y}=t,v=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:f,id_token:p,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:tr}),{data:b,error:S}=v;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Sa}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(c){if(await an(this.storage,`${this.storageKey}-code-verifier`),Ne(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var l,c;const{data:u,error:d}=s;if(d)throw d;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await $_(async c=>(c>0&&await q_(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tr})),(c,u)=>{const d=200*Math.pow(2,c);return u&&Id(u)&&Date.now()+d-l<Aa})}catch(l){if(this._debug(s,"error",l),Ne(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",l),ln()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:t,url:l},error:null}}async _recoverAndRefresh(){var t,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await Rs(this.storage,this.storageKey);if(c&&this.userStorage){let d=await Rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:c.user},await Na(this.userStorage,this.storageKey+"-user",d)),c.user=(t=d?.user)!==null&&t!==void 0?t:$d()}else if(c&&!c.user&&!c.user){const d=await Rs(this.storage,this.storageKey+"-user");d&&d?.user?(c.user=d.user,await an(this.storage,this.storageKey+"-user"),await Na(this.storage,this.storageKey,c)):c.user=$d()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const u=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Bd;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Bd}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:d}=await this._callRefreshToken(c.refresh_token);d&&(console.error(d),Id(d)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(c.access_token);!f&&d?.user?(c.user=d.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(l,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(t){var s,l;if(!t)throw new zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new dc;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new zn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={data:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(c,"error",u),Ne(u)){const d={data:null,error:u};return Id(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(t,s,l=!0){const c=`#_notifyAllSubscribers(${t})`;this._debug(c,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:t,session:s});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await an(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await Na(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const u=Dy(c);await Na(this.storage,this.storageKey,u)}else{const c=Dy(s);await Na(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await an(this.storage,this.storageKey),await an(this.storage,this.storageKey+"-code-verifier"),await an(this.storage,this.storageKey+"-user"),this.userStorage&&await an(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ln()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-t)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Aa}ms, refresh threshold is ${xh} ticks`),c<=xh&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof v0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,l){const c=[`provider=${encodeURIComponent(s)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,d]=await ja(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(f.toString())}if(l?.queryParams){const u=new URLSearchParams(l.queryParams);c.push(u.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${t}?${c.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;return u?this._returnResult({data:null,error:u}):await Me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var l,c;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:m}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?yC(t.webauthn.credential_response):vC(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:p}=await Me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:c,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=await Me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:gC(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:mC(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:l}=await this._challenge({factorId:t.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=s?.factors)!==null&&t!==void 0?t:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=qd(l.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((s=(t=l.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const m=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;return c?this._returnResult({data:null,error:c}):l?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new zn})})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new zn});const d=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&ln()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(l){if(Ne(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(t,s){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new zn});const d=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&ln()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(l){if(Ne(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:l}=t;return l?this._returnResult({data:null,error:l}):s?await Me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new zn})})}catch(t){if(Ne(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;return c?this._returnResult({data:null,error:c}):l?(await Me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new zn})})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let l=s.keys.find(f=>f.kid===t);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(f=>f.kid===t),l&&this.jwks_cached_at+C_>c)return l;const{data:u,error:d}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,l=u.keys.find(f=>f.kid===t),!l)?null:l}async getClaims(t,s={}){try{let l=t;if(!l){const{data:S,error:_}=await this.getSession();if(_||!S.session)return this._returnResult({data:null,error:_});l=S.session.access_token}const{header:c,payload:u,signature:d,raw:{header:f,payload:p}}=qd(l);s?.allowExpired||F_(u.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!m){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:u,header:c,signature:d},error:null}}const y=Q_(c.alg),v=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,d,z_(`${f}.${p}`)))throw new Sh("Invalid JWT signature");return{data:{claims:u,header:c,signature:d},error:null}}catch(l){if(Ne(l))return this._returnResult({data:null,error:l});throw l}}}Zi.nextInstanceID={};const RC=Zi,TC="2.89.0";let Li="";typeof Deno<"u"?Li="deno":typeof document<"u"?Li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Li="react-native":Li="node";const AC={"X-Client-Info":`supabase-js-${Li}/${TC}`},NC={headers:AC},OC={schema:"public"},kC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DC={};function el(r){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(r)}function UC(r,t){if(el(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var l=s.call(r,t);if(el(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function zC(r){var t=UC(r,"string");return el(t)=="symbol"?t:t+""}function MC(r,t,s){return(t=zC(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function qy(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,l)}return s}function At(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?qy(Object(s),!0).forEach(function(l){MC(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):qy(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}const LC=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),BC=()=>Headers,IC=(r,t,s)=>{const l=LC(s),c=BC();return async(u,d)=>{var f;const p=(f=await t())!==null&&f!==void 0?f:r;let m=new c(d?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),l(u,At(At({},d),{},{headers:m}))}};function qC(r){return r.endsWith("/")?r:r+"/"}function $C(r,t){var s,l;const{db:c,auth:u,realtime:d,global:f}=r,{db:p,auth:m,realtime:y,global:v}=t,b={db:At(At({},p),c),auth:At(At({},m),u),realtime:At(At({},y),d),storage:{},global:At(At(At({},v),f),{},{headers:At(At({},(s=v?.headers)!==null&&s!==void 0?s:{}),(l=f?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function HC(r){const t=r?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var PC=class extends RC{constructor(r){super(r)}},GC=class{constructor(r,t,s){var l,c;this.supabaseUrl=r,this.supabaseKey=t;const u=HC(r);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:OC,realtime:DC,auth:At(At({},kC),{},{storageKey:d}),global:NC},p=$C(s??{},f);if(this.storageKey=(l=p.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=IC(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(At({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new j1(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new b_(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new v1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,t,s)}channel(r,t={config:{}}){return this.realtime.channel(r,t)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,t,s;if(r.accessToken)return await r.accessToken();const{data:l}=await r.auth.getSession();return(t=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:t,detectSessionInUrl:s,storage:l,userStorage:c,storageKey:u,flowType:d,lock:f,debug:p,throwOnError:m},y,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PC({url:this.authUrl.href,headers:At(At({},b),y),storageKey:u,autoRefreshToken:r,persistSession:t,detectSessionInUrl:s,storage:l,userStorage:c,flowType:d,lock:f,debug:p,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new q1(this.realtimeUrl.href,At(At({},r),{},{params:At(At({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t?.access_token)})}_handleTokenChanged(r,t,s){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const VC=(r,t,s)=>new GC(r,t,s);function YC(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}YC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pd={BASE_URL:"/app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Gd={};const w0=r=>typeof import.meta<"u"&&Pd&&Pd[r]?Pd[r]:typeof process<"u"&&process&&Gd&&Gd[r]?Gd[r]:null,KC=w0("VITE_SUPABASE_URL")||"https://hocbnifuactbvmyjraxy.supabase.co",FC=w0("VITE_SUPABASE_ANON_KEY")||"sb_publishable_CmEv4H4dXwtqm65i_jpsCQ_8BtDOucx",ve=VC(KC,FC),QC={async translateRecipe(r,t="EN-US"){const s=[];s.push(r.title||""),s.push(r.description||"");let l=2,c=2;if(r.type==="bread"){const d=r.flours||[],f=r.breadIngredients||[];d.forEach(p=>s.push(p.name||"")),f.forEach(p=>s.push(p.name||"")),c=l+d.length+f.length}else{const d=r.ingredients||[];d.forEach(f=>{const p=typeof f=="string"?f:f.name||"";s.push(p)}),c=l+d.length}const u=r.steps||[];if(u.forEach(d=>{const f=typeof d=="object"&&d!==null?d.text||"":d||"";s.push(f)}),s.length===0)return r;try{const d=await this.translateList(s,t),f={...r};if(f.title=d[0],f.description=d[1],r.type==="bread"){const p=(r.flours||[]).length,m=(r.breadIngredients||[]).length;f.flours=(r.flours||[]).map((y,v)=>({...y,name:d[l+v]})),f.breadIngredients=(r.breadIngredients||[]).map((y,v)=>({...y,name:d[l+p+v]}))}else f.ingredients=(r.ingredients||[]).map((p,m)=>{const y=d[l+m];return typeof p=="string"?y:{...p,name:y}});return f.steps=u.map((p,m)=>{const y=d[c+m];return typeof p=="object"&&p!==null?{...p,text:y}:y}),f}catch(d){throw console.error("Translation failed:",d),d}},async translateList(r,t){const{data:s,error:l}=await ve.functions.invoke("translate",{body:{text:r,target_lang:t}});if(l)throw console.error("Supabase Function Invocation Error:",l),new Error(`Translation Error: ${l.message}`);if(s&&s.error)throw console.error("Edge Function returned error:",s.error),new Error(`Translation Error: ${s.error}`);return s.translations.map(c=>c.text)}},$y=async(r,t,s)=>{let l=null;try{const c=new Promise((u,d)=>{l=setTimeout(()=>d(new Error(`${s||"operation"} timed out after ${t}ms`)),t)});return await Promise.race([r,c])}finally{l&&clearTimeout(l)}},Pt={_queryPattern:null,_queryPatternCache:new Map,async fetchRecipes(r,{timeoutMs:t=15e3}={}){let s=[];const l=async(j,{withOrderIndex:O})=>{let D=ve.from("recipes").select(j);O?D=D.order("order_index",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1}):D=D.order("created_at",{ascending:!1});const{data:N,error:z}=await $y(D,t/4,"recipes.select(list)");if(z)throw z;return(N||[]).map(nr)},c="id,title,description,image,servings,course,category,store_name,ingredients_meta:ingredients->0,tags,created_at,updated_at,order_index,recipe_sources(url)",u="id,title,description,image,servings,ingredients,tags,created_at,updated_at,recipe_sources(url)",d="id,title,description,image,servings,ingredients,tags,created_at,updated_at",f="id,title,description,image,servings,ingredients,tags,created_at";let p=null;const m="recipe_query_pattern",y=this._queryPatternCache.get(m);if(y)try{s=await l(y.spec,{withOrderIndex:y.withOrderIndex})}catch(j){console.warn("Cached query pattern failed, re-detecting...",j),this._queryPatternCache.delete(m),p=j}else try{s=await l(c,{withOrderIndex:!0}),this._queryPatternCache.set(m,{spec:c,withOrderIndex:!0})}catch(j){p=j;try{s=await l(u,{withOrderIndex:!1}),this._queryPatternCache.set(m,{spec:u,withOrderIndex:!1})}catch(O){p=O;try{s=await l(d,{withOrderIndex:!1}),this._queryPatternCache.set(m,{spec:d,withOrderIndex:!1})}catch(D){p=D;try{s=await l(f,{withOrderIndex:!1}),this._queryPatternCache.set(m,{spec:f,withOrderIndex:!1})}catch(N){p=N,s=[]}}}}if(s.length===0&&p)try{const j=localStorage.getItem("local_recipes");if(j)s=JSON.parse(j).map(O=>typeof nr=="function"?nr(O):O);else throw p}catch{throw p}if(!r)return console.warn("fetchRecipes: No currentUser, returning empty list."),[];const v=r.showMasterRecipes===!0,b=r.role==="admin",S=[String(r.id)];return r.displayId&&S.push(String(r.displayId)),s.filter(j=>{if(b)return!0;const O=j.tags||[],D=O.find(U=>U&&U.startsWith("owner:"));if(!D)return!0;const N=!!D&&S.some(U=>D===`owner:${U}`),z=O.includes("public"),q=D==="owner:yoshito";return!!(N||z||q&&v)})},_filterRecipesInApp(r,t){return this.fetchRecipes(t)},async uploadImage(r){const t=r.name.split(".").pop(),l=`${`${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`}`,{error:c}=await ve.storage.from("recipe-images").upload(l,r);if(c)throw c;const{data:u}=ve.storage.from("recipe-images").getPublicUrl(l);return u.publicUrl},async getRecipe(r){try{const{data:t,error:s}=await $y(ve.from("recipes").select("*, recipe_sources(url)").eq("id",r).single(),15e3,"recipes.select(detail)");if(s)throw s;return nr(t)}catch(t){console.warn("Supabase getRecipe failed, falling back to LocalStorage:",t);const s=localStorage.getItem("local_recipes");if(s){const c=JSON.parse(s).find(u=>u.id==r);if(c)return nr(c)}throw t}},async createRecipe(r,t){console.log("createRecipe called with user:",t);const{id:s,created_at:l,sourceUrl:c,...u}=r;if(u.image instanceof File&&(u.image=await this.uploadImage(u.image)),t){const p=(u.tags||[]).filter(m=>!m.startsWith("owner:"));u.tags=[...p,`owner:${t.id}`],console.log("Added owner tag. New tags:",u.tags)}else console.warn("createRecipe: No currentUser provided! Recipe will be public.");const d=Lo(u);try{const{data:f,error:p}=await ve.from("recipes").insert([d]).select().single();if(p)throw p;if(c){const{error:m}=await ve.from("recipe_sources").insert([{recipe_id:f.id,url:c}]);m&&console.error("Failed to save source URL:",m)}return nr({...f,recipe_sources:c?[{url:c}]:[]})}catch(f){console.warn("Supabase create failed, using LocalStorage fallback:",f);const p=Date.now(),m={...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),tags:u.tags||[]},y=Lo(m);y.id=p,y.created_at=m.created_at,console.log("Saving to LocalStorage:",y);try{const v=localStorage.getItem("local_recipes"),b=v?JSON.parse(v):[];b.push(y),localStorage.setItem("local_recipes",JSON.stringify(b)),console.log("Saved to LocalStorage success. Total recipes:",b.length)}catch(v){throw console.error("Failed to save to LocalStorage:",v),f}return nr(y)}},async updateRecipe(r){const{id:t,created_at:s,sourceUrl:l,...c}=r;c.image instanceof File&&(c.image=await this.uploadImage(c.image));const u=Lo(c);try{const{data:d,error:f}=await ve.from("recipes").update(u).eq("id",r.id).select().single();if(f)throw f;if(l!==void 0&&(await ve.from("recipe_sources").delete().eq("recipe_id",r.id),l)){const{error:p}=await ve.from("recipe_sources").insert([{recipe_id:r.id,url:l}]);p&&console.error("Failed to update source URL:",p)}return nr({...d,recipe_sources:l?[{url:l}]:[]})}catch(d){console.warn("Supabase update failed, using LocalStorage fallback:",d);const f=localStorage.getItem("local_recipes");if(f){let p=JSON.parse(f);const m=p.findIndex(y=>y.id==r.id);if(m!==-1){const y={...p[m],...u,updated_at:new Date().toISOString()};return p[m]=y,localStorage.setItem("local_recipes",JSON.stringify(p)),nr(y)}}throw d}},async duplicateRecipe(r,t){const{id:s,created_at:l,updated_at:c,image:u,...d}=r;d.title=`${d.title} ()`;let f=null;if(u)try{const p=u.split("/").pop(),m=`copy-${Date.now()}-${p}`,{error:y}=await ve.storage.from("recipe-images").copy(p,m);if(y)console.warn("Image copy failed, using original URL:",y),f=u;else{const{data:v}=ve.storage.from("recipe-images").getPublicUrl(m);f=v.publicUrl}}catch(p){console.warn("Image copy logic error:",p),f=u}return d.image=f,await this.createRecipe(d,t)},async fetchDeletedRecipes(){const{data:r,error:t}=await ve.from("deleted_recipes").select("*").order("deleted_at",{ascending:!1});if(t)throw t;return r.map(XC)},async getDeletedCount(){const{count:r,error:t}=await ve.from("deleted_recipes").select("*",{count:"exact",head:!0});if(t)throw t;return r},async deleteRecipe(r){try{const{data:t,error:s}=await ve.from("recipes").select("*").eq("id",r).single();if(s)throw s;const{error:l}=await ve.from("deleted_recipes").insert([{original_id:t.id,title:t.title,description:t.description,image:t.image,prep_time:t.prep_time,cook_time:t.cook_time,servings:t.servings,tags:t.tags,ingredients:t.ingredients,steps:t.steps,created_at:t.created_at}]);if(l)throw l;const{error:c}=await ve.from("recipes").delete().eq("id",r);if(c)throw c;return!0}catch(t){console.warn("Supabase delete failed, using LocalStorage fallback:",t);const s=localStorage.getItem("local_recipes");if(s){let l=JSON.parse(s);const c=l.length;if(l=l.filter(u=>u.id!=r),l.length<c)return localStorage.setItem("local_recipes",JSON.stringify(l)),!0}throw t}},async restoreRecipe(r){const{data:t,error:s}=await ve.from("deleted_recipes").select("*").eq("id",r).single();if(s)throw s;const{error:l}=await ve.from("recipes").insert([{title:t.title,description:t.description,image:t.image,prep_time:t.prep_time,cook_time:t.cook_time,servings:t.servings,tags:t.tags,ingredients:t.ingredients,steps:t.steps,created_at:t.created_at}]);if(l)throw l;const{error:c}=await ve.from("deleted_recipes").delete().eq("id",r);if(c)throw c;return!0},async hardDeleteRecipe(r){const{error:t}=await ve.from("deleted_recipes").delete().eq("id",r);if(t)throw t;return!0},async fetchRecentRecipes(){const{data:r,error:t}=await ve.from("recent_views").select("recipe_id").order("viewed_at",{ascending:!1}).limit(20);if(t)throw t;return r.map(s=>s.recipe_id)},async addToHistory(r){const{error:t}=await ve.from("recent_views").upsert({recipe_id:r,viewed_at:new Date().toISOString()},{onConflict:"recipe_id"});if(t)throw t;return!0},async updateOrder(r){const t=r.map(s=>ve.from("recipes").update({order_index:s.order_index}).eq("id",s.id));await Promise.all(t)},async exportAllRecipes(){return await this.fetchRecipes()},async importRecipes(r){if(!Array.isArray(r))throw new Error("Invalid backup format");let t=0,s=[];for(const l of r)try{await this.createRecipe(l),t++}catch(c){console.error("Import failed for recipe:",l.title,c),s.push({title:l.title,error:c.message})}return{success:!0,count:t,errors:s}},async updateRecipeCosts(r){const{data:t,error:s}=await ve.from("recipes").select("*");if(s)throw s;let l=0;const c=[];for(const u of t){const d=nr(u);let f=!1;const p=m=>m.map(y=>{if(!y.name)return y;const v=r.get(y.name);if(v&&y.purchaseCost!==v.price){f=!0;const b={...y,purchaseCost:v.price};if(d.type==="bread"){const S=parseFloat(b.quantity)||0;b.cost=Math.round(S/1e3*b.purchaseCost)}else if(y.cost&&y.purchaseCost){const S=y.cost/y.purchaseCost;b.cost=Math.round(b.purchaseCost*S)}return b}return y});if(d.type==="bread"){const m=p(d.flours||[]),y=p(d.breadIngredients||[]);f&&(d.flours=m,d.breadIngredients=y)}else{const m=p(d.ingredients||[]);f&&(d.ingredients=m)}if(f){const m=Lo(d);c.push(ve.from("recipes").update(m).eq("id",d.id)),l++}}return c.length>0&&await Promise.all(c),l}},Lo=r=>{let t=r.ingredients||[];const s={_meta:!0,type:r.type||"normal"};if(r.ingredientGroups&&r.ingredientGroups.length>0&&(s.groups=r.ingredientGroups),r.stepGroups&&r.stepGroups.length>0){const c=r.steps||[],u=r.stepGroups.map(d=>({...d,count:c.filter(f=>f.groupId===d.id).length}));s.stepGroups=u}if(r.type==="bread"){const c=(r.flours||[]).map(d=>({...d,_group:"flour"})),u=(r.breadIngredients||[]).map(d=>({...d,_group:"other"}));t=[s,...c,...u]}else t=[s,...t];const l=(r.steps||[]).map(c=>typeof c=="string"?c:c.text);return{title:r.title,description:r.description,image:r.image,servings:r.servings,course:r.course,category:r.category,store_name:r.storeName,ingredients:t,steps:l,tags:r.tags||[]}},nr=r=>{const t=r.ingredients||[];let s="normal",l=[],c=[],u=[],d=[],f=t;if(r.ingredients_meta)s=r.ingredients_meta.type||"normal",f=[];else if(Array.isArray(t)&&t.length>0&&t[0]._meta){const m=t[0];s=m.type||"normal",m.groups&&(u=m.groups),m.stepGroups&&(d=m.stepGroups);const y=t.slice(1);s==="bread"?(l=y.filter(v=>v._group==="flour").map(({_group:v,...b})=>b),c=y.filter(v=>v._group==="other").map(({_group:v,...b})=>b),f=[...l,...c]):f=y}let p=r.steps||[];if(d.length>0&&Array.isArray(p)){let m=0;p=p.map(v=>({text:v}));const y=[];for(d.forEach(v=>{const b=v.count||0;for(let S=0;S<b;S++)m<p.length&&(y.push({...p[m],text:p[m].text,groupId:v.id}),m++)});m<p.length;)y.push({...p[m],groupId:"default"}),m++;p=y}return{...r,prepTime:r.prep_time,cookTime:r.cook_time,storeName:r.store_name,type:s,flours:l,breadIngredients:c,ingredientGroups:u,stepGroups:d,ingredients:f,steps:p.length>0&&typeof p[0]=="object"?p:r.steps,sourceUrl:r.recipe_sources&&r.recipe_sources.length>0?r.recipe_sources[0].url:""}},XC=r=>({...nr(r),deletedAt:r.deleted_at,originalId:r.original_id}),Vd=Object.freeze(Object.defineProperty({__proto__:null,recipeService:Pt},Symbol.toStringTag,{value:"Module"})),S0=w.createContext(null),Di=async(r,t,s)=>{let l=null;try{const c=new Promise((u,d)=>{l=setTimeout(()=>d(new Error(`${s||"operation"} timed out after ${t}ms`)),t)});return await Promise.race([r,c])}finally{l&&clearTimeout(l)}},Hy=r=>{if(!r)return"";const t=r.indexOf("@");return t>0?r.slice(0,t):r},JC=({children:r})=>{const[t,s]=w.useState(null),[l,c]=w.useState(!0),[u,d]=w.useState(!1),f=w.useCallback(async j=>{if(!j){s(null);return}const O=j.id,D=j.email||"";let N=null;try{let B=null,I=null;const[$,Y]=await Promise.all([Di(ve.from("profiles").select("id, display_id, role, show_master_recipes, email").eq("id",O).single(),4e3,"profiles.select(with_email)").catch(T=>null),Di(ve.from("profiles").select("id, display_id, role, show_master_recipes").eq("id",O).single(),4e3,"profiles.select").catch(T=>null)]);if($?.data?(B=$.data,I=null):Y?.data?(B=Y.data,I=null):I=$?.error??Y?.error??new Error("Profile fetch failed"),I)if(I.code==="PGRST116"){const T=j.user_metadata&&j.user_metadata.display_id?String(j.user_metadata.display_id):Hy(D)||O.slice(0,8);let A=null,P=null;const L=await Di(ve.from("profiles").insert([{id:O,display_id:T,email:D||null,role:"user",show_master_recipes:!1}]).select("id, display_id, role, show_master_recipes, email").single(),8e3,"profiles.insert(with_email)");if(A=L?.data??null,P=L?.error??null,P&&String(P.message||"").toLowerCase().includes("email")){const K=await Di(ve.from("profiles").insert([{id:O,display_id:T,role:"user",show_master_recipes:!1}]).select("id, display_id, role, show_master_recipes").single(),8e3,"profiles.insert");A=K?.data??null,P=K?.error??null}if(P)throw P;N=A}else throw I;else N=B;if(N&&Object.prototype.hasOwnProperty.call(N,"email")&&D&&!N.email)try{await ve.from("profiles").update({email:D}).eq("id",O)}catch(T){console.warn("Failed to backfill profile email",T)}}catch(B){console.error("Failed to load/create profile:",B)}const z=N?.display_id||Hy(D)||O.slice(0,8),q=N?.role||"user",U=String(q).trim().toLowerCase(),C=N?.show_master_recipes===!0;s({id:O,email:D,displayId:z,role:U,showMasterRecipes:C})},[]);w.useEffect(()=>{let j=null;typeof window<"u"&&window.location.hash&&window.location.hash.includes("type=recovery")&&d(!0);const{data:O}=ve.auth.onAuthStateChange(async(N,z)=>{N==="PASSWORD_RECOVERY"&&d(!0);try{await f(z?.user||null)}catch(q){console.error("Auth state change handler failed:",q)}});return j=O?.subscription,(async()=>{try{const{data:N}=await Di(ve.auth.getSession(),8e3,"auth.getSession");await f(N?.session?.user||null)}catch(N){console.error("Auth init failed:",N)}finally{c(!1)}})(),()=>{try{j?.unsubscribe?.()}catch{}}},[f]);const p=w.useCallback(async(j,O)=>{const{error:D}=await ve.auth.signInWithPassword({email:j,password:O});if(D)throw console.error("Login error:",D),new Error("")},[]),m=w.useCallback(async(j,O,D)=>{const{data:N,error:z}=await ve.auth.signUp({email:j,password:O,options:{data:{display_id:D}}});if(z)throw console.error("SignUp error:",z),new Error(z.message||"");const q=N?.user;if(q?.id){let U=null;U=(await ve.from("profiles").insert([{id:q.id,display_id:D,email:j||null,role:"user",show_master_recipes:!1}]))?.error??null,U&&String(U.message||"").toLowerCase().includes("email")&&(U=(await ve.from("profiles").insert([{id:q.id,display_id:D,role:"user",show_master_recipes:!1}]))?.error??null),U&&U.code!=="23505"&&console.error("Profile create error:",U)}return{needsEmailConfirmation:!N?.session}},[]),y=w.useCallback(async()=>{await ve.auth.signOut(),s(null),d(!1)},[]),v=w.useCallback(async j=>{const{error:O}=await ve.auth.resetPasswordForEmail(j,{redirectTo:window.location.origin});if(O)throw console.error("Password reset email error:",O),new Error("");return!0},[]),b=w.useCallback(async j=>{const{error:O}=await ve.auth.updateUser({password:j});if(O)throw console.error("Update password error:",O),new Error("");return!0},[]),S=w.useCallback(()=>{d(!1);try{window.location.hash&&history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[]),_=w.useMemo(()=>({user:t,loading:l,login:p,register:m,logout:y,sendPasswordResetEmail:v,isPasswordRecovery:u,updatePassword:b,finishPasswordRecovery:S}),[t,l,p,m,y,v,u,b,S]);return i.jsx(S0.Provider,{value:_,children:r})},Ms=()=>w.useContext(S0),jh=["","MARUGO-D","MARUGO-OTTO","MARUGO-S","","","MARUGO","MARUGO2","MARUGO GRANDE","MARUGO MARUNOUCHI","","MARUGO YOTSUYA","371BAR","","BAR PELOTA","Claudia2","BISTRO CAVACAVA","eric'S","MITAN","","SOBA-JU","Bar Violet","X&C"," "],WC=[{code:"EN-US",label:" English",name:"English"},{code:"JA",label:" Japanese",name:"Japanese"},{code:"FR",label:" French",name:"French"},{code:"IT",label:" Italian",name:"Italian"},{code:"ES",label:" Spanish",name:"Spanish"},{code:"ZH",label:" Chinese",name:"Chinese"}],ZC=({recipe:r,steps:t,onClose:s})=>{const[l,c]=w.useState(0),[u,d]=w.useState(0),[f,p]=w.useState(!1),m=w.useRef(null),y=t||r.steps||[],v=y[l];w.useEffect(()=>{const z=async()=>{try{"wakeLock"in navigator&&(m.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock is active"))}catch(U){console.error(`${U.name}, ${U.message}`)}};z();const q=async()=>{m.current!==null&&document.visibilityState==="visible"&&await z()};return document.addEventListener("visibilitychange",q),()=>{document.removeEventListener("visibilitychange",q),m.current&&(m.current.release(),m.current=null)}},[]),w.useEffect(()=>{let z=null;return f&&u>0?z=setInterval(()=>{d(q=>q-1)},1e3):u===0&&f&&(p(!1),new Audio("/timer_end.mp3")),()=>clearInterval(z)},[f,u]);const b=z=>{const q=Math.floor(z/60),U=z%60;return`${q}:${U.toString().padStart(2,"0")}`},S=z=>{d(q=>q+z)},[_,j]=w.useState(!1),O=()=>{l<y.length-1?c(l+1):j(!0)},D=()=>{l>0&&c(l-1)};w.useEffect(()=>{typeof v=="string"||v?.text||v?.content},[v]);const N=()=>{j(!1),s()};return i.jsxs("div",{className:"cooking-mode-overlay",children:[_&&i.jsx("div",{className:"cooking-modal-overlay",children:i.jsxs("div",{className:"cooking-modal",children:[i.jsx("h3",{children:""}),i.jsx("p",{children:""}),i.jsxs("div",{className:"cooking-modal-actions",children:[i.jsx(se,{variant:"secondary",onClick:()=>j(!1),children:""}),i.jsx(se,{variant:"primary",onClick:N,children:""})]})]})}),i.jsxs("div",{className:"cooking-header",children:[i.jsx(se,{variant:"ghost",onClick:s,style:{color:"white"},children:" "}),i.jsxs("div",{className:"cooking-progress",children:["Step ",l+1," / ",y.length]}),i.jsx("div",{className:"cooking-timer-mini"})]}),i.jsxs("div",{className:"cooking-content",children:[i.jsxs("div",{className:"step-card",children:[i.jsxs("h2",{className:"step-number",children:["Step ",l+1]}),i.jsx("p",{className:"step-text",children:typeof v=="string"?v:v?.text||v?.content||""})]}),i.jsxs("div",{className:"timer-controls",children:[i.jsx("div",{className:"timer-displaybox",children:i.jsx("span",{className:`timer-value ${u===0&&f?"blink":""}`,children:b(u)})}),i.jsxs("div",{className:"timer-buttons",children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>S(60),children:"+1"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>S(10),children:"+10"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>d(0),children:""}),i.jsx(se,{variant:f?"warning":"primary",onClick:()=>p(!f),children:f?"":""})]})]})]}),i.jsxs("div",{className:"cooking-navigation",children:[i.jsx(se,{variant:"secondary",onClick:D,disabled:l===0,className:"nav-btn",children:" "}),i.jsx(se,{variant:"primary",onClick:O,className:"nav-btn main-nav",children:l===y.length-1?"":" "})]})]})};var Ra={},Yd={exports:{}},Kd,Py;function eE(){if(Py)return Kd;Py=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Kd=r,Kd}var Fd,Gy;function tE(){if(Gy)return Fd;Gy=1;var r=eE();function t(){}function s(){}return s.resetWarningCache=t,Fd=function(){function l(d,f,p,m,y,v){if(v!==r){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}l.isRequired=l;function c(){return l}var u={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:c,element:l,elementType:l,instanceOf:c,node:l,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:t};return u.PropTypes=u,u},Fd}var Vy;function j0(){return Vy||(Vy=1,Yd.exports=tE()()),Yd.exports}var Qd,Yy;function _0(){return Yy||(Yy=1,Qd={L:1,M:0,Q:3,H:2}),Qd}var Xd,Ky;function C0(){return Ky||(Ky=1,Xd={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Xd}var Jd,Fy;function nE(){if(Fy)return Jd;Fy=1;var r=C0();function t(s){this.mode=r.MODE_8BIT_BYTE,this.data=s}return t.prototype={getLength:function(s){return this.data.length},write:function(s){for(var l=0;l<this.data.length;l++)s.put(this.data.charCodeAt(l),8)}},Jd=t,Jd}var Wd,Qy;function rE(){if(Qy)return Wd;Qy=1;var r=_0();function t(s,l){this.totalCount=s,this.dataCount=l}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(s,l){var c=t.getRsBlockTable(s,l);if(c==null)throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+l);for(var u=c.length/3,d=new Array,f=0;f<u;f++)for(var p=c[f*3+0],m=c[f*3+1],y=c[f*3+2],v=0;v<p;v++)d.push(new t(m,y));return d},t.getRsBlockTable=function(s,l){switch(l){case r.L:return t.RS_BLOCK_TABLE[(s-1)*4+0];case r.M:return t.RS_BLOCK_TABLE[(s-1)*4+1];case r.Q:return t.RS_BLOCK_TABLE[(s-1)*4+2];case r.H:return t.RS_BLOCK_TABLE[(s-1)*4+3];default:return}},Wd=t,Wd}var Zd,Xy;function sE(){if(Xy)return Zd;Xy=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(t){var s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)==1},put:function(t,s){for(var l=0;l<s;l++)this.putBit((t>>>s-l-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}},Zd=r,Zd}var eh,Jy;function E0(){if(Jy)return eh;Jy=1;for(var r={glog:function(s){if(s<1)throw new Error("glog("+s+")");return r.LOG_TABLE[s]},gexp:function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return r.EXP_TABLE[s]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)r.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)r.EXP_TABLE[t]=r.EXP_TABLE[t-4]^r.EXP_TABLE[t-5]^r.EXP_TABLE[t-6]^r.EXP_TABLE[t-8];for(var t=0;t<255;t++)r.LOG_TABLE[r.EXP_TABLE[t]]=t;return eh=r,eh}var th,Wy;function R0(){if(Wy)return th;Wy=1;var r=E0();function t(s,l){if(s.length==null)throw new Error(s.length+"/"+l);for(var c=0;c<s.length&&s[c]==0;)c++;this.num=new Array(s.length-c+l);for(var u=0;u<s.length-c;u++)this.num[u]=s[u+c]}return t.prototype={get:function(s){return this.num[s]},getLength:function(){return this.num.length},multiply:function(s){for(var l=new Array(this.getLength()+s.getLength()-1),c=0;c<this.getLength();c++)for(var u=0;u<s.getLength();u++)l[c+u]^=r.gexp(r.glog(this.get(c))+r.glog(s.get(u)));return new t(l,0)},mod:function(s){if(this.getLength()-s.getLength()<0)return this;for(var l=r.glog(this.get(0))-r.glog(s.get(0)),c=new Array(this.getLength()),u=0;u<this.getLength();u++)c[u]=this.get(u);for(var u=0;u<s.getLength();u++)c[u]^=r.gexp(r.glog(s.get(u))+l);return new t(c,0).mod(s)}},th=t,th}var nh,Zy;function aE(){if(Zy)return nh;Zy=1;var r=C0(),t=R0(),s=E0(),l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(u){for(var d=u<<10;c.getBCHDigit(d)-c.getBCHDigit(c.G15)>=0;)d^=c.G15<<c.getBCHDigit(d)-c.getBCHDigit(c.G15);return(u<<10|d)^c.G15_MASK},getBCHTypeNumber:function(u){for(var d=u<<12;c.getBCHDigit(d)-c.getBCHDigit(c.G18)>=0;)d^=c.G18<<c.getBCHDigit(d)-c.getBCHDigit(c.G18);return u<<12|d},getBCHDigit:function(u){for(var d=0;u!=0;)d++,u>>>=1;return d},getPatternPosition:function(u){return c.PATTERN_POSITION_TABLE[u-1]},getMask:function(u,d,f){switch(u){case l.PATTERN000:return(d+f)%2==0;case l.PATTERN001:return d%2==0;case l.PATTERN010:return f%3==0;case l.PATTERN011:return(d+f)%3==0;case l.PATTERN100:return(Math.floor(d/2)+Math.floor(f/3))%2==0;case l.PATTERN101:return d*f%2+d*f%3==0;case l.PATTERN110:return(d*f%2+d*f%3)%2==0;case l.PATTERN111:return(d*f%3+(d+f)%2)%2==0;default:throw new Error("bad maskPattern:"+u)}},getErrorCorrectPolynomial:function(u){for(var d=new t([1],0),f=0;f<u;f++)d=d.multiply(new t([1,s.gexp(f)],0));return d},getLengthInBits:function(u,d){if(1<=d&&d<10)switch(u){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+u)}else if(d<27)switch(u){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+u)}else if(d<41)switch(u){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+u)}else throw new Error("type:"+d)},getLostPoint:function(u){for(var d=u.getModuleCount(),f=0,p=0;p<d;p++)for(var m=0;m<d;m++){for(var y=0,v=u.isDark(p,m),b=-1;b<=1;b++)if(!(p+b<0||d<=p+b))for(var S=-1;S<=1;S++)m+S<0||d<=m+S||b==0&&S==0||v==u.isDark(p+b,m+S)&&y++;y>5&&(f+=3+y-5)}for(var p=0;p<d-1;p++)for(var m=0;m<d-1;m++){var _=0;u.isDark(p,m)&&_++,u.isDark(p+1,m)&&_++,u.isDark(p,m+1)&&_++,u.isDark(p+1,m+1)&&_++,(_==0||_==4)&&(f+=3)}for(var p=0;p<d;p++)for(var m=0;m<d-6;m++)u.isDark(p,m)&&!u.isDark(p,m+1)&&u.isDark(p,m+2)&&u.isDark(p,m+3)&&u.isDark(p,m+4)&&!u.isDark(p,m+5)&&u.isDark(p,m+6)&&(f+=40);for(var m=0;m<d;m++)for(var p=0;p<d-6;p++)u.isDark(p,m)&&!u.isDark(p+1,m)&&u.isDark(p+2,m)&&u.isDark(p+3,m)&&u.isDark(p+4,m)&&!u.isDark(p+5,m)&&u.isDark(p+6,m)&&(f+=40);for(var j=0,m=0;m<d;m++)for(var p=0;p<d;p++)u.isDark(p,m)&&j++;var O=Math.abs(100*j/d/d-50)/5;return f+=O*10,f}};return nh=c,nh}var rh,ev;function iE(){if(ev)return rh;ev=1;var r=nE(),t=rE(),s=sE(),l=aE(),c=R0();function u(f,p){this.typeNumber=f,this.errorCorrectLevel=p,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var d=u.prototype;return d.addData=function(f){var p=new r(f);this.dataList.push(p),this.dataCache=null},d.isDark=function(f,p){if(f<0||this.moduleCount<=f||p<0||this.moduleCount<=p)throw new Error(f+","+p);return this.modules[f][p]},d.getModuleCount=function(){return this.moduleCount},d.make=function(){if(this.typeNumber<1){var f=1;for(f=1;f<40;f++){for(var p=t.getRSBlocks(f,this.errorCorrectLevel),m=new s,y=0,v=0;v<p.length;v++)y+=p[v].dataCount;for(var v=0;v<this.dataList.length;v++){var b=this.dataList[v];m.put(b.mode,4),m.put(b.getLength(),l.getLengthInBits(b.mode,f)),b.write(m)}if(m.getLengthInBits()<=y*8)break}this.typeNumber=f}this.makeImpl(!1,this.getBestMaskPattern())},d.makeImpl=function(f,p){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++){this.modules[m]=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++)this.modules[m][y]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(f,p),this.typeNumber>=7&&this.setupTypeNumber(f),this.dataCache==null&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,p)},d.setupPositionProbePattern=function(f,p){for(var m=-1;m<=7;m++)if(!(f+m<=-1||this.moduleCount<=f+m))for(var y=-1;y<=7;y++)p+y<=-1||this.moduleCount<=p+y||(0<=m&&m<=6&&(y==0||y==6)||0<=y&&y<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=y&&y<=4?this.modules[f+m][p+y]=!0:this.modules[f+m][p+y]=!1)},d.getBestMaskPattern=function(){for(var f=0,p=0,m=0;m<8;m++){this.makeImpl(!0,m);var y=l.getLostPoint(this);(m==0||f>y)&&(f=y,p=m)}return p},d.createMovieClip=function(f,p,m){var y=f.createEmptyMovieClip(p,m),v=1;this.make();for(var b=0;b<this.modules.length;b++)for(var S=b*v,_=0;_<this.modules[b].length;_++){var j=_*v,O=this.modules[b][_];O&&(y.beginFill(0,100),y.moveTo(j,S),y.lineTo(j+v,S),y.lineTo(j+v,S+v),y.lineTo(j,S+v),y.endFill())}return y},d.setupTimingPattern=function(){for(var f=8;f<this.moduleCount-8;f++)this.modules[f][6]==null&&(this.modules[f][6]=f%2==0);for(var p=8;p<this.moduleCount-8;p++)this.modules[6][p]==null&&(this.modules[6][p]=p%2==0)},d.setupPositionAdjustPattern=function(){for(var f=l.getPatternPosition(this.typeNumber),p=0;p<f.length;p++)for(var m=0;m<f.length;m++){var y=f[p],v=f[m];if(this.modules[y][v]==null)for(var b=-2;b<=2;b++)for(var S=-2;S<=2;S++)b==-2||b==2||S==-2||S==2||b==0&&S==0?this.modules[y+b][v+S]=!0:this.modules[y+b][v+S]=!1}},d.setupTypeNumber=function(f){for(var p=l.getBCHTypeNumber(this.typeNumber),m=0;m<18;m++){var y=!f&&(p>>m&1)==1;this.modules[Math.floor(m/3)][m%3+this.moduleCount-8-3]=y}for(var m=0;m<18;m++){var y=!f&&(p>>m&1)==1;this.modules[m%3+this.moduleCount-8-3][Math.floor(m/3)]=y}},d.setupTypeInfo=function(f,p){for(var m=this.errorCorrectLevel<<3|p,y=l.getBCHTypeInfo(m),v=0;v<15;v++){var b=!f&&(y>>v&1)==1;v<6?this.modules[v][8]=b:v<8?this.modules[v+1][8]=b:this.modules[this.moduleCount-15+v][8]=b}for(var v=0;v<15;v++){var b=!f&&(y>>v&1)==1;v<8?this.modules[8][this.moduleCount-v-1]=b:v<9?this.modules[8][15-v-1+1]=b:this.modules[8][15-v-1]=b}this.modules[this.moduleCount-8][8]=!f},d.mapData=function(f,p){for(var m=-1,y=this.moduleCount-1,v=7,b=0,S=this.moduleCount-1;S>0;S-=2)for(S==6&&S--;;){for(var _=0;_<2;_++)if(this.modules[y][S-_]==null){var j=!1;b<f.length&&(j=(f[b]>>>v&1)==1);var O=l.getMask(p,y,S-_);O&&(j=!j),this.modules[y][S-_]=j,v--,v==-1&&(b++,v=7)}if(y+=m,y<0||this.moduleCount<=y){y-=m,m=-m;break}}},u.PAD0=236,u.PAD1=17,u.createData=function(f,p,m){for(var y=t.getRSBlocks(f,p),v=new s,b=0;b<m.length;b++){var S=m[b];v.put(S.mode,4),v.put(S.getLength(),l.getLengthInBits(S.mode,f)),S.write(v)}for(var _=0,b=0;b<y.length;b++)_+=y[b].dataCount;if(v.getLengthInBits()>_*8)throw new Error("code length overflow. ("+v.getLengthInBits()+">"+_*8+")");for(v.getLengthInBits()+4<=_*8&&v.put(0,4);v.getLengthInBits()%8!=0;)v.putBit(!1);for(;!(v.getLengthInBits()>=_*8||(v.put(u.PAD0,8),v.getLengthInBits()>=_*8));)v.put(u.PAD1,8);return u.createBytes(v,y)},u.createBytes=function(f,p){for(var m=0,y=0,v=0,b=new Array(p.length),S=new Array(p.length),_=0;_<p.length;_++){var j=p[_].dataCount,O=p[_].totalCount-j;y=Math.max(y,j),v=Math.max(v,O),b[_]=new Array(j);for(var D=0;D<b[_].length;D++)b[_][D]=255&f.buffer[D+m];m+=j;var N=l.getErrorCorrectPolynomial(O),z=new c(b[_],N.getLength()-1),q=z.mod(N);S[_]=new Array(N.getLength()-1);for(var D=0;D<S[_].length;D++){var U=D+q.getLength()-S[_].length;S[_][D]=U>=0?q.get(U):0}}for(var C=0,D=0;D<p.length;D++)C+=p[D].totalCount;for(var B=new Array(C),I=0,D=0;D<y;D++)for(var _=0;_<p.length;_++)D<b[_].length&&(B[I++]=b[_][D]);for(var D=0;D<v;D++)for(var _=0;_<p.length;_++)D<S[_].length&&(B[I++]=S[_][D]);return B},rh=u,rh}var Bo={},tv;function lE(){if(tv)return Bo;tv=1,Object.defineProperty(Bo,"__esModule",{value:!0});var r=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var v=arguments[y];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},t=j0(),s=u(t),l=tl(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,y){var v={};for(var b in m)y.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(m,b)&&(v[b]=m[b]);return v}var f={bgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,bgD:s.default.string.isRequired,fgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,fgD:s.default.string.isRequired,size:s.default.number.isRequired,title:s.default.string,viewBoxSize:s.default.number.isRequired,xmlns:s.default.string},p=(0,l.forwardRef)(function(m,y){var v=m.bgColor,b=m.bgD,S=m.fgD,_=m.fgColor,j=m.size,O=m.title,D=m.viewBoxSize,N=m.xmlns,z=N===void 0?"http://www.w3.org/2000/svg":N,q=d(m,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return c.default.createElement("svg",r({},q,{height:j,ref:y,viewBox:"0 0 "+D+" "+D,width:j,xmlns:z}),O?c.default.createElement("title",null,O):null,c.default.createElement("path",{d:b,fill:v}),c.default.createElement("path",{d:S,fill:_}))});return p.displayName="QRCodeSvg",p.propTypes=f,Bo.default=p,Bo}var nv;function oE(){if(nv)return Ra;nv=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.QRCode=void 0;var r=Object.assign||function(j){for(var O=1;O<arguments.length;O++){var D=arguments[O];for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(j[N]=D[N])}return j},t=j0(),s=v(t),l=_0(),c=v(l),u=iE(),d=v(u),f=tl(),p=v(f),m=lE(),y=v(m);function v(j){return j&&j.__esModule?j:{default:j}}function b(j,O){var D={};for(var N in j)O.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(j,N)&&(D[N]=j[N]);return D}var S={bgColor:s.default.oneOfType([s.default.object,s.default.string]),fgColor:s.default.oneOfType([s.default.object,s.default.string]),level:s.default.string,size:s.default.number,value:s.default.string.isRequired},_=(0,f.forwardRef)(function(j,O){var D=j.bgColor,N=D===void 0?"#FFFFFF":D,z=j.fgColor,q=z===void 0?"#000000":z,U=j.level,C=U===void 0?"L":U,B=j.size,I=B===void 0?256:B,$=j.value,Y=b(j,["bgColor","fgColor","level","size","value"]),T=new d.default(-1,c.default[C]);T.addData($),T.make();var A=T.modules;return p.default.createElement(y.default,r({},Y,{bgColor:N,bgD:A.map(function(P,L){return P.map(function(K,k){return K?"":"M "+k+" "+L+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:q,fgD:A.map(function(P,L){return P.map(function(K,k){return K?"M "+k+" "+L+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:O,size:I,viewBoxSize:A.length}))});return Ra.QRCode=_,_.displayName="QRCode",_.propTypes=S,Ra.default=_,Ra}var cE=oE();const uE=cv(cE),rv=r=>{if(!r)return"";const t=new Date(r);return`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`},dE=({recipe:r,ownerLabel:t,onBack:s,onEdit:l,onDelete:c,onHardDelete:u,isDeleted:d,onView:f,onDuplicate:p,backLabel:m,onList:y})=>{const{user:v}=Ms(),[b,S]=_e.useState(!1),[_,j]=_e.useState(!1),[O,D]=_e.useState(!1),[N,z]=_e.useState(!1),[q,U]=_e.useState(new Set),[C,B]=_e.useState({}),[I,$]=_e.useState("ORIGINAL"),[Y,T]=_e.useState(!1),[A,P]=_e.useState(!0),[L,K]=_e.useState(!1),[k,G]=_e.useState(""),[X,ce]=_e.useState(1),[de,M]=_e.useState(""),[V,Z]=_e.useState(""),le=(xe,me)=>{if(!xe)return"";const be=parseFloat(xe);if(isNaN(be))return xe;const R=be*parseFloat(me);return Number.isInteger(R)?R.toString():R.toFixed(1).replace(/\.0$/,"")},fe=(xe,me)=>{if(!xe)return"";const be=parseFloat(xe);return isNaN(be)?xe:(be*parseFloat(me)).toFixed(2).replace(/\.00$/,"")},[ye,Ce]=_e.useState(r),[Ie,Ue]=_e.useState(!1),he=I==="ORIGINAL"?ye:C[I]||ye;_e.useEffect(()=>{Ce(r),!r.steps&&!d&&(Ue(!0),Pt.getRecipe(r.id).then(xe=>{Ce(xe)}).catch(xe=>{console.error("Failed to load details",xe)}).finally(()=>{Ue(!1)}))},[r,d]);const[Xe,Pe]=_e.useState(r.tags?.includes("public")||!1),bt=v?.role==="admin"||r.tags&&r.tags.includes(`owner:${v?.id}`)||v?.displayId&&r.tags&&r.tags.includes(`owner:${v.displayId}`),nt=!(r.tags&&r.tags.some(xe=>xe.startsWith("owner:")))||bt,Ke=async()=>{const xe=!Xe;try{const me=r.tags||[];let be;xe?be=[...me,"public"]:be=me.filter(R=>R!=="public"),Pe(xe),await Pt.updateRecipe({...r,tags:be})}catch(me){console.error("Failed to toggle public",me),alert(""),Pe(!xe)}},ft=(xe,me,be=!1)=>I==="ORIGINAL"||!A||!me||xe===me?xe:i.jsxs(i.Fragment,{children:[xe,be?i.jsx("br",{}):" ",i.jsxs("span",{className:"original-text-sub",style:{opacity:.6,fontSize:"0.85em",fontWeight:"normal"},children:["(",me,")"]})]}),_t=async xe=>{const me=xe.target.value;if($(me),me!=="ORIGINAL"&&!C[me]){T(!0);try{const be=await QC.translateRecipe(r,me);B(R=>({...R,[me]:be}))}catch(be){console.error(be),alert(""),$("ORIGINAL")}finally{T(!1)}}},Mt=xe=>{U(me=>{const be=new Set(me);return be.has(xe)?be.delete(xe):be.add(xe),be})};_e.useEffect(()=>{window.scrollTo(0,0),f&&r&&!d&&f(r.id);const xe=document.title;return r&&r.title&&(document.title=r.title),B({}),$("ORIGINAL"),U(new Set),Pe(r.tags?.includes("public")||!1),()=>{document.title=xe}},[r.id,r.title]),_e.useEffect(()=>{r&&r.servings?Z(r.servings.toString()):Z(""),M("")},[r]);const Ot=()=>{S(!0)},kt=()=>{S(!1),c(r)},at=()=>{S(!1)},Vt=()=>{D(!0)},it=()=>{D(!1),u(r)},gn=()=>{D(!1)},mn=()=>{j(!0)},dn=async()=>{j(!1);try{const xe=await Pt.duplicateRecipe(r,v);p&&p(xe)}catch(xe){console.error("Duplication failed",xe),alert("")}},dt=()=>{j(!1)},Dt=_e.useRef(null),Zt=_e.useRef(null),en=xe=>{Zt.current=null,Dt.current=xe.targetTouches[0].clientX},lr=xe=>{Zt.current=xe.targetTouches[0].clientX},yn=()=>{if(N||!Dt.current||!Zt.current)return;const xe=Dt.current-Zt.current,me=Dt.current<50,be=xe<-100;me&&be&&s()};if(!r)return null;const wt=xe=>{const me=Math.round(parseFloat(xe)),be=parseFloat(de),R=parseFloat(V);let ee=null,re=null;return!isNaN(me)&&!isNaN(be)&&!isNaN(R)&&be>0&&R>0&&(re=be*R,ee=me/re*100),i.jsxs("div",{className:"profit-calculator screen-only",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[i.jsxs("h4",{style:{margin:"0 0 0.8rem 0",fontSize:"1rem",color:"#555",borderBottom:"1px solid #ddd",paddingBottom:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("span",{children:["  ",i.jsx("small",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"()"})]}),i.jsx("span",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"(8% or 10%)"})]}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" (1/1)"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("span",{style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",color:"#888"},children:""}),i.jsx("input",{type:"number",value:de,onChange:ue=>M(ue.target.value),placeholder:"0",style:{padding:"6px 6px 6px 20px",width:"100px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" ()"}),i.jsx("input",{type:"number",value:V,onChange:ue=>Z(ue.target.value),placeholder:"0",style:{padding:"6px",width:"60px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem",textAlign:"center"}})]}),ee!==null&&i.jsxs("div",{style:{marginLeft:"auto",padding:"8px 12px",background:ee>40?"#ffebee":"#e8f5e9",borderRadius:"6px",border:`1px solid ${ee>40?"#ffcdd2":"#c8e6c9"}`,textAlign:"right"},children:[i.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"4px"},children:[": ",re.toLocaleString()]}),i.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"4px",fontWeight:"bold"},children:[": ",(re-me).toLocaleString()]}),i.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:ee>40?"#d32f2f":"#2e7d32"},children:[": ",ee.toFixed(1),"%"]})]})]})]})},gt=he.ingredients||[];let mt=he.steps||[];if(!mt.length&&he.ingredientGroups){const xe=he.ingredientGroups.find(me=>["","Steps","Method",""].includes(me.name));xe&&(mt=gt.filter(be=>be.groupId===xe.id).map(be=>typeof be=="string"?be:be.name||be.text||""))}const Rn=mt;return i.jsxs("div",{className:"recipe-detail fade-in",onTouchStart:en,onTouchMove:lr,onTouchEnd:yn,children:[N&&i.jsx(ZC,{recipe:he,steps:mt,onClose:()=>z(!1)}),_&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(Nt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-primary)"},children:""}),i.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:""}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:dt,children:""}),i.jsx(se,{variant:"primary",onClick:dn,children:""})]})]})}),O&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(Nt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:" "}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),""]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:gn,children:""}),i.jsx(se,{variant:"danger",onClick:it,children:""})]})]})}),b&&i.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(Nt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[i.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:""}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),i.jsx("small",{style:{color:"#666"},children:""})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:at,children:""}),i.jsx(se,{variant:"danger",onClick:kt,children:""})]})]})}),i.jsxs("div",{className:"recipe-detail__header",children:[i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx(se,{variant:"secondary",onClick:s,size:"sm",children:m||" "}),y&&i.jsx(se,{variant:"secondary",onClick:y,size:"sm",children:""})]}),!d&&i.jsxs("div",{className:"recipe-detail__actions",children:[nt&&(v?.displayId==="yoshito"||v?.role==="admin")&&i.jsx("div",{style:{marginRight:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:i.jsxs("label",{className:"switch",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:Xe,onChange:Ke,style:{accentColor:"#4CAF50",transform:"scale(1.2)"}}),i.jsx("span",{style:{marginLeft:"4px",fontSize:"0.9rem",fontWeight:"bold",color:Xe?"#4CAF50":"#888"},children:Xe?"":""})]})}),!nt&&i.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#e0e0e0",color:"#555",borderRadius:"4px",fontSize:"0.85rem",marginRight:"0.5rem"},children:"  ()"}),i.jsxs("select",{className:"language-select",value:I,onChange:_t,disabled:Y,style:{padding:"0.4rem",borderRadius:"4px",border:"1px solid #ccc",marginRight:"0.5rem",cursor:"pointer"},children:[i.jsx("option",{value:"ORIGINAL",children:" Original ()"}),WC.map(xe=>i.jsx("option",{value:xe.code,children:xe.label},xe.code))]}),I!=="ORIGINAL"&&i.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"0.5rem",cursor:"pointer",fontSize:"0.9rem",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:A,onChange:xe=>P(xe.target.checked),style:{marginRight:"4px"}}),""]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>K(!0),children:" "}),i.jsx(se,{variant:"secondary",size:"sm",onClick:mn,children:""}),nt&&i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:l,children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:Ot,style:{marginLeft:"0.5rem"},children:""})]}),i.jsx(se,{variant:"primary",size:"sm",onClick:()=>z(!0),children:""})]}),d&&i.jsxs("div",{className:"recipe-detail__actions",children:[i.jsx(se,{variant:"ghost",size:"sm",onClick:Vt,style:{color:"var(--color-danger)",marginRight:"auto"},children:""}),i.jsx(se,{variant:"primary",size:"sm",onClick:()=>c(r,!0),children:""})]})]}),i.jsx("div",{className:"recipe-detail__hero",children:he.image?i.jsx("img",{src:he.image,alt:he.title,className:"recipe-detail__image"}):i.jsx("div",{className:"recipe-detail__image-placeholder",style:{height:"100%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:""})}),i.jsxs("div",{className:"recipe-detail__title-card glass-panel",children:[i.jsx("h1",{children:ft(he.title,r.title)}),i.jsx("p",{className:"recipe-detail__desc",children:ft(he.description,r.description,!0)}),v?.role==="admin"&&t&&i.jsxs("div",{className:"recipe-detail__owner",children:[" : ",t]}),i.jsxs("div",{className:"recipe-detail__meta",children:[he.course&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:ft(he.course,r.course)})]}),he.category&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:ft(he.category,r.category)})]}),he.storeName&&i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsx("span",{className:"meta-value",children:ft(he.storeName,r.storeName)})]}),i.jsxs("div",{className:"meta-item",children:[i.jsx("span",{className:"meta-label",children:""}),i.jsxs("span",{className:"meta-value",children:[he.servings,""]})]})]}),he.sourceUrl&&i.jsxs("div",{className:"print-qr-container",style:{marginTop:"0.8rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsx("div",{style:{fontSize:"0.85rem"},children:i.jsxs("a",{href:he.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px"},children:[" ",i.jsx("span",{className:"screen-only",children:""}),i.jsx("span",{className:"print-only",children:""})]})}),i.jsx("div",{style:{background:"white",padding:"4px",width:"fit-content"},children:i.jsx(uE,{value:he.sourceUrl,size:64,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]})]}),i.jsxs("div",{className:"recipe-detail-dates",style:{marginTop:"0.5rem",marginBottom:"1.5rem",borderTop:"none",paddingRight:"0.5rem"},children:[i.jsxs("span",{children:[" : ",rv(r.created_at)]}),r.updated_at&&i.jsxs("span",{children:[" : ",rv(r.updated_at)]})]}),i.jsx("div",{className:"recipe-detail__content",children:i.jsxs("div",{className:"recipe-detail__main",children:[i.jsxs("section",{className:"detail-section",children:[i.jsx("h2",{children:""}),i.jsx(Nt,{className:"ingredients-card",children:he.type==="bread"?i.jsx("div",{className:"bread-detail-view",children:(()=>{const xe=he.flours||[],me=he.breadIngredients||[],be=xe.reduce((ge,Te)=>ge+(parseFloat(Te.quantity)||0),0),R=be+me.reduce((ge,Te)=>ge+(parseFloat(Te.quantity)||0),0),ee=be?(R/be*100).toFixed(1):"0.0",re=ge=>be?((parseFloat(ge)||0)/be*100).toFixed(1):"0.0",ue=parseFloat(k),pe=ue&&R?ue/R:1,Se=ge=>ue?((parseFloat(ge)||0)*pe).toFixed(1):ge;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"screen-only",style:{background:"#f1f3f5",padding:"0.4rem 0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem 1rem",flexWrap:"wrap",border:"1px solid #dee2e6",lineHeight:1.2},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),i.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#000"},children:[R.toLocaleString(),"g"]}),i.jsxs("span",{style:{fontSize:"0.75rem",color:"#444"},children:["(",ee,"%)"]})]}),i.jsx("div",{style:{height:"16px",width:"1px",background:"#adb5bd"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("label",{htmlFor:"target-total-input",style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("input",{id:"target-total-input",type:"number",value:k,onChange:ge=>G(ge.target.value),placeholder:"1000",style:{padding:"2px 20px 2px 6px",width:"80px",borderRadius:"4px",border:"1.5px solid #333",fontSize:"0.9rem",fontWeight:"bold",textAlign:"right",color:"#000",backgroundColor:"#fff"}}),i.jsx("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",color:"#333"},children:"g"})]}),k&&i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>G(""),style:{padding:"0 4px",fontSize:"0.7rem",color:"#555",height:"22px",border:"1px solid #dee2e6"},children:""})]}),k&&i.jsxs("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"bold",marginLeft:"auto"},children:[" : ",pe.toFixed(3)," "]})]}),i.jsxs("div",{className:"bread-section",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",marginTop:0,display:"flex",justifyContent:"space-between",alignItems:"center",color:"var(--color-text-main)"},children:[i.jsx("span",{children:""}),i.jsxs("span",{style:{fontSize:"0.9rem",background:"var(--color-primary)",color:"white",padding:"4px 12px",borderRadius:"20px",fontWeight:"bold"},children:["Total: ",k?Se(be):be,"g (100%)"]})]}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:" (g)"}),i.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),i.jsx("tbody",{children:xe.map((ge,Te)=>{const Oe=r.flours?.[Te]||{};return i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`flour-${Te}`}),i.jsx("label",{htmlFor:`flour-${Te}`,children:ft(ge.name,Oe?.name)})]})}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:k?i.jsx("span",{style:{color:"var(--color-primary)"},children:Se(ge.quantity)}):ge.quantity}),i.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-primary)"},children:[re(ge.quantity),"%"]}),i.jsx("td",{className:"ingredient-cost-muted",style:{textAlign:"right"},children:ge.purchaseCost?`${ge.purchaseCost}`:"-"}),i.jsx("td",{style:{textAlign:"right"},children:ge.cost?`${ge.cost}`:"-"})]},Te)})})]})]}),i.jsxs("div",{className:"bread-section",style:{marginTop:"3rem"},children:[i.jsx("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid #f39c12",paddingLeft:"10px",marginBottom:"1rem",color:"var(--color-text-main)"},children:""}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:" (g)"}),i.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),i.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),i.jsx("tbody",{children:me.map((ge,Te)=>{const Oe=r.breadIngredients?.[Te]||{};return i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ingredient-${Te}`}),i.jsx("label",{htmlFor:`ingredient-${Te}`,children:ft(ge.name,Oe?.name)})]})}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:k?i.jsx("span",{style:{color:"var(--color-primary)"},children:Se(ge.quantity)}):ge.quantity}),i.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-text-muted)"},children:[re(ge.quantity),"%"]}),i.jsx("td",{className:"ingredient-cost-muted",style:{textAlign:"right"},children:ge.purchaseCost?`${ge.purchaseCost}`:"-"}),i.jsx("td",{style:{textAlign:"right"},children:ge.cost?`${ge.cost}`:"-"})]},Te)})})]}),i.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--color-bg-surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),i.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",(()=>{const ge=Oe=>Oe.reduce((we,Ae)=>{const Re=parseFloat(Ae.cost)||0,ke=Ae.isAlcohol?1.1:1.08,qe=Re*pe;return we+qe*ke},0),Te=ge(xe)+ge(me);return Math.round(Te).toLocaleString()})()]}),i.jsx("span",{className:"recipe-detail__subtle recipe-detail__tax-note",style:{marginLeft:"8px"},children:"()"})]}),(()=>{const ge=Oe=>Oe.reduce((we,Ae)=>{const Re=parseFloat(Ae.cost)||0,ke=Ae.isAlcohol?1.1:1.08,qe=Re*pe;return we+qe*ke},0),Te=ge(xe)+ge(me);return wt(Te)})()]})]})})()}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"screen-only no-print",style:{background:"#f8f9fa",color:"#333",padding:"0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid #e9ecef"},children:[i.jsx("label",{htmlFor:"multiplier-input",style:{fontWeight:"bold",fontSize:"0.9rem",color:"#333"},children:":"}),i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold",marginRight:"4px",color:"#333"},children:""}),i.jsx("input",{id:"multiplier-input",type:"number",min:"0.1",step:"0.1",value:X,onChange:xe=>ce(xe.target.value),style:{width:"60px",padding:"4px",fontSize:"1rem",fontWeight:"bold",textAlign:"center",borderRadius:"4px",border:"1px solid #ced4da",background:"#fff",color:"#333"}})]}),parseFloat(X)!==1&&i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>ce("1"),style:{fontSize:"0.8rem",padding:"2px 8px",height:"auto",color:"#555",borderColor:"#ccc",background:"#fff"},children:""})]}),(()=>{const xe=he.ingredientGroups&&he.ingredientGroups.length>0?he.ingredientGroups:null;return xe?xe.map(me=>{const be=gt.filter(R=>R.groupId===me.id);return be.length===0||["","Steps","Method",""].includes(me.name)?null:i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{fontSize:"1rem",borderBottom:"2px solid var(--color-border)",paddingBottom:"0.5rem",marginBottom:"0.5rem",marginTop:"0.5rem",color:"var(--color-text-main)",display:["","Ingredients","ingredients"].includes(me.name)?"none":"block"},children:me.name}),i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"40%"},children:""}),i.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:be.map((R,ee)=>{const re=gt.indexOf(R),ue=r.ingredients?.[re],pe=typeof R=="string"?R:R.name,Se=ue?typeof ue=="string"?ue:ue.name:"",ge=le(R.quantity,X),Te=fe(R.cost,X),Oe=String(X)!=="1";return i.jsxs("tr",{className:"ingredient-row",children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ing-${me.id}-${ee}`}),i.jsx("label",{htmlFor:`ing-${me.id}-${ee}`,children:ft(pe,Se)})]})}),i.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:Oe?"bold":"normal",color:Oe?"var(--color-primary)":"inherit"},children:ge}),i.jsx("td",{style:{paddingLeft:"0.5rem"},children:R.unit}),i.jsx("td",{className:"ingredient-cost-muted",style:{textAlign:"right"},children:R.purchaseCost?`${R.purchaseCost}`:"-"}),i.jsxs("td",{style:{textAlign:"right"},children:[Te?`${Te}`:"-",R.isAlcohol&&i.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},ee)})})]})]},me.id)}):i.jsxs("table",{className:"ingredients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"40%"},children:""}),i.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),i.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:gt.map((me,be)=>{const R=r.ingredients?.[be],ee=typeof me=="string"?me:me.name,re=R?typeof R=="string"?R:R.name:"",ue=le(me.quantity,X),pe=fe(me.cost,X),Se=String(X)!=="1";return i.jsxs("tr",{className:"ingredient-row",children:[i.jsx("td",{children:i.jsxs("div",{className:"ingredient-name",children:[i.jsx("input",{type:"checkbox",id:`ing-${be}`}),i.jsx("label",{htmlFor:`ing-${be}`,children:ft(ee,re)})]})}),i.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:Se?"bold":"normal",color:Se?"var(--color-primary)":"inherit"},children:ue}),i.jsx("td",{style:{paddingLeft:"0.5rem"},children:me.unit}),i.jsx("td",{className:"ingredient-cost-muted",style:{textAlign:"right"},children:me.purchaseCost?`${me.purchaseCost}`:"-"}),i.jsxs("td",{style:{textAlign:"right"},children:[pe?`${pe}`:"-",me.isAlcohol&&i.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},be)})})]})})(),i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"2px dashed var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),i.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",Math.round((me=>me.reduce((be,R)=>{const ee=parseFloat(R.cost)||0,re=R.isAlcohol?1.1:1.08,ue=fe(ee,X),pe=parseFloat(ue)||0;return be+pe*re},0))(gt)).toLocaleString()]}),i.jsx("span",{className:"recipe-detail__subtle recipe-detail__tax-note",children:"()"})]}),i.jsx("p",{className:"recipe-detail__subtle recipe-detail__tax-footnote",children:"(8% or 10%)"}),(()=>{const me=(be=>be.reduce((R,ee)=>{const re=parseFloat(ee.cost)||0,ue=ee.isAlcohol?1.1:1.08,pe=parseFloat(fe(re,X))||0;return R+pe*ue},0))(gt);return wt(me)})()]})})]}),i.jsxs("section",{className:"detail-section",children:[i.jsx("h2",{children:""}),(()=>{const xe=he.stepGroups&&he.stepGroups.length>0?he.stepGroups:null;return xe?i.jsx("div",{className:"steps-container",children:xe.map(me=>{const be=Rn.filter(R=>(typeof R=="object"?R.groupId:null)===me.id);return be.length===0?null:i.jsxs("div",{className:"step-group",style:{marginBottom:"2rem"},children:[me.name!==""&&me.name!=="Steps"&&i.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"var(--color-text-main)",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px"},children:me.name}),i.jsx("div",{className:"steps-list",children:be.map((R,ee)=>{const re=Rn.indexOf(R),ue=typeof R=="object"?R.text:R,pe=r.steps?.[re],Se=typeof pe=="object"?pe.text:pe,ge=Te=>Te?Te.replace(/<[^>]*>?/gm,""):"";return i.jsxs(Nt,{className:`step-card ${q.has(re)?"is-completed":""}`,onClick:()=>Mt(re),children:[i.jsx("div",{className:"step-number",children:re+1}),i.jsx("p",{className:"step-text",children:ft(ge(ue),ge(Se),!0)})]},ee)})})]},me.id)})}):i.jsx("div",{className:"steps-list",children:Rn.map((me,be)=>{const R=typeof me=="object"?me.text:me,ee=r.steps?.[be],re=typeof ee=="object"?ee.text:ee;return i.jsxs(Nt,{className:`step-card ${q.has(be)?"is-completed":""}`,onClick:()=>Mt(be),children:[i.jsx("div",{className:"step-number",children:be+1}),i.jsx("p",{className:"step-text",children:ft(R,re,!0)})]},be)})})})()]})]})}),i.jsx(Cn,{isOpen:L,onClose:()=>K(!1),title:" ",size:"large",children:i.jsxs("div",{className:"print-preview-recipe",children:[i.jsxs("div",{className:"preview-header",children:[i.jsx("h2",{children:he.title}),he.image&&i.jsx("img",{src:he.image,alt:he.title,className:"preview-image"})]}),i.jsxs("div",{className:"preview-meta",children:[he.course&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",he.course]}),he.category&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",he.category]}),he.storeName&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",he.storeName]}),he.servings&&i.jsxs("div",{children:[i.jsx("strong",{children:":"})," ",he.servings,""]})]}),he.description&&i.jsx("div",{className:"preview-description",children:i.jsx("p",{children:he.description})}),i.jsxs("div",{className:"preview-section",children:[i.jsx("h3",{children:""}),he.type==="bread"?i.jsxs("div",{className:"preview-ingredients-bread",children:[i.jsxs("div",{className:"bread-group",children:[i.jsx("h4",{children:""}),i.jsxs("table",{className:"preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:(he.flours||[]).map((xe,me)=>i.jsxs("tr",{children:[i.jsx("td",{children:xe.name}),i.jsxs("td",{style:{textAlign:"right"},children:[xe.quantity,"g"]})]},me))})]})]}),i.jsxs("div",{className:"bread-group",children:[i.jsx("h4",{children:""}),i.jsxs("table",{className:"preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:(he.breadIngredients||[]).map((xe,me)=>i.jsxs("tr",{children:[i.jsx("td",{children:xe.name}),i.jsxs("td",{style:{textAlign:"right"},children:[xe.quantity,"g"]})]},me))})]})]})]}):i.jsx("div",{className:"preview-ingredients-normal",children:(()=>{const xe=he.ingredientGroups&&he.ingredientGroups.length>0?he.ingredientGroups:null;return xe?xe.map(me=>{const be=gt.filter(R=>R.groupId===me.id);return be.length===0||["","Steps","Method",""].includes(me.name)?null:i.jsxs("div",{className:"ingredient-group",children:[i.jsx("h4",{children:me.name}),i.jsx("ul",{children:be.map((R,ee)=>i.jsxs("li",{children:[R.name," ",R.quantity&&`${R.quantity}${R.unit||""}`]},ee))})]},me.id)}):i.jsx("ul",{children:gt.map((me,be)=>i.jsxs("li",{children:[me.name," ",me.quantity&&`${me.quantity}${me.unit||""}`]},be))})})()})]}),Rn.length>0&&i.jsxs("div",{className:"preview-section",children:[i.jsx("h3",{children:""}),i.jsx("ol",{className:"preview-steps",children:Rn.map((xe,me)=>{const be=typeof xe=="object"?xe.text:xe;return i.jsx("li",{children:be},me)})})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:()=>window.print(),children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>K(!1),children:""})]})]})})]})},Ye=({label:r,id:t,error:s,textarea:l,...c})=>{const u=l?"textarea":"input";return i.jsxs("div",{className:`input-group ${s?"input-group--error":""} ${c.wrapperClassName||""}`,children:[r&&i.jsx("label",{htmlFor:t,className:"input-label",children:r}),i.jsx(u,{id:t,className:`input-field ${c.className||""}`,style:c.style,...c}),s&&i.jsx("span",{className:"input-error",children:s})]})},Ui="app-data",En={_cacheByUserId:new Map,async _getCurrentUserId(){const{data:r,error:t}=await ve.auth.getUser();if(t)throw t;return r?.user?.id||null},_getUserScopedPath(r,t){if(!r)throw new Error("User ID is required");const s=String(t||"").replace(/^\/+/,"");return`${r}/${s}`},clearCache(r=null){r?this._cacheByUserId.delete(r):this._cacheByUserId.clear()},async fetchPriceList(r=null){const t=r||await this._getCurrentUserId();if(!t)return new Map;const s=this._cacheByUserId.get(t);if(s)return s;try{const{data:l,error:c}=await ve.storage.from(Ui).list(t);if(c)return console.warn("Failed to list price files:",c.message),new Map;if(!l||l.length===0)return new Map;const u=new Map,d=l.filter(p=>p.name.endsWith(".csv")).map(async p=>{const m=this._getUserScopedPath(t,p.name),{data:y,error:v}=await ve.storage.from(Ui).download(m);if(v)return console.error(`Failed to download ${p.name}:`,v),null;const b=await y.arrayBuffer();try{return new TextDecoder("shift-jis").decode(b)}catch(S){try{return new TextDecoder("utf-8").decode(b)}catch{return console.warn("TextDecoder failed (shift-jis/utf-8). Skipping file:",p.name,S),null}}}),f=await Promise.all(d);for(const p of f){if(!p)continue;const m=this.parseCSV(p);for(const[y,v]of m)if(u.has(y)){const b=u.get(y);v.dateStr>b.dateStr&&u.set(y,v)}else u.set(y,v)}return this._cacheByUserId.set(t,u),u}catch(l){return console.error("Error in fetchPriceList:",l),new Map}},async getFileList(r=null){try{const t=r||await this._getCurrentUserId();if(!t)return[];const{data:s,error:l}=await ve.storage.from(Ui).list(t);if(l)throw l;return s.filter(c=>c.name.endsWith(".csv"))||[]}catch(t){return console.error("Error fetching file list:",t),[]}},async uploadPriceList(r,t=null){try{const s=t||await this._getCurrentUserId();if(!s)throw new Error("");const l=r.name;this.clearCache(s);const c=this._getUserScopedPath(s,l),{data:u,error:d}=await ve.storage.from(Ui).upload(c,r,{upsert:!0,contentType:"text/csv"});if(d)throw d;return{success:!0,data:u}}catch(s){return console.error("Error uploading price list:",s),{success:!1,error:s}}},async deletePriceFile(r,t=null){try{const s=t||await this._getCurrentUserId();if(!s)throw new Error("");this.clearCache(s);const l=this._getUserScopedPath(s,r),{data:c,error:u}=await ve.storage.from(Ui).remove([l]);if(u)throw u;if(!c||c.length===0)throw new Error("");return{success:!0,data:c}}catch(s){return console.error("Error deleting price file:",s),{success:!1,error:s}}},parseCSV(r){const t=new Map,s=r.split(/\r?\n/).filter(c=>c.trim());if(s.length===0)return t;if(s.some(c=>c.startsWith("D,")||c.startsWith('"D",')))for(let c of s){const u=[];let d="",f=!1;for(let _=0;_<c.length;_++){const j=c[_];j==='"'?f=!f:j===","&&!f?(u.push(d),d=""):d+=j}u.push(d);const p=u.map(_=>(_=_.trim(),_.startsWith('"')&&_.endsWith('"')?_.slice(1,-1):_));if(p[0]!=="D")continue;const m=p[1],y=p[8],v=p[14],b=p[18],S=p[20];if(v&&b){const _=parseFloat(b);if(!isNaN(_)){const j={price:_,vendor:y,unit:S,dateStr:m};if(t.has(v)){const O=t.get(v);m>O.dateStr&&t.set(v,j)}else t.set(v,j)}}}else{let c={name:-1,price:-1,unit:-1,vendor:-1},u=0;if(s[0].split(",").map(p=>p.trim().replace(/^"|"$/g,"")).forEach((p,m)=>{["","","","","name","item"].some(y=>p.includes(y))&&(c.name=m),["","","","","price","cost"].some(y=>p.includes(y))&&(c.price=m),["","unit"].some(y=>p.includes(y))&&(c.unit=m),["","","","vendor","supplier"].some(y=>p.includes(y))&&(c.vendor=m)}),c.name===-1&&c.price===-1){c={name:0,price:1,unit:2,vendor:3};const p=s[0].split(",");isNaN(parseFloat(p[1]))&&(u=1)}else u=1;const f=new Date().toISOString().slice(0,10).replace(/-/g,"/");for(let p=u;p<s.length;p++){const m=s[p],y=[];let v="",b=!1;for(let N=0;N<m.length;N++){const z=m[N];z==='"'?b=!b:z===","&&!b?(y.push(v),v=""):v+=z}y.push(v);const S=y.map(N=>(N=N.trim(),N.startsWith('"')&&N.endsWith('"')?N.slice(1,-1):N)),_=c.name>-1?S[c.name]:null,j=c.price>-1?S[c.price]:null,O=c.unit>-1?S[c.unit]:"",D=c.vendor>-1?S[c.vendor]:"";if(_&&j){const N=parseFloat(j.replace(/[^0-9.]/g,""));isNaN(N)||t.set(_,{price:N,vendor:D,unit:O,dateStr:f})}}}return t},async getPriceListArray(r=null){const t=await this.fetchPriceList(r),s=[];for(const[l,c]of t.entries())typeof c=="object"?s.push({name:l,...c}):s.push({name:l,price:c});return s.sort((l,c)=>l.dateStr&&c.dateStr?c.dateStr.localeCompare(l.dateStr):l.name.localeCompare(c.name))},async getPrice(r,t=null){return r&&(await this.fetchPriceList(t)).get(r)||null}},on={async _getCurrentUserId(){const{data:r,error:t}=await ve.auth.getUser();if(t)throw t;return r?.user?.id||null},async saveConversion(r,t,s,l=null){try{const c=await this._getCurrentUserId();if(!c)throw new Error("");const{data:u,error:d}=await ve.from("unit_conversions").upsert({user_id:c,ingredient_name:r,packet_size:parseFloat(t),packet_unit:s,last_price:l?parseFloat(l):null,updated_at:new Date().toISOString()},{onConflict:"user_id,ingredient_name"}).select().single();if(d)throw d;return{ingredientName:u.ingredient_name,packetSize:u.packet_size,packetUnit:u.packet_unit,lastPrice:u.last_price,updatedAt:u.updated_at}}catch(c){throw console.error("Error saving conversion:",c),c}},async getConversion(r){try{const t=await this._getCurrentUserId();if(!t)return null;const{data:s,error:l}=await ve.from("unit_conversions").select("*").eq("ingredient_name",r).eq("user_id",t).single();return l?(l.code==="PGRST116"||console.warn("Error fetching conversion:",l),null):{ingredientName:s.ingredient_name,packetSize:s.packet_size,packetUnit:s.packet_unit,lastPrice:s.last_price,updatedAt:s.updated_at}}catch(t){return console.error("Error in getConversion:",t),null}},async getAllConversions(){try{const r=await this._getCurrentUserId();if(!r)return new Map;const{data:t,error:s}=await ve.from("unit_conversions").select("*").eq("user_id",r);if(s)throw s;const l=new Map;return t.forEach(c=>{l.set(c.ingredient_name,{ingredientName:c.ingredient_name,packetSize:c.packet_size,packetUnit:c.packet_unit,lastPrice:c.last_price,updatedAt:c.updated_at})}),l}catch(r){return console.error("Error in getAllConversions:",r),new Map}},async deleteConversion(r){try{const t=await this._getCurrentUserId();if(!t)throw new Error("");const{error:s}=await ve.from("unit_conversions").delete().eq("ingredient_name",r).eq("user_id",t);if(s)throw s;return{success:!0}}catch(t){throw console.error("Error deleting conversion:",t),t}}},T0=({isOpen:r,onClose:t,onApply:s,ingredientName:l,currentCost:c,currentQuantity:u,unit:d="g",initialPurchaseCost:f,initialContentAmount:p})=>{const[m,y]=w.useState(""),[v,b]=w.useState(""),[S,_]=w.useState(d),[j,O]=w.useState(!1),[D,N]=w.useState(!1);w.useEffect(()=>{r&&l&&z()},[r,l]);const z=async()=>{if(N(!0),f&&p){y(f),b(p);const I=await on.getConversion(l);_(I&&I.packetUnit||d)}else{const I=await on.getConversion(l);if(I)b(I.packetSize),_(I.packetUnit||d),I.lastPrice&&y(I.lastPrice);else try{const $=await En.getPrice(l);if($)if(y(c||$.price),$.unit){const Y=$.unit.match(/^(\d+(?:\.\d+)?)?\s*(.*)$/);if(Y){let T=Y[1]?parseFloat(Y[1]):1,A=Y[2]?Y[2].trim().toLowerCase():"";A==="kg"?(T*=1e3,A="g"):A==="l"?(T*=1e3,A="ml"):A==="pk"||A==="pack"?A="":A==="bag"?A="":(A==="pc"||A==="pcs")&&(A=""),b(T),_(A||d)}else b(1),_($.unit)}else b(""),_(d);else b(""),y(c||""),_(d)}catch($){console.warn("Failed to load master price:",$),b(""),y(c||""),_(d)}}N(!1)},q=()=>{const I=parseFloat(m),$=parseFloat(v);return!I||!$?0:["g","ml","cc"].includes(S)?I/$*1e3:I/$},U=async()=>{const I=q();if(j&&v)try{await on.saveConversion(l,v,S,m)}catch($){console.error("Failed to save default conversion:",$)}s(I,S,m,v),t()};if(!r)return null;const C=q(),B=u?C*(u/(["g","ml"].includes(d)?1e3:1)):0;return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"90%",maxWidth:"350px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[i.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1.1rem",color:"#000"},children:""}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),i.jsx("div",{style:{fontWeight:"bold"},children:l||"()"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:" ()"}),i.jsx("input",{type:"number",value:m,onChange:I=>y(I.target.value),className:"input-field",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),i.jsxs("div",{style:{display:"flex",gap:"4px"},children:[i.jsx("input",{type:"number",value:v,onChange:I=>b(I.target.value),className:"input-field",style:{flex:1,padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"}),i.jsxs("select",{value:S,onChange:I=>_(I.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white"},children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:"p"}),i.jsx("option",{value:"cc",children:"cc"}),!["g","ml","","","","","","cc"].includes(S)&&i.jsx("option",{value:S,children:S})]})]})]})]}),i.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:D?i.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem"},children:"CSV..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{style:{fontSize:"0.9rem"},children:" (1kg/1):"}),i.jsxs("span",{style:{fontWeight:"bold"},children:["",Math.round(C).toLocaleString()]})]}),u&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#666",fontSize:"0.85rem"},children:[i.jsxs("span",{children:[" (",u,d,"):"]}),i.jsxs("span",{children:["",Math.round(B).toLocaleString()]})]})]})}),i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"checkbox",id:"saveDefault",checked:j,onChange:I=>O(I.target.checked),style:{marginRight:"8px"}}),i.jsxs("label",{htmlFor:"saveDefault",style:{fontSize:"0.9rem",cursor:"pointer"},children:["(",v,S,")"]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"10px",border:"1px solid #ccc",background:"white",borderRadius:"4px",cursor:"pointer"},children:""}),i.jsx("button",{type:"button",onClick:U,disabled:!m||!v,style:{flex:1,padding:"10px",border:"none",background:!m||!v?"#ccc":"#D2691E",color:"white",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:""})]})]})})},hE=({formData:r,setFormData:t})=>{const[s,l]=w.useState(new Map),c=w.useMemo(()=>Array.from(s.keys()),[s]),[u,d]=w.useState(null),[f,p]=w.useState([]),[m,y]=w.useState({isOpen:!1,type:null,index:null}),[v,b]=w.useState(new Map);w.useEffect(()=>{(async()=>{const[A,P]=await Promise.all([En.fetchPriceList(),on.getAllConversions()]);l(A),b(P)})()},[]);const _=(T=>T.reduce((A,P)=>A+(parseFloat(P.quantity)||0),0))(r.flours||[]),j=T=>!_||_===0?0:((parseFloat(T)||0)/_*100).toFixed(1),O=(T,A,P)=>{const L=[...r.flours||[]];if(L[T]={...L[T],[A]:P},A==="name"){if(P.trim()){const k=P.toLowerCase(),G=c.filter(X=>X.toLowerCase().includes(k));p(G.slice(0,10)),d({type:"flour",index:T})}else p([]),d(null);const K=s.get(P);if(K){const k=typeof K=="object"?K.price:K,G=typeof K=="object"?K.vendor:null;L[T].purchaseCostRef=k,L[T].vendorRef=G;const X=v.get(P);if(X&&X.packetSize){let ce=0;["g","ml","cc",""].includes(X.packetUnit)?ce=k/X.packetSize*1e3:ce=k/X.packetSize,L[T].purchaseCost=Math.round(ce*100)/100,L[T].unit="g"}else L[T].purchaseCost||(L[T].purchaseCost=k)}else L[T].purchaseCostRef=null,L[T].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(A)||A==="name"){const K=L[T],k=parseFloat(K.quantity),G=parseFloat(K.purchaseCost);if(!isNaN(k)&&!isNaN(G)){let X=0;K.unit==="g"||K.unit===""||!K.unit?X=k/1e3*G:X=k*G;const ce=Math.round(X*100)/100;ce!==K.cost&&(L[T].cost=ce)}}t(K=>({...K,flours:L}))},D=(T,A,P)=>{const L=[...r.breadIngredients||[]];if(L[T]={...L[T],[A]:P},A==="name"){if(P.trim()){const k=P.toLowerCase(),G=c.filter(X=>X.toLowerCase().includes(k));p(G.slice(0,10)),d({type:"ingredient",index:T})}else p([]),d(null);const K=s.get(P);if(K){const k=typeof K=="object"?K.price:K,G=typeof K=="object"?K.vendor:null;L[T].purchaseCostRef=k,L[T].vendorRef=G;const X=v.get(P);if(X&&X.packetSize){let ce=0;["g","ml","cc",""].includes(X.packetUnit)?(ce=k/X.packetSize*1e3,L[T].unit="g"):["kg","l",""].includes(X.packetUnit.toLowerCase())?(ce=k/X.packetSize,L[T].unit="g"):(ce=k/X.packetSize,L[T].unit=X.packetUnit),L[T].purchaseCost=Math.round(ce*100)/100}else L[T].purchaseCost||(L[T].purchaseCost=k)}else L[T].purchaseCostRef=null,L[T].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(A)||A==="name"){const K=L[T],k=parseFloat(K.quantity),G=parseFloat(K.purchaseCost);if(!isNaN(k)&&!isNaN(G)){let X=0;const ce=K.unit?K.unit.trim().toLowerCase():"g";ce==="g"||ce===""?X=k/1e3*G:X=k*G;const de=Math.round(X*100)/100;de!==K.cost&&(L[T].cost=de)}}t(K=>({...K,breadIngredients:L}))},N=()=>{t(T=>({...T,flours:[...T.flours||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},z=()=>{t(T=>({...T,breadIngredients:[...T.breadIngredients||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},q=T=>{t(A=>({...A,flours:A.flours.filter((P,L)=>L!==T)}))},U=T=>{t(A=>({...A,breadIngredients:A.breadIngredients.filter((P,L)=>L!==T)}))},C=(T,A,P)=>{T==="flour"?O(A,"name",P):D(A,"name",P),d(null),p([])},B=Us(un(ol),un(zs,{coordinateGetter:pl})),I=T=>{const{active:A,over:P}=T;A.id!==P.id&&t(L=>{const k=L.flours.some(ce=>ce.id===A.id)?"flours":"breadIngredients",G=L[k].findIndex(ce=>ce.id===A.id),X=L[k].findIndex(ce=>ce.id===P.id);return G!==-1&&X!==-1?{...L,[k]:qa(L[k],G,X)}:L})};w.useEffect(()=>{if(!r.flours)t(T=>({...T,flours:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const T=r.flours.map(A=>A.id?A:{...A,id:crypto.randomUUID()});JSON.stringify(T)!==JSON.stringify(r.flours)&&t(A=>({...A,flours:T}))}if(!r.breadIngredients)t(T=>({...T,breadIngredients:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const T=r.breadIngredients.map(A=>A.id?A:{...A,id:crypto.randomUUID()});JSON.stringify(T)!==JSON.stringify(r.breadIngredients)&&t(A=>({...A,breadIngredients:T}))}},[]);const $=(T,A,P,L)=>{const{type:K,index:k}=m;t(G=>{if(K==="flour"){const X=[...G.flours],ce={...X[k],purchaseCost:T,unit:A,purchase_cost:P,content_amount:L},de=parseFloat(ce.quantity),M=parseFloat(T);if(!isNaN(de)&&!isNaN(M)){let V=0;A==="g"||A===""?V=de/1e3*M:V=de*M,ce.cost=Math.round(V*100)/100}return X[k]=ce,on.getAllConversions().then(V=>b(V)),{...G,flours:X}}else if(K==="ingredient"){const X=[...G.breadIngredients],ce={...X[k],purchaseCost:T,unit:A,purchase_cost:P,content_amount:L},de=parseFloat(ce.quantity),M=parseFloat(T);if(!isNaN(de)&&!isNaN(M)){let V=0;A==="g"||A===""?V=de/1e3*M:V=de*M,ce.cost=Math.round(V*100)/100}return X[k]=ce,on.getAllConversions().then(V=>b(V)),{...G,breadIngredients:X}}return G})},Y=m.isOpen&&m.index!==null?m.type==="flour"?r.flours[m.index]:r.breadIngredients[m.index]:null;return i.jsxs("div",{className:"bread-form",children:[i.jsxs(Nt,{className:"mb-md bread-card",style:{position:"relative",zIndex:10},children:[i.jsxs("div",{className:"bread-header",children:[i.jsxs("h3",{children:[" (Total: ",_,"g)"]}),i.jsx("span",{className:"bread-badge",children:"Base (100%)"})]}),i.jsxs("div",{className:"bread-scroll-wrapper",children:[i.jsxs("div",{className:"bread-grid-header",children:[i.jsx("span",{})," ",i.jsx("span",{children:""}),i.jsx("span",{children:" (g)"}),i.jsx("span",{className:"text-center",children:"%"}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsx("div",{className:"bread-grid-body",children:i.jsx(Ds,{sensors:B,collisionDetection:oh,onDragEnd:I,id:"flours-dnd",children:i.jsx(Fi,{items:r.flours||[],strategy:Qo,children:(r.flours||[]).map((T,A)=>i.jsx(fE,{id:T.id,index:A,item:T,onChange:O,onRemove:q,onSuggestionSelect:C,activeSuggestion:u,filteredSuggestions:f,setActiveSuggestion:d,setFilteredSuggestions:p,handleSuggestionSelect:C,allIngredientNames:c,calculatePercentage:j,floursLength:(r.flours||[]).length,onOpenConversion:()=>y({isOpen:!0,type:"flour",index:A})},T.id))})})})]}),i.jsx(se,{type:"button",variant:"secondary",size:"sm",onClick:N,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),i.jsxs(Nt,{className:"mb-md bread-card",style:{position:"relative",zIndex:5},children:[i.jsxs("div",{className:"bread-header",children:[i.jsx("h3",{children:""}),i.jsx("span",{className:"bread-subtitle",children:"Water, Salt, Yeast, etc."})]}),i.jsxs("div",{className:"bread-scroll-wrapper",children:[i.jsxs("div",{className:"bread-grid-header",children:[i.jsx("span",{})," ",i.jsx("span",{children:""}),i.jsx("span",{children:" (g)"}),i.jsx("span",{className:"text-center",children:"%"}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsx("div",{className:"bread-grid-body",children:i.jsx(Ds,{sensors:B,collisionDetection:oh,onDragEnd:I,id:"breadIngredients-dnd",children:i.jsx(Fi,{items:r.breadIngredients||[],strategy:Qo,children:(r.breadIngredients||[]).map((T,A)=>i.jsx(pE,{id:T.id,index:A,item:T,onChange:D,onRemove:U,onSuggestionSelect:C,activeSuggestion:u,filteredSuggestions:f,setActiveSuggestion:d,setFilteredSuggestions:p,handleSuggestionSelect:C,allIngredientNames:c,calculatePercentage:j,onOpenConversion:()=>y({isOpen:!0,type:"ingredient",index:A})},T.id))})})})]}),i.jsx(se,{type:"button",variant:"secondary",size:"sm",onClick:z,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),i.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:i.jsx(se,{variant:"secondary",onClick:()=>window.history.back(),style:{width:"120px"},children:""})}),i.jsx(T0,{isOpen:m.isOpen,onClose:()=>y({isOpen:!1,type:null,index:null}),onApply:$,ingredientName:Y?.name||"",currentCost:Y?.purchaseCost,currentQuantity:Y?.quantity,unit:Y?.unit||"g",initialPurchaseCost:Y?.purchase_cost,initialContentAmount:Y?.content_amount})]})},fE=({id:r,index:t,item:s,onChange:l,onRemove:c,onSuggestionSelect:u,activeSuggestion:d,filteredSuggestions:f,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:y,allIngredientNames:v,calculatePercentage:b,floursLength:S,onOpenConversion:_})=>{const{attributes:j,listeners:O,setNodeRef:D,transform:N,transition:z,isDragging:q}=fl({id:r}),U={transform:Xn.Transform.toString(N),transition:z,opacity:q?.5:1,position:"relative",zIndex:q?999:"auto",backgroundColor:"white"};return i.jsxs("div",{ref:D,style:U,className:"bread-row",children:[i.jsx("div",{...j,...O,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),i.jsxs("div",{style:{position:"relative",zIndex:d?.type==="flour"&&d?.index===t?1e4:"auto"},children:[i.jsx(Ye,{value:s.name,onChange:C=>{if(l(t,"name",C.target.value),C.target.value.trim()){const B=C.target.value.toLowerCase(),I=v.filter($=>$.toLowerCase().includes(B));m(I.slice(0,10)),p({type:"flour",index:t})}else m([]),p(null)},onFocus:()=>{if(s.name.trim()){const C=s.name.toLowerCase(),B=v.filter(I=>I.toLowerCase().includes(C));m(B.slice(0,10)),p({type:"flour",index:t})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),d&&d.type==="flour"&&d.index===t&&f.length>0&&i.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:f.map((C,B)=>i.jsx("li",{onMouseDown:()=>y("flour",t,C),style:{padding:"8px 12px",cursor:"pointer",borderBottom:B<f.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:I=>I.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:I=>I.currentTarget.style.backgroundColor="white",children:C},B))})]}),i.jsx(Ye,{type:"number",step:"any",value:s.quantity,onChange:C=>l(t,"quantity",C.target.value),placeholder:"0",className:"bread-input qty"}),i.jsxs("div",{className:"bread-percent",children:[b(s.quantity),"%"]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Ye,{type:"number",step:"any",value:s.purchaseCost||"",onChange:C=>l(t,"purchaseCost",C.target.value),placeholder:s.purchaseCostRef?`Ref: ${s.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:s.purchaseCostRef?`: ${s.purchaseCostRef}`:"No data"}),i.jsx("button",{type:"button",onClick:_,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",s.purchaseCostRef," ",s.vendorRef&&`(${s.vendorRef})`]})]}),i.jsx(Ye,{type:"number",step:"any",value:s.cost||"",onChange:C=>l(t,"cost",C.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:C=>l(t,"isAlcohol",C.target.checked),title:" (10%)"})}),S>1&&i.jsx("button",{type:"button",className:"bread-remove",onClick:()=>c(t),children:""})]})},pE=({id:r,index:t,item:s,onChange:l,onRemove:c,onSuggestionSelect:u,activeSuggestion:d,filteredSuggestions:f,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:y,allIngredientNames:v,calculatePercentage:b,onOpenConversion:S})=>{const{attributes:_,listeners:j,setNodeRef:O,transform:D,transition:N,isDragging:z}=fl({id:r}),q={transform:Xn.Transform.toString(D),transition:N,opacity:z?.5:1,position:"relative",zIndex:z?999:"auto",backgroundColor:"white"};return i.jsxs("div",{ref:O,style:q,className:"bread-row",children:[i.jsx("div",{..._,...j,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),i.jsxs("div",{style:{position:"relative",zIndex:d?.type==="ingredient"&&d?.index===t?1e4:"auto"},children:[i.jsx(Ye,{value:s.name,onChange:U=>{if(l(t,"name",U.target.value),U.target.value.trim()){const C=U.target.value.toLowerCase(),B=v.filter(I=>I.toLowerCase().includes(C));m(B.slice(0,10)),p({type:"ingredient",index:t})}else m([]),p(null)},onFocus:()=>{if(s.name.trim()){const U=s.name.toLowerCase(),C=v.filter(B=>B.toLowerCase().includes(U));m(C.slice(0,10)),p({type:"ingredient",index:t})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),d&&d.type==="ingredient"&&d.index===t&&f.length>0&&i.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:f.map((U,C)=>i.jsx("li",{onMouseDown:()=>y("ingredient",t,U),style:{padding:"8px 12px",cursor:"pointer",borderBottom:C<f.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:B=>B.currentTarget.style.backgroundColor="white",children:U},C))})]}),i.jsx(Ye,{type:"number",step:"any",value:s.quantity,onChange:U=>l(t,"quantity",U.target.value),placeholder:"0",className:"bread-input qty"}),i.jsxs("div",{className:"bread-percent",children:[b(s.quantity),"%"]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Ye,{type:"number",step:"any",value:s.purchaseCost||"",onChange:U=>l(t,"purchaseCost",U.target.value),placeholder:s.purchaseCostRef?`Ref: ${s.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:s.purchaseCostRef?`: ${s.purchaseCostRef}`:"No data"}),i.jsx("button",{type:"button",onClick:S,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",s.purchaseCostRef," ",s.vendorRef&&`(${s.vendorRef})`]})]}),i.jsx(Ye,{type:"number",step:"any",value:s.cost||"",onChange:U=>l(t,"cost",U.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:U=>l(t,"isAlcohol",U.target.checked),title:" (10%)"})}),i.jsx("button",{type:"button",className:"bread-remove",onClick:()=>c(t),children:""})]})},_h={_csvCache:null,_csvCacheKey:null,_lastDbResults:null,_lastDbQuery:null,invalidateCache(){this._csvCache=null,this._csvCacheKey=null,this._lastDbResults=null,this._lastDbQuery=null},async _searchFromDatabase(r){try{console.log(" Searching DB for:",r);const{data:t,error:s}=await ve.rpc("search_ingredients",{search_query:r,max_results:15});return s?(console.warn(" Database search failed:",s),console.warn("Error message:",s.message),console.warn("Error code:",s.code),null):(console.log(" DB search result:",t),t||[])}catch(t){return console.warn(" Database search exception:",t),null}},async search(r){if(!r||r.trim().length===0)return this._lastDbResults=null,this._lastDbQuery=null,[];const t=r.toLowerCase().trim();try{const s=await this._searchFromDatabase(t);if(s&&Array.isArray(s)){this._lastDbResults=s,this._lastDbQuery=t;const c=s.map(f=>({name:f.ingredient_name,price:f.last_price,size:f.packet_size,unit:f.packet_unit,source:"manual",displaySource:" "}));if(!this._csvCache){const f=await En.getPriceListArray();this._csvCache=f.map(p=>({name:p.name,price:p.price,size:null,unit:p.unit,source:"csv",displaySource:" CSV"}))}const u=new Set(c.map(f=>f.name)),d=this._csvCache.filter(f=>f.name.toLowerCase().includes(t)&&!u.has(f.name)).slice(0,5);return[...c,...d]}console.info(" Database search unavailable (dbResults is null/empty), using fallback CSV search"),console.log(" dbResults:",s);const l=await this._fallbackSearch(t);return console.log(" Fallback search returned:",l.length,"results"),l}catch(s){return console.error("Error searching ingredients:",s),[]}},async _fallbackSearch(r){try{if(!this._csvCache){console.log(" Building cache from CSV and manual data...");const[s,l]=await Promise.all([En.getPriceListArray(),on.getAllConversions()]);console.log(" CSV Data rows:",s.length),console.log(" Manual Data items:",l.size);const c=Array.from(l.values()).map(p=>({name:p.ingredientName,price:p.lastPrice,size:p.packetSize,unit:p.packetUnit,source:"manual",displaySource:" "})),u=s.map(p=>({name:p.name,price:p.price,size:null,unit:p.unit,source:"csv",displaySource:" CSV"})),d=new Set(c.map(p=>p.name)),f=u.filter(p=>!d.has(p.name));this._csvCache=[...c,...f],console.log(" Cache built. Total items:",this._csvCache.length)}return this._csvCache.filter(s=>s.name.toLowerCase().includes(r)).slice(0,15).sort((s,l)=>{const c=s.name.toLowerCase(),u=l.name.toLowerCase();return c===r&&u!==r?-1:u===r&&c!==r?1:c.startsWith(r)&&!u.startsWith(r)?-1:u.startsWith(r)&&!c.startsWith(r)?1:c.localeCompare(u,"ja")})}catch(t){return console.error("Error in fallback search:",t),[]}}},gE=({value:r,onChange:t,placeholder:s,disabled:l,onSelect:c})=>{const[u,d]=w.useState([]),[f,p]=w.useState(!1),[m,y]=w.useState(-1),v=w.useRef(null),b=w.useRef(null),[S,_]=w.useState({top:0,left:0,width:0});w.useEffect(()=>{const U=I=>{v.current&&!v.current.contains(I.target)&&b.current&&!b.current.contains(I.target)&&p(!1)},C=I=>{b.current&&b.current.contains(I.target)||p(!1)},B=()=>{f&&j()};return document.addEventListener("mousedown",U),window.addEventListener("scroll",C,{capture:!0}),window.addEventListener("resize",B),()=>{document.removeEventListener("mousedown",U),window.removeEventListener("scroll",C,{capture:!0}),window.removeEventListener("resize",B)}},[f]);const j=()=>{if(v.current){const U=v.current.getBoundingClientRect();_({bottom:window.innerHeight-U.top,left:U.left,width:U.width})}};w.useEffect(()=>{f&&j()},[f,u]);const O=w.useRef(0),D=w.useRef(null),N=async U=>{const C=U.target.value;if(t(U),D.current&&clearTimeout(D.current),C.length===0){p(!1);return}D.current=setTimeout(async()=>{if(C.length>0){const B=++O.current;console.log(" AutocompleteInput: Fetching suggestions for:",C);const I=await _h.search(C);console.log(" AutocompleteInput: Got",I.length,"suggestions"),B===O.current&&(d(I),p(I.length>0),y(-1))}},150)},z=U=>{const C={target:{value:U.name}};t(C),p(!1),c&&c(U)},q=U=>{f&&(U.key==="ArrowDown"?(U.preventDefault(),y(C=>C<u.length-1?C+1:C)):U.key==="ArrowUp"?(U.preventDefault(),y(C=>C>0?C-1:-1)):U.key==="Enter"?m>=0&&(U.preventDefault(),z(u[m])):U.key==="Escape"&&p(!1))};return i.jsxs("div",{className:"autocomplete-wrapper",ref:v,children:[i.jsx("input",{type:"text",className:"input-field autocomplete-input",value:r,onChange:N,onKeyDown:q,onFocus:async()=>{if(r&&r.length>0){j();const U=await _h.search(r);d(U),p(U.length>0)}else j()},placeholder:s,disabled:l}),f&&ka.createPortal(i.jsx("ul",{className:"suggestions-list",ref:b,style:{position:"fixed",top:"auto",bottom:S.bottom,left:Math.max(8,S.left-16),right:Math.max(8,window.innerWidth-(S.left+S.width+16)),minWidth:"calc(100% - 16px)",maxWidth:`${Math.min(600,window.innerWidth-16)}px`,zIndex:9999,marginBottom:"4px"},children:u.map((U,C)=>i.jsxs("li",{className:`suggestion-item ${C===m?"selected":""}`,onClick:()=>z(U),onMouseEnter:()=>y(C),children:[i.jsxs("div",{className:"suggestion-main",children:[i.jsx("span",{className:"suggestion-name",children:U.name}),i.jsx("span",{className:"suggestion-source",children:U.displaySource})]}),i.jsxs("div",{className:"suggestion-details",children:[U.price&&`${Number(U.price).toLocaleString()}`,U.size&&` / ${U.size}${U.unit}`,!U.size&&U.unit&&` / ${U.unit}`]})]},`${U.source}-${C}`))}),document.body)]})},mE=_e.memo(({id:r,index:t,item:s,groupId:l,onChange:c,onRemove:u,handleSuggestionSelect:d,onOpenConversion:f})=>{const{attributes:p,listeners:m,setNodeRef:y,transform:v,transition:b,isDragging:S}=fl({id:s.id,data:{groupId:l,index:t}}),_={transform:Xn.Translate.toString(v),transition:b,opacity:S?.3:1,position:"relative",zIndex:S?999:"auto"};return i.jsxs("div",{ref:y,style:_,className:"form-ingredient-row",children:[i.jsx("div",{...p,...m,className:"ingredient-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",touchAction:"none"},children:""}),i.jsx("div",{className:"ingredient-name",children:i.jsx(gE,{value:s.name,onChange:j=>c(l,t,"name",j.target.value),onSelect:j=>d(l,t,j),placeholder:""})}),i.jsx("div",{className:"ingredient-qty",children:i.jsx(Ye,{value:s.quantity,onChange:j=>c(l,t,"quantity",j.target.value),placeholder:"0",style:{width:"100%"},wrapperClassName:"input-group--no-margin"})}),i.jsx("div",{className:"ingredient-unit",children:i.jsx(Ye,{value:s.unit,onChange:j=>c(l,t,"unit",j.target.value),placeholder:"",style:{width:"100%"},wrapperClassName:"input-group--no-margin"})}),i.jsxs("div",{className:"ingredient-cost",style:{position:"relative"},children:[i.jsx(Ye,{type:"number",value:s.purchaseCost,onChange:j=>c(l,t,"purchaseCost",j.target.value),step:"0.01",placeholder:s.purchaseCostRef?"Ref":"",style:{width:"100%",borderColor:s.purchaseCostRef&&!s.purchaseCost?"orange":"",paddingRight:"20px"},title:s.purchaseCostRef?`: ${s.purchaseCostRef}${s.vendorRef?` (${s.vendorRef})`:""}`:"No data",wrapperClassName:"input-group--no-margin"}),i.jsx("button",{type:"button",onClick:f,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),s.purchaseCostRef&&i.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all",textAlign:"center"},children:["",s.purchaseCostRef]})]}),i.jsx("div",{className:"ingredient-cost",children:i.jsx(Ye,{type:"number",step:"0.01",value:s.cost,onChange:j=>c(l,t,"cost",j.target.value),placeholder:"",style:{width:"100%"},wrapperClassName:"input-group--no-margin"})}),i.jsx("div",{className:"ingredient-alcohol",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx("input",{type:"checkbox",checked:s.isAlcohol||!1,onChange:j=>c(l,t,"isAlcohol",j.target.checked),title:" (10%)"})}),i.jsx("div",{className:"remove-button-cell",children:i.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(l,t),children:""})})]})},(r,t)=>r.id===t.id&&r.index===t.index&&r.groupId===t.groupId&&JSON.stringify(r.item)===JSON.stringify(t.item)),yE=({section:r,sections:t,onSectionChange:s,onRemoveSection:l,children:c})=>{const{setNodeRef:u}=hl({id:r.id});return i.jsxs(Nt,{className:"ingredient-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[i.jsx(Ye,{value:r.name,onChange:d=>s(r.id,d.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:t.length>1&&i.jsx("button",{type:"button",onClick:()=>l(r.id),className:"group-delete-btn",children:""})})]}),i.jsxs("div",{className:"recipe-list-header",style:{marginBottom:"0.5rem"},children:[i.jsx("span",{}),i.jsx("span",{children:""}),i.jsx("span",{children:""}),i.jsx("span",{children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{style:{textAlign:"center"},children:""}),i.jsx("span",{})]}),i.jsxs("div",{ref:u,className:"section-ingredients-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[c,r.items.length===0&&i.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},vE=({formData:r,setFormData:t,priceList:s})=>{Array.from(s.keys());const[l,c]=w.useState(new Map);w.useEffect(()=>{on.getAllConversions().then(q=>c(q))},[]);const[u,d]=w.useState({isOpen:!1,groupId:null,index:null});w.useEffect(()=>{if(!r.ingredientSections){const q=r.ingredientGroups||[{id:"default",name:""}],U=r.ingredients||[],C=q.map($=>({id:$.id,name:$.name,items:U.filter(Y=>$.id==="default"&&!Y.groupId?!0:Y.groupId===$.id)})),B=new Set(C.flatMap($=>$.items.map(Y=>Y.id))),I=U.filter($=>!B.has($.id));I.length>0&&(C.length>0?C[0].items.push(...I):C.push({id:"default",name:"",items:I})),C.length===0&&C.push({id:crypto.randomUUID(),name:"",items:[]}),t($=>({...$,ingredientSections:C}))}},[r.ingredients,r.ingredientGroups,r.ingredientSections,t]);const f=r.ingredientSections||[],p=Us(un(cl,{activationConstraint:{distance:10}}),un(ul,{activationConstraint:{delay:250,tolerance:5}}),un(zs,{coordinateGetter:pl})),m=({active:q,over:U})=>{if(!U)return;const C=q.id,B=U.id,I=f.find(Y=>Y.items.some(T=>T.id===C)),$=f.find(Y=>Y.items.some(T=>T.id===B))||f.find(Y=>Y.id===B);!I||!$||I===$||t(Y=>{const T=I.items,A=$.items,P=T.findIndex(k=>k.id===C),L=A.findIndex(k=>k.id===B);let K;if(B===$.id)K=A.length+1;else{const G=U&&q.rect.current.translated&&q.rect.current.translated.top>U.rect.top+U.rect.height?1:0;K=L>=0?L+G:A.length+1}return{...Y,ingredientSections:Y.ingredientSections.map(k=>k.id===I.id?{...k,items:T.filter(G=>G.id!==C)}:k.id===$.id?{...k,items:[...A.slice(0,K),T[P],...A.slice(K,A.length)]}:k)}})},y=({active:q,over:U})=>{if(!U)return;const C=q.id,B=U.id,I=f.find(Y=>Y.items.some(T=>T.id===C)),$=f.find(Y=>Y.items.some(T=>T.id===B))||f.find(Y=>Y.id===B);if(I&&$&&I===$){const Y=I.items.findIndex(A=>A.id===C),T=$.items.findIndex(A=>A.id===B);Y!==T&&t(A=>({...A,ingredientSections:A.ingredientSections.map(P=>P.id===I.id?{...P,items:qa(P.items,Y,T)}:P)}))}},v=(q,U,C,B)=>{const{groupId:I,index:$}=u;I!==null&&$!==null&&t(Y=>{const T=Y.ingredientSections.map(A=>{if(A.id!==I)return A;const P=[...A.items],L={...P[$],purchaseCost:q,unit:U,purchase_cost:C,content_amount:B},K=parseFloat(L.quantity),k=parseFloat(q);if(!isNaN(K)&&!isNaN(k)){let G=0;const X=U?U.trim().toLowerCase():"";X==="g"||X===""?G=K/1e3*k:G=K*k,L.cost=Math.round(G*100)/100}return P[$]=L,{...A,items:P}});return on.getAllConversions().then(A=>c(A)),_h.invalidateCache(),{...Y,ingredientSections:T}})},b=u.isOpen&&u.groupId!==null&&u.index!==null?f.find(q=>q.id===u.groupId)?.items[u.index]:null,S=_e.useCallback((q,U,C,B)=>{t(I=>{const $=I.ingredientSections.map(Y=>{if(Y.id!==q)return Y;const T=[...Y.items],A={...T[U],[C]:B};if(T[U]=A,["quantity","purchaseCost","unit","name","isAlcohol"].includes(C)){const P=parseFloat(A.quantity),L=parseFloat(A.purchaseCost);if(!isNaN(P)&&!isNaN(L)){let K=0;const k=A.unit?A.unit.trim().toLowerCase():"";k==="g"||k===""||k==="ml"||k===""||k==="cc"||k===""?K=P/1e3*L:K=P*L;const G=Math.round(K*100)/100;G!==A.cost&&(A.cost=G,T[U]=A)}}if(C==="name"){const P=s.get(B);if(P){const L=typeof P=="object"?P.price:P,K=typeof P=="object"?P.vendor:null,k=typeof P=="object"?P.unit:null,G=typeof P=="object"?P.size:null;A.purchaseCostRef=L,A.vendorRef=K;const X=l.get(B);if(X&&X.packetSize){const M=X.lastPrice!==null&&X.lastPrice!==void 0&&X.lastPrice!==""?X.lastPrice:L;let V=0;const Z=(X.packetUnit||"").trim().toLowerCase();["g",""].includes(Z)?(V=M/X.packetSize*1e3,A.unit="g"):["kg",""].includes(Z)?(V=M/X.packetSize,A.unit="g"):["ml","","cc",""].includes(Z)?(V=M/X.packetSize*1e3,A.unit="ml"):["l",""].includes(Z)?(V=M/X.packetSize,A.unit="ml"):(V=M/X.packetSize,A.unit=X.packetUnit),A.purchaseCost=Math.round(V*100)/100}else{let M=L,V=k;G&&G>1&&(["g",""].includes((k||"").toLowerCase())?(M=L/G*1e3,V="g"):["ml","","cc",""].includes((k||"").toLowerCase())?(M=L/G*1e3,V="ml"):["kg",""].includes(k?k.toLowerCase():"")?(M=L/G,V="g"):["l",""].includes(k?k.toLowerCase():"")?(M=L/G,V="ml"):M=L/G),A.purchaseCost||(A.purchaseCost=Math.round(M*100)/100),!A.unit&&V&&(A.unit=V)}const ce=parseFloat(A.quantity),de=parseFloat(A.purchaseCost);if(!isNaN(ce)&&!isNaN(de)){const M=A.unit?A.unit.trim().toLowerCase():"";let V=0;M==="g"||M===""||M==="ml"||M===""||M==="cc"||M===""?V=ce/1e3*de:V=ce*de,A.cost=Math.round(V*100)/100}}else A.purchaseCostRef=null,A.vendorRef=null;T[U]=A}return{...Y,items:T}});return{...I,ingredientSections:$}})},[l,s,t]),_=_e.useCallback((q,U,C)=>{t(B=>{const I=B.ingredientSections.map($=>{if($.id!==q)return $;const Y=[...$.items],T={...Y[U]};if(T.name=C.name,C.price)if(T.purchaseCostRef=C.price,T.vendorRef=C.source==="csv"?"CSV":"Master",C.source==="manual")if(C.size&&C.size>0){const L=(C.unit||"").trim().toLowerCase();if(["g",""].includes(L)){const K=C.price/C.size*1e3;T.purchaseCost=Math.round(K*100)/100,T.unit="g"}else if(["kg",""].includes(L)){const K=C.price/C.size;T.purchaseCost=Math.round(K*100)/100,T.unit="g"}else if(["ml","","cc",""].includes(L)){const K=C.price/C.size*1e3;T.purchaseCost=Math.round(K*100)/100,T.unit="ml"}else if(["l",""].includes(L)){const K=C.price/C.size;T.purchaseCost=Math.round(K*100)/100,T.unit="ml"}else{const K=C.price/C.size;T.purchaseCost=Math.round(K*100)/100,T.unit=C.unit}}else T.purchaseCost=C.price,T.unit=C.unit;else{const L=l.get(C.name);if(L&&L.packetSize){const K=L.lastPrice!==null&&L.lastPrice!==void 0&&L.lastPrice!==""?L.lastPrice:C.price;let k=0;const G=(L.packetUnit||"").trim().toLowerCase();["g",""].includes(G)?(k=K/L.packetSize*1e3,T.unit="g"):["kg",""].includes(G)?(k=K/L.packetSize,T.unit="g"):["ml","","cc",""].includes(G)?(k=K/L.packetSize*1e3,T.unit="ml"):["l",""].includes(G)?(k=K/L.packetSize,T.unit="ml"):(k=K/L.packetSize,T.unit=L.packetUnit),T.purchaseCost=Math.round(k*100)/100}else T.purchaseCost=C.price,T.unit=C.unit}const A=parseFloat(T.quantity),P=parseFloat(T.purchaseCost);if(!isNaN(A)&&!isNaN(P)){const L=T.unit?T.unit.trim().toLowerCase():"";let K=0;L==="g"||L===""||L==="ml"||L===""||L==="cc"||L===""?K=A/1e3*P:K=A*P,T.cost=Math.round(K*100)/100}return Y[U]=T,{...$,items:Y}});return{...B,ingredientSections:I}})},[l,t]),j=_e.useCallback((q,U)=>{t(C=>({...C,ingredientSections:C.ingredientSections.map(B=>B.id===q?{...B,items:B.items.filter((I,$)=>$!==U)}:B)}))},[t]),O=q=>{const U={id:crypto.randomUUID(),name:"",quantity:"",unit:"",cost:"",purchaseCost:"",isAlcohol:!1};t(C=>({...C,ingredientSections:C.ingredientSections.map(B=>B.id===q?{...B,items:[...B.items,U]}:B)}))},D=()=>{t(q=>({...q,ingredientSections:[...q.ingredientSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},N=q=>{t(U=>({...U,ingredientSections:U.ingredientSections.filter(C=>C.id!==q)}))},z=(q,U)=>{t(C=>({...C,ingredientSections:C.ingredientSections.map(B=>B.id===q?{...B,name:U}:B)}))};return i.jsxs(Ds,{sensors:p,collisionDetection:Mv,onDragOver:m,onDragEnd:y,children:[i.jsxs("div",{className:"recipe-form-ingredients",children:[f.map(q=>i.jsx(Fi,{id:q.id,items:q.items.map(U=>U.id),strategy:Qo,children:i.jsxs(yE,{section:q,sections:f,onSectionChange:z,onRemoveSection:N,children:[q.items.map((U,C)=>i.jsx(mE,{id:U.id,index:C,item:U,groupId:q.id,onChange:S,onRemove:j,handleSuggestionSelect:_,onOpenConversion:()=>d({isOpen:!0,groupId:q.id,index:C})},U.id)),i.jsx(se,{type:"button",variant:"ghost",onClick:()=>O(q.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},q.id)),i.jsx(se,{type:"button",variant:"secondary",onClick:D,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),i.jsx(Zv,{dropAnimation:{sideEffects:Ih({styles:{active:{opacity:"0.5"}}})},children:null}),i.jsx(T0,{isOpen:u.isOpen,onClose:()=>d({isOpen:!1,groupId:null,index:null}),onApply:v,ingredientName:b?.name||"",currentCost:b?.purchaseCost,currentQuantity:b?.quantity,unit:b?.unit||"g",initialPurchaseCost:b?.purchase_cost,initialContentAmount:b?.content_amount})]})},xE=({id:r,index:t,item:s,groupId:l,onChange:c,onRemove:u})=>{const{attributes:d,listeners:f,setNodeRef:p,transform:m,transition:y,isDragging:v}=fl({id:s.id,data:{groupId:l,index:t}}),b={transform:Xn.Translate.toString(m),transition:y,opacity:v?.3:1,position:"relative",zIndex:v?999:"auto"};return i.jsxs("div",{ref:p,style:{...b,display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"flex-start"},className:"step-row",children:[i.jsx("div",{...d,...f,className:"step-drag-handle",style:{cursor:"grab",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",alignSelf:"stretch",touchAction:"none"},children:""}),i.jsx("div",{className:"step-count",style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",borderRadius:"50%",background:"#eee",fontSize:"0.8rem",fontWeight:"bold",marginTop:"8px"},children:t+1}),i.jsx("div",{style:{flex:1},children:i.jsx(Ye,{textarea:!0,value:s.text,onChange:S=>c(l,t,S.target.value),placeholder:` ${t+1}...`,style:{minHeight:"60px",width:"100%"}})}),i.jsx("div",{className:"remove-button-cell",children:i.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(l,t),title:"",children:""})})]})},bE=({section:r,sections:t,onSectionChange:s,onRemoveSection:l,children:c})=>{const{setNodeRef:u}=hl({id:r.id});return i.jsxs(Nt,{className:"step-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[i.jsx(Ye,{value:r.name,onChange:d=>s(r.id,d.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:t.length>1&&i.jsx("button",{type:"button",onClick:()=>l(r.id),className:"group-delete-btn",children:""})})]}),i.jsxs("div",{ref:u,className:"section-steps-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[c,r.items.length===0&&i.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},wE=({formData:r,setFormData:t})=>{w.useEffect(()=>{if(!r.stepSections){const b=r.stepGroups||[{id:"default",name:""}],_=(r.steps||[]||[]).map(N=>typeof N=="string"?{id:crypto.randomUUID(),text:N}:N),j=b.map(N=>({id:N.id,name:N.name,items:_.filter(z=>N.id==="default"&&!z.groupId?!0:z.groupId===N.id)})),O=new Set(j.flatMap(N=>N.items.map(z=>z.id))),D=_.filter(N=>!O.has(N.id));D.length>0&&(j.length>0?j[0].items.push(...D):j.push({id:"default",name:"",items:D})),j.length===0&&j.push({id:crypto.randomUUID(),name:"",items:[]}),t(N=>({...N,stepSections:j}))}},[r.steps,r.stepGroups,r.stepSections,t]);const s=r.stepSections||[],l=Us(un(cl,{activationConstraint:{distance:10}}),un(ul,{activationConstraint:{delay:250,tolerance:5}}),un(zs,{coordinateGetter:pl})),c=({active:b,over:S})=>{if(!S)return;const _=b.id,j=S.id,O=s.find(N=>N.items.some(z=>z.id===_)),D=s.find(N=>N.items.some(z=>z.id===j))||s.find(N=>N.id===j);!O||!D||O===D||t(N=>{const z=O.items,q=D.items,U=z.findIndex(I=>I.id===_),C=q.findIndex(I=>I.id===j);let B;if(j===D.id)B=q.length+1;else{const $=S&&b.rect.current.translated&&b.rect.current.translated.top>S.rect.top+S.rect.height?1:0;B=C>=0?C+$:q.length+1}return{...N,stepSections:N.stepSections.map(I=>I.id===O.id?{...I,items:z.filter($=>$.id!==_)}:I.id===D.id?{...I,items:[...q.slice(0,B),z[U],...q.slice(B,q.length)]}:I)}})},u=({active:b,over:S})=>{if(!S)return;const _=b.id,j=S.id,O=s.find(N=>N.items.some(z=>z.id===_)),D=s.find(N=>N.items.some(z=>z.id===j))||s.find(N=>N.id===j);if(O&&D&&O===D){const N=O.items.findIndex(q=>q.id===_),z=D.items.findIndex(q=>q.id===j);N!==z&&t(q=>({...q,stepSections:q.stepSections.map(U=>U.id===O.id?{...U,items:qa(U.items,N,z)}:U)}))}},d=(b,S,_)=>{t(j=>({...j,stepSections:j.stepSections.map(O=>{if(O.id!==b)return O;const D=[...O.items];return D[S]={...D[S],text:_},{...O,items:D}})}))},f=(b,S)=>{t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,items:j.items.filter((O,D)=>D!==S)}:j)}))},p=b=>{const S={id:crypto.randomUUID(),text:""};t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,items:[...j.items,S]}:j)}))},m=()=>{t(b=>({...b,stepSections:[...b.stepSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},y=b=>{t(S=>({...S,stepSections:S.stepSections.filter(_=>_.id!==b)}))},v=(b,S)=>{t(_=>({..._,stepSections:_.stepSections.map(j=>j.id===b?{...j,name:S}:j)}))};return i.jsxs(Ds,{sensors:l,collisionDetection:Mv,onDragOver:c,onDragEnd:u,children:[i.jsxs("div",{className:"recipe-form-steps",children:[s.map(b=>i.jsx(Fi,{id:b.id,items:b.items.map(S=>S.id),strategy:Qo,children:i.jsxs(bE,{section:b,sections:s,onSectionChange:v,onRemoveSection:y,children:[b.items.map((S,_)=>i.jsx(xE,{id:S.id,index:_,item:S,groupId:b.id,onChange:d,onRemove:f},S.id)),i.jsx(se,{type:"button",variant:"ghost",onClick:()=>p(b.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},b.id)),i.jsx(se,{type:"button",variant:"secondary",onClick:m,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),i.jsx(Zv,{dropAnimation:{sideEffects:Ih({styles:{active:{opacity:"0.5"}}})},children:null})]})},A0=({onClose:r,onImport:t,initialMode:s="url"})=>{const[l,c]=w.useState(s),[u,d]=w.useState(null),[f,p]=w.useState(""),[m,y]=w.useState(""),[v,b]=w.useState(null),[S,_]=w.useState(null),[j,O]=w.useState(!1),[D,N]=w.useState(null),[z,q]=w.useState(!1),U=L=>{L.preventDefault(),L.stopPropagation(),L.type==="dragenter"||L.type==="dragover"?q(!0):L.type==="dragleave"&&q(!1)},C=L=>{if(L.preventDefault(),L.stopPropagation(),q(!1),L.dataTransfer.files&&L.dataTransfer.files[0]){const K=L.dataTransfer.files[0];K.type.startsWith("image/")&&(b(K),_(URL.createObjectURL(K)))}},B=L=>/[---]/.test(L||""),I=async L=>{try{const K=[];K.push(L.name||""),K.push(L.description||"");const k=[];Array.isArray(L.ingredients)&&L.ingredients.forEach((Z,le)=>{Z.name&&(K.push(Z.name),k.push(le))});const G=[];if(Array.isArray(L.steps)&&L.steps.forEach((Z,le)=>{K.push(Z),G.push(le)}),K.length===0)return L;const{data:X,error:ce}=await ve.functions.invoke("translate",{body:{text:K,target_lang:"JA"}});if(ce)throw ce;const de=X.translations.map(Z=>Z.text);let M=0;const V={...L};return V.name=de[M++]||V.name,V.description=de[M++]||V.description,k.length>0&&(V.ingredients=V.ingredients.map((Z,le)=>{const fe=k.indexOf(le);return fe!==-1?{...Z,name:de[M+fe]}:Z}),M+=k.length),G.length>0&&(V.steps=V.steps.map((Z,le)=>{const fe=G.indexOf(le);return fe!==-1?de[M+fe]:Z})),V}catch(K){return console.error("Translation failed:",K),alert(""),L}},[$,Y]=w.useState([]),T=async()=>{O(!0),N(null),Y([]);try{let L,K="";if(l==="url"){if(!m)return;K=m;const{data:X,error:ce}=await ve.functions.invoke("scrape-recipe",{body:{url:m}});if(ce)throw ce;L=X}else{if(!v)return;const X=new FormData;X.append("image",v);const{data:{session:ce}}=await ve.auth.getSession(),de=`${ve.supabaseUrl}/functions/v1/analyze-image`,M={Authorization:`Bearer ${ce?.access_token||ve.supabaseKey}`},V=await fetch(de,{method:"POST",headers:M,body:X});if(!V.ok)throw new Error(`Server Error: ${V.statusText}`);const Z=V.body.getReader(),le=new TextDecoder;let fe=null,ye="";for(;;){const{done:Ce,value:Ie}=await Z.read();if(Ce)break;ye+=le.decode(Ie,{stream:!0});const Ue=ye.split(`

`);ye=Ue.pop()||"";for(const he of Ue){const Xe=he.trim();if(Xe.startsWith("data: "))try{const Pe=JSON.parse(Xe.slice(6));if(Pe.type==="log")Y(bt=>[...bt,Pe.message]);else if(Pe.type==="result")fe=Pe;else if(Pe.type==="error")throw new Error(Pe.message)}catch(Pe){console.warn("Failed to parse SSE event",Pe)}}}if(!fe)throw new Error("");L=fe}if(L.error)throw new Error(L.error);if(!L.recipe)throw new Error("No recipe found");let k=L.recipe;k.name=k.name||k.title||"",k.recipeYield=k.recipeYield||k.servings||"",k.description=k.description||"";const G=(k.name||"")+(k.steps?k.steps.slice(0,3).join(""):"");if(G&&!B(G)){d(k),p(K),c("confirm-translation"),O(!1);return}t(k,K),r()}catch(L){console.error("Import failed details:",L);const K=L.message||"Import failed. Please try again.";N(K)}finally{l!=="confirm-translation"&&O(!1)}},A=async L=>{O(!0);try{let K=u;L&&(K=await I(u)),t(K,f),r()}catch(K){console.error("Translation flow error:",K),N("Translation failed. Importing original."),t(u,f),r()}finally{O(!1)}},P=L=>{const K=L.target.files[0];K&&(b(K),_(URL.createObjectURL(K)))};return i.jsxs("div",{className:"modal-overlay fade-in",children:[j&&i.jsxs("div",{className:"loading-overlay",children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"..."}),$.length>0&&i.jsx("div",{className:"progress-log-container",children:i.jsxs("div",{className:"progress-log",children:[$.map((L,K)=>i.jsx("div",{className:"log-entry",children:i.jsx("span",{className:"log-message",children:L})},K)),i.jsx("div",{ref:L=>L?.scrollIntoView({behavior:"smooth"})})]})})]}),i.jsxs(Nt,{className:"import-modal-card",children:[i.jsx("h3",{className:"modal-title",children:l==="confirm-translation"?"":""}),l==="confirm-translation"?i.jsxs("div",{className:"translation-confirm-content",children:[i.jsxs("div",{style:{textAlign:"center",padding:"1rem 0",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"  "}),i.jsx("p",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:""}),i.jsxs("p",{style:{fontSize:"0.9rem",color:"#666"},children:["",i.jsx("br",{}),i.jsx("span",{style:{fontSize:"0.8rem"},children:"(DeepL)"})]})]}),i.jsxs("div",{className:"modal-actions",style:{flexDirection:"column",gap:"8px"},children:[i.jsx(se,{type:"button",variant:"primary",onClick:()=>A(!0),isLoading:j,style:{width:"100%"},children:""}),i.jsx(se,{type:"button",variant:"secondary",onClick:()=>A(!1),disabled:j,style:{width:"100%"},children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"import-mode-tabs",children:[i.jsx("button",{type:"button",onClick:()=>c("url"),className:`tab-btn tab-import-web ${l==="url"?"active":""}`,children:" Web URL"}),i.jsx("button",{type:"button",onClick:()=>c("image"),className:`tab-btn tab-import-image ${l==="image"?"active":""}`,children:"  (Best Effort)"})]}),l==="url"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"URL"}),i.jsx("input",{type:"url",placeholder:"https://...",value:m,onChange:L=>y(L.target.value),className:"import-url-input",autoFocus:!0})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{children:""}),i.jsxs("div",{className:"image-upload-wrapper",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:P,id:"recipe-image-upload",className:"image-upload-input"}),i.jsx("label",{htmlFor:"recipe-image-upload",onDragEnter:U,onDragLeave:U,onDragOver:U,onDrop:C,className:`image-upload-label ${z?"drag-active":""}`,children:S?i.jsx("img",{src:S,alt:"Preview",className:"image-upload-preview"}):z?"":""})]})]}),D&&i.jsx("p",{className:"error-text",children:D}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:r,disabled:j,children:""}),i.jsx(se,{type:"button",variant:"primary",onClick:T,isLoading:j,disabled:l==="url"?!m:!v,children:""})]})]})]})]})},sv=({onSave:r,onCancel:t,initialData:s})=>{const l=s||{},[c,u]=w.useState(null),[d,f]=w.useState(new Map);w.useMemo(()=>Array.from(d.keys()),[d]);const[p,m]=w.useState(null),[y,v]=w.useState([]);_e.useEffect(()=>{(async()=>{const P=await En.fetchPriceList();f(P)})()},[]);const b=w.useMemo(()=>{const A=l.steps||[""];let P=l.stepGroups||[];const L=A.some(k=>typeof k=="object"&&k.group);if(P.length===0&&L){const k=new Map;A.forEach(G=>{typeof G=="object"&&G.group&&!k.has(G.group)&&k.set(G.group,crypto.randomUUID())}),P=Array.from(k.entries()).map(([G,X])=>({id:X,name:G}))}return{steps:A.map(k=>{const G=typeof k=="string"?k:k.text||"",X=typeof k=="object"&&k.id?k.id:crypto.randomUUID();let ce=typeof k=="object"?k.groupId:void 0;const de=typeof k=="object"?k.group:void 0;if(!ce&&de&&P.length>0){const M=P.find(V=>V.name===de);M&&(ce=M.id)}return{id:X,text:G,groupId:ce}}),stepGroups:P}},[l]),S=b.steps,_=b.stepGroups,j=w.useMemo(()=>{const A=l.ingredients||[{name:"",quantity:"",unit:"",cost:"",purchaseCost:""}];let P=l.ingredientGroups||[];if(P.length===0&&A.some(K=>K.group)){const K=new Map;A.forEach(k=>{k.group&&!K.has(k.group)&&K.set(k.group,crypto.randomUUID())}),P=Array.from(K.entries()).map(([k,G])=>({id:G,name:k})),K.size>0&&A.some(k=>!k.group)}return{ingredients:A.map(K=>{const k=typeof K=="string"?{name:K,quantity:"",unit:"",cost:"",purchaseCost:""}:{...K,cost:K.cost||"",purchaseCost:K.purchaseCost||""};let G=k.groupId;if(!G&&k.group&&P.length>0){const X=P.find(ce=>ce.name===k.group);X&&(G=X.id)}return{...k,id:k.id||crypto.randomUUID(),groupId:G}}),ingredientGroups:P}},[l]),O=j.ingredients,D=j.ingredientGroups,[N,z]=w.useState({title:l.title||"",description:l.description||"",image:l.image||"",imageFile:null,storeName:l.storeName||"",servings:l.servings||"",ingredients:O,ingredientGroups:D,steps:S,stepGroups:_,tags:l.tags||[""],course:l.course||"",category:l.category||"",type:l.type||"normal",flours:l.flours||[],breadIngredients:l.breadIngredients||[],sourceUrl:l.sourceUrl||""}),[q,U]=w.useState(!1);Us(un(cl,{activationConstraint:{distance:10}}),un(ul,{activationConstraint:{delay:1e3,tolerance:5}}),un(zs,{coordinateGetter:pl}));const C=(A,P="")=>{const L=new Map,K=A.ingredients||[];K.forEach(V=>{let Z=V.group||"";Z==="Main"&&(Z=""),L.has(Z)||L.set(Z,crypto.randomUUID())});const k=Array.from(L.entries()).map(([V,Z])=>({id:Z,name:V})),G=K.map(V=>{let Z=V.group||"";Z==="Main"&&(Z="");let le;return L.has(Z)&&(le=L.get(Z)),{id:crypto.randomUUID(),name:V.name||"",quantity:V.quantity||"",unit:V.unit||"",cost:"",purchaseCost:"",groupId:le}}),X=new Map,ce=A.steps||[];ce.forEach(V=>{typeof V=="object"&&V.group&&V.group!=="Main"&&(X.has(V.group)||X.set(V.group,crypto.randomUUID()))});const de=Array.from(X.entries()).map(([V,Z])=>({id:Z,name:V})),M=ce.map(V=>{const Z=typeof V=="object",le=Z?V.text||"":V,fe=Z?V.group:null;let ye;return fe&&X.has(fe)&&(ye=X.get(fe)),{id:crypto.randomUUID(),text:le,groupId:ye}});z(V=>({...V,title:A.name||V.title,description:A.description||V.description,category:P?"URL":A.category||V.category,image:A.image||V.image,servings:A.recipeYield||V.servings,ingredients:G,ingredientGroups:k,steps:M,stepGroups:de,ingredientSections:void 0,stepSections:void 0,sourceUrl:P||V.sourceUrl})),u(null)},B=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?U(!0):A.type==="dragleave"&&U(!1)},I=A=>{if(A.preventDefault(),A.stopPropagation(),U(!1),A.dataTransfer.files&&A.dataTransfer.files[0]){const P=A.dataTransfer.files[0];P.type.startsWith("image/")&&z(L=>({...L,imageFile:P,image:URL.createObjectURL(P)}))}},$=A=>{const{id:P,value:L}=A.target;z(K=>({...K,[P]:L}))},Y=A=>{const P=A.target.files[0];P&&z(L=>({...L,imageFile:P,image:URL.createObjectURL(P)}))},T=A=>{A.preventDefault();let P=[],L=[];if(N.type==="bread")P=N.ingredients.map(({id:de,...M})=>M);else{const de=N.ingredientSections||[];de.length===0&&N.ingredients.length>0?P=N.ingredients.map(({id:M,...V})=>V):(P=de.flatMap(M=>M.items.map(V=>({...V,groupId:M.id}))).map(({id:M,...V})=>V),L=de.map(M=>({id:M.id,name:M.name})))}const K=new Set(N.tags||[]);N.course&&K.add(N.course),N.category&&K.add(N.category),N.type==="bread"&&K.add("");const k=Array.from(K).filter(Boolean);let G=[],X=[];const ce=N.stepSections||[];ce.length===0&&N.steps.length>0?G=N.steps.map(de=>typeof de=="string"?{text:de}:de):(G=ce.flatMap(de=>de.items.map(M=>({text:M.text,groupId:de.id}))),X=ce.map(de=>({id:de.id,name:de.name}))),r({...N,ingredients:P,ingredientGroups:L,steps:G,stepGroups:X,image:N.imageFile||N.image,id:l.id||Date.now(),tags:k,ingredientSections:void 0,stepSections:void 0})};return i.jsxs("form",{className:"recipe-form fade-in",onSubmit:T,children:[c&&i.jsx(A0,{onClose:()=>u(null),onImport:C,initialMode:c}),i.jsxs("div",{className:"recipe-form__header",children:[i.jsx("h2",{className:"section-title",children:l.title?"":""}),i.jsxs("div",{className:"recipe-form__actions",children:[i.jsx(se,{type:"button",variant:"ghost",onClick:t,children:""}),i.jsx(se,{type:"submit",variant:"primary",children:""})]})]}),i.jsxs("div",{className:"recipe-form__grid",children:[i.jsxs("div",{className:"form-column",children:[i.jsxs(Nt,{children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"form-row-2",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{id:"course",value:N.course,onChange:$,placeholder:": , ",list:"course-options"}),i.jsxs("datalist",{id:"course-options",children:[i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{id:"category",value:N.category,onChange:$,placeholder:": , ",list:"category-options"}),i.jsxs("datalist",{id:"category-options",children:[i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""}),i.jsx("option",{value:""})]})]})]}),i.jsx(Ye,{label:"",id:"title",value:N.title,onChange:$,placeholder:": ",required:!0}),i.jsx(Ye,{label:"",id:"description",textarea:!0,value:N.description,onChange:$,placeholder:"..."}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"URL"}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx(Ye,{id:"sourceUrl",value:N.sourceUrl||"",onChange:$,placeholder:"https://example.com/recipe/...",style:{flex:1}}),N.sourceUrl&&i.jsx(se,{type:"button",variant:"ghost",onClick:()=>z(A=>({...A,sourceUrl:""})),title:"URL",style:{color:"var(--color-danger)"},children:""})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"hsl(var(--color-primary))"},children:""}),i.jsxs("div",{onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:I,style:{position:"relative",marginBottom:"1rem",borderRadius:"var(--radius-md)",overflow:"hidden",border:q?"2px dashed var(--color-primary)":"1px dashed hsl(var(--color-border))",backgroundColor:q?"#f0f9ff":"#f9f9f9",transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[N.image?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{width:"100%",height:"200px",backgroundColor:"#f0f0f0",position:"relative"},children:[i.jsx("img",{src:N.image,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",opacity:q?.5:1},onError:A=>{A.target.style.display="none",A.target.parentElement.textContent=""}}),i.jsx("button",{type:"button",onClick:A=>{A.preventDefault(),A.stopPropagation(),z(P=>({...P,image:"",imageFile:null}))},style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",lineHeight:1,zIndex:10},title:"",children:""})]}),i.jsx("div",{style:{padding:"0.5rem",fontSize:"0.8rem",color:"#666"},children:""})]}):i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:q?"":""}),i.jsx("input",{type:"file",accept:"image/*",onChange:Y,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",display:N.image?"none":"block"}}),N.image&&i.jsx("input",{type:"file",accept:"image/*",onChange:Y,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1}})]})]})]}),!l.id&&i.jsxs(Nt,{className:"mb-md glass-card",children:[i.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"0.8rem",marginBottom:"0.8rem"},children:""}),i.jsxs("div",{className:"import-actions-row",children:[i.jsx(se,{variant:"secondary",type:"button",onClick:()=>u("url"),className:"btn-import-web",children:" Web URL"}),i.jsx(se,{variant:"secondary",type:"button",onClick:()=>u("image"),className:"btn-import-image",children:"  (Best Effort)"})]}),i.jsxs("div",{className:"image-upload-section",style:{marginTop:"0.2rem"},children:[i.jsx("label",{style:{fontSize:"0.9rem",color:"#555",marginBottom:"0.4rem",display:"block"},children:""}),i.jsx("input",{type:"file",accept:"image/*",onChange:Y,style:{marginBottom:"0.5rem"}}),N.image&&i.jsx("div",{style:{marginTop:"0.5rem"},children:i.jsx("img",{src:N.image,alt:"Preview",style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"form-row-2",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:""}),i.jsx(Ye,{id:"storeName",value:N.storeName,onChange:$,placeholder:"",list:"store-options"}),i.jsx("datalist",{id:"store-options",children:jh.map(A=>i.jsx("option",{value:A},A))})]}),i.jsx(Ye,{label:"",id:"servings",value:N.servings,onChange:$,placeholder:"4"})]})]}),i.jsxs("div",{className:"form-column",children:[i.jsxs(Nt,{className:"mb-md",style:{position:"relative",zIndex:10},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"mode-toggle",style:{display:"flex",gap:"0.5rem",background:"#eee",padding:"4px",borderRadius:"8px"},children:[i.jsx("button",{type:"button",onClick:()=>z(A=>({...A,type:"normal"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:N.type==="normal"?"white":"transparent",fontWeight:N.type==="normal"?"bold":"normal",boxShadow:N.type==="normal"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:""}),i.jsx("button",{type:"button",onClick:()=>z(A=>({...A,type:"bread"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:N.type==="bread"?"white":"transparent",fontWeight:N.type==="bread"?"bold":"normal",boxShadow:N.type==="bread"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",color:N.type==="bread"?"var(--color-primary)":"inherit"},children:" (Baker's %)"})]})]}),N.type==="bread"?i.jsx(hE,{formData:N,setFormData:z}):i.jsx(vE,{formData:N,setFormData:z,priceList:d})]}),i.jsxs(Nt,{children:[i.jsx("h3",{children:""}),i.jsx(wE,{formData:N,setFormData:z})]})]})]})]})},SE="modulepreload",jE=function(r){return"/app/"+r},av={},sh=function(t,s,l){let c=Promise.resolve();if(s&&s.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");c=p(s.map(m=>{if(m=jE(m),m in av)return;av[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":SE,y||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),y)return new Promise((S,_)=>{b.addEventListener("load",S),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return c.then(d=>{for(const f of d||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})},iv="csv_unit_overrides",lv=r=>String(r?.code||"")==="42P01"||String(r?.message||"").toLowerCase().includes("does not exist"),Ch={async _getCurrentUserId(){const{data:r,error:t}=await ve.auth.getUser();if(t)throw t;return r?.user?.id||null},async getAll(r=null){try{const t=r||await this._getCurrentUserId();if(!t)return new Map;const{data:s,error:l}=await ve.from(iv).select("ingredient_name,csv_unit").eq("user_id",t);if(l){if(lv(l))return new Map;throw l}const c=new Map;return(s||[]).forEach(u=>{u?.ingredient_name&&c.set(String(u.ingredient_name),String(u.csv_unit||""))}),c}catch(t){return console.warn("csvUnitOverrideService.getAll failed",t),new Map}},async upsert(r,t,s=null){const l=s||await this._getCurrentUserId();if(!l)throw new Error("");const c=String(r||"").trim(),u=String(t||"").trim();if(!c)throw new Error("");if(!u)throw new Error("");const{data:d,error:f}=await ve.from(iv).upsert({user_id:l,ingredient_name:c,csv_unit:u,updated_at:new Date().toISOString()},{onConflict:"user_id,ingredient_name"}).select().single();if(f)throw lv(f)?new Error("DB csv_unit_overrides "):f;return d}},_E=({id:r,message:t,type:s="info",onClose:l})=>{w.useEffect(()=>{const u=setTimeout(()=>{l(r)},3e3);return()=>clearTimeout(u)},[r,l]);const c=()=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return i.jsxs("div",{className:`toast toast-${s}`,children:[i.jsx("div",{className:"toast-icon",children:c()}),i.jsx("div",{className:"toast-message",children:t}),i.jsx("button",{className:"toast-close",onClick:()=>l(r),"aria-label":"",children:""})]})},CE=({toasts:r,onRemove:t})=>r.length===0?null:i.jsx("div",{className:"toast-container",children:r.map(s=>i.jsx(_E,{id:s.id,message:s.message,type:s.type,onClose:t},s.id))}),N0=w.createContext(),EE=({children:r})=>{const[t,s]=w.useState([]),l=w.useCallback((d,f="info")=>{const p=Date.now()+Math.random();s(m=>[...m,{id:p,message:d,type:f}].slice(-5))},[]),c=w.useCallback(d=>{s(f=>f.filter(p=>p.id!==d))},[]),u={showToast:l,success:d=>l(d,"success"),error:d=>l(d,"error"),warning:d=>l(d,"warning"),info:d=>l(d,"info")};return i.jsxs(N0.Provider,{value:u,children:[r,i.jsx(CE,{toasts:t,onRemove:c})]})},ml=()=>{const r=w.useContext(N0);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},RE=`
.input-with-hint {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.unit-hint {
    font-size: 0.75rem;
    color: #f59e0b; /* Warning/Info color */
    white-space: nowrap;
}
`,O0=document.createElement("style");O0.innerText=RE;document.head.appendChild(O0);const TE=()=>{const r=ml(),[t,s]=w.useState([]),[l,c]=w.useState(""),[u,d]=w.useState(null),[f,p]=w.useState(!1),[m,y]=w.useState(new Map),[v,b]=w.useState(new Map),[S,_]=w.useState({});w.useEffect(()=>{j()},[]);const j=async()=>{p(!0);try{const[T,A,P]=await Promise.all([on.getAllConversions(),En.fetchPriceList(),Ch.getAll()]),L=Array.from(T.values()).map(K=>({...K,isNew:!1,isEditing:!1}));y(A||new Map),b(P||new Map),s(L.sort((K,k)=>K.ingredientName.localeCompare(k.ingredientName,"ja")))}catch(T){r.error(""),console.error("Failed to load ingredients:",T)}p(!1)},O=()=>{s([{ingredientName:"",packetSize:"",packetUnit:"g",lastPrice:"",isNew:!0,isEditing:!0},...t]),d(0)},D=async T=>{const A=t[T];if(!A.ingredientName||!A.packetSize||!A.lastPrice){r.warning("");return}try{await on.saveConversion(A.ingredientName,A.packetSize,A.packetUnit,A.lastPrice),r.success(""),j(),d(null)}catch(P){r.error(""),console.error("Save error:",P)}},N=async(T,A)=>{if(t[A].isNew){s(t.filter((L,K)=>K!==A)),d(null);return}try{await on.deleteConversion(T),r.success(""),j()}catch(L){r.error(""),console.error("Delete error:",L)}},z=T=>{d(T);const A=[...t];A[T].isEditing=!0,s(A)},q=T=>{t[T].isNew?s(t.filter((A,P)=>P!==T)):j(),d(null)},U=(T,A,P)=>{const L=[...t];L[T][A]=P,s(L)},C=T=>{const A=parseFloat(T.lastPrice),P=parseFloat(T.packetSize);if(!A||!P)return"-";const L=T.packetUnit?T.packetUnit.trim().toLowerCase():"";return L==="g"||L===""?`${Math.round(A/P*1e3).toLocaleString()}/kg`:L==="ml"||L==="cc"||L===""||L===""?`${Math.round(A/P*1e3).toLocaleString()}/L`:`${Math.round(A/P).toLocaleString()}/${T.packetUnit}`},B=t.filter(T=>T.ingredientName.toLowerCase().includes(l.toLowerCase())),I=T=>{const A=(T??"").toString().trim();if(!A)return"-";const L=(m?.get(A)||null)?.unit;return L?String(L):"-"},$=T=>{const A=(T??"").toString().trim();if(!A)return"";if(Object.prototype.hasOwnProperty.call(S,A))return S[A];const P=v?.get(A);if(P)return String(P);const L=I(A);return L==="-"?"":L},Y=async(T,A)=>{const P=(T??"").toString().trim(),L=(A??"").toString().trim();if(P){if(!L){_(K=>{const k={...K};return delete k[P],k});return}try{await Ch.upsert(P,L),b(K=>{const k=new Map(K);return k.set(P,L),k}),r.success("CSV")}catch(K){console.error(K),r.error(K?.message||"")}}};return i.jsxs("div",{className:"ingredient-master-container",children:[i.jsxs("div",{className:"master-header",children:[i.jsx("h3",{children:" "}),i.jsx(se,{variant:"primary",onClick:O,disabled:u!==null,children:"+ "})]}),i.jsx("div",{className:"master-search",children:i.jsx(Ye,{placeholder:"...",value:l,onChange:T=>c(T.target.value)})}),f?i.jsx("div",{className:"master-loading",children:"..."}):i.jsx("div",{className:"master-table-wrapper",children:i.jsxs("table",{className:"master-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:"CSV"}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsx("tbody",{children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",style:{textAlign:"center",color:"#999"},children:l?"":""})}):B.map((T,A)=>i.jsxs("tr",{className:T.isEditing?"editing":"",children:[i.jsx("td",{children:T.isEditing?i.jsx(Ye,{value:T.ingredientName,onChange:P=>U(A,"ingredientName",P.target.value),placeholder:": ",disabled:!T.isNew}):T.ingredientName}),i.jsx("td",{children:T.isEditing?i.jsx(Ye,{type:"number",value:T.lastPrice,onChange:P=>U(A,"lastPrice",P.target.value),placeholder:": 500"}):`${parseFloat(T.lastPrice||0).toLocaleString()}`}),i.jsx("td",{children:T.isEditing?i.jsxs("div",{className:"input-with-hint",children:[i.jsx(Ye,{type:"number",value:T.packetSize,onChange:P=>U(A,"packetSize",P.target.value),placeholder:["","","","PC","","",""].includes(T.packetUnit)?" (: 1)":": 1000"}),["","","","PC","","",""].includes(T.packetUnit)&&i.jsxs("span",{className:"unit-hint",children:["1",T.packetUnit,"1"]})]}):T.packetSize}),i.jsx("td",{children:T.isEditing?i.jsxs("select",{value:T.packetUnit,onChange:P=>U(A,"packetUnit",P.target.value),className:"unit-select",children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"cc",children:"cc"})]}):T.packetUnit}),i.jsx("td",{className:"csv-unit-cell",children:i.jsx(Ye,{value:$(T.ingredientName),onChange:P=>{const L=(T.ingredientName??"").toString().trim(),K=P.target.value;_(k=>({...k,[L]:K}))},onBlur:P=>Y(T.ingredientName,P.target.value),placeholder:I(T.ingredientName)==="-"?"":`CSV: ${I(T.ingredientName)}`})}),i.jsx("td",{className:"normalized-cost",children:C(T)}),i.jsx("td",{children:i.jsx("div",{className:"action-buttons",children:T.isEditing?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"primary",size:"sm",onClick:()=>D(A),children:""}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>q(A),children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>z(A),disabled:u!==null,children:""}),i.jsx(se,{variant:"ghost",size:"sm",onClick:()=>N(T.ingredientName,A),disabled:u!==null,children:""})]})})})]},A))})]})}),i.jsx("div",{className:"master-info",children:i.jsx("p",{children:" "})})]})},AE=()=>{const[r,t]=w.useState([]),[s,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState("all"),[p,m]=w.useState(""),[y,v]=w.useState(null),b=ml(),[S,_]=w.useState({isOpen:!1,title:"",message:"",onConfirm:null});w.useEffect(()=>{j()},[]);const j=async()=>{l(!0),v(null);try{console.log("Starting data load for CsvToMasterImporter...");const[C,B]=await Promise.all([En.getPriceListArray().catch($=>(console.error("Error fetching price list:",$),[])),on.getAllConversions().catch($=>(console.error("Error fetching conversions:",$),new Map))]);if(console.log("Data fetched:",{csvCount:C?.length,masterSize:B?.size}),!Array.isArray(C))throw new Error("CSV");if(!(B instanceof Map))throw new Error("Map");const I=[];for(const $ of C){if(!$||!$.name)continue;const Y=B.get($.name);I.push({name:$.name,csvPrice:$.price,csvUnit:$.unit,csvVendor:$.vendor,masterSize:Y?Y.packetSize:"",masterUnit:Y?Y.packetUnit:$.unit||"g",masterPrice:Y?Y.lastPrice:$.price||0,isRegistered:!!Y,inputSize:Y?Y.packetSize:"",inputUnit:Y?Y.packetUnit:$.unit||"g",inputPrice:Y?Y.lastPrice:$.price||0,isModified:!1})}console.log("Merge completed. Items:",I.length),t(I)}catch(C){console.error("Failed to load data for importer:",C),v(C.message||"")}finally{l(!1)}},O=async C=>{u(C.name);try{const B=parseFloat(C.inputSize),I=parseFloat(C.inputPrice);if(isNaN(B)||B<=0){b.error("");return}if(!C.inputUnit){b.error("");return}await on.saveConversion(C.name,B,C.inputUnit,I),t($=>$.map(Y=>Y.name===C.name?{...Y,isRegistered:!0,isModified:!1,masterSize:B,masterUnit:C.inputUnit,masterPrice:I}:Y)),b.success("")}catch(B){console.error("Failed to save ingredient:",B),b.error("")}finally{u(null)}},D=async C=>{_($=>({...$,isOpen:!1})),u("bulk");let B=0,I=0;try{const $=await Promise.allSettled(C.map(async A=>{const P=parseFloat(A.inputSize),L=parseFloat(A.inputPrice);if(isNaN(P)||P<=0)throw new Error("Invalid size");if(!A.inputUnit)throw new Error("Invalid unit");return await on.saveConversion(A.name,P,A.inputUnit,L),A})),Y=[];$.forEach((A,P)=>{A.status==="fulfilled"?(B++,Y.push(C[P])):(I++,console.error(`Failed to save ${C[P].name}: `,A.reason))});const T=new Set(Y.map(A=>A.name));t(A=>A.map(P=>{if(T.has(P.name)){const L=C.find(K=>K.name===P.name);return{...P,isRegistered:!0,isModified:!1,masterSize:parseFloat(L.inputSize),masterUnit:L.inputUnit,masterPrice:parseFloat(L.inputPrice)}}return P})),I===0?b.success(`${B} `):b.warning(`:  ${B}  /  ${I} `)}catch($){console.error("Bulk save error:",$),b.error("")}finally{u(null)}},N=()=>{const C=r.filter(B=>B.isModified);C.length!==0&&_({isOpen:!0,title:"",message:`${C.length} `,onConfirm:()=>D(C)})},z=(C,B,I)=>{t($=>$.map(Y=>Y.name===C?{...Y,[B]:I,isModified:!0}:Y))},q=r.filter(C=>!(d==="unregistered"&&C.isRegistered||d==="registered"&&!C.isRegistered||p&&!C.name.includes(p))),U=r.filter(C=>C.isModified).length;return s?i.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",color:"#666",padding:"2rem"},children:"..."}):y?i.jsxs("div",{style:{padding:"2rem",color:"#c62828",background:"#ffebee",borderRadius:"4px"},children:[i.jsx("h3",{children:""}),i.jsx("p",{children:y}),i.jsx(se,{variant:"secondary",onClick:j,children:""})]}):i.jsxs("div",{className:"csv-importer",children:[i.jsxs("div",{className:"importer-header",children:[i.jsx(Ye,{placeholder:"...",value:p,onChange:C=>m(C.target.value),style:{maxWidth:"300px"}}),i.jsxs("div",{className:"filter-buttons",children:[i.jsxs(se,{variant:d==="all"?"primary":"secondary",onClick:()=>f("all"),size:"sm",style:{marginRight:"0.5rem"},children:[" (",r.length,")"]}),i.jsxs(se,{variant:d==="unregistered"?"primary":"secondary",onClick:()=>f("unregistered"),size:"sm",style:{marginRight:"0.5rem"},children:[" (",r.filter(C=>!C.isRegistered).length,")"]}),i.jsxs(se,{variant:d==="registered"?"primary":"secondary",onClick:()=>f("registered"),size:"sm",children:[" (",r.filter(C=>C.isRegistered).length,")"]})]}),i.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[U>0&&i.jsx(se,{variant:"primary",size:"sm",onClick:N,disabled:c==="bulk",style:{fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:c==="bulk"?"...":`(${U})`}),i.jsx(se,{variant:"secondary",size:"sm",onClick:j,children:" "})]})]}),i.jsx("div",{className:"table-wrapper",style:{overflowX:"auto",flex:1},children:i.jsxs("table",{className:"enterprise-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"25%"},children:" (CSV)"}),i.jsx("th",{style:{width:"15%"},children:" (CSV)"}),i.jsxs("th",{style:{width:"20%"},children:[" () ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsxs("th",{style:{width:"15%"},children:[" () ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("th",{style:{width:"15%"},children:" ()"}),i.jsx("th",{style:{width:"10%"},children:""})]})}),i.jsx("tbody",{children:q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"no-data",children:""})}):q.map((C,B)=>i.jsxs("tr",{style:{backgroundColor:C.isModified?"#fff8e1":C.isRegistered?"#f9fff9":"inherit",transition:"background-color 0.3s"},children:[i.jsxs("td",{style:{fontWeight:"500"},children:[C.name,C.csvVendor&&i.jsx("div",{style:{fontSize:"0.75rem",color:"#888"},children:C.csvVendor})]}),i.jsxs("td",{children:[C.csvPrice?`${C.csvPrice.toLocaleString()} `:"-",C.csvUnit&&i.jsxs("span",{style:{fontSize:"0.8rem",color:"#888"},children:[" / ",C.csvUnit]})]}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsx(Ye,{type:"number",value:C.inputSize,onChange:I=>z(C.name,"inputSize",I.target.value),placeholder:["","","","PC","","",""].includes(C.inputUnit)?" (: 1)":": 1000",style:{width:"100%"}}),["","","","PC","","",""].includes(C.inputUnit)&&i.jsxs("span",{style:{fontSize:"0.7rem",color:"#e67e22",whiteSpace:"nowrap"},children:["1",C.inputUnit,"1"]})]})}),i.jsx("td",{children:i.jsxs("select",{className:"input-field",value:C.inputUnit,onChange:I=>z(C.name,"inputUnit",I.target.value),style:{width:"100%",padding:"8px",cursor:"pointer"},children:[!["g","kg","ml","L","cc","","","","","PC","","",""].includes(C.inputUnit)&&C.inputUnit&&i.jsxs("option",{value:C.inputUnit,children:[C.inputUnit," (CSV)"]}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"cc",children:"cc"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"PC",children:"PC"}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})}),i.jsx("td",{children:i.jsx(Ye,{type:"number",value:C.inputPrice,onChange:I=>z(C.name,"inputPrice",I.target.value),placeholder:"",style:{width:"100%"}})}),i.jsx("td",{children:i.jsx(se,{variant:C.isRegistered?"secondary":"primary",size:"sm",onClick:()=>O(C),disabled:c===C.name||c==="bulk",block:!0,children:c===C.name?"...":C.isRegistered?"":""})})]},C.name+B))})]})}),i.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#666"},children:[i.jsx("p",{children:" CSV"}),i.jsx("p",{children:" "})]}),i.jsxs(Cn,{isOpen:S.isOpen,onClose:()=>_({...S,isOpen:!1}),title:S.title,size:"small",children:[i.jsx("div",{style:{marginBottom:"1.5rem"},children:S.message}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[i.jsx(se,{variant:"secondary",onClick:()=>_({...S,isOpen:!1}),children:""}),i.jsx(se,{variant:"primary",onClick:S.onConfirm,children:""})]})]})]})},NE=({onBack:r})=>{const[t,s]=w.useState("price"),[l,c]=w.useState(null),[u,d]=w.useState({type:"",message:""}),[f,p]=w.useState(!1),[m,y]=w.useState([]),[v,b]=w.useState(!1),[S,_]=w.useState(null),[j,O]=w.useState({key:"dateStr",direction:"desc"}),[D,N]=w.useState(""),z=T=>{let A="asc";j.key===T&&j.direction==="asc"&&(A="desc"),O({key:T,direction:A})},q=_e.useMemo(()=>{let T=[...m];if(D){const A=D.toLowerCase().trim();T=T.filter(P=>P.name&&P.name.toLowerCase().includes(A)||P.vendor&&P.vendor.toLowerCase().includes(A)||P.dateStr&&P.dateStr.includes(A))}return j.key&&T.sort((A,P)=>{let L=A[j.key]||"",K=P[j.key]||"";return L<K?j.direction==="asc"?-1:1:L>K?j.direction==="asc"?1:-1:0}),T},[m,j,D]),[U,C]=w.useState([]);w.useEffect(()=>{B()},[]);const B=async()=>{b(!0);try{const T=await En.getPriceListArray();y(T);const A=await En.getFileList();C(A)}catch(T){console.error("Failed to load price data",T)}finally{b(!1)}},I=T=>{T.target.files&&T.target.files[0]&&(c(T.target.files[0]),d({type:"",message:""}))},$=async()=>{if(!l)return;p(!0),d({type:"info",message:"..."});const T=await En.uploadPriceList(l);if(T.success){d({type:"success",message:"..."});try{const{recipeService:P}=await sh(async()=>{const{recipeService:k}=await Promise.resolve().then(()=>Vd);return{recipeService:k}},[]),L=await En.fetchPriceList(),K=await P.updateRecipeCosts(L);d({type:"success",message:`${K}`})}catch(P){console.error("Cost update failed",P),d({type:"warning",message:""})}c(null);const A=document.getElementById("csv-upload-input");A&&(A.value=""),B()}else d({type:"error",message:`: ${T.error.message}`});p(!1)},Y=T=>{_({message:`${T}
`,onConfirm:async()=>{p(!0);const A=await En.deletePriceFile(T);p(!1),A.success?(d({type:"success",message:""}),B()):d({type:"error",message:`: ${A.error.message}`})}})};return i.jsxs("div",{className:"dashboard-container fade-in",children:[i.jsxs("div",{className:"dashboard-header",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("h2",{className:"section-title",style:{margin:0,fontSize:"1.5rem"},children:""}),i.jsx("span",{style:{fontSize:"0.85rem",color:"#666",background:"#eee",padding:"2px 8px",borderRadius:"12px"},children:"Admin Mode"})]}),i.jsx(se,{variant:"ghost",onClick:r,children:" "})]}),i.jsx("div",{className:"tabs-container",children:i.jsxs("div",{className:"tabs",children:[i.jsx("button",{className:`tab ${t==="price"?"active":""}`,onClick:()=>s("price"),children:" "}),i.jsx("button",{className:`tab ${t==="ingredients"?"active":""}`,onClick:()=>s("ingredients"),children:" "}),i.jsx("button",{className:`tab ${t==="csv-import"?"active":""}`,onClick:()=>s("csv-import"),children:" CSV"})]})}),t==="ingredients"?i.jsx(TE,{}):t==="csv-import"?i.jsx(AE,{}):i.jsxs("div",{className:"dashboard-content",children:[i.jsxs("aside",{className:"dashboard-sidebar",children:[i.jsxs("div",{className:"sidebar-card",style:{borderColor:"var(--color-primary)"},children:[i.jsxs("div",{className:"sidebar-title",style:{color:"#000"},children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("p",{style:{fontSize:"0.85rem",color:"#333",marginBottom:"0.5rem"},children:""}),i.jsx(se,{variant:"secondary",size:"sm",block:!0,onClick:async()=>{try{const T=await sh(()=>Promise.resolve().then(()=>Vd),void 0).then(K=>K.recipeService.exportAllRecipes()),A=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),P=URL.createObjectURL(A),L=document.createElement("a");L.href=P,L.download=`recipe_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(P)}catch(T){alert(""),console.error(T)}},children:" JSON"})]}),i.jsxs("div",{children:[i.jsx("p",{style:{fontSize:"0.85rem",color:"#333",marginBottom:"0.5rem"},children:" / "}),i.jsx("input",{type:"file",accept:".json",id:"backup-upload-input",style:{display:"none"},onChange:async T=>{const A=T.target.files[0];if(A){if(!window.confirm(`
`)){T.target.value="";return}try{d({type:"info",message:"..."}),p(!0);const P=await A.text(),L=JSON.parse(P),{recipeService:K}=await sh(async()=>{const{recipeService:G}=await Promise.resolve().then(()=>Vd);return{recipeService:G}},void 0),k=await K.importRecipes(L);alert(`${k.count}${k.errors.length>0?`
: ${k.errors.length}`:""}`),d({type:"success",message:""})}catch(P){console.error(P),alert(""),d({type:"error",message:""})}finally{p(!1),T.target.value=""}}}}),i.jsx(se,{variant:"secondary",size:"sm",block:!0,onClick:()=>document.getElementById("backup-upload-input").click(),disabled:f,children:" "})]})]}),i.jsxs("div",{className:"sidebar-card",children:[i.jsxs("div",{className:"sidebar-title",children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{className:"upload-area",children:[i.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:["CSV (Shift-JIS)",i.jsx("br",{}),i.jsxs("span",{style:{fontSize:"0.75rem",color:"#888"},children:[" 1: ...",i.jsx("br",{})," 2: "]})]}),i.jsx("input",{type:"file",accept:".csv",onChange:I,id:"csv-upload-input",className:"csv-input",style:{width:"100%",marginBottom:"0.5rem",fontSize:"0.85rem"}}),i.jsx(se,{variant:"primary",onClick:$,disabled:!l||f,className:"upload-btn",size:"sm",block:!0,children:f?"...":""})]}),u.message&&i.jsx("div",{className:`status-msg ${u.type}`,children:u.message})]}),i.jsxs("div",{className:"sidebar-card",style:{flex:1},children:[i.jsxs("div",{className:"sidebar-title",children:[i.jsx("span",{children:""})," ",i.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal",marginLeft:"auto"},children:[U.length,""]})]}),U.length===0?i.jsx("p",{style:{color:"#aaa",fontStyle:"italic",fontSize:"0.85rem",textAlign:"center"},children:""}):i.jsx("div",{className:"file-list",children:U.map(T=>i.jsxs("div",{className:"file-list-item",children:[i.jsx("span",{className:"file-name",title:T.name,children:T.name}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>Y(T.name),disabled:f,style:{padding:"2px 8px",fontSize:"0.75rem",minWidth:"auto"},children:""})]},T.name))})]}),i.jsxs("div",{className:"sidebar-card",children:[i.jsx("div",{className:"sidebar-title",children:" "}),i.jsxs("ul",{style:{fontSize:"0.75rem",color:"#666",paddingLeft:"1.2rem",margin:0},children:[i.jsx("li",{style:{marginBottom:"4px"},children:""}),i.jsx("li",{style:{marginBottom:"4px"},children:""})]})]})]}),i.jsxs("main",{className:"dashboard-main",children:[i.jsxs("div",{className:"main-toolbar",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"#333"},children:""}),i.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},children:[" ",q.length.toLocaleString()," "]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx(Ye,{placeholder:" (, , )...",value:D,onChange:T=>N(T.target.value),style:{width:"250px",fontSize:"0.9rem"}}),i.jsx(se,{variant:"secondary",size:"sm",onClick:B,children:" "})]})]}),i.jsx("div",{className:"table-wrapper",children:v?i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:"#888"},children:"..."}):i.jsxs("table",{className:"enterprise-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsxs("th",{onClick:()=>z("dateStr"),style:{width:"120px"},children:[" ",j.key==="dateStr"&&(j.direction==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>z("vendor"),children:[" ",j.key==="vendor"&&(j.direction==="asc"?"":"")]}),i.jsxs("th",{onClick:()=>z("name"),children:[" ",j.key==="name"&&(j.direction==="asc"?"":"")]}),i.jsx("th",{style:{textAlign:"right",width:"150px"},children:" ()"})]})}),i.jsx("tbody",{children:q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"no-data",children:""})}):q.map((T,A)=>i.jsxs("tr",{children:[i.jsx("td",{className:"col-date",children:T.dateStr||"-"}),i.jsx("td",{children:T.vendor||"-"}),i.jsx("td",{style:{fontWeight:"500"},children:T.name}),i.jsxs("td",{className:"col-number",children:[T.price?T.price.toLocaleString():"-",T.unit&&i.jsxs("span",{style:{color:"#888",fontSize:"0.85em",marginLeft:"4px"},children:["/ ",T.unit]})]})]},A))})]})})]})]}),S&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,animation:"fadeIn 0.2s ease-out"},onClick:()=>_(null),children:i.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},onClick:T=>T.stopPropagation(),children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#333"},children:""}),i.jsx("p",{style:{whiteSpace:"pre-wrap",marginBottom:"24px",color:"#666"},children:S.message}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>_(null),children:""}),i.jsx(se,{variant:"danger",onClick:()=>{S.onConfirm(),_(null)},children:""})]})]})})]})},OE=({recipes:r,recentIds:t,onSelect:s})=>{if(!t||t.length===0)return null;const l=t.map(c=>r.find(u=>u.id===c)).filter(Boolean).slice(0,7);return l.length===0?null:i.jsxs("div",{className:"recent-recipes",children:[i.jsx("h3",{className:"recent-header",children:""}),i.jsx("div",{className:"recent-list",children:l.map(c=>i.jsxs("div",{className:"recent-item",onClick:()=>s(c),children:[i.jsx("div",{className:"recent-thumbnail",children:c.image?i.jsx("img",{src:c.image,alt:c.title}):i.jsx("div",{className:"recent-placeholder"})}),i.jsx("div",{className:"recent-info",children:i.jsx("div",{className:"recent-title",children:c.title})})]},c.id))})]})},kE=({onBack:r})=>(w.useEffect(()=>{window.scrollTo(0,0)},[]),i.jsxs("div",{className:"levain-guide-container",children:[i.jsxs("header",{className:"levain-guide-header",children:[i.jsx("h1",{children:"LEVAIN GUIDE"}),i.jsx("p",{className:"subtitle",children:" "}),i.jsx("p",{className:"subtitle",children:""}),i.jsx("div",{className:"divider"})]}),i.jsxs("main",{className:"levain-guide-main",children:[i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("p",{children:"Levain"}),i.jsx("h3",{children:""}),i.jsx("p",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"Yeast"})," Saccharomyces cerevisiae, Saccharomyces pastorianus ",i.jsx("br",{}),i.jsx("strong",{children:"LAB"})," Lactobacillus plantarum, Lactobacillus brevis ",i.jsx("br",{}),i.jsx("strong",{children:""})," Acetobacter aceti "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:["",i.jsx("br",{}),i.jsxs("div",{className:"formula",children:["CHO  2CHOH + 2CO + ",i.jsx("br",{}),"(   +  + )"]}),"",i.jsx("br",{}),i.jsxs("div",{className:"formula",children:["CHO  2CHO",i.jsx("br",{}),"(  )"]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[" ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"- 7-10"}),i.jsxs("div",{className:"timeline",children:[i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 1-2 "}),i.jsx("p",{children:"100g + 100ml 20-22"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," "]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 3-4 "}),i.jsx("p",{children:"50%50g + 50ml "}),i.jsx("p",{children:"100g  50g50g + 50ml"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," pH 3.5-4.5"]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 5-6 2"}),i.jsx("p",{children:"50%50g + 50ml "}),i.jsxs("div",{className:"success-box",children:[" ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]}),i.jsxs("div",{className:"timeline-item",children:[i.jsx("span",{className:"timeline-label",children:"Day 7-10 3"}),i.jsx("p",{children:"1150%1:1"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," 15",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," pH 3.5-4.0"]})]})]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:"(g)"}),i.jsx("th",{children:"(ml)"}),i.jsx("th",{children:"(g)"}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"0"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"2"}),i.jsx("td",{children:"1"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"100"}),i.jsx("td",{children:"0"}),i.jsx("td",{children:""})]})]})]})})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"5-8"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"2-4"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"15-18"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"1-2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"20-22"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"3-5"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"25-28"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"2-3"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"30"}),i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:"1-2"})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"1"}),i.jsx("br",{}),"100g50g + 50ml"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),"8-12"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),""]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"2%100ml2g"}),i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"2"}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 12 8:00"}),i.jsx("br",{}),"50g25g + 25ml "]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 1  14:00"}),i.jsx("br",{}),"25g + 25ml 2"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:"Day 1  20:00"}),i.jsx("br",{}),""]})]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:" "})," ",i.jsx("br",{}),"",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:" "})," pH",i.jsx("br",{}),"pH 3.5-4.0pH"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"18"}),i.jsx("td",{children:"16-24"}),i.jsx("td",{children:"1"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"20-22"}),i.jsx("td",{children:"12-16"}),i.jsx("td",{children:"2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"24-26"}),i.jsx("td",{children:"8-12"}),i.jsx("td",{children:"2"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"28"}),i.jsx("td",{children:"4-8"}),i.jsx("td",{children:"2"})]})]})]})})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"1"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. 22",i.jsx("br",{}),"2. 12",i.jsx("br",{}),"3. 1",i.jsx("br",{}),"4. 1-2"]}),i.jsx("h3",{children:"2"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," pH",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," "]}),i.jsx("h3",{children:"3"}),i.jsxs("div",{className:"warning-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. ",i.jsx("br",{}),"2. 15",i.jsx("br",{}),"3. 80%"]}),i.jsx("h3",{children:"4"}),i.jsxs("div",{className:"success-box",children:["",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""})," "]}),i.jsx("h3",{children:"5"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{}),"1. 1:0.8",i.jsx("br",{}),"2. ",i.jsx("br",{}),"3. "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:"pH"}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"pH4-8.0"}),i.jsx("br",{}),i.jsx("br",{})," pH 7.0",i.jsx("br",{})," pH 4.5-5.5",i.jsx("br",{})," pH 3.5-4.0",i.jsx("br",{})," pH 3.0"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"science-box",children:[i.jsx("strong",{children:"pH 3.8-4.0"})," ",i.jsx("br",{}),i.jsx("strong",{children:"pH 3.5"})," ",i.jsx("br",{}),i.jsx("strong",{children:"pH 4.5"})," "]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," 1",i.jsx("br",{})," ",i.jsx("br",{})," -203"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"15-20"}),i.jsx("td",{children:"18-20"}),i.jsx("td",{children:"1-2"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"25+"}),i.jsx("td",{children:"22-24"}),i.jsx("td",{children:""}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"18-22"}),i.jsx("td",{children:"20-22"}),i.jsx("td",{children:"1-2"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:"5-15"}),i.jsx("td",{children:"18"}),i.jsx("td",{children:"2-3"}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," 24",i.jsx("br",{})," ",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," 18",i.jsx("br",{})," "]}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"step-list",children:[i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""})," ",i.jsx("br",{}),":=1:1 :=1:2 or 1:3"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{}),"100g + 50g + 150ml 12-24",i.jsx("br",{}),"11-2"]}),i.jsxs("div",{className:"step",children:[i.jsx("strong",{children:""}),i.jsx("br",{})," ",i.jsx("br",{})," ",i.jsx("br",{})," "]})]})]})]}),i.jsxs("div",{className:"levain-section",children:[i.jsx("h2",{children:""}),i.jsxs("div",{className:"levain-content",children:[i.jsx("h3",{children:""}),i.jsxs("div",{className:"highlight-box",children:[i.jsx("strong",{children:"100ml"}),i.jsx("br",{})," 110 to 110 CFU/ml",i.jsx("br",{})," 110 to 110 CFU/ml",i.jsx("br",{})," pH3.5-4.0",i.jsx("br",{})," 0.5-1.5%",i.jsx("br",{})," 0.3-0.8%"]}),i.jsx("h3",{children:""}),i.jsx("div",{className:"comparison-table-container",children:i.jsxs("table",{className:"levain-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"15-25% ()"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"5-15%"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"20-30%"}),i.jsx("td",{children:""})]}),i.jsxs("tr",{children:[i.jsx("td",{children:""}),i.jsx("td",{children:"30-50%"}),i.jsx("td",{children:""})]})]})]})}),i.jsx("h3",{children:""}),i.jsxs("div",{className:"formula",children:[" 18   - 8",i.jsx("br",{}),i.jsx("br",{}),"",i.jsx("br",{})," 2018  (20-8) = 1.5",i.jsx("br",{})," 2418  (24-8) = 1.125",i.jsx("br",{})," 2818  (28-8) = 0.954"]})]})]})]}),i.jsxs("footer",{className:"levain-footer",children:[i.jsx("p",{children:" Maitriser le Levain, c'est comprendre la vie "}),i.jsx("p",{children:""})]}),i.jsxs("button",{className:"levain-back-button",onClick:r,children:[i.jsx("span",{children:""})," "]})]})),Bi={async fetchAllProfiles(){const r=await ve.from("profiles").select("id, display_id, email, role, show_master_recipes, created_at, updated_at").order("created_at",{ascending:!1});if(!r.error)return r.data||[];if(String(r.error.message||"").toLowerCase().includes("email")){const t=await ve.from("profiles").select("id, display_id, role, show_master_recipes, created_at, updated_at").order("created_at",{ascending:!1});if(t.error)throw t.error;return t.data||[]}throw r.error},async updateProfile(r,t){const s=await ve.from("profiles").update(t).eq("id",r).select("id, display_id, email, role, show_master_recipes, created_at, updated_at").single();if(!s.error)return s.data;if(String(s.error.message||"").toLowerCase().includes("email")){const l=await ve.from("profiles").update(t).eq("id",r).select("id, display_id, role, show_master_recipes, created_at, updated_at").single();if(l.error)throw l.error;return l.data}throw s.error},async adminResetPassword(r,t){const{data:s,error:l}=await ve.functions.invoke("admin-reset-password",{body:{userId:r,newPassword:t}});if(l)throw l;if(s?.error)throw new Error(s.error);return s},async sendPasswordResetEmail(r){const{error:t}=await ve.auth.resetPasswordForEmail(r,{redirectTo:window.location.origin});if(t)throw t;return!0}},DE=({onBack:r})=>{const[t,s]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,p]=w.useState(null),[m,y]=w.useState(""),[v,b]=w.useState(""),[S,_]=w.useState(""),[j,O]=w.useState(""),[D,N]=w.useState(!1),[z,q]=w.useState(!1);w.useEffect(()=>{U()},[]);const U=async()=>{try{c(!0);const $=await Bi.fetchAllProfiles();s($)}catch($){console.error($),d("")}finally{c(!1)}},C=t.filter($=>$.role==="admin"),B=t.filter($=>$.role!=="admin"),I=({user:$,isAdmin:Y})=>i.jsxs(Nt,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",backgroundColor:"white"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#333"},children:[$.display_id," ",Y&&i.jsx("span",{style:{fontSize:"0.8rem",backgroundColor:"#e0e0e0",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",color:"#555"},children:""})]}),$.email&&i.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px",wordBreak:"break-all"},children:$.email}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[": ",new Date($.created_at).toLocaleString()]}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",$.updated_at?new Date($.updated_at).toLocaleString():"---"]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.9rem",color:"#555"},children:[i.jsx("input",{type:"checkbox",checked:$.show_master_recipes||!1,onChange:async T=>{const A=T.target.checked;s(P=>P.map(L=>L.id===$.id?{...L,show_master_recipes:A}:L));try{const P=`user_prefs_${$.id}`,L=JSON.parse(localStorage.getItem(P)||"{}");L.show_master_recipes=A,localStorage.setItem(P,JSON.stringify(L))}catch(P){console.error(P)}try{await Bi.updateProfile($.id,{show_master_recipes:A})}catch(P){console.error(P)}}}),""]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>{p({id:$.id,display_id:$.display_id,email:$.email}),y(""),b(""),_(""),O("")},style:{whiteSpace:"nowrap"},children:""})]})]},$.id);return i.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",height:"100%",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",color:"var(--text-color)"},children:[i.jsx("h2",{children:""}),i.jsx(se,{variant:"ghost",onClick:r,children:""})]}),u&&i.jsx("div",{style:{padding:"10px",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",marginBottom:"20px"},children:u}),l?i.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"..."}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[C.length>0&&i.jsxs("div",{children:[i.jsx("h3",{style:{borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--color-primary)"},children:""}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:C.map($=>i.jsx(I,{user:$,isAdmin:!0},$.id))})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{borderBottom:"2px solid #ddd",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--text-color)"},children:""}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:B.length>0?B.map($=>i.jsx(I,{user:$,isAdmin:!1},$.id)):i.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:""})})]})]}),i.jsx(Cn,{isOpen:!!f,onClose:()=>{D||p(null)},title:": ",size:"small",children:i.jsxs("div",{style:{color:"#333",lineHeight:1.5},children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"6px"},children:[": ",f?.display_id||f?.email||f?.id]}),f?.email&&i.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"12px",wordBreak:"break-all"},children:f.email}),i.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"12px"},children:"8"}),S&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"6px",marginBottom:"12px"},children:S}),j&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"6px",marginBottom:"12px"},children:j}),i.jsxs("div",{style:{display:"grid",gap:"10px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#555",marginBottom:"6px"},children:""}),i.jsx("input",{type:"password",value:m,onChange:$=>y($.target.value),autoComplete:"new-password",placeholder:"8",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #ddd"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#555",marginBottom:"6px"},children:""}),i.jsx("input",{type:"password",value:v,onChange:$=>b($.target.value),autoComplete:"new-password",placeholder:"",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #ddd"}})]})]}),i.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"16px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>p(null),disabled:D,children:""}),i.jsx(se,{variant:"secondary",isLoading:z,disabled:!f?.email||D,onClick:async()=>{if(_(""),O(""),!f?.email){_("");return}q(!0);try{await Bi.sendPasswordResetEmail(f.email),O("")}catch($){console.error($),_($?.message||"")}finally{q(!1)}},style:{whiteSpace:"nowrap"},children:""}),i.jsx(se,{variant:"danger",isLoading:D,onClick:async()=>{if(_(""),O(""),!!f?.id){if(!m||m.length<8){_("8");return}if(m!==v){_("");return}N(!0);try{await Bi.adminResetPassword(f.id,m),O(""),y(""),b("")}catch($){console.error($);const Y=$?.message||"";/FunctionsHttpError|not found|404/i.test(Y)||/admin-reset-password/i.test(Y)?_(""):_(Y)}finally{N(!1)}}},children:""})]})]})})]})},Nr="inventory_items",Ts="inventory_snapshots",zi="deleted_inventory_snapshots",ov=(r,t)=>{const s=String(r?.message||"");return String(r?.code||"")==="42703"?s.toLowerCase().includes(String(t).toLowerCase()):s.toLowerCase().includes(`column "${String(t).toLowerCase()}"`)&&s.toLowerCase().includes("does not exist")},fn={getAll:async r=>{if(!r)return[];const{data:t,error:s}=await ve.from(Nr).select("*").eq("user_id",r).order("created_at",{ascending:!0});return s?(console.error("Error fetching inventory:",s),[]):t||[]},add:async(r,t)=>{if(!r)throw new Error("User ID is required");const{id:s,isPhantom:l,_master:c,...u}=t,{data:d,error:f}=await ve.from(Nr).insert([{...u,user_id:r,quantity:parseFloat(t.quantity)||0,threshold:parseFloat(t.threshold)||0,price:parseFloat(t.price)||0}]).select().single();if(f)throw console.error("Error adding item:",f),f;return d},update:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t.id)throw new Error("Item ID is required for update");const{id:s,isPhantom:l,created_at:c,_master:u,...d}=t,{data:f,error:p}=await ve.from(Nr).update({...d,quantity:parseFloat(t.quantity)||0,threshold:parseFloat(t.threshold)||0,price:parseFloat(t.price)||0,updated_at:new Date().toISOString()}).eq("id",t.id).eq("user_id",r).select().single();if(p)throw console.error("Error updating item:",p),p;return f},delete:async(r,t)=>{if(!r)throw new Error("User ID is required");const{error:s}=await ve.from(Nr).delete().eq("id",t).eq("user_id",r);if(s)throw console.error("Error deleting item:",s),s},adjustStock:async(r,t,s)=>{if(!r)throw new Error("User ID is required");const{data:l,error:c}=await ve.from(Nr).select("quantity").eq("id",t).eq("user_id",r).single();if(c||!l)throw new Error("Item not found");const u=Math.max(0,(l.quantity||0)+s),{data:d,error:f}=await ve.from(Nr).update({quantity:u,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r).select().single();if(f)throw f;return d},clearAll:async r=>{if(!r)throw new Error("User ID is required");const{error:t}=await ve.from(Nr).delete().eq("user_id",r).not("id","is",null);if(t)throw console.error("Error clearing inventory:",t),t},getIgnoredItems:async r=>{if(!r)return new Set;const{data:t,error:s}=await ve.from("ignored_items").select("name").eq("user_id",r);return s?(console.error("Error fetching ignored items:",s),new Set):new Set(t.map(l=>l.name))},ignoreItem:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)return;const{error:s}=await ve.from("ignored_items").insert([{user_id:r,name:t}]).select();if(s&&s.code!=="23505")throw console.error("Error ignoring item:",s),s},getSnapshots:async r=>{if(!r)return[];const{data:t,error:s}=await ve.from(Ts).select("*").eq("user_id",r).order("snapshot_date",{ascending:!1});return s?(console.error("Error fetching snapshots:",s),[]):t||[]},getDeletedSnapshots:async r=>{if(!r)return[];const{data:t,error:s}=await ve.from(zi).select("*").eq("user_id",r).order("deleted_at",{ascending:!1});return s?(console.error("Error fetching deleted snapshots:",s),[]):t||[]},createSnapshot:async(r,t,s,l)=>{if(!r)throw new Error("User ID is required");let c=null,u=null;const d=await ve.from(Ts).insert([{user_id:r,title:t,items:s,total_value:l,snapshot_date:new Date().toISOString()}]).select().single();if(c=d.data??null,u=d.error??null,u&&ov(u,"user_id")){const f=await ve.from(Ts).insert([{title:t,items:s,total_value:l,snapshot_date:new Date().toISOString()}]).select().single();c=f.data??null,u=f.error??null}if(u)throw console.error("Error creating snapshot:",u),u;return c},deleteSnapshotToTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Snapshot ID is required");const{data:s,error:l}=await ve.from(Ts).select("*").eq("id",t).eq("user_id",r).single();if(l||!s)throw console.error("Error fetching snapshot for delete:",l),l||new Error("Snapshot not found");const{error:c}=await ve.from(zi).insert([{original_id:s.id,user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at,deleted_at:new Date().toISOString()}]);if(c)throw console.error("Error moving snapshot to trash:",c),c;const{error:u}=await ve.from(Ts).delete().eq("id",t).eq("user_id",r);if(u)throw console.error("Error deleting snapshot from main table:",u),u;return!0},restoreSnapshotFromTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Deleted snapshot ID is required");const{data:s,error:l}=await ve.from(zi).select("*").eq("id",t).eq("user_id",r).single();if(l||!s)throw console.error("Error fetching deleted snapshot:",l),l||new Error("Deleted snapshot not found");let c=null;{const{error:d}=await ve.from(Ts).insert([{id:s.original_id,user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at}]);c=d}if(c){const{error:d}=await ve.from(Ts).insert([{user_id:r,title:s.title,items:s.items,total_value:s.total_value,snapshot_date:s.snapshot_date,created_at:s.created_at}]);if(d)throw console.error("Error restoring snapshot (fallback) :",d),d}const{error:u}=await ve.from(zi).delete().eq("id",t).eq("user_id",r);if(u)throw console.error("Error removing restored snapshot from trash:",u),u;return!0},hardDeleteSnapshotFromTrash:async(r,t)=>{if(!r)throw new Error("User ID is required");if(!t)throw new Error("Deleted snapshot ID is required");const{error:s}=await ve.from(zi).delete().eq("id",t).eq("user_id",r);if(s)throw console.error("Error hard deleting snapshot from trash:",s),s;return!0},resetStockQuantities:async r=>{if(!r)throw new Error("User ID is required");const t=await ve.from(Nr).update({quantity:0,updated_at:new Date().toISOString()}).eq("user_id",r).not("id","is",null);if(t.error){if(ov(t.error,"user_id")){const s=await ve.from(Nr).update({quantity:0,updated_at:new Date().toISOString()}).not("id","is",null);if(s.error)throw console.error("Error resetting quantities (fallback):",s.error),s.error;return}throw console.error("Error resetting quantities:",t.error),t.error}}},UE=({item:r,isLowStock:t,onUpdateQuantity:s,onDelete:l})=>{const[c,u]=_e.useState(r.quantity===""?"":parseFloat(r.quantity)||0);_e.useEffect(()=>{u(r.quantity===""?"":parseFloat(r.quantity)||0)},[r.quantity]);const d=parseFloat(r.price)||0,f=c===""?0:parseFloat(c),p=d*f,m=_e.useMemo(()=>{const S=r?._master?.packetSize,_=r?._master?.packetUnit,j=parseFloat(S);return!Number.isFinite(j)||j<=0?"-":`${Number.isInteger(j)?j.toLocaleString():j.toLocaleString(void 0,{maximumFractionDigits:3})}${_?String(_):""}`},[r?._master?.packetSize,r?._master?.packetUnit]),y=()=>{const S=parseFloat(c);!isNaN(S)&&S!==r.quantity&&s(r.id,S)},v=S=>{S.key==="Enter"&&S.target.blur()},b=S=>{const _=S?.target;_&&requestAnimationFrame(()=>{try{const j=String(_.value??"").length;_.setSelectionRange(j,j)}catch{}})};return i.jsxs("tr",{className:t(r)?"low-stock":"",children:[i.jsxs("td",{children:[r.name,t(r)&&i.jsx("span",{style:{marginLeft:"4px",fontSize:"0.7rem",color:"red"},children:""})]}),i.jsx("td",{style:{textAlign:"right"},children:d>0?`${d.toLocaleString()}`:"-"}),i.jsx("td",{children:r.unit}),i.jsx("td",{style:{textAlign:"right",fontSize:"0.85rem",color:"#666"},children:m}),i.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[i.jsx("input",{type:"text",inputMode:"decimal",value:c,onChange:S=>u(S.target.value),className:"inventory-quantity-input no-print",onBlur:y,onKeyDown:v,onFocus:b,onClick:b,style:{width:"80px",textAlign:"right",padding:"4px",border:"1px solid #ddd",borderRadius:"4px",background:"transparent"}}),i.jsx("span",{className:"print-only",style:{display:"none"},children:c})]}),i.jsx("td",{style:{textAlign:"right"},children:p>0?`${Math.round(p).toLocaleString()}`:"-"}),i.jsx("td",{style:{fontSize:"0.8rem",color:"#666"},children:r.vendor||"-"}),i.jsx("td",{style:{textAlign:"center"},children:i.jsx("button",{onClick:()=>l(r),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1rem",opacity:.6},title:"",children:""})})]})},zE=({items:r,loading:t,onSearch:s,searchQuery:l,onEdit:c,onDelete:u,onUpdateQuantity:d})=>{const{setNodeRef:f,isOver:p}=hl({id:"inventory-list-droppable"}),m=_=>_.threshold>0&&_.quantity<=_.threshold,[y,v]=_e.useState({key:null,direction:"asc"}),b=_=>{v(j=>j.key===_?{key:_,direction:j.direction==="asc"?"desc":"asc"}:{key:_,direction:"asc"})},S=_e.useMemo(()=>{if(!y.key)return r;const _=[...r];return y.key==="vendor"&&_.sort((j,O)=>{const D=(j?.vendor||"").toString(),N=(O?.vendor||"").toString(),z=D.localeCompare(N,"ja");if(z!==0)return y.direction==="asc"?z:-z;const q=(j?.name||"").toString(),U=(O?.name||"").toString(),C=q.localeCompare(U,"ja");return y.direction==="asc"?C:-C}),_},[r,y]);return i.jsxs("div",{ref:f,className:`inventory-list-droppable ${p?"highlight-drop":""}`,style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:p?"#f0f9ff":"transparent",transition:"background-color 0.2s",borderRadius:"8px",padding:"8px"},children:[i.jsx("div",{className:"inventory-table-container",children:t?i.jsx("p",{children:"Loading..."}):i.jsxs("table",{className:"inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsxs("th",{onClick:()=>b("vendor"),title:"",style:{cursor:"pointer",userSelect:"none"},children:[" ",y.key==="vendor"&&(y.direction==="asc"?"":"")]}),i.jsx("th",{style:{width:"40px"}})]})}),i.jsxs("tbody",{children:[S.map(_=>i.jsx(UE,{item:_,isLowStock:m,onUpdateQuantity:d,onDelete:u},_.id)),S.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:"8",style:{textAlign:"center",color:"#888",padding:"2rem"},children:p?"":""})})]}),i.jsx("tfoot",{children:i.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f9f9f9"},children:[i.jsx("td",{colSpan:"5",style:{textAlign:"right",paddingRight:"10px"},children:":"}),i.jsxs("td",{style:{textAlign:"right"},children:["",Math.round(r.reduce((_,j)=>_+(parseFloat(j.price)||0)*(parseFloat(j.quantity)||0),0)).toLocaleString()]}),i.jsx("td",{colSpan:"2"})]})})]})}),p&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(52, 152, 219, 0.1)",border:"2px dashed #3498db",borderRadius:"8px",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",color:"#3498db",fontWeight:"bold"},children:"+ "})]})},ME=({onBack:r})=>{const{user:t}=Ms(),s=t?.id,[l,c]=w.useState([]),[u,d]=w.useState([]),[f,p]=w.useState([]),[m,y]=w.useState([]),[v,b]=w.useState(new Map),[S,_]=w.useState(new Set),[j,O]=w.useState(!0),[D,N]=w.useState(""),[z,q]=w.useState(!1),[U,C]=w.useState(null),[B,I]=w.useState(!1),[$,Y]=w.useState(""),[T,A]=w.useState(!0),[P,L]=w.useState(!1),[K,k]=w.useState(null),[G,X]=w.useState("history"),[ce,de]=w.useState(null),[M,V]=w.useState(""),[Z,le]=w.useState(!1),[fe,ye]=w.useState(null),[Ce,Ie]=w.useState(new Set),[Ue,he]=w.useState(!1),[Xe,Pe]=w.useState(""),[bt,ut]=w.useState(!1),[nt,Ke]=w.useState(null),ft=Us(un(ol,{activationConstraint:{distance:8}})),[_t,Mt]=w.useState("all"),[Ot,kt]=w.useState(new Set);w.useEffect(()=>{s&&(Mt("all"),N(""),at())},[s]);const at=async(R=!1)=>{R||O(!0);try{const[ee,re,ue,pe,Se,ge]=await Promise.all([fn.getAll(s),En.getPriceListArray(),fn.getIgnoredItems(s),fn.getSnapshots(s),fn.getDeletedSnapshots(s),on.getAllConversions()]);c(ee),y(re),_(ue),d(pe||[]),p(Se||[]),b(ge||new Map);const Te=new Set(ee.map(Oe=>Oe.id));kt(Te)}catch(ee){console.error("Failed to load data:",ee)}finally{R||O(!1)}},Vt=R=>{if(!R)return"-";const ee=new Date(R);if(Number.isNaN(ee.getTime()))return String(R);const re=ee.getFullYear(),ue=String(ee.getMonth()+1).padStart(2,"0"),pe=String(ee.getDate()).padStart(2,"0"),Se=String(ee.getHours()).padStart(2,"0"),ge=String(ee.getMinutes()).padStart(2,"0");return`${re}/${ue}/${pe} ${Se}:${ge}`},it=R=>{const ee=R?.items;return Array.isArray(ee)?ee:ee?[]:[]},gn=R=>{R?.id&&s&&(V(""),de({title:"",message:`${R.title||""}
`,onConfirm:async()=>{try{await fn.deleteSnapshotToTrash(s,R.id),await at(!0),Ke({title:"",message:"",type:"success"})}catch(ee){console.error(ee),Ke({title:"",message:"()",type:"error"})}finally{de(null)}}}))},mn=R=>{R?.id&&s&&(V(""),de({title:"",message:`${R.title||""}`,onConfirm:async()=>{try{await fn.restoreSnapshotFromTrash(s,R.id),await at(!0),Ke({title:"",message:"",type:"success"})}catch(ee){console.error(ee),Ke({title:"",message:"",type:"error"})}finally{de(null)}}}))},dn=R=>{R?.id&&s&&(V(""),de({title:" ",message:`${R.title||""}


 delete `,requireText:"delete",onConfirm:async()=>{try{await fn.hardDeleteSnapshotFromTrash(s,R.id),await at(!0),Ke({title:"",message:"",type:"success"})}catch(ee){console.error(ee),Ke({title:"",message:"",type:"error"})}finally{de(null)}}}))},dt=R=>{if(!R)return;const ee=it(R),re=["","","","","",""],ue=ee.map(ke=>{const qe=parseFloat(ke?.price)||0,Ct=ke?.quantity===""?0:parseFloat(ke?.quantity)||0,St=Math.round(qe*Ct);return[ke?.name??"",qe||"",ke?.unit??"",ke?.quantity??"",St||"",ke?.vendor??""]}),pe=ke=>{const qe=String(ke??"");return qe.includes(",")||qe.includes('"')||qe.includes(`
`)||qe.includes("\r")?`"${qe.replace(/"/g,'""')}"`:qe},Se=[re.map(pe).join(","),...ue.map(ke=>ke.map(pe).join(","))].join(`
`),ge=new Uint8Array([239,187,191]),Te=new Blob([ge,Se],{type:"text/csv"}),Oe=URL.createObjectURL(Te),we=(R.title||"inventory_snapshot").toString().replace(/[\\/:*?"<>|]/g,"_"),Ae=(R.snapshot_date?new Date(R.snapshot_date):new Date).toISOString().slice(0,10),Re=document.createElement("a");Re.href=Oe,Re.download=`InventorySnapshot_${Ae}_${we}.csv`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re),URL.revokeObjectURL(Oe)},Dt=_e.useMemo(()=>{const R=we=>we?we.toString().trim():"",ee=new Map;try{for(const[we,Ae]of(v||new Map).entries())ee.set(R(we),Ae)}catch{}const re=we=>{const Ae=String(we??"").trim();if(!Ae)return"";const Re=Ae.toLowerCase();return Re===""?"g":Re===""?"ml":Re===""?"cc":Re===""?"kg":Re===""?"l":Re},ue=(we,Ae)=>{const Re=parseFloat(we?.lastPrice),ke=parseFloat(we?.packetSize),qe=re(we?.packetUnit),Ct=re(Ae||qe);if(!Number.isFinite(Re)||!Number.isFinite(ke)||ke<=0||!qe)return null;const St=Re/ke;if(Ct===qe)return St;if(qe==="g"&&Ct==="kg")return St*1e3;if(qe==="kg"&&Ct==="g")return St/1e3;const vn=qe==="cc"?"ml":qe,Lt=Ct==="cc"?"ml":Ct;return vn==="ml"&&Lt==="l"?St*1e3:vn==="l"&&Lt==="ml"?St/1e3:null},pe=we=>{const Ae=String(we??"").trim();return Ae?["","","","","","","","pc","PC",""].includes(Ae):!1},Se=we=>{const Ae=R(we?.name),Re=Ae?ee.get(Ae):null;if(!Re)return we;const ke={...we},qe=Re.packetUnit||"",Ct=parseFloat(Re.packetSize);if(ke.isPhantom){qe&&(ke.unit=qe);const St=ue(Re,ke.unit||qe);St!==null&&(ke.price=St)}else{if(!!qe&&Number.isFinite(Ct)&&Ct>0&&(pe(ke.unit)||!ke.unit)){const Lt=ke.quantity;if(Lt!==""&&Lt!==null&&Lt!==void 0){const Bt=parseFloat(Lt);Number.isFinite(Bt)&&(ke.quantity=Bt*Ct)}const Et=ke.threshold;if(Et!==""&&Et!==null&&Et!==void 0){const Bt=parseFloat(Et);Number.isFinite(Bt)&&(ke.threshold=Bt*Ct)}ke.unit=qe}else!ke.unit&&qe&&(ke.unit=qe);const vn=ue(Re,ke.unit||qe);vn!==null&&(ke.price=vn)}return ke._master={packetSize:Re.packetSize,packetUnit:Re.packetUnit,lastPrice:Re.lastPrice,updatedAt:Re.updatedAt},ke},ge=l.map(Se),Te=new Map(ge.map(we=>[R(we.name),we])),Oe=[...ge];return m.forEach((we,Ae)=>{const Re=R(we.name);if(!(S.has(we.name)||S.has(Re))&&!Te.has(Re)){const ke={id:`phantom-${Ae}`,isPhantom:!0,name:we.name.trim(),quantity:"",unit:we.unit||"",category:"",price:we.price,vendor:we.vendor,threshold:0};Oe.push(Se(ke))}}),Oe.filter(we=>{const Ae=R(we.name);return!(S.has(we.name)||S.has(Ae)||Ce.has(we.name)||Ce.has(Ae))})},[l,m,S,Ce,v]),Zt=R=>{const{active:ee,over:re}=R;if(re&&re.id==="inventory-list-droppable"){const ue=ee.data.current.item;if(ee.data.current.type==="csv-item"){const pe=we=>we?we.toString().trim():"",Se=v&&v.get(pe(ue?.name))||null,ge=Se?.packetUnit||ue.unit,Te=Se?masterUnitPriceFor(Se,ge):null,Oe=Te!==null?Te:Se?.lastPrice!==null&&Se?.lastPrice!==void 0&&Se?.lastPrice!==""?Se.lastPrice:ue.price;C({name:ue.name,price:Oe,unit:ge,category:"",threshold:0,quantity:0,vendor:ue.vendor,isNewFromCsv:!0}),q(!0)}}},en=async R=>{if(R.preventDefault(),!s)return;const ee=new FormData(R.target),re={name:ee.get("name"),quantity:parseFloat(ee.get("quantity")),unit:ee.get("unit"),category:ee.get("category"),threshold:parseFloat(ee.get("threshold")),vendor:U.vendor||"",price:U.price||0};try{U.id&&!U.isPhantom?await fn.update(s,{...U,...re}):await fn.add(s,re),q(!1),C(null),at()}catch(ue){console.error("Failed to save item:",ue),Ke({title:"",message:"",type:"error"})}},lr=R=>{ye(R),le(!0)},yn=async()=>{if(fe)try{const ee=(re=>re?re.toString().trim():"")(fe?.name);ee&&Ie(re=>{const ue=new Set(re);return ue.add(ee),ue}),le(!1),ye(null)}catch(R){console.error("Failed to delete/ignore item:",R)}},wt=async(R,ee)=>{try{if(!s)return;const re=Dt.find(ue=>ue.id===R);if(!re)return;if(re.isPhantom){const ue={name:re.name.trim(),quantity:ee,unit:re.unit,category:re.category||"",price:re.price,vendor:re.vendor,threshold:0},pe=await fn.add(s,ue);await at(!0),kt(Se=>{const ge=new Set(Se);return ge.add(pe.id),ge})}else c(ue=>ue.map(pe=>pe.id!==R?pe:{...pe,quantity:ee,unit:re.unit??pe.unit,price:re.price??pe.price,threshold:re.threshold??pe.threshold})),kt(ue=>{const pe=new Set(ue);return pe.add(R),pe}),await fn.update(s,{...re,quantity:ee})}catch(re){console.error(re);const ue=re?.message||re?.error_description||(typeof re=="string"?re:null)||(()=>{try{return JSON.stringify(re)}catch{return null}})()||"";Ke({title:"",message:`
${ue}`,type:"error"}),at()}},gt=async()=>{if($&&s)try{const R=Dt.filter(re=>!re.isPhantom).map(({isPhantom:re,_master:ue,...pe})=>pe),ee=R.reduce((re,ue)=>{const pe=parseFloat(ue.price)||0,Se=ue.quantity===""?0:parseFloat(ue.quantity)||0;return re+pe*Se},0);await fn.createSnapshot(s,$,R,ee),T?(await fn.resetStockQuantities(s),await at(),kt(new Set)):await at(!0),I(!1),ut(!0)}catch(R){console.error("Failed to complete inventory:",R);const ee=R?.message||R?.error_description||(typeof R=="string"?R:null)||(()=>{try{return JSON.stringify(R)}catch{return null}})()||"";Ke({title:"",message:`
${ee}`,type:"error"})}},mt=()=>{const R=["","","","","",""],ee=be.map(Oe=>{const we=parseFloat(Oe.price)||0,Ae=Oe.quantity===""?0:parseFloat(Oe.quantity)||0,Re=Math.round(we*Ae);return[Oe.name,we,Oe.unit,Oe.quantity,Re,Oe.vendor||""]}),re=[R.join(","),...ee.map(Oe=>Oe.map(we=>{const Ae=String(we??"");return Ae.includes(",")||Ae.includes('"')||Ae.includes(`
`)?`"${Ae.replace(/"/g,'""')}"`:Ae}).join(","))].join(`
`),ue=new Uint8Array([239,187,191]),pe=new Blob([ue,re],{type:"text/csv"}),Se=document.createElement("a"),ge=URL.createObjectURL(pe),Te=new Date().toISOString().split("T")[0];Se.href=ge,Se.download=`Inventory_${Te}.csv`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(ge)},Rn=["","","","","","","","","","","",""],xe=[...new Set(Dt.map(R=>R.vendor).filter(R=>R))].sort(),me=Dt.some(R=>!R.vendor),be=Dt.filter(R=>R.name.toLowerCase().includes(D.toLowerCase())?_t==="all"?!0:_t==="inventory-check"?Ot.has(R.id)||!R.isPhantom:_t==="other"?!R.vendor:R.vendor===_t:!1);return z?i.jsxs("div",{className:"inventory-edit-container fade-in",children:[i.jsx("div",{className:"container-header",children:i.jsx("h2",{className:"section-title",children:U&&!U.isNewFromCsv?"":""})}),i.jsx(Nt,{className:"edit-form-card",children:i.jsxs("form",{onSubmit:en,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"name",defaultValue:U?.name,required:!0,placeholder:": "})]}),i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"quantity",type:"number",step:"0.01",defaultValue:U?.quantity,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"unit",defaultValue:U?.unit||"g",required:!0,placeholder:"g, ml, ..."})]})]}),i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:""}),i.jsx(Ye,{name:"category",defaultValue:U?.category,list:"category-list",placeholder:"",autoComplete:"off"}),i.jsx("datalist",{id:"category-list",children:Rn.map(R=>i.jsx("option",{value:R},R))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:" ()"}),i.jsx(Ye,{name:"threshold",type:"number",step:"0.01",defaultValue:U?.threshold||0})]})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx(se,{variant:"ghost",type:"button",onClick:()=>{q(!1),C(null)},children:""}),i.jsx(se,{variant:"primary",type:"submit",children:""})]})]})})]}):i.jsx(Ds,{onDragEnd:Zt,sensors:ft,autoScroll:!1,children:i.jsxs("div",{className:"inventory-container fade-in",children:[i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:"  ()"}),i.jsxs("div",{className:"header-actions inventory-header-actions",children:[i.jsx(se,{variant:"ghost",onClick:r,children:" "}),i.jsx(se,{variant:"danger",className:"inventory-header-actions__btn inventory-header-actions__btn--compact",onClick:()=>{Pe(""),he(!0)},children:" "}),i.jsx(se,{variant:"primary",className:"inventory-header-actions__btn inventory-header-actions__btn--main",style:{backgroundColor:"#2ecc71",borderColor:"#27ae60"},onClick:()=>{const R=new Date;Y(`${R.getFullYear()}${R.getMonth()+1} `),A(!0),I(!0)},children:" "}),i.jsx(se,{variant:"secondary",className:"inventory-header-actions__btn",onClick:()=>{k(null),X("history"),L(!0)},title:"",children:" "}),i.jsx(se,{variant:"primary",className:"inventory-header-actions__btn",onClick:()=>{C(null),q(!0)},children:"+ "})]})]}),i.jsx("div",{className:"inventory-split-layout",children:i.jsxs("div",{className:"inventory-right-panel",style:{paddingLeft:0,borderLeft:"none"},children:[i.jsxs("div",{className:"inventory-controls",children:[i.jsxs("div",{className:"inventory-controls__row inventory-controls__row--filters",children:[i.jsxs("div",{className:"inventory-controls__field",children:[i.jsx("label",{className:"inventory-controls__label",children:":"}),i.jsxs("select",{className:"inventory-controls__select",value:_t==="inventory-check"?"":_t,onChange:R=>{R.target.value&&Mt(R.target.value)},children:[i.jsx("option",{value:"all",children:""}),i.jsx("option",{value:"",disabled:!0,children:""}),i.jsxs("optgroup",{label:"",children:[xe.map(R=>i.jsx("option",{value:R,children:R},R)),me&&i.jsx("option",{value:"other",children:""})]})]})]}),i.jsx("input",{className:"inventory-controls__search",placeholder:" ...",value:D,onChange:R=>N(R.target.value)})]}),i.jsxs("div",{className:"inventory-controls__row inventory-controls__row--actions",children:[i.jsxs("button",{className:"inventory-controls__btn",onClick:()=>Mt("inventory-check"),"data-active":_t==="inventory-check"?"true":"false",children:["  (",Ot.size,")"]}),i.jsx("button",{className:"inventory-controls__btn",onClick:mt,title:"CSV",children:" CSV (.csv)"}),_t==="inventory-check"&&i.jsx("button",{className:"inventory-controls__btn",onClick:()=>window.print(),title:" / PDF",children:" "})]})]}),i.jsx(zE,{items:be,loading:j,onSearch:N,searchQuery:D,onEdit:R=>{C(R),q(!0)},onDelete:lr,onUpdateQuantity:wt})]})}),i.jsx(Cn,{isOpen:B,onClose:()=>I(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{fontSize:"1rem",marginBottom:"1rem",lineHeight:"1.6"},children:""}),i.jsxs("div",{style:{background:"#e3f2fd",padding:"10px",borderRadius:"4px",marginBottom:"1.5rem",fontSize:"0.9rem",color:"#0d47a1"},children:[i.jsx("strong",{children:":"}),i.jsx("br",{}),"1. ",i.jsx("br",{}),"2. ",T?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"()0"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:""}),""]}),i.jsx("br",{}),""]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:T,onChange:R=>A(R.target.checked)}),i.jsxs("span",{style:{fontSize:"0.95rem",color:"#333"},children:["",i.jsx("strong",{children:"0"}),""]})]}),i.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"6px",lineHeight:1.4},children:""})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:" ()"}),i.jsx("input",{type:"text",value:$,onChange:R=>Y(R.target.value),style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[i.jsx("button",{onClick:()=>I(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:gt,style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:"#2ecc71",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:T?"":""})]})]})}),i.jsxs(Cn,{isOpen:P,onClose:()=>L(!1),title:" ",size:"large",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[i.jsx("div",{style:{color:"#555",fontSize:"0.9rem"},children:G==="history"?i.jsxs(i.Fragment,{children:[": ",i.jsx("strong",{children:u.length})," "]}):i.jsxs(i.Fragment,{children:[": ",i.jsx("strong",{children:f.length})," "]})}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[i.jsx("button",{type:"button",onClick:()=>X("history"),style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #ccc",background:G==="history"?"#111":"#fff",color:G==="history"?"#fff":"#333",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"},children:""}),i.jsx("button",{type:"button",onClick:()=>X("trash"),style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #ccc",background:G==="trash"?"#111":"#fff",color:G==="trash"?"#fff":"#333",cursor:"pointer",fontWeight:"bold",fontSize:"0.85rem"},children:""})]}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>at(!0),title:"",children:" "})]})]}),G==="history"&&u.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:""}):G==="trash"&&f.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:""}):i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:G==="trash"?"":""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",width:"120px"}})]})}),i.jsx("tbody",{children:(G==="history"?u:f).map(R=>{const ee=it(R).length,re=Math.round(parseFloat(R.total_value)||0),ue=G==="trash"?`trash-${R.id}`:R.id,pe=Vt(G==="trash"?R.deleted_at:R.snapshot_date);return i.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[i.jsx("td",{style:{padding:"10px",whiteSpace:"nowrap"},children:pe}),i.jsx("td",{style:{padding:"10px"},children:R.title||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:ee.toLocaleString()}),i.jsxs("td",{style:{padding:"10px",textAlign:"right"},children:["",re.toLocaleString()]}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:G==="history"?i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>dt(R),disabled:ee===0,title:ee===0?"items CSV":"CSV",children:" CSV"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>k(R),children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>gn(R),title:"",children:""})]}):i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>dt(R),disabled:ee===0,children:" CSV"}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>k(R),children:""}),i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>mn(R),title:"",children:""}),i.jsx(se,{variant:"danger",size:"sm",onClick:()=>dn(R),title:"",children:""})]})})]},ue)})})]})})]}),i.jsx(Cn,{isOpen:!!ce,onClose:()=>de(null),title:ce?.title||"",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.6},children:ce?.message}),ce?.requireText&&i.jsxs("div",{style:{marginTop:"14px"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:[" ",i.jsx("span",{style:{fontFamily:"monospace",background:"#eee",padding:"2px 4px"},children:ce.requireText})," "]}),i.jsx("input",{type:"text",value:M,onChange:R=>V(R.target.value),placeholder:ce.requireText,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>de(null),children:""}),i.jsx(se,{variant:"danger",disabled:!!ce?.requireText&&M!==ce.requireText,onClick:()=>ce?.onConfirm&&ce.onConfirm(),children:""})]})]})}),i.jsx(Cn,{isOpen:!!K,onClose:()=>k(null),title:K?` ${K.title||""}`:" ",size:"large",children:(()=>{const R=K;if(!R)return null;const ee=it(R),re=Math.round(parseFloat(R.total_value)||0),ue=[...ee].sort((pe,Se)=>{const ge=(pe?.name||"").toString(),Te=(Se?.name||"").toString();return ge.localeCompare(Te,"ja")});return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"12px",color:"#555",fontSize:"0.9rem"},children:[i.jsxs("div",{children:[": ",i.jsx("strong",{children:Vt(R.snapshot_date)})]}),i.jsxs("div",{children:[": ",i.jsx("strong",{children:ue.length.toLocaleString()})]}),i.jsxs("div",{style:{marginLeft:"auto"},children:[": ",i.jsxs("strong",{children:["",re.toLocaleString()]})]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"12px"},children:i.jsx(se,{variant:"secondary",size:"sm",onClick:()=>dt(R),children:" CSV (.csv)"})}),ue.length===0?i.jsx("div",{style:{color:"#666",textAlign:"center",padding:"24px 0"},children:" items "}):i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"right",whiteSpace:"nowrap"},children:""}),i.jsx("th",{style:{padding:"10px",borderBottom:"1px solid #e5e7eb",textAlign:"left",whiteSpace:"nowrap"},children:""})]})}),i.jsx("tbody",{children:ue.map((pe,Se)=>{const ge=parseFloat(pe?.price)||0,Te=pe?.quantity===""?0:parseFloat(pe?.quantity)||0,Oe=Math.round(ge*Te);return i.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[i.jsx("td",{style:{padding:"10px"},children:pe?.name||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:ge?`${Math.round(ge).toLocaleString()}`:"-"}),i.jsx("td",{style:{padding:"10px"},children:pe?.unit||"-"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:Te?Te.toLocaleString():"0"}),i.jsx("td",{style:{padding:"10px",textAlign:"right"},children:Oe?`${Oe.toLocaleString()}`:"-"}),i.jsx("td",{style:{padding:"10px"},children:pe?.vendor||"-"})]},pe?.id||`${pe?.name||"item"}-${Se}`)})})]})})]})})()}),i.jsx(Cn,{isOpen:Z,onClose:()=>le(!1),title:"",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsxs("p",{style:{fontSize:"1.1rem",marginBottom:"1rem",lineHeight:"1.6"},children:["",i.jsx("strong",{children:fe?.name}),""]}),i.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1.5rem",lineHeight:"1.5"},children:["",i.jsx("strong",{children:""}),"",i.jsx("br",{}),"CSV"]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx("button",{onClick:()=>le(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:yn,style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:"#d32f2f",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:""})]})]})}),i.jsx(Cn,{isOpen:Ue,onClose:()=>he(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333"},children:[i.jsx("p",{style:{fontSize:"1rem",marginBottom:"1rem",lineHeight:"1.6",color:"#d32f2f",fontWeight:"bold"},children:""}),i.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1.5rem",lineHeight:"1.5"},children:["",i.jsx("br",{}),"CSV",i.jsx("br",{}),i.jsx("span",{style:{fontSize:"0.8rem"},children:""})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.9rem",fontWeight:"bold"},children:[" ",i.jsx("span",{style:{fontFamily:"monospace",background:"#eee",padding:"2px 4px"},children:"delete"})," "]}),i.jsx("input",{type:"text",value:Xe,onChange:R=>Pe(R.target.value),placeholder:"delete",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[i.jsx("button",{onClick:()=>he(!1),style:{padding:"8px 16px",borderRadius:"4px",border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontSize:"0.9rem"},children:""}),i.jsx("button",{onClick:async()=>{if(Xe==="delete")try{if(!s)return;await fn.clearAll(s),at(),kt(new Set),he(!1),Ke({title:"",message:"",type:"success"})}catch(R){console.error(R),Ke({title:"",message:"",type:"error"})}},disabled:Xe!=="delete",style:{padding:"8px 16px",borderRadius:"4px",border:"none",background:Xe==="delete"?"#d32f2f":"#ccc",color:"white",cursor:Xe==="delete"?"pointer":"not-allowed",fontSize:"0.9rem",fontWeight:"bold",transition:"background 0.2s"},children:""})]})]})}),i.jsx(Cn,{isOpen:bt,onClose:()=>ut(!1),title:" ",size:"small",children:i.jsxs("div",{style:{color:"#333",textAlign:"center",padding:"1rem"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsxs("h3",{style:{marginBottom:"1rem"},children:[$," "]}),i.jsxs("p",{style:{color:"#666",marginBottom:"1.5rem",lineHeight:"1.6"},children:["",i.jsx("br",{}),""]}),i.jsx("button",{onClick:()=>ut(!1),style:{padding:"8px 24px",borderRadius:"4px",border:"none",background:"#2ecc71",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"OK"})]})}),i.jsx(Cn,{isOpen:!!nt,onClose:()=>Ke(null),title:nt?.title||"",size:"small",children:i.jsxs("div",{style:{color:"#333",textAlign:"center",padding:"1rem"},children:[nt?.type==="success"&&i.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:""}),nt?.type==="error"&&i.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:""}),i.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1.5rem",lineHeight:"1.6"},children:nt?.message}),i.jsx("button",{onClick:()=>Ke(null),style:{padding:"8px 24px",borderRadius:"4px",border:"none",background:nt?.type==="error"?"#e74c3c":"#2ecc71",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"OK"})]})})]})})},k0=r=>`planner_data_${r}`,Mi=r=>{try{if(!r)return{};let t=localStorage.getItem(k0(r));return t?JSON.parse(t):{}}catch{return{}}},Io=(r,t)=>{r&&localStorage.setItem(k0(r),JSON.stringify(t))},Oa={getAll:async r=>Mi(r),cleanupInvalidPlans:async(r,t)=>{const s=Mi(r);let l=!1;const c=new Set(t);return Object.keys(s).forEach(u=>{const d=s[u].length;s[u]=s[u].filter(f=>c.has(f.recipeId)),s[u].length!==d&&(l=!0),s[u].length===0&&(delete s[u],l=!0)}),l&&Io(r,s),s},addMeal:async(r,t,s,l)=>{const c=Mi(r);c[t]||(c[t]=[]);const u={id:Date.now().toString(),recipeId:s,type:l,note:""};return c[t].push(u),Io(r,c),u},removeMeal:async(r,t,s)=>{const l=Mi(r);l[t]&&(l[t]=l[t].filter(c=>c.id!==s),l[t].length===0&&delete l[t],Io(r,l))},updateMeal:async(r,t,s,l)=>{const c=Mi(r);if(c[t]){const u=c[t].findIndex(d=>d.id===s);u!==-1&&(c[t][u]={...c[t][u],...l},Io(r,c))}}},LE=({recipe:r})=>{const{attributes:t,listeners:s,setNodeRef:l,transform:c}=Bh({id:`recipe-${r.id}`,data:{recipe:r}}),u=c?{transform:`translate3d(${c.x}px, ${c.y}px, 0)`,position:"relative",zIndex:999}:void 0;return i.jsx("div",{ref:l,style:u,...s,...t,className:"draggable-recipe",children:r.title})},BE=({meal:r,dateStr:t,children:s})=>{const{attributes:l,listeners:c,setNodeRef:u,transform:d}=Bh({id:`meal-${r.id}`,data:{meal:r,dateStr:t,type:"meal"}}),f=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,position:"relative",zIndex:999}:void 0;return i.jsx("div",{ref:u,style:f,...c,...l,className:"draggable-meal-wrapper",children:s})},IE=({dateStr:r,dayNum:t,isToday:s,isOutside:l,children:c,onDrop:u})=>{const{setNodeRef:d,isOver:f}=hl({id:`date-${r}`,data:{dateStr:r}});return i.jsxs("div",{ref:d,className:`calendar-cell ${s?"today":""} ${l?"outside-month":""}`,style:{backgroundColor:f?"#ffe0b2":void 0},children:[i.jsx("div",{className:"day-number",children:t}),c]})},qE=({onBack:r,onSelectRecipe:t})=>{const{user:s}=Ms(),l=ml(),[c,u]=w.useState([]),[d,f]=w.useState({}),[p,m]=w.useState(new Date),[y,v]=w.useState(""),[b,S]=w.useState(!1),[_,j]=w.useState(null),O=Us(un(ol,{activationConstraint:{distance:8}}));w.useEffect(()=>{D()},[p]);const D=async()=>{const Y=await Pt.fetchRecipes(s);if(u(Y),s?.id){const T=Y.map(P=>P.id),A=await Oa.cleanupInvalidPlans(s.id,T);f(A)}},N=async Y=>{const{active:T,over:A}=Y;if(A&&A.id.startsWith("date-")){const P=A.data.current.dateStr;if(T.id.startsWith("recipe-")){const L=T.data.current.recipe;await Oa.addMeal(s.id,P,L.id,"dinner"),D()}else if(T.id.startsWith("meal-")){const{meal:L,dateStr:K}=T.data.current;if(K===P)return;await Oa.addMeal(s.id,P,L.recipeId,L.type||"dinner"),await Oa.removeMeal(s.id,K,L.id),D()}}},z=async(Y,T,A)=>{A&&A.stopPropagation(),j({dateStr:Y,mealId:T}),S(!0)},q=async()=>{if(!_)return;const{dateStr:Y,mealId:T}=_;S(!1),j(null);try{await Oa.removeMeal(s.id,Y,T),await D(),l.success("")}catch(A){l.error(""),console.error("Delete meal error:",A)}},U=()=>{S(!1),j(null)},C=()=>{const Y=p.getFullYear(),T=p.getMonth(),A=new Date(Y,T,1),P=new Date(Y,T+1,0),L=[],K=A.getDay();for(let G=K-1;G>=0;G--){const X=new Date(Y,T,-G);L.push({date:X,isOutside:!0})}for(let G=1;G<=P.getDate();G++){const X=new Date(Y,T,G);L.push({date:X,isOutside:!1})}const k=42-L.length;for(let G=1;G<=k;G++){const X=new Date(Y,T+1,G);L.push({date:X,isOutside:!0})}return L},B=Y=>`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`,I=c.filter(Y=>Y.title.toLowerCase().includes(y.toLowerCase())),$=Y=>{m(new Date(p.getFullYear(),p.getMonth()+Y,1))};return i.jsxs("div",{className:"planner-container fade-in",children:[b&&i.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(Nt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[i.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:""})," "]}),i.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",i.jsx("br",{}),i.jsx("strong",{children:""})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:U,children:""}),i.jsx(se,{variant:"danger",onClick:q,children:""})]})]})}),i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:" "}),i.jsx("div",{className:"header-actions",children:i.jsx(se,{variant:"ghost",onClick:r,children:" "})})]}),i.jsx(Ds,{onDragEnd:N,sensors:O,children:i.jsxs("div",{className:"planner-layout",children:[i.jsxs("div",{className:"recipe-sidebar",children:[i.jsx("div",{className:"sidebar-search",children:i.jsx(Ye,{placeholder:"...",value:y,onChange:Y=>v(Y.target.value)})}),i.jsx("div",{className:"draggable-list",children:I.map(Y=>i.jsx(LE,{recipe:Y},Y.id))})]}),i.jsxs("div",{className:"planner-calendar",children:[i.jsxs("div",{className:"calendar-header",children:[i.jsx(se,{variant:"ghost",onClick:()=>$(-1),children:" "}),i.jsxs("h3",{style:{margin:0},children:[p.getFullYear()," ",p.getMonth()+1,""]}),i.jsx(se,{variant:"ghost",onClick:()=>$(1),children:" "})]}),i.jsxs("div",{className:"calendar-grid",children:[["","","","","","",""].map(Y=>i.jsx("div",{className:"calendar-day-header",children:Y},Y)),C().map((Y,T)=>{const A=B(Y.date),P=d[A]||[],L=A===B(new Date);return i.jsx(IE,{dateStr:A,dayNum:Y.date.getDate(),isToday:L,isOutside:Y.isOutside,children:P.map(K=>{const k=c.find(G=>G.id===K.recipeId);return i.jsx(BE,{meal:K,dateStr:A,children:i.jsxs("div",{className:"planned-meal",title:k?.title,onClick:()=>k&&t&&t(k),children:[i.jsx("span",{children:k?.title||"Unknown"}),i.jsx("span",{className:"delete-meal-btn",onPointerDown:G=>{G.stopPropagation()},onClick:G=>z(A,K.id,G),children:""})]})},K.id)})},T)})]})]})]})})]})},$E=({onBack:r})=>{const{user:t}=Ms(),s=ml(),[l,c]=w.useState(new Date().toISOString().slice(0,10)),[u,d]=w.useState(new Date(Date.now()+7*864e5).toISOString().slice(0,10)),[f,p]=w.useState([]),[m,y]=w.useState(!1),[v,b]=w.useState(!1),[S,_]=w.useState(!1),[j,O]=w.useState(!1),D=async()=>{y(!0);try{if(!t?.id){s.error(""),y(!1);return}const C=await Oa.getAll(t.id),B=new Date(l),I=new Date(u);I.setHours(23,59,59,999);const $=[];if(Object.keys(C).forEach(Z=>{const le=new Date(Z);le>=B&&le<=I&&C[Z].forEach(fe=>{$.push(fe.recipeId)})}),$.length===0){s.info(""),b(!1);return}const Y=await Pt.fetchRecipes(t),T=$.map(Z=>Y.find(le=>le.id===Z)).filter(Boolean),A=Z=>(Z??"").toString().trim(),P=Z=>{const le=A(Z);if(!le)return"";const fe=le.toLowerCase();return fe===""?"g":fe===""?"ml":fe===""?"cc":fe===""?"kg":fe===""?"l":fe},L=Z=>{const le=A(Z);return le?["","","","","","","","PC","pc",""].includes(le):!1},K=(Z,le)=>{const fe=parseFloat(Z)||0,ye=P(le);return ye==="kg"?{qty:fe*1e3,unit:"g"}:ye==="g"?{qty:fe,unit:"g"}:ye==="l"?{qty:fe*1e3,unit:"ml"}:ye==="cc"?{qty:fe,unit:"ml"}:ye==="ml"?{qty:fe,unit:"ml"}:{qty:fe,unit:A(le)||""}},k=(Z,le,fe,ye)=>{const Ce=A(fe),Ie=parseFloat(le)||0;if(!ye)return K(Ie,Ce);const Ue=parseFloat(ye.packetSize),he=P(ye.packetUnit);if(!Number.isFinite(Ue)||Ue<=0||!he)return K(Ie,Ce);if(["g","kg","ml","cc","l"].includes(he)&&L(Ce)){const Pe=Ie*Ue;return K(Pe,he)}return K(Ie,Ce)},[G,X,ce,de]=await Promise.all([on.getAllConversions(),En.fetchPriceList(t.id),fn.getAll(t.id),Ch.getAll(t.id)]),M={};T.forEach(Z=>{[...Z.ingredients||[],...Z.flours||[],...Z.breadIngredients||[]].forEach(ye=>{if(!ye.name)return;const Ce=A(ye.name),Ie=G?.get(Ce)||null,Ue=k(Ce,ye.quantity,ye.unit,Ie),he=Ue.qty||0,Xe=Ue.unit||"";M[Ce]||(M[Ce]={quantity:0,unit:Xe,count:0}),M[Ce].quantity+=he})});const V=Object.keys(M).map(Z=>{const le=M[Z],fe=G?.get(Z)||null,ye=X?.get(Z)||null,Ce=ce.find(mn=>A(mn.name)===Z),Ie=k(Z,Ce?.quantity??0,Ce?.unit??le.unit,fe),Ue=le.quantity||0,he=Ie.qty||0,Xe=le.unit||Ie.unit||"",Pe=he-Ue,bt=parseFloat(fe?.packetSize),ut=A(fe?.packetUnit),nt=Number.isFinite(bt)&&bt>0&&!!ut,Ke=nt?bt*.2:0,ft=nt?Pe<Ke:!1,_t=ye?.unit?String(ye.unit).trim():"",Mt=de?.get(Z)?String(de.get(Z)).trim():"",Ot=Mt||""||_t||""||"",kt=(fe?.lastPrice!==null&&fe?.lastPrice!==void 0&&fe?.lastPrice!==""?parseFloat(fe.lastPrice):null)??(ye?.price!==null&&ye?.price!==void 0?parseFloat(ye.price):null);let at=null,Vt=0,it=Xe;if(nt){const mn=Math.max(0,Ke-Pe);at=Math.ceil(mn/bt),ft&&at<1&&(at=1),Vt=at,it=Ot}else Vt=Math.max(0,Ue-he),it=Xe;const gn=nt?ft:Vt>.01;return{name:Z,required:Ue,stock:he,remaining:Pe,unit:Xe,shouldShow:gn,toOrder:Vt,orderUnit:it,orderPacks:at,packSize:nt?bt:null,packUnit:nt?ut:null,packPrice:Number.isFinite(kt)?kt:null,vendor:ye?.vendor||Ce?.vendor||""}}).filter(Z=>Z.shouldShow);p(V),b(!0)}catch(C){console.error(C),s.error("")}finally{y(!1)}},N=()=>{_(!0)},z=()=>{O(!0)},q=()=>f.map(C=>{if(Number.isFinite(C.orderPacks)&&C.orderPacks!==null){const B=C.packSize&&C.packUnit?`1${C.orderUnit}=${C.packSize}${C.packUnit}`:"";return`${C.name}: ${C.orderPacks}${C.orderUnit}${B}`}return`${C.name}: ${Number(C.toOrder||0).toFixed(1)}${C.unit}`}).join(`
`),U=async()=>{const C=document.getElementById("copy-textarea");if(C){C.select();try{await navigator.clipboard.writeText(C.value),s.success("")}catch{document.execCommand("copy"),s.success("")}}};return i.jsxs("div",{className:"order-list-container fade-in",children:[i.jsxs("div",{className:"container-header",children:[i.jsx("h2",{className:"section-title",children:" "}),i.jsx("div",{className:"header-actions",children:i.jsx(se,{variant:"ghost",onClick:r,children:" "})})]}),i.jsx("div",{className:"filter-card",children:i.jsxs("div",{className:"date-range-inputs",children:[i.jsxs("div",{children:[i.jsx("label",{children:""}),i.jsx("input",{type:"date",value:l,onChange:C=>c(C.target.value)})]}),i.jsx("span",{children:""}),i.jsxs("div",{children:[i.jsx("label",{children:""}),i.jsx("input",{type:"date",value:u,onChange:C=>d(C.target.value)})]}),i.jsx(se,{variant:"primary",onClick:D,disabled:m,children:m?"...":""})]})}),v&&i.jsxs("div",{className:"order-results",children:[i.jsxs("div",{className:"results-header",children:[i.jsxs("h3",{children:[" (",f.length,")"]}),i.jsxs("div",{className:"result-actions",children:[i.jsx(se,{variant:"secondary",onClick:N,children:" "}),i.jsx(se,{variant:"secondary",onClick:z,children:" "})]})]}),i.jsxs("table",{className:"order-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:f.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:""})}):f.map((C,B)=>i.jsxs("tr",{children:[i.jsx("td",{children:C.name}),i.jsxs("td",{style:{textAlign:"right"},children:[C.required.toFixed(1)," ",C.unit]}),i.jsxs("td",{style:{textAlign:"right"},children:[Math.max(0,C.remaining??0).toFixed(1)," ",C.unit]}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:Number.isFinite(C.orderPacks)&&C.orderPacks!==null?i.jsxs(i.Fragment,{children:[C.orderPacks,C.orderUnit,C.packSize&&C.packUnit&&i.jsxs("div",{style:{fontSize:"0.75em",fontWeight:"normal",color:"#666"},children:["1",C.orderUnit," = ",Number(C.packSize).toLocaleString(),C.packUnit,C.packPrice?` / ${Math.round(C.packPrice).toLocaleString()}`:""]})]}):i.jsxs(i.Fragment,{children:[C.toOrder.toFixed(1)," ",i.jsx("span",{style:{fontSize:"0.8em"},children:C.unit})]})})]},B))})]})]}),i.jsx(Cn,{isOpen:S,onClose:()=>_(!1),title:" ",size:"medium",children:i.jsxs("div",{className:"copy-modal-content",children:[i.jsx("p",{className:"copy-instructions",children:""}),i.jsx("textarea",{id:"copy-textarea",className:"copy-textarea",readOnly:!0,value:q(),onClick:C=>C.target.select()}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:U,children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>_(!1),children:""})]})]})}),i.jsx(Cn,{isOpen:j,onClose:()=>O(!1),title:" ",size:"large",children:i.jsxs("div",{className:"print-preview-content",children:[i.jsxs("div",{className:"print-preview-header",children:[i.jsx("h3",{children:""}),i.jsxs("p",{className:"print-period",children:[": ",l,"  ",u]})]}),i.jsxs("table",{className:"print-preview-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""}),i.jsx("th",{style:{textAlign:"right"},children:""})]})}),i.jsx("tbody",{children:f.map((C,B)=>i.jsxs("tr",{children:[i.jsx("td",{children:C.name}),i.jsxs("td",{style:{textAlign:"right"},children:[C.required.toFixed(1)," ",C.unit]}),i.jsxs("td",{style:{textAlign:"right"},children:[Math.max(0,C.remaining??0).toFixed(1)," ",C.unit]}),i.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:Number.isFinite(C.orderPacks)&&C.orderPacks!==null?`${C.orderPacks}${C.orderUnit}`:`${C.toOrder.toFixed(1)} ${C.unit}`})]},B))})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx(se,{variant:"primary",onClick:()=>window.print(),children:" "}),i.jsx(se,{variant:"ghost",onClick:()=>O(!1),children:""})]})]})})]})},HE=()=>{const[r,t]=w.useState(!0),[s,l]=w.useState(!1),[c,u]=w.useState(""),[d,f]=w.useState(""),[p,m]=w.useState(""),[y,v]=w.useState(""),[b,S]=w.useState(""),[_,j]=w.useState(!1),[O,D]=w.useState(!1);_e.useEffect(()=>{const I=localStorage.getItem("savedEmail"),$=localStorage.getItem("savedPassword");I&&(u(I),$&&f($),D(!0))},[]);const{login:N,register:z,sendPasswordResetEmail:q}=Ms(),U=async I=>{I.preventDefault(),v(""),S(""),j(!0);try{await N(c.trim(),d),O?(localStorage.setItem("savedEmail",c.trim()),localStorage.setItem("savedPassword",d)):(localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword"))}catch($){v($.message||"")}finally{j(!1)}},C=async I=>{I.preventDefault(),v(""),S(""),j(!0);try{if(!p.trim()){v("ID: yoshito");return}(await z(c.trim(),d,p.trim()))?.needsEmailConfirmation?S(""):S(""),t(!0),f("")}catch($){v($.message||"")}finally{j(!1)}},B=async I=>{I.preventDefault(),v(""),S(""),j(!0);try{await q(c.trim()),S(""),l(!1)}catch($){v($.message||"")}finally{j(!1)}};return i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:i.jsxs(Nt,{style:{width:"100%",maxWidth:"420px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsxs("h1",{style:{fontFamily:'"Pinyon Script", cursive',fontSize:"3rem",margin:0,color:"var(--color-primary)"},children:["Recipe",i.jsx("br",{}),"Management"]}),i.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:s?"":r?"":""})]}),y&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:y}),b&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:b}),i.jsxs("form",{onSubmit:s?B:r?U:C,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"email",value:c,onChange:I=>u(I.target.value),placeholder:"name@example.com",autoComplete:"username",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!s&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:d,onChange:I=>f(I.target.value),placeholder:"",autoComplete:"current-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!s&&!r&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:["ID ",i.jsx("span",{style:{fontSize:"0.85em",fontWeight:"normal",color:"#666"},children:"(: yoshito / staff)"})]}),i.jsx("input",{type:"text",value:p,onChange:I=>m(I.target.value),placeholder:"ID",autoComplete:"username",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0}),i.jsx("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"6px",lineHeight:1.4},children:"//"})]}),r&&!s&&i.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("input",{type:"checkbox",id:"rememberMe",checked:O,onChange:I=>D(I.target.checked),style:{marginRight:"8px",width:"auto",cursor:"pointer"}}),i.jsx("label",{htmlFor:"rememberMe",style:{color:"#333",cursor:"pointer",userSelect:"none"},children:""})]}),i.jsx(se,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.05rem"},disabled:_,children:s?"":r?"":""})]}),i.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s?i.jsx("button",{type:"button",onClick:()=>{l(!1),v(""),S("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""}):i.jsx("button",{type:"button",onClick:()=>{l(!0),v(""),S("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""}),!s&&i.jsx("button",{type:"button",onClick:()=>{t(!r),v(""),S("")},style:{background:"none",border:"none",color:"var(--color-primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:r?"":""})]})]})})},PE=()=>{const{updatePassword:r,finishPasswordRecovery:t,logout:s}=Ms(),[l,c]=_e.useState(""),[u,d]=_e.useState(""),[f,p]=_e.useState(""),[m,y]=_e.useState(""),[v,b]=_e.useState(!1),S=async _=>{if(_.preventDefault(),p(""),y(""),!l||l.length<8){p("8");return}if(l!==u){p("");return}b(!0);try{await r(l),y(""),t()}catch(j){console.error(j),p(j.message||"")}finally{b(!1)}};return i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:i.jsxs(Nt,{style:{width:"100%",maxWidth:"420px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[i.jsx("h2",{style:{textAlign:"center",color:"var(--color-primary)",marginBottom:"1rem"},children:""}),i.jsx("p",{style:{color:"#666",fontSize:"0.9rem",lineHeight:1.5,marginTop:0},children:""}),f&&i.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:f}),m&&i.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:m}),i.jsxs("form",{onSubmit:S,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:l,onChange:_=>c(_.target.value),placeholder:"8",autoComplete:"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),i.jsx("input",{type:"password",value:u,onChange:_=>d(_.target.value),placeholder:"",autoComplete:"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),i.jsx(se,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.05rem"},disabled:v,children:""})]}),i.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",gap:"10px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>{t()},style:{flex:1},children:""}),i.jsx(se,{variant:"ghost",onClick:s,style:{flex:1},children:""})]})]})})};function GE(){const{user:r,logout:t,loading:s,isPasswordRecovery:l}=Ms(),c=ml(),[u,d]=_S(),[f,p]=w.useState([]),[m,y]=w.useState(!0),[v,b]=w.useState(0),[S,_]=w.useState([]),[j,O]=w.useState(!1),[D,N]=w.useState({}),[z,q]=w.useState({}),U=u.get("view")||"list",C=u.get("id"),B=f.find(R=>String(R.id)===C)||null,[I,$]=w.useState(""),[Y,T]=w.useState(null),[A,P]=w.useState(null),[L,K]=w.useState(""),[k,G]=w.useState(!1),[X,ce]=w.useState(!1),[de,M]=w.useState(new Set),[V,Z]=w.useState("normal"),[le,fe]=w.useState(!1),[ye,Ce]=w.useState(null),[Ie,Ue]=w.useState(()=>typeof window>"u"?!1:window.matchMedia?.("(max-width: 700px)")?.matches??!1),he={inventory:"",planner:"",data:"",users:"","order-list":""};w.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const R=window.matchMedia("(max-width: 700px)"),ee=()=>Ue(!!R.matches);return ee(),R.addEventListener?R.addEventListener("change",ee):R.addListener(ee),()=>{R.removeEventListener?R.removeEventListener("change",ee):R.removeListener(ee)}},[]),w.useEffect(()=>{if(!Ie||!he[U]||typeof window>"u")return;const R=`pc-recommend-shown:${U}`;try{if(window.sessionStorage.getItem(R)==="1")return;window.sessionStorage.setItem(R,"1")}catch{}Ce(U)},[U,Ie]),w.useEffect(()=>{if(!s){O(!1);return}const R=setTimeout(()=>O(!0),3500);return()=>clearTimeout(R)},[s]),w.useEffect(()=>{s||r&&(async()=>{try{const R=U==="trash"?dt():ft();await Promise.all([R,Ke(),ut()])}catch(R){console.error("Error during initial data load:",R)}})()},[s,r?.id]),w.useEffect(()=>{if(s)return;if(!r||r.role!=="admin"){N({}),q({});return}let R=!1;return(async()=>{try{const ee=await Bi.fetchAllProfiles();if(R)return;const re={},ue={};for(const pe of ee||[])pe?.id&&(re[String(pe.id)]=pe),pe?.display_id&&(ue[String(pe.display_id)]=pe);N(re),q(ue)}catch(ee){console.warn("Failed to load profiles for admin owner labels",ee)}})(),()=>{R=!0}},[s,r?.id,r?.role]);const Xe=R=>{const re=(R?.tags||[]).find(Se=>Se&&Se.startsWith("owner:"));if(!re)return"/";const ue=String(re.slice(6)),pe=D[ue]||z[ue]||null;return pe?pe.display_id||pe.email||ue:ue.length>12?`${ue.slice(0,8)}`:ue},Pe=Us(un(cl,{activationConstraint:{distance:10}}),un(ul,{activationConstraint:{delay:1e3,tolerance:5}}),un(zs,{coordinateGetter:pl})),bt=R=>{const{active:ee,over:re}=R;ee.id!==re.id&&p(ue=>{const pe=ue.findIndex(Oe=>Oe.id===ee.id),Se=ue.findIndex(Oe=>Oe.id===re.id);if(pe===-1||Se===-1)return ue;const ge=qa(ue,pe,Se),Te=ge.map((Oe,we)=>({id:Oe.id,order_index:we}));return Pt.updateOrder(Te).catch(Oe=>console.error("Order update failed",Oe)),ge})},ut=async()=>{try{const R=await Pt.fetchRecentRecipes();_(R||[])}catch(R){console.error("Failed to load history:",R)}},nt=async R=>{const ee=[R,...S.filter(re=>re!==R)].slice(0,20);_(ee);try{await Pt.addToHistory(R)}catch(re){console.error("Failed to sync history",re)}},Ke=async()=>{try{const R=await Pt.getDeletedCount();b(R||0)}catch(R){console.error("Failed to load trash count:",R)}},ft=async()=>{try{y(!0);const R=await Pt.fetchRecipes(r,{timeoutMs:15e3});p(R||[])}catch(R){console.error("Failed to fetch recipes:",R),c.error(`

(${R?.message||"unknown error"})`)}finally{y(!1)}},_t=[...new Set(f.map(R=>R.course).filter(Boolean))],Mt=[...new Set(f.map(R=>R.category).filter(Boolean))],Ot=f.reduce((R,ee)=>(ee.storeName&&(R[ee.storeName]=(R[ee.storeName]||0)+1),R),{}),kt=f.reduce((R,ee)=>(ee.course&&(R[ee.course]=(R[ee.course]||0)+1),R),{}),at=f.reduce((R,ee)=>(ee.category&&(R[ee.category]=(R[ee.category]||0)+1),R),{}),Vt=f.filter(R=>{const ee=I===""||I==="recent"&&S.includes(R.id)||R.tags&&R.tags.includes(I)||R.category&&R.category===I||R.storeName&&R.storeName===I,re=L.toLowerCase().trim(),ue=!re||R.title.toLowerCase().includes(re)||R.description&&R.description.toLowerCase().includes(re)||R.ingredients&&R.ingredients.some(pe=>pe.name.toLowerCase().includes(re));return ee&&ue}),it=I===""&&!L.trim()&&U==="list",gn=(R,ee={})=>{d({view:"detail",id:R.id,...ee})},mn=async(R,ee=!1)=>{try{if(R.tags&&r.role!=="admin"&&r.displayId!=="yoshito"&&R.tags.some(ue=>ue==="owner:yoshito")){c.warning("");return}ee?(await Pt.restoreRecipe(R.id),(U==="trash"||U==="detail")&&(d({view:"trash"}),dt()),c.success("")):(await Pt.deleteRecipe(R.id),p(f.filter(re=>re.id!==R.id)),d({view:"list"}),Ke())}catch(re){console.error("Failed to delete/restore recipe:",re),c.error("")}finally{Ke()}},dn=async R=>{try{await Pt.hardDeleteRecipe(R.id),p(f.filter(ee=>ee.id!==R.id)),d({view:"trash"}),c.success(""),dt(),Ke()}catch(ee){console.error("Failed to hard delete recipe:",ee),c.error("")}},dt=async()=>{try{y(!0);const R=await Pt.fetchDeletedRecipes();p(R||[]),$("")}catch(R){console.error("Failed to fetch deleted recipes:",R)}finally{y(!1)}},Dt=()=>{d({view:"trash"}),dt()},Zt=()=>{d({view:"list"}),ft()},en=async(R,ee)=>{try{let re,ue=ee;if(ee&&r.role!=="admin"){const pe=R.tags?.find(ge=>ge.startsWith("owner:"));pe===`owner:${r.id}`||r.displayId&&pe===`owner:${r.displayId}`||(console.log(`Editing Recipe (Owner Tag: ${pe||"None"}) as ${r.id}. Not the owner. Switching to Create mode (Copy).`),ue=!1)}ue?(re=await Pt.updateRecipe(R,r),p(f.map(pe=>pe.id===re.id?re:pe))):(re=await Pt.createRecipe(R,r),p([re,...f])),d(ue?{view:"detail",id:re.id}:{view:"detail",id:re.id})}catch(re){console.error("Failed to save recipe:",re),c.error(`
: ${re.message||re.error_description||JSON.stringify(re)}`)}},lr=(R,ee="")=>{const ue=["","baker","","","","dough","fermentation"].some(Ae=>(R.title||"").toLowerCase().includes(Ae)),pe=["flour","","","","","","","","",""],Se=["yeast","","",""],ge=R.ingredients||[],Te=ge.some(Ae=>Se.some(Re=>(Ae.name||"").toLowerCase().includes(Re))),Oe=ge.some(Ae=>pe.some(Re=>(Ae.name||"").toLowerCase().includes(Re))&&!Ae.name.includes(""));if(ge.some(Ae=>Ae.quantity&&String(Ae.quantity).includes("%")||Ae.unit&&String(Ae.unit).includes("%"))||Te||ue&&Oe){R.type="bread",R.flours=[],R.breadIngredients=[];const Ae=["flour","","","","","","","",""];if(ge.forEach(Re=>{Ae.some(qe=>(Re.name||"").includes(qe))?R.flours.push(Re):R.breadIngredients.push(Re)}),R.flours.length===0&&ge.length>0){const Re=ge[0];(Re.name||"").includes("")&&(R.flours.push(Re),R.breadIngredients=R.breadIngredients.filter(ke=>ke!==Re))}}R.sourceUrl=ee,ee&&(R.category="URL"),P(R),d({view:"create"})},yn=()=>{ce(!X),M(new Set)},wt=R=>{const ee=new Set(de);ee.has(R)?ee.delete(R):ee.add(R),M(ee)},gt=()=>{fe(!0)},mt=()=>{fe(!1)},Rn=async()=>{fe(!1);try{y(!0),U==="trash"?(await Promise.all(Array.from(de).map(R=>Pt.hardDeleteRecipe(R))),dt()):(await Promise.all(Array.from(de).map(R=>Pt.deleteRecipe(R))),p(f.filter(R=>!de.has(R.id))),Ke()),M(new Set),ce(!1),c.success("")}catch(R){console.error("Bulk delete failed",R),c.warning(""),U==="trash"?dt():ft()}finally{y(!1)}},xe=async()=>{if(window.confirm(`${de.size}`))try{y(!0);for(const R of de)await Pt.restoreRecipe(R);p(f.filter(R=>!de.has(R.id))),Ke(),ce(!1),M(new Set),c.success(""),dt()}catch(R){console.error("Bulk restore failed",R),c.warning(""),dt()}finally{y(!1)}},me=()=>{const R=Vt.map(ee=>ee.id);M(new Set(R))},be=R=>{p([R,...f]),d({view:"edit",id:R.id})};return w.useEffect(()=>{s||r&&(U==="trash"?dt():U==="list"&&ft())},[U,s,r?.id]),s&&!j?i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):r?l?i.jsx(PE,{}):i.jsxs(NS,{children:[le&&i.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(Nt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[i.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:""})," ",de.size,"",U==="trash"?"":""]}),i.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:U==="trash"?"":""}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[i.jsx(se,{variant:"ghost",onClick:mt,children:""}),i.jsx(se,{variant:"danger",onClick:Rn,children:U==="trash"?"":""})]})]})}),i.jsx(Cn,{isOpen:!!ye,onClose:()=>Ce(null),title:"PC",size:"small",children:i.jsxs("div",{style:{color:"#333",lineHeight:1.6},children:[i.jsx("p",{style:{marginTop:0},children:he[ye]?i.jsxs(i.Fragment,{children:["",i.jsx("strong",{children:he[ye]}),"/"]}):i.jsx(i.Fragment,{children:"/"})}),i.jsxs("p",{style:{marginBottom:0},children:["",i.jsx("strong",{children:"PC"}),""]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"18px"},children:[i.jsx(se,{variant:"ghost",onClick:()=>{Ce(null),d({view:"list"})},children:""}),i.jsx(se,{variant:"primary",onClick:()=>Ce(null),children:"OK"})]})]})}),(U==="list"||U==="trash")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"container-header",children:[i.jsxs("h2",{className:"section-title",children:[U==="trash"?" ()":"",U==="list"&&i.jsxs("span",{style:{fontSize:"0.8em",marginLeft:"8px",color:"#666",fontWeight:"normal"},children:["(",f.length,")"]})]}),i.jsx("div",{className:"header-actions",children:U==="list"||U==="trash"?i.jsxs(i.Fragment,{children:[X?i.jsxs(i.Fragment,{children:[i.jsx(se,{variant:"ghost",onClick:yn,children:""}),i.jsx(se,{variant:"secondary",onClick:me,children:""}),U==="trash"&&i.jsxs(se,{variant:"secondary",onClick:xe,disabled:de.size===0,style:{marginRight:"8px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:[" (",de.size,")"]}),i.jsxs(se,{variant:"danger",onClick:gt,disabled:de.size===0,children:[U==="trash"?"":""," (",de.size,")"]})]}):i.jsx(i.Fragment,{children:U==="list"?i.jsx(se,{onClick:()=>d({view:"create"}),className:"primary-action-btn",children:"+ "}):i.jsx(se,{variant:"ghost",onClick:Zt,children:" "})}),i.jsx("button",{className:"mobile-menu-toggle",onClick:()=>G(!k),"aria-label":"",children:""}),i.jsxs("div",{className:`secondary-actions ${k?"open":""}`,children:[i.jsx("button",{type:"button",className:"slide-menu-close",onClick:()=>G(!1),"aria-label":"",children:""}),i.jsxs("div",{className:"slide-menu-user",style:{marginBottom:"1rem",padding:"10px 12px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.25)",background:"rgba(0,0,0,0.15)",color:"white",fontSize:"0.9rem",lineHeight:1.4},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px"},children:[i.jsxs("div",{style:{fontWeight:"bold"},children:[": ",r?.displayId||r?.email||(r?.id?`${String(r.id).slice(0,8)}`:"---")]}),r?.role==="admin"&&i.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"999px",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.25)",whiteSpace:"nowrap"},children:""})]}),r?.email&&r?.displayId&&i.jsx("div",{style:{opacity:.85,fontSize:"0.8rem",marginTop:"4px",wordBreak:"break-all"},children:r.email})]}),U==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs(se,{variant:"secondary",onClick:()=>{T("url"),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," Web"]}),i.jsxs(se,{variant:"secondary",onClick:()=>{T("image"),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsx("div",{className:"pc-recommend-note",children:i.jsx("div",{className:"pc-recommend-note__title",children:"PC"})}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"inventory"}),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"planner"}),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"data"}),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),r?.role==="admin"&&i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"users"}),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"secondary",onClick:()=>{d({view:"order-list"}),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"})]}),!X&&i.jsxs(se,{variant:"ghost",onClick:()=>{yn(),G(!1)},className:"danger-text",children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," ",U==="trash"?"":""]}),U==="list"&&i.jsxs(se,{variant:"ghost",onClick:()=>{Dt(),G(!1)},style:{position:"relative"},children:[i.jsx("span",{style:{marginRight:"8px"},children:""}),"  ",v>0&&i.jsx("span",{className:"trash-badge",children:v})]}),i.jsxs(se,{variant:"ghost",onClick:()=>{Zt(),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),i.jsx("div",{className:"menu-divider"}),i.jsxs(se,{variant:"ghost",onClick:()=>{t(),G(!1)},children:[i.jsx("span",{style:{marginRight:"8px"},children:""})," "]})]}),i.jsx("div",{className:`menu-backdrop ${k?"open":""}`,onClick:()=>G(!1),"aria-hidden":"true"})]}):null})]}),U==="list"&&i.jsxs("div",{className:"search-container",children:[i.jsx("span",{className:"search-icon",children:""}),i.jsx("input",{type:"text",className:"search-input",placeholder:"...",value:L,onChange:R=>K(R.target.value)})]}),i.jsxs("div",{className:"tag-filter-container",children:[i.jsxs("select",{className:"store-filter-select",value:jh.includes(I)?I:"",onChange:R=>$(R.target.value||""),children:[i.jsx("option",{value:"",children:""}),jh.map(R=>i.jsxs("option",{value:R,children:[R," (",Ot[R]||0,")"]},R))]}),i.jsxs("select",{className:"store-filter-select",value:_t.includes(I)?I:"",onChange:R=>$(R.target.value||""),children:[i.jsx("option",{value:"",children:""}),_t.sort().map(R=>i.jsxs("option",{value:R,children:[R," (",kt[R]||0,")"]},R))]}),i.jsxs("select",{className:"store-filter-select",value:Mt.includes(I)?I:"",onChange:R=>$(R.target.value||""),children:[i.jsx("option",{value:"",children:""}),Mt.sort().map(R=>i.jsxs("option",{value:R,children:[R," (",at[R]||0,")"]},R))]}),i.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"16px",display:"flex",gap:"8px",borderLeft:"1px solid #ccc",paddingLeft:"16px"},children:[i.jsx("button",{className:`tag-filter-btn ${V==="normal"?"active":""}`,onClick:()=>Z("normal"),style:{minWidth:"auto",padding:"4px 12px"},children:""}),i.jsx("button",{className:`tag-filter-btn ${V==="all"?"active":""}`,onClick:()=>Z("all"),style:{minWidth:"auto",padding:"4px 12px"},children:""})]})]}),m?i.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"..."}):f.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#888"},children:[U==="trash"?"":"",I!==""&&i.jsx("p",{children:""})]}):i.jsxs("div",{className:"main-content-wrapper",children:[U==="list"&&i.jsx("div",{className:"recent-list-wrapper",children:i.jsx(OE,{recipes:f,recentIds:S,onSelect:gn})}),i.jsx("div",{className:"recipe-list-container",children:U==="list"?i.jsx(Ds,{sensors:Pe,collisionDetection:oh,onDragEnd:bt,children:i.jsx(yy,{recipes:Vt,onSelectRecipe:gn,isSelectMode:X,selectedIds:de,onToggleSelection:wt,disableDrag:!it,displayMode:V,showOwner:r?.role==="admin",ownerLabelFn:Xe})}):i.jsx(yy,{recipes:Vt,onSelectRecipe:gn,isSelectMode:X,selectedIds:de,onToggleSelection:wt,disableDrag:!0,displayMode:V,showOwner:r?.role==="admin",ownerLabelFn:Xe})})]})]}),U==="detail"&&B&&i.jsx(dE,{recipe:B,ownerLabel:r?.role==="admin"?Xe(B):void 0,isDeleted:!!B.deletedAt,onBack:()=>{u.get("from")==="planner"?d({view:"planner"}):B.deletedAt?Dt():Zt()},backLabel:u.get("from")==="planner"?" ":void 0,onList:u.get("from")==="planner"?Zt:void 0,onEdit:()=>d({view:"edit",id:B.id,from:u.get("from")}),onDelete:mn,onView:nt,onHardDelete:dn,onDuplicate:be}),U==="edit"&&B&&i.jsx(sv,{initialData:B,onCancel:()=>d({view:"detail",id:B.id}),onSave:R=>en(R,!0)},`edit-${B.id}`),U==="create"&&i.jsx(sv,{initialData:A,onCancel:()=>{d({view:"list"}),P(null)},onSave:R=>en(R,!1)},A?"create-form-imported":"create-form"),Y&&i.jsx(A0,{initialMode:Y,onClose:()=>T(null),onImport:lr}),(U==="data"||U==="data-management")&&i.jsx(NE,{onBack:()=>d({view:"list"})}),U==="levain-guide"&&i.jsx(kE,{onBack:()=>d({view:"list"})}),U==="users"&&r?.role==="admin"&&i.jsx(DE,{onBack:()=>d({view:"list"})}),U==="inventory"&&i.jsx(ME,{onBack:()=>d({view:"list"})}),U==="planner"&&i.jsx(qE,{onBack:()=>d({view:"list"}),onSelectRecipe:R=>gn(R,{from:"planner"})}),U==="order-list"&&i.jsx($E,{onBack:()=>d({view:"list"})})]}):i.jsx(HE,{})}function VE(){return i.jsx(EE,{children:i.jsx(JC,{children:i.jsx(GE,{})})})}class YE extends _e.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){console.error("Uncaught error:",t,s),this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?i.jsxs("div",{style:{padding:"2rem",color:"red"},children:[i.jsx("h1",{children:""}),i.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),i.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),i.jsx("br",{}),i.jsx("button",{onClick:()=>window.location.reload(),children:""})]}):this.props.children}}Wb.createRoot(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(YE,{children:i.jsx(xS,{children:i.jsx(VE,{})})})}));
