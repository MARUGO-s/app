(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function Yv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var od={exports:{}},Ss={};var jm;function jx(){if(jm)return Ss;jm=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Ss.Fragment=n,Ss.jsx=a,Ss.jsxs=a,Ss}var Em;function Ex(){return Em||(Em=1,od.exports=jx()),od.exports}var c=Ex(),cd={exports:{}},Ce={};var Cm;function Cx(){if(Cm)return Ce;Cm=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function T(O,B,ie){this.props=O,this.context=B,this.refs=R,this.updater=ie||S}T.prototype.isReactComponent={},T.prototype.setState=function(O,B){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,B,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function C(){}C.prototype=T.prototype;function D(O,B,ie){this.props=O,this.context=B,this.refs=R,this.updater=ie||S}var J=D.prototype=new C;J.constructor=D,E(J,T.prototype),J.isPureReactComponent=!0;var G=Array.isArray;function $(){}var U={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function q(O,B,ie){var ce=ie.ref;return{$$typeof:r,type:O,key:B,ref:ce!==void 0?ce:null,props:ie}}function Q(O,B){return q(O.type,B,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function A(O){var B={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ie){return B[ie]})}var H=/\/+/g;function F(O,B){return typeof O=="object"&&O!==null&&O.key!=null?A(""+O.key):B.toString(36)}function ee(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then($,$):(O.status="pending",O.then(function(B){O.status==="pending"&&(O.status="fulfilled",O.value=B)},function(B){O.status==="pending"&&(O.status="rejected",O.reason=B)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function N(O,B,ie,ce,ve){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var Oe=!1;if(O===null)Oe=!0;else switch(ue){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(O.$$typeof){case r:case n:Oe=!0;break;case v:return Oe=O._init,N(Oe(O._payload),B,ie,ce,ve)}}if(Oe)return ve=ve(O),Oe=ce===""?"."+F(O,0):ce,G(ve)?(ie="",Oe!=null&&(ie=Oe.replace(H,"$&/")+"/"),N(ve,B,ie,"",function(Ne){return Ne})):ve!=null&&(I(ve)&&(ve=Q(ve,ie+(ve.key==null||O&&O.key===ve.key?"":(""+ve.key).replace(H,"$&/")+"/")+Oe)),B.push(ve)),1;Oe=0;var Ve=ce===""?".":ce+":";if(G(O))for(var De=0;De<O.length;De++)ce=O[De],ue=Ve+F(ce,De),Oe+=N(ce,B,ie,ue,ve);else if(De=w(O),typeof De=="function")for(O=De.call(O),De=0;!(ce=O.next()).done;)ce=ce.value,ue=Ve+F(ce,De++),Oe+=N(ce,B,ie,ue,ve);else if(ue==="object"){if(typeof O.then=="function")return N(ee(O),B,ie,ce,ve);throw B=String(O),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function V(O,B,ie){if(O==null)return O;var ce=[],ve=0;return N(O,ce,"","",function(ue){return B.call(ie,ue,ve++)}),ce}function W(O){if(O._status===-1){var B=O._result;B=B(),B.then(function(ie){(O._status===0||O._status===-1)&&(O._status=1,O._result=ie)},function(ie){(O._status===0||O._status===-1)&&(O._status=2,O._result=ie)}),O._status===-1&&(O._status=0,O._result=B)}if(O._status===1)return O._result.default;throw O._result}var ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},oe={map:V,forEach:function(O,B,ie){V(O,function(){B.apply(this,arguments)},ie)},count:function(O){var B=0;return V(O,function(){B++}),B},toArray:function(O){return V(O,function(B){return B})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ce.Activity=y,Ce.Children=oe,Ce.Component=T,Ce.Fragment=a,Ce.Profiler=o,Ce.PureComponent=D,Ce.StrictMode=s,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(O){return U.H.useMemoCache(O)}},Ce.cache=function(O){return function(){return O.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(O,B,ie){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ce=E({},O.props),ve=O.key;if(B!=null)for(ue in B.key!==void 0&&(ve=""+B.key),B)!L.call(B,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&B.ref===void 0||(ce[ue]=B[ue]);var ue=arguments.length-2;if(ue===1)ce.children=ie;else if(1<ue){for(var Oe=Array(ue),Ve=0;Ve<ue;Ve++)Oe[Ve]=arguments[Ve+2];ce.children=Oe}return q(O.type,ve,ce)},Ce.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ce.createElement=function(O,B,ie){var ce,ve={},ue=null;if(B!=null)for(ce in B.key!==void 0&&(ue=""+B.key),B)L.call(B,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ve[ce]=B[ce]);var Oe=arguments.length-2;if(Oe===1)ve.children=ie;else if(1<Oe){for(var Ve=Array(Oe),De=0;De<Oe;De++)Ve[De]=arguments[De+2];ve.children=Ve}if(O&&O.defaultProps)for(ce in Oe=O.defaultProps,Oe)ve[ce]===void 0&&(ve[ce]=Oe[ce]);return q(O,ue,ve)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:g,render:O}},Ce.isValidElement=I,Ce.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:W}},Ce.memo=function(O,B){return{$$typeof:m,type:O,compare:B===void 0?null:B}},Ce.startTransition=function(O){var B=U.T,ie={};U.T=ie;try{var ce=O(),ve=U.S;ve!==null&&ve(ie,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then($,ne)}catch(ue){ne(ue)}finally{B!==null&&ie.types!==null&&(B.types=ie.types),U.T=B}},Ce.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ce.use=function(O){return U.H.use(O)},Ce.useActionState=function(O,B,ie){return U.H.useActionState(O,B,ie)},Ce.useCallback=function(O,B){return U.H.useCallback(O,B)},Ce.useContext=function(O){return U.H.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O,B){return U.H.useDeferredValue(O,B)},Ce.useEffect=function(O,B){return U.H.useEffect(O,B)},Ce.useEffectEvent=function(O){return U.H.useEffectEvent(O)},Ce.useId=function(){return U.H.useId()},Ce.useImperativeHandle=function(O,B,ie){return U.H.useImperativeHandle(O,B,ie)},Ce.useInsertionEffect=function(O,B){return U.H.useInsertionEffect(O,B)},Ce.useLayoutEffect=function(O,B){return U.H.useLayoutEffect(O,B)},Ce.useMemo=function(O,B){return U.H.useMemo(O,B)},Ce.useOptimistic=function(O,B){return U.H.useOptimistic(O,B)},Ce.useReducer=function(O,B,ie){return U.H.useReducer(O,B,ie)},Ce.useRef=function(O){return U.H.useRef(O)},Ce.useState=function(O){return U.H.useState(O)},Ce.useSyncExternalStore=function(O,B,ie){return U.H.useSyncExternalStore(O,B,ie)},Ce.useTransition=function(){return U.H.useTransition()},Ce.version="19.2.3",Ce}var Rm;function Ys(){return Rm||(Rm=1,cd.exports=Cx()),cd.exports}var j=Ys();const Ee=Yv(j);var ud={exports:{}},_s={},dd={exports:{}},hd={};var Tm;function Rx(){return Tm||(Tm=1,(function(r){function n(N,V){var W=N.length;N.push(V);e:for(;0<W;){var ne=W-1>>>1,oe=N[ne];if(0<o(oe,V))N[ne]=V,N[W]=oe,W=ne;else break e}}function a(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var V=N[0],W=N.pop();if(W!==V){N[0]=W;e:for(var ne=0,oe=N.length,O=oe>>>1;ne<O;){var B=2*(ne+1)-1,ie=N[B],ce=B+1,ve=N[ce];if(0>o(ie,W))ce<oe&&0>o(ve,ie)?(N[ne]=ve,N[ce]=W,ne=ce):(N[ne]=ie,N[B]=W,ne=B);else if(ce<oe&&0>o(ve,W))N[ne]=ve,N[ce]=W,ne=ce;else break e}}return V}function o(N,V){var W=N.sortIndex-V.sortIndex;return W!==0?W:N.id-V.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var p=[],m=[],v=1,y=null,x=3,w=!1,S=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function J(N){for(var V=a(m);V!==null;){if(V.callback===null)s(m);else if(V.startTime<=N)s(m),V.sortIndex=V.expirationTime,n(p,V);else break;V=a(m)}}function G(N){if(E=!1,J(N),!S)if(a(p)!==null)S=!0,$||($=!0,A());else{var V=a(m);V!==null&&ee(G,V.startTime-N)}}var $=!1,U=-1,L=5,q=-1;function Q(){return R?!0:!(r.unstable_now()-q<L)}function I(){if(R=!1,$){var N=r.unstable_now();q=N;var V=!0;try{e:{S=!1,E&&(E=!1,C(U),U=-1),w=!0;var W=x;try{t:{for(J(N),y=a(p);y!==null&&!(y.expirationTime>N&&Q());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,x=y.priorityLevel;var oe=ne(y.expirationTime<=N);if(N=r.unstable_now(),typeof oe=="function"){y.callback=oe,J(N),V=!0;break t}y===a(p)&&s(p),J(N)}else s(p);y=a(p)}if(y!==null)V=!0;else{var O=a(m);O!==null&&ee(G,O.startTime-N),V=!1}}break e}finally{y=null,x=W,w=!1}V=void 0}}finally{V?A():$=!1}}}var A;if(typeof D=="function")A=function(){D(I)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,F=H.port2;H.port1.onmessage=I,A=function(){F.postMessage(null)}}else A=function(){T(I,0)};function ee(N,V){U=T(function(){N(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(N){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var W=x;x=V;try{return N()}finally{x=W}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=x;x=N;try{return V()}finally{x=W}},r.unstable_scheduleCallback=function(N,V,W){var ne=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ne+W:ne):W=ne,N){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,N={id:v++,callback:V,priorityLevel:N,startTime:W,expirationTime:oe,sortIndex:-1},W>ne?(N.sortIndex=W,n(m,N),a(p)===null&&N===a(m)&&(E?(C(U),U=-1):E=!0,ee(G,W-ne))):(N.sortIndex=oe,n(p,N),S||w||(S=!0,$||($=!0,A()))),N},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(N){var V=x;return function(){var W=x;x=V;try{return N.apply(this,arguments)}finally{x=W}}}})(hd)),hd}var Am;function Tx(){return Am||(Am=1,dd.exports=Rx()),dd.exports}var fd={exports:{}},Gt={};var Om;function Ax(){if(Om)return Gt;Om=1;var r=Ys();function n(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(p,m,null,v)},Gt.flushSync=function(p){var m=h.T,v=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=m,s.p=v,s.d.f()}},Gt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Gt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Gt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=g(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:w}):v==="script"&&s.d.X(p,{crossOrigin:y,integrity:x,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Gt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Gt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=g(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Gt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Gt.requestFormReset=function(p){s.d.r(p)},Gt.unstable_batchedUpdates=function(p,m){return p(m)},Gt.useFormState=function(p,m,v){return h.H.useFormState(p,m,v)},Gt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gt.version="19.2.3",Gt}var Nm;function Kv(){if(Nm)return fd.exports;Nm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),fd.exports=Ax(),fd.exports}var Dm;function Ox(){if(Dm)return _s;Dm=1;var r=Tx(),n=Ys(),a=Kv();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return p(d),e;if(f===l)return p(d),t;f=f.sibling}throw Error(s(188))}if(i.return!==l.return)i=d,l=f;else{for(var b=!1,_=d.child;_;){if(_===i){b=!0,i=d,l=f;break}if(_===l){b=!0,l=d,i=f;break}_=_.sibling}if(!b){for(_=f.child;_;){if(_===i){b=!0,i=f,l=d;break}if(_===l){b=!0,l=f,i=d;break}_=_.sibling}if(!b)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),D=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var H=Symbol.for("react.client.reference");function F(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===H?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case $:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case D:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}var ee=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ne=[],oe=-1;function O(e){return{current:e}}function B(e){0>oe||(e.current=ne[oe],ne[oe]=null,oe--)}function ie(e,t){oe++,ne[oe]=e.current,e.current=t}var ce=O(null),ve=O(null),ue=O(null),Oe=O(null);function Ve(e,t){switch(ie(ue,t),ie(ve,e),ie(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kg(t),e=Jg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(ce),ie(ce,e)}function De(){B(ce),B(ve),B(ue)}function Ne(e){e.memoizedState!==null&&ie(Oe,e);var t=ce.current,i=Jg(t,e.type);t!==i&&(ie(ve,e),ie(ce,i))}function qt(e){ve.current===e&&(B(ce),B(ve)),Oe.current===e&&(B(Oe),ys._currentValue=W)}var Ct,sn;function Je(e){if(Ct===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ct=t&&t[1]||"",sn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+e+sn}var Pt=!1;function $t(e,t){if(!e||Pt)return"";Pt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var X=Z}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(Z){X=Z}e.call(ae.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],_=f[1];if(b&&_){var k=b.split(`
`),K=_.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===K.length)for(l=k.length-1,d=K.length-1;1<=l&&0<=d&&k[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==K[d]){var te=`
`+k[l].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=l&&0<=d);break}}}finally{Pt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Je(i):""}function tr(e,t){switch(e.tag){case 26:case 27:case 5:return Je(e.type);case 16:return Je("Lazy");case 13:return e.child!==t&&t!==null?Je("Suspense Fallback"):Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return $t(e.type,!1);case 11:return $t(e.type.render,!1);case 1:return $t(e.type,!0);case 31:return Je("Activity");default:return""}}function yn(e){try{var t="",i=null;do t+=tr(e,i),i=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Vt=Object.prototype.hasOwnProperty,Nt=r.unstable_scheduleCallback,bn=r.unstable_cancelCallback,Xn=r.unstable_shouldYield,nr=r.unstable_requestPaint,at=r.unstable_now,rr=r.unstable_getCurrentPriorityLevel,de=r.unstable_ImmediatePriority,z=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,le=r.unstable_LowPriority,Se=r.unstable_IdlePriority,_e=r.log,He=r.unstable_setDisableYieldValue,ke=null,Pe=null;function pe(e){if(typeof _e=="function"&&He(e),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(ke,e)}catch{}}var Re=Math.clz32?Math.clz32:xn,Xe=Math.log,gt=Math.LN2;function xn(e){return e>>>=0,e===0?32:31-(Xe(e)/gt|0)|0}var wn=256,Qn=262144,tt=4194304;function dt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rt(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~f,l!==0?d=dt(l):(b&=_,b!==0?d=dt(b):i||(i=_&~e,i!==0&&(d=dt(i))))):(_=l&~f,_!==0?d=dt(_):b!==0?d=dt(b):i||(i=l&~e,i!==0&&(d=dt(i)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:d}function Jt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ht(){var e=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),e}function Qt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Sn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wt(e,t,i,l,d,f){var b=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var _=e.entanglements,k=e.expirationTimes,K=e.hiddenUpdates;for(i=b&~i;0<i;){var te=31-Re(i),ae=1<<te;_[te]=0,k[te]=-1;var X=K[te];if(X!==null)for(K[te]=null,te=0;te<X.length;te++){var Z=X[te];Z!==null&&(Z.lane&=-536870913)}i&=~ae}l!==0&&In(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~t))}function In(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Re(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function ln(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Re(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}function _n(e,t){var i=t&-t;return i=(i&42)!==0?1:ar(i),(i&(e.suspendedLanes|t))!==0?0:i}function ar(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ir(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qn(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:vm(e.type))}function Or(e,t){var i=V.p;try{return V.p=e,t()}finally{V.p=i}}var jn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+jn,Ft="__reactProps$"+jn,Oa="__reactContainer$"+jn,Zo="__reactEvents$"+jn,f0="__reactListeners$"+jn,p0="__reactHandles$"+jn,kh="__reactResources$"+jn,ki="__reactMarker$"+jn;function ec(e){delete e[Dt],delete e[Ft],delete e[Zo],delete e[f0],delete e[p0]}function Na(e){var t=e[Dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Oa]||i[Dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=tm(e);e!==null;){if(i=e[Dt])return i;e=tm(e)}return t}e=i,i=e.parentNode}return null}function Da(e){if(e=e[Dt]||e[Oa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ui(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function ka(e){var t=e[kh];return t||(t=e[kh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Tt(e){e[ki]=!0}var Uh=new Set,zh={};function ia(e,t){Ua(e,t),Ua(e+"Capture",t)}function Ua(e,t){for(zh[e]=t,e=0;e<t.length;e++)Uh.add(t[e])}var g0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mh={},Lh={};function m0(e){return Vt.call(Lh,e)?!0:Vt.call(Mh,e)?!1:g0.test(e)?Lh[e]=!0:(Mh[e]=!0,!1)}function sl(e,t,i){if(m0(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function ll(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function sr(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}function En(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v0(e,t,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(b){i=""+b,f.call(this,b)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tc(e){if(!e._valueTracker){var t=Bh(e)?"checked":"value";e._valueTracker=v0(e,t,""+e[t])}}function Ih(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Bh(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var y0=/[\n"\\]/g;function Cn(e){return e.replace(y0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function nc(e,t,i,l,d,f,b,_){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+En(t)):e.value!==""+En(t)&&(e.value=""+En(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?rc(e,b,En(t)):i!=null?rc(e,b,En(i)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+En(_):e.removeAttribute("name")}function qh(e,t,i,l,d,f,b,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){tc(e);return}i=i!=null?""+En(i):"",t=t!=null?""+En(t):i,_||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),tc(e)}function rc(e,t,i){t==="number"&&ol(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function za(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+En(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function $h(e,t,i){if(t!=null&&(t=""+En(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+En(i):""}function Hh(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(ee(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=En(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),tc(e)}function Ma(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var b0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gh(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||b0.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Ph(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&i[d]!==l&&Gh(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&Gh(e,f,t[f])}function ac(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),w0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cl(e){return w0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function lr(){}var ic=null;function sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,Ba=null;function Vh(e){var t=Da(e);if(t&&(e=t.stateNode)){var i=e[Ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(nc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Cn(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=l[Ft]||null;if(!d)throw Error(s(90));nc(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&Ih(l)}break e;case"textarea":$h(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&za(e,!!i.multiple,t,!1)}}}var lc=!1;function Yh(e,t,i){if(lc)return e(t,i);lc=!0;try{var l=e(t);return l}finally{if(lc=!1,(La!==null||Ba!==null)&&(Ql(),La&&(t=La,e=Ba,Ba=La=null,Vh(t),e)))for(t=0;t<e.length;t++)Vh(e[t])}}function zi(e,t){var i=e.stateNode;if(i===null)return null;var l=i[Ft]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=!1;if(or)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{oc=!1}var Nr=null,cc=null,ul=null;function Kh(){if(ul)return ul;var e,t=cc,i=t.length,l,d="value"in Nr?Nr.value:Nr.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var b=i-e;for(l=1;l<=b&&t[i-l]===d[f-l];l++);return ul=d.slice(e,1<l?1-l:void 0)}function dl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function Jh(){return!1}function Wt(e){function t(i,l,d,f,b){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?hl:Jh,this.isPropagationStopped=Jh,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),t}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=Wt(sa),Li=y({},sa,{view:0,detail:0}),S0=Wt(Li),uc,dc,Bi,pl=y({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bi&&(Bi&&e.type==="mousemove"?(uc=e.screenX-Bi.screenX,dc=e.screenY-Bi.screenY):dc=uc=0,Bi=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:dc}}),Xh=Wt(pl),_0=y({},pl,{dataTransfer:0}),j0=Wt(_0),E0=y({},Li,{relatedTarget:0}),hc=Wt(E0),C0=y({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Wt(C0),T0=y({},sa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A0=Wt(T0),O0=y({},sa,{data:0}),Qh=Wt(O0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=k0[e])?!!t[e]:!1}function fc(){return U0}var z0=y({},Li,{key:function(e){if(e.key){var t=N0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(e){return e.type==="keypress"?dl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),M0=Wt(z0),L0=y({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=Wt(L0),B0=y({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),I0=Wt(B0),q0=y({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$0=Wt(q0),H0=y({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=Wt(H0),P0=y({},sa,{newState:0,oldState:0}),V0=Wt(P0),Y0=[9,13,27,32],pc=or&&"CompositionEvent"in window,Ii=null;or&&"documentMode"in document&&(Ii=document.documentMode);var K0=or&&"TextEvent"in window&&!Ii,Wh=or&&(!pc||Ii&&8<Ii&&11>=Ii),Zh=" ",ef=!1;function tf(e,t){switch(e){case"keyup":return Y0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ia=!1;function J0(e,t){switch(e){case"compositionend":return nf(t);case"keypress":return t.which!==32?null:(ef=!0,Zh);case"textInput":return e=t.data,e===Zh&&ef?null:e;default:return null}}function X0(e,t){if(Ia)return e==="compositionend"||!pc&&tf(e,t)?(e=Kh(),ul=cc=Nr=null,Ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wh&&t.locale!=="ko"?null:t.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q0[e.type]:t==="textarea"}function af(e,t,i,l){La?Ba?Ba.push(l):Ba=[l]:La=l,t=ro(t,"onChange"),0<t.length&&(i=new fl("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var qi=null,$i=null;function F0(e){$g(e,0)}function gl(e){var t=Ui(e);if(Ih(t))return e}function sf(e,t){if(e==="change")return t}var lf=!1;if(or){var gc;if(or){var mc="oninput"in document;if(!mc){var of=document.createElement("div");of.setAttribute("oninput","return;"),mc=typeof of.oninput=="function"}gc=mc}else gc=!1;lf=gc&&(!document.documentMode||9<document.documentMode)}function cf(){qi&&(qi.detachEvent("onpropertychange",uf),$i=qi=null)}function uf(e){if(e.propertyName==="value"&&gl($i)){var t=[];af(t,$i,e,sc(e)),Yh(F0,t)}}function W0(e,t,i){e==="focusin"?(cf(),qi=t,$i=i,qi.attachEvent("onpropertychange",uf)):e==="focusout"&&cf()}function Z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl($i)}function eb(e,t){if(e==="click")return gl(t)}function tb(e,t){if(e==="input"||e==="change")return gl(t)}function nb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:nb;function Hi(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!Vt.call(t,d)||!on(e[d],t[d]))return!1}return!0}function df(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hf(e,t){var i=df(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=df(i)}}function ff(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ff(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ol(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ol(e.document)}return t}function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var rb=or&&"documentMode"in document&&11>=document.documentMode,qa=null,yc=null,Gi=null,bc=!1;function gf(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;bc||qa==null||qa!==ol(l)||(l=qa,"selectionStart"in l&&vc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Gi&&Hi(Gi,l)||(Gi=l,l=ro(yc,"onSelect"),0<l.length&&(t=new fl("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=qa)))}function la(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var $a={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},xc={},mf={};or&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function oa(e){if(xc[e])return xc[e];if(!$a[e])return e;var t=$a[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in mf)return xc[e]=t[i];return e}var vf=oa("animationend"),yf=oa("animationiteration"),bf=oa("animationstart"),ab=oa("transitionrun"),ib=oa("transitionstart"),sb=oa("transitioncancel"),xf=oa("transitionend"),wf=new Map,wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wc.push("scrollEnd");function $n(e,t){wf.set(e,t),ia(t,[e])}var ml=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rn=[],Ha=0,Sc=0;function vl(){for(var e=Ha,t=Sc=Ha=0;t<e;){var i=Rn[t];Rn[t++]=null;var l=Rn[t];Rn[t++]=null;var d=Rn[t];Rn[t++]=null;var f=Rn[t];if(Rn[t++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}f!==0&&Sf(i,d,f)}}function yl(e,t,i,l){Rn[Ha++]=e,Rn[Ha++]=t,Rn[Ha++]=i,Rn[Ha++]=l,Sc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function _c(e,t,i,l){return yl(e,t,i,l),bl(e)}function ca(e,t){return yl(e,null,null,t),bl(e)}function Sf(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-Re(i),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=i|536870912),f):null}function bl(e){if(50<ds)throw ds=0,Du=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ga={};function lb(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,i,l){return new lb(e,t,i,l)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cr(e,t){var i=e.alternate;return i===null?(i=cn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function _f(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function xl(e,t,i,l,d,f){var b=0;if(l=e,typeof e=="function")jc(e)&&(b=1);else if(typeof e=="string")b=hx(e,i,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=cn(31,i,t,d),e.elementType=q,e.lanes=f,e;case E:return ua(i.children,d,f,t);case R:b=8,d|=24;break;case T:return e=cn(12,i,t,d|2),e.elementType=T,e.lanes=f,e;case G:return e=cn(13,i,t,d),e.elementType=G,e.lanes=f,e;case $:return e=cn(19,i,t,d),e.elementType=$,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:b=10;break e;case C:b=9;break e;case J:b=11;break e;case U:b=14;break e;case L:b=16,l=null;break e}b=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=cn(b,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function ua(e,t,i,l){return e=cn(7,e,l,t),e.lanes=i,e}function Ec(e,t,i){return e=cn(6,e,null,t),e.lanes=i,e}function jf(e){var t=cn(18,null,null,0);return t.stateNode=e,t}function Cc(e,t,i){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ef=new WeakMap;function Tn(e,t){if(typeof e=="object"&&e!==null){var i=Ef.get(e);return i!==void 0?i:(t={value:e,source:t,stack:yn(t)},Ef.set(e,t),t)}return{value:e,source:t,stack:yn(t)}}var Pa=[],Va=0,wl=null,Pi=0,An=[],On=0,Dr=null,Fn=1,Wn="";function ur(e,t){Pa[Va++]=Pi,Pa[Va++]=wl,wl=e,Pi=t}function Cf(e,t,i){An[On++]=Fn,An[On++]=Wn,An[On++]=Dr,Dr=e;var l=Fn;e=Wn;var d=32-Re(l)-1;l&=~(1<<d),i+=1;var f=32-Re(t)+d;if(30<f){var b=d-d%5;f=(l&(1<<b)-1).toString(32),l>>=b,d-=b,Fn=1<<32-Re(t)+d|i<<d|l,Wn=f+e}else Fn=1<<f|i<<d|l,Wn=e}function Rc(e){e.return!==null&&(ur(e,1),Cf(e,1,0))}function Tc(e){for(;e===wl;)wl=Pa[--Va],Pa[Va]=null,Pi=Pa[--Va],Pa[Va]=null;for(;e===Dr;)Dr=An[--On],An[On]=null,Wn=An[--On],An[On]=null,Fn=An[--On],An[On]=null}function Rf(e,t){An[On++]=Fn,An[On++]=Wn,An[On++]=Dr,Fn=t.id,Wn=t.overflow,Dr=e}var kt=null,nt=null,Be=!1,kr=null,Nn=!1,Ac=Error(s(519));function Ur(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vi(Tn(t,e)),Ac}function Tf(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[Dt]=e,t[Ft]=l,i){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(i=0;i<fs.length;i++)ze(fs[i],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),qh(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),Hh(t,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||Vg(t.textContent,i)?(l.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),l.onScroll!=null&&ze("scroll",t),l.onScrollEnd!=null&&ze("scrollend",t),l.onClick!=null&&(t.onclick=lr),t=!0):t=!1,t||Ur(e,!0)}function Af(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:kt=kt.return}}function Ya(e){if(e!==kt)return!1;if(!Be)return Af(e),Be=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ku(e.type,e.memoizedProps)),i=!i),i&&nt&&Ur(e),Af(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nt=em(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nt=em(e)}else t===27?(t=nt,Jr(e.type)?(e=Wu,Wu=null,nt=e):nt=t):nt=kt?kn(e.stateNode.nextSibling):null;return!0}function da(){nt=kt=null,Be=!1}function Oc(){var e=kr;return e!==null&&(nn===null?nn=e:nn.push.apply(nn,e),kr=null),e}function Vi(e){kr===null?kr=[e]:kr.push(e)}var Nc=O(null),ha=null,dr=null;function zr(e,t,i){ie(Nc,t._currentValue),t._currentValue=i}function hr(e){e._currentValue=Nc.current,B(Nc)}function Dc(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function kc(e,t,i,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=d;for(var k=0;k<t.length;k++)if(_.context===t[k]){f.lanes|=i,_=f.alternate,_!==null&&(_.lanes|=i),Dc(f.return,i,e),l||(b=null);break e}f=_.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=i,f=b.alternate,f!==null&&(f.lanes|=i),Dc(b,i,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Ka(e,t,i,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var _=d.type;on(d.pendingProps.value,b.value)||(e!==null?e.push(_):e=[_])}}else if(d===Oe.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ys):e=[ys])}d=d.return}e!==null&&kc(t,e,i,l),t.flags|=262144}function Sl(e){for(e=e.firstContext;e!==null;){if(!on(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fa(e){ha=e,dr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return Of(ha,e)}function _l(e,t){return ha===null&&fa(e),Of(e,t)}function Of(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},dr===null){if(e===null)throw Error(s(308));dr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else dr=dr.next=t;return i}var ob=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},cb=r.unstable_scheduleCallback,ub=r.unstable_NormalPriority,mt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new ob,data:new Map,refCount:0}}function Yi(e){e.refCount--,e.refCount===0&&cb(ub,function(){e.controller.abort()})}var Ki=null,zc=0,Ja=0,Xa=null;function db(e,t){if(Ki===null){var i=Ki=[];zc=0,Ja=Bu(),Xa={status:"pending",value:void 0,then:function(l){i.push(l)}}}return zc++,t.then(Nf,Nf),t}function Nf(){if(--zc===0&&Ki!==null){Xa!==null&&(Xa.status="fulfilled");var e=Ki;Ki=null,Ja=0,Xa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hb(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<i.length;d++)(0,i[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),l}var Df=N.S;N.S=function(e,t){gg=at(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&db(e,t),Df!==null&&Df(e,t)};var pa=O(null);function Mc(){var e=pa.current;return e!==null?e:Ze.pooledCache}function jl(e,t){t===null?ie(pa,pa.current):ie(pa,t.pool)}function kf(){var e=Mc();return e===null?null:{parent:mt._currentValue,pool:e}}var Qa=Error(s(460)),Lc=Error(s(474)),El=Error(s(542)),Cl={then:function(){}};function Uf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zf(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(lr,lr),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Lf(e),e;default:if(typeof t.status=="string")t.then(lr,lr);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Lf(e),e}throw ma=t,Qa}}function ga(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ma=i,Qa):i}}var ma=null;function Mf(){if(ma===null)throw Error(s(459));var e=ma;return ma=null,e}function Lf(e){if(e===Qa||e===El)throw Error(s(483))}var Fa=null,Ji=0;function Rl(e){var t=Ji;return Ji+=1,Fa===null&&(Fa=[]),zf(Fa,e,t)}function Xi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bf(e){function t(P,M){if(e){var Y=P.deletions;Y===null?(P.deletions=[M],P.flags|=16):Y.push(M)}}function i(P,M){if(!e)return null;for(;M!==null;)t(P,M),M=M.sibling;return null}function l(P){for(var M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function d(P,M){return P=cr(P,M),P.index=0,P.sibling=null,P}function f(P,M,Y){return P.index=Y,e?(Y=P.alternate,Y!==null?(Y=Y.index,Y<M?(P.flags|=67108866,M):Y):(P.flags|=67108866,M)):(P.flags|=1048576,M)}function b(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function _(P,M,Y,re){return M===null||M.tag!==6?(M=Ec(Y,P.mode,re),M.return=P,M):(M=d(M,Y),M.return=P,M)}function k(P,M,Y,re){var ye=Y.type;return ye===E?te(P,M,Y.props.children,re,Y.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===L&&ga(ye)===M.type)?(M=d(M,Y.props),Xi(M,Y),M.return=P,M):(M=xl(Y.type,Y.key,Y.props,null,P.mode,re),Xi(M,Y),M.return=P,M)}function K(P,M,Y,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==Y.containerInfo||M.stateNode.implementation!==Y.implementation?(M=Cc(Y,P.mode,re),M.return=P,M):(M=d(M,Y.children||[]),M.return=P,M)}function te(P,M,Y,re,ye){return M===null||M.tag!==7?(M=ua(Y,P.mode,re,ye),M.return=P,M):(M=d(M,Y),M.return=P,M)}function ae(P,M,Y){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Ec(""+M,P.mode,Y),M.return=P,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return Y=xl(M.type,M.key,M.props,null,P.mode,Y),Xi(Y,M),Y.return=P,Y;case S:return M=Cc(M,P.mode,Y),M.return=P,M;case L:return M=ga(M),ae(P,M,Y)}if(ee(M)||A(M))return M=ua(M,P.mode,Y,null),M.return=P,M;if(typeof M.then=="function")return ae(P,Rl(M),Y);if(M.$$typeof===D)return ae(P,_l(P,M),Y);Tl(P,M)}return null}function X(P,M,Y,re){var ye=M!==null?M.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ye!==null?null:_(P,M,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===ye?k(P,M,Y,re):null;case S:return Y.key===ye?K(P,M,Y,re):null;case L:return Y=ga(Y),X(P,M,Y,re)}if(ee(Y)||A(Y))return ye!==null?null:te(P,M,Y,re,null);if(typeof Y.then=="function")return X(P,M,Rl(Y),re);if(Y.$$typeof===D)return X(P,M,_l(P,Y),re);Tl(P,Y)}return null}function Z(P,M,Y,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return P=P.get(Y)||null,_(M,P,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return P=P.get(re.key===null?Y:re.key)||null,k(M,P,re,ye);case S:return P=P.get(re.key===null?Y:re.key)||null,K(M,P,re,ye);case L:return re=ga(re),Z(P,M,Y,re,ye)}if(ee(re)||A(re))return P=P.get(Y)||null,te(M,P,re,ye,null);if(typeof re.then=="function")return Z(P,M,Y,Rl(re),ye);if(re.$$typeof===D)return Z(P,M,Y,_l(M,re),ye);Tl(M,re)}return null}function he(P,M,Y,re){for(var ye=null,qe=null,ge=M,Ae=M=0,Le=null;ge!==null&&Ae<Y.length;Ae++){ge.index>Ae?(Le=ge,ge=null):Le=ge.sibling;var $e=X(P,ge,Y[Ae],re);if($e===null){ge===null&&(ge=Le);break}e&&ge&&$e.alternate===null&&t(P,ge),M=f($e,M,Ae),qe===null?ye=$e:qe.sibling=$e,qe=$e,ge=Le}if(Ae===Y.length)return i(P,ge),Be&&ur(P,Ae),ye;if(ge===null){for(;Ae<Y.length;Ae++)ge=ae(P,Y[Ae],re),ge!==null&&(M=f(ge,M,Ae),qe===null?ye=ge:qe.sibling=ge,qe=ge);return Be&&ur(P,Ae),ye}for(ge=l(ge);Ae<Y.length;Ae++)Le=Z(ge,P,Ae,Y[Ae],re),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?Ae:Le.key),M=f(Le,M,Ae),qe===null?ye=Le:qe.sibling=Le,qe=Le);return e&&ge.forEach(function(Zr){return t(P,Zr)}),Be&&ur(P,Ae),ye}function be(P,M,Y,re){if(Y==null)throw Error(s(151));for(var ye=null,qe=null,ge=M,Ae=M=0,Le=null,$e=Y.next();ge!==null&&!$e.done;Ae++,$e=Y.next()){ge.index>Ae?(Le=ge,ge=null):Le=ge.sibling;var Zr=X(P,ge,$e.value,re);if(Zr===null){ge===null&&(ge=Le);break}e&&ge&&Zr.alternate===null&&t(P,ge),M=f(Zr,M,Ae),qe===null?ye=Zr:qe.sibling=Zr,qe=Zr,ge=Le}if($e.done)return i(P,ge),Be&&ur(P,Ae),ye;if(ge===null){for(;!$e.done;Ae++,$e=Y.next())$e=ae(P,$e.value,re),$e!==null&&(M=f($e,M,Ae),qe===null?ye=$e:qe.sibling=$e,qe=$e);return Be&&ur(P,Ae),ye}for(ge=l(ge);!$e.done;Ae++,$e=Y.next())$e=Z(ge,P,Ae,$e.value,re),$e!==null&&(e&&$e.alternate!==null&&ge.delete($e.key===null?Ae:$e.key),M=f($e,M,Ae),qe===null?ye=$e:qe.sibling=$e,qe=$e);return e&&ge.forEach(function(_x){return t(P,_x)}),Be&&ur(P,Ae),ye}function We(P,M,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===E&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var ye=Y.key;M!==null;){if(M.key===ye){if(ye=Y.type,ye===E){if(M.tag===7){i(P,M.sibling),re=d(M,Y.props.children),re.return=P,P=re;break e}}else if(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===L&&ga(ye)===M.type){i(P,M.sibling),re=d(M,Y.props),Xi(re,Y),re.return=P,P=re;break e}i(P,M);break}else t(P,M);M=M.sibling}Y.type===E?(re=ua(Y.props.children,P.mode,re,Y.key),re.return=P,P=re):(re=xl(Y.type,Y.key,Y.props,null,P.mode,re),Xi(re,Y),re.return=P,P=re)}return b(P);case S:e:{for(ye=Y.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===Y.containerInfo&&M.stateNode.implementation===Y.implementation){i(P,M.sibling),re=d(M,Y.children||[]),re.return=P,P=re;break e}else{i(P,M);break}else t(P,M);M=M.sibling}re=Cc(Y,P.mode,re),re.return=P,P=re}return b(P);case L:return Y=ga(Y),We(P,M,Y,re)}if(ee(Y))return he(P,M,Y,re);if(A(Y)){if(ye=A(Y),typeof ye!="function")throw Error(s(150));return Y=ye.call(Y),be(P,M,Y,re)}if(typeof Y.then=="function")return We(P,M,Rl(Y),re);if(Y.$$typeof===D)return We(P,M,_l(P,Y),re);Tl(P,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,M!==null&&M.tag===6?(i(P,M.sibling),re=d(M,Y),re.return=P,P=re):(i(P,M),re=Ec(Y,P.mode,re),re.return=P,P=re),b(P)):i(P,M)}return function(P,M,Y,re){try{Ji=0;var ye=We(P,M,Y,re);return Fa=null,ye}catch(ge){if(ge===Qa||ge===El)throw ge;var qe=cn(29,ge,null,P.mode);return qe.lanes=re,qe.return=P,qe}}}var va=Bf(!0),If=Bf(!1),Mr=!1;function Bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Lr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Br(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=bl(e),Sf(e,null,i),t}return yl(e,l,t,i),bl(e)}function Qi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ln(e,i)}}function qc(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var $c=!1;function Fi(){if($c){var e=Xa;if(e!==null)throw e}}function Wi(e,t,i,l){$c=!1;var d=e.updateQueue;Mr=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var k=_,K=k.next;k.next=null,b===null?f=K:b.next=K,b=k;var te=e.alternate;te!==null&&(te=te.updateQueue,_=te.lastBaseUpdate,_!==b&&(_===null?te.firstBaseUpdate=K:_.next=K,te.lastBaseUpdate=k))}if(f!==null){var ae=d.baseState;b=0,te=K=k=null,_=f;do{var X=_.lane&-536870913,Z=X!==_.lane;if(Z?(Me&X)===X:(l&X)===X){X!==0&&X===Ja&&($c=!0),te!==null&&(te=te.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var he=e,be=_;X=t;var We=i;switch(be.tag){case 1:if(he=be.payload,typeof he=="function"){ae=he.call(We,ae,X);break e}ae=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=be.payload,X=typeof he=="function"?he.call(We,ae,X):he,X==null)break e;ae=y({},ae,X);break e;case 2:Mr=!0}}X=_.callback,X!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:_.tag,payload:_.payload,callback:_.callback,next:null},te===null?(K=te=Z,k=ae):te=te.next=Z,b|=X;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;Z=_,_=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);te===null&&(k=ae),d.baseState=k,d.firstBaseUpdate=K,d.lastBaseUpdate=te,f===null&&(d.shared.lanes=0),Gr|=b,e.lanes=b,e.memoizedState=ae}}function qf(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function $f(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)qf(i[e],t)}var Wa=O(null),Al=O(0);function Hf(e,t){e=wr,ie(Al,e),ie(Wa,t),wr=e|t.baseLanes}function Hc(){ie(Al,wr),ie(Wa,Wa.current)}function Gc(){wr=Al.current,B(Wa),B(Al)}var un=O(null),Dn=null;function Ir(e){var t=e.alternate;ie(ht,ht.current&1),ie(un,e),Dn===null&&(t===null||Wa.current!==null||t.memoizedState!==null)&&(Dn=e)}function Pc(e){ie(ht,ht.current),ie(un,e),Dn===null&&(Dn=e)}function Gf(e){e.tag===22?(ie(ht,ht.current),ie(un,e),Dn===null&&(Dn=e)):qr()}function qr(){ie(ht,ht.current),ie(un,un.current)}function dn(e){B(un),Dn===e&&(Dn=null),B(ht)}var ht=O(0);function Ol(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Qu(i)||Fu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fr=0,Te=null,Qe=null,vt=null,Nl=!1,Za=!1,ya=!1,Dl=0,Zi=0,ei=null,fb=0;function ot(){throw Error(s(321))}function Vc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!on(e[i],t[i]))return!1;return!0}function Yc(e,t,i,l,d,f){return fr=f,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Cp:lu,ya=!1,f=i(l,d),ya=!1,Za&&(f=Vf(t,i,l,d)),Pf(e),f}function Pf(e){N.H=ns;var t=Qe!==null&&Qe.next!==null;if(fr=0,vt=Qe=Te=null,Nl=!1,Zi=0,ei=null,t)throw Error(s(300));e===null||yt||(e=e.dependencies,e!==null&&Sl(e)&&(yt=!0))}function Vf(e,t,i,l){Te=e;var d=0;do{if(Za&&(ei=null),Zi=0,Za=!1,25<=d)throw Error(s(301));if(d+=1,vt=Qe=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}N.H=Rp,f=t(i,l)}while(Za);return f}function pb(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?es(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Te.flags|=1024),t}function Kc(){var e=Dl!==0;return Dl=0,e}function Jc(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Xc(e){if(Nl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Nl=!1}fr=0,vt=Qe=Te=null,Za=!1,Zi=Dl=0,ei=null}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Te.memoizedState=vt=e:vt=vt.next=e,vt}function ft(){if(Qe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=vt===null?Te.memoizedState:vt.next;if(t!==null)vt=t,Qe=e;else{if(e===null)throw Te.alternate===null?Error(s(467)):Error(s(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},vt===null?Te.memoizedState=vt=e:vt=vt.next=e}return vt}function kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function es(e){var t=Zi;return Zi+=1,ei===null&&(ei=[]),e=zf(ei,e,t),t=Te,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Cp:lu),e}function Ul(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return es(e);if(e.$$typeof===D)return Ut(e)}throw Error(s(438,String(e)))}function Qc(e){var t=null,i=Te.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=kl(),Te.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=Q;return t.index++,i}function pr(e,t){return typeof t=="function"?t(e):t}function zl(e){var t=ft();return Fc(t,Qe,e)}function Fc(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var _=b=null,k=null,K=t,te=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Me&ae)===ae:(fr&ae)===ae){var X=K.revertLane;if(X===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===Ja&&(te=!0);else if((fr&X)===X){K=K.next,X===Ja&&(te=!0);continue}else ae={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(_=k=ae,b=f):k=k.next=ae,Te.lanes|=X,Gr|=X;ae=K.action,ya&&i(f,ae),f=K.hasEagerState?K.eagerState:i(f,ae)}else X={lane:ae,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(_=k=X,b=f):k=k.next=X,Te.lanes|=ae,Gr|=ae;K=K.next}while(K!==null&&K!==t);if(k===null?b=f:k.next=_,!on(f,e.memoizedState)&&(yt=!0,te&&(i=Xa,i!==null)))throw i;e.memoizedState=f,e.baseState=b,e.baseQueue=k,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Wc(e){var t=ft(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);on(f,t.memoizedState)||(yt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Yf(e,t,i){var l=Te,d=ft(),f=Be;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var b=!on((Qe||d).memoizedState,i);if(b&&(d.memoizedState=i,yt=!0),d=d.queue,tu(Xf.bind(null,l,d,e),[e]),d.getSnapshot!==t||b||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,ti(9,{destroy:void 0},Jf.bind(null,l,d,i,t),null),Ze===null)throw Error(s(349));f||(fr&127)!==0||Kf(l,t,i)}return i}function Kf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Te.updateQueue,t===null?(t=kl(),Te.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Jf(e,t,i,l){t.value=i,t.getSnapshot=l,Qf(t)&&Ff(e)}function Xf(e,t,i){return i(function(){Qf(t)&&Ff(e)})}function Qf(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!on(e,i)}catch{return!0}}function Ff(e){var t=ca(e,2);t!==null&&rn(t,e,2)}function Zc(e){var t=Yt();if(typeof e=="function"){var i=e;if(e=i(),ya){pe(!0);try{i()}finally{pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e},t}function Wf(e,t,i,l){return e.baseState=i,Fc(e,Qe,typeof l=="function"?l:pr)}function gb(e,t,i,l,d){if(Bl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};N.T!==null?i(!0):f.isTransition=!1,l(f),i=t.pending,i===null?(f.next=t.pending=f,Zf(t,f)):(f.next=i.next,t.pending=i.next=f)}}function Zf(e,t){var i=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=N.T,b={};N.T=b;try{var _=i(d,l),k=N.S;k!==null&&k(b,_),ep(e,t,_)}catch(K){eu(e,t,K)}finally{f!==null&&b.types!==null&&(f.types=b.types),N.T=f}}else try{f=i(d,l),ep(e,t,f)}catch(K){eu(e,t,K)}}function ep(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){tp(e,t,l)},function(l){return eu(e,t,l)}):tp(e,t,i)}function tp(e,t,i){t.status="fulfilled",t.value=i,np(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Zf(e,i)))}function eu(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,np(t),t=t.next;while(t!==l)}e.action=null}function np(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rp(e,t){return t}function ap(e,t){if(Be){var i=Ze.formState;if(i!==null){e:{var l=Te;if(Be){if(nt){t:{for(var d=nt,f=Nn;d.nodeType!==8;){if(!f){d=null;break t}if(d=kn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){nt=kn(d.nextSibling),l=d.data==="F!";break e}}Ur(l)}l=!1}l&&(t=i[0])}}return i=Yt(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rp,lastRenderedState:t},i.queue=l,i=_p.bind(null,Te,l),l.dispatch=i,l=Zc(!1),f=su.bind(null,Te,!1,l.queue),l=Yt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,i=gb.bind(null,Te,d,f,i),d.dispatch=i,l.memoizedState=e,[t,i,!1]}function ip(e){var t=ft();return sp(t,Qe,e)}function sp(e,t,i){if(t=Fc(e,t,rp)[0],e=zl(pr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=es(t)}catch(b){throw b===Qa?El:b}else l=t;t=ft();var d=t.queue,f=d.dispatch;return i!==t.memoizedState&&(Te.flags|=2048,ti(9,{destroy:void 0},mb.bind(null,d,i),null)),[l,f,e]}function mb(e,t){e.action=t}function lp(e){var t=ft(),i=Qe;if(i!==null)return sp(t,i,e);ft(),t=t.memoizedState,i=ft();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function ti(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=Te.updateQueue,t===null&&(t=kl(),Te.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function op(){return ft().memoizedState}function Ml(e,t,i,l){var d=Yt();Te.flags|=e,d.memoizedState=ti(1|t,{destroy:void 0},i,l===void 0?null:l)}function Ll(e,t,i,l){var d=ft();l=l===void 0?null:l;var f=d.memoizedState.inst;Qe!==null&&l!==null&&Vc(l,Qe.memoizedState.deps)?d.memoizedState=ti(t,f,i,l):(Te.flags|=e,d.memoizedState=ti(1|t,f,i,l))}function cp(e,t){Ml(8390656,8,e,t)}function tu(e,t){Ll(2048,8,e,t)}function vb(e){Te.flags|=4;var t=Te.updateQueue;if(t===null)t=kl(),Te.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function up(e){var t=ft().memoizedState;return vb({ref:t,nextImpl:e}),function(){if((Ge&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function dp(e,t){return Ll(4,2,e,t)}function hp(e,t){return Ll(4,4,e,t)}function fp(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pp(e,t,i){i=i!=null?i.concat([e]):null,Ll(4,4,fp.bind(null,t,e),i)}function nu(){}function gp(e,t){var i=ft();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&Vc(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function mp(e,t){var i=ft();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&Vc(t,l[1]))return l[0];if(l=e(),ya){pe(!0);try{e()}finally{pe(!1)}}return i.memoizedState=[l,t],l}function ru(e,t,i){return i===void 0||(fr&1073741824)!==0&&(Me&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=vg(),Te.lanes|=e,Gr|=e,i)}function vp(e,t,i,l){return on(i,t)?i:Wa.current!==null?(e=ru(e,i,l),on(e,t)||(yt=!0),e):(fr&42)===0||(fr&1073741824)!==0&&(Me&261930)===0?(yt=!0,e.memoizedState=i):(e=vg(),Te.lanes|=e,Gr|=e,t)}function yp(e,t,i,l,d){var f=V.p;V.p=f!==0&&8>f?f:8;var b=N.T,_={};N.T=_,su(e,!1,t,i);try{var k=d(),K=N.S;if(K!==null&&K(_,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var te=hb(k,l);ts(e,t,te,pn(e))}else ts(e,t,l,pn(e))}catch(ae){ts(e,t,{then:function(){},status:"rejected",reason:ae},pn())}finally{V.p=f,b!==null&&_.types!==null&&(b.types=_.types),N.T=b}}function yb(){}function au(e,t,i,l){if(e.tag!==5)throw Error(s(476));var d=bp(e).queue;yp(e,d,t,W,i===null?yb:function(){return xp(e),i(l)})}function bp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:W},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xp(e){var t=bp(e);t.next===null&&(t=e.alternate.memoizedState),ts(e,t.next.queue,{},pn())}function iu(){return Ut(ys)}function wp(){return ft().memoizedState}function Sp(){return ft().memoizedState}function bb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=pn();e=Lr(i);var l=Br(t,e,i);l!==null&&(rn(l,t,i),Qi(l,t,i)),t={cache:Uc()},e.payload=t;return}t=t.return}}function xb(e,t,i){var l=pn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Bl(e)?jp(t,i):(i=_c(e,t,i,l),i!==null&&(rn(i,e,l),Ep(i,t,l)))}function _p(e,t,i){var l=pn();ts(e,t,i,l)}function ts(e,t,i,l){var d={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Bl(e))jp(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var b=t.lastRenderedState,_=f(b,i);if(d.hasEagerState=!0,d.eagerState=_,on(_,b))return yl(e,t,d,0),Ze===null&&vl(),!1}catch{}if(i=_c(e,t,d,l),i!==null)return rn(i,e,l),Ep(i,t,l),!0}return!1}function su(e,t,i,l){if(l={lane:2,revertLane:Bu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bl(e)){if(t)throw Error(s(479))}else t=_c(e,i,l,2),t!==null&&rn(t,e,2)}function Bl(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function jp(e,t){Za=Nl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ep(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ln(e,i)}}var ns={readContext:Ut,use:Ul,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};ns.useEffectEvent=ot;var Cp={readContext:Ut,use:Ul,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:cp,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Ml(4194308,4,fp.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var i=Yt();t=t===void 0?null:t;var l=e();if(ya){pe(!0);try{e()}finally{pe(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Yt();if(i!==void 0){var d=i(t);if(ya){pe(!0);try{i(t)}finally{pe(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=xb.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:function(e){e=Zc(e);var t=e.queue,i=_p.bind(null,Te,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:nu,useDeferredValue:function(e,t){var i=Yt();return ru(i,e,t)},useTransition:function(){var e=Zc(!1);return e=yp.bind(null,Te,e.queue,!0,!1),Yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=Te,d=Yt();if(Be){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Ze===null)throw Error(s(349));(Me&127)!==0||Kf(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,cp(Xf.bind(null,l,f,e),[e]),l.flags|=2048,ti(9,{destroy:void 0},Jf.bind(null,l,f,i,t),null),i},useId:function(){var e=Yt(),t=Ze.identifierPrefix;if(Be){var i=Wn,l=Fn;i=(l&~(1<<32-Re(l)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Dl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=fb++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:iu,useFormState:ap,useActionState:ap,useOptimistic:function(e){var t=Yt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=su.bind(null,Te,!0,i),i.dispatch=t,[e,t]},useMemoCache:Qc,useCacheRefresh:function(){return Yt().memoizedState=bb.bind(null,Te)},useEffectEvent:function(e){var t=Yt(),i={impl:e};return t.memoizedState=i,function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},lu={readContext:Ut,use:Ul,useCallback:gp,useContext:Ut,useEffect:tu,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:mp,useReducer:zl,useRef:op,useState:function(){return zl(pr)},useDebugValue:nu,useDeferredValue:function(e,t){var i=ft();return vp(i,Qe.memoizedState,e,t)},useTransition:function(){var e=zl(pr)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:es(e),t]},useSyncExternalStore:Yf,useId:wp,useHostTransitionStatus:iu,useFormState:ip,useActionState:ip,useOptimistic:function(e,t){var i=ft();return Wf(i,Qe,e,t)},useMemoCache:Qc,useCacheRefresh:Sp};lu.useEffectEvent=up;var Rp={readContext:Ut,use:Ul,useCallback:gp,useContext:Ut,useEffect:tu,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:mp,useReducer:Wc,useRef:op,useState:function(){return Wc(pr)},useDebugValue:nu,useDeferredValue:function(e,t){var i=ft();return Qe===null?ru(i,e,t):vp(i,Qe.memoizedState,e,t)},useTransition:function(){var e=Wc(pr)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:es(e),t]},useSyncExternalStore:Yf,useId:wp,useHostTransitionStatus:iu,useFormState:lp,useActionState:lp,useOptimistic:function(e,t){var i=ft();return Qe!==null?Wf(i,Qe,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Qc,useCacheRefresh:Sp};Rp.useEffectEvent=up;function ou(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:y({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var cu={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=pn(),d=Lr(l);d.payload=t,i!=null&&(d.callback=i),t=Br(e,d,l),t!==null&&(rn(t,e,l),Qi(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=pn(),d=Lr(l);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Br(e,d,l),t!==null&&(rn(t,e,l),Qi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=pn(),l=Lr(i);l.tag=2,t!=null&&(l.callback=t),t=Br(e,l,i),t!==null&&(rn(t,e,i),Qi(t,e,i))}};function Tp(e,t,i,l,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,b):t.prototype&&t.prototype.isPureReactComponent?!Hi(i,l)||!Hi(d,f):!0}function Ap(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function ba(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}function Op(e){ml(e)}function Np(e){console.error(e)}function Dp(e){ml(e)}function Il(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function kp(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function uu(e,t,i){return i=Lr(i),i.tag=3,i.payload={element:null},i.callback=function(){Il(e,t)},i}function Up(e){return e=Lr(e),e.tag=3,e}function zp(e,t,i,l){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){kp(t,i,l)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){kp(t,i,l),typeof d!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function wb(e,t,i,l,d){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&Ka(t,i,d,!0),i=un.current,i!==null){switch(i.tag){case 31:case 13:return Dn===null?Fl():i.alternate===null&&ct===0&&(ct=3),i.flags&=-257,i.flags|=65536,i.lanes=d,l===Cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),zu(e,l,d)),!1;case 22:return i.flags|=65536,l===Cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),zu(e,l,d)),!1}throw Error(s(435,i.tag))}return zu(e,l,d),Fl(),!1}if(Be)return t=un.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Ac&&(e=Error(s(422),{cause:l}),Vi(Tn(e,i)))):(l!==Ac&&(t=Error(s(423),{cause:l}),Vi(Tn(t,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Tn(l,i),d=uu(e.stateNode,l,d),qc(e,d),ct!==4&&(ct=2)),!1;var f=Error(s(520),{cause:l});if(f=Tn(f,i),us===null?us=[f]:us.push(f),ct!==4&&(ct=2),t===null)return!0;l=Tn(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=uu(i.stateNode,l,e),qc(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Pr===null||!Pr.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Up(d),zp(d,e,i,l),qc(i,d),!1}i=i.return}while(i!==null);return!1}var du=Error(s(461)),yt=!1;function zt(e,t,i,l){t.child=e===null?If(t,null,i,l):va(t,e.child,i,l)}function Mp(e,t,i,l,d){i=i.render;var f=t.ref;if("ref"in l){var b={};for(var _ in l)_!=="ref"&&(b[_]=l[_])}else b=l;return fa(t),l=Yc(e,t,i,b,f,d),_=Kc(),e!==null&&!yt?(Jc(e,t,d),gr(e,t,d)):(Be&&_&&Rc(t),t.flags|=1,zt(e,t,l,d),t.child)}function Lp(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!jc(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,Bp(e,t,f,l,d)):(e=xl(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!bu(e,d)){var b=f.memoizedProps;if(i=i.compare,i=i!==null?i:Hi,i(b,l)&&e.ref===t.ref)return gr(e,t,d)}return t.flags|=1,e=cr(f,l),e.ref=t.ref,e.return=t,t.child=e}function Bp(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if(Hi(f,l)&&e.ref===t.ref)if(yt=!1,t.pendingProps=l=f,bu(e,d))(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,gr(e,t,d)}return hu(e,t,i,l,d)}function Ip(e,t,i,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return qp(e,t,f,i,l)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jl(t,f!==null?f.cachePool:null),f!==null?Hf(t,f):Hc(),Gf(t);else return l=t.lanes=536870912,qp(e,t,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(jl(t,f.cachePool),Hf(t,f),qr(),t.memoizedState=null):(e!==null&&jl(t,null),Hc(),qr());return zt(e,t,d,i),t.child}function rs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qp(e,t,i,l,d){var f=Mc();return f=f===null?null:{parent:mt._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&jl(t,null),Hc(),Gf(t),e!==null&&Ka(e,t,l,!0),t.childLanes=d,null}function ql(e,t){return t=Hl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function $p(e,t,i){return va(t,e.child,null,i),e=ql(t,t.pendingProps),e.flags|=2,dn(t),t.memoizedState=null,e}function Sb(e,t,i){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Be){if(l.mode==="hidden")return e=ql(t,l),t.lanes=536870912,rs(null,e);if(Pc(t),(e=nt)?(e=Zg(e,Nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Dr!==null?{id:Fn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},i=jf(e),i.return=t,t.child=i,kt=t,nt=null)):e=null,e===null)throw Ur(t);return t.lanes=536870912,null}return ql(t,l)}var f=e.memoizedState;if(f!==null){var b=f.dehydrated;if(Pc(t),d)if(t.flags&256)t.flags&=-257,t=$p(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(yt||Ka(e,t,i,!1),d=(i&e.childLanes)!==0,yt||d){if(l=Ze,l!==null&&(b=_n(l,i),b!==0&&b!==f.retryLane))throw f.retryLane=b,ca(e,b),rn(l,e,b),du;Fl(),t=$p(e,t,i)}else e=f.treeContext,nt=kn(b.nextSibling),kt=t,Be=!0,kr=null,Nn=!1,e!==null&&Rf(t,e),t=ql(t,l),t.flags|=4096;return t}return e=cr(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function $l(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function hu(e,t,i,l,d){return fa(t),i=Yc(e,t,i,l,void 0,d),l=Kc(),e!==null&&!yt?(Jc(e,t,d),gr(e,t,d)):(Be&&l&&Rc(t),t.flags|=1,zt(e,t,i,d),t.child)}function Hp(e,t,i,l,d,f){return fa(t),t.updateQueue=null,i=Vf(t,l,i,d),Pf(e),l=Kc(),e!==null&&!yt?(Jc(e,t,f),gr(e,t,f)):(Be&&l&&Rc(t),t.flags|=1,zt(e,t,i,f),t.child)}function Gp(e,t,i,l,d){if(fa(t),t.stateNode===null){var f=Ga,b=i.contextType;typeof b=="object"&&b!==null&&(f=Ut(b)),f=new i(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},Bc(t),b=i.contextType,f.context=typeof b=="object"&&b!==null?Ut(b):Ga,f.state=t.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(ou(t,i,b,l),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&cu.enqueueReplaceState(f,f.state,null),Wi(t,l,f,d),Fi(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,k=ba(i,_);f.props=k;var K=f.context,te=i.contextType;b=Ga,typeof te=="object"&&te!==null&&(b=Ut(te));var ae=i.getDerivedStateFromProps;te=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||K!==b)&&Ap(t,f,l,b),Mr=!1;var X=t.memoizedState;f.state=X,Wi(t,l,f,d),Fi(),K=t.memoizedState,_||X!==K||Mr?(typeof ae=="function"&&(ou(t,i,ae,l),K=t.memoizedState),(k=Mr||Tp(t,i,k,l,X,K,b))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=K),f.props=l,f.state=K,f.context=b,l=k):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,Ic(e,t),b=t.memoizedProps,te=ba(i,b),f.props=te,ae=t.pendingProps,X=f.context,K=i.contextType,k=Ga,typeof K=="object"&&K!==null&&(k=Ut(K)),_=i.getDerivedStateFromProps,(K=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ae||X!==k)&&Ap(t,f,l,k),Mr=!1,X=t.memoizedState,f.state=X,Wi(t,l,f,d),Fi();var Z=t.memoizedState;b!==ae||X!==Z||Mr||e!==null&&e.dependencies!==null&&Sl(e.dependencies)?(typeof _=="function"&&(ou(t,i,_,l),Z=t.memoizedState),(te=Mr||Tp(t,i,te,l,X,Z,k)||e!==null&&e.dependencies!==null&&Sl(e.dependencies))?(K||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Z,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Z,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Z),f.props=l,f.state=Z,f.context=k,l=te):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,$l(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=va(t,e.child,null,d),t.child=va(t,null,i,d)):zt(e,t,i,d),t.memoizedState=f.state,e=t.child):e=gr(e,t,d),e}function Pp(e,t,i,l){return da(),t.flags|=256,zt(e,t,i,l),t.child}var fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pu(e){return{baseLanes:e,cachePool:kf()}}function gu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=fn),e}function Vp(e,t,i){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(ht.current&2)!==0),b&&(d=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(d?Ir(t):qr(),(e=nt)?(e=Zg(e,Nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Dr!==null?{id:Fn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},i=jf(e),i.return=t,t.child=i,kt=t,nt=null)):e=null,e===null)throw Ur(t);return Fu(e)?t.lanes=32:t.lanes=536870912,null}var _=l.children;return l=l.fallback,d?(qr(),d=t.mode,_=Hl({mode:"hidden",children:_},d),l=ua(l,d,i,null),_.return=t,l.return=t,_.sibling=l,t.child=_,l=t.child,l.memoizedState=pu(i),l.childLanes=gu(e,b,i),t.memoizedState=fu,rs(null,l)):(Ir(t),mu(t,_))}var k=e.memoizedState;if(k!==null&&(_=k.dehydrated,_!==null)){if(f)t.flags&256?(Ir(t),t.flags&=-257,t=vu(e,t,i)):t.memoizedState!==null?(qr(),t.child=e.child,t.flags|=128,t=null):(qr(),_=l.fallback,d=t.mode,l=Hl({mode:"visible",children:l.children},d),_=ua(_,d,i,null),_.flags|=2,l.return=t,_.return=t,l.sibling=_,t.child=l,va(t,e.child,null,i),l=t.child,l.memoizedState=pu(i),l.childLanes=gu(e,b,i),t.memoizedState=fu,t=rs(null,l));else if(Ir(t),Fu(_)){if(b=_.nextSibling&&_.nextSibling.dataset,b)var K=b.dgst;b=K,l=Error(s(419)),l.stack="",l.digest=b,Vi({value:l,source:null,stack:null}),t=vu(e,t,i)}else if(yt||Ka(e,t,i,!1),b=(i&e.childLanes)!==0,yt||b){if(b=Ze,b!==null&&(l=_n(b,i),l!==0&&l!==k.retryLane))throw k.retryLane=l,ca(e,l),rn(b,e,l),du;Qu(_)||Fl(),t=vu(e,t,i)}else Qu(_)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,nt=kn(_.nextSibling),kt=t,Be=!0,kr=null,Nn=!1,e!==null&&Rf(t,e),t=mu(t,l.children),t.flags|=4096);return t}return d?(qr(),_=l.fallback,d=t.mode,k=e.child,K=k.sibling,l=cr(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,K!==null?_=cr(K,_):(_=ua(_,d,i,null),_.flags|=2),_.return=t,l.return=t,l.sibling=_,t.child=l,rs(null,l),l=t.child,_=e.child.memoizedState,_===null?_=pu(i):(d=_.cachePool,d!==null?(k=mt._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=kf(),_={baseLanes:_.baseLanes|i,cachePool:d}),l.memoizedState=_,l.childLanes=gu(e,b,i),t.memoizedState=fu,rs(e.child,l)):(Ir(t),i=e.child,e=i.sibling,i=cr(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=i,t.memoizedState=null,i)}function mu(e,t){return t=Hl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Hl(e,t){return e=cn(22,e,null,t),e.lanes=0,e}function vu(e,t,i){return va(t,e.child,null,i),e=mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yp(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Dc(e.return,t,i)}function yu(e,t,i,l,d,f){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d,treeForkCount:f}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=i,b.tailMode=d,b.treeForkCount=f)}function Kp(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var b=ht.current,_=(b&2)!==0;if(_?(b=b&1|2,t.flags|=128):b&=1,ie(ht,b),zt(e,t,l,i),l=Be?Pi:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,i,t);else if(e.tag===19)Yp(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Ol(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),yu(t,!1,d,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ol(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}yu(t,!0,i,null,f,l);break;case"together":yu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function gr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Gr|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ka(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=cr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=cr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function bu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Sl(e)))}function _b(e,t,i){switch(t.tag){case 3:Ve(t,t.stateNode.containerInfo),zr(t,mt,e.memoizedState.cache),da();break;case 27:case 5:Ne(t);break;case 4:Ve(t,t.stateNode.containerInfo);break;case 10:zr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Pc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ir(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Vp(e,t,i):(Ir(t),e=gr(e,t,i),e!==null?e.sibling:null);Ir(t);break;case 19:var d=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(Ka(e,t,i,!1),l=(i&t.childLanes)!==0),d){if(l)return Kp(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ie(ht,ht.current),l)break;return null;case 22:return t.lanes=0,Ip(e,t,i,t.pendingProps);case 24:zr(t,mt,e.memoizedState.cache)}return gr(e,t,i)}function Jp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!bu(e,i)&&(t.flags&128)===0)return yt=!1,_b(e,t,i);yt=(e.flags&131072)!==0}else yt=!1,Be&&(t.flags&1048576)!==0&&Cf(t,Pi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ga(t.elementType),t.type=e,typeof e=="function")jc(e)?(l=ba(e,l),t.tag=1,t=Gp(null,t,e,l,i)):(t.tag=0,t=hu(null,t,e,l,i));else{if(e!=null){var d=e.$$typeof;if(d===J){t.tag=11,t=Mp(null,t,e,l,i);break e}else if(d===U){t.tag=14,t=Lp(null,t,e,l,i);break e}}throw t=F(e)||e,Error(s(306,t,""))}}return t;case 0:return hu(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,d=ba(l,t.pendingProps),Gp(e,t,l,d,i);case 3:e:{if(Ve(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,Ic(e,t),Wi(t,l,null,i);var b=t.memoizedState;if(l=b.cache,zr(t,mt,l),l!==f.cache&&kc(t,[mt],i,!0),Fi(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Pp(e,t,l,i);break e}else if(l!==d){d=Tn(Error(s(424)),t),Vi(d),t=Pp(e,t,l,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,nt=kn(e.firstChild),kt=t,Be=!0,kr=null,Nn=!0,i=If(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(da(),l===d){t=gr(e,t,i);break e}zt(e,t,l,i)}t=t.child}return t;case 26:return $l(e,t),e===null?(i=im(t.type,null,t.pendingProps,null))?t.memoizedState=i:Be||(i=t.type,e=t.pendingProps,l=ao(ue.current).createElement(i),l[Dt]=t,l[Ft]=e,Mt(l,i,e),Tt(l),t.stateNode=l):t.memoizedState=im(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ne(t),e===null&&Be&&(l=t.stateNode=nm(t.type,t.pendingProps,ue.current),kt=t,Nn=!0,d=nt,Jr(t.type)?(Wu=d,nt=kn(l.firstChild)):nt=d),zt(e,t,t.pendingProps.children,i),$l(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((d=l=nt)&&(l=Zb(l,t.type,t.pendingProps,Nn),l!==null?(t.stateNode=l,kt=t,nt=kn(l.firstChild),Nn=!1,d=!0):d=!1),d||Ur(t)),Ne(t),d=t.type,f=t.pendingProps,b=e!==null?e.memoizedProps:null,l=f.children,Ku(d,f)?l=null:b!==null&&Ku(d,b)&&(t.flags|=32),t.memoizedState!==null&&(d=Yc(e,t,pb,null,null,i),ys._currentValue=d),$l(e,t),zt(e,t,l,i),t.child;case 6:return e===null&&Be&&((e=i=nt)&&(i=ex(i,t.pendingProps,Nn),i!==null?(t.stateNode=i,kt=t,nt=null,e=!0):e=!1),e||Ur(t)),null;case 13:return Vp(e,t,i);case 4:return Ve(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=va(t,null,l,i):zt(e,t,l,i),t.child;case 11:return Mp(e,t,t.type,t.pendingProps,i);case 7:return zt(e,t,t.pendingProps,i),t.child;case 8:return zt(e,t,t.pendingProps.children,i),t.child;case 12:return zt(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,zr(t,t.type,l.value),zt(e,t,l.children,i),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,fa(t),d=Ut(d),l=l(d),t.flags|=1,zt(e,t,l,i),t.child;case 14:return Lp(e,t,t.type,t.pendingProps,i);case 15:return Bp(e,t,t.type,t.pendingProps,i);case 19:return Kp(e,t,i);case 31:return Sb(e,t,i);case 22:return Ip(e,t,i,t.pendingProps);case 24:return fa(t),l=Ut(mt),e===null?(d=Mc(),d===null&&(d=Ze,f=Uc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),t.memoizedState={parent:l,cache:d},Bc(t),zr(t,mt,d)):((e.lanes&i)!==0&&(Ic(e,t),Wi(t,null,null,i),Fi()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),zr(t,mt,l)):(l=f.cache,zr(t,mt,l),l!==d.cache&&kc(t,[mt],i,!0))),zt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function mr(e){e.flags|=4}function xu(e,t,i,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(wg())e.flags|=8192;else throw ma=Cl,Lc}else e.flags&=-16777217}function Xp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!um(t))if(wg())e.flags|=8192;else throw ma=Cl,Lc}function Gl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ht():536870912,e.lanes|=t,ii|=t)}function as(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function jb(e,t,i){var l=t.pendingProps;switch(Tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return rt(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),hr(mt),De(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ya(t)?mr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oc())),rt(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(mr(t),f!==null?(rt(t),Xp(t,f)):(rt(t),xu(t,d,null,l,i))):f?f!==e.memoizedState?(mr(t),rt(t),Xp(t,f)):(rt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&mr(t),rt(t),xu(t,d,e,l,i)),null;case 27:if(qt(t),i=ue.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&mr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return rt(t),null}e=ce.current,Ya(t)?Tf(t):(e=nm(d,l,i),t.stateNode=e,mr(t))}return rt(t),null;case 5:if(qt(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&mr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return rt(t),null}if(f=ce.current,Ya(t))Tf(t);else{var b=ao(ue.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?b.createElement(d,{is:l.is}):b.createElement(d)}}f[Dt]=t,f[Ft]=l;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=f;e:switch(Mt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(t)}}return rt(t),xu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&mr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=ue.current,Ya(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,d=kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Dt]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Vg(e.nodeValue,i)),e||Ur(t,!0)}else e=ao(e).createTextNode(l),e[Dt]=t,t.stateNode=e}return rt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ya(t),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Dt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),e=!1}else i=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(dn(t),t):(dn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return rt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ya(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Dt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),d=!1}else d=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(dn(t),t):(dn(t),null)}return dn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Gl(t,t.updateQueue),rt(t),null);case 4:return De(),e===null&&Hu(t.stateNode.containerInfo),rt(t),null;case 10:return hr(t.type),rt(t),null;case 19:if(B(ht),l=t.memoizedState,l===null)return rt(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)as(l,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Ol(e),f!==null){for(t.flags|=128,as(l,!1),e=f.updateQueue,t.updateQueue=e,Gl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)_f(i,e),i=i.sibling;return ie(ht,ht.current&1|2),Be&&ur(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&at()>Jl&&(t.flags|=128,d=!0,as(l,!1),t.lanes=4194304)}else{if(!d)if(e=Ol(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Gl(t,e),as(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Be)return rt(t),null}else 2*at()-l.renderingStartTime>Jl&&i!==536870912&&(t.flags|=128,d=!0,as(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=at(),e.sibling=null,i=ht.current,ie(ht,d?i&1|2:i&1),Be&&ur(t,l.treeForkCount),e):(rt(t),null);case 22:case 23:return dn(t),Gc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),i=t.updateQueue,i!==null&&Gl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&B(pa),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),hr(mt),rt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Eb(e,t){switch(Tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hr(mt),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qt(t),null;case 31:if(t.memoizedState!==null){if(dn(t),t.alternate===null)throw Error(s(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(dn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(ht),null;case 4:return De(),null;case 10:return hr(t.type),null;case 22:case 23:return dn(t),Gc(),e!==null&&B(pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return hr(mt),null;case 25:return null;default:return null}}function Qp(e,t){switch(Tc(t),t.tag){case 3:hr(mt),De();break;case 26:case 27:case 5:qt(t);break;case 4:De();break;case 31:t.memoizedState!==null&&dn(t);break;case 13:dn(t);break;case 19:B(ht);break;case 10:hr(t.type);break;case 22:case 23:dn(t),Gc(),e!==null&&B(pa);break;case 24:hr(mt)}}function is(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var d=l.next;i=d;do{if((i.tag&e)===e){l=void 0;var f=i.create,b=i.inst;l=f(),b.destroy=l}i=i.next}while(i!==d)}}catch(_){Ke(t,t.return,_)}}function $r(e,t,i){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var b=l.inst,_=b.destroy;if(_!==void 0){b.destroy=void 0,d=t;var k=i,K=_;try{K()}catch(te){Ke(d,k,te)}}}l=l.next}while(l!==f)}}catch(te){Ke(t,t.return,te)}}function Fp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{$f(t,i)}catch(l){Ke(e,e.return,l)}}}function Wp(e,t,i){i.props=ba(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Ke(e,t,l)}}function ss(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(d){Ke(e,t,d)}}function Zn(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(d){Ke(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Ke(e,t,d)}else i.current=null}function Zp(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(d){Ke(e,e.return,d)}}function wu(e,t,i){try{var l=e.stateNode;Kb(l,e.type,i,t),l[Ft]=t}catch(d){Ke(e,e.return,d)}}function eg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Jr(e.type)||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Jr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _u(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=lr));else if(l!==4&&(l===27&&Jr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(_u(e,t,i),e=e.sibling;e!==null;)_u(e,t,i),e=e.sibling}function Pl(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&Jr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Pl(e,t,i),e=e.sibling;e!==null;)Pl(e,t,i),e=e.sibling}function tg(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Mt(t,l,i),t[Dt]=e,t[Ft]=i}catch(f){Ke(e,e.return,f)}}var vr=!1,bt=!1,ju=!1,ng=typeof WeakSet=="function"?WeakSet:Set,At=null;function Cb(e,t){if(e=e.containerInfo,Vu=ho,e=pf(e),vc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var b=0,_=-1,k=-1,K=0,te=0,ae=e,X=null;t:for(;;){for(var Z;ae!==i||d!==0&&ae.nodeType!==3||(_=b+d),ae!==f||l!==0&&ae.nodeType!==3||(k=b+l),ae.nodeType===3&&(b+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)X=ae,ae=Z;for(;;){if(ae===e)break t;if(X===i&&++K===d&&(_=b),X===f&&++te===l&&(k=b),(Z=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=Z}i=_===-1||k===-1?null:{start:_,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(Yu={focusedElem:e,selectionRange:i},ho=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)d=e[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,d=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var he=ba(i.type,d);e=l.getSnapshotBeforeUpdate(he,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(be){Ke(i,i.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Xu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Xu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function rg(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:br(e,i),l&4&&is(5,i);break;case 1:if(br(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(b){Ke(i,i.return,b)}else{var d=ba(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ke(i,i.return,b)}}l&64&&Fp(i),l&512&&ss(i,i.return);break;case 3:if(br(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{$f(e,t)}catch(b){Ke(i,i.return,b)}}break;case 27:t===null&&l&4&&tg(i);case 26:case 5:br(e,i),t===null&&l&4&&Zp(i),l&512&&ss(i,i.return);break;case 12:br(e,i);break;case 31:br(e,i),l&4&&sg(e,i);break;case 13:br(e,i),l&4&&lg(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=zb.bind(null,i),tx(e,i))));break;case 22:if(l=i.memoizedState!==null||vr,!l){t=t!==null&&t.memoizedState!==null||bt,d=vr;var f=bt;vr=l,(bt=t)&&!f?xr(e,i,(i.subtreeFlags&8772)!==0):br(e,i),vr=d,bt=f}break;case 30:break;default:br(e,i)}}function ag(e){var t=e.alternate;t!==null&&(e.alternate=null,ag(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ec(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,Zt=!1;function yr(e,t,i){for(i=i.child;i!==null;)ig(e,t,i),i=i.sibling}function ig(e,t,i){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(ke,i)}catch{}switch(i.tag){case 26:bt||Zn(i,t),yr(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Zn(i,t);var l=it,d=Zt;Jr(i.type)&&(it=i.stateNode,Zt=!1),yr(e,t,i),gs(i.stateNode),it=l,Zt=d;break;case 5:bt||Zn(i,t);case 6:if(l=it,d=Zt,it=null,yr(e,t,i),it=l,Zt=d,it!==null)if(Zt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(i.stateNode)}catch(f){Ke(i,t,f)}else try{it.removeChild(i.stateNode)}catch(f){Ke(i,t,f)}break;case 18:it!==null&&(Zt?(e=it,Fg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),fi(e)):Fg(it,i.stateNode));break;case 4:l=it,d=Zt,it=i.stateNode.containerInfo,Zt=!0,yr(e,t,i),it=l,Zt=d;break;case 0:case 11:case 14:case 15:$r(2,i,t),bt||$r(4,i,t),yr(e,t,i);break;case 1:bt||(Zn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Wp(i,t,l)),yr(e,t,i);break;case 21:yr(e,t,i);break;case 22:bt=(l=bt)||i.memoizedState!==null,yr(e,t,i),bt=l;break;default:yr(e,t,i)}}function sg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fi(e)}catch(i){Ke(t,t.return,i)}}}function lg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fi(e)}catch(i){Ke(t,t.return,i)}}function Rb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ng),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ng),t;default:throw Error(s(435,e.tag))}}function Vl(e,t){var i=Rb(e);t.forEach(function(l){if(!i.has(l)){i.add(l);var d=Mb.bind(null,e,l);l.then(d,d)}})}function en(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l],f=e,b=t,_=b;e:for(;_!==null;){switch(_.tag){case 27:if(Jr(_.type)){it=_.stateNode,Zt=!1;break e}break;case 5:it=_.stateNode,Zt=!1;break e;case 3:case 4:it=_.stateNode.containerInfo,Zt=!0;break e}_=_.return}if(it===null)throw Error(s(160));ig(f,b,d),it=null,Zt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)og(t,e),t=t.sibling}var Hn=null;function og(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:en(t,e),tn(e),l&4&&($r(3,e,e.return),is(3,e),$r(5,e,e.return));break;case 1:en(t,e),tn(e),l&512&&(bt||i===null||Zn(i,i.return)),l&64&&vr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var d=Hn;if(en(t,e),tn(e),l&512&&(bt||i===null||Zn(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ki]||f[Dt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Mt(f,l,i),f[Dt]=e,Tt(f),l=f;break e;case"link":var b=om("link","href",d).get(l+(i.href||""));if(b){for(var _=0;_<b.length;_++)if(f=b[_],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(_,1);break t}}f=d.createElement(l),Mt(f,l,i),d.head.appendChild(f);break;case"meta":if(b=om("meta","content",d).get(l+(i.content||""))){for(_=0;_<b.length;_++)if(f=b[_],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(_,1);break t}}f=d.createElement(l),Mt(f,l,i),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[Dt]=e,Tt(f),l=f}e.stateNode=l}else cm(d,e.type,e.stateNode);else e.stateNode=lm(d,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?cm(d,e.type,e.stateNode):lm(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&wu(e,e.memoizedProps,i.memoizedProps)}break;case 27:en(t,e),tn(e),l&512&&(bt||i===null||Zn(i,i.return)),i!==null&&l&4&&wu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(en(t,e),tn(e),l&512&&(bt||i===null||Zn(i,i.return)),e.flags&32){d=e.stateNode;try{Ma(d,"")}catch(he){Ke(e,e.return,he)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,wu(e,d,i!==null?i.memoizedProps:d)),l&1024&&(ju=!0);break;case 6:if(en(t,e),tn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(he){Ke(e,e.return,he)}}break;case 3:if(lo=null,d=Hn,Hn=io(t.containerInfo),en(t,e),Hn=d,tn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{fi(t.containerInfo)}catch(he){Ke(e,e.return,he)}ju&&(ju=!1,cg(e));break;case 4:l=Hn,Hn=io(e.stateNode.containerInfo),en(t,e),tn(e),Hn=l;break;case 12:en(t,e),tn(e);break;case 31:en(t,e),tn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vl(e,l)));break;case 13:en(t,e),tn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Kl=at()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vl(e,l)));break;case 22:d=e.memoizedState!==null;var k=i!==null&&i.memoizedState!==null,K=vr,te=bt;if(vr=K||d,bt=te||k,en(t,e),bt=te,vr=K,tn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(i===null||k||vr||bt||xa(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){k=i=t;try{if(f=k.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{_=k.stateNode;var ae=k.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;_.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(he){Ke(k,k.return,he)}}}else if(t.tag===6){if(i===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(he){Ke(k,k.return,he)}}}else if(t.tag===18){if(i===null){k=t;try{var Z=k.stateNode;d?Wg(Z,!0):Wg(k.stateNode,!1)}catch(he){Ke(k,k.return,he)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Vl(e,i))));break;case 19:en(t,e),tn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vl(e,l)));break;case 30:break;case 21:break;default:en(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(eg(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var d=i.stateNode,f=Su(e);Pl(e,f,d);break;case 5:var b=i.stateNode;i.flags&32&&(Ma(b,""),i.flags&=-33);var _=Su(e);Pl(e,_,b);break;case 3:case 4:var k=i.stateNode.containerInfo,K=Su(e);_u(e,K,k);break;default:throw Error(s(161))}}catch(te){Ke(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;cg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function br(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)rg(e,t.alternate,t),t=t.sibling}function xa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$r(4,t,t.return),xa(t);break;case 1:Zn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Wp(t,t.return,i),xa(t);break;case 27:gs(t.stateNode);case 26:case 5:Zn(t,t.return),xa(t);break;case 22:t.memoizedState===null&&xa(t);break;case 30:xa(t);break;default:xa(t)}e=e.sibling}}function xr(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,b=f.flags;switch(f.tag){case 0:case 11:case 15:xr(d,f,i),is(4,f);break;case 1:if(xr(d,f,i),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){Ke(l,l.return,K)}if(l=f,d=l.updateQueue,d!==null){var _=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)qf(k[d],_)}catch(K){Ke(l,l.return,K)}}i&&b&64&&Fp(f),ss(f,f.return);break;case 27:tg(f);case 26:case 5:xr(d,f,i),i&&l===null&&b&4&&Zp(f),ss(f,f.return);break;case 12:xr(d,f,i);break;case 31:xr(d,f,i),i&&b&4&&sg(d,f);break;case 13:xr(d,f,i),i&&b&4&&lg(d,f);break;case 22:f.memoizedState===null&&xr(d,f,i),ss(f,f.return);break;case 30:break;default:xr(d,f,i)}t=t.sibling}}function Eu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Yi(i))}function Cu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Yi(e))}function Gn(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ug(e,t,i,l),t=t.sibling}function ug(e,t,i,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Gn(e,t,i,l),d&2048&&is(9,t);break;case 1:Gn(e,t,i,l);break;case 3:Gn(e,t,i,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Yi(e)));break;case 12:if(d&2048){Gn(e,t,i,l),e=t.stateNode;try{var f=t.memoizedProps,b=f.id,_=f.onPostCommit;typeof _=="function"&&_(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Ke(t,t.return,k)}}else Gn(e,t,i,l);break;case 31:Gn(e,t,i,l);break;case 13:Gn(e,t,i,l);break;case 23:break;case 22:f=t.stateNode,b=t.alternate,t.memoizedState!==null?f._visibility&2?Gn(e,t,i,l):ls(e,t):f._visibility&2?Gn(e,t,i,l):(f._visibility|=2,ni(e,t,i,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Eu(b,t);break;case 24:Gn(e,t,i,l),d&2048&&Cu(t.alternate,t);break;default:Gn(e,t,i,l)}}function ni(e,t,i,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,b=t,_=i,k=l,K=b.flags;switch(b.tag){case 0:case 11:case 15:ni(f,b,_,k,d),is(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?ni(f,b,_,k,d):ls(f,b):(te._visibility|=2,ni(f,b,_,k,d)),d&&K&2048&&Eu(b.alternate,b);break;case 24:ni(f,b,_,k,d),d&&K&2048&&Cu(b.alternate,b);break;default:ni(f,b,_,k,d)}t=t.sibling}}function ls(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,d=l.flags;switch(l.tag){case 22:ls(i,l),d&2048&&Eu(l.alternate,l);break;case 24:ls(i,l),d&2048&&Cu(l.alternate,l);break;default:ls(i,l)}t=t.sibling}}var os=8192;function ri(e,t,i){if(e.subtreeFlags&os)for(e=e.child;e!==null;)dg(e,t,i),e=e.sibling}function dg(e,t,i){switch(e.tag){case 26:ri(e,t,i),e.flags&os&&e.memoizedState!==null&&fx(i,Hn,e.memoizedState,e.memoizedProps);break;case 5:ri(e,t,i);break;case 3:case 4:var l=Hn;Hn=io(e.stateNode.containerInfo),ri(e,t,i),Hn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=os,os=16777216,ri(e,t,i),os=l):ri(e,t,i));break;default:ri(e,t,i)}}function hg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function cs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];At=l,pg(l,e)}hg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)fg(e),e=e.sibling}function fg(e){switch(e.tag){case 0:case 11:case 15:cs(e),e.flags&2048&&$r(9,e,e.return);break;case 3:cs(e);break;case 12:cs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Yl(e)):cs(e);break;default:cs(e)}}function Yl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];At=l,pg(l,e)}hg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$r(8,t,t.return),Yl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Yl(t));break;default:Yl(t)}e=e.sibling}}function pg(e,t){for(;At!==null;){var i=At;switch(i.tag){case 0:case 11:case 15:$r(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Yi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,At=l;else e:for(i=e;At!==null;){l=At;var d=l.sibling,f=l.return;if(ag(l),l===i){At=null;break e}if(d!==null){d.return=f,At=d;break e}At=f}}}var Tb={getCacheForType:function(e){var t=Ut(mt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Ut(mt).controller.signal}},Ab=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Ze=null,Ue=null,Me=0,Ye=0,hn=null,Hr=!1,ai=!1,Ru=!1,wr=0,ct=0,Gr=0,wa=0,Tu=0,fn=0,ii=0,us=null,nn=null,Au=!1,Kl=0,gg=0,Jl=1/0,Xl=null,Pr=null,St=0,Vr=null,si=null,Sr=0,Ou=0,Nu=null,mg=null,ds=0,Du=null;function pn(){return(Ge&2)!==0&&Me!==0?Me&-Me:N.T!==null?Bu():qn()}function vg(){if(fn===0)if((Me&536870912)===0||Be){var e=Qn;Qn<<=1,(Qn&3932160)===0&&(Qn=262144),fn=e}else fn=536870912;return e=un.current,e!==null&&(e.flags|=32),fn}function rn(e,t,i){(e===Ze&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(li(e,0),Yr(e,Me,fn,!1)),Sn(e,i),((Ge&2)===0||e!==Ze)&&(e===Ze&&((Ge&2)===0&&(wa|=i),ct===4&&Yr(e,Me,fn,!1)),er(e))}function yg(e,t,i){if((Ge&6)!==0)throw Error(s(327));var l=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Jt(e,t),d=l?Db(e,t):Uu(e,t,!0),f=l;do{if(d===0){ai&&!l&&Yr(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!Ob(i)){d=Uu(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var _=e;d=us;var k=_.current.memoizedState.isDehydrated;if(k&&(li(_,b).flags|=256),b=Uu(_,b,!1),b!==2){if(Ru&&!k){_.errorRecoveryDisabledLanes|=f,wa|=f,d=4;break e}f=nn,nn=d,f!==null&&(nn===null?nn=f:nn.push.apply(nn,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){li(e,0),Yr(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Yr(l,t,fn,!Hr);break e;case 2:nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(d=Kl+300-at(),10<d)){if(Yr(l,t,fn,!Hr),Rt(l,0,!0)!==0)break e;Sr=t,l.timeoutHandle=Xg(bg.bind(null,l,i,nn,Xl,Au,t,fn,wa,ii,Hr,f,"Throttled",-0,0),d);break e}bg(l,i,nn,Xl,Au,t,fn,wa,ii,Hr,f,null,-0,0)}}break}while(!0);er(e)}function bg(e,t,i,l,d,f,b,_,k,K,te,ae,X,Z){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},dg(t,f,ae);var he=(f&62914560)===f?Kl-at():(f&4194048)===f?gg-at():0;if(he=px(ae,he),he!==null){Sr=f,e.cancelPendingCommit=he(Rg.bind(null,e,t,f,i,l,d,b,_,k,te,ae,null,X,Z)),Yr(e,f,b,!K);return}}Rg(e,t,f,i,l,d,b,_,k)}function Ob(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!on(f(),d))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t,i,l){t&=~Tu,t&=~wa,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-Re(d),b=1<<f;l[f]=-1,d&=~b}i!==0&&In(e,i,t)}function Ql(){return(Ge&6)===0?(hs(0),!1):!0}function ku(){if(Ue!==null){if(Ye===0)var e=Ue.return;else e=Ue,dr=ha=null,Xc(e),Fa=null,Ji=0,e=Ue;for(;e!==null;)Qp(e.alternate,e),e=e.return;Ue=null}}function li(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Qb(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Sr=0,ku(),Ze=e,Ue=i=cr(e.current,null),Me=t,Ye=0,hn=null,Hr=!1,ai=Jt(e,t),Ru=!1,ii=fn=Tu=wa=Gr=ct=0,nn=us=null,Au=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-Re(l),f=1<<d;t|=e[d],l&=~f}return wr=t,vl(),i}function xg(e,t){Te=null,N.H=ns,t===Qa||t===El?(t=Mf(),Ye=3):t===Lc?(t=Mf(),Ye=4):Ye=t===du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,hn=t,Ue===null&&(ct=1,Il(e,Tn(t,e.current)))}function wg(){var e=un.current;return e===null?!0:(Me&4194048)===Me?Dn===null:(Me&62914560)===Me||(Me&536870912)!==0?e===Dn:!1}function Sg(){var e=N.H;return N.H=ns,e===null?ns:e}function _g(){var e=N.A;return N.A=Tb,e}function Fl(){ct=4,Hr||(Me&4194048)!==Me&&un.current!==null||(ai=!0),(Gr&134217727)===0&&(wa&134217727)===0||Ze===null||Yr(Ze,Me,fn,!1)}function Uu(e,t,i){var l=Ge;Ge|=2;var d=Sg(),f=_g();(Ze!==e||Me!==t)&&(Xl=null,li(e,t)),t=!1;var b=ct;e:do try{if(Ye!==0&&Ue!==null){var _=Ue,k=hn;switch(Ye){case 8:ku(),b=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(t=!0);var K=Ye;if(Ye=0,hn=null,oi(e,_,k,K),i&&ai){b=0;break e}break;default:K=Ye,Ye=0,hn=null,oi(e,_,k,K)}}Nb(),b=ct;break}catch(te){xg(e,te)}while(!0);return t&&e.shellSuspendCounter++,dr=ha=null,Ge=l,N.H=d,N.A=f,Ue===null&&(Ze=null,Me=0,vl()),b}function Nb(){for(;Ue!==null;)jg(Ue)}function Db(e,t){var i=Ge;Ge|=2;var l=Sg(),d=_g();Ze!==e||Me!==t?(Xl=null,Jl=at()+500,li(e,t)):ai=Jt(e,t);e:do try{if(Ye!==0&&Ue!==null){t=Ue;var f=hn;t:switch(Ye){case 1:Ye=0,hn=null,oi(e,t,f,1);break;case 2:case 9:if(Uf(f)){Ye=0,hn=null,Eg(t);break}t=function(){Ye!==2&&Ye!==9||Ze!==e||(Ye=7),er(e)},f.then(t,t);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Uf(f)?(Ye=0,hn=null,Eg(t)):(Ye=0,hn=null,oi(e,t,f,7));break;case 5:var b=null;switch(Ue.tag){case 26:b=Ue.memoizedState;case 5:case 27:var _=Ue;if(b?um(b):_.stateNode.complete){Ye=0,hn=null;var k=_.sibling;if(k!==null)Ue=k;else{var K=_.return;K!==null?(Ue=K,Wl(K)):Ue=null}break t}}Ye=0,hn=null,oi(e,t,f,5);break;case 6:Ye=0,hn=null,oi(e,t,f,6);break;case 8:ku(),ct=6;break e;default:throw Error(s(462))}}kb();break}catch(te){xg(e,te)}while(!0);return dr=ha=null,N.H=l,N.A=d,Ge=i,Ue!==null?0:(Ze=null,Me=0,vl(),ct)}function kb(){for(;Ue!==null&&!Xn();)jg(Ue)}function jg(e){var t=Jp(e.alternate,e,wr);e.memoizedProps=e.pendingProps,t===null?Wl(e):Ue=t}function Eg(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Hp(i,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=Hp(i,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:Xc(t);default:Qp(i,t),t=Ue=_f(t,wr),t=Jp(i,t,wr)}e.memoizedProps=e.pendingProps,t===null?Wl(e):Ue=t}function oi(e,t,i,l){dr=ha=null,Xc(t),Fa=null,Ji=0;var d=t.return;try{if(wb(e,d,t,i,Me)){ct=1,Il(e,Tn(i,e.current)),Ue=null;return}}catch(f){if(d!==null)throw Ue=d,f;ct=1,Il(e,Tn(i,e.current)),Ue=null;return}t.flags&32768?(Be||l===1?e=!0:ai||(Me&536870912)!==0?e=!1:(Hr=e=!0,(l===2||l===9||l===3||l===6)&&(l=un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cg(t,e)):Wl(t)}function Wl(e){var t=e;do{if((t.flags&32768)!==0){Cg(t,Hr);return}e=t.return;var i=jb(t.alternate,t,wr);if(i!==null){Ue=i;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);ct===0&&(ct=5)}function Cg(e,t){do{var i=Eb(e.alternate,e);if(i!==null){i.flags&=32767,Ue=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=i}while(e!==null);ct=6,Ue=null}function Rg(e,t,i,l,d,f,b,_,k){e.cancelPendingCommit=null;do Zl();while(St!==0);if((Ge&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=Sc,wt(e,i,f,b,_,k),e===Ze&&(Ue=Ze=null,Me=0),si=t,Vr=e,Sr=i,Ou=f,Nu=d,mg=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Lb(se,function(){return Dg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,d=V.p,V.p=2,b=Ge,Ge|=4;try{Cb(e,t,i)}finally{Ge=b,V.p=d,N.T=l}}St=1,Tg(),Ag(),Og()}}function Tg(){if(St===1){St=0;var e=Vr,t=si,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var l=V.p;V.p=2;var d=Ge;Ge|=4;try{og(t,e);var f=Yu,b=pf(e.containerInfo),_=f.focusedElem,k=f.selectionRange;if(b!==_&&_&&_.ownerDocument&&ff(_.ownerDocument.documentElement,_)){if(k!==null&&vc(_)){var K=k.start,te=k.end;if(te===void 0&&(te=K),"selectionStart"in _)_.selectionStart=K,_.selectionEnd=Math.min(te,_.value.length);else{var ae=_.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var Z=X.getSelection(),he=_.textContent.length,be=Math.min(k.start,he),We=k.end===void 0?be:Math.min(k.end,he);!Z.extend&&be>We&&(b=We,We=be,be=b);var P=hf(_,be),M=hf(_,We);if(P&&M&&(Z.rangeCount!==1||Z.anchorNode!==P.node||Z.anchorOffset!==P.offset||Z.focusNode!==M.node||Z.focusOffset!==M.offset)){var Y=ae.createRange();Y.setStart(P.node,P.offset),Z.removeAllRanges(),be>We?(Z.addRange(Y),Z.extend(M.node,M.offset)):(Y.setEnd(M.node,M.offset),Z.addRange(Y))}}}}for(ae=[],Z=_;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ae.length;_++){var re=ae[_];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}ho=!!Vu,Yu=Vu=null}finally{Ge=d,V.p=l,N.T=i}}e.current=t,St=2}}function Ag(){if(St===2){St=0;var e=Vr,t=si,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var l=V.p;V.p=2;var d=Ge;Ge|=4;try{rg(e,t.alternate,t)}finally{Ge=d,V.p=l,N.T=i}}St=3}}function Og(){if(St===4||St===3){St=0,nr();var e=Vr,t=si,i=Sr,l=mg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?St=5:(St=0,si=Vr=null,Ng(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Pr=null),ir(i),t=t.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(ke,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=N.T,d=V.p,V.p=2,N.T=null;try{for(var f=e.onRecoverableError,b=0;b<l.length;b++){var _=l[b];f(_.value,{componentStack:_.stack})}}finally{N.T=t,V.p=d}}(Sr&3)!==0&&Zl(),er(e),d=e.pendingLanes,(i&261930)!==0&&(d&42)!==0?e===Du?ds++:(ds=0,Du=e):ds=0,hs(0)}}function Ng(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Yi(t)))}function Zl(){return Tg(),Ag(),Og(),Dg()}function Dg(){if(St!==5)return!1;var e=Vr,t=Ou;Ou=0;var i=ir(Sr),l=N.T,d=V.p;try{V.p=32>i?32:i,N.T=null,i=Nu,Nu=null;var f=Vr,b=Sr;if(St=0,si=Vr=null,Sr=0,(Ge&6)!==0)throw Error(s(331));var _=Ge;if(Ge|=4,fg(f.current),ug(f,f.current,b,i),Ge=_,hs(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(ke,f)}catch{}return!0}finally{V.p=d,N.T=l,Ng(e,t)}}function kg(e,t,i){t=Tn(i,t),t=uu(e.stateNode,t,2),e=Br(e,t,2),e!==null&&(Sn(e,2),er(e))}function Ke(e,t,i){if(e.tag===3)kg(e,e,i);else for(;t!==null;){if(t.tag===3){kg(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Pr===null||!Pr.has(l))){e=Tn(i,e),i=Up(2),l=Br(t,i,2),l!==null&&(zp(i,l,t,e),Sn(l,2),er(l));break}}t=t.return}}function zu(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Ab;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(Ru=!0,d.add(i),e=Ub.bind(null,e,t,i),t.then(e,e))}function Ub(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ze===e&&(Me&i)===i&&(ct===4||ct===3&&(Me&62914560)===Me&&300>at()-Kl?(Ge&2)===0&&li(e,0):Tu|=i,ii===Me&&(ii=0)),er(e)}function Ug(e,t){t===0&&(t=Ht()),e=ca(e,t),e!==null&&(Sn(e,t),er(e))}function zb(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ug(e,i)}function Mb(e,t){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),Ug(e,i)}function Lb(e,t){return Nt(e,t)}var eo=null,ci=null,Mu=!1,to=!1,Lu=!1,Kr=0;function er(e){e!==ci&&e.next===null&&(ci===null?eo=ci=e:ci=ci.next=e),to=!0,Mu||(Mu=!0,Ib())}function hs(e,t){if(!Lu&&to){Lu=!0;do for(var i=!1,l=eo;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var b=l.suspendedLanes,_=l.pingedLanes;f=(1<<31-Re(42|e)+1)-1,f&=d&~(b&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Bg(l,f))}else f=Me,f=Rt(l,l===Ze?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Jt(l,f)||(i=!0,Bg(l,f));l=l.next}while(i);Lu=!1}}function Bb(){zg()}function zg(){to=Mu=!1;var e=0;Kr!==0&&Xb()&&(e=Kr);for(var t=at(),i=null,l=eo;l!==null;){var d=l.next,f=Mg(l,t);f===0?(l.next=null,i===null?eo=d:i.next=d,d===null&&(ci=i)):(i=l,(e!==0||(f&3)!==0)&&(to=!0)),l=d}St!==0&&St!==5||hs(e),Kr!==0&&(Kr=0)}function Mg(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-Re(f),_=1<<b,k=d[b];k===-1?((_&i)===0||(_&l)!==0)&&(d[b]=Xt(_,t)):k<=t&&(e.expiredLanes|=_),f&=~_}if(t=Ze,i=Me,i=Rt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&bn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Jt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&bn(l),ir(i)){case 2:case 8:i=z;break;case 32:i=se;break;case 268435456:i=Se;break;default:i=se}return l=Lg.bind(null,e),i=Nt(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&bn(l),e.callbackPriority=2,e.callbackNode=null,2}function Lg(e,t){if(St!==0&&St!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Zl()&&e.callbackNode!==i)return null;var l=Me;return l=Rt(e,e===Ze?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(yg(e,l,t),Mg(e,at()),e.callbackNode!=null&&e.callbackNode===i?Lg.bind(null,e):null)}function Bg(e,t){if(Zl())return null;yg(e,t,!0)}function Ib(){Fb(function(){(Ge&6)!==0?Nt(de,Bb):zg()})}function Bu(){if(Kr===0){var e=Ja;e===0&&(e=wn,wn<<=1,(wn&261888)===0&&(wn=256)),Kr=e}return Kr}function Ig(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cl(""+e)}function qg(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function qb(e,t,i,l,d){if(t==="submit"&&i&&i.stateNode===d){var f=Ig((d[Ft]||null).action),b=l.submitter;b&&(t=(t=b[Ft]||null)?Ig(t.formAction):b.getAttribute("formAction"),t!==null&&(f=t,b=null));var _=new fl("action","action",null,l,d);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Kr!==0){var k=b?qg(d,b):new FormData(d);au(i,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(_.preventDefault(),k=b?qg(d,b):new FormData(d),au(i,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var Iu=0;Iu<wc.length;Iu++){var qu=wc[Iu],$b=qu.toLowerCase(),Hb=qu[0].toUpperCase()+qu.slice(1);$n($b,"on"+Hb)}$n(vf,"onAnimationEnd"),$n(yf,"onAnimationIteration"),$n(bf,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(ab,"onTransitionRun"),$n(ib,"onTransitionStart"),$n(sb,"onTransitionCancel"),$n(xf,"onTransitionEnd"),Ua("onMouseEnter",["mouseout","mouseover"]),Ua("onMouseLeave",["mouseout","mouseover"]),Ua("onPointerEnter",["pointerout","pointerover"]),Ua("onPointerLeave",["pointerout","pointerover"]),ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function $g(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var b=l.length-1;0<=b;b--){var _=l[b],k=_.instance,K=_.currentTarget;if(_=_.listener,k!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=K;try{f(d)}catch(te){ml(te)}d.currentTarget=null,f=k}else for(b=0;b<l.length;b++){if(_=l[b],k=_.instance,K=_.currentTarget,_=_.listener,k!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=K;try{f(d)}catch(te){ml(te)}d.currentTarget=null,f=k}}}}function ze(e,t){var i=t[Zo];i===void 0&&(i=t[Zo]=new Set);var l=e+"__bubble";i.has(l)||(Hg(t,e,2,!1),i.add(l))}function $u(e,t,i){var l=0;t&&(l|=4),Hg(i,e,l,t)}var no="_reactListening"+Math.random().toString(36).slice(2);function Hu(e){if(!e[no]){e[no]=!0,Uh.forEach(function(i){i!=="selectionchange"&&(Gb.has(i)||$u(i,!1,e),$u(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[no]||(t[no]=!0,$u("selectionchange",!1,t))}}function Hg(e,t,i,l){switch(vm(t)){case 2:var d=vx;break;case 8:d=yx;break;default:d=rd}i=d.bind(null,t,i,e),d=void 0,!oc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function Gu(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var _=l.stateNode.containerInfo;if(_===d)break;if(b===4)for(b=l.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;_!==null;){if(b=Na(_),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){l=f=b;continue e}_=_.parentNode}}l=l.return}Yh(function(){var K=f,te=sc(i),ae=[];e:{var X=wf.get(e);if(X!==void 0){var Z=fl,he=e;switch(e){case"keypress":if(dl(i)===0)break e;case"keydown":case"keyup":Z=M0;break;case"focusin":he="focus",Z=hc;break;case"focusout":he="blur",Z=hc;break;case"beforeblur":case"afterblur":Z=hc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=I0;break;case vf:case yf:case bf:Z=R0;break;case xf:Z=$0;break;case"scroll":case"scrollend":Z=S0;break;case"wheel":Z=G0;break;case"copy":case"cut":case"paste":Z=A0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Fh;break;case"toggle":case"beforetoggle":Z=V0}var be=(t&4)!==0,We=!be&&(e==="scroll"||e==="scrollend"),P=be?X!==null?X+"Capture":null:X;be=[];for(var M=K,Y;M!==null;){var re=M;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||P===null||(re=zi(M,P),re!=null&&be.push(ps(M,re,Y))),We)break;M=M.return}0<be.length&&(X=new Z(X,he,null,i,te),ae.push({event:X,listeners:be}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",X&&i!==ic&&(he=i.relatedTarget||i.fromElement)&&(Na(he)||he[Oa]))break e;if((Z||X)&&(X=te.window===te?te:(X=te.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(he=i.relatedTarget||i.toElement,Z=K,he=he?Na(he):null,he!==null&&(We=u(he),be=he.tag,he!==We||be!==5&&be!==27&&be!==6)&&(he=null)):(Z=null,he=K),Z!==he)){if(be=Xh,re="onMouseLeave",P="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(be=Fh,re="onPointerLeave",P="onPointerEnter",M="pointer"),We=Z==null?X:Ui(Z),Y=he==null?X:Ui(he),X=new be(re,M+"leave",Z,i,te),X.target=We,X.relatedTarget=Y,re=null,Na(te)===K&&(be=new be(P,M+"enter",he,i,te),be.target=Y,be.relatedTarget=We,re=be),We=re,Z&&he)t:{for(be=Pb,P=Z,M=he,Y=0,re=P;re;re=be(re))Y++;re=0;for(var ye=M;ye;ye=be(ye))re++;for(;0<Y-re;)P=be(P),Y--;for(;0<re-Y;)M=be(M),re--;for(;Y--;){if(P===M||M!==null&&P===M.alternate){be=P;break t}P=be(P),M=be(M)}be=null}else be=null;Z!==null&&Gg(ae,X,Z,be,!1),he!==null&&We!==null&&Gg(ae,We,he,be,!0)}}e:{if(X=K?Ui(K):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var qe=sf;else if(rf(X))if(lf)qe=tb;else{qe=Z0;var ge=W0}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&ac(K.elementType)&&(qe=sf):qe=eb;if(qe&&(qe=qe(e,K))){af(ae,qe,i,te);break e}ge&&ge(e,X,K),e==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&rc(X,"number",X.value)}switch(ge=K?Ui(K):window,e){case"focusin":(rf(ge)||ge.contentEditable==="true")&&(qa=ge,yc=K,Gi=null);break;case"focusout":Gi=yc=qa=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,gf(ae,i,te);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":gf(ae,i,te)}var Ae;if(pc)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ia?tf(e,i)&&(Le="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(Wh&&i.locale!=="ko"&&(Ia||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ia&&(Ae=Kh()):(Nr=te,cc="value"in Nr?Nr.value:Nr.textContent,Ia=!0)),ge=ro(K,Le),0<ge.length&&(Le=new Qh(Le,e,null,i,te),ae.push({event:Le,listeners:ge}),Ae?Le.data=Ae:(Ae=nf(i),Ae!==null&&(Le.data=Ae)))),(Ae=K0?J0(e,i):X0(e,i))&&(Le=ro(K,"onBeforeInput"),0<Le.length&&(ge=new Qh("onBeforeInput","beforeinput",null,i,te),ae.push({event:ge,listeners:Le}),ge.data=Ae)),qb(ae,e,K,i,te)}$g(ae,t)})}function ps(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ro(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=zi(e,i),d!=null&&l.unshift(ps(e,d,f)),d=zi(e,t),d!=null&&l.push(ps(e,d,f))),e.tag===3)return l;e=e.return}return[]}function Pb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gg(e,t,i,l,d){for(var f=t._reactName,b=[];i!==null&&i!==l;){var _=i,k=_.alternate,K=_.stateNode;if(_=_.tag,k!==null&&k===l)break;_!==5&&_!==26&&_!==27||K===null||(k=K,d?(K=zi(i,f),K!=null&&b.unshift(ps(i,K,k))):d||(K=zi(i,f),K!=null&&b.push(ps(i,K,k)))),i=i.return}b.length!==0&&e.push({event:t,listeners:b})}var Vb=/\r\n?/g,Yb=/\u0000|\uFFFD/g;function Pg(e){return(typeof e=="string"?e:""+e).replace(Vb,`
`).replace(Yb,"")}function Vg(e,t){return t=Pg(t),Pg(e)===t}function Fe(e,t,i,l,d,f){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ma(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ma(e,""+l);break;case"className":ll(e,"class",l);break;case"tabIndex":ll(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,i,l);break;case"style":Ph(e,l,f);break;case"data":if(t!=="object"){ll(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=cl(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Fe(e,t,"name",d.name,d,null),Fe(e,t,"formEncType",d.formEncType,d,null),Fe(e,t,"formMethod",d.formMethod,d,null),Fe(e,t,"formTarget",d.formTarget,d,null)):(Fe(e,t,"encType",d.encType,d,null),Fe(e,t,"method",d.method,d,null),Fe(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=cl(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=lr);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=cl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":ze("beforetoggle",e),ze("toggle",e),sl(e,"popover",l);break;case"xlinkActuate":sr(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":sr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":sr(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":sr(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":sr(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":sr(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":sr(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":sr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":sr(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":sl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=x0.get(i)||i,sl(e,i,l))}}function Pu(e,t,i,l,d,f){switch(i){case"style":Ph(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Ma(e,l):(typeof l=="number"||typeof l=="bigint")&&Ma(e,""+l);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"onClick":l!=null&&(e.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),t=i.slice(2,d?i.length-7:void 0),f=e[Ft]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,d);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):sl(e,i,l)}}}function Mt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var l=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var b=i[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Fe(e,t,f,b,i,null)}}d&&Fe(e,t,"srcSet",i.srcSet,i,null),l&&Fe(e,t,"src",i.src,i,null);return;case"input":ze("invalid",e);var _=f=b=d=null,k=null,K=null;for(l in i)if(i.hasOwnProperty(l)){var te=i[l];if(te!=null)switch(l){case"name":d=te;break;case"type":b=te;break;case"checked":k=te;break;case"defaultChecked":K=te;break;case"value":f=te;break;case"defaultValue":_=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,t));break;default:Fe(e,t,l,te,i,null)}}qh(e,f,_,k,K,b,d,!1);return;case"select":ze("invalid",e),l=b=f=null;for(d in i)if(i.hasOwnProperty(d)&&(_=i[d],_!=null))switch(d){case"value":f=_;break;case"defaultValue":b=_;break;case"multiple":l=_;default:Fe(e,t,d,_,i,null)}t=f,i=b,e.multiple=!!l,t!=null?za(e,!!l,t,!1):i!=null&&za(e,!!l,i,!0);return;case"textarea":ze("invalid",e),f=d=l=null;for(b in i)if(i.hasOwnProperty(b)&&(_=i[b],_!=null))switch(b){case"value":l=_;break;case"defaultValue":d=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Fe(e,t,b,_,i,null)}Hh(e,l,d,f);return;case"option":for(k in i)i.hasOwnProperty(k)&&(l=i[k],l!=null)&&(k==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Fe(e,t,k,l,i,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(l=0;l<fs.length;l++)ze(fs[l],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in i)if(i.hasOwnProperty(K)&&(l=i[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Fe(e,t,K,l,i,null)}return;default:if(ac(t)){for(te in i)i.hasOwnProperty(te)&&(l=i[te],l!==void 0&&Pu(e,t,te,l,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(l=i[_],l!=null&&Fe(e,t,_,l,i,null))}function Kb(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,_=null,k=null,K=null,te=null;for(Z in i){var ae=i[Z];if(i.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=ae;default:l.hasOwnProperty(Z)||Fe(e,t,Z,null,l,ae)}}for(var X in l){var Z=l[X];if(ae=i[X],l.hasOwnProperty(X)&&(Z!=null||ae!=null))switch(X){case"type":f=Z;break;case"name":d=Z;break;case"checked":K=Z;break;case"defaultChecked":te=Z;break;case"value":b=Z;break;case"defaultValue":_=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,t));break;default:Z!==ae&&Fe(e,t,X,Z,l,ae)}}nc(e,b,_,k,K,te,f,d);return;case"select":Z=b=_=X=null;for(f in i)if(k=i[f],i.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":Z=k;default:l.hasOwnProperty(f)||Fe(e,t,f,null,l,k)}for(d in l)if(f=l[d],k=i[d],l.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":X=f;break;case"defaultValue":_=f;break;case"multiple":b=f;default:f!==k&&Fe(e,t,d,f,l,k)}t=_,i=b,l=Z,X!=null?za(e,!!i,X,!1):!!l!=!!i&&(t!=null?za(e,!!i,t,!0):za(e,!!i,i?[]:"",!1));return;case"textarea":Z=X=null;for(_ in i)if(d=i[_],i.hasOwnProperty(_)&&d!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Fe(e,t,_,null,l,d)}for(b in l)if(d=l[b],f=i[b],l.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":X=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&Fe(e,t,b,d,l,f)}$h(e,X,Z);return;case"option":for(var he in i)X=i[he],i.hasOwnProperty(he)&&X!=null&&!l.hasOwnProperty(he)&&(he==="selected"?e.selected=!1:Fe(e,t,he,null,l,X));for(k in l)X=l[k],Z=i[k],l.hasOwnProperty(k)&&X!==Z&&(X!=null||Z!=null)&&(k==="selected"?e.selected=X&&typeof X!="function"&&typeof X!="symbol":Fe(e,t,k,X,l,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in i)X=i[be],i.hasOwnProperty(be)&&X!=null&&!l.hasOwnProperty(be)&&Fe(e,t,be,null,l,X);for(K in l)if(X=l[K],Z=i[K],l.hasOwnProperty(K)&&X!==Z&&(X!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:Fe(e,t,K,X,l,Z)}return;default:if(ac(t)){for(var We in i)X=i[We],i.hasOwnProperty(We)&&X!==void 0&&!l.hasOwnProperty(We)&&Pu(e,t,We,void 0,l,X);for(te in l)X=l[te],Z=i[te],!l.hasOwnProperty(te)||X===Z||X===void 0&&Z===void 0||Pu(e,t,te,X,l,Z);return}}for(var P in i)X=i[P],i.hasOwnProperty(P)&&X!=null&&!l.hasOwnProperty(P)&&Fe(e,t,P,null,l,X);for(ae in l)X=l[ae],Z=i[ae],!l.hasOwnProperty(ae)||X===Z||X==null&&Z==null||Fe(e,t,ae,X,l,Z)}function Yg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var d=i[l],f=d.transferSize,b=d.initiatorType,_=d.duration;if(f&&_&&Yg(b)){for(b=0,_=d.responseEnd,l+=1;l<i.length;l++){var k=i[l],K=k.startTime;if(K>_)break;var te=k.transferSize,ae=k.initiatorType;te&&Yg(ae)&&(k=k.responseEnd,b+=te*(k<_?1:(_-K)/(k-K)))}if(--l,t+=8*(f+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vu=null,Yu=null;function ao(e){return e.nodeType===9?e:e.ownerDocument}function Kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ju=null;function Xb(){var e=window.event;return e&&e.type==="popstate"?e===Ju?!1:(Ju=e,!0):(Ju=null,!1)}var Xg=typeof setTimeout=="function"?setTimeout:void 0,Qb=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,Fb=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(e){return Qg.resolve(null).then(e).catch(Wb)}:Xg;function Wb(e){setTimeout(function(){throw e})}function Jr(e){return e==="head"}function Fg(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(d),fi(t);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")gs(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,gs(i);for(var f=i.firstChild;f;){var b=f.nextSibling,_=f.nodeName;f[ki]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=b}}else i==="body"&&gs(e.ownerDocument.body);i=d}while(i);fi(t)}function Wg(e,t){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Xu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Xu(i),ec(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Zb(e,t,i,l){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ki])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function ex(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=kn(e.nextSibling),e===null))return null;return e}function Zg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=kn(e.nextSibling),e===null))return null;return e}function Qu(e){return e.data==="$?"||e.data==="$~"}function Fu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function tx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Wu=null;function em(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return kn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function tm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function nm(e,t,i){switch(t=ao(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ec(e)}var Un=new Map,rm=new Set;function io(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _r=V.d;V.d={f:nx,r:rx,D:ax,C:ix,L:sx,m:lx,X:cx,S:ox,M:ux};function nx(){var e=_r.f(),t=Ql();return e||t}function rx(e){var t=Da(e);t!==null&&t.tag===5&&t.type==="form"?xp(t):_r.r(e)}var ui=typeof document>"u"?null:document;function am(e,t,i){var l=ui;if(l&&typeof t=="string"&&t){var d=Cn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),rm.has(d)||(rm.add(d),e={rel:e,crossOrigin:i,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),Mt(t,"link",e),Tt(t),l.head.appendChild(t)))}}function ax(e){_r.D(e),am("dns-prefetch",e,null)}function ix(e,t){_r.C(e,t),am("preconnect",e,t)}function sx(e,t,i){_r.L(e,t,i);var l=ui;if(l&&e&&t){var d='link[rel="preload"][as="'+Cn(t)+'"]';t==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Cn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Cn(i.imageSizes)+'"]')):d+='[href="'+Cn(e)+'"]';var f=d;switch(t){case"style":f=di(e);break;case"script":f=hi(e)}Un.has(f)||(e=y({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Un.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(ms(f))||t==="script"&&l.querySelector(vs(f))||(t=l.createElement("link"),Mt(t,"link",e),Tt(t),l.head.appendChild(t)))}}function lx(e,t){_r.m(e,t);var i=ui;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Cn(l)+'"][href="'+Cn(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=hi(e)}if(!Un.has(f)&&(e=y({rel:"modulepreload",href:e},t),Un.set(f,e),i.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vs(f)))return}l=i.createElement("link"),Mt(l,"link",e),Tt(l),i.head.appendChild(l)}}}function ox(e,t,i){_r.S(e,t,i);var l=ui;if(l&&e){var d=ka(l).hoistableStyles,f=di(e);t=t||"default";var b=d.get(f);if(!b){var _={loading:0,preload:null};if(b=l.querySelector(ms(f)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Un.get(f))&&Zu(e,i);var k=b=l.createElement("link");Tt(k),Mt(k,"link",e),k._p=new Promise(function(K,te){k.onload=K,k.onerror=te}),k.addEventListener("load",function(){_.loading|=1}),k.addEventListener("error",function(){_.loading|=2}),_.loading|=4,so(b,t,l)}b={type:"stylesheet",instance:b,count:1,state:_},d.set(f,b)}}}function cx(e,t){_r.X(e,t);var i=ui;if(i&&e){var l=ka(i).hoistableScripts,d=hi(e),f=l.get(d);f||(f=i.querySelector(vs(d)),f||(e=y({src:e,async:!0},t),(t=Un.get(d))&&ed(e,t),f=i.createElement("script"),Tt(f),Mt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function ux(e,t){_r.M(e,t);var i=ui;if(i&&e){var l=ka(i).hoistableScripts,d=hi(e),f=l.get(d);f||(f=i.querySelector(vs(d)),f||(e=y({src:e,async:!0,type:"module"},t),(t=Un.get(d))&&ed(e,t),f=i.createElement("script"),Tt(f),Mt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function im(e,t,i,l){var d=(d=ue.current)?io(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=di(i.href),i=ka(d).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=di(i.href);var f=ka(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector(ms(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Un.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Un.set(e,i),f||dx(d,e,i,b.state))),t&&l===null)throw Error(s(528,""));return b}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=hi(i),i=ka(d).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function di(e){return'href="'+Cn(e)+'"'}function ms(e){return'link[rel="stylesheet"]['+e+"]"}function sm(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function dx(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Mt(t,"link",i),Tt(t),e.head.appendChild(t))}function hi(e){return'[src="'+Cn(e)+'"]'}function vs(e){return"script[async]"+e}function lm(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Cn(i.href)+'"]');if(l)return t.instance=l,Tt(l),l;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Tt(l),Mt(l,"style",d),so(l,i.precedence,e),t.instance=l;case"stylesheet":d=di(i.href);var f=e.querySelector(ms(d));if(f)return t.state.loading|=4,t.instance=f,Tt(f),f;l=sm(i),(d=Un.get(d))&&Zu(l,d),f=(e.ownerDocument||e).createElement("link"),Tt(f);var b=f;return b._p=new Promise(function(_,k){b.onload=_,b.onerror=k}),Mt(f,"link",l),t.state.loading|=4,so(f,i.precedence,e),t.instance=f;case"script":return f=hi(i.src),(d=e.querySelector(vs(f)))?(t.instance=d,Tt(d),d):(l=i,(d=Un.get(f))&&(l=y({},i),ed(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Tt(d),Mt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,so(l,i.precedence,e));return t.instance}function so(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,b=0;b<l.length;b++){var _=l[b];if(_.dataset.precedence===t)f=_;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ed(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lo=null;function om(e,t,i){if(lo===null){var l=new Map,d=lo=new Map;d.set(i,l)}else d=lo,l=d.get(i),l||(l=new Map,d.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[ki]||f[Dt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(t)||"";b=e+b;var _=l.get(b);_?_.push(f):l.set(b,[f])}}return l}function cm(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function hx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function um(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fx(e,t,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=di(l.href),f=t.querySelector(ms(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=oo.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,Tt(f);return}f=t.ownerDocument||t,l=sm(l),(d=Un.get(d))&&Zu(l,d),f=f.createElement("link"),Tt(f);var b=f;b._p=new Promise(function(_,k){b.onload=_,b.onerror=k}),Mt(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=oo.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var td=0;function px(e,t){return e.stylesheets&&e.count===0&&uo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&td===0&&(td=62500*Jb());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>td?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function oo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var co=null;function uo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,co=new Map,t.forEach(gx,e),co=null,oo.call(e))}function gx(e,t){if(!(t.state.loading&4)){var i=co.get(e);if(i)var l=i.get(null);else{i=new Map,co.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),l=b)}l&&i.set(null,l)}d=t.instance,b=d.getAttribute("data-precedence"),f=i.get(b)||l,f===l&&i.set(null,d),i.set(b,d),this.count++,l=oo.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var ys={$$typeof:D,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function mx(e,t,i,l,d,f,b,_,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.hiddenUpdates=Qt(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function dm(e,t,i,l,d,f,b,_,k,K,te,ae){return e=new mx(e,t,i,b,k,K,te,ae,_),t=1,f===!0&&(t|=24),f=cn(3,null,null,t),e.current=f,f.stateNode=e,t=Uc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:t},Bc(f),e}function hm(e){return e?(e=Ga,e):Ga}function fm(e,t,i,l,d,f){d=hm(d),l.context===null?l.context=d:l.pendingContext=d,l=Lr(t),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=Br(e,l,t),i!==null&&(rn(i,e,t),Qi(i,e,t))}function pm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function nd(e,t){pm(e,t),(e=e.alternate)&&pm(e,t)}function gm(e){if(e.tag===13||e.tag===31){var t=ca(e,67108864);t!==null&&rn(t,e,67108864),nd(e,67108864)}}function mm(e){if(e.tag===13||e.tag===31){var t=pn();t=ar(t);var i=ca(e,t);i!==null&&rn(i,e,t),nd(e,t)}}var ho=!0;function vx(e,t,i,l){var d=N.T;N.T=null;var f=V.p;try{V.p=2,rd(e,t,i,l)}finally{V.p=f,N.T=d}}function yx(e,t,i,l){var d=N.T;N.T=null;var f=V.p;try{V.p=8,rd(e,t,i,l)}finally{V.p=f,N.T=d}}function rd(e,t,i,l){if(ho){var d=ad(l);if(d===null)Gu(e,t,l,fo,i),ym(e,l);else if(xx(d,e,t,i,l))l.stopPropagation();else if(ym(e,l),t&4&&-1<bx.indexOf(e)){for(;d!==null;){var f=Da(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=dt(f.pendingLanes);if(b!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;b;){var k=1<<31-Re(b);_.entanglements[1]|=k,b&=~k}er(f),(Ge&6)===0&&(Jl=at()+500,hs(0))}}break;case 31:case 13:_=ca(f,2),_!==null&&rn(_,f,2),Ql(),nd(f,2)}if(f=ad(l),f===null&&Gu(e,t,l,fo,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else Gu(e,t,l,null,i)}}function ad(e){return e=sc(e),id(e)}var fo=null;function id(e){if(fo=null,e=Na(e),e!==null){var t=u(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fo=e,null}function vm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rr()){case de:return 2;case z:return 8;case se:case le:return 32;case Se:return 268435456;default:return 32}default:return 32}}var sd=!1,Xr=null,Qr=null,Fr=null,bs=new Map,xs=new Map,Wr=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ym(e,t){switch(e){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function ws(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Da(t),t!==null&&gm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function xx(e,t,i,l,d){switch(t){case"focusin":return Xr=ws(Xr,e,t,i,l,d),!0;case"dragenter":return Qr=ws(Qr,e,t,i,l,d),!0;case"mouseover":return Fr=ws(Fr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return bs.set(f,ws(bs.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,xs.set(f,ws(xs.get(f)||null,e,t,i,l,d)),!0}return!1}function bm(e){var t=Na(e.target);if(t!==null){var i=u(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,Or(e.priority,function(){mm(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,Or(e.priority,function(){mm(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=ad(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ic=l,i.target.dispatchEvent(l),ic=null}else return t=Da(i),t!==null&&gm(t),e.blockedOn=i,!1;t.shift()}return!0}function xm(e,t,i){po(e)&&i.delete(t)}function wx(){sd=!1,Xr!==null&&po(Xr)&&(Xr=null),Qr!==null&&po(Qr)&&(Qr=null),Fr!==null&&po(Fr)&&(Fr=null),bs.forEach(xm),xs.forEach(xm)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,sd||(sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wx)))}var mo=null;function wm(e){mo!==e&&(mo=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mo===e&&(mo=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(id(l||i)===null)continue;break}var f=Da(i);f!==null&&(e.splice(t,3),t-=3,au(f,{pending:!0,data:d,method:i.method,action:l},l,d))}}))}function fi(e){function t(k){return go(k,e)}Xr!==null&&go(Xr,e),Qr!==null&&go(Qr,e),Fr!==null&&go(Fr,e),bs.forEach(t),xs.forEach(t);for(var i=0;i<Wr.length;i++){var l=Wr[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Wr.length&&(i=Wr[0],i.blockedOn===null);)bm(i),i.blockedOn===null&&Wr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var d=i[l],f=i[l+1],b=d[Ft]||null;if(typeof f=="function")b||wm(i);else if(b){var _=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[Ft]||null)_=b.formAction;else if(id(d)!==null)continue}else _=b.action;typeof _=="function"?i[l+1]=_:(i.splice(l,3),l-=3),wm(i)}}}function Sm(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function ld(e){this._internalRoot=e}vo.prototype.render=ld.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=pn();fm(i,l,e,t,null,null)},vo.prototype.unmount=ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fm(e.current,2,null,e,null,null),Ql(),t[Oa]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=qn();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Wr.length&&t!==0&&t<Wr[i].priority;i++);Wr.splice(i,0,e),i===0&&bm(e)}};var _m=n.version;if(_m!=="19.2.3")throw Error(s(527,_m,"19.2.3"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Sx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yo.isDisabled&&yo.supportsFiber)try{ke=yo.inject(Sx),Pe=yo}catch{}}return _s.createRoot=function(e,t){if(!o(e))throw Error(s(299));var i=!1,l="",d=Op,f=Np,b=Dp;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=dm(e,1,!1,null,null,i,l,null,d,f,b,Sm),e[Oa]=t.current,Hu(e),new ld(t)},_s.hydrateRoot=function(e,t,i){if(!o(e))throw Error(s(299));var l=!1,d="",f=Op,b=Np,_=Dp,k=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.formState!==void 0&&(k=i.formState)),t=dm(e,1,!0,t,i??null,l,d,k,f,b,_,Sm),t.context=hm(null),i=t.current,l=pn(),l=ar(l),d=Lr(l),d.callback=null,Br(i,d,l),i=l,t.current.lanes=i,Sn(t,i),er(t),e[Oa]=t.current,Hu(e),new vo(t)},_s.version="19.2.3",_s}var km;function Nx(){if(km)return ud.exports;km=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),ud.exports=Ox(),ud.exports}var Dx=Nx();var Um="popstate";function kx(r={}){function n(s,o){let{pathname:u,search:h,hash:g}=s.location;return Yd("",{pathname:u,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(s,o){return typeof o=="string"?o:Us(o)}return zx(n,a,null,r)}function Et(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function Mn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ux(){return Math.random().toString(36).substring(2,10)}function zm(r,n){return{usr:r.state,key:r.key,idx:n}}function Yd(r,n,a=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?Ks(n):n,state:a,key:n&&n.key||s||Ux()}}function Us({pathname:r="/",search:n="",hash:a=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Ks(r){let n={};if(r){let a=r.indexOf("#");a>=0&&(n.hash=r.substring(a),r=r.substring(0,a));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function zx(r,n,a,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,g="POP",p=null,m=v();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function v(){return(h.state||{idx:null}).idx}function y(){g="POP";let R=v(),T=R==null?null:R-m;m=R,p&&p({action:g,location:E.location,delta:T})}function x(R,T){g="PUSH";let C=Yd(E.location,R,T);m=v()+1;let D=zm(C,m),J=E.createHref(C);try{h.pushState(D,"",J)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;o.location.assign(J)}u&&p&&p({action:g,location:E.location,delta:1})}function w(R,T){g="REPLACE";let C=Yd(E.location,R,T);m=v();let D=zm(C,m),J=E.createHref(C);h.replaceState(D,"",J),u&&p&&p({action:g,location:E.location,delta:0})}function S(R){return Mx(R)}let E={get action(){return g},get location(){return r(o,h)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Um,y),p=R,()=>{o.removeEventListener(Um,y),p=null}},createHref(R){return n(o,R)},createURL:S,encodeLocation(R){let T=S(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:w,go(R){return h.go(R)}};return E}function Mx(r,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Et(a,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Us(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function Jv(r,n,a="/"){return Lx(r,n,a,!1)}function Lx(r,n,a,s){let o=typeof n=="string"?Ks(n):n,u=Cr(o.pathname||"/",a);if(u==null)return null;let h=Xv(r);Bx(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let m=Xx(u);g=Kx(h[p],m,s)}return g}function Xv(r,n=[],a=[],s="",o=!1){let u=(h,g,p=o,m)=>{let v={relativePath:m===void 0?h.path||"":m,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&p)return;Et(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let y=Er([s,v.relativePath]),x=a.concat(v);h.children&&h.children.length>0&&(Et(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Xv(h.children,n,x,y,p)),!(h.path==null&&!h.index)&&n.push({path:y,score:Vx(y,h.index),routesMeta:x})};return r.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))u(h,g);else for(let p of Qv(h.path))u(h,g,!0,p)}),n}function Qv(r){let n=r.split("/");if(n.length===0)return[];let[a,...s]=n,o=a.endsWith("?"),u=a.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Qv(s.join("/")),g=[];return g.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&g.push(...h),g.map(p=>r.startsWith("/")&&p===""?"/":p)}function Bx(r){r.sort((n,a)=>n.score!==a.score?a.score-n.score:Yx(n.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Ix=/^:[\w-]+$/,qx=3,$x=2,Hx=1,Gx=10,Px=-2,Mm=r=>r==="*";function Vx(r,n){let a=r.split("/"),s=a.length;return a.some(Mm)&&(s+=Px),n&&(s+=$x),a.filter(o=>!Mm(o)).reduce((o,u)=>o+(Ix.test(u)?qx:u===""?Hx:Gx),s)}function Yx(r,n){return r.length===n.length&&r.slice(0,-1).every((s,o)=>s===n[o])?r[r.length-1]-n[n.length-1]:0}function Kx(r,n,a=!1){let{routesMeta:s}=r,o={},u="/",h=[];for(let g=0;g<s.length;++g){let p=s[g],m=g===s.length-1,v=u==="/"?n:n.slice(u.length)||"/",y=Oo({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),x=p.route;if(!y&&m&&a&&!s[s.length-1].route.index&&(y=Oo({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!y)return null;Object.assign(o,y.params),h.push({params:o,pathname:Er([u,y.pathname]),pathnameBase:Zx(Er([u,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(u=Er([u,y.pathnameBase]))}return h}function Oo(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,s]=Jx(r.path,r.caseSensitive,r.end),o=n.match(a);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:s.reduce((m,{paramName:v,isOptional:y},x)=>{if(v==="*"){let S=g[x]||"";h=u.slice(0,u.length-S.length).replace(/(.)\/+$/,"$1")}const w=g[x];return y&&!w?m[v]=void 0:m[v]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:h,pattern:r}}function Jx(r,n=!1,a=!0){Mn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(s.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),s]}function Xx(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Mn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function Cr(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,s=r.charAt(a);return s&&s!=="/"?null:r.slice(a)||"/"}var Fv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qx=r=>Fv.test(r);function Fx(r,n="/"){let{pathname:a,search:s="",hash:o=""}=typeof r=="string"?Ks(r):r,u;if(a)if(Qx(a))u=a;else{if(a.includes("//")){let h=a;a=a.replace(/\/\/+/g,"/"),Mn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${a}`)}a.startsWith("/")?u=Lm(a.substring(1),"/"):u=Lm(a,n)}else u=n;return{pathname:u,search:ew(s),hash:tw(o)}}function Lm(r,n){let a=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function pd(r,n,a,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wx(r){return r.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function Wv(r){let n=Wx(r);return n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase)}function Zv(r,n,a,s=!1){let o;typeof r=="string"?o=Ks(r):(o={...r},Et(!o.pathname||!o.pathname.includes("?"),pd("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),pd("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),pd("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,g;if(h==null)g=a;else{let y=n.length-1;if(!s&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),y-=1;o.pathname=x.join("/")}g=y>=0?n[y]:"/"}let p=Fx(o,g),m=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}var Er=r=>r.join("/").replace(/\/\/+/g,"/"),Zx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ew=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,tw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,nw=class{constructor(r,n,a,s=!1){this.status=r,this.statusText=n||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function rw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function aw(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ey=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ty(r,n){let a=r;if(typeof a!="string"||!Fv.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,o=!1;if(ey)try{let u=new URL(window.location.href),h=a.startsWith("//")?new URL(u.protocol+a):new URL(a),g=Cr(h.pathname,n);h.origin===u.origin&&g!=null?a=g+h.search+h.hash:o=!0}catch{Mn(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ny=["POST","PUT","PATCH","DELETE"];new Set(ny);var iw=["GET",...ny];new Set(iw);var Ti=j.createContext(null);Ti.displayName="DataRouter";var $o=j.createContext(null);$o.displayName="DataRouterState";var sw=j.createContext(!1),ry=j.createContext({isTransitioning:!1});ry.displayName="ViewTransition";var lw=j.createContext(new Map);lw.displayName="Fetchers";var ow=j.createContext(null);ow.displayName="Await";var Bn=j.createContext(null);Bn.displayName="Navigation";var Ho=j.createContext(null);Ho.displayName="Location";var Rr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var dh=j.createContext(null);dh.displayName="RouteError";var ay="REACT_ROUTER_ERROR",cw="REDIRECT",uw="ROUTE_ERROR_RESPONSE";function dw(r){if(r.startsWith(`${ay}:${cw}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function hw(r){if(r.startsWith(`${ay}:${uw}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new nw(n.status,n.statusText,n.data)}catch{}}function fw(r,{relative:n}={}){Et(Js(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=j.useContext(Bn),{hash:o,pathname:u,search:h}=Xs(r,{relative:n}),g=u;return a!=="/"&&(g=u==="/"?a:Er([a,u])),s.createHref({pathname:g,search:h,hash:o})}function Js(){return j.useContext(Ho)!=null}function Tr(){return Et(Js(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Ho).location}var iy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sy(r){j.useContext(Bn).static||j.useLayoutEffect(r)}function ly(){let{isDataRoute:r}=j.useContext(Rr);return r?Cw():pw()}function pw(){Et(Js(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(Ti),{basename:n,navigator:a}=j.useContext(Bn),{matches:s}=j.useContext(Rr),{pathname:o}=Tr(),u=JSON.stringify(Wv(s)),h=j.useRef(!1);return sy(()=>{h.current=!0}),j.useCallback((p,m={})=>{if(Mn(h.current,iy),!h.current)return;if(typeof p=="number"){a.go(p);return}let v=Zv(p,JSON.parse(u),o,m.relative==="path");r==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Er([n,v.pathname])),(m.replace?a.replace:a.push)(v,m.state,m)},[n,a,u,o,r])}j.createContext(null);function Xs(r,{relative:n}={}){let{matches:a}=j.useContext(Rr),{pathname:s}=Tr(),o=JSON.stringify(Wv(a));return j.useMemo(()=>Zv(r,JSON.parse(o),s,n==="path"),[r,o,s,n])}function gw(r,n,a,s,o){Et(Js(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Bn),{matches:h}=j.useContext(Rr),g=h[h.length-1],p=g?g.params:{},m=g?g.pathname:"/",v=g?g.pathnameBase:"/",y=g&&g.route;{let C=y&&y.path||"";cy(m,!y||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let x=Tr(),w;w=x;let S=w.pathname||"/",E=S;if(v!=="/"){let C=v.replace(/^\//,"").split("/");E="/"+S.replace(/^\//,"").split("/").slice(C.length).join("/")}let R=Jv(r,{pathname:E});return Mn(y||R!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Mn(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),xw(R&&R.map(C=>Object.assign({},C,{params:Object.assign({},p,C.params),pathname:Er([v,u.encodeLocation?u.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?v:Er([v,u.encodeLocation?u.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),h,a,s,o)}function mw(){let r=Ew(),n=rw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},n),a?j.createElement("pre",{style:o},a):null,h)}var vw=j.createElement(mw,null),oy=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const a=hw(r.digest);a&&(r=a)}let n=r!==void 0?j.createElement(Rr.Provider,{value:this.props.routeContext},j.createElement(dh.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?j.createElement(yw,{error:r},n):n}};oy.contextType=sw;var gd=new WeakMap;function yw({children:r,error:n}){let{basename:a}=j.useContext(Bn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=dw(n.digest);if(s){let o=gd.get(n);if(o)throw o;let u=ty(s.location,a);if(ey&&!gd.get(n))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw gd.set(n,h),h}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function bw({routeContext:r,match:n,children:a}){let s=j.useContext(Ti);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Rr.Provider,{value:r},a)}function xw(r,n=[],a=null,s=null,o=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let u=r,h=a?.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);Et(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let g=!1,p=-1;if(a)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:x,errors:w}=a,S=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||S){g=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let m=a&&s?(v,y)=>{s(v,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:aw(a.matches),errorInfo:y})}:void 0;return u.reduceRight((v,y,x)=>{let w,S=!1,E=null,R=null;a&&(w=h&&y.route.id?h[y.route.id]:void 0,E=y.route.errorElement||vw,g&&(p<0&&x===0?(cy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,R=null):p===x&&(S=!0,R=y.route.hydrateFallbackElement||null)));let T=n.concat(u.slice(0,x+1)),C=()=>{let D;return w?D=E:S?D=R:y.route.Component?D=j.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=v,j.createElement(bw,{match:y,routeContext:{outlet:v,matches:T,isDataRoute:a!=null},children:D})};return a&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?j.createElement(oy,{location:a.location,revalidation:a.revalidation,component:E,error:w,children:C(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:m}):C()},null)}function hh(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ww(r){let n=j.useContext(Ti);return Et(n,hh(r)),n}function Sw(r){let n=j.useContext($o);return Et(n,hh(r)),n}function _w(r){let n=j.useContext(Rr);return Et(n,hh(r)),n}function fh(r){let n=_w(r),a=n.matches[n.matches.length-1];return Et(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function jw(){return fh("useRouteId")}function Ew(){let r=j.useContext(dh),n=Sw("useRouteError"),a=fh("useRouteError");return r!==void 0?r:n.errors?.[a]}function Cw(){let{router:r}=ww("useNavigate"),n=fh("useNavigate"),a=j.useRef(!1);return sy(()=>{a.current=!0}),j.useCallback(async(o,u={})=>{Mn(a.current,iy),a.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:n,...u}))},[r,n])}var Bm={};function cy(r,n,a){!n&&!Bm[r]&&(Bm[r]=!0,Mn(!1,a))}j.memo(Rw);function Rw({routes:r,future:n,state:a,onError:s}){return gw(r,void 0,a,s,n)}function Tw({basename:r="/",children:n=null,location:a,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:h}){Et(!Js(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=r.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:g,navigator:o,static:u,unstable_useTransitions:h,future:{}}),[g,o,u,h]);typeof a=="string"&&(a=Ks(a));let{pathname:m="/",search:v="",hash:y="",state:x=null,key:w="default"}=a,S=j.useMemo(()=>{let E=Cr(m,g);return E==null?null:{location:{pathname:E,search:v,hash:y,state:x,key:w},navigationType:s}},[g,m,v,y,x,w,s]);return Mn(S!=null,`<Router basename="${g}"> is not able to match the URL "${m}${v}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:j.createElement(Bn.Provider,{value:p},j.createElement(Ho.Provider,{children:n,value:S}))}var Ro="get",To="application/x-www-form-urlencoded";function Go(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Aw(r){return Go(r)&&r.tagName.toLowerCase()==="button"}function Ow(r){return Go(r)&&r.tagName.toLowerCase()==="form"}function Nw(r){return Go(r)&&r.tagName.toLowerCase()==="input"}function Dw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function kw(r,n){return r.button===0&&(!n||n==="_self")&&!Dw(r)}function Kd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((n,a)=>{let s=r[a];return n.concat(Array.isArray(s)?s.map(o=>[a,o]):[[a,s]])},[]))}function Uw(r,n){let a=Kd(r);return n&&n.forEach((s,o)=>{a.has(o)||n.getAll(o).forEach(u=>{a.append(o,u)})}),a}var bo=null;function zw(){if(bo===null)try{new FormData(document.createElement("form"),0),bo=!1}catch{bo=!0}return bo}var Mw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function md(r){return r!=null&&!Mw.has(r)?(Mn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${To}"`),null):r}function Lw(r,n){let a,s,o,u,h;if(Ow(r)){let g=r.getAttribute("action");s=g?Cr(g,n):null,a=r.getAttribute("method")||Ro,o=md(r.getAttribute("enctype"))||To,u=new FormData(r)}else if(Aw(r)||Nw(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||g.getAttribute("action");if(s=p?Cr(p,n):null,a=r.getAttribute("formmethod")||g.getAttribute("method")||Ro,o=md(r.getAttribute("formenctype"))||md(g.getAttribute("enctype"))||To,u=new FormData(g,r),!zw()){let{name:m,type:v,value:y}=r;if(v==="image"){let x=m?`${m}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else m&&u.append(m,y)}}else{if(Go(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ro,s=null,o=To,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:a.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ph(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function Bw(r,n,a){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${a}`:n&&Cr(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function Iw(r,n){if(r.id in n)return n[r.id];try{let a=await import(r.module);return n[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function $w(r,n,a){let s=await Promise.all(r.map(async o=>{let u=n.routes[o.route.id];if(u){let h=await Iw(u,a);return h.links?h.links():[]}return[]}));return Vw(s.flat(1).filter(qw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Im(r,n,a,s,o,u){let h=(p,m)=>a[m]?p.route.id!==a[m].route.id:!0,g=(p,m)=>a[m].pathname!==p.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==p.params["*"];return u==="assets"?n.filter((p,m)=>h(p,m)||g(p,m)):u==="data"?n.filter((p,m)=>{let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,m)||g(p,m))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Hw(r,n,{includeHydrateFallback:a}={}){return Gw(r.map(s=>{let o=n.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Gw(r){return[...new Set(r)]}function Pw(r){let n={},a=Object.keys(r).sort();for(let s of a)n[s]=r[s];return n}function Vw(r,n){let a=new Set;return new Set(n),r.reduce((s,o)=>{let u=JSON.stringify(Pw(o));return a.has(u)||(a.add(u),s.push({key:u,link:o})),s},[])}function uy(){let r=j.useContext(Ti);return ph(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Yw(){let r=j.useContext($o);return ph(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var gh=j.createContext(void 0);gh.displayName="FrameworkContext";function dy(){let r=j.useContext(gh);return ph(r,"You must render this element inside a <HydratedRouter> element"),r}function Kw(r,n){let a=j.useContext(gh),[s,o]=j.useState(!1),[u,h]=j.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:m,onMouseLeave:v,onTouchStart:y}=n,x=j.useRef(null);j.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let E=T=>{T.forEach(C=>{h(C.isIntersecting)})},R=new IntersectionObserver(E,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[r]),j.useEffect(()=>{if(s){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[s]);let w=()=>{o(!0)},S=()=>{o(!1),h(!1)};return a?r!=="intent"?[u,x,{}]:[u,x,{onFocus:js(g,w),onBlur:js(p,S),onMouseEnter:js(m,w),onMouseLeave:js(v,S),onTouchStart:js(y,w)}]:[!1,x,{}]}function js(r,n){return a=>{r&&r(a),a.defaultPrevented||n(a)}}function Jw({page:r,...n}){let{router:a}=uy(),s=j.useMemo(()=>Jv(a.routes,r,a.basename),[a.routes,r,a.basename]);return s?j.createElement(Qw,{page:r,matches:s,...n}):null}function Xw(r){let{manifest:n,routeModules:a}=dy(),[s,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return $w(r,n,a).then(h=>{u||o(h)}),()=>{u=!0}},[r,n,a]),s}function Qw({page:r,matches:n,...a}){let s=Tr(),{manifest:o,routeModules:u}=dy(),{basename:h}=uy(),{loaderData:g,matches:p}=Yw(),m=j.useMemo(()=>Im(r,n,p,o,s,"data"),[r,n,p,o,s]),v=j.useMemo(()=>Im(r,n,p,o,s,"assets"),[r,n,p,o,s]),y=j.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let S=new Set,E=!1;if(n.forEach(T=>{let C=o.routes[T.route.id];!C||!C.hasLoader||(!m.some(D=>D.route.id===T.route.id)&&T.route.id in g&&u[T.route.id]?.shouldRevalidate||C.hasClientLoader?E=!0:S.add(T.route.id))}),S.size===0)return[];let R=Bw(r,h,"data");return E&&S.size>0&&R.searchParams.set("_routes",n.filter(T=>S.has(T.route.id)).map(T=>T.route.id).join(",")),[R.pathname+R.search]},[h,g,s,o,m,n,r,u]),x=j.useMemo(()=>Hw(v,o),[v,o]),w=Xw(v);return j.createElement(j.Fragment,null,y.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...a})),x.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...a})),w.map(({key:S,link:E})=>j.createElement("link",{key:S,nonce:a.nonce,...E})))}function Fw(...r){return n=>{r.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var Ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ww&&(window.__reactRouterVersion="7.11.0")}catch{}function Zw({basename:r,children:n,unstable_useTransitions:a,window:s}){let o=j.useRef();o.current==null&&(o.current=kx({window:s,v5Compat:!0}));let u=o.current,[h,g]=j.useState({action:u.action,location:u.location}),p=j.useCallback(m=>{a===!1?g(m):j.startTransition(()=>g(m))},[a]);return j.useLayoutEffect(()=>u.listen(p),[u,p]),j.createElement(Tw,{basename:r,children:n,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:a})}var hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fy=j.forwardRef(function({onClick:n,discover:a="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:g,target:p,to:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},S){let{basename:E,unstable_useTransitions:R}=j.useContext(Bn),T=typeof m=="string"&&hy.test(m),C=ty(m,E);m=C.to;let D=fw(m,{relative:o}),[J,G,$]=Kw(s,w),U=rS(m,{replace:h,state:g,target:p,preventScrollReset:v,relative:o,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:R});function L(Q){n&&n(Q),Q.defaultPrevented||U(Q)}let q=j.createElement("a",{...w,...$,href:C.absoluteURL||D,onClick:C.isExternal||u?n:L,ref:Fw(S,G),target:p,"data-discover":!T&&a==="render"?"true":void 0});return J&&!T?j.createElement(j.Fragment,null,q,j.createElement(Jw,{page:D})):q});fy.displayName="Link";var eS=j.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:g,children:p,...m},v){let y=Xs(h,{relative:m.relative}),x=Tr(),w=j.useContext($o),{navigator:S,basename:E}=j.useContext(Bn),R=w!=null&&cS(y)&&g===!0,T=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,C=x.pathname,D=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(C=C.toLowerCase(),D=D?D.toLowerCase():null,T=T.toLowerCase()),D&&E&&(D=Cr(D,E)||D);const J=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let G=C===T||!o&&C.startsWith(T)&&C.charAt(J)==="/",$=D!=null&&(D===T||!o&&D.startsWith(T)&&D.charAt(T.length)==="/"),U={isActive:G,isPending:$,isTransitioning:R},L=G?n:void 0,q;typeof s=="function"?q=s(U):q=[s,G?"active":null,$?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let Q=typeof u=="function"?u(U):u;return j.createElement(fy,{...m,"aria-current":L,className:q,ref:v,style:Q,to:h,viewTransition:g},typeof p=="function"?p(U):p)});eS.displayName="NavLink";var tS=j.forwardRef(({discover:r="render",fetcherKey:n,navigate:a,reloadDocument:s,replace:o,state:u,method:h=Ro,action:g,onSubmit:p,relative:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},S)=>{let{unstable_useTransitions:E}=j.useContext(Bn),R=lS(),T=oS(g,{relative:m}),C=h.toLowerCase()==="get"?"get":"post",D=typeof g=="string"&&hy.test(g),J=G=>{if(p&&p(G),G.defaultPrevented)return;G.preventDefault();let $=G.nativeEvent.submitter,U=$?.getAttribute("formmethod")||h,L=()=>R($||G.currentTarget,{fetcherKey:n,method:U,navigate:a,replace:o,state:u,relative:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x});E&&a!==!1?j.startTransition(()=>L()):L()};return j.createElement("form",{ref:S,method:C,action:T,onSubmit:s?p:J,...w,"data-discover":!D&&r==="render"?"true":void 0})});tS.displayName="Form";function nS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function py(r){let n=j.useContext(Ti);return Et(n,nS(r)),n}function rS(r,{target:n,replace:a,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:p}={}){let m=ly(),v=Tr(),y=Xs(r,{relative:u});return j.useCallback(x=>{if(kw(x,n)){x.preventDefault();let w=a!==void 0?a:Us(v)===Us(y),S=()=>m(r,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g});p?j.startTransition(()=>S()):S()}},[v,m,y,a,s,n,r,o,u,h,g,p])}function aS(r){Mn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=j.useRef(Kd(r)),a=j.useRef(!1),s=Tr(),o=j.useMemo(()=>Uw(s.search,a.current?null:n.current),[s.search]),u=ly(),h=j.useCallback((g,p)=>{const m=Kd(typeof g=="function"?g(new URLSearchParams(o)):g);a.current=!0,u("?"+m,p)},[u,o]);return[o,h]}var iS=0,sS=()=>`__${String(++iS)}__`;function lS(){let{router:r}=py("useSubmit"),{basename:n}=j.useContext(Bn),a=jw(),s=r.fetch,o=r.navigate;return j.useCallback(async(u,h={})=>{let{action:g,method:p,encType:m,formData:v,body:y}=Lw(u,n);if(h.navigate===!1){let x=h.fetcherKey||sS();await s(x,a,h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:y,formMethod:h.method||p,formEncType:h.encType||m,flushSync:h.flushSync})}else await o(h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:y,formMethod:h.method||p,formEncType:h.encType||m,replace:h.replace,state:h.state,fromRouteId:a,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,o,n,a])}function oS(r,{relative:n}={}){let{basename:a}=j.useContext(Bn),s=j.useContext(Rr);Et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Xs(r||".",{relative:n})},h=Tr();if(r==null){u.search=h.search;let g=new URLSearchParams(u.search),p=g.getAll("index");if(p.some(v=>v==="")){g.delete("index"),p.filter(y=>y).forEach(y=>g.append("index",y));let v=g.toString();u.search=v?`?${v}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(u.pathname=u.pathname==="/"?a:Er([a,u.pathname])),Us(u)}function cS(r,{relative:n}={}){let a=j.useContext(ry);Et(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=py("useViewTransitionState"),o=Xs(r,{relative:n});if(!a.isTransitioning)return!1;let u=Cr(a.currentLocation.pathname,s)||a.currentLocation.pathname,h=Cr(a.nextLocation.pathname,s)||a.nextLocation.pathname;return Oo(o.pathname,h)!=null||Oo(o.pathname,u)!=null}var ji=Kv();const fe=({children:r,variant:n="primary",size:a="md",isLoading:s,block:o,className:u="",...h})=>{const g=["btn",`btn--${n}`,`btn--${a}`,o?"btn--block":"",s?"btn--loading":"",u].filter(Boolean).join(" ");return c.jsxs("button",{className:g,disabled:s,...h,children:[s&&c.jsx("span",{className:"btn__spinner"}),c.jsx("span",{className:"btn__content",children:r})]})},uS=({children:r})=>(Tr(),c.jsxs("div",{className:"app-layout",children:[c.jsx("header",{className:"app-header",children:c.jsx("div",{className:"container app-header__content",children:c.jsx("img",{src:"/app/header-logo.png",alt:"recipe management",className:"app-logo-image"})})}),c.jsx("main",{className:"container app-main",children:r}),c.jsx("footer",{className:"app-footer",children:c.jsx("div",{className:"container",children:c.jsx("p",{children:" 2026 recipe management"})})})]})),pt=({children:r,className:n="",hoverable:a=!1,...s})=>c.jsx("div",{className:`glass-card ${a?"glass-card--hoverable":""} ${n}`,...s,children:r});function dS(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return j.useMemo(()=>s=>{n.forEach(o=>o(s))},n)}const Po=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ai(r){const n=Object.prototype.toString.call(r);return n==="[object Window]"||n==="[object global]"}function mh(r){return"nodeType"in r}function Kt(r){var n,a;return r?Ai(r)?r:mh(r)&&(n=(a=r.ownerDocument)==null?void 0:a.defaultView)!=null?n:window:window}function vh(r){const{Document:n}=Kt(r);return r instanceof n}function Qs(r){return Ai(r)?!1:r instanceof Kt(r).HTMLElement}function gy(r){return r instanceof Kt(r).SVGElement}function Oi(r){return r?Ai(r)?r.document:mh(r)?vh(r)?r:Qs(r)||gy(r)?r.ownerDocument:document:document:document}const Kn=Po?j.useLayoutEffect:j.useEffect;function Vo(r){const n=j.useRef(r);return Kn(()=>{n.current=r}),j.useCallback(function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n.current==null?void 0:n.current(...s)},[])}function hS(){const r=j.useRef(null),n=j.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),a=j.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[n,a]}function zs(r,n){n===void 0&&(n=[r]);const a=j.useRef(r);return Kn(()=>{a.current!==r&&(a.current=r)},n),a}function Fs(r,n){const a=j.useRef();return j.useMemo(()=>{const s=r(a.current);return a.current=s,s},[...n])}function No(r){const n=Vo(r),a=j.useRef(null),s=j.useCallback(o=>{o!==a.current&&n?.(o,a.current),a.current=o},[]);return[a,s]}function Do(r){const n=j.useRef();return j.useEffect(()=>{n.current=r},[r]),n.current}let vd={};function Ws(r,n){return j.useMemo(()=>{if(n)return n;const a=vd[r]==null?0:vd[r]+1;return vd[r]=a,r+"-"+a},[r,n])}function my(r){return function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.reduce((u,h)=>{const g=Object.entries(h);for(const[p,m]of g){const v=u[p];v!=null&&(u[p]=v+r*m)}return u},{...n})}}const Ci=my(1),Ms=my(-1);function fS(r){return"clientX"in r&&"clientY"in r}function Yo(r){if(!r)return!1;const{KeyboardEvent:n}=Kt(r.target);return n&&r instanceof n}function pS(r){if(!r)return!1;const{TouchEvent:n}=Kt(r.target);return n&&r instanceof n}function ko(r){if(pS(r)){if(r.touches&&r.touches.length){const{clientX:n,clientY:a}=r.touches[0];return{x:n,y:a}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:n,clientY:a}=r.changedTouches[0];return{x:n,y:a}}}return fS(r)?{x:r.clientX,y:r.clientY}:null}const Ln=Object.freeze({Translate:{toString(r){if(!r)return;const{x:n,y:a}=r;return"translate3d("+(n?Math.round(n):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:n,scaleY:a}=r;return"scaleX("+n+") scaleY("+a+")"}},Transform:{toString(r){if(r)return[Ln.Translate.toString(r),Ln.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:n,duration:a,easing:s}=r;return n+" "+a+"ms "+s}}}),qm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gS(r){return r.matches(qm)?r:r.querySelector(qm)}const mS={display:"none"};function vS(r){let{id:n,value:a}=r;return Ee.createElement("div",{id:n,style:mS},a)}function yS(r){let{id:n,announcement:a,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ee.createElement("div",{id:n,style:o,role:"status","aria-live":s,"aria-atomic":!0},a)}function bS(){const[r,n]=j.useState("");return{announce:j.useCallback(s=>{s!=null&&n(s)},[]),announcement:r}}const vy=j.createContext(null);function xS(r){const n=j.useContext(vy);j.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(r)},[r,n])}function wS(){const[r]=j.useState(()=>new Set),n=j.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[j.useCallback(s=>{let{type:o,event:u}=s;r.forEach(h=>{var g;return(g=h[o])==null?void 0:g.call(h,u)})},[r]),n]}const SS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_S={onDragStart(r){let{active:n}=r;return"Picked up draggable item "+n.id+"."},onDragOver(r){let{active:n,over:a}=r;return a?"Draggable item "+n.id+" was moved over droppable area "+a.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(r){let{active:n,over:a}=r;return a?"Draggable item "+n.id+" was dropped over droppable area "+a.id:"Draggable item "+n.id+" was dropped."},onDragCancel(r){let{active:n}=r;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function jS(r){let{announcements:n=_S,container:a,hiddenTextDescribedById:s,screenReaderInstructions:o=SS}=r;const{announce:u,announcement:h}=bS(),g=Ws("DndLiveRegion"),[p,m]=j.useState(!1);if(j.useEffect(()=>{m(!0)},[]),xS(j.useMemo(()=>({onDragStart(y){let{active:x}=y;u(n.onDragStart({active:x}))},onDragMove(y){let{active:x,over:w}=y;n.onDragMove&&u(n.onDragMove({active:x,over:w}))},onDragOver(y){let{active:x,over:w}=y;u(n.onDragOver({active:x,over:w}))},onDragEnd(y){let{active:x,over:w}=y;u(n.onDragEnd({active:x,over:w}))},onDragCancel(y){let{active:x,over:w}=y;u(n.onDragCancel({active:x,over:w}))}}),[u,n])),!p)return null;const v=Ee.createElement(Ee.Fragment,null,Ee.createElement(vS,{id:s,value:o.draggable}),Ee.createElement(yS,{id:g,announcement:h}));return a?ji.createPortal(v,a):v}var jt;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(jt||(jt={}));function Uo(){}function an(r,n){return j.useMemo(()=>({sensor:r,options:n??{}}),[r,n])}function Zs(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return j.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const Jn=Object.freeze({x:0,y:0});function yh(r,n){return Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))}function ES(r,n){const a=ko(r);if(!a)return"0 0";const s={x:(a.x-n.left)/n.width*100,y:(a.y-n.top)/n.height*100};return s.x+"% "+s.y+"%"}function bh(r,n){let{data:{value:a}}=r,{data:{value:s}}=n;return a-s}function CS(r,n){let{data:{value:a}}=r,{data:{value:s}}=n;return s-a}function Jd(r){let{left:n,top:a,height:s,width:o}=r;return[{x:n,y:a},{x:n+o,y:a},{x:n,y:a+s},{x:n+o,y:a+s}]}function yy(r,n){if(!r||r.length===0)return null;const[a]=r;return a[n]}function $m(r,n,a){return n===void 0&&(n=r.left),a===void 0&&(a=r.top),{x:n+r.width*.5,y:a+r.height*.5}}const Xd=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=$m(n,n.left,n.top),u=[];for(const h of s){const{id:g}=h,p=a.get(g);if(p){const m=yh($m(p),o);u.push({id:g,data:{droppableContainer:h,value:m}})}}return u.sort(bh)},RS=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=Jd(n),u=[];for(const h of s){const{id:g}=h,p=a.get(g);if(p){const m=Jd(p),v=o.reduce((x,w,S)=>x+yh(m[S],w),0),y=Number((v/4).toFixed(4));u.push({id:g,data:{droppableContainer:h,value:y}})}}return u.sort(bh)};function TS(r,n){const a=Math.max(n.top,r.top),s=Math.max(n.left,r.left),o=Math.min(n.left+n.width,r.left+r.width),u=Math.min(n.top+n.height,r.top+r.height),h=o-s,g=u-a;if(s<o&&a<u){const p=n.width*n.height,m=r.width*r.height,v=h*g,y=v/(p+m-v);return Number(y.toFixed(4))}return 0}const AS=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=[];for(const u of s){const{id:h}=u,g=a.get(h);if(g){const p=TS(g,n);p>0&&o.push({id:h,data:{droppableContainer:u,value:p}})}}return o.sort(CS)};function OS(r,n){const{top:a,left:s,bottom:o,right:u}=n;return a<=r.y&&r.y<=o&&s<=r.x&&r.x<=u}const by=r=>{let{droppableContainers:n,droppableRects:a,pointerCoordinates:s}=r;if(!s)return[];const o=[];for(const u of n){const{id:h}=u,g=a.get(h);if(g&&OS(s,g)){const m=Jd(g).reduce((y,x)=>y+yh(s,x),0),v=Number((m/4).toFixed(4));o.push({id:h,data:{droppableContainer:u,value:v}})}}return o.sort(bh)};function NS(r,n,a){return{...r,scaleX:n&&a?n.width/a.width:1,scaleY:n&&a?n.height/a.height:1}}function xy(r,n){return r&&n?{x:r.left-n.left,y:r.top-n.top}:Jn}function DS(r){return function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((h,g)=>({...h,top:h.top+r*g.y,bottom:h.bottom+r*g.y,left:h.left+r*g.x,right:h.right+r*g.x}),{...a})}}const kS=DS(1);function wy(r){if(r.startsWith("matrix3d(")){const n=r.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(r.startsWith("matrix(")){const n=r.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function US(r,n,a){const s=wy(n);if(!s)return r;const{scaleX:o,scaleY:u,x:h,y:g}=s,p=r.left-h-(1-o)*parseFloat(a),m=r.top-g-(1-u)*parseFloat(a.slice(a.indexOf(" ")+1)),v=o?r.width/o:r.width,y=u?r.height/u:r.height;return{width:v,height:y,top:m,right:p+v,bottom:m+y,left:p}}const zS={ignoreTransform:!1};function Ni(r,n){n===void 0&&(n=zS);let a=r.getBoundingClientRect();if(n.ignoreTransform){const{transform:m,transformOrigin:v}=Kt(r).getComputedStyle(r);m&&(a=US(a,m,v))}const{top:s,left:o,width:u,height:h,bottom:g,right:p}=a;return{top:s,left:o,width:u,height:h,bottom:g,right:p}}function Hm(r){return Ni(r,{ignoreTransform:!0})}function MS(r){const n=r.innerWidth,a=r.innerHeight;return{top:0,left:0,right:n,bottom:a,width:n,height:a}}function LS(r,n){return n===void 0&&(n=Kt(r).getComputedStyle(r)),n.position==="fixed"}function BS(r,n){n===void 0&&(n=Kt(r).getComputedStyle(r));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=n[o];return typeof u=="string"?a.test(u):!1})}function Ko(r,n){const a=[];function s(o){if(n!=null&&a.length>=n||!o)return a;if(vh(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!Qs(o)||gy(o)||a.includes(o))return a;const u=Kt(r).getComputedStyle(o);return o!==r&&BS(o,u)&&a.push(o),LS(o,u)?a:s(o.parentNode)}return r?s(r):a}function Sy(r){const[n]=Ko(r,1);return n??null}function yd(r){return!Po||!r?null:Ai(r)?r:mh(r)?vh(r)||r===Oi(r).scrollingElement?window:Qs(r)?r:null:null}function _y(r){return Ai(r)?r.scrollX:r.scrollLeft}function jy(r){return Ai(r)?r.scrollY:r.scrollTop}function Qd(r){return{x:_y(r),y:jy(r)}}var Ot;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Ot||(Ot={}));function Ey(r){return!Po||!r?!1:r===document.scrollingElement}function Cy(r){const n={x:0,y:0},a=Ey(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-a.width,y:r.scrollHeight-a.height},o=r.scrollTop<=n.y,u=r.scrollLeft<=n.x,h=r.scrollTop>=s.y,g=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:h,isRight:g,maxScroll:s,minScroll:n}}const IS={x:.2,y:.2};function qS(r,n,a,s,o){let{top:u,left:h,right:g,bottom:p}=a;s===void 0&&(s=10),o===void 0&&(o=IS);const{isTop:m,isBottom:v,isLeft:y,isRight:x}=Cy(r),w={x:0,y:0},S={x:0,y:0},E={height:n.height*o.y,width:n.width*o.x};return!m&&u<=n.top+E.height?(w.y=Ot.Backward,S.y=s*Math.abs((n.top+E.height-u)/E.height)):!v&&p>=n.bottom-E.height&&(w.y=Ot.Forward,S.y=s*Math.abs((n.bottom-E.height-p)/E.height)),!x&&g>=n.right-E.width?(w.x=Ot.Forward,S.x=s*Math.abs((n.right-E.width-g)/E.width)):!y&&h<=n.left+E.width&&(w.x=Ot.Backward,S.x=s*Math.abs((n.left+E.width-h)/E.width)),{direction:w,speed:S}}function $S(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:h}=window;return{top:0,left:0,right:u,bottom:h,width:u,height:h}}const{top:n,left:a,right:s,bottom:o}=r.getBoundingClientRect();return{top:n,left:a,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function Ry(r){return r.reduce((n,a)=>Ci(n,Qd(a)),Jn)}function HS(r){return r.reduce((n,a)=>n+_y(a),0)}function GS(r){return r.reduce((n,a)=>n+jy(a),0)}function Ty(r,n){if(n===void 0&&(n=Ni),!r)return;const{top:a,left:s,bottom:o,right:u}=n(r);Sy(r)&&(o<=0||u<=0||a>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const PS=[["x",["left","right"],HS],["y",["top","bottom"],GS]];class xh{constructor(n,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Ko(a),o=Ry(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,h,g]of PS)for(const p of h)Object.defineProperty(this,p,{get:()=>{const m=g(s),v=o[u]-m;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rs{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=n}add(n,a,s){var o;(o=this.target)==null||o.addEventListener(n,a,s),this.listeners.push([n,a,s])}}function VS(r){const{EventTarget:n}=Kt(r);return r instanceof n?r:Oi(r)}function bd(r,n){const a=Math.abs(r.x),s=Math.abs(r.y);return typeof n=="number"?Math.sqrt(a**2+s**2)>n:"x"in n&&"y"in n?a>n.x&&s>n.y:"x"in n?a>n.x:"y"in n?s>n.y:!1}var zn;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(zn||(zn={}));function Gm(r){r.preventDefault()}function YS(r){r.stopPropagation()}var Ie;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Ie||(Ie={}));const Ay={start:[Ie.Space,Ie.Enter],cancel:[Ie.Esc],end:[Ie.Space,Ie.Enter,Ie.Tab]},KS=(r,n)=>{let{currentCoordinates:a}=n;switch(r.code){case Ie.Right:return{...a,x:a.x+25};case Ie.Left:return{...a,x:a.x-25};case Ie.Down:return{...a,y:a.y+25};case Ie.Up:return{...a,y:a.y-25}}};class Aa{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:a}}=n;this.props=n,this.listeners=new Rs(Oi(a)),this.windowListeners=new Rs(Kt(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:a}=this.props,s=n.node.current;s&&Ty(s),a(Jn)}handleKeyDown(n){if(Yo(n)){const{active:a,context:s,options:o}=this.props,{keyboardCodes:u=Ay,coordinateGetter:h=KS,scrollBehavior:g="smooth"}=o,{code:p}=n;if(u.end.includes(p)){this.handleEnd(n);return}if(u.cancel.includes(p)){this.handleCancel(n);return}const{collisionRect:m}=s.current,v=m?{x:m.left,y:m.top}:Jn;this.referenceCoordinates||(this.referenceCoordinates=v);const y=h(n,{active:a,context:s.current,currentCoordinates:v});if(y){const x=Ms(y,v),w={x:0,y:0},{scrollableAncestors:S}=s.current;for(const E of S){const R=n.code,{isTop:T,isRight:C,isLeft:D,isBottom:J,maxScroll:G,minScroll:$}=Cy(E),U=$S(E),L={x:Math.min(R===Ie.Right?U.right-U.width/2:U.right,Math.max(R===Ie.Right?U.left:U.left+U.width/2,y.x)),y:Math.min(R===Ie.Down?U.bottom-U.height/2:U.bottom,Math.max(R===Ie.Down?U.top:U.top+U.height/2,y.y))},q=R===Ie.Right&&!C||R===Ie.Left&&!D,Q=R===Ie.Down&&!J||R===Ie.Up&&!T;if(q&&L.x!==y.x){const I=E.scrollLeft+x.x,A=R===Ie.Right&&I<=G.x||R===Ie.Left&&I>=$.x;if(A&&!x.y){E.scrollTo({left:I,behavior:g});return}A?w.x=E.scrollLeft-I:w.x=R===Ie.Right?E.scrollLeft-G.x:E.scrollLeft-$.x,w.x&&E.scrollBy({left:-w.x,behavior:g});break}else if(Q&&L.y!==y.y){const I=E.scrollTop+x.y,A=R===Ie.Down&&I<=G.y||R===Ie.Up&&I>=$.y;if(A&&!x.x){E.scrollTo({top:I,behavior:g});return}A?w.y=E.scrollTop-I:w.y=R===Ie.Down?E.scrollTop-G.y:E.scrollTop-$.y,w.y&&E.scrollBy({top:-w.y,behavior:g});break}}this.handleMove(n,Ci(Ms(y,this.referenceCoordinates),w))}}}handleMove(n,a){const{onMove:s}=this.props;n.preventDefault(),s(a)}handleEnd(n){const{onEnd:a}=this.props;n.preventDefault(),this.detach(),a()}handleCancel(n){const{onCancel:a}=this.props;n.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Aa.activators=[{eventName:"onKeyDown",handler:(r,n,a)=>{let{keyboardCodes:s=Ay,onActivation:o}=n,{active:u}=a;const{code:h}=r.nativeEvent;if(s.start.includes(h)){const g=u.activatorNode.current;return g&&r.target!==g?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function Pm(r){return!!(r&&"distance"in r)}function Vm(r){return!!(r&&"delay"in r)}class wh{constructor(n,a,s){var o;s===void 0&&(s=VS(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=a;const{event:u}=n,{target:h}=u;this.props=n,this.events=a,this.document=Oi(h),this.documentListeners=new Rs(this.document),this.listeners=new Rs(s),this.windowListeners=new Rs(Kt(h)),this.initialCoordinates=(o=ko(u))!=null?o:Jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.DragStart,Gm),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),this.windowListeners.add(zn.ContextMenu,Gm),this.documentListeners.add(zn.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vm(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(Pm(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,a){const{active:s,onPending:o}=this.props;o(s,n,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:n}=this,{onStart:a}=this.props;n&&(this.activated=!0,this.documentListeners.add(zn.Click,YS,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zn.SelectionChange,this.removeTextSelection),a(n))}handleMove(n){var a;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:h,options:{activationConstraint:g}}=u;if(!o)return;const p=(a=ko(n))!=null?a:Jn,m=Ms(o,p);if(!s&&g){if(Pm(g)){if(g.tolerance!=null&&bd(m,g.tolerance))return this.handleCancel();if(bd(m,g.distance))return this.handleStart()}if(Vm(g)&&bd(m,g.tolerance))return this.handleCancel();this.handlePending(g,m);return}n.cancelable&&n.preventDefault(),h(p)}handleEnd(){const{onAbort:n,onEnd:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleCancel(){const{onAbort:n,onCancel:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleKeydown(n){n.code===Ie.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const JS={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sh extends wh{constructor(n){const{event:a}=n,s=Oi(a.target);super(n,JS,s)}}Sh.activators=[{eventName:"onPointerDown",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const XS={move:{name:"mousemove"},end:{name:"mouseup"}};var Fd;(function(r){r[r.RightClick=2]="RightClick"})(Fd||(Fd={}));class el extends wh{constructor(n){super(n,XS,Oi(n.event.target))}}el.activators=[{eventName:"onMouseDown",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;return a.button===Fd.RightClick?!1:(s?.({event:a}),!0)}}];const xd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class tl extends wh{constructor(n){super(n,xd)}static setup(){return window.addEventListener(xd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(xd.move.name,n)};function n(){}}}tl.activators=[{eventName:"onTouchStart",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;const{touches:o}=a;return o.length>1?!1:(s?.({event:a}),!0)}}];var Ts;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Ts||(Ts={}));var zo;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(zo||(zo={}));function QS(r){let{acceleration:n,activator:a=Ts.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:h=5,order:g=zo.TreeOrder,pointerCoordinates:p,scrollableAncestors:m,scrollableAncestorRects:v,delta:y,threshold:x}=r;const w=WS({delta:y,disabled:!u}),[S,E]=hS(),R=j.useRef({x:0,y:0}),T=j.useRef({x:0,y:0}),C=j.useMemo(()=>{switch(a){case Ts.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case Ts.DraggableRect:return o}},[a,o,p]),D=j.useRef(null),J=j.useCallback(()=>{const $=D.current;if(!$)return;const U=R.current.x*T.current.x,L=R.current.y*T.current.y;$.scrollBy(U,L)},[]),G=j.useMemo(()=>g===zo.TreeOrder?[...m].reverse():m,[g,m]);j.useEffect(()=>{if(!u||!m.length||!C){E();return}for(const $ of G){if(s?.($)===!1)continue;const U=m.indexOf($),L=v[U];if(!L)continue;const{direction:q,speed:Q}=qS($,L,C,n,x);for(const I of["x","y"])w[I][q[I]]||(Q[I]=0,q[I]=0);if(Q.x>0||Q.y>0){E(),D.current=$,S(J,h),R.current=Q,T.current=q;return}}R.current={x:0,y:0},T.current={x:0,y:0},E()},[n,J,s,E,u,h,JSON.stringify(C),JSON.stringify(w),S,m,G,v,JSON.stringify(x)])}const FS={x:{[Ot.Backward]:!1,[Ot.Forward]:!1},y:{[Ot.Backward]:!1,[Ot.Forward]:!1}};function WS(r){let{delta:n,disabled:a}=r;const s=Do(n);return Fs(o=>{if(a||!s||!o)return FS;const u={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[Ot.Backward]:o.x[Ot.Backward]||u.x===-1,[Ot.Forward]:o.x[Ot.Forward]||u.x===1},y:{[Ot.Backward]:o.y[Ot.Backward]||u.y===-1,[Ot.Forward]:o.y[Ot.Forward]||u.y===1}}},[a,n,s])}function ZS(r,n){const a=n!=null?r.get(n):void 0,s=a?a.node.current:null;return Fs(o=>{var u;return n==null?null:(u=s??o)!=null?u:null},[s,n])}function e1(r,n){return j.useMemo(()=>r.reduce((a,s)=>{const{sensor:o}=s,u=o.activators.map(h=>({eventName:h.eventName,handler:n(h.handler,s)}));return[...a,...u]},[]),[r,n])}var Ls;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Ls||(Ls={}));var Wd;(function(r){r.Optimized="optimized"})(Wd||(Wd={}));const Ym=new Map;function t1(r,n){let{dragging:a,dependencies:s,config:o}=n;const[u,h]=j.useState(null),{frequency:g,measure:p,strategy:m}=o,v=j.useRef(r),y=R(),x=zs(y),w=j.useCallback(function(T){T===void 0&&(T=[]),!x.current&&h(C=>C===null?T:C.concat(T.filter(D=>!C.includes(D))))},[x]),S=j.useRef(null),E=Fs(T=>{if(y&&!a)return Ym;if(!T||T===Ym||v.current!==r||u!=null){const C=new Map;for(let D of r){if(!D)continue;if(u&&u.length>0&&!u.includes(D.id)&&D.rect.current){C.set(D.id,D.rect.current);continue}const J=D.node.current,G=J?new xh(p(J),J):null;D.rect.current=G,G&&C.set(D.id,G)}return C}return T},[r,u,a,y,p]);return j.useEffect(()=>{v.current=r},[r]),j.useEffect(()=>{y||w()},[a,y]),j.useEffect(()=>{u&&u.length>0&&h(null)},[JSON.stringify(u)]),j.useEffect(()=>{y||typeof g!="number"||S.current!==null||(S.current=setTimeout(()=>{w(),S.current=null},g))},[g,y,w,...s]),{droppableRects:E,measureDroppableContainers:w,measuringScheduled:u!=null};function R(){switch(m){case Ls.Always:return!1;case Ls.BeforeDragging:return a;default:return!a}}}function _h(r,n){return Fs(a=>r?a||(typeof n=="function"?n(r):r):null,[n,r])}function n1(r,n){return _h(r,n)}function r1(r){let{callback:n,disabled:a}=r;const s=Vo(n),o=j.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,a]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function Jo(r){let{callback:n,disabled:a}=r;const s=Vo(n),o=j.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[a]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function a1(r){return new xh(Ni(r),r)}function Km(r,n,a){n===void 0&&(n=a1);const[s,o]=j.useState(null);function u(){o(p=>{if(!r)return null;if(r.isConnected===!1){var m;return(m=p??a)!=null?m:null}const v=n(r);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const h=r1({callback(p){if(r)for(const m of p){const{type:v,target:y}=m;if(v==="childList"&&y instanceof HTMLElement&&y.contains(r)){u();break}}}}),g=Jo({callback:u});return Kn(()=>{u(),r?(g?.observe(r),h?.observe(document.body,{childList:!0,subtree:!0})):(g?.disconnect(),h?.disconnect())},[r]),s}function i1(r){const n=_h(r);return xy(r,n)}const Jm=[];function s1(r){const n=j.useRef(r),a=Fs(s=>r?s&&s!==Jm&&r&&n.current&&r.parentNode===n.current.parentNode?s:Ko(r):Jm,[r]);return j.useEffect(()=>{n.current=r},[r]),a}function l1(r){const[n,a]=j.useState(null),s=j.useRef(r),o=j.useCallback(u=>{const h=yd(u.target);h&&a(g=>g?(g.set(h,Qd(h)),new Map(g)):null)},[]);return j.useEffect(()=>{const u=s.current;if(r!==u){h(u);const g=r.map(p=>{const m=yd(p);return m?(m.addEventListener("scroll",o,{passive:!0}),[m,Qd(m)]):null}).filter(p=>p!=null);a(g.length?new Map(g):null),s.current=r}return()=>{h(r),h(u)};function h(g){g.forEach(p=>{const m=yd(p);m?.removeEventListener("scroll",o)})}},[o,r]),j.useMemo(()=>r.length?n?Array.from(n.values()).reduce((u,h)=>Ci(u,h),Jn):Ry(r):Jn,[r,n])}function Xm(r,n){n===void 0&&(n=[]);const a=j.useRef(null);return j.useEffect(()=>{a.current=null},n),j.useEffect(()=>{const s=r!==Jn;s&&!a.current&&(a.current=r),!s&&a.current&&(a.current=null)},[r]),a.current?Ms(r,a.current):Jn}function o1(r){j.useEffect(()=>{if(!Po)return;const n=r.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of n)a?.()}},r.map(n=>{let{sensor:a}=n;return a}))}function c1(r,n){return j.useMemo(()=>r.reduce((a,s)=>{let{eventName:o,handler:u}=s;return a[o]=h=>{u(h,n)},a},{}),[r,n])}function Oy(r){return j.useMemo(()=>r?MS(r):null,[r])}const Qm=[];function u1(r,n){n===void 0&&(n=Ni);const[a]=r,s=Oy(a?Kt(a):null),[o,u]=j.useState(Qm);function h(){u(()=>r.length?r.map(p=>Ey(p)?s:new xh(n(p),p)):Qm)}const g=Jo({callback:h});return Kn(()=>{g?.disconnect(),h(),r.forEach(p=>g?.observe(p))},[r]),o}function Ny(r){if(!r)return null;if(r.children.length>1)return r;const n=r.children[0];return Qs(n)?n:r}function d1(r){let{measure:n}=r;const[a,s]=j.useState(null),o=j.useCallback(m=>{for(const{target:v}of m)if(Qs(v)){s(y=>{const x=n(v);return y?{...y,width:x.width,height:x.height}:x});break}},[n]),u=Jo({callback:o}),h=j.useCallback(m=>{const v=Ny(m);u?.disconnect(),v&&u?.observe(v),s(v?n(v):null)},[n,u]),[g,p]=No(h);return j.useMemo(()=>({nodeRef:g,rect:a,setRef:p}),[a,g,p])}const h1=[{sensor:Sh,options:{}},{sensor:Aa,options:{}}],f1={current:{}},Ao={draggable:{measure:Hm},droppable:{measure:Hm,strategy:Ls.WhileDragging,frequency:Wd.Optimized},dragOverlay:{measure:Ni}};class As extends Map{get(n){var a;return n!=null&&(a=super.get(n))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:a}=n;return!a})}getNodeFor(n){var a,s;return(a=(s=this.get(n))==null?void 0:s.node.current)!=null?a:void 0}}const p1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new As,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Uo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ao,measureDroppableContainers:Uo,windowRect:null,measuringScheduled:!1},Dy={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Uo,draggableNodes:new Map,over:null,measureDroppableContainers:Uo},nl=j.createContext(Dy),ky=j.createContext(p1);function g1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new As}}}function m1(r,n){switch(n.type){case jt.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case jt.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:n.coordinates.x-r.draggable.initialCoordinates.x,y:n.coordinates.y-r.draggable.initialCoordinates.y}}};case jt.DragEnd:case jt.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case jt.RegisterDroppable:{const{element:a}=n,{id:s}=a,o=new As(r.droppable.containers);return o.set(s,a),{...r,droppable:{...r.droppable,containers:o}}}case jt.SetDroppableDisabled:{const{id:a,key:s,disabled:o}=n,u=r.droppable.containers.get(a);if(!u||s!==u.key)return r;const h=new As(r.droppable.containers);return h.set(a,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:h}}}case jt.UnregisterDroppable:{const{id:a,key:s}=n,o=r.droppable.containers.get(a);if(!o||s!==o.key)return r;const u=new As(r.droppable.containers);return u.delete(a),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function v1(r){let{disabled:n}=r;const{active:a,activatorEvent:s,draggableNodes:o}=j.useContext(nl),u=Do(s),h=Do(a?.id);return j.useEffect(()=>{if(!n&&!s&&u&&h!=null){if(!Yo(u)||document.activeElement===u.target)return;const g=o.get(h);if(!g)return;const{activatorNode:p,node:m}=g;if(!p.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[p.current,m.current]){if(!v)continue;const y=gS(v);if(y){y.focus();break}}})}},[s,n,o,h,u]),null}function Uy(r,n){let{transform:a,...s}=n;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),a):a}function y1(r){return j.useMemo(()=>({draggable:{...Ao.draggable,...r?.draggable},droppable:{...Ao.droppable,...r?.droppable},dragOverlay:{...Ao.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function b1(r){let{activeNode:n,measure:a,initialRect:s,config:o=!0}=r;const u=j.useRef(!1),{x:h,y:g}=typeof o=="boolean"?{x:o,y:o}:o;Kn(()=>{if(!h&&!g||!n){u.current=!1;return}if(u.current||!s)return;const m=n?.node.current;if(!m||m.isConnected===!1)return;const v=a(m),y=xy(v,s);if(h||(y.x=0),g||(y.y=0),u.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const x=Sy(m);x&&x.scrollBy({top:y.y,left:y.x})}},[n,h,g,s,a])}const Xo=j.createContext({...Jn,scaleX:1,scaleY:1});var ta;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(ta||(ta={}));const Bs=j.memo(function(n){var a,s,o,u;let{id:h,accessibility:g,autoScroll:p=!0,children:m,sensors:v=h1,collisionDetection:y=AS,measuring:x,modifiers:w,...S}=n;const E=j.useReducer(m1,void 0,g1),[R,T]=E,[C,D]=wS(),[J,G]=j.useState(ta.Uninitialized),$=J===ta.Initialized,{draggable:{active:U,nodes:L,translate:q},droppable:{containers:Q}}=R,I=U!=null?L.get(U):null,A=j.useRef({initial:null,translated:null}),H=j.useMemo(()=>{var tt;return U!=null?{id:U,data:(tt=I?.data)!=null?tt:f1,rect:A}:null},[U,I]),F=j.useRef(null),[ee,N]=j.useState(null),[V,W]=j.useState(null),ne=zs(S,Object.values(S)),oe=Ws("DndDescribedBy",h),O=j.useMemo(()=>Q.getEnabled(),[Q]),B=y1(x),{droppableRects:ie,measureDroppableContainers:ce,measuringScheduled:ve}=t1(O,{dragging:$,dependencies:[q.x,q.y],config:B.droppable}),ue=ZS(L,U),Oe=j.useMemo(()=>V?ko(V):null,[V]),Ve=Qn(),De=n1(ue,B.draggable.measure);b1({activeNode:U!=null?L.get(U):null,config:Ve.layoutShiftCompensation,initialRect:De,measure:B.draggable.measure});const Ne=Km(ue,B.draggable.measure,De),qt=Km(ue?ue.parentElement:null),Ct=j.useRef({activatorEvent:null,active:null,activeNode:ue,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:Q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),sn=Q.getNodeFor((a=Ct.current.over)==null?void 0:a.id),Je=d1({measure:B.dragOverlay.measure}),Pt=(s=Je.nodeRef.current)!=null?s:ue,$t=$?(o=Je.rect)!=null?o:Ne:null,tr=!!(Je.nodeRef.current&&Je.rect),yn=i1(tr?null:Ne),Vt=Oy(Pt?Kt(Pt):null),Nt=s1($?sn??ue:null),bn=u1(Nt),Xn=Uy(w,{transform:{x:q.x-yn.x,y:q.y-yn.y,scaleX:1,scaleY:1},activatorEvent:V,active:H,activeNodeRect:Ne,containerNodeRect:qt,draggingNodeRect:$t,over:Ct.current.over,overlayNodeRect:Je.rect,scrollableAncestors:Nt,scrollableAncestorRects:bn,windowRect:Vt}),nr=Oe?Ci(Oe,q):null,at=l1(Nt),rr=Xm(at),de=Xm(at,[Ne]),z=Ci(Xn,rr),se=$t?kS($t,Xn):null,le=H&&se?y({active:H,collisionRect:se,droppableRects:ie,droppableContainers:O,pointerCoordinates:nr}):null,Se=yy(le,"id"),[_e,He]=j.useState(null),ke=tr?Xn:Ci(Xn,de),Pe=NS(ke,(u=_e?.rect)!=null?u:null,Ne),pe=j.useRef(null),Re=j.useCallback((tt,dt)=>{let{sensor:Rt,options:Jt}=dt;if(F.current==null)return;const Xt=L.get(F.current);if(!Xt)return;const Ht=tt.nativeEvent,Qt=new Rt({active:F.current,activeNode:Xt,event:Ht,options:Jt,context:Ct,onAbort(wt){if(!L.get(wt))return;const{onDragAbort:ln}=ne.current,_n={id:wt};ln?.(_n),C({type:"onDragAbort",event:_n})},onPending(wt,In,ln,_n){if(!L.get(wt))return;const{onDragPending:ir}=ne.current,qn={id:wt,constraint:In,initialCoordinates:ln,offset:_n};ir?.(qn),C({type:"onDragPending",event:qn})},onStart(wt){const In=F.current;if(In==null)return;const ln=L.get(In);if(!ln)return;const{onDragStart:_n}=ne.current,ar={activatorEvent:Ht,active:{id:In,data:ln.data,rect:A}};ji.unstable_batchedUpdates(()=>{_n?.(ar),G(ta.Initializing),T({type:jt.DragStart,initialCoordinates:wt,active:In}),C({type:"onDragStart",event:ar}),N(pe.current),W(Ht)})},onMove(wt){T({type:jt.DragMove,coordinates:wt})},onEnd:Sn(jt.DragEnd),onCancel:Sn(jt.DragCancel)});pe.current=Qt;function Sn(wt){return async function(){const{active:ln,collisions:_n,over:ar,scrollAdjustedTranslate:ir}=Ct.current;let qn=null;if(ln&&ir){const{cancelDrop:Or}=ne.current;qn={activatorEvent:Ht,active:ln,collisions:_n,delta:ir,over:ar},wt===jt.DragEnd&&typeof Or=="function"&&await Promise.resolve(Or(qn))&&(wt=jt.DragCancel)}F.current=null,ji.unstable_batchedUpdates(()=>{T({type:wt}),G(ta.Uninitialized),He(null),N(null),W(null),pe.current=null;const Or=wt===jt.DragEnd?"onDragEnd":"onDragCancel";if(qn){const jn=ne.current[Or];jn?.(qn),C({type:Or,event:qn})}})}}},[L]),Xe=j.useCallback((tt,dt)=>(Rt,Jt)=>{const Xt=Rt.nativeEvent,Ht=L.get(Jt);if(F.current!==null||!Ht||Xt.dndKit||Xt.defaultPrevented)return;const Qt={active:Ht};tt(Rt,dt.options,Qt)===!0&&(Xt.dndKit={capturedBy:dt.sensor},F.current=Jt,Re(Rt,dt))},[L,Re]),gt=e1(v,Xe);o1(v),Kn(()=>{Ne&&J===ta.Initializing&&G(ta.Initialized)},[Ne,J]),j.useEffect(()=>{const{onDragMove:tt}=ne.current,{active:dt,activatorEvent:Rt,collisions:Jt,over:Xt}=Ct.current;if(!dt||!Rt)return;const Ht={active:dt,activatorEvent:Rt,collisions:Jt,delta:{x:z.x,y:z.y},over:Xt};ji.unstable_batchedUpdates(()=>{tt?.(Ht),C({type:"onDragMove",event:Ht})})},[z.x,z.y]),j.useEffect(()=>{const{active:tt,activatorEvent:dt,collisions:Rt,droppableContainers:Jt,scrollAdjustedTranslate:Xt}=Ct.current;if(!tt||F.current==null||!dt||!Xt)return;const{onDragOver:Ht}=ne.current,Qt=Jt.get(Se),Sn=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,wt={active:tt,activatorEvent:dt,collisions:Rt,delta:{x:Xt.x,y:Xt.y},over:Sn};ji.unstable_batchedUpdates(()=>{He(Sn),Ht?.(wt),C({type:"onDragOver",event:wt})})},[Se]),Kn(()=>{Ct.current={activatorEvent:V,active:H,activeNode:ue,collisionRect:se,collisions:le,droppableRects:ie,draggableNodes:L,draggingNode:Pt,draggingNodeRect:$t,droppableContainers:Q,over:_e,scrollableAncestors:Nt,scrollAdjustedTranslate:z},A.current={initial:$t,translated:se}},[H,ue,le,se,L,Pt,$t,ie,Q,_e,Nt,z]),QS({...Ve,delta:q,draggingRect:se,pointerCoordinates:nr,scrollableAncestors:Nt,scrollableAncestorRects:bn});const xn=j.useMemo(()=>({active:H,activeNode:ue,activeNodeRect:Ne,activatorEvent:V,collisions:le,containerNodeRect:qt,dragOverlay:Je,draggableNodes:L,droppableContainers:Q,droppableRects:ie,over:_e,measureDroppableContainers:ce,scrollableAncestors:Nt,scrollableAncestorRects:bn,measuringConfiguration:B,measuringScheduled:ve,windowRect:Vt}),[H,ue,Ne,V,le,qt,Je,L,Q,ie,_e,ce,Nt,bn,B,ve,Vt]),wn=j.useMemo(()=>({activatorEvent:V,activators:gt,active:H,activeNodeRect:Ne,ariaDescribedById:{draggable:oe},dispatch:T,draggableNodes:L,over:_e,measureDroppableContainers:ce}),[V,gt,H,Ne,T,oe,L,_e,ce]);return Ee.createElement(vy.Provider,{value:D},Ee.createElement(nl.Provider,{value:wn},Ee.createElement(ky.Provider,{value:xn},Ee.createElement(Xo.Provider,{value:Pe},m)),Ee.createElement(v1,{disabled:g?.restoreFocus===!1})),Ee.createElement(jS,{...g,hiddenTextDescribedById:oe}));function Qn(){const tt=ee?.autoScrollEnabled===!1,dt=typeof p=="object"?p.enabled===!1:p===!1,Rt=$&&!tt&&!dt;return typeof p=="object"?{...p,enabled:Rt}:{enabled:Rt}}}),x1=j.createContext(null),Fm="button",w1="Draggable";function S1(r){let{id:n,data:a,disabled:s=!1,attributes:o}=r;const u=Ws(w1),{activators:h,activatorEvent:g,active:p,activeNodeRect:m,ariaDescribedById:v,draggableNodes:y,over:x}=j.useContext(nl),{role:w=Fm,roleDescription:S="draggable",tabIndex:E=0}=o??{},R=p?.id===n,T=j.useContext(R?Xo:x1),[C,D]=No(),[J,G]=No(),$=c1(h,n),U=zs(a);Kn(()=>(y.set(n,{id:n,key:u,node:C,activatorNode:J,data:U}),()=>{const q=y.get(n);q&&q.key===u&&y.delete(n)}),[y,n]);const L=j.useMemo(()=>({role:w,tabIndex:E,"aria-disabled":s,"aria-pressed":R&&w===Fm?!0:void 0,"aria-roledescription":S,"aria-describedby":v.draggable}),[s,w,E,R,S,v.draggable]);return{active:p,activatorEvent:g,activeNodeRect:m,attributes:L,isDragging:R,listeners:s?void 0:$,node:C,over:x,setNodeRef:D,setActivatorNodeRef:G,transform:T}}function zy(){return j.useContext(ky)}const _1="Droppable",j1={timeout:25};function jh(r){let{data:n,disabled:a=!1,id:s,resizeObserverConfig:o}=r;const u=Ws(_1),{active:h,dispatch:g,over:p,measureDroppableContainers:m}=j.useContext(nl),v=j.useRef({disabled:a}),y=j.useRef(!1),x=j.useRef(null),w=j.useRef(null),{disabled:S,updateMeasurementsFor:E,timeout:R}={...j1,...o},T=zs(E??s),C=j.useCallback(()=>{if(!y.current){y.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{m(Array.isArray(T.current)?T.current:[T.current]),w.current=null},R)},[R]),D=Jo({callback:C,disabled:S||!h}),J=j.useCallback((L,q)=>{D&&(q&&(D.unobserve(q),y.current=!1),L&&D.observe(L))},[D]),[G,$]=No(J),U=zs(n);return j.useEffect(()=>{!D||!G.current||(D.disconnect(),y.current=!1,D.observe(G.current))},[G,D]),j.useEffect(()=>(g({type:jt.RegisterDroppable,element:{id:s,key:u,disabled:a,node:G,rect:x,data:U}}),()=>g({type:jt.UnregisterDroppable,key:u,id:s})),[s]),j.useEffect(()=>{a!==v.current.disabled&&(g({type:jt.SetDroppableDisabled,id:s,key:u,disabled:a}),v.current.disabled=a)},[s,u,a,g]),{active:h,rect:x,isOver:p?.id===s,node:G,over:p,setNodeRef:$}}function E1(r){let{animation:n,children:a}=r;const[s,o]=j.useState(null),[u,h]=j.useState(null),g=Do(a);return!a&&!s&&g&&o(g),Kn(()=>{if(!u)return;const p=s?.key,m=s?.props.id;if(p==null||m==null){o(null);return}Promise.resolve(n(m,u)).then(()=>{o(null)})},[n,s,u]),Ee.createElement(Ee.Fragment,null,a,s?j.cloneElement(s,{ref:h}):null)}const C1={x:0,y:0,scaleX:1,scaleY:1};function R1(r){let{children:n}=r;return Ee.createElement(nl.Provider,{value:Dy},Ee.createElement(Xo.Provider,{value:C1},n))}const T1={position:"fixed",touchAction:"none"},A1=r=>Yo(r)?"transform 250ms ease":void 0,O1=j.forwardRef((r,n)=>{let{as:a,activatorEvent:s,adjustScale:o,children:u,className:h,rect:g,style:p,transform:m,transition:v=A1}=r;if(!g)return null;const y=o?m:{...m,scaleX:1,scaleY:1},x={...T1,width:g.width,height:g.height,top:g.top,left:g.left,transform:Ln.Transform.toString(y),transformOrigin:o&&s?ES(s,g):void 0,transition:typeof v=="function"?v(s):v,...p};return Ee.createElement(a,{className:h,style:x,ref:n},u)}),Eh=r=>n=>{let{active:a,dragOverlay:s}=n;const o={},{styles:u,className:h}=r;if(u!=null&&u.active)for(const[g,p]of Object.entries(u.active))p!==void 0&&(o[g]=a.node.style.getPropertyValue(g),a.node.style.setProperty(g,p));if(u!=null&&u.dragOverlay)for(const[g,p]of Object.entries(u.dragOverlay))p!==void 0&&s.node.style.setProperty(g,p);return h!=null&&h.active&&a.node.classList.add(h.active),h!=null&&h.dragOverlay&&s.node.classList.add(h.dragOverlay),function(){for(const[p,m]of Object.entries(o))a.node.style.setProperty(p,m);h!=null&&h.active&&a.node.classList.remove(h.active)}},N1=r=>{let{transform:{initial:n,final:a}}=r;return[{transform:Ln.Transform.toString(n)},{transform:Ln.Transform.toString(a)}]},D1={duration:250,easing:"ease",keyframes:N1,sideEffects:Eh({styles:{active:{opacity:"0"}}})};function k1(r){let{config:n,draggableNodes:a,droppableContainers:s,measuringConfiguration:o}=r;return Vo((u,h)=>{if(n===null)return;const g=a.get(u);if(!g)return;const p=g.node.current;if(!p)return;const m=Ny(h);if(!m)return;const{transform:v}=Kt(h).getComputedStyle(h),y=wy(v);if(!y)return;const x=typeof n=="function"?n:U1(n);return Ty(p,o.draggable.measure),x({active:{id:u,data:g.data,node:p,rect:o.draggable.measure(p)},draggableNodes:a,dragOverlay:{node:h,rect:o.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:o,transform:y})})}function U1(r){const{duration:n,easing:a,sideEffects:s,keyframes:o}={...D1,...r};return u=>{let{active:h,dragOverlay:g,transform:p,...m}=u;if(!n)return;const v={x:g.rect.left-h.rect.left,y:g.rect.top-h.rect.top},y={scaleX:p.scaleX!==1?h.rect.width*p.scaleX/g.rect.width:1,scaleY:p.scaleY!==1?h.rect.height*p.scaleY/g.rect.height:1},x={x:p.x-v.x,y:p.y-v.y,...y},w=o({...m,active:h,dragOverlay:g,transform:{initial:p,final:x}}),[S]=w,E=w[w.length-1];if(JSON.stringify(S)===JSON.stringify(E))return;const R=s?.({active:h,dragOverlay:g,...m}),T=g.node.animate(w,{duration:n,easing:a,fill:"forwards"});return new Promise(C=>{T.onfinish=()=>{R?.(),C()}})}}let Wm=0;function z1(r){return j.useMemo(()=>{if(r!=null)return Wm++,Wm},[r])}const My=Ee.memo(r=>{let{adjustScale:n=!1,children:a,dropAnimation:s,style:o,transition:u,modifiers:h,wrapperElement:g="div",className:p,zIndex:m=999}=r;const{activatorEvent:v,active:y,activeNodeRect:x,containerNodeRect:w,draggableNodes:S,droppableContainers:E,dragOverlay:R,over:T,measuringConfiguration:C,scrollableAncestors:D,scrollableAncestorRects:J,windowRect:G}=zy(),$=j.useContext(Xo),U=z1(y?.id),L=Uy(h,{activatorEvent:v,active:y,activeNodeRect:x,containerNodeRect:w,draggingNodeRect:R.rect,over:T,overlayNodeRect:R.rect,scrollableAncestors:D,scrollableAncestorRects:J,transform:$,windowRect:G}),q=_h(x),Q=k1({config:s,draggableNodes:S,droppableContainers:E,measuringConfiguration:C}),I=q?R.setRef:void 0;return Ee.createElement(R1,null,Ee.createElement(E1,{animation:Q},y&&U?Ee.createElement(O1,{key:U,id:y.id,ref:I,as:g,activatorEvent:v,adjustScale:n,className:p,transition:u,rect:q,style:{zIndex:m,...o},transform:L},a):null))});function Di(r,n,a){const s=r.slice();return s.splice(a<0?s.length+a:a,0,s.splice(n,1)[0]),s}function M1(r,n){return r.reduce((a,s,o)=>{const u=n.get(s);return u&&(a[o]=u),a},Array(r.length))}function xo(r){return r!==null&&r>=0}function L1(r,n){if(r===n)return!0;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}function B1(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Ch=r=>{let{rects:n,activeIndex:a,overIndex:s,index:o}=r;const u=Di(n,s,a),h=n[o],g=u[o];return!g||!h?null:{x:g.left-h.left,y:g.top-h.top,scaleX:g.width/h.width,scaleY:g.height/h.height}},wo={scaleX:1,scaleY:1},Mo=r=>{var n;let{activeIndex:a,activeNodeRect:s,index:o,rects:u,overIndex:h}=r;const g=(n=u[a])!=null?n:s;if(!g)return null;if(o===a){const m=u[h];return m?{x:0,y:a<h?m.top+m.height-(g.top+g.height):m.top-g.top,...wo}:null}const p=I1(u,o,a);return o>a&&o<=h?{x:0,y:-g.height-p,...wo}:o<a&&o>=h?{x:0,y:g.height+p,...wo}:{x:0,y:0,...wo}};function I1(r,n,a){const s=r[n],o=r[n-1],u=r[n+1];return s?a<n?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const Ly="Sortable",By=Ee.createContext({activeIndex:-1,containerId:Ly,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ch,disabled:{draggable:!1,droppable:!1}});function Is(r){let{children:n,id:a,items:s,strategy:o=Ch,disabled:u=!1}=r;const{active:h,dragOverlay:g,droppableRects:p,over:m,measureDroppableContainers:v}=zy(),y=Ws(Ly,a),x=g.rect!==null,w=j.useMemo(()=>s.map($=>typeof $=="object"&&"id"in $?$.id:$),[s]),S=h!=null,E=h?w.indexOf(h.id):-1,R=m?w.indexOf(m.id):-1,T=j.useRef(w),C=!L1(w,T.current),D=R!==-1&&E===-1||C,J=B1(u);Kn(()=>{C&&S&&v(w)},[C,w,S,v]),j.useEffect(()=>{T.current=w},[w]);const G=j.useMemo(()=>({activeIndex:E,containerId:y,disabled:J,disableTransforms:D,items:w,overIndex:R,useDragOverlay:x,sortedRects:M1(w,p),strategy:o}),[E,y,J.draggable,J.droppable,D,w,R,p,x,o]);return Ee.createElement(By.Provider,{value:G},n)}const q1=r=>{let{id:n,items:a,activeIndex:s,overIndex:o}=r;return Di(a,s,o).indexOf(n)},$1=r=>{let{containerId:n,isSorting:a,wasDragging:s,index:o,items:u,newIndex:h,previousItems:g,previousContainerId:p,transition:m}=r;return!m||!s||g!==u&&o===h?!1:a?!0:h!==o&&n===p},H1={duration:200,easing:"ease"},Iy="transform",G1=Ln.Transition.toString({property:Iy,duration:0,easing:"linear"}),P1={roleDescription:"sortable"};function V1(r){let{disabled:n,index:a,node:s,rect:o}=r;const[u,h]=j.useState(null),g=j.useRef(a);return Kn(()=>{if(!n&&a!==g.current&&s.current){const p=o.current;if(p){const m=Ni(s.current,{ignoreTransform:!0}),v={x:p.left-m.left,y:p.top-m.top,scaleX:p.width/m.width,scaleY:p.height/m.height};(v.x||v.y)&&h(v)}}a!==g.current&&(g.current=a)},[n,a,s,o]),j.useEffect(()=>{u&&h(null)},[u]),u}function rl(r){let{animateLayoutChanges:n=$1,attributes:a,disabled:s,data:o,getNewIndex:u=q1,id:h,strategy:g,resizeObserverConfig:p,transition:m=H1}=r;const{items:v,containerId:y,activeIndex:x,disabled:w,disableTransforms:S,sortedRects:E,overIndex:R,useDragOverlay:T,strategy:C}=j.useContext(By),D=Y1(s,w),J=v.indexOf(h),G=j.useMemo(()=>({sortable:{containerId:y,index:J,items:v},...o}),[y,o,J,v]),$=j.useMemo(()=>v.slice(v.indexOf(h)),[v,h]),{rect:U,node:L,isOver:q,setNodeRef:Q}=jh({id:h,data:G,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:$,...p}}),{active:I,activatorEvent:A,activeNodeRect:H,attributes:F,setNodeRef:ee,listeners:N,isDragging:V,over:W,setActivatorNodeRef:ne,transform:oe}=S1({id:h,data:G,attributes:{...P1,...a},disabled:D.draggable}),O=dS(Q,ee),B=!!I,ie=B&&!S&&xo(x)&&xo(R),ce=!T&&V,ve=ce&&ie?oe:null,Oe=ie?ve??(g??C)({rects:E,activeNodeRect:H,activeIndex:x,overIndex:R,index:J}):null,Ve=xo(x)&&xo(R)?u({id:h,items:v,activeIndex:x,overIndex:R}):J,De=I?.id,Ne=j.useRef({activeId:De,items:v,newIndex:Ve,containerId:y}),qt=v!==Ne.current.items,Ct=n({active:I,containerId:y,isDragging:V,isSorting:B,id:h,index:J,items:v,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:m,wasDragging:Ne.current.activeId!=null}),sn=V1({disabled:!Ct,index:J,node:L,rect:U});return j.useEffect(()=>{B&&Ne.current.newIndex!==Ve&&(Ne.current.newIndex=Ve),y!==Ne.current.containerId&&(Ne.current.containerId=y),v!==Ne.current.items&&(Ne.current.items=v)},[B,Ve,y,v]),j.useEffect(()=>{if(De===Ne.current.activeId)return;if(De!=null&&Ne.current.activeId==null){Ne.current.activeId=De;return}const Pt=setTimeout(()=>{Ne.current.activeId=De},50);return()=>clearTimeout(Pt)},[De]),{active:I,activeIndex:x,attributes:F,data:G,rect:U,index:J,newIndex:Ve,items:v,isOver:q,isSorting:B,isDragging:V,listeners:N,node:L,overIndex:R,over:W,setNodeRef:O,setActivatorNodeRef:ne,setDroppableNodeRef:Q,setDraggableNodeRef:ee,transform:sn??Oe,transition:Je()};function Je(){if(sn||qt&&Ne.current.newIndex===J)return G1;if(!(ce&&!Yo(A)||!m)&&(B||Ct))return Ln.Transition.toString({...m,property:Iy})}}function Y1(r,n){var a,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(a=r?.draggable)!=null?a:n.draggable,droppable:(s=r?.droppable)!=null?s:n.droppable}}function Lo(r){if(!r)return!1;const n=r.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const K1=[Ie.Down,Ie.Right,Ie.Up,Ie.Left],al=(r,n)=>{let{context:{active:a,collisionRect:s,droppableRects:o,droppableContainers:u,over:h,scrollableAncestors:g}}=n;if(K1.includes(r.code)){if(r.preventDefault(),!a||!s)return;const p=[];u.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const x=o.get(y.id);if(x)switch(r.code){case Ie.Down:s.top<x.top&&p.push(y);break;case Ie.Up:s.top>x.top&&p.push(y);break;case Ie.Left:s.left>x.left&&p.push(y);break;case Ie.Right:s.left<x.left&&p.push(y);break}});const m=RS({collisionRect:s,droppableRects:o,droppableContainers:p});let v=yy(m,"id");if(v===h?.id&&m.length>1&&(v=m[1].id),v!=null){const y=u.get(a.id),x=u.get(v),w=x?o.get(x.id):null,S=x?.node.current;if(S&&w&&y&&x){const R=Ko(S).some(($,U)=>g[U]!==$),T=qy(y,x),C=J1(y,x),D=R||!T?{x:0,y:0}:{x:C?s.width-w.width:0,y:C?s.height-w.height:0},J={x:w.left,y:w.top};return D.x&&D.y?J:Ms(J,D)}}}};function qy(r,n){return!Lo(r)||!Lo(n)?!1:r.data.current.sortable.containerId===n.data.current.sortable.containerId}function J1(r,n){return!Lo(r)||!Lo(n)||!qy(r,n)?!1:r.data.current.sortable.index<n.data.current.sortable.index}const Zm=r=>{if(!r)return"";const n=new Date(r);return`${n.getFullYear()}/${String(n.getMonth()+1).padStart(2,"0")}/${String(n.getDate()).padStart(2,"0")}`},X1=({recipe:r,isSelected:n,isSelectMode:a,onSelectRecipe:s,onToggleSelection:o,disableDrag:u})=>{const{attributes:h,listeners:g,setNodeRef:p,transform:m,transition:v,isDragging:y}=rl({id:r.id,disabled:u}),x={transform:Ln.Transform.toString(m),transition:v,opacity:y?.5:1,touchAction:"pan-y",height:"100%",outline:"none",cursor:u?"default":"grab"};return c.jsx("div",{ref:p,style:x,...h,...g,children:c.jsxs(pt,{hoverable:!0,className:`recipe-card ${n?"selected":""} ${r.type==="bread"?"recipe-card--bread":""} ${/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(w=>/|Dessert/i.test(w))?"recipe-card--dessert":""} ${r.category==="URL"||r.sourceUrl?"recipe-card--url":""}`,style:{height:"100%"},onClick:()=>{a?o(r.id):s(r)},children:[c.jsxs("div",{className:"recipe-card__image-wrapper",children:[r.image?c.jsx("img",{src:r.image,alt:r.title,className:"recipe-card__image"}):c.jsx("div",{className:"recipe-card__image placeholder"}),c.jsx("div",{className:"recipe-card__overlay"}),a&&c.jsx("div",{className:"recipe-card__selection-overlay",children:c.jsx("div",{className:`selection-checkbox ${n?"checked":""}`})}),c.jsx("div",{className:"recipe-card__tags",children:(()=>{if(!r.tags)return null;const w=r.tags.flatMap(R=>(R||"").split(/[,]/)).map(R=>R.trim()).filter(Boolean);return(w.includes("URL")?["URL"]:w).slice(0,1).map((R,T)=>c.jsx("span",{className:"recipe-tag",children:R},`${R}-${T}`))})()})]}),c.jsxs("div",{className:"recipe-card__content",children:[c.jsx("h3",{className:"recipe-title",children:r.title}),c.jsx("p",{className:"recipe-desc",children:r.description}),c.jsxs("div",{className:"recipe-meta",children:[r.storeName&&c.jsxs("span",{children:[" ",r.storeName]}),c.jsxs("div",{className:"recipe-dates",children:[c.jsxs("span",{className:"recipe-date",children:[" : ",Zm(r.created_at)]}),r.updated_at&&c.jsxs("span",{className:"recipe-date",children:[" : ",Zm(r.updated_at)]})]})]})]})]})})},ev=r=>r.type==="bread"||r.tags&&r.tags.some(n=>/|Bread/i.test(n)),tv=r=>{const n=a=>/|Dessert/i.test(a);return/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(n)},nv=r=>/|Sauce/i.test(r.category||"")||r.tags&&r.tags.some(n=>/|Sauce/i.test(n)),rv=r=>/||Decor/i.test(r.category||"")||r.tags&&r.tags.some(n=>/||Decor/i.test(n)),av=({recipes:r,onSelectRecipe:n,isSelectMode:a,selectedIds:s,onToggleSelection:o,disableDrag:u,displayMode:h="normal"})=>{const[g,p]=j.useState({}),m=L=>{p(q=>({...q,[L]:!q[L]}))},v=r.filter(L=>ev(L)),y=r.filter(L=>!ev(L)),x=y.filter(L=>nv(L)),w=y.filter(L=>!nv(L)),S=w.filter(L=>rv(L)),E=w.filter(L=>!rv(L)),R=L=>{const q=L.category||"",Q=L.tags||[];return/|Dressing||Vinaigrette||Mayonnaise/i.test(q)||Q.some(I=>/|Dressing||Vinaigrette||Mayonnaise/i.test(I))},T=E.filter(L=>R(L)),C=E.filter(L=>!R(L)),D=C.filter(L=>tv(L)),J=C.filter(L=>!tv(L)),[G,$]=j.useState(typeof window<"u"&&window.innerWidth>=1024?9:8);Ee.useEffect(()=>{const L=()=>{window.innerWidth>=1024?$(9):$(8)};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const U=(L,q,Q,I)=>{if(q.length===0)return null;const A=h==="all";let H=q,F=!1,ee=!1;return A||(F=g[I],ee=q.length>G,H=F?q:q.slice(0,G)),c.jsxs("div",{className:"recipe-section",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{onClick:()=>!A&&ee&&m(I),style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px",cursor:!A&&ee?"pointer":"default",userSelect:"none"},children:[c.jsx("span",{children:Q})," ",L,c.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal"},children:["(",q.length,")"]}),!A&&ee&&c.jsx("span",{className:"section-toggle-btn",children:F?" ":" "})]}),c.jsx("div",{className:"recipe-grid",children:c.jsx(Is,{items:H.map(N=>N.id),strategy:Ch,children:H.map(N=>{const V=s&&s.has(N.id);return c.jsx(X1,{recipe:N,isSelected:V,isSelectMode:a,onSelectRecipe:n,onToggleSelection:o,disableDrag:u},N.id)})})})]})};return c.jsxs("div",{className:"recipe-list-container",children:[U("",J,"","cooking"),U("",v,"","bread"),U("",D,"","dessert"),U("",x,"","sauce"),U("",T,"","dressing"),U("",S,"","decoration"),r.length===0&&c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:""})]})};function Qo(r,n){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(a[s[o]]=r[s[o]]);return a}function Q1(r,n,a,s){function o(u){return u instanceof a?u:new a(function(h){h(u)})}return new(a||(a=Promise))(function(u,h){function g(v){try{m(s.next(v))}catch(y){h(y)}}function p(v){try{m(s.throw(v))}catch(y){h(y)}}function m(v){v.done?u(v.value):o(v.value).then(g,p)}m((s=s.apply(r,n||[])).next())})}const F1=r=>r?(...n)=>r(...n):(...n)=>fetch(...n);class Rh extends Error{constructor(n,a="FunctionsError",s){super(n),this.name=a,this.context=s}}class W1 extends Rh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class iv extends Rh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class sv extends Rh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Zd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Zd||(Zd={}));class Z1{constructor(n,{headers:a={},customFetch:s,region:o=Zd.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=F1(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Q1(this,arguments,void 0,function*(a,s={}){var o;let u,h;try{const{headers:g,method:p,body:m,signal:v,timeout:y}=s;let x={},{region:w}=s;w||(w=this.region);const S=new URL(`${this.url}/${a}`);w&&w!=="any"&&(x["x-region"]=w,S.searchParams.set("forceFunctionRegion",w));let E;m&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",E=m):typeof m=="string"?(x["Content-Type"]="text/plain",E=m):typeof FormData<"u"&&m instanceof FormData?E=m:(x["Content-Type"]="application/json",E=JSON.stringify(m)):E=m;let R=v;y&&(h=new AbortController,u=setTimeout(()=>h.abort(),y),v?(R=h.signal,v.addEventListener("abort",()=>h.abort())):R=h.signal);const T=yield this.fetch(S.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),g),body:E,signal:R}).catch(G=>{throw new W1(G)}),C=T.headers.get("x-relay-error");if(C&&C==="true")throw new iv(T);if(!T.ok)throw new sv(T);let D=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),J;return D==="application/json"?J=yield T.json():D==="application/octet-stream"||D==="application/pdf"?J=yield T.blob():D==="text/event-stream"?J=T:D==="multipart/form-data"?J=yield T.formData():J=yield T.text(),{data:J,error:null,response:T}}catch(g){return{data:null,error:g,response:g instanceof sv||g instanceof iv?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var e_=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},t_=class{constructor(r){var n,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(n=r.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,n){return this.headers=new Headers(this.headers),this.headers.set(r,n),this}then(r,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let h=null,g=null,p=null,m=u.status,v=u.statusText;if(u.ok){var y,x;if(a.method!=="HEAD"){var w;const T=await u.text();T===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((w=a.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?g=T:g=JSON.parse(T))}const E=(y=a.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),R=(x=u.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");E&&R&&R.length>1&&(p=parseInt(R[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,m=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var S;const E=await u.text();try{h=JSON.parse(E),Array.isArray(h)&&u.status===404&&(g=[],h=null,m=200,v="OK")}catch{u.status===404&&E===""?(m=204,v="No Content"):h={message:E}}if(h&&a.isMaybeSingle&&(!(h==null||(S=h.details)===null||S===void 0)&&S.includes("0 rows"))&&(h=null,m=200,v="OK"),h&&a.shouldThrowOnError)throw new e_(h)}return{error:h,data:g,count:p,status:m,statusText:v}});return this.shouldThrowOnError||(o=o.catch(u=>{var h;let g="";const p=u?.cause;if(p){var m,v,y,x;const S=(m=p?.message)!==null&&m!==void 0?m:"",E=(v=p?.code)!==null&&v!==void 0?v:"";g=`${(y=u?.name)!==null&&y!==void 0?y:"FetchError"}: ${u?.message}`,g+=`

Caused by: ${(x=p?.name)!==null&&x!==void 0?x:"Error"}: ${S}`,E&&(g+=` (${E})`),p?.stack&&(g+=`
${p.stack}`)}else{var w;g=(w=u?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(h=u?.name)!==null&&h!==void 0?h:"FetchError"}: ${u?.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,n)}returns(){return this}overrideTypes(){return this}},n_=class extends t_{select(r){let n=!1;const a=(r??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:n=!0,nullsFirst:a,foreignTable:s,referencedTable:o=s}={}){const u=o?`${o}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${r}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:n,referencedTable:a=n}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,n,{foreignTable:a,referencedTable:s=a}={}){const o=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${n-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:n=!1,settings:a=!1,buffers:s=!1,wal:o=!1,format:u="text"}={}){var h;const g=[r?"analyze":null,n?"verbose":null,a?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const lv=new RegExp("[,()]");var wi=class extends n_{eq(r,n){return this.url.searchParams.append(r,`eq.${n}`),this}neq(r,n){return this.url.searchParams.append(r,`neq.${n}`),this}gt(r,n){return this.url.searchParams.append(r,`gt.${n}`),this}gte(r,n){return this.url.searchParams.append(r,`gte.${n}`),this}lt(r,n){return this.url.searchParams.append(r,`lt.${n}`),this}lte(r,n){return this.url.searchParams.append(r,`lte.${n}`),this}like(r,n){return this.url.searchParams.append(r,`like.${n}`),this}likeAllOf(r,n){return this.url.searchParams.append(r,`like(all).{${n.join(",")}}`),this}likeAnyOf(r,n){return this.url.searchParams.append(r,`like(any).{${n.join(",")}}`),this}ilike(r,n){return this.url.searchParams.append(r,`ilike.${n}`),this}ilikeAllOf(r,n){return this.url.searchParams.append(r,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(r,n){return this.url.searchParams.append(r,`ilike(any).{${n.join(",")}}`),this}regexMatch(r,n){return this.url.searchParams.append(r,`match.${n}`),this}regexIMatch(r,n){return this.url.searchParams.append(r,`imatch.${n}`),this}is(r,n){return this.url.searchParams.append(r,`is.${n}`),this}isDistinct(r,n){return this.url.searchParams.append(r,`isdistinct.${n}`),this}in(r,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&lv.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&lv.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cs.{${n.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(n)}`),this}containedBy(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cd.{${n.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(n)}`),this}rangeGt(r,n){return this.url.searchParams.append(r,`sr.${n}`),this}rangeGte(r,n){return this.url.searchParams.append(r,`nxl.${n}`),this}rangeLt(r,n){return this.url.searchParams.append(r,`sl.${n}`),this}rangeLte(r,n){return this.url.searchParams.append(r,`nxr.${n}`),this}rangeAdjacent(r,n){return this.url.searchParams.append(r,`adj.${n}`),this}overlaps(r,n){return typeof n=="string"?this.url.searchParams.append(r,`ov.${n}`):this.url.searchParams.append(r,`ov.{${n.join(",")}}`),this}textSearch(r,n,{config:a,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${o}fts${u}.${n}`),this}match(r){return Object.entries(r).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(r,n,a){return this.url.searchParams.append(r,`not.${n}.${a}`),this}or(r,{foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,n,a){return this.url.searchParams.append(r,`${n}.${a}`),this}},r_=class{constructor(r,{headers:n={},schema:a,fetch:s}){this.url=r,this.headers=new Headers(n),this.schema=a,this.fetch=s}select(r,n){const{head:a=!1,count:s}=n??{},o=a?"HEAD":"GET";let u=!1;const h=(r??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),s&&this.headers.append("Prefer",`count=${s}`),new wi({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:n,defaultToNull:a=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(u.length>0){const h=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new wi({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(r,{onConflict:n,ignoreDuplicates:a=!1,count:s,defaultToNull:o=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const g=r.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(g.length>0){const p=[...new Set(g)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new wi({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:n}={}){var a;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new wi({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var n;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new wi({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},a_=class $y{constructor(n,{headers:a={},schema:s,fetch:o}={}){this.url=n,this.headers=new Headers(a),this.schemaName=s,this.fetch=o}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new r_(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new $y(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,a={},{head:s=!1,get:o=!1,count:u}={}){var h;let g;const p=new URL(`${this.url}/rpc/${n}`);let m;s||o?(g=s?"HEAD":"GET",Object.entries(a).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{p.searchParams.append(y,x)})):(g="POST",m=a);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new wi({method:g,url:p,headers:v,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class i_{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const s=a.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const s=this.getWebSocketConstructor();return new s(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const s_="2.89.0",l_=`realtime-js/${s_}`,Hy="1.0.0",o_="2.0.0",ov=Hy,eh=1e4,c_=1e3,u_=100;var na;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(na||(na={}));var _t;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(_t||(_t={}));var Yn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Yn||(Yn={}));var th;(function(r){r.websocket="websocket"})(th||(th={}));var Ea;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ea||(Ea={}));class d_{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(n,a,s){var o,u;const h=n.topic,g=(o=n.ref)!==null&&o!==void 0?o:"",p=(u=n.join_ref)!==null&&u!==void 0?u:"",m=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},y=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+g.length+h.length+m.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+x);let S=new DataView(w),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,p.length),S.setUint8(E++,g.length),S.setUint8(E++,h.length),S.setUint8(E++,m.length),S.setUint8(E++,y.length),S.setUint8(E++,a),Array.from(p,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(g,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(h,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(m,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(y,T=>S.setUint8(E++,T.charCodeAt(0)));var R=new Uint8Array(w.byteLength+s.byteLength);return R.set(new Uint8Array(w),0),R.set(new Uint8Array(s),w.byteLength),R.buffer}decode(n,a){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return a(s)}if(typeof n=="string"){const s=JSON.parse(n),[o,u,h,g,p]=s;return a({join_ref:o,ref:u,topic:h,event:g,payload:p})}return a({})}_binaryDecode(n){const a=new DataView(n),s=a.getUint8(0),o=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,a,o)}_decodeUserBroadcast(n,a,s){const o=a.getUint8(1),u=a.getUint8(2),h=a.getUint8(3),g=a.getUint8(4);let p=this.HEADER_LENGTH+4;const m=s.decode(n.slice(p,p+o));p=p+o;const v=s.decode(n.slice(p,p+u));p=p+u;const y=s.decode(n.slice(p,p+h));p=p+h;const x=n.slice(p,n.byteLength),w=g===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,S={type:this.BROADCAST_EVENT,event:v,payload:w};return h>0&&(S.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>a.includes(s)))}}class Gy{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(et||(et={}));const cv=(r,n,a={})=>{var s;const o=(s=a.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((u,h)=>(u[h]=h_(h,r,n,o),u),{}):{}},h_=(r,n,a,s)=>{const o=n.find(g=>g.name===r),u=o?.type,h=a[r];return u&&!s.includes(u)?Py(u,h):nh(h)},Py=(r,n)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return m_(n,a)}switch(r){case et.bool:return f_(n);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return p_(n);case et.json:case et.jsonb:return g_(n);case et.timestamp:return v_(n);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return nh(n);default:return nh(n)}},nh=r=>r,f_=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},p_=r=>{if(typeof r=="string"){const n=parseFloat(r);if(!Number.isNaN(n))return n}return r},g_=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},m_=(r,n)=>{if(typeof r!="string")return r;const a=r.length-1,s=r[a];if(r[0]==="{"&&s==="}"){let u;const h=r.slice(1,a);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(g=>Py(n,g))}return r},v_=r=>typeof r=="string"?r.replace(" ","T"):r,Vy=r=>{const n=new URL(r);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class wd{constructor(n,a,s={},o=eh){this.channel=n,this.event=a,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var s;return this._hasReceived(n)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var uv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(uv||(uv={}));class Os{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Os.syncState(this.state,o,u,h),this.pendingDiffs.forEach(p=>{this.state=Os.syncDiff(this.state,p,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Os.syncDiff(this.state,o,u,h),g())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,s,o){const u=this.cloneDeep(n),h=this.transformState(a),g={},p={};return this.map(u,(m,v)=>{h[m]||(p[m]=v)}),this.map(h,(m,v)=>{const y=u[m];if(y){const x=v.map(R=>R.presence_ref),w=y.map(R=>R.presence_ref),S=v.filter(R=>w.indexOf(R.presence_ref)<0),E=y.filter(R=>x.indexOf(R.presence_ref)<0);S.length>0&&(g[m]=S),E.length>0&&(p[m]=E)}else g[m]=v}),this.syncDiff(u,{joins:g,leaves:p},s,o)}static syncDiff(n,a,s,o){const{joins:u,leaves:h}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(u,(g,p)=>{var m;const v=(m=n[g])!==null&&m!==void 0?m:[];if(n[g]=this.cloneDeep(p),v.length>0){const y=n[g].map(w=>w.presence_ref),x=v.filter(w=>y.indexOf(w.presence_ref)<0);n[g].unshift(...x)}s(g,v,p)}),this.map(h,(g,p)=>{let m=n[g];if(!m)return;const v=p.map(y=>y.presence_ref);m=m.filter(y=>v.indexOf(y.presence_ref)<0),n[g]=m,o(g,m,p),m.length===0&&delete n[g]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(s=>a(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,s)=>{const o=n[s];return"metas"in o?a[s]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[s]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dv;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(dv||(dv={}));var Ns;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Ns||(Ns={}));var jr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(jr||(jr={}));class Ei{constructor(n,a={config:{}},s){var o,u;if(this.topic=n,this.params=a,this.socket=s,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new wd(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new Gy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new Os(this),this.broadcastEndpointURL=Vy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var s,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:h,presence:g,private:p}}=this.params,m=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Ns.PRESENCE]&&this.bindings[Ns.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,y={},x={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>n?.(jr.CHANNEL_ERROR,w)),this._onClose(()=>n?.(jr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:w})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){n?.(jr.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,R=(S=E?.length)!==null&&S!==void 0?S:0,T=[];for(let C=0;C<R;C++){const D=E[C],{filter:{event:J,schema:G,table:$,filter:U}}=D,L=w&&w[C];if(L&&L.event===J&&Ei.isFilterValueEqual(L.schema,G)&&Ei.isFilterValueEqual(L.table,$)&&Ei.isFilterValueEqual(L.filter,U))T.push(Object.assign(Object.assign({},D),{id:L.id}));else{this.unsubscribe(),this.state=_t.errored,n?.(jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,n&&n(jr.SUBSCRIBED);return}}).receive("error",w=>{this.state=_t.errored,n?.(jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n?.(jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,s){return this.state===_t.joined&&n===Ns.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,s)}async httpSend(n,a,s={}){var o;if(a==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const m=await g.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(n,a={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,g,p;const m=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=_t.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new wd(this,Yn.leave,{},n),s.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(n,a,s){const o=new AbortController,u=setTimeout(()=>o.abort(),s),h=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),h}_push(n,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new wd(this,n,a,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>u_){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,s){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,s){var o,u;const h=n.toLocaleLowerCase(),{close:g,error:p,leave:m,join:v}=Yn;if(s&&[g,p,m,v].indexOf(h)>=0&&s!==this._joinRef())return;let x=this._onMessage(h,a,s);if(a&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var S,E,R;return((S=w.filter)===null||S===void 0?void 0:S.event)==="*"||((R=(E=w.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===h}).map(w=>w.callback(x,s)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var S,E,R,T,C,D;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const J=w.id,G=(S=w.filter)===null||S===void 0?void 0:S.event;return J&&((E=a.ids)===null||E===void 0?void 0:E.includes(J))&&(G==="*"||G?.toLocaleLowerCase()===((R=a.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const J=(C=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return J==="*"||J===((D=a?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof x=="object"&&"ids"in x){const S=x.data,{schema:E,table:R,commit_timestamp:T,type:C,errors:D}=S;x=Object.assign(Object.assign({},{schema:E,table:R,commit_timestamp:T,eventType:C,new:{},old:{},errors:D}),this._getPayloadRecords(S))}w.callback(x,s)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,s){const o=n.toLocaleLowerCase(),u={type:o,filter:a,callback:s};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,a){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===s&&Ei.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const s in n)if(n[s]!==a[s])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Yn.close,{},n)}_onError(n){this._on(Yn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=cv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=cv(n.columns,n.old_record)),a}}const Sd=()=>{},So={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},y_=[1e3,2e3,5e3,1e4],b_=1e4,x_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w_{constructor(n,a){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=eh,this.transport=null,this.heartbeatIntervalMs=So.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sd,this.ref=0,this.reconnectTimer=null,this.vsn=ov,this.logger=Sd,this.conn=null,this.sendBuffer=[],this.serializer=new d_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((s=a?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${th.websocket}`,this.httpEndpoint=Vy(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i_.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,s){this.logger(n,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case na.connecting:return Ea.Connecting;case na.open:return Ea.Open;case na.closing:return Ea.Closing;default:return Ea.Closed}}isConnected(){return this.connectionState()===Ea.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===s);if(o)return o;{const u=new Ei(`realtime:${n}`,a,this);return this.channels.push(u),u}}push(n){const{topic:a,event:s,payload:o,ref:u}=n,h=()=>{this.encode(n,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${a} ${s} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(c_,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},So.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:u,ref:h}=a,g=h?`(${h})`:"",p=u.status||"";this.log("receive",`${p} ${s} ${o} ${g}`.trim(),u),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(o,u,h)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===na.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===na.open||this.conn.readyState===na.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Yn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${s}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const s=new Blob([x_],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,s=!1;if(n)a=n,s=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:l_};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Yn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Gy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},So.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,s,o,u,h,g,p,m,v,y,x,w;switch(this.transport=(a=n?.transport)!==null&&a!==void 0?a:null,this.timeout=(s=n?.timeout)!==null&&s!==void 0?s:eh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:So.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:Sd,this.vsn=(p=n?.vsn)!==null&&p!==void 0?p:ov,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=n?.reconnectAfterMs)!==null&&m!==void 0?m:(S=>y_[S-1]||b_),this.vsn){case Hy:this.encode=(v=n?.encode)!==null&&v!==void 0?v:((S,E)=>E(JSON.stringify(S))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:((S,E)=>E(JSON.parse(S)));break;case o_:this.encode=(x=n?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(w=n?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var qs=class extends Error{constructor(r,n){super(r),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function S_(r,n,a){const s=new URL(n,r);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&s.searchParams.set(o,u);return s.toString()}async function __(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function j_(r){const n=r.fetchImpl??globalThis.fetch;return{async request({method:a,path:s,query:o,body:u,headers:h}){const g=S_(r.baseUrl,s,o),p=await __(r.auth),m=await n(g,{method:a,headers:{...u?{"Content-Type":"application/json"}:{},...p,...h},body:u?JSON.stringify(u):void 0}),v=await m.text(),y=(m.headers.get("content-type")||"").includes("application/json"),x=y&&v?JSON.parse(v):v;if(!m.ok){const w=y?x:void 0,S=w?.error;throw new qs(S?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:S?.type,icebergCode:S?.code,details:w})}return{status:m.status,headers:m.headers,data:x}}}}function _o(r){return r.join("")}var E_=class{constructor(r,n=""){this.client=r,this.prefix=n}async listNamespaces(r){const n=r?{parent:_o(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,n){const a={namespace:r.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_o(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_o(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_o(r.namespace)}`}),!0}catch(n){if(n instanceof qs&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(r,n){try{return await this.createNamespace(r,n)}catch(a){if(a instanceof qs&&a.status===409)return;throw a}}};function pi(r){return r.join("")}var C_=class{constructor(r,n="",a){this.client=r,this.prefix=n,this.accessDelegation=a}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables`})).data.identifiers}async createTable(r,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(r,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables/${r.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(r,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables/${r.name}`,headers:n})).data.metadata}async tableExists(r){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pi(r.namespace)}/tables/${r.name}`,headers:n}),!0}catch(a){if(a instanceof qs&&a.status===404)return!1;throw a}}async createTableIfNotExists(r,n){try{return await this.createTable(r,n)}catch(a){if(a instanceof qs&&a.status===409)return await this.loadTable({namespace:r.namespace,name:n.name});throw a}}},R_=class{constructor(r){let n="v1";r.catalogName&&(n+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=j_({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new E_(this.client,n),this.tableOps=new C_(this.client,n,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,n){return this.namespaceOps.createNamespace(r,n)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,n){return this.tableOps.createTable(r,n)}async updateTable(r,n){return this.tableOps.updateTable(r,n)}async dropTable(r,n){await this.tableOps.dropTable(r,n)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,n){return this.namespaceOps.createNamespaceIfNotExists(r,n)}async createTableIfNotExists(r,n){return this.tableOps.createTableIfNotExists(r,n)}},Fo=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function lt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var T_=class extends Fo{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rh=class extends Fo{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}};const Th=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),A_=()=>Response,ah=r=>{if(Array.isArray(r))return r.map(a=>ah(a));if(typeof r=="function"||r!==Object(r))return r;const n={};return Object.entries(r).forEach(([a,s])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=ah(s)}),n},O_=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},N_=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function $s(r){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$s(r)}function D_(r,n){if($s(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if($s(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function k_(r){var n=D_(r,"string");return $s(n)=="symbol"?n:n+""}function U_(r,n,a){return(n=k_(n))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}function hv(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}function we(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?hv(Object(a),!0).forEach(function(s){U_(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):hv(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const _d=r=>{var n;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(n=r.error)===null||n===void 0?void 0:n.message)||JSON.stringify(r)},z_=async(r,n,a)=>{r instanceof await A_()&&!a?.noResolveJson?r.json().then(s=>{const o=r.status||500,u=s?.statusCode||o+"";n(new T_(_d(s),o,u))}).catch(s=>{n(new rh(_d(s),s))}):n(new rh(_d(r),r))},M_=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"||!s?o:(O_(s)?(o.headers=we({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,n?.duplex&&(o.duplex=n.duplex),we(we({},o),a))};async function il(r,n,a,s,o,u){return new Promise((h,g)=>{r(a,M_(n,s,o,u)).then(p=>{if(!p.ok)throw p;return s?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>z_(p,g,s))})}async function Hs(r,n,a,s){return il(r,"GET",n,a,s)}async function Vn(r,n,a,s,o){return il(r,"POST",n,s,o,a)}async function ih(r,n,a,s,o){return il(r,"PUT",n,s,o,a)}async function L_(r,n,a,s){return il(r,"HEAD",n,we(we({},a),{},{noResolveJson:!0}),s)}async function Ah(r,n,a,s,o){return il(r,"DELETE",n,s,o,a)}var B_=class{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}};let Yy;Yy=Symbol.toStringTag;var I_=class{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Yy]="BlobDownloadBuilder",this.promise=null}asStream(){return new B_(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}};const q_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var $_=class{constructor(r,n={},a,s){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=Th(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,n,a,s){var o=this;try{let u;const h=we(we({},fv),s);let g=we(we({},o.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",o.encodeMetadata(p)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),p&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(p))):(u=a,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,p&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),s?.headers&&(g=we(we({},g),s.headers));const m=o._removeEmptyFolders(n),v=o._getFinalPath(m),y=await(r=="PUT"?ih:Vn)(o.fetch,`${o.url}/object/${v}`,u,we({headers:g},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}}async upload(r,n,a){return this.uploadOrUpdate("POST",r,n,a)}async uploadToSignedUrl(r,n,a,s){var o=this;const u=o._removeEmptyFolders(r),h=o._getFinalPath(u),g=new URL(o.url+`/object/upload/sign/${h}`);g.searchParams.set("token",n);try{let p;const m=we({upsert:fv.upsert},s),v=we(we({},o.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&a instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",a)):typeof FormData<"u"&&a instanceof FormData?(p=a,p.append("cacheControl",m.cacheControl)):(p=a,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:u,fullPath:(await ih(o.fetch,g.toString(),p,{headers:v})).Key},error:null}}catch(p){if(o.shouldThrowOnError)throw p;if(lt(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(r,n){var a=this;try{let s=a._getFinalPath(r);const o=we({},a.headers);n?.upsert&&(o["x-upsert"]="true");const u=await Vn(a.fetch,`${a.url}/object/upload/sign/${s}`,{},{headers:o}),h=new URL(a.url+u.url),g=h.searchParams.get("token");if(!g)throw new Fo("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:g},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async update(r,n,a){return this.uploadOrUpdate("PUT",r,n,a)}async move(r,n,a){var s=this;try{return{data:await Vn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async copy(r,n,a){var s=this;try{return{data:{path:(await Vn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async createSignedUrl(r,n,a){var s=this;try{let o=s._getFinalPath(r),u=await Vn(s.fetch,`${s.url}/object/sign/${o}`,we({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:s.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${s.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async createSignedUrls(r,n,a){var s=this;try{const o=await Vn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:r},{headers:s.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(h=>we(we({},h),{},{signedUrl:h.signedURL?encodeURI(`${s.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}download(r,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),o=s?`?${s}`:"",u=this._getFinalPath(r),h=()=>Hs(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new I_(h,this.shouldThrowOnError)}async info(r){var n=this;const a=n._getFinalPath(r);try{return{data:ah(await Hs(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async exists(r){var n=this;const a=n._getFinalPath(r);try{return await L_(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s)&&s instanceof rh){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,n){const a=this._getFinalPath(r),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const u=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&s.push(h);let g=s.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${g}`)}}}async remove(r){var n=this;try{return{data:await Ah(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async list(r,n,a){var s=this;try{const o=we(we(we({},q_),n),{},{prefix:r||""});return{data:await Vn(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},a),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async listV2(r,n){var a=this;try{const s=we({},r);return{data:await Vn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,s,{headers:a.headers},n),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}};const Ky="2.89.0",Jy={"X-Client-Info":`storage-js/${Ky}`};var H_=class{constructor(r,n={},a,s){this.shouldThrowOnError=!1;const o=new URL(r);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=we(we({},Jy),n),this.fetch=Th(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var n=this;try{const a=n.listBucketOptionsToQueryString(r);return{data:await Hs(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async getBucket(r){var n=this;try{return{data:await Hs(n.fetch,`${n.url}/bucket/${r}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async createBucket(r,n={public:!1}){var a=this;try{return{data:await Vn(a.fetch,`${a.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async updateBucket(r,n){var a=this;try{return{data:await ih(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async emptyBucket(r){var n=this;try{return{data:await Vn(n.fetch,`${n.url}/bucket/${r}/empty`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await Ah(n.fetch,`${n.url}/bucket/${r}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},G_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Jy),n),this.fetch=Th(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var n=this;try{return{data:await Vn(n.fetch,`${n.url}/bucket`,{name:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async listBuckets(r){var n=this;try{const a=new URLSearchParams;r?.limit!==void 0&&a.set("limit",r.limit.toString()),r?.offset!==void 0&&a.set("offset",r.offset.toString()),r?.sortColumn&&a.set("sortColumn",r.sortColumn),r?.sortOrder&&a.set("sortOrder",r.sortOrder),r?.search&&a.set("search",r.search);const s=a.toString(),o=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return{data:await Hs(n.fetch,o,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await Ah(n.fetch,`${n.url}/bucket/${r}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}from(r){var n=this;if(!N_(r))throw new Fo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new R_({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const h=o[u];return typeof h!="function"?h:async(...g)=>{try{return{data:await h.apply(o,g),error:null}}catch(p){if(s)throw p;return{data:null,error:p}}}}})}};const Oh={"X-Client-Info":`storage-js/${Ky}`,"Content-Type":"application/json"};var Xy=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function mn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var jd=class extends Xy{constructor(r,n,a){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},P_=class extends Xy{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}};const Nh=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),V_=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},pv=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Y_=async(r,n,a)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!a?.noResolveJson){const s=r.status||500,o=r;if(typeof o.json=="function")o.json().then(u=>{const h=u?.statusCode||u?.code||s+"";n(new jd(pv(u),s,h))}).catch(()=>{const u=s+"";n(new jd(o.statusText||`HTTP ${s} error`,s,u))});else{const u=s+"";n(new jd(o.statusText||`HTTP ${s} error`,s,u))}}else n(new P_(pv(r),r))},K_=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return s?(V_(s)?(o.headers=we({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,we(we({},o),a)):o};async function J_(r,n,a,s,o,u){return new Promise((h,g)=>{r(a,K_(n,s,o,u)).then(p=>{if(!p.ok)throw p;if(s?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>Y_(p,g,s))})}async function vn(r,n,a,s,o){return J_(r,"POST",n,s,o,a)}var X_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Oh),n),this.fetch=Nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/CreateIndex`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async getIndex(r,n){var a=this;try{return{data:await vn(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async listIndexes(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/ListIndexes`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async deleteIndex(r,n){var a=this;try{return{data:await vn(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:a.headers})||{},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}},Q_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Oh),n),this.fetch=Nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var n=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await vn(n.fetch,`${n.url}/PutVectors`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async getVectors(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/GetVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async listVectors(r){var n=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await vn(n.fetch,`${n.url}/ListVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async queryVectors(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/QueryVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async deleteVectors(r){var n=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await vn(n.fetch,`${n.url}/DeleteVectors`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}},F_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=we(we({},Oh),n),this.fetch=Nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async getBucket(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async listBuckets(r={}){var n=this;try{return{data:await vn(n.fetch,`${n.url}/ListVectorBuckets`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}},W_=class extends F_{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new Z_(this.url,this.headers,r,this.fetch)}async createBucket(r){var n=()=>super.createBucket,a=this;return n().call(a,r)}async getBucket(r){var n=()=>super.getBucket,a=this;return n().call(a,r)}async listBuckets(r={}){var n=()=>super.listBuckets,a=this;return n().call(a,r)}async deleteBucket(r){var n=()=>super.deleteBucket,a=this;return n().call(a,r)}},Z_=class extends X_{constructor(r,n,a,s){super(r,n,s),this.vectorBucketName=a}async createIndex(r){var n=()=>super.createIndex,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(r={}){var n=()=>super.listIndexes,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(r){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,r)}async deleteIndex(r){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,r)}index(r){return new ej(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},ej=class extends Q_{constructor(r,n,a,s,o){super(r,n,o),this.vectorBucketName=a,this.indexName=s}async putVectors(r){var n=()=>super.putVectors,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(r){var n=()=>super.getVectors,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(r={}){var n=()=>super.listVectors,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(r){var n=()=>super.queryVectors,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(r){var n=()=>super.deleteVectors,a=this;return n().call(a,we(we({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},tj=class extends H_{constructor(r,n={},a,s){super(r,n,a,s)}from(r){return new $_(this.url,this.headers,r,this.fetch)}get vectors(){return new W_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new G_(this.url+"/iceberg",this.headers,this.fetch)}};const Qy="2.89.0",Si=30*1e3,sh=3,Ed=sh*Si,nj="http://localhost:9999",rj="supabase.auth.token",aj={"X-Client-Info":`gotrue-js/${Qy}`},lh="X-Supabase-Api-Version",Fy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ij=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sj=600*1e3;class Gs extends Error{constructor(n,a,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function me(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class lj extends Gs{constructor(n,a,s){super(n,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function oj(r){return me(r)&&r.name==="AuthApiError"}class Ca extends Gs{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class Ar extends Gs{constructor(n,a,s,o){super(n,s,o),this.name=a,this.status=s}}class gn extends Ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cj(r){return me(r)&&r.name==="AuthSessionMissingError"}class gi extends Ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jo extends Ar{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Eo extends Ar{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uj(r){return me(r)&&r.name==="AuthImplicitGrantRedirectError"}class gv extends Ar{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dj extends Ar{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class oh extends Ar{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function Cd(r){return me(r)&&r.name==="AuthRetryableFetchError"}class mv extends Ar{constructor(n,a,s){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class ch extends Ar{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vv=` 	
\r=`.split(""),hj=(()=>{const r=new Array(128);for(let n=0;n<r.length;n+=1)r[n]=-1;for(let n=0;n<vv.length;n+=1)r[vv[n].charCodeAt(0)]=-2;for(let n=0;n<Bo.length;n+=1)r[Bo[n].charCodeAt(0)]=n;return r})();function yv(r,n,a){if(r!==null)for(n.queue=n.queue<<8|r,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Bo[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Bo[s]),n.queuedBits-=6}}function Wy(r,n,a){const s=hj[r];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function bv(r){const n=[],a=h=>{n.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{gj(h,s,a)};for(let h=0;h<r.length;h+=1)Wy(r.charCodeAt(h),o,u);return n.join("")}function fj(r,n){if(r<=127){n(r);return}else if(r<=2047){n(192|r>>6),n(128|r&63);return}else if(r<=65535){n(224|r>>12),n(128|r>>6&63),n(128|r&63);return}else if(r<=1114111){n(240|r>>18),n(128|r>>12&63),n(128|r>>6&63),n(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function pj(r,n){for(let a=0;a<r.length;a+=1){let s=r.charCodeAt(a);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}fj(s,n)}}function gj(r,n,a){if(n.utf8seq===0){if(r<=127){a(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=r&31;else if(n.utf8seq===3)n.codepoint=r&15;else if(n.utf8seq===4)n.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|r&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Ri(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<r.length;o+=1)Wy(r.charCodeAt(o),a,s);return new Uint8Array(n)}function mj(r){const n=[];return pj(r,a=>n.push(a)),new Uint8Array(n)}function Ra(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};return r.forEach(o=>yv(o,a,s)),yv(null,a,s),n.join("")}function vj(r){return Math.round(Date.now()/1e3)+r}function yj(){return Symbol("auth-callback")}const Bt=()=>typeof window<"u"&&typeof document<"u",Sa={tested:!1,writable:!1},Zy=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sa.tested)return Sa.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Sa.tested=!0,Sa.writable=!0}catch{Sa.tested=!0,Sa.writable=!1}return Sa.writable};function bj(r){const n={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return a.searchParams.forEach((s,o)=>{n[o]=s}),n}const e0=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),xj=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",_i=async(r,n,a)=>{await r.setItem(n,JSON.stringify(a))},_a=async(r,n)=>{const a=await r.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Lt=async(r,n)=>{await r.removeItem(n)};class Wo{constructor(){this.promise=new Wo.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}Wo.promiseConstructor=Promise;function Rd(r){const n=r.split(".");if(n.length!==3)throw new ch("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!ij.test(n[s]))throw new ch("JWT not in base64url format");return{header:JSON.parse(bv(n[0])),payload:JSON.parse(bv(n[1])),signature:Ri(n[2]),raw:{header:n[0],payload:n[1]}}}async function wj(r){return await new Promise(n=>{setTimeout(()=>n(null),r)})}function Sj(r,n){return new Promise((s,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await r(u);if(!n(u,null,h)){s(h);return}}catch(h){if(!n(u,h)){o(h);return}}})()})}function _j(r){return("0"+r.toString(16)).substr(-2)}function jj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,_j).join("")}async function Ej(r){const a=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(s);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Cj(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=await Ej(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mi(r,n,a=!1){const s=jj();let o=s;a&&(o+="/PASSWORD_RECOVERY"),await _i(r,`${n}-code-verifier`,o);const u=await Cj(s);return[u,s===u?"plain":"s256"]}const Rj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tj(r){const n=r.headers.get(lh);if(!n||!n.match(Rj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Aj(r){if(!r)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(r<=n)throw new Error("JWT has expired")}function Oj(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vi(r){if(!Nj.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Td(){const r={};return new Proxy(r,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dj(r,n){return new Proxy(r,{get:(a,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const u=s.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,s,o)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,s,o)}})}function xv(r){return JSON.parse(JSON.stringify(r))}const ja=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),kj=[502,503,504];async function wv(r){var n;if(!xj(r))throw new oh(ja(r),0);if(kj.includes(r.status))throw new oh(ja(r),r.status);let a;try{a=await r.json()}catch(u){throw new Ca(ja(u),u)}let s;const o=Tj(r);if(o&&o.getTime()>=Fy["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new mv(ja(a),r.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new gn}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new mv(ja(a),r.status,a.weak_password.reasons);throw new lj(ja(a),r.status||500,s)}const Uj=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),a))};async function xe(r,n,a,s){var o;const u=Object.assign({},s?.headers);u[lh]||(u[lh]=Fy["2024-01-01"].name),s?.jwt&&(u.Authorization=`Bearer ${s.jwt}`);const h=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(h.redirect_to=s.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await zj(r,n,a+g,{headers:u,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(p):{data:Object.assign({},p),error:null}}async function zj(r,n,a,s,o,u){const h=Uj(n,s,o,u);let g;try{g=await r(a,Object.assign({},h))}catch(p){throw console.error(p),new oh(ja(p),0)}if(g.ok||await wv(g),s?.noResolveJson)return g;try{return await g.json()}catch(p){await wv(p)}}function Pn(r){var n;let a=null;Bj(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=vj(r.expires_in)));const s=(n=r.user)!==null&&n!==void 0?n:r;return{data:{session:a,user:s},error:null}}function Sv(r){const n=Pn(r);return!n.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(n.data.weak_password=r.weak_password),n}function ra(r){var n;return{data:{user:(n=r.user)!==null&&n!==void 0?n:r},error:null}}function Mj(r){return{data:r,error:null}}function Lj(r){const{action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:u}=r,h=Qo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:u},p=Object.assign({},h);return{data:{properties:g,user:p},error:null}}function _v(r){return r}function Bj(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ad=["global","local","others"];class Ij{constructor({url:n="",headers:a={},fetch:s}){this.url=n,this.headers=a,this.fetch=e0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Ad[0]){if(Ad.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ad.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,a={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:ra})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:a}=n,s=Qo(n,["options"]),o=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Lj,redirectTo:a?.redirectTo})}catch(a){if(me(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:ra})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,s,o,u,h,g,p;try{const m={nextPage:null,lastPage:0,total:0},v=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:_v});if(v.error)throw v.error;const y=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(p=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(S.split(";")[1].split("=")[1]);m[`${R}Page`]=E}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(me(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){vi(n);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:ra})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){vi(n);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:ra})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,a=!1){vi(n);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:ra})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){vi(n.userId);try{const{data:a,error:s}=await xe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:s}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteFactor(n){vi(n.userId),vi(n.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,s,o,u,h,g,p;try{const m={nextPage:null,lastPage:0,total:0},v=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:_v});if(v.error)throw v.error;const y=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(p=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(S.split(";")[1].split("=")[1]);m[`${R}Page`]=E}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(me(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}}function jv(r={}){return{getItem:n=>r[n]||null,setItem:(n,a)=>{r[n]=a},removeItem:n=>{delete r[n]}}}const yi={debug:!!(globalThis&&Zy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class t0 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class qj extends t0{}async function $j(r,n,a){yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),yi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await a()}finally{yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(n===0)throw yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new qj(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(yi.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function Hj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function n0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Gj(r){return parseInt(r,16)}function Pj(r){const n=new TextEncoder().encode(r);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function Vj(r){var n;const{chainId:a,domain:s,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:p,resources:m,scheme:v,uri:y,version:x}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=r.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const w=n0(r.address),S=v?`${v}://${s}`:s,E=r.statement?`${r.statement}
`:"",R=`${S} wants you to sign in with your Ethereum account:
${w}

${E}`;let T=`URI: ${y}
Version: ${x}
Chain ID: ${a}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),g&&(T+=`
Not Before: ${g.toISOString()}`),p&&(T+=`
Request ID: ${p}`),m){let C=`
Resources:`;for(const D of m){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);C+=`
- ${D}`}T+=C}return`${R}
${T}`}class xt extends Error{constructor({message:n,code:a,cause:s,name:o}){var u;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(u=o??(s instanceof Error?s.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class Io extends xt{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function Yj({error:r,options:n}){var a,s,o;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(n.mediation==="conditional"&&((s=u.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(r0(h)){if(u.rp.id!==h)return new xt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Kj({error:r,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(r0(s)){if(a.rpId!==s)return new xt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class Jj{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Xj=new Jj;function Qj(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:n,user:a,excludeCredentials:s}=r,o=Qo(r,["challenge","user","excludeCredentials"]),u=Ri(n).buffer,h=Object.assign(Object.assign({},a),{id:Ri(a.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:u,user:h});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const m=s[p];g.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Ri(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return g}function Fj(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:n,allowCredentials:a}=r,s=Qo(r,["challenge","allowCredentials"]),o=Ri(n).buffer,u=Object.assign(Object.assign({},s),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const g=a[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:Ri(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function Wj(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:Ra(new Uint8Array(r.response.attestationObject)),clientDataJSON:Ra(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Zj(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,s=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Ra(new Uint8Array(o.authenticatorData)),clientDataJSON:Ra(new Uint8Array(o.clientDataJSON)),signature:Ra(new Uint8Array(o.signature)),userHandle:o.userHandle?Ra(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function r0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Ev(){var r,n;return!!(Bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function eE(r){try{const n=await navigator.credentials.create(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",n)}:{data:null,error:new Io("Empty credential response",n)}}catch(n){return{data:null,error:Yj({error:n,options:r})}}}async function tE(r){try{const n=await navigator.credentials.get(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",n)}:{data:null,error:new Io("Empty credential response",n)}}catch(n){return{data:null,error:Kj({error:n,options:r})}}}const nE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},rE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qo(...r){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of r)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))s[u]=h;else if(a(h))s[u]=h;else if(n(h)){const g=s[u];n(g)?s[u]=qo(g,h):s[u]=qo(h)}else s[u]=h}return s}function aE(r,n){return qo(nE,r,n||{})}function iE(r,n){return qo(rE,r,n||{})}class sE{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:s,signal:o},u){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!h)return{data:null,error:g};const p=o??Xj.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:m}=h.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(h.webauthn.type){case"create":{const m=aE(h.webauthn.credential_options.publicKey,u?.create),{data:v,error:y}=await eE({publicKey:m,signal:p});return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const m=iE(h.webauthn.credential_options.publicKey,u?.request),{data:v,error:y}=await tE(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(h){return me(h)?{data:null,error:h}:{data:null,error:new Ca("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:a,webauthn:s}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Gs("rpId is required for WebAuthn authentication")};try{if(!Ev())return{data:null,error:new Ca("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:s},signal:o},{request:u});if(!h)return{data:null,error:g};const{webauthn:p}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:p.type,rpId:a,rpOrigins:s,credential_response:p.credential_response}})}catch(h){return me(h)?{data:null,error:h}:{data:null,error:new Ca("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Gs("rpId is required for WebAuthn registration")};try{if(!Ev())return{data:null,error:new Ca("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:g};const{data:p,error:m}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:a,rpOrigins:s},signal:o},{create:u});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:a,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(h){return me(h)?{data:null,error:h}:{data:null,error:new Ca("Unexpected error in register",h)}}}}Hj();const lE={url:nj,storageKey:rj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Cv(r,n,a){return await a()}const bi={};class Ps{get jwks(){var n,a;return(a=(n=bi[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){bi[this.storageKey]=Object.assign(Object.assign({},bi[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=bi[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){bi[this.storageKey]=Object.assign(Object.assign({},bi[this.storageKey]),{cachedAt:n})}constructor(n){var a,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},lE),n);if(this.storageKey=u.storageKey,this.instanceID=(a=Ps.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Ps.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Bt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Ij({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=e0(u.fetch),this.lock=u.lock||Cv,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Bt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=$j:this.lock=Cv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Zy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jv(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=jv(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qy}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},s="none";if(Bt()&&(a=bj(window.location.href),this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce")),Bt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:u}=await this._getSessionFromURL(a,s);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),uj(u)){const p=(n=u.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return me(a)?this._returnResult({error:a}):this._returnResult({error:new Ca("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,s,o;try{const u=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Pn}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const p=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var a,s,o;try{let u;if("email"in n){const{email:v,password:y,options:x}=n;let w=null,S=null;this.flowType==="pkce"&&([w,S]=await mi(this.storage,this.storageKey)),u=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:y,data:(a=x?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:S},xform:Pn})}else if("phone"in n){const{phone:v,password:y,options:x}=n;u=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Pn})}else throw new jo("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return await Lt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const p=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let a;if("email"in n){const{email:u,password:h,options:g}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Sv})}else if("phone"in n){const{phone:u,password:h,options:g}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Sv})}else throw new jo("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const u=new gi;return this._returnResult({data:{user:null,session:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,s,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,s,o,u,h,g,p,m,v,y,x;let w,S;if("message"in n)w=n.message,S=n.signature;else{const{chain:E,wallet:R,statement:T,options:C}=n;let D;if(Bt())if(typeof R=="object")D=R;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")D=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=R}const J=new URL((a=C?.url)!==null&&a!==void 0?a:window.location.href),G=await D.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=n0(G[0]);let U=(s=C?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!U){const q=await D.request({method:"eth_chainId"});U=Gj(q)}const L={domain:J.host,address:$,statement:T,uri:J.href,version:"1",chainId:U,nonce:(o=C?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=C?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=C?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=C?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=Vj(L),S=await D.request({method:"personal_sign",params:[Pj(w),$]})}try{const{data:E,error:R}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:S},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Pn});if(R)throw R;if(!E||!E.session||!E.user){const T=new gi;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:R})}catch(E){if(me(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(n){var a,s,o,u,h,g,p,m,v,y,x,w;let S,E;if("message"in n)S=n.message,E=n.signature;else{const{chain:R,wallet:T,statement:C,options:D}=n;let J;if(Bt())if(typeof T=="object")J=T;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))J=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=T}const G=new URL((a=D?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in J&&J.signIn){const $=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),C?{statement:C}:null));let U;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")U=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)U=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)S=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),E=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${G.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(s=D?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=D?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((h=D?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((m=D?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((y=(v=D?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...D.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const $=await J.signMessage(new TextEncoder().encode(S),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=$}}try{const{data:R,error:T}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ra(E)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Pn});if(T)throw T;if(!R||!R.session||!R.user){const C=new gi;return this._returnResult({data:{user:null,session:null},error:C})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:T})}catch(R){if(me(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(n){const a=await _a(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(a??"").split("/");try{if(!s&&this.flowType==="pkce")throw new dj;const{data:u,error:h}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:Pn});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new gi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:h})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:a,provider:s,token:o,access_token:u,nonce:h}=n,g=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Pn}),{data:p,error:m}=g;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const v=new gi;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,s,o,u,h;try{if("email"in n){const{email:g,options:p}=n;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await mi(this.storage,this.storageKey));const{error:y}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in n){const{phone:g,options:p}=n,{data:m,error:v}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:v})}throw new jo("You must provide either an email or phone number.")}catch(g){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var a,s;try{let o,u;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,u=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:g}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Pn});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,m=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var a,s,o,u,h;try{let g=null,p=null;this.flowType==="pkce"&&([g,p]=await mi(this.storage,this.storageKey));const m=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:p}),headers:this.headers,xform:Mj});return!((u=m.data)===null||u===void 0)&&u.url&&Bt()&&!(!((h=n.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(g){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)throw s;if(!a)throw new gn;const{error:o}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:u}=n,{error:h}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:s,type:o,options:u}=n,{data:h,error:g}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new jo("You must provide either an email or phone number and a type")}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await _a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<Ed:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const h=await _a(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Td()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=Dj(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(-1,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:ra}):await this._useSession(async a=>{var s,o,u;const{data:h,error:g}=a;if(g)throw g;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gn}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:ra})})}catch(a){if(me(a))return cj(a)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async s=>{const{data:o,error:u}=s;if(u)throw u;if(!o.session)throw new gn;const h=o.session;let g=null,p=null;this.flowType==="pkce"&&n.email!=null&&([g,p]=await mi(this.storage,this.storageKey));const{data:m,error:v}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:p}),jwt:h.access_token,xform:ra});if(v)throw v;return h.user=m.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new gn;const a=Date.now()/1e3;let s=a,o=!0,u=null;const{payload:h}=Rd(n.access_token);if(h.exp&&(s=h.exp,o=s<=a),o){const{data:g,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:p}=await this._getUser(n.access_token);if(p)throw p;u={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var s;if(!n){const{data:h,error:g}=a;if(g)throw g;n=(s=h.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new gn;const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!Bt())throw new Eo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Eo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new gv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Eo("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new gv("No code detected.");const{data:C,error:D}=await this._exchangeCodeForSession(n.code);if(D)throw D;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:g,expires_at:p,token_type:m}=n;if(!u||!g||!h||!m)throw new Eo("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(g);let x=v+y;p&&(x=parseInt(p));const w=x-v;w*1e3<=Si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const S=x-y;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,x,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,x,v);const{data:E,error:R}=await this._getUser(u);if(R)throw R;const T={provider_token:s,provider_refresh_token:o,access_token:u,expires_in:y,expires_at:x,refresh_token:h,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:n.type},error:null})}catch(s){if(me(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await _a(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const h=(s=o.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:g}=await this.admin.signOut(h,n);if(g&&!(oj(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=yj(),s={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async a=>{var s,o;try{const{data:{session:u},error:h}=a;if(h)throw h;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,a={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await mi(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:s,error:o}=await this._useSession(async u=>{var h,g,p,m,v;const{data:y,error:x}=u;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Bt()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:n.provider,url:s?.url},error:null})}catch(s){if(me(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var s;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:h,provider:g,token:p,access_token:m,nonce:v}=n,y=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=u?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Pn}),{data:x,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new gi}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(o){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var s,o;const{data:u,error:h}=a;if(h)throw h;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await Sj(async o=>(o>0&&await wj(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Pn})),(o,u)=>{const h=200*Math.pow(2,o);return u&&Cd(u)&&Date.now()+h-s<Si})}catch(s){if(this._debug(a,"error",s),me(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",s),Bt()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await _a(this.storage,this.storageKey);if(o&&this.userStorage){let h=await _a(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await _i(this.userStorage,this.storageKey+"-user",h)),o.user=(n=h?.user)!==null&&n!==void 0?n:Td()}else if(o&&!o.user&&!o.user){const h=await _a(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await Lt(this.storage,this.storageKey+"-user"),await _i(this.storage,this.storageKey,o)):o.user=Td()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Ed;if(this._debug(s,`session has${u?"":" not"} expired with margin of ${Ed}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Cd(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(o.access_token);!g&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var a,s;if(!n)throw new gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Wo;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new gn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(o,"error",u),me(u)){const h={data:null,error:u};return Cd(u)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:a});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,a)}catch(p){u.push(p)}});if(await Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Lt(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await _i(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const u=xv(o);await _i(this.storage,this.storageKey,u)}else{const o=xv(a);await _i(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Bt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Si);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/Si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Si}ms, refresh threshold is ${sh} ticks`),o<=sh&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof t0)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,s){const o=[`provider=${encodeURIComponent(a)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[u,h]=await mi(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(g.toString())}if(s?.queryParams){const u=new URLSearchParams(s.queryParams);o.push(u.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):await xe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var s,o;const{data:u,error:h}=a;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:m}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=u?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(n.factorType==="totp"&&p.type==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Wj(n.webauthn.credential_response):Zj(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:p}=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:p}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Qj(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Fj(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=a?.factors)!==null&&n!==void 0?n:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var n,a;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Rd(s.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((a=(n=s.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const m=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new gn})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new gn});const h=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Bt()&&!a?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new gn});const h=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Bt()&&!a?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;return s?this._returnResult({data:null,error:s}):a?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new gn})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new gn})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let s=a.keys.find(g=>g.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(g=>g.kid===n),s&&this.jwks_cached_at+sj>o)return s;const{data:u,error:h}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,s=u.keys.find(g=>g.kid===n),!s)?null:s}async getClaims(n,a={}){try{let s=n;if(!s){const{data:w,error:S}=await this.getSession();if(S||!w.session)return this._returnResult({data:null,error:S});s=w.session.access_token}const{header:o,payload:u,signature:h,raw:{header:g,payload:p}}=Rd(s);a?.allowExpired||Aj(u.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!m){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:u,header:o,signature:h},error:null}}const v=Oj(o.alg),y=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,h,mj(`${g}.${p}`)))throw new ch("Invalid JWT signature");return{data:{claims:u,header:o,signature:h},error:null}}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}}Ps.nextInstanceID={};const oE=Ps,cE="2.89.0";let Cs="";typeof Deno<"u"?Cs="deno":typeof document<"u"?Cs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cs="react-native":Cs="node";const uE={"X-Client-Info":`supabase-js-${Cs}/${cE}`},dE={headers:uE},hE={schema:"public"},fE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pE={};function Vs(r){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs(r)}function gE(r,n){if(Vs(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Vs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function mE(r){var n=gE(r,"string");return Vs(n)=="symbol"?n:n+""}function vE(r,n,a){return(n=mE(n))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}function Rv(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}function ut(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Rv(Object(a),!0).forEach(function(s){vE(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Rv(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const yE=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),bE=()=>Headers,xE=(r,n,a)=>{const s=yE(a),o=bE();return async(u,h)=>{var g;const p=(g=await n())!==null&&g!==void 0?g:r;let m=new o(h?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),s(u,ut(ut({},h),{},{headers:m}))}};function wE(r){return r.endsWith("/")?r:r+"/"}function SE(r,n){var a,s;const{db:o,auth:u,realtime:h,global:g}=r,{db:p,auth:m,realtime:v,global:y}=n,x={db:ut(ut({},p),o),auth:ut(ut({},m),u),realtime:ut(ut({},v),h),storage:{},global:ut(ut(ut({},y),g),{},{headers:ut(ut({},(a=y?.headers)!==null&&a!==void 0?a:{}),(s=g?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?x.accessToken=r.accessToken:delete x.accessToken,x}function _E(r){const n=r?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wE(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var jE=class extends oE{constructor(r){super(r)}},EE=class{constructor(r,n,a){var s,o;this.supabaseUrl=r,this.supabaseKey=n;const u=_E(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:hE,realtime:pE,auth:ut(ut({},fE),{},{storageKey:h}),global:dE},p=SE(a??{},g);if(this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=xE(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(ut({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new a_(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new tj(this.storageUrl.href,this.headers,this.fetch,a?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Z1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,n,a;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(n=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,storageKey:u,flowType:h,lock:g,debug:p,throwOnError:m},v,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jE({url:this.authUrl.href,headers:ut(ut({},x),v),storageKey:u,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,flowType:h,lock:g,debug:p,throwOnError:m,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new w_(this.realtimeUrl.href,ut(ut({},r),{},{params:ut(ut({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const CE=(r,n,a)=>new EE(r,n,a);function RE(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const n=r.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}RE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Od={BASE_URL:"/app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvY2JuaWZ1YWN0YnZteWpyYXh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNzQ2OTgsImV4cCI6MjA4Mjk1MDY5OH0.q33wfcASsQf0Fec3S6fa5CVG2KC9m5Q912Szu7KIyN0",VITE_SUPABASE_URL:"https://hocbnifuactbvmyjraxy.supabase.co"};var Nd={};const a0=r=>typeof import.meta<"u"&&Od&&Od[r]?Od[r]:typeof process<"u"&&process&&Nd&&Nd[r]?Nd[r]:null,TE=a0("VITE_SUPABASE_URL")||"https://hocbnifuactbvmyjraxy.supabase.co",AE=a0("VITE_SUPABASE_ANON_KEY")||"sb_publishable_CmEv4H4dXwtqm65i_jpsCQ_8BtDOucx",je=CE(TE,AE),OE={async translateRecipe(r,n="EN-US"){const a=[];a.push(r.title||""),a.push(r.description||"");let s=2,o=2;if(r.type==="bread"){const h=r.flours||[],g=r.breadIngredients||[];h.forEach(p=>a.push(p.name||"")),g.forEach(p=>a.push(p.name||"")),o=s+h.length+g.length}else{const h=r.ingredients||[];h.forEach(g=>{const p=typeof g=="string"?g:g.name||"";a.push(p)}),o=s+h.length}const u=r.steps||[];if(u.forEach(h=>{const g=typeof h=="object"&&h!==null?h.text||"":h||"";a.push(g)}),a.length===0)return r;try{const h=await this.translateList(a,n),g={...r};if(g.title=h[0],g.description=h[1],r.type==="bread"){const p=(r.flours||[]).length,m=(r.breadIngredients||[]).length;g.flours=(r.flours||[]).map((v,y)=>({...v,name:h[s+y]})),g.breadIngredients=(r.breadIngredients||[]).map((v,y)=>({...v,name:h[s+p+y]}))}else g.ingredients=(r.ingredients||[]).map((p,m)=>{const v=h[s+m];return typeof p=="string"?v:{...p,name:v}});return g.steps=u.map((p,m)=>{const v=h[o+m];return typeof p=="object"&&p!==null?{...p,text:v}:v}),g}catch(h){throw console.error("Translation failed:",h),h}},async translateList(r,n){const{data:a,error:s}=await je.functions.invoke("translate",{body:{text:r,target_lang:n}});if(s)throw console.error("Supabase Function Invocation Error:",s),new Error(`Translation Error: ${s.message}`);if(a&&a.error)throw console.error("Edge Function returned error:",a.error),new Error(`Translation Error: ${a.error}`);return a.translations.map(o=>o.text)}},It={async fetchRecipes(r){let n=[];try{const{data:o,error:u}=await je.from("recipes").select("*, recipe_sources(url)").order("order_index",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});if(u)throw u;n=o.map(ea)}catch(o){console.warn("Supabase fetch failed, falling back to LocalStorage:",o);try{const u=localStorage.getItem("local_recipes");u&&(n=JSON.parse(u).map(h=>typeof ea=="function"?ea(h):h))}catch(u){console.error("LocalStorage read error:",u),n=[]}}if(!r)return console.warn("fetchRecipes: No currentUser, returning empty list."),[];console.log("fetchRecipes: Filtering for user:",r);let a=!1;const s=`user_prefs_${r.id}`;try{const o=JSON.parse(localStorage.getItem(s)||"{}");o.show_master_recipes!==void 0&&(a=o.show_master_recipes===!0,console.log("Using LocalStorage preference:",a))}catch(o){console.warn("Local preference read error",o)}try{const{data:o}=await je.from("app_users").select("show_master_recipes").eq("id",r.id).single();o&&o.show_master_recipes!==null&&(a=o.show_master_recipes===!0)}catch(o){console.warn("Failed to fetch user preference from DB",o)}return n.filter(o=>{if(r.id==="admin")return!0;const u=o.tags||[],h=u.find(v=>v&&v.startsWith("owner:"));if(console.log(`Recipe ${o.title} tags:`,u,"OwnerTag:",h),!h)return u.includes("public")?!0:a?(console.log("Visible (Master/Implicit)"),!0):!1;const g=h===`owner:${r.id}`,p=u.includes("public"),m=h==="owner:yoshito";return!!(g||p||m&&a)})},_filterRecipesInApp(r,n){return this.fetchRecipes(n)},async uploadImage(r){const n=r.name.split(".").pop(),s=`${`${Date.now()}-${Math.random().toString(36).substring(7)}.${n}`}`,{error:o}=await je.storage.from("recipe-images").upload(s,r);if(o)throw o;const{data:u}=je.storage.from("recipe-images").getPublicUrl(s);return u.publicUrl},async createRecipe(r,n){console.log("createRecipe called with user:",n);const{id:a,created_at:s,sourceUrl:o,...u}=r;if(u.image instanceof File&&(u.image=await this.uploadImage(u.image)),n){const p=(u.tags||[]).filter(m=>!m.startsWith("owner:"));u.tags=[...p,`owner:${n.id}`],console.log("Added owner tag. New tags:",u.tags)}else console.warn("createRecipe: No currentUser provided! Recipe will be public.");const h=Dd(u);try{const{data:g,error:p}=await je.from("recipes").insert([h]).select().single();if(p)throw p;if(o){const{error:m}=await je.from("recipe_sources").insert([{recipe_id:g.id,url:o}]);m&&console.error("Failed to save source URL:",m)}return ea({...g,recipe_sources:o?[{url:o}]:[]})}catch(g){console.warn("Supabase create failed, using LocalStorage fallback:",g);const p=Date.now(),m={...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),tags:u.tags||[]},v=Dd(m);v.id=p,v.created_at=m.created_at,console.log("Saving to LocalStorage:",v);try{const y=localStorage.getItem("local_recipes"),x=y?JSON.parse(y):[];x.push(v),localStorage.setItem("local_recipes",JSON.stringify(x)),console.log("Saved to LocalStorage success. Total recipes:",x.length)}catch(y){throw console.error("Failed to save to LocalStorage:",y),g}return ea(v)}},async updateRecipe(r){const{id:n,created_at:a,sourceUrl:s,...o}=r;o.image instanceof File&&(o.image=await this.uploadImage(o.image));const u=Dd(o);try{const{data:h,error:g}=await je.from("recipes").update(u).eq("id",r.id).select().single();if(g)throw g;if(s!==void 0&&(await je.from("recipe_sources").delete().eq("recipe_id",r.id),s)){const{error:p}=await je.from("recipe_sources").insert([{recipe_id:r.id,url:s}]);p&&console.error("Failed to update source URL:",p)}return ea({...h,recipe_sources:s?[{url:s}]:[]})}catch(h){console.warn("Supabase update failed, using LocalStorage fallback:",h);const g=localStorage.getItem("local_recipes");if(g){let p=JSON.parse(g);const m=p.findIndex(v=>v.id==r.id);if(m!==-1){const v={...p[m],...u,updated_at:new Date().toISOString()};return p[m]=v,localStorage.setItem("local_recipes",JSON.stringify(p)),ea(v)}}throw h}},async duplicateRecipe(r,n){const{id:a,created_at:s,updated_at:o,image:u,...h}=r;h.title=`${h.title} ()`;let g=null;if(u)try{const p=u.split("/").pop(),m=`copy-${Date.now()}-${p}`,{error:v}=await je.storage.from("recipe-images").copy(p,m);if(v)console.warn("Image copy failed, using original URL:",v),g=u;else{const{data:y}=je.storage.from("recipe-images").getPublicUrl(m);g=y.publicUrl}}catch(p){console.warn("Image copy logic error:",p),g=u}return h.image=g,await this.createRecipe(h,n)},async fetchDeletedRecipes(){const{data:r,error:n}=await je.from("deleted_recipes").select("*").order("deleted_at",{ascending:!1});if(n)throw n;return r.map(NE)},async getDeletedCount(){const{count:r,error:n}=await je.from("deleted_recipes").select("*",{count:"exact",head:!0});if(n)throw n;return r},async deleteRecipe(r){try{const{data:n,error:a}=await je.from("recipes").select("*").eq("id",r).single();if(a)throw a;const{error:s}=await je.from("deleted_recipes").insert([{original_id:n.id,title:n.title,description:n.description,image:n.image,prep_time:n.prep_time,cook_time:n.cook_time,servings:n.servings,tags:n.tags,ingredients:n.ingredients,steps:n.steps,created_at:n.created_at}]);if(s)throw s;const{error:o}=await je.from("recipes").delete().eq("id",r);if(o)throw o;return!0}catch(n){console.warn("Supabase delete failed, using LocalStorage fallback:",n);const a=localStorage.getItem("local_recipes");if(a){let s=JSON.parse(a);const o=s.length;if(s=s.filter(u=>u.id!=r),s.length<o)return localStorage.setItem("local_recipes",JSON.stringify(s)),!0}throw n}},async restoreRecipe(r){const{data:n,error:a}=await je.from("deleted_recipes").select("*").eq("id",r).single();if(a)throw a;const{error:s}=await je.from("recipes").insert([{title:n.title,description:n.description,image:n.image,prep_time:n.prep_time,cook_time:n.cook_time,servings:n.servings,tags:n.tags,ingredients:n.ingredients,steps:n.steps,created_at:n.created_at}]);if(s)throw s;const{error:o}=await je.from("deleted_recipes").delete().eq("id",r);if(o)throw o;return!0},async hardDeleteRecipe(r){const{error:n}=await je.from("deleted_recipes").delete().eq("id",r);if(n)throw n;return!0},async fetchRecentRecipes(){const{data:r,error:n}=await je.from("recent_views").select("recipe_id").order("viewed_at",{ascending:!1}).limit(20);if(n)throw n;return r.map(a=>a.recipe_id)},async addToHistory(r){const{error:n}=await je.from("recent_views").upsert({recipe_id:r,viewed_at:new Date().toISOString()},{onConflict:"recipe_id"});if(n)throw n;return!0},async updateOrder(r){const n=r.map(a=>je.from("recipes").update({order_index:a.order_index}).eq("id",a.id));await Promise.all(n)},async exportAllRecipes(){return await this.fetchRecipes()},async importRecipes(r){if(!Array.isArray(r))throw new Error("Invalid backup format");let n=0,a=[];for(const s of r)try{await this.createRecipe(s),n++}catch(o){console.error("Import failed for recipe:",s.title,o),a.push({title:s.title,error:o.message})}return{success:!0,count:n,errors:a}}},Dd=r=>{let n=r.ingredients||[];const a={_meta:!0,type:r.type||"normal"};if(r.ingredientGroups&&r.ingredientGroups.length>0&&(a.groups=r.ingredientGroups),r.stepGroups&&r.stepGroups.length>0){const o=r.steps||[],u=r.stepGroups.map(h=>({...h,count:o.filter(g=>g.groupId===h.id).length}));a.stepGroups=u}if(r.type==="bread"){const o=(r.flours||[]).map(h=>({...h,_group:"flour"})),u=(r.breadIngredients||[]).map(h=>({...h,_group:"other"}));n=[a,...o,...u]}else n=[a,...n];const s=(r.steps||[]).map(o=>typeof o=="string"?o:o.text);return{title:r.title,description:r.description,image:r.image,servings:r.servings,course:r.course,category:r.category,store_name:r.storeName,ingredients:n,steps:s,tags:r.tags||[]}},ea=r=>{const n=r.ingredients||[];let a="normal",s=[],o=[],u=[],h=[],g=n;if(Array.isArray(n)&&n.length>0&&n[0]._meta){const m=n[0];a=m.type||"normal",m.groups&&(u=m.groups),m.stepGroups&&(h=m.stepGroups);const v=n.slice(1);a==="bread"?(s=v.filter(y=>y._group==="flour").map(({_group:y,...x})=>x),o=v.filter(y=>y._group==="other").map(({_group:y,...x})=>x),g=[...s,...o]):g=v}let p=r.steps||[];if(h.length>0&&Array.isArray(p)){let m=0;p=p.map(y=>({text:y}));const v=[];for(h.forEach(y=>{const x=y.count||0;for(let w=0;w<x;w++)m<p.length&&(v.push({...p[m],text:p[m].text,groupId:y.id}),m++)});m<p.length;)v.push({...p[m],groupId:"default"}),m++;p=v}return{...r,prepTime:r.prep_time,cookTime:r.cook_time,storeName:r.store_name,type:a,flours:s,breadIngredients:o,ingredientGroups:u,stepGroups:h,ingredients:g,steps:p.length>0&&typeof p[0]=="object"?p:r.steps,sourceUrl:r.recipe_sources&&r.recipe_sources.length>0?r.recipe_sources[0].url:""}},NE=r=>({...ea(r),deletedAt:r.deleted_at,originalId:r.original_id}),Tv=Object.freeze(Object.defineProperty({__proto__:null,recipeService:It},Symbol.toStringTag,{value:"Module"})),Ds={async fetchAllUsers(){const{data:r,error:n}=await je.from("app_users").select("*").order("created_at",{ascending:!1});if(n)throw n;const{data:a,error:s}=await je.rpc("get_user_recipe_counts");return s?(console.error("Failed to fetch counts via RPC",s),r.map(o=>({...o,recipeCount:0}))):r.map(o=>{const u=a.find(h=>h.user_id===o.id);return{...o,recipeCount:u?u.count:0}})},async deleteUser(r){const{error:n}=await je.from("app_users").delete().eq("id",r);if(n)throw n;return!0},async updateUser(r,n){const{data:a,error:s}=await je.from("app_users").update(n).eq("id",r).select("id, show_master_recipes").single();if(s)throw s;return a},async getSecurityQuestion(r){const{data:n,error:a}=await je.from("app_users").select("secret_question").eq("id",r).single();if(a||!n)throw new Error("");return n.secret_question},async verifySecurityAnswer(r,n){const{data:a,error:s}=await je.from("app_users").select("secret_answer").eq("id",r).single();if(s||!a)throw new Error("");return a.secret_answer===n},async resetPassword(r,n){const{error:a}=await je.from("app_users").update({password:n}).eq("id",r);if(a)throw a;return!0},async updateLastLogin(r){const{error:n}=await je.from("app_users").update({last_login_at:new Date}).eq("id",r);n&&console.error("Failed to update last login",n)}},kd=Object.freeze(Object.defineProperty({__proto__:null,userService:Ds},Symbol.toStringTag,{value:"Module"})),i0=j.createContext(null),DE=({children:r})=>{const[n,a]=j.useState(null),[s,o]=j.useState(!0);j.useEffect(()=>{const p=localStorage.getItem("recipe_app_user");p&&a(JSON.parse(p)),o(!1)},[]);const u=async(p,m,v)=>{try{const{data:y,error:x}=await je.from("app_users").select("id, password").eq("id",p).single();if(x||!y)throw new Error(" (ID)");if(y.password!==m)throw new Error("");if(y.password!==m)throw new Error("");const w={id:p};a(w),Ds.updateLastLogin(p).catch(S=>console.error(S)),v?localStorage.setItem("recipe_app_user",JSON.stringify(w)):localStorage.removeItem("recipe_app_user")}catch(y){throw y.message.includes("JSON")?y:(console.error("Login Error:",y),new Error(y.message===""?y.message:"ID"))}},h=async(p,m,v,y)=>{const{error:x}=await je.from("app_users").insert([{id:p,password:m,secret_question:v||null,secret_answer:y||null}]);if(x)throw console.error("Register Error:",x),x.code==="23505"?new Error("ID"):new Error(": "+(x.message||""));return!0},g=()=>{a(null),localStorage.removeItem("recipe_app_user")};return c.jsx(i0.Provider,{value:{user:n,login:u,logout:g,register:h,loading:s},children:r})},Dh=()=>j.useContext(i0),uh=["","MARUGO-D","MARUGO-OTTO","MARUGO-S","","","MARUGO","MARUGO2","MARUGO GRANDE","MARUGO MARUNOUCHI","","MARUGO YOTSUYA","371BAR","","BAR PELOTA","Claudia2","BISTRO CAVACAVA","eric'S","MITAN","","SOBA-JU","Bar Violet","X&C"," "],kE=[{code:"EN-US",label:" English",name:"English"},{code:"JA",label:" Japanese",name:"Japanese"},{code:"FR",label:" French",name:"French"},{code:"IT",label:" Italian",name:"Italian"},{code:"ES",label:" Spanish",name:"Spanish"},{code:"ZH",label:" Chinese",name:"Chinese"}];var xi={},Ud={exports:{}},zd,Av;function UE(){if(Av)return zd;Av=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zd=r,zd}var Md,Ov;function zE(){if(Ov)return Md;Ov=1;var r=UE();function n(){}function a(){}return a.resetWarningCache=n,Md=function(){function s(h,g,p,m,v,y){if(y!==r){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function o(){return s}var u={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:a,resetWarningCache:n};return u.PropTypes=u,u},Md}var Nv;function s0(){return Nv||(Nv=1,Ud.exports=zE()()),Ud.exports}var Ld,Dv;function l0(){return Dv||(Dv=1,Ld={L:1,M:0,Q:3,H:2}),Ld}var Bd,kv;function o0(){return kv||(kv=1,Bd={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Bd}var Id,Uv;function ME(){if(Uv)return Id;Uv=1;var r=o0();function n(a){this.mode=r.MODE_8BIT_BYTE,this.data=a}return n.prototype={getLength:function(a){return this.data.length},write:function(a){for(var s=0;s<this.data.length;s++)a.put(this.data.charCodeAt(s),8)}},Id=n,Id}var qd,zv;function LE(){if(zv)return qd;zv=1;var r=l0();function n(a,s){this.totalCount=a,this.dataCount=s}return n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(a,s){var o=n.getRsBlockTable(a,s);if(o==null)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+s);for(var u=o.length/3,h=new Array,g=0;g<u;g++)for(var p=o[g*3+0],m=o[g*3+1],v=o[g*3+2],y=0;y<p;y++)h.push(new n(m,v));return h},n.getRsBlockTable=function(a,s){switch(s){case r.L:return n.RS_BLOCK_TABLE[(a-1)*4+0];case r.M:return n.RS_BLOCK_TABLE[(a-1)*4+1];case r.Q:return n.RS_BLOCK_TABLE[(a-1)*4+2];case r.H:return n.RS_BLOCK_TABLE[(a-1)*4+3];default:return}},qd=n,qd}var $d,Mv;function BE(){if(Mv)return $d;Mv=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(n){var a=Math.floor(n/8);return(this.buffer[a]>>>7-n%8&1)==1},put:function(n,a){for(var s=0;s<a;s++)this.putBit((n>>>a-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(n){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),n&&(this.buffer[a]|=128>>>this.length%8),this.length++}},$d=r,$d}var Hd,Lv;function c0(){if(Lv)return Hd;Lv=1;for(var r={glog:function(a){if(a<1)throw new Error("glog("+a+")");return r.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return r.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)r.EXP_TABLE[n]=1<<n;for(var n=8;n<256;n++)r.EXP_TABLE[n]=r.EXP_TABLE[n-4]^r.EXP_TABLE[n-5]^r.EXP_TABLE[n-6]^r.EXP_TABLE[n-8];for(var n=0;n<255;n++)r.LOG_TABLE[r.EXP_TABLE[n]]=n;return Hd=r,Hd}var Gd,Bv;function u0(){if(Bv)return Gd;Bv=1;var r=c0();function n(a,s){if(a.length==null)throw new Error(a.length+"/"+s);for(var o=0;o<a.length&&a[o]==0;)o++;this.num=new Array(a.length-o+s);for(var u=0;u<a.length-o;u++)this.num[u]=a[u+o]}return n.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var s=new Array(this.getLength()+a.getLength()-1),o=0;o<this.getLength();o++)for(var u=0;u<a.getLength();u++)s[o+u]^=r.gexp(r.glog(this.get(o))+r.glog(a.get(u)));return new n(s,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var s=r.glog(this.get(0))-r.glog(a.get(0)),o=new Array(this.getLength()),u=0;u<this.getLength();u++)o[u]=this.get(u);for(var u=0;u<a.getLength();u++)o[u]^=r.gexp(r.glog(a.get(u))+s);return new n(o,0).mod(a)}},Gd=n,Gd}var Pd,Iv;function IE(){if(Iv)return Pd;Iv=1;var r=o0(),n=u0(),a=c0(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(u){for(var h=u<<10;o.getBCHDigit(h)-o.getBCHDigit(o.G15)>=0;)h^=o.G15<<o.getBCHDigit(h)-o.getBCHDigit(o.G15);return(u<<10|h)^o.G15_MASK},getBCHTypeNumber:function(u){for(var h=u<<12;o.getBCHDigit(h)-o.getBCHDigit(o.G18)>=0;)h^=o.G18<<o.getBCHDigit(h)-o.getBCHDigit(o.G18);return u<<12|h},getBCHDigit:function(u){for(var h=0;u!=0;)h++,u>>>=1;return h},getPatternPosition:function(u){return o.PATTERN_POSITION_TABLE[u-1]},getMask:function(u,h,g){switch(u){case s.PATTERN000:return(h+g)%2==0;case s.PATTERN001:return h%2==0;case s.PATTERN010:return g%3==0;case s.PATTERN011:return(h+g)%3==0;case s.PATTERN100:return(Math.floor(h/2)+Math.floor(g/3))%2==0;case s.PATTERN101:return h*g%2+h*g%3==0;case s.PATTERN110:return(h*g%2+h*g%3)%2==0;case s.PATTERN111:return(h*g%3+(h+g)%2)%2==0;default:throw new Error("bad maskPattern:"+u)}},getErrorCorrectPolynomial:function(u){for(var h=new n([1],0),g=0;g<u;g++)h=h.multiply(new n([1,a.gexp(g)],0));return h},getLengthInBits:function(u,h){if(1<=h&&h<10)switch(u){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+u)}else if(h<27)switch(u){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+u)}else if(h<41)switch(u){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+u)}else throw new Error("type:"+h)},getLostPoint:function(u){for(var h=u.getModuleCount(),g=0,p=0;p<h;p++)for(var m=0;m<h;m++){for(var v=0,y=u.isDark(p,m),x=-1;x<=1;x++)if(!(p+x<0||h<=p+x))for(var w=-1;w<=1;w++)m+w<0||h<=m+w||x==0&&w==0||y==u.isDark(p+x,m+w)&&v++;v>5&&(g+=3+v-5)}for(var p=0;p<h-1;p++)for(var m=0;m<h-1;m++){var S=0;u.isDark(p,m)&&S++,u.isDark(p+1,m)&&S++,u.isDark(p,m+1)&&S++,u.isDark(p+1,m+1)&&S++,(S==0||S==4)&&(g+=3)}for(var p=0;p<h;p++)for(var m=0;m<h-6;m++)u.isDark(p,m)&&!u.isDark(p,m+1)&&u.isDark(p,m+2)&&u.isDark(p,m+3)&&u.isDark(p,m+4)&&!u.isDark(p,m+5)&&u.isDark(p,m+6)&&(g+=40);for(var m=0;m<h;m++)for(var p=0;p<h-6;p++)u.isDark(p,m)&&!u.isDark(p+1,m)&&u.isDark(p+2,m)&&u.isDark(p+3,m)&&u.isDark(p+4,m)&&!u.isDark(p+5,m)&&u.isDark(p+6,m)&&(g+=40);for(var E=0,m=0;m<h;m++)for(var p=0;p<h;p++)u.isDark(p,m)&&E++;var R=Math.abs(100*E/h/h-50)/5;return g+=R*10,g}};return Pd=o,Pd}var Vd,qv;function qE(){if(qv)return Vd;qv=1;var r=ME(),n=LE(),a=BE(),s=IE(),o=u0();function u(g,p){this.typeNumber=g,this.errorCorrectLevel=p,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=u.prototype;return h.addData=function(g){var p=new r(g);this.dataList.push(p),this.dataCache=null},h.isDark=function(g,p){if(g<0||this.moduleCount<=g||p<0||this.moduleCount<=p)throw new Error(g+","+p);return this.modules[g][p]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var g=1;for(g=1;g<40;g++){for(var p=n.getRSBlocks(g,this.errorCorrectLevel),m=new a,v=0,y=0;y<p.length;y++)v+=p[y].dataCount;for(var y=0;y<this.dataList.length;y++){var x=this.dataList[y];m.put(x.mode,4),m.put(x.getLength(),s.getLengthInBits(x.mode,g)),x.write(m)}if(m.getLengthInBits()<=v*8)break}this.typeNumber=g}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(g,p){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++){this.modules[m]=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++)this.modules[m][v]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(g,p),this.typeNumber>=7&&this.setupTypeNumber(g),this.dataCache==null&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,p)},h.setupPositionProbePattern=function(g,p){for(var m=-1;m<=7;m++)if(!(g+m<=-1||this.moduleCount<=g+m))for(var v=-1;v<=7;v++)p+v<=-1||this.moduleCount<=p+v||(0<=m&&m<=6&&(v==0||v==6)||0<=v&&v<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=v&&v<=4?this.modules[g+m][p+v]=!0:this.modules[g+m][p+v]=!1)},h.getBestMaskPattern=function(){for(var g=0,p=0,m=0;m<8;m++){this.makeImpl(!0,m);var v=s.getLostPoint(this);(m==0||g>v)&&(g=v,p=m)}return p},h.createMovieClip=function(g,p,m){var v=g.createEmptyMovieClip(p,m),y=1;this.make();for(var x=0;x<this.modules.length;x++)for(var w=x*y,S=0;S<this.modules[x].length;S++){var E=S*y,R=this.modules[x][S];R&&(v.beginFill(0,100),v.moveTo(E,w),v.lineTo(E+y,w),v.lineTo(E+y,w+y),v.lineTo(E,w+y),v.endFill())}return v},h.setupTimingPattern=function(){for(var g=8;g<this.moduleCount-8;g++)this.modules[g][6]==null&&(this.modules[g][6]=g%2==0);for(var p=8;p<this.moduleCount-8;p++)this.modules[6][p]==null&&(this.modules[6][p]=p%2==0)},h.setupPositionAdjustPattern=function(){for(var g=s.getPatternPosition(this.typeNumber),p=0;p<g.length;p++)for(var m=0;m<g.length;m++){var v=g[p],y=g[m];if(this.modules[v][y]==null)for(var x=-2;x<=2;x++)for(var w=-2;w<=2;w++)x==-2||x==2||w==-2||w==2||x==0&&w==0?this.modules[v+x][y+w]=!0:this.modules[v+x][y+w]=!1}},h.setupTypeNumber=function(g){for(var p=s.getBCHTypeNumber(this.typeNumber),m=0;m<18;m++){var v=!g&&(p>>m&1)==1;this.modules[Math.floor(m/3)][m%3+this.moduleCount-8-3]=v}for(var m=0;m<18;m++){var v=!g&&(p>>m&1)==1;this.modules[m%3+this.moduleCount-8-3][Math.floor(m/3)]=v}},h.setupTypeInfo=function(g,p){for(var m=this.errorCorrectLevel<<3|p,v=s.getBCHTypeInfo(m),y=0;y<15;y++){var x=!g&&(v>>y&1)==1;y<6?this.modules[y][8]=x:y<8?this.modules[y+1][8]=x:this.modules[this.moduleCount-15+y][8]=x}for(var y=0;y<15;y++){var x=!g&&(v>>y&1)==1;y<8?this.modules[8][this.moduleCount-y-1]=x:y<9?this.modules[8][15-y-1+1]=x:this.modules[8][15-y-1]=x}this.modules[this.moduleCount-8][8]=!g},h.mapData=function(g,p){for(var m=-1,v=this.moduleCount-1,y=7,x=0,w=this.moduleCount-1;w>0;w-=2)for(w==6&&w--;;){for(var S=0;S<2;S++)if(this.modules[v][w-S]==null){var E=!1;x<g.length&&(E=(g[x]>>>y&1)==1);var R=s.getMask(p,v,w-S);R&&(E=!E),this.modules[v][w-S]=E,y--,y==-1&&(x++,y=7)}if(v+=m,v<0||this.moduleCount<=v){v-=m,m=-m;break}}},u.PAD0=236,u.PAD1=17,u.createData=function(g,p,m){for(var v=n.getRSBlocks(g,p),y=new a,x=0;x<m.length;x++){var w=m[x];y.put(w.mode,4),y.put(w.getLength(),s.getLengthInBits(w.mode,g)),w.write(y)}for(var S=0,x=0;x<v.length;x++)S+=v[x].dataCount;if(y.getLengthInBits()>S*8)throw new Error("code length overflow. ("+y.getLengthInBits()+">"+S*8+")");for(y.getLengthInBits()+4<=S*8&&y.put(0,4);y.getLengthInBits()%8!=0;)y.putBit(!1);for(;!(y.getLengthInBits()>=S*8||(y.put(u.PAD0,8),y.getLengthInBits()>=S*8));)y.put(u.PAD1,8);return u.createBytes(y,v)},u.createBytes=function(g,p){for(var m=0,v=0,y=0,x=new Array(p.length),w=new Array(p.length),S=0;S<p.length;S++){var E=p[S].dataCount,R=p[S].totalCount-E;v=Math.max(v,E),y=Math.max(y,R),x[S]=new Array(E);for(var T=0;T<x[S].length;T++)x[S][T]=255&g.buffer[T+m];m+=E;var C=s.getErrorCorrectPolynomial(R),D=new o(x[S],C.getLength()-1),J=D.mod(C);w[S]=new Array(C.getLength()-1);for(var T=0;T<w[S].length;T++){var G=T+J.getLength()-w[S].length;w[S][T]=G>=0?J.get(G):0}}for(var $=0,T=0;T<p.length;T++)$+=p[T].totalCount;for(var U=new Array($),L=0,T=0;T<v;T++)for(var S=0;S<p.length;S++)T<x[S].length&&(U[L++]=x[S][T]);for(var T=0;T<y;T++)for(var S=0;S<p.length;S++)T<w[S].length&&(U[L++]=w[S][T]);return U},Vd=u,Vd}var Co={},$v;function $E(){if($v)return Co;$v=1,Object.defineProperty(Co,"__esModule",{value:!0});var r=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])}return m},n=s0(),a=u(n),s=Ys(),o=u(s);function u(m){return m&&m.__esModule?m:{default:m}}function h(m,v){var y={};for(var x in m)v.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(m,x)&&(y[x]=m[x]);return y}var g={bgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,bgD:a.default.string.isRequired,fgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,fgD:a.default.string.isRequired,size:a.default.number.isRequired,title:a.default.string,viewBoxSize:a.default.number.isRequired,xmlns:a.default.string},p=(0,s.forwardRef)(function(m,v){var y=m.bgColor,x=m.bgD,w=m.fgD,S=m.fgColor,E=m.size,R=m.title,T=m.viewBoxSize,C=m.xmlns,D=C===void 0?"http://www.w3.org/2000/svg":C,J=h(m,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return o.default.createElement("svg",r({},J,{height:E,ref:v,viewBox:"0 0 "+T+" "+T,width:E,xmlns:D}),R?o.default.createElement("title",null,R):null,o.default.createElement("path",{d:x,fill:y}),o.default.createElement("path",{d:w,fill:S}))});return p.displayName="QRCodeSvg",p.propTypes=g,Co.default=p,Co}var Hv;function HE(){if(Hv)return xi;Hv=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.QRCode=void 0;var r=Object.assign||function(E){for(var R=1;R<arguments.length;R++){var T=arguments[R];for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&(E[C]=T[C])}return E},n=s0(),a=y(n),s=l0(),o=y(s),u=qE(),h=y(u),g=Ys(),p=y(g),m=$E(),v=y(m);function y(E){return E&&E.__esModule?E:{default:E}}function x(E,R){var T={};for(var C in E)R.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(E,C)&&(T[C]=E[C]);return T}var w={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},S=(0,g.forwardRef)(function(E,R){var T=E.bgColor,C=T===void 0?"#FFFFFF":T,D=E.fgColor,J=D===void 0?"#000000":D,G=E.level,$=G===void 0?"L":G,U=E.size,L=U===void 0?256:U,q=E.value,Q=x(E,["bgColor","fgColor","level","size","value"]),I=new h.default(-1,o.default[$]);I.addData(q),I.make();var A=I.modules;return p.default.createElement(v.default,r({},Q,{bgColor:C,bgD:A.map(function(H,F){return H.map(function(ee,N){return ee?"":"M "+N+" "+F+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:J,fgD:A.map(function(H,F){return H.map(function(ee,N){return ee?"M "+N+" "+F+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:R,size:L,viewBoxSize:A.length}))});return xi.QRCode=S,S.displayName="QRCode",S.propTypes=w,xi.default=S,xi}var GE=HE();const PE=Yv(GE),Gv=r=>{if(!r)return"";const n=new Date(r);return`${n.getFullYear()}/${String(n.getMonth()+1).padStart(2,"0")}/${String(n.getDate()).padStart(2,"0")}`},VE=({recipe:r,onBack:n,onEdit:a,onDelete:s,onHardDelete:o,isDeleted:u,onView:h,onDuplicate:g})=>{const{user:p}=Dh(),[m,v]=Ee.useState(!1),[y,x]=Ee.useState(!1),[w,S]=Ee.useState(!1),[E,R]=Ee.useState(new Set),[T,C]=Ee.useState({}),[D,J]=Ee.useState("ORIGINAL"),[G,$]=Ee.useState(!1),[U,L]=Ee.useState(!0),[q,Q]=Ee.useState(""),[I,A]=Ee.useState(1),[H,F]=Ee.useState(""),[ee,N]=Ee.useState(""),V=(de,z)=>{if(!de)return"";const se=parseFloat(de);if(isNaN(se))return de;const le=se*parseFloat(z);return Number.isInteger(le)?le.toString():le.toFixed(1).replace(/\.0$/,"")},W=(de,z)=>{if(!de)return"";const se=parseFloat(de);return isNaN(se)?de:(se*parseFloat(z)).toFixed(2).replace(/\.00$/,"")},ne=D==="ORIGINAL"?r:T[D]||r,[oe,O]=Ee.useState(r.tags?.includes("public")||!1),B=p?.id==="admin"||r.tags&&r.tags.includes(`owner:${p?.id}`),ce=!(r.tags&&r.tags.some(de=>de.startsWith("owner:")))||B,ve=async()=>{const de=!oe;try{const z=r.tags||[];let se;de?se=[...z,"public"]:se=z.filter(le=>le!=="public"),O(de),await It.updateRecipe({...r,tags:se})}catch(z){console.error("Failed to toggle public",z),alert(""),O(!de)}},ue=(de,z,se=!1)=>D==="ORIGINAL"||!U||!z||de===z?de:c.jsxs(c.Fragment,{children:[de,se?c.jsx("br",{}):" ",c.jsxs("span",{className:"original-text-sub",style:{opacity:.6,fontSize:"0.85em",fontWeight:"normal"},children:["(",z,")"]})]}),Oe=async de=>{const z=de.target.value;if(J(z),z!=="ORIGINAL"&&!T[z]){$(!0);try{const se=await OE.translateRecipe(r,z);C(le=>({...le,[z]:se}))}catch(se){console.error(se),alert(""),J("ORIGINAL")}finally{$(!1)}}},Ve=de=>{R(z=>{const se=new Set(z);return se.has(de)?se.delete(de):se.add(de),se})};Ee.useEffect(()=>{window.scrollTo(0,0),h&&r&&!u&&h(r.id);const de=document.title;return r&&r.title&&(document.title=r.title),C({}),J("ORIGINAL"),R(new Set),O(r.tags?.includes("public")||!1),()=>{document.title=de}},[r.id,r.title]),Ee.useEffect(()=>{r&&r.servings?N(r.servings.toString()):N(""),F("")},[r]);const De=()=>{v(!0)},Ne=()=>{v(!1),s(r)},qt=()=>{v(!1)},Ct=()=>{S(!0)},sn=()=>{S(!1),o(r)},Je=()=>{S(!1)},Pt=()=>{x(!0)},$t=async()=>{x(!1);try{const de=await It.duplicateRecipe(r,p);g&&g(de)}catch(de){console.error("Duplication failed",de),alert("")}},tr=()=>{x(!1)},yn=Ee.useRef(null),Vt=Ee.useRef(null),Nt=de=>{Vt.current=null,yn.current=de.targetTouches[0].clientX},bn=de=>{Vt.current=de.targetTouches[0].clientX},Xn=()=>{if(!yn.current||!Vt.current)return;const de=yn.current-Vt.current,z=yn.current<50,se=de<-100;z&&se&&n()};if(!r)return null;const nr=de=>{const z=Math.round(parseFloat(de)),se=parseFloat(H),le=parseFloat(ee);let Se=null,_e=null;return!isNaN(z)&&!isNaN(se)&&!isNaN(le)&&se>0&&le>0&&(_e=se*le,Se=z/_e*100),c.jsxs("div",{className:"profit-calculator screen-only",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[c.jsxs("h4",{style:{margin:"0 0 0.8rem 0",fontSize:"1rem",color:"#555",borderBottom:"1px solid #ddd",paddingBottom:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("span",{children:["  ",c.jsx("small",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"()"})]}),c.jsx("span",{style:{fontSize:"0.7em",fontWeight:"normal"},children:"(8% or 10%)"})]}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[c.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" (1/1)"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("span",{style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",color:"#888"},children:""}),c.jsx("input",{type:"number",value:H,onChange:He=>F(He.target.value),placeholder:"0",style:{padding:"6px 6px 6px 20px",width:"100px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[c.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#666"},children:" ()"}),c.jsx("input",{type:"number",value:ee,onChange:He=>N(He.target.value),placeholder:"0",style:{padding:"6px",width:"60px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem",textAlign:"center"}})]}),Se!==null&&c.jsxs("div",{style:{marginLeft:"auto",padding:"8px 12px",background:Se>40?"#ffebee":"#e8f5e9",borderRadius:"6px",border:`1px solid ${Se>40?"#ffcdd2":"#c8e6c9"}`,textAlign:"right"},children:[c.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:[": ",_e.toLocaleString()]}),c.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:Se>40?"#d32f2f":"#2e7d32"},children:[": ",Se.toFixed(1),"%"]})]})]})]})},at=ne.ingredients||[],rr=ne.steps||[];return c.jsxs("div",{className:"recipe-detail fade-in",onTouchStart:Nt,onTouchMove:bn,onTouchEnd:Xn,children:[y&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(pt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-primary)"},children:""}),c.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:""}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(fe,{variant:"ghost",onClick:tr,children:""}),c.jsx(fe,{variant:"primary",onClick:$t,children:""})]})]})}),w&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(pt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:" "}),c.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",c.jsx("br",{}),""]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(fe,{variant:"ghost",onClick:Je,children:""}),c.jsx(fe,{variant:"danger",onClick:sn,children:""})]})]})}),m&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(pt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:""}),c.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",c.jsx("br",{}),c.jsx("small",{style:{color:"#666"},children:""})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(fe,{variant:"ghost",onClick:qt,children:""}),c.jsx(fe,{variant:"danger",onClick:Ne,children:""})]})]})}),c.jsxs("div",{className:"recipe-detail__header",children:[c.jsx(fe,{variant:"secondary",onClick:n,size:"sm",children:" "}),!u&&c.jsxs("div",{className:"recipe-detail__actions",children:[ce&&(p?.id==="yoshito"||p?.id==="admin")&&c.jsx("div",{style:{marginRight:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:c.jsxs("label",{className:"switch",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[c.jsx("input",{type:"checkbox",checked:oe,onChange:ve,style:{accentColor:"#4CAF50",transform:"scale(1.2)"}}),c.jsx("span",{style:{marginLeft:"4px",fontSize:"0.9rem",fontWeight:"bold",color:oe?"#4CAF50":"#888"},children:oe?"":""})]})}),!ce&&c.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#e0e0e0",color:"#555",borderRadius:"4px",fontSize:"0.85rem",marginRight:"0.5rem"},children:"  ()"}),c.jsxs("select",{className:"language-select",value:D,onChange:Oe,disabled:G,style:{padding:"0.4rem",borderRadius:"4px",border:"1px solid #ccc",marginRight:"0.5rem",cursor:"pointer"},children:[c.jsx("option",{value:"ORIGINAL",children:" Original ()"}),kE.map(de=>c.jsx("option",{value:de.code,children:de.label},de.code))]}),D!=="ORIGINAL"&&c.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"0.5rem",cursor:"pointer",fontSize:"0.9rem",userSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:U,onChange:de=>L(de.target.checked),style:{marginRight:"4px"}}),""]}),c.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>{if(window.navigator.standalone===!0){alert(`iPhone
Safari`);return}window.print()},children:"  / PDF"}),c.jsx(fe,{variant:"secondary",size:"sm",onClick:Pt,children:""}),ce&&c.jsxs(c.Fragment,{children:[c.jsx(fe,{variant:"secondary",size:"sm",onClick:a,children:""}),c.jsx(fe,{variant:"danger",size:"sm",onClick:De,style:{marginLeft:"0.5rem"},children:""})]}),c.jsx(fe,{variant:"primary",size:"sm",children:""})]}),u&&c.jsxs("div",{className:"recipe-detail__actions",children:[c.jsx(fe,{variant:"ghost",size:"sm",onClick:Ct,style:{color:"var(--color-danger)",marginRight:"auto"},children:""}),c.jsx(fe,{variant:"primary",size:"sm",onClick:()=>s(r,!0),children:""})]})]}),c.jsx("div",{className:"recipe-detail__hero",children:ne.image?c.jsx("img",{src:ne.image,alt:ne.title,className:"recipe-detail__image"}):c.jsx("div",{className:"recipe-detail__image-placeholder",style:{height:"100%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:""})}),c.jsxs("div",{className:"recipe-detail__title-card glass-panel",children:[c.jsx("h1",{children:ue(ne.title,r.title)}),c.jsx("p",{className:"recipe-detail__desc",children:ue(ne.description,r.description,!0)}),c.jsxs("div",{className:"recipe-detail__meta",children:[ne.course&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:ue(ne.course,r.course)})]}),ne.category&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:ue(ne.category,r.category)})]}),ne.storeName&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:ue(ne.storeName,r.storeName)})]}),c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsxs("span",{className:"meta-value",children:[ne.servings,""]})]})]}),ne.sourceUrl&&c.jsxs("div",{className:"print-qr-container",style:{marginTop:"0.8rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx("div",{style:{fontSize:"0.85rem"},children:c.jsxs("a",{href:ne.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px"},children:[" ",c.jsx("span",{className:"screen-only",children:""}),c.jsx("span",{className:"print-only",children:""})]})}),c.jsx("div",{style:{background:"white",padding:"4px",width:"fit-content"},children:c.jsx(PE,{value:ne.sourceUrl,size:64,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]})]}),c.jsxs("div",{className:"recipe-detail-dates",style:{marginTop:"0.5rem",marginBottom:"1.5rem",borderTop:"none",paddingRight:"0.5rem"},children:[c.jsxs("span",{children:[" : ",Gv(r.created_at)]}),r.updated_at&&c.jsxs("span",{children:[" : ",Gv(r.updated_at)]})]}),c.jsx("div",{className:"recipe-detail__content",children:c.jsxs("div",{className:"recipe-detail__main",children:[c.jsxs("section",{className:"detail-section",children:[c.jsx("h2",{children:""}),c.jsx(pt,{className:"ingredients-card",children:ne.type==="bread"?c.jsx("div",{className:"bread-detail-view",children:(()=>{const de=ne.flours||[],z=ne.breadIngredients||[],se=de.reduce((pe,Re)=>pe+(parseFloat(Re.quantity)||0),0),le=se+z.reduce((pe,Re)=>pe+(parseFloat(Re.quantity)||0),0),Se=se?(le/se*100).toFixed(1):"0.0",_e=pe=>se?((parseFloat(pe)||0)/se*100).toFixed(1):"0.0",He=parseFloat(q),ke=He&&le?He/le:1,Pe=pe=>He?((parseFloat(pe)||0)*ke).toFixed(1):pe;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"screen-only",style:{background:"#f1f3f5",padding:"0.4rem 0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem 1rem",flexWrap:"wrap",border:"1px solid #dee2e6",lineHeight:1.2},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),c.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#000"},children:[le.toLocaleString(),"g"]}),c.jsxs("span",{style:{fontSize:"0.75rem",color:"#444"},children:["(",Se,"%)"]})]}),c.jsx("div",{style:{height:"16px",width:"1px",background:"#adb5bd"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("label",{htmlFor:"target-total-input",style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{id:"target-total-input",type:"number",value:q,onChange:pe=>Q(pe.target.value),placeholder:"1000",style:{padding:"2px 20px 2px 6px",width:"80px",borderRadius:"4px",border:"1.5px solid #333",fontSize:"0.9rem",fontWeight:"bold",textAlign:"right",color:"#000",backgroundColor:"#fff"}}),c.jsx("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",color:"#333"},children:"g"})]}),q&&c.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>Q(""),style:{padding:"0 4px",fontSize:"0.7rem",color:"#555",height:"22px",border:"1px solid #dee2e6"},children:""})]}),q&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"bold",marginLeft:"auto"},children:[" : ",ke.toFixed(3)," "]})]}),c.jsxs("div",{className:"bread-section",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",marginTop:0,display:"flex",justifyContent:"space-between",alignItems:"center",color:"var(--color-text-main)"},children:[c.jsx("span",{children:""}),c.jsxs("span",{style:{fontSize:"0.9rem",background:"var(--color-primary)",color:"white",padding:"4px 12px",borderRadius:"20px",fontWeight:"bold"},children:["Total: ",q?Pe(se):se,"g (100%)"]})]}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{style:{textAlign:"right"},children:" (g)"}),c.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),c.jsx("tbody",{children:de.map((pe,Re)=>{const Xe=r.flours?.[Re]||{};return c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`flour-${Re}`}),c.jsx("label",{htmlFor:`flour-${Re}`,children:ue(pe.name,Xe?.name)})]})}),c.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:q?c.jsx("span",{style:{color:"var(--color-primary)"},children:Pe(pe.quantity)}):pe.quantity}),c.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-primary)"},children:[_e(pe.quantity),"%"]}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:pe.purchaseCost?`${pe.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:pe.cost?`${pe.cost}`:"-"})]},Re)})})]})]}),c.jsxs("div",{className:"bread-section",style:{marginTop:"3rem"},children:[c.jsx("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid #f39c12",paddingLeft:"10px",marginBottom:"1rem",color:"var(--color-text-main)"},children:""}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{style:{textAlign:"right"},children:" (g)"}),c.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),c.jsx("tbody",{children:z.map((pe,Re)=>{const Xe=r.breadIngredients?.[Re]||{};return c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ingredient-${Re}`}),c.jsx("label",{htmlFor:`ingredient-${Re}`,children:ue(pe.name,Xe?.name)})]})}),c.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:q?c.jsx("span",{style:{color:"var(--color-primary)"},children:Pe(pe.quantity)}):pe.quantity}),c.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-text-muted)"},children:[_e(pe.quantity),"%"]}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:pe.purchaseCost?`${pe.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:pe.cost?`${pe.cost}`:"-"})]},Re)})})]}),c.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--color-bg-surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",(()=>{const pe=Xe=>Xe.reduce((gt,xn)=>{const wn=parseFloat(xn.cost)||0,Qn=xn.isAlcohol?1.1:1.08,tt=wn*ke;return gt+tt*Qn},0),Re=pe(de)+pe(z);return Math.round(Re).toLocaleString()})()]}),c.jsx("span",{style:{fontSize:"0.75rem",color:"#666",marginLeft:"8px"},children:"()"})]}),(()=>{const pe=Xe=>Xe.reduce((gt,xn)=>{const wn=parseFloat(xn.cost)||0,Qn=xn.isAlcohol?1.1:1.08,tt=wn*ke;return gt+tt*Qn},0),Re=pe(de)+pe(z);return nr(Re)})()]})]})})()}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"screen-only no-print",style:{background:"#f8f9fa",color:"#333",padding:"0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid #e9ecef"},children:[c.jsx("label",{htmlFor:"multiplier-input",style:{fontWeight:"bold",fontSize:"0.9rem",color:"#333"},children:":"}),c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold",marginRight:"4px",color:"#333"},children:""}),c.jsx("input",{id:"multiplier-input",type:"number",min:"0.1",step:"0.1",value:I,onChange:de=>A(de.target.value),style:{width:"60px",padding:"4px",fontSize:"1rem",fontWeight:"bold",textAlign:"center",borderRadius:"4px",border:"1px solid #ced4da",background:"#fff",color:"#333"}})]}),parseFloat(I)!==1&&c.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>A("1"),style:{fontSize:"0.8rem",padding:"2px 8px",height:"auto",color:"#555",borderColor:"#ccc",background:"#fff"},children:""})]}),(()=>{const de=ne.ingredientGroups&&ne.ingredientGroups.length>0?ne.ingredientGroups:null;return de?de.map(z=>{const se=at.filter(le=>le.groupId===z.id);return se.length===0?null:c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{fontSize:"1rem",borderBottom:"2px solid var(--color-border)",paddingBottom:"0.5rem",marginBottom:"0.5rem",marginTop:"0.5rem",color:"var(--color-text-main)",display:["","Ingredients","ingredients"].includes(z.name)?"none":"block"},children:z.name}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"40%"},children:""}),c.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),c.jsx("tbody",{children:se.map((le,Se)=>{const _e=at.indexOf(le),He=r.ingredients?.[_e],ke=typeof le=="string"?le:le.name,Pe=He?typeof He=="string"?He:He.name:"",pe=V(le.quantity,I),Re=W(le.cost,I),Xe=String(I)!=="1";return c.jsxs("tr",{className:"ingredient-row",children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ing-${z.id}-${Se}`}),c.jsx("label",{htmlFor:`ing-${z.id}-${Se}`,children:ue(ke,Pe)})]})}),c.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:Xe?"bold":"normal",color:Xe?"var(--color-primary)":"inherit"},children:pe}),c.jsx("td",{style:{paddingLeft:"0.5rem"},children:le.unit}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:le.purchaseCost?`${le.purchaseCost}`:"-"}),c.jsxs("td",{style:{textAlign:"right"},children:[Re?`${Re}`:"-",le.isAlcohol&&c.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},Se)})})]})]},z.id)}):c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"40%"},children:""}),c.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),c.jsx("tbody",{children:at.map((z,se)=>{const le=r.ingredients?.[se],Se=typeof z=="string"?z:z.name,_e=le?typeof le=="string"?le:le.name:"",He=V(z.quantity,I),ke=W(z.cost,I),Pe=String(I)!=="1";return c.jsxs("tr",{className:"ingredient-row",children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ing-${se}`}),c.jsx("label",{htmlFor:`ing-${se}`,children:ue(Se,_e)})]})}),c.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:Pe?"bold":"normal",color:Pe?"var(--color-primary)":"inherit"},children:He}),c.jsx("td",{style:{paddingLeft:"0.5rem"},children:z.unit}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:z.purchaseCost?`${z.purchaseCost}`:"-"}),c.jsxs("td",{style:{textAlign:"right"},children:[ke?`${ke}`:"-",z.isAlcohol&&c.jsx("span",{style:{fontSize:"0.7em",color:"#d35400",marginLeft:"2px"},children:"()"})]})]},se)})})]})})(),c.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"2px dashed var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",Math.round((z=>z.reduce((se,le)=>{const Se=parseFloat(le.cost)||0,_e=le.isAlcohol?1.1:1.08,He=W(Se,I),ke=parseFloat(He)||0;return se+ke*_e},0))(at)).toLocaleString()]}),c.jsx("span",{style:{fontSize:"0.75rem",color:"#666"},children:"()"})]}),c.jsx("p",{style:{textAlign:"right",fontSize:"0.75rem",color:"#666",marginTop:"0.5rem"},children:"(8% or 10%)"}),(()=>{const z=(se=>se.reduce((le,Se)=>{const _e=parseFloat(Se.cost)||0,He=Se.isAlcohol?1.1:1.08,ke=parseFloat(W(_e,I))||0;return le+ke*He},0))(at);return nr(z)})()]})})]}),c.jsxs("section",{className:"detail-section",children:[c.jsx("h2",{children:""}),(()=>{const de=ne.stepGroups&&ne.stepGroups.length>0?ne.stepGroups:null;return de?c.jsx("div",{className:"steps-container",children:de.map(z=>{const se=rr.filter(le=>(typeof le=="object"?le.groupId:null)===z.id);return se.length===0?null:c.jsxs("div",{className:"step-group",style:{marginBottom:"2rem"},children:[z.name!==""&&z.name!=="Steps"&&c.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"var(--color-text-main)",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px"},children:z.name}),c.jsx("div",{className:"steps-list",children:se.map((le,Se)=>{const _e=rr.indexOf(le),He=typeof le=="object"?le.text:le,ke=r.steps?.[_e],Pe=typeof ke=="object"?ke.text:ke,pe=Re=>Re?Re.replace(/<[^>]*>?/gm,""):"";return c.jsxs(pt,{className:`step-card ${E.has(_e)?"is-completed":""}`,onClick:()=>Ve(_e),children:[c.jsx("div",{className:"step-number",children:_e+1}),c.jsx("p",{className:"step-text",children:ue(pe(He),pe(Pe),!0)})]},Se)})})]},z.id)})}):c.jsx("div",{className:"steps-list",children:rr.map((z,se)=>{const le=typeof z=="object"?z.text:z,Se=r.steps?.[se],_e=typeof Se=="object"?Se.text:Se;return c.jsxs(pt,{className:`step-card ${E.has(se)?"is-completed":""}`,onClick:()=>Ve(se),children:[c.jsx("div",{className:"step-number",children:se+1}),c.jsx("p",{className:"step-text",children:ue(le,_e,!0)})]},se)})})})()]})]})})]})},st=({label:r,id:n,error:a,textarea:s,...o})=>{const u=s?"textarea":"input";return c.jsxs("div",{className:`input-group ${a?"input-group--error":""}`,children:[r&&c.jsx("label",{htmlFor:n,className:"input-label",children:r}),c.jsx(u,{id:n,className:`input-field ${o.className||""}`,...o}),a&&c.jsx("span",{className:"input-error",children:a})]})},Es="app-data",Ta={_cache:null,clearCache(){this._cache=null},async fetchPriceList(){if(this._cache)return this._cache;try{const{data:r,error:n}=await je.storage.from(Es).list();if(n)return console.warn("Failed to list price files:",n.message),new Map;if(!r||r.length===0)return new Map;const a=new Map,s=r.filter(u=>u.name.endsWith(".csv")).map(async u=>{const{data:h,error:g}=await je.storage.from(Es).download(u.name);if(g)return console.error(`Failed to download ${u.name}:`,g),null;const p=await h.arrayBuffer();return new TextDecoder("shift-jis").decode(p)}),o=await Promise.all(s);for(const u of o){if(!u)continue;const h=this.parseCSV(u);for(const[g,p]of h)if(a.has(g)){const m=a.get(g);p.dateStr>m.dateStr&&a.set(g,p)}else a.set(g,p)}return this._cache=a,a}catch(r){return console.error("Error in fetchPriceList:",r),new Map}},async getFileList(){try{const{data:r,error:n}=await je.storage.from(Es).list();if(n)throw n;return r.filter(a=>a.name.endsWith(".csv"))||[]}catch(r){return console.error("Error fetching file list:",r),[]}},async uploadPriceList(r){try{const n=r.name;this.clearCache();const{data:a,error:s}=await je.storage.from(Es).upload(n,r,{upsert:!0,contentType:"text/csv"});if(s)throw s;return{success:!0,data:a}}catch(n){return console.error("Error uploading price list:",n),{success:!1,error:n}}},async deletePriceFile(r){try{this.clearCache();const{data:n,error:a}=await je.storage.from(Es).remove([r]);if(a)throw a;if(!n||n.length===0)throw new Error("");return{success:!0,data:n}}catch(n){return console.error("Error deleting price file:",n),{success:!1,error:n}}},parseCSV(r){const n=new Map,a=r.split(/\r?\n/).filter(o=>o.trim());if(a.length===0)return n;if(a.some(o=>o.startsWith("D,")||o.startsWith('"D",')))for(let o of a){const u=[];let h="",g=!1;for(let S=0;S<o.length;S++){const E=o[S];E==='"'?g=!g:E===","&&!g?(u.push(h),h=""):h+=E}u.push(h);const p=u.map(S=>(S=S.trim(),S.startsWith('"')&&S.endsWith('"')?S.slice(1,-1):S));if(p[0]!=="D")continue;const m=p[1],v=p[8],y=p[14],x=p[18],w=p[20];if(y&&x){const S=parseFloat(x);if(!isNaN(S)){const E={price:S,vendor:v,unit:w,dateStr:m};if(n.has(y)){const R=n.get(y);m>R.dateStr&&n.set(y,E)}else n.set(y,E)}}}else{let o={name:-1,price:-1,unit:-1,vendor:-1},u=0;if(a[0].split(",").map(p=>p.trim().replace(/^"|"$/g,"")).forEach((p,m)=>{["","","","","name","item"].some(v=>p.includes(v))&&(o.name=m),["","","","","price","cost"].some(v=>p.includes(v))&&(o.price=m),["","unit"].some(v=>p.includes(v))&&(o.unit=m),["","","","vendor","supplier"].some(v=>p.includes(v))&&(o.vendor=m)}),o.name===-1&&o.price===-1){o={name:0,price:1,unit:2,vendor:3};const p=a[0].split(",");isNaN(parseFloat(p[1]))&&(u=1)}else u=1;const g=new Date().toISOString().slice(0,10).replace(/-/g,"/");for(let p=u;p<a.length;p++){const m=a[p],v=[];let y="",x=!1;for(let C=0;C<m.length;C++){const D=m[C];D==='"'?x=!x:D===","&&!x?(v.push(y),y=""):y+=D}v.push(y);const w=v.map(C=>(C=C.trim(),C.startsWith('"')&&C.endsWith('"')?C.slice(1,-1):C)),S=o.name>-1?w[o.name]:null,E=o.price>-1?w[o.price]:null,R=o.unit>-1?w[o.unit]:"",T=o.vendor>-1?w[o.vendor]:"";if(S&&E){const C=parseFloat(E.replace(/[^0-9.]/g,""));isNaN(C)||n.set(S,{price:C,vendor:T,unit:R,dateStr:g})}}}return n},async getPriceListArray(){const r=await this.fetchPriceList(),n=[];for(const[a,s]of r.entries())typeof s=="object"?n.push({name:a,...s}):n.push({name:a,price:s});return n.sort((a,s)=>a.dateStr&&s.dateStr?s.dateStr.localeCompare(a.dateStr):a.name.localeCompare(s.name))},async getPrice(r){return r&&(await this.fetchPriceList()).get(r)||null}},aa={async saveConversion(r,n,a,s=null){try{const{data:o,error:u}=await je.rpc("save_unit_conversion",{p_name:r,p_size:parseFloat(n),p_unit:a,p_price:s?parseFloat(s):null});if(u)throw u;return{ingredientName:o.ingredient_name,packetSize:o.packet_size,packetUnit:o.packet_unit,lastPrice:o.last_price,updatedAt:o.updated_at}}catch(o){throw console.error("Error saving conversion:",o),o}},async getConversion(r){try{const{data:n,error:a}=await je.rpc("get_unit_conversion",{p_name:r});return a?(console.warn("Error fetching conversion:",a),null):n?{ingredientName:n.ingredient_name,packetSize:n.packet_size,packetUnit:n.packet_unit,lastPrice:n.last_price,updatedAt:n.updated_at}:null}catch(n){return console.error("Error in getConversion:",n),null}},async getAllConversions(){try{const{data:r,error:n}=await je.from("unit_conversions").select("*");if(n)throw n;const a=new Map;return r.forEach(s=>{a.set(s.ingredient_name,{ingredientName:s.ingredient_name,packetSize:s.packet_size,packetUnit:s.packet_unit,lastPrice:s.last_price,updatedAt:s.updated_at})}),a}catch(r){return console.error("Error in getAllConversions:",r),new Map}}},d0=({isOpen:r,onClose:n,onApply:a,ingredientName:s,currentCost:o,currentQuantity:u,unit:h="g",initialPurchaseCost:g,initialContentAmount:p})=>{const[m,v]=j.useState(""),[y,x]=j.useState(""),[w,S]=j.useState(h),[E,R]=j.useState(!1),[T,C]=j.useState(!1);j.useEffect(()=>{console.log("UnitConversionModal: isOpen",r,"ingredientName",s),console.log("UnitConversionModal: Received initial props:",{initialPurchaseCost:g,initialContentAmount:p}),r&&s&&D()},[r,s]);const D=async()=>{if(C(!0),g&&p){v(g),x(p);const L=await aa.getConversion(s);S(L&&L.packetUnit||h)}else{const L=await aa.getConversion(s);if(L)x(L.packetSize),S(L.packetUnit||h),L.lastPrice&&v(L.lastPrice);else try{const q=await Ta.getPrice(s);if(q)if(v(o||q.price),q.unit){const Q=q.unit.match(/^(\d+(?:\.\d+)?)?\s*(.*)$/);if(Q){let I=Q[1]?parseFloat(Q[1]):1,A=Q[2]?Q[2].trim().toLowerCase():"";A==="kg"?(I*=1e3,A="g"):A==="l"?(I*=1e3,A="ml"):A==="pk"||A==="pack"?A="":A==="bag"?A="":(A==="pc"||A==="pcs")&&(A=""),x(I),S(A||h)}else x(1),S(q.unit)}else x(""),S(h);else x(""),v(o||""),S(h)}catch(q){console.warn("Failed to load master price:",q),x(""),v(o||""),S(h)}}C(!1)},J=()=>{const L=parseFloat(m),q=parseFloat(y);return!L||!q?0:["g","ml","cc"].includes(w)?L/q*1e3:L/q},G=async()=>{const L=J();if(E&&y)try{await aa.saveConversion(s,y,w,m)}catch(q){console.error("Failed to save default conversion:",q)}a(L,w,m,y),n()};if(!r)return null;const $=J(),U=u?$*(u/(["g","ml"].includes(h)?1e3:1)):0;return c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"90%",maxWidth:"350px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[c.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1.1rem",color:"#000"},children:""}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),c.jsx("div",{style:{fontWeight:"bold"},children:s||"()"})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"12px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:" ()"}),c.jsx("input",{type:"number",value:m,onChange:L=>v(L.target.value),className:"input-field",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#666"},children:""}),c.jsxs("div",{style:{display:"flex",gap:"4px"},children:[c.jsx("input",{type:"number",value:y,onChange:L=>x(L.target.value),className:"input-field",style:{flex:1,padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},placeholder:": 1000"}),c.jsxs("select",{value:w,onChange:L=>S(L.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white"},children:[c.jsx("option",{value:"g",children:"g"}),c.jsx("option",{value:"ml",children:"ml"}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:"p"}),c.jsx("option",{value:"cc",children:"cc"}),!["g","ml","","","","","","cc"].includes(w)&&c.jsx("option",{value:w,children:w})]})]})]})]}),c.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:T?c.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem"},children:"CSV..."}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[c.jsx("span",{style:{fontSize:"0.9rem"},children:" (1kg/1):"}),c.jsxs("span",{style:{fontWeight:"bold"},children:["",Math.round($).toLocaleString()]})]}),u&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#666",fontSize:"0.85rem"},children:[c.jsxs("span",{children:[" (",u,h,"):"]}),c.jsxs("span",{children:["",Math.round(U).toLocaleString()]})]})]})}),c.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center"},children:[c.jsx("input",{type:"checkbox",id:"saveDefault",checked:E,onChange:L=>R(L.target.checked),style:{marginRight:"8px"}}),c.jsxs("label",{htmlFor:"saveDefault",style:{fontSize:"0.9rem",cursor:"pointer"},children:["(",y,w,")"]})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{type:"button",onClick:n,style:{flex:1,padding:"10px",border:"1px solid #ccc",background:"white",borderRadius:"4px",cursor:"pointer"},children:""}),c.jsx("button",{type:"button",onClick:G,disabled:!m||!y,style:{flex:1,padding:"10px",border:"none",background:!m||!y?"#ccc":"#D2691E",color:"white",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:""})]})]})})},YE=({formData:r,setFormData:n})=>{const[a,s]=j.useState(new Map),o=j.useMemo(()=>Array.from(a.keys()),[a]),[u,h]=j.useState(null),[g,p]=j.useState([]),[m,v]=j.useState({isOpen:!1,type:null,index:null}),[y,x]=j.useState(new Map);j.useEffect(()=>{(async()=>{const[A,H]=await Promise.all([Ta.fetchPriceList(),aa.getAllConversions()]);s(A),x(H)})()},[]);const S=(I=>I.reduce((A,H)=>A+(parseFloat(H.quantity)||0),0))(r.flours||[]),E=I=>!S||S===0?0:((parseFloat(I)||0)/S*100).toFixed(1),R=(I,A,H)=>{const F=[...r.flours||[]];if(F[I]={...F[I],[A]:H},A==="name"){if(H.trim()){const N=H.toLowerCase(),V=o.filter(W=>W.toLowerCase().includes(N));p(V.slice(0,10)),h({type:"flour",index:I})}else p([]),h(null);const ee=a.get(H);if(ee){const N=typeof ee=="object"?ee.price:ee,V=typeof ee=="object"?ee.vendor:null;F[I].purchaseCostRef=N,F[I].vendorRef=V;const W=y.get(H);if(W&&W.packetSize){let ne=0;["g","ml","cc",""].includes(W.packetUnit)?ne=N/W.packetSize*1e3:ne=N/W.packetSize,F[I].purchaseCost=Math.round(ne*100)/100,F[I].unit="g"}else F[I].purchaseCost||(F[I].purchaseCost=N)}else F[I].purchaseCostRef=null,F[I].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(A)||A==="name"){const ee=F[I],N=parseFloat(ee.quantity),V=parseFloat(ee.purchaseCost);if(!isNaN(N)&&!isNaN(V)){let W=0;ee.unit==="g"||ee.unit===""||!ee.unit?W=N/1e3*V:W=N*V;const ne=Math.round(W*100)/100;ne!==ee.cost&&(F[I].cost=ne)}}n(ee=>({...ee,flours:F}))},T=(I,A,H)=>{const F=[...r.breadIngredients||[]];if(F[I]={...F[I],[A]:H},A==="name"){if(H.trim()){const N=H.toLowerCase(),V=o.filter(W=>W.toLowerCase().includes(N));p(V.slice(0,10)),h({type:"ingredient",index:I})}else p([]),h(null);const ee=a.get(H);if(ee){const N=typeof ee=="object"?ee.price:ee,V=typeof ee=="object"?ee.vendor:null;F[I].purchaseCostRef=N,F[I].vendorRef=V;const W=y.get(H);if(W&&W.packetSize){let ne=0;["g","ml","cc",""].includes(W.packetUnit)?(ne=N/W.packetSize*1e3,F[I].unit="g"):["kg","l",""].includes(W.packetUnit.toLowerCase())?(ne=N/W.packetSize,F[I].unit="g"):(ne=N/W.packetSize,F[I].unit=W.packetUnit),F[I].purchaseCost=Math.round(ne*100)/100}else F[I].purchaseCost||(F[I].purchaseCost=N)}else F[I].purchaseCostRef=null,F[I].vendorRef=null}if(["quantity","purchaseCost","name","isAlcohol"].includes(A)||A==="name"){const ee=F[I],N=parseFloat(ee.quantity),V=parseFloat(ee.purchaseCost);if(!isNaN(N)&&!isNaN(V)){let W=0;const ne=ee.unit?ee.unit.trim().toLowerCase():"g";ne==="g"||ne===""?W=N/1e3*V:W=N*V;const oe=Math.round(W*100)/100;oe!==ee.cost&&(F[I].cost=oe)}}n(ee=>({...ee,breadIngredients:F}))},C=()=>{n(I=>({...I,flours:[...I.flours||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},D=()=>{n(I=>({...I,breadIngredients:[...I.breadIngredients||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:"",isAlcohol:!1}]}))},J=I=>{n(A=>({...A,flours:A.flours.filter((H,F)=>F!==I)}))},G=I=>{n(A=>({...A,breadIngredients:A.breadIngredients.filter((H,F)=>F!==I)}))},$=(I,A,H)=>{I==="flour"?R(A,"name",H):T(A,"name",H),h(null),p([])},U=Zs(an(Sh),an(Aa,{coordinateGetter:al})),L=I=>{const{active:A,over:H}=I;A.id!==H.id&&n(F=>{const N=F.flours.some(ne=>ne.id===A.id)?"flours":"breadIngredients",V=F[N].findIndex(ne=>ne.id===A.id),W=F[N].findIndex(ne=>ne.id===H.id);return V!==-1&&W!==-1?{...F,[N]:Di(F[N],V,W)}:F})};j.useEffect(()=>{if(!r.flours)n(I=>({...I,flours:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const I=r.flours.map(A=>A.id?A:{...A,id:crypto.randomUUID()});JSON.stringify(I)!==JSON.stringify(r.flours)&&n(A=>({...A,flours:I}))}if(!r.breadIngredients)n(I=>({...I,breadIngredients:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const I=r.breadIngredients.map(A=>A.id?A:{...A,id:crypto.randomUUID()});JSON.stringify(I)!==JSON.stringify(r.breadIngredients)&&n(A=>({...A,breadIngredients:I}))}},[]);const q=(I,A,H,F)=>{const{type:ee,index:N}=m;n(V=>{if(ee==="flour"){const W=[...V.flours],ne={...W[N],purchaseCost:I,unit:A,purchase_cost:H,content_amount:F},oe=parseFloat(ne.quantity),O=parseFloat(I);if(!isNaN(oe)&&!isNaN(O)){let B=0;A==="g"||A===""?B=oe/1e3*O:B=oe*O,ne.cost=Math.round(B*100)/100}return W[N]=ne,aa.getAllConversions().then(B=>x(B)),{...V,flours:W}}else if(ee==="ingredient"){const W=[...V.breadIngredients],ne={...W[N],purchaseCost:I,unit:A,purchase_cost:H,content_amount:F},oe=parseFloat(ne.quantity),O=parseFloat(I);if(!isNaN(oe)&&!isNaN(O)){let B=0;A==="g"||A===""?B=oe/1e3*O:B=oe*O,ne.cost=Math.round(B*100)/100}return W[N]=ne,aa.getAllConversions().then(B=>x(B)),{...V,breadIngredients:W}}return V})},Q=m.isOpen&&m.index!==null?m.type==="flour"?r.flours[m.index]:r.breadIngredients[m.index]:null;return console.log("RecipeFormBread: activeItem for modal:",Q),console.log("RecipeFormBread: passing props:",{initialPurchaseCost:Q?.purchase_cost,initialContentAmount:Q?.content_amount}),c.jsxs("div",{className:"bread-form",children:[c.jsxs(pt,{className:"mb-md bread-card",style:{position:"relative",zIndex:10},children:[c.jsxs("div",{className:"bread-header",children:[c.jsxs("h3",{children:[" (Total: ",S,"g)"]}),c.jsx("span",{className:"bread-badge",children:"Base (100%)"})]}),c.jsxs("div",{className:"bread-scroll-wrapper",children:[c.jsxs("div",{className:"bread-grid-header",children:[c.jsx("span",{})," ",c.jsx("span",{children:""}),c.jsx("span",{children:" (g)"}),c.jsx("span",{className:"text-center",children:"%"}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsx("div",{className:"bread-grid-body",children:c.jsx(Bs,{sensors:U,collisionDetection:Xd,onDragEnd:L,id:"flours-dnd",children:c.jsx(Is,{items:r.flours||[],strategy:Mo,children:(r.flours||[]).map((I,A)=>c.jsx(KE,{id:I.id,index:A,item:I,onChange:R,onRemove:J,onSuggestionSelect:$,activeSuggestion:u,filteredSuggestions:g,setActiveSuggestion:h,setFilteredSuggestions:p,handleSuggestionSelect:$,allIngredientNames:o,calculatePercentage:E,floursLength:(r.flours||[]).length,onOpenConversion:()=>v({isOpen:!0,type:"flour",index:A})},I.id))})})})]}),c.jsx(fe,{type:"button",variant:"secondary",size:"sm",onClick:C,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),c.jsxs(pt,{className:"mb-md bread-card",style:{position:"relative",zIndex:5},children:[c.jsxs("div",{className:"bread-header",children:[c.jsx("h3",{children:""}),c.jsx("span",{className:"bread-subtitle",children:"Water, Salt, Yeast, etc."})]}),c.jsxs("div",{className:"bread-scroll-wrapper",children:[c.jsxs("div",{className:"bread-grid-header",children:[c.jsx("span",{})," ",c.jsx("span",{children:""}),c.jsx("span",{children:" (g)"}),c.jsx("span",{className:"text-center",children:"%"}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsx("div",{className:"bread-grid-body",children:c.jsx(Bs,{sensors:U,collisionDetection:Xd,onDragEnd:L,id:"breadIngredients-dnd",children:c.jsx(Is,{items:r.breadIngredients||[],strategy:Mo,children:(r.breadIngredients||[]).map((I,A)=>c.jsx(JE,{id:I.id,index:A,item:I,onChange:T,onRemove:G,onSuggestionSelect:$,activeSuggestion:u,filteredSuggestions:g,setActiveSuggestion:h,setFilteredSuggestions:p,handleSuggestionSelect:$,allIngredientNames:o,calculatePercentage:E,onOpenConversion:()=>v({isOpen:!0,type:"ingredient",index:A})},I.id))})})})]}),c.jsx(fe,{type:"button",variant:"secondary",size:"sm",onClick:D,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),c.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:c.jsx(fe,{variant:"secondary",onClick:()=>window.history.back(),style:{width:"120px"},children:""})}),c.jsx(d0,{isOpen:m.isOpen,onClose:()=>v({isOpen:!1,type:null,index:null}),onApply:q,ingredientName:Q?.name||"",currentCost:Q?.purchaseCost,currentQuantity:Q?.quantity,unit:Q?.unit||"g",initialPurchaseCost:Q?.purchase_cost,initialContentAmount:Q?.content_amount})]})},KE=({id:r,index:n,item:a,onChange:s,onRemove:o,onSuggestionSelect:u,activeSuggestion:h,filteredSuggestions:g,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:v,allIngredientNames:y,calculatePercentage:x,floursLength:w,onOpenConversion:S})=>{const{attributes:E,listeners:R,setNodeRef:T,transform:C,transition:D,isDragging:J}=rl({id:r}),G={transform:Ln.Transform.toString(C),transition:D,opacity:J?.5:1,position:"relative",zIndex:J?999:"auto",backgroundColor:"white"};return c.jsxs("div",{ref:T,style:G,className:"bread-row",children:[c.jsx("div",{...E,...R,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),c.jsxs("div",{style:{position:"relative",zIndex:h?.type==="flour"&&h?.index===n?1e4:"auto"},children:[c.jsx(st,{value:a.name,onChange:$=>{if(s(n,"name",$.target.value),$.target.value.trim()){const U=$.target.value.toLowerCase(),L=y.filter(q=>q.toLowerCase().includes(U));m(L.slice(0,10)),p({type:"flour",index:n})}else m([]),p(null)},onFocus:()=>{if(a.name.trim()){const $=a.name.toLowerCase(),U=y.filter(L=>L.toLowerCase().includes($));m(U.slice(0,10)),p({type:"flour",index:n})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),h&&h.type==="flour"&&h.index===n&&g.length>0&&c.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:g.map(($,U)=>c.jsx("li",{onMouseDown:()=>v("flour",n,$),style:{padding:"8px 12px",cursor:"pointer",borderBottom:U<g.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:L=>L.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:L=>L.currentTarget.style.backgroundColor="white",children:$},U))})]}),c.jsx(st,{type:"number",step:"any",value:a.quantity,onChange:$=>s(n,"quantity",$.target.value),placeholder:"0",className:"bread-input qty"}),c.jsxs("div",{className:"bread-percent",children:[x(a.quantity),"%"]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(st,{type:"number",step:"any",value:a.purchaseCost||"",onChange:$=>s(n,"purchaseCost",$.target.value),placeholder:a.purchaseCostRef?`Ref: ${a.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:a.purchaseCostRef?`: ${a.purchaseCostRef}`:"No data"}),c.jsx("button",{type:"button",onClick:S,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",a.purchaseCostRef," ",a.vendorRef&&`(${a.vendorRef})`]})]}),c.jsx(st,{type:"number",step:"any",value:a.cost||"",onChange:$=>s(n,"cost",$.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:c.jsx("input",{type:"checkbox",checked:a.isAlcohol||!1,onChange:$=>s(n,"isAlcohol",$.target.checked),title:" (10%)"})}),w>1&&c.jsx("button",{type:"button",className:"bread-remove",onClick:()=>o(n),children:""})]})},JE=({id:r,index:n,item:a,onChange:s,onRemove:o,onSuggestionSelect:u,activeSuggestion:h,filteredSuggestions:g,setActiveSuggestion:p,setFilteredSuggestions:m,handleSuggestionSelect:v,allIngredientNames:y,calculatePercentage:x,onOpenConversion:w})=>{const{attributes:S,listeners:E,setNodeRef:R,transform:T,transition:C,isDragging:D}=rl({id:r}),J={transform:Ln.Transform.toString(T),transition:C,opacity:D?.5:1,position:"relative",zIndex:D?999:"auto",backgroundColor:"white"};return c.jsxs("div",{ref:R,style:J,className:"bread-row",children:[c.jsx("div",{...S,...E,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),c.jsxs("div",{style:{position:"relative",zIndex:h?.type==="ingredient"&&h?.index===n?1e4:"auto"},children:[c.jsx(st,{value:a.name,onChange:G=>{if(s(n,"name",G.target.value),G.target.value.trim()){const $=G.target.value.toLowerCase(),U=y.filter(L=>L.toLowerCase().includes($));m(U.slice(0,10)),p({type:"ingredient",index:n})}else m([]),p(null)},onFocus:()=>{if(a.name.trim()){const G=a.name.toLowerCase(),$=y.filter(U=>U.toLowerCase().includes(G));m($.slice(0,10)),p({type:"ingredient",index:n})}},onBlur:()=>setTimeout(()=>p(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),h&&h.type==="ingredient"&&h.index===n&&g.length>0&&c.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:g.map((G,$)=>c.jsx("li",{onMouseDown:()=>v("ingredient",n,G),style:{padding:"8px 12px",cursor:"pointer",borderBottom:$<g.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:U=>U.currentTarget.style.backgroundColor="white",children:G},$))})]}),c.jsx(st,{type:"number",step:"any",value:a.quantity,onChange:G=>s(n,"quantity",G.target.value),placeholder:"0",className:"bread-input qty"}),c.jsxs("div",{className:"bread-percent",children:[x(a.quantity),"%"]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(st,{type:"number",step:"any",value:a.purchaseCost||"",onChange:G=>s(n,"purchaseCost",G.target.value),placeholder:a.purchaseCostRef?`Ref: ${a.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":"",paddingRight:"20px"},min:"0",title:a.purchaseCostRef?`: ${a.purchaseCostRef}`:"No data"}),c.jsx("button",{type:"button",onClick:w,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",a.purchaseCostRef," ",a.vendorRef&&`(${a.vendorRef})`]})]}),c.jsx(st,{type:"number",step:"any",value:a.cost||"",onChange:G=>s(n,"cost",G.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:c.jsx("input",{type:"checkbox",checked:a.isAlcohol||!1,onChange:G=>s(n,"isAlcohol",G.target.checked),title:" (10%)"})}),c.jsx("button",{type:"button",className:"bread-remove",onClick:()=>o(n),children:""})]})},XE=({id:r,index:n,item:a,groupId:s,onChange:o,onRemove:u,handleSuggestionSelect:h,allIngredientNames:g,priceList:p,onOpenConversion:m})=>{const{attributes:v,listeners:y,setNodeRef:x,transform:w,transition:S,isDragging:E}=rl({id:a.id,data:{groupId:s,index:n}}),R={transform:Ln.Translate.toString(w),transition:S,opacity:E?.3:1,position:"relative",zIndex:E?999:"auto"},[T,C]=j.useState([]),[D,J]=j.useState(!1),G=Ee.useRef(null),[$,U]=j.useState({});j.useEffect(()=>{if(D&&T.length>0&&G.current){const Q=G.current.getBoundingClientRect();U({position:"fixed",top:`${Q.bottom}px`,left:`${Q.left}px`,width:`${Q.width}px`,maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",zIndex:9999,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",listStyle:"none",padding:0,margin:0})}},[D,T.length]);const L=Q=>{if(o(s,n,"name",Q),Q.trim()){const I=g.filter(A=>A.toLowerCase().includes(Q.toLowerCase())).slice(0,10);C(I),J(!0)}else J(!1)},q=()=>{setTimeout(()=>J(!1),200)};return c.jsxs("div",{ref:x,style:R,className:"form-ingredient-row",children:[c.jsx("div",{...v,...y,className:"ingredient-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",touchAction:"none"},children:""}),c.jsxs("div",{className:"ingredient-name",ref:G,children:[c.jsx(st,{value:a.name,onChange:Q=>L(Q.target.value),onFocus:()=>a.name&&L(a.name),onBlur:q,placeholder:"",style:{width:"100%"},autoComplete:"off"}),D&&T.length>0&&ji.createPortal(c.jsx("ul",{style:$,children:T.map((Q,I)=>c.jsx("li",{onMouseDown:()=>{h(s,n,Q),J(!1)},style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",color:"#000"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:A=>A.currentTarget.style.backgroundColor="white",children:Q},I))}),document.body)]}),c.jsx("div",{className:"ingredient-qty",children:c.jsx(st,{value:a.quantity,onChange:Q=>o(s,n,"quantity",Q.target.value),placeholder:"0",style:{width:"100%"}})}),c.jsx("div",{className:"ingredient-unit",children:c.jsx(st,{value:a.unit,onChange:Q=>o(s,n,"unit",Q.target.value),placeholder:"",style:{width:"100%"}})}),c.jsxs("div",{className:"ingredient-cost",style:{position:"relative"},children:[c.jsx(st,{type:"number",value:a.purchaseCost,onChange:Q=>o(s,n,"purchaseCost",Q.target.value),step:"0.01",placeholder:a.purchaseCostRef?"Ref":"",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":"",paddingRight:"20px"},title:a.purchaseCostRef?`: ${a.purchaseCostRef}${a.vendorRef?` (${a.vendorRef})`:""}`:"No data"}),c.jsx("button",{type:"button",onClick:m,style:{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",fontSize:"1rem",padding:"0 4px",lineHeight:1},title:"",children:""}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all",textAlign:"center"},children:["",a.purchaseCostRef]})]}),c.jsx("div",{className:"ingredient-cost",children:c.jsx(st,{type:"number",step:"0.01",value:a.cost,onChange:Q=>o(s,n,"cost",Q.target.value),placeholder:"",style:{width:"100%"}})}),c.jsx("div",{className:"ingredient-alcohol",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:c.jsx("input",{type:"checkbox",checked:a.isAlcohol||!1,onChange:Q=>o(s,n,"isAlcohol",Q.target.checked),title:" (10%)"})}),c.jsx("div",{className:"remove-button-cell",children:c.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(s,n),children:""})})]})},QE=({section:r,sections:n,onSectionChange:a,onRemoveSection:s,children:o})=>{const{setNodeRef:u}=jh({id:r.id});return c.jsxs(pt,{className:"ingredient-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[c.jsx(st,{value:r.name,onChange:h=>a(r.id,h.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),c.jsx("div",{style:{display:"flex",gap:"8px"},children:n.length>1&&c.jsx("button",{type:"button",onClick:()=>s(r.id),className:"group-delete-btn",children:""})})]}),c.jsxs("div",{className:"recipe-list-header",style:{marginBottom:"0.5rem"},children:[c.jsx("span",{}),c.jsx("span",{children:""}),c.jsx("span",{children:""}),c.jsx("span",{children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsxs("div",{ref:u,className:"section-ingredients-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[o,r.items.length===0&&c.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},FE=({formData:r,setFormData:n,priceList:a})=>{const s=Array.from(a.keys()),[o,u]=j.useState(new Map);j.useEffect(()=>{aa.getAllConversions().then(G=>u(G))},[]);const[h,g]=j.useState({isOpen:!1,groupId:null,index:null});j.useEffect(()=>{if(!r.ingredientSections){const G=r.ingredientGroups||[{id:"default",name:""}],$=r.ingredients||[],U=G.map(Q=>({id:Q.id,name:Q.name,items:$.filter(I=>Q.id==="default"&&!I.groupId?!0:I.groupId===Q.id)})),L=new Set(U.flatMap(Q=>Q.items.map(I=>I.id))),q=$.filter(Q=>!L.has(Q.id));q.length>0&&(U.length>0?U[0].items.push(...q):U.push({id:"default",name:"",items:q})),U.length===0&&U.push({id:crypto.randomUUID(),name:"",items:[]}),n(Q=>({...Q,ingredientSections:U}))}},[r.ingredients,r.ingredientGroups,r.ingredientSections,n]);const p=r.ingredientSections||[],m=Zs(an(el,{activationConstraint:{distance:10}}),an(tl,{activationConstraint:{delay:250,tolerance:5}}),an(Aa,{coordinateGetter:al})),v=({active:G,over:$})=>{if(!$)return;const U=G.id,L=$.id,q=p.find(I=>I.items.some(A=>A.id===U)),Q=p.find(I=>I.items.some(A=>A.id===L))||p.find(I=>I.id===L);!q||!Q||q===Q||n(I=>{const A=q.items,H=Q.items,F=A.findIndex(V=>V.id===U),ee=H.findIndex(V=>V.id===L);let N;if(L===Q.id)N=H.length+1;else{const W=$&&G.rect.current.translated&&G.rect.current.translated.top>$.rect.top+$.rect.height?1:0;N=ee>=0?ee+W:H.length+1}return{...I,ingredientSections:I.ingredientSections.map(V=>V.id===q.id?{...V,items:A.filter(W=>W.id!==U)}:V.id===Q.id?{...V,items:[...H.slice(0,N),A[F],...H.slice(N,H.length)]}:V)}})},y=({active:G,over:$})=>{if(!$)return;const U=G.id,L=$.id,q=p.find(I=>I.items.some(A=>A.id===U)),Q=p.find(I=>I.items.some(A=>A.id===L))||p.find(I=>I.id===L);if(q&&Q&&q===Q){const I=q.items.findIndex(H=>H.id===U),A=Q.items.findIndex(H=>H.id===L);I!==A&&n(H=>({...H,ingredientSections:H.ingredientSections.map(F=>F.id===q.id?{...F,items:Di(F.items,I,A)}:F)}))}},x=(G,$,U,L)=>{const{groupId:q,index:Q}=h;q!==null&&Q!==null&&n(I=>{const A=I.ingredientSections.map(H=>{if(H.id!==q)return H;const F=[...H.items],ee={...F[Q],purchaseCost:G,unit:$,purchase_cost:U,content_amount:L},N=parseFloat(ee.quantity),V=parseFloat(G);if(!isNaN(N)&&!isNaN(V)){let W=0;const ne=$?$.trim().toLowerCase():"";ne==="g"||ne===""?W=N/1e3*V:W=N*V,ee.cost=Math.round(W*100)/100}return F[Q]=ee,{...H,items:F}});return aa.getAllConversions().then(H=>u(H)),{...I,ingredientSections:A}})},w=h.isOpen&&h.groupId!==null&&h.index!==null?p.find(G=>G.id===h.groupId)?.items[h.index]:null,S=(G,$,U,L)=>{n(q=>{const Q=q.ingredientSections.map(I=>{if(I.id!==G)return I;const A=[...I.items],H={...A[$],[U]:L};if(A[$]=H,["quantity","purchaseCost","unit","name","isAlcohol"].includes(U)){const F=parseFloat(H.quantity),ee=parseFloat(H.purchaseCost);if(!isNaN(F)&&!isNaN(ee)){let N=0;const V=H.unit?H.unit.trim().toLowerCase():"";V==="g"||V===""?N=F/1e3*ee:N=F*ee;const W=Math.round(N*100)/100;W!==H.cost&&(H.cost=W,A[$]=H)}}if(U==="name"){const F=a.get(L);if(F){const ee=typeof F=="object"?F.price:F,N=typeof F=="object"?F.vendor:null,V=typeof F=="object"?F.unit:null;H.purchaseCostRef=ee,H.vendorRef=N;const W=o.get(L);if(W&&W.packetSize){let O=0;["g","ml","cc",""].includes(W.packetUnit)?(O=ee/W.packetSize*1e3,H.unit="g"):["kg","l",""].includes(W.packetUnit.toLowerCase())?(O=ee/W.packetSize,H.unit="g"):(O=ee/W.packetSize,H.unit=W.packetUnit),H.purchaseCost=Math.round(O*100)/100}else H.purchaseCost||(H.purchaseCost=ee),!H.unit&&V&&(H.unit=V);const ne=parseFloat(H.quantity),oe=parseFloat(H.purchaseCost);if(!isNaN(ne)&&!isNaN(oe)){const O=H.unit?H.unit.trim().toLowerCase():"";let B=0;O==="g"||O===""?B=ne/1e3*oe:B=ne*oe,H.cost=Math.round(B*100)/100}}else H.purchaseCostRef=null,H.vendorRef=null;A[$]=H}return{...I,items:A}});return{...q,ingredientSections:Q}})},E=(G,$,U)=>{S(G,$,"name",U)},R=(G,$)=>{n(U=>({...U,ingredientSections:U.ingredientSections.map(L=>L.id===G?{...L,items:L.items.filter((q,Q)=>Q!==$)}:L)}))},T=G=>{const $={id:crypto.randomUUID(),name:"",quantity:"",unit:"",cost:"",purchaseCost:"",isAlcohol:!1};n(U=>({...U,ingredientSections:U.ingredientSections.map(L=>L.id===G?{...L,items:[...L.items,$]}:L)}))},C=()=>{n(G=>({...G,ingredientSections:[...G.ingredientSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},D=G=>{n($=>({...$,ingredientSections:$.ingredientSections.filter(U=>U.id!==G)}))},J=(G,$)=>{n(U=>({...U,ingredientSections:U.ingredientSections.map(L=>L.id===G?{...L,name:$}:L)}))};return c.jsxs(Bs,{sensors:m,collisionDetection:by,onDragOver:v,onDragEnd:y,children:[c.jsxs("div",{className:"recipe-form-ingredients",children:[p.map(G=>c.jsx(Is,{id:G.id,items:G.items.map($=>$.id),strategy:Mo,children:c.jsxs(QE,{section:G,sections:p,onSectionChange:J,onRemoveSection:D,children:[G.items.map(($,U)=>c.jsx(XE,{id:$.id,index:U,item:$,groupId:G.id,onChange:S,onRemove:R,handleSuggestionSelect:E,allIngredientNames:s,priceList:a,onOpenConversion:()=>g({isOpen:!0,groupId:G.id,index:U})},$.id)),c.jsx(fe,{type:"button",variant:"ghost",onClick:()=>T(G.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},G.id)),c.jsx(fe,{type:"button",variant:"secondary",onClick:C,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),c.jsx(My,{dropAnimation:{sideEffects:Eh({styles:{active:{opacity:"0.5"}}})},children:null}),c.jsx(d0,{isOpen:h.isOpen,onClose:()=>g({isOpen:!1,groupId:null,index:null}),onApply:x,ingredientName:w?.name||"",currentCost:w?.purchaseCost,currentQuantity:w?.quantity,unit:w?.unit||"g",initialPurchaseCost:w?.purchase_cost,initialContentAmount:w?.content_amount})]})},WE=({id:r,index:n,item:a,groupId:s,onChange:o,onRemove:u})=>{const{attributes:h,listeners:g,setNodeRef:p,transform:m,transition:v,isDragging:y}=rl({id:a.id,data:{groupId:s,index:n}}),x={transform:Ln.Translate.toString(m),transition:v,opacity:y?.3:1,position:"relative",zIndex:y?999:"auto"};return c.jsxs("div",{ref:p,style:{...x,display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"flex-start"},className:"step-row",children:[c.jsx("div",{...h,...g,className:"step-drag-handle",style:{cursor:"grab",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",alignSelf:"stretch",touchAction:"none"},children:""}),c.jsx("div",{className:"step-count",style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",borderRadius:"50%",background:"#eee",fontSize:"0.8rem",fontWeight:"bold",marginTop:"8px"},children:n+1}),c.jsx("div",{style:{flex:1},children:c.jsx(st,{textarea:!0,value:a.text,onChange:w=>o(s,n,w.target.value),placeholder:` ${n+1}...`,style:{minHeight:"60px",width:"100%"}})}),c.jsx("div",{className:"remove-button-cell",children:c.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(s,n),title:"",children:""})})]})},ZE=({section:r,sections:n,onSectionChange:a,onRemoveSection:s,children:o})=>{const{setNodeRef:u}=jh({id:r.id});return c.jsxs(pt,{className:"step-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[c.jsx(st,{value:r.name,onChange:h=>a(r.id,h.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),c.jsx("div",{style:{display:"flex",gap:"8px"},children:n.length>1&&c.jsx("button",{type:"button",onClick:()=>s(r.id),className:"group-delete-btn",children:""})})]}),c.jsxs("div",{ref:u,className:"section-steps-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[o,r.items.length===0&&c.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},eC=({formData:r,setFormData:n})=>{j.useEffect(()=>{if(!r.stepSections){const x=r.stepGroups||[{id:"default",name:""}],S=(r.steps||[]||[]).map(C=>typeof C=="string"?{id:crypto.randomUUID(),text:C}:C),E=x.map(C=>({id:C.id,name:C.name,items:S.filter(D=>C.id==="default"&&!D.groupId?!0:D.groupId===C.id)})),R=new Set(E.flatMap(C=>C.items.map(D=>D.id))),T=S.filter(C=>!R.has(C.id));T.length>0&&(E.length>0?E[0].items.push(...T):E.push({id:"default",name:"",items:T})),E.length===0&&E.push({id:crypto.randomUUID(),name:"",items:[]}),n(C=>({...C,stepSections:E}))}},[r.steps,r.stepGroups,r.stepSections,n]);const a=r.stepSections||[],s=Zs(an(el,{activationConstraint:{distance:10}}),an(tl,{activationConstraint:{delay:250,tolerance:5}}),an(Aa,{coordinateGetter:al})),o=({active:x,over:w})=>{if(!w)return;const S=x.id,E=w.id,R=a.find(C=>C.items.some(D=>D.id===S)),T=a.find(C=>C.items.some(D=>D.id===E))||a.find(C=>C.id===E);!R||!T||R===T||n(C=>{const D=R.items,J=T.items,G=D.findIndex(L=>L.id===S),$=J.findIndex(L=>L.id===E);let U;if(E===T.id)U=J.length+1;else{const q=w&&x.rect.current.translated&&x.rect.current.translated.top>w.rect.top+w.rect.height?1:0;U=$>=0?$+q:J.length+1}return{...C,stepSections:C.stepSections.map(L=>L.id===R.id?{...L,items:D.filter(q=>q.id!==S)}:L.id===T.id?{...L,items:[...J.slice(0,U),D[G],...J.slice(U,J.length)]}:L)}})},u=({active:x,over:w})=>{if(!w)return;const S=x.id,E=w.id,R=a.find(C=>C.items.some(D=>D.id===S)),T=a.find(C=>C.items.some(D=>D.id===E))||a.find(C=>C.id===E);if(R&&T&&R===T){const C=R.items.findIndex(J=>J.id===S),D=T.items.findIndex(J=>J.id===E);C!==D&&n(J=>({...J,stepSections:J.stepSections.map(G=>G.id===R.id?{...G,items:Di(G.items,C,D)}:G)}))}},h=(x,w,S)=>{n(E=>({...E,stepSections:E.stepSections.map(R=>{if(R.id!==x)return R;const T=[...R.items];return T[w]={...T[w],text:S},{...R,items:T}})}))},g=(x,w)=>{n(S=>({...S,stepSections:S.stepSections.map(E=>E.id===x?{...E,items:E.items.filter((R,T)=>T!==w)}:E)}))},p=x=>{const w={id:crypto.randomUUID(),text:""};n(S=>({...S,stepSections:S.stepSections.map(E=>E.id===x?{...E,items:[...E.items,w]}:E)}))},m=()=>{n(x=>({...x,stepSections:[...x.stepSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},v=x=>{n(w=>({...w,stepSections:w.stepSections.filter(S=>S.id!==x)}))},y=(x,w)=>{n(S=>({...S,stepSections:S.stepSections.map(E=>E.id===x?{...E,name:w}:E)}))};return c.jsxs(Bs,{sensors:s,collisionDetection:by,onDragOver:o,onDragEnd:u,children:[c.jsxs("div",{className:"recipe-form-steps",children:[a.map(x=>c.jsx(Is,{id:x.id,items:x.items.map(w=>w.id),strategy:Mo,children:c.jsxs(ZE,{section:x,sections:a,onSectionChange:y,onRemoveSection:v,children:[x.items.map((w,S)=>c.jsx(WE,{id:w.id,index:S,item:w,groupId:x.id,onChange:h,onRemove:g},w.id)),c.jsx(fe,{type:"button",variant:"ghost",onClick:()=>p(x.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},x.id)),c.jsx(fe,{type:"button",variant:"secondary",onClick:m,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),c.jsx(My,{dropAnimation:{sideEffects:Eh({styles:{active:{opacity:"0.5"}}})},children:null})]})},h0=({onClose:r,onImport:n,initialMode:a="url"})=>{const[s,o]=j.useState(a),[u,h]=j.useState(null),[g,p]=j.useState(""),[m,v]=j.useState(""),[y,x]=j.useState(null),[w,S]=j.useState(null),[E,R]=j.useState(!1),[T,C]=j.useState(null),[D,J]=j.useState(!1),G=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?J(!0):A.type==="dragleave"&&J(!1)},$=A=>{if(A.preventDefault(),A.stopPropagation(),J(!1),A.dataTransfer.files&&A.dataTransfer.files[0]){const H=A.dataTransfer.files[0];H.type.startsWith("image/")&&(x(H),S(URL.createObjectURL(H)))}},U=A=>/[---]/.test(A||""),L=async A=>{try{const H=[];H.push(A.name||""),H.push(A.description||"");const F=[];Array.isArray(A.ingredients)&&A.ingredients.forEach((O,B)=>{O.name&&(H.push(O.name),F.push(B))});const ee=[];if(Array.isArray(A.steps)&&A.steps.forEach((O,B)=>{H.push(O),ee.push(B)}),H.length===0)return A;const{data:N,error:V}=await je.functions.invoke("translate",{body:{text:H,target_lang:"JA"}});if(V)throw V;const W=N.translations.map(O=>O.text);let ne=0;const oe={...A};return oe.name=W[ne++]||oe.name,oe.description=W[ne++]||oe.description,F.length>0&&(oe.ingredients=oe.ingredients.map((O,B)=>{const ie=F.indexOf(B);return ie!==-1?{...O,name:W[ne+ie]}:O}),ne+=F.length),ee.length>0&&(oe.steps=oe.steps.map((O,B)=>{const ie=ee.indexOf(B);return ie!==-1?W[ne+ie]:O})),oe}catch(H){return console.error("Translation failed:",H),alert(""),A}},q=async()=>{R(!0),C(null);try{let A,H="";if(s==="url"){if(!m)return;H=m;const{data:N,error:V}=await je.functions.invoke("scrape-recipe",{body:{url:m}});if(V)throw V;A=N}else{if(!y)return;const N=new FormData;N.append("image",y);const{data:V,error:W}=await je.functions.invoke("analyze-image",{body:N});if(W)throw W;A=V}if(A.error)throw new Error(A.error);if(!A.recipe)throw new Error("No recipe found");let F=A.recipe;F.name=F.name||F.title||"",F.recipeYield=F.recipeYield||F.servings||"",F.description=F.description||"";const ee=(F.name||"")+(F.steps?F.steps.slice(0,3).join(""):"");if(ee&&!U(ee)){h(F),p(H),o("confirm-translation"),R(!1);return}n(F,H),r()}catch(A){console.error("Import failed details:",A);const H=A.message||"Import failed. Please try again.";C(H)}finally{s!=="confirm-translation"&&R(!1)}},Q=async A=>{R(!0);try{let H=u;A&&(H=await L(u)),n(H,g),r()}catch(H){console.error("Translation flow error:",H),C("Translation failed. Importing original."),n(u,g),r()}finally{R(!1)}},I=A=>{const H=A.target.files[0];H&&(x(H),S(URL.createObjectURL(H)))};return c.jsx("div",{className:"modal-overlay fade-in",children:c.jsxs(pt,{className:"import-modal-card",children:[c.jsx("h3",{className:"modal-title",children:s==="confirm-translation"?"":""}),s==="confirm-translation"?c.jsxs("div",{className:"translation-confirm-content",children:[c.jsxs("div",{style:{textAlign:"center",padding:"1rem 0",marginBottom:"1rem"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"  "}),c.jsx("p",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:""}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#666"},children:["",c.jsx("br",{}),c.jsx("span",{style:{fontSize:"0.8rem"},children:"(DeepL)"})]})]}),c.jsxs("div",{className:"modal-actions",style:{flexDirection:"column",gap:"8px"},children:[c.jsx(fe,{type:"button",variant:"primary",onClick:()=>Q(!0),isLoading:E,style:{width:"100%"},children:""}),c.jsx(fe,{type:"button",variant:"secondary",onClick:()=>Q(!1),disabled:E,style:{width:"100%"},children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"import-mode-tabs",children:[c.jsx("button",{type:"button",onClick:()=>o("url"),className:`tab-btn tab-import-web ${s==="url"?"active":""}`,children:" Web URL"}),c.jsx("button",{type:"button",onClick:()=>o("image"),className:`tab-btn tab-import-image ${s==="image"?"active":""}`,children:"  (Best Effort)"})]}),s==="url"?c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"URL"}),c.jsx("input",{type:"url",placeholder:"https://...",value:m,onChange:A=>v(A.target.value),className:"import-url-input",autoFocus:!0})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{children:""}),c.jsxs("div",{className:"image-upload-wrapper",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:I,id:"recipe-image-upload",className:"image-upload-input"}),c.jsx("label",{htmlFor:"recipe-image-upload",onDragEnter:G,onDragLeave:G,onDragOver:G,onDrop:$,className:`image-upload-label ${D?"drag-active":""}`,children:w?c.jsx("img",{src:w,alt:"Preview",className:"image-upload-preview"}):D?"":""})]})]}),T&&c.jsx("p",{className:"error-text",children:T}),c.jsxs("div",{className:"modal-actions",children:[c.jsx(fe,{type:"button",variant:"ghost",onClick:r,disabled:E,children:""}),c.jsx(fe,{type:"button",variant:"primary",onClick:q,isLoading:E,disabled:s==="url"?!m:!y,children:""})]})]})]})})},Pv=({onSave:r,onCancel:n,initialData:a})=>{const s=a||{},[o,u]=j.useState(null),[h,g]=j.useState(new Map);j.useMemo(()=>Array.from(h.keys()),[h]);const[p,m]=j.useState(null),[v,y]=j.useState([]);Ee.useEffect(()=>{(async()=>{const H=await Ta.fetchPriceList();g(H)})()},[]);const x=j.useMemo(()=>{const A=s.steps||[""];let H=s.stepGroups||[];const F=A.some(N=>typeof N=="object"&&N.group);if(H.length===0&&F){const N=new Map;A.forEach(V=>{typeof V=="object"&&V.group&&!N.has(V.group)&&N.set(V.group,crypto.randomUUID())}),H=Array.from(N.entries()).map(([V,W])=>({id:W,name:V}))}return{steps:A.map(N=>{const V=typeof N=="string"?N:N.text||"",W=typeof N=="object"&&N.id?N.id:crypto.randomUUID();let ne=typeof N=="object"?N.groupId:void 0;const oe=typeof N=="object"?N.group:void 0;if(!ne&&oe&&H.length>0){const O=H.find(B=>B.name===oe);O&&(ne=O.id)}return{id:W,text:V,groupId:ne}}),stepGroups:H}},[s]),w=x.steps,S=x.stepGroups,E=j.useMemo(()=>{const A=s.ingredients||[{name:"",quantity:"",unit:"",cost:"",purchaseCost:""}];let H=s.ingredientGroups||[];if(H.length===0&&A.some(ee=>ee.group)){const ee=new Map;A.forEach(N=>{N.group&&!ee.has(N.group)&&ee.set(N.group,crypto.randomUUID())}),H=Array.from(ee.entries()).map(([N,V])=>({id:V,name:N})),ee.size>0&&A.some(N=>!N.group)}return{ingredients:A.map(ee=>{const N=typeof ee=="string"?{name:ee,quantity:"",unit:"",cost:"",purchaseCost:""}:{...ee,cost:ee.cost||"",purchaseCost:ee.purchaseCost||""};let V=N.groupId;if(!V&&N.group&&H.length>0){const W=H.find(ne=>ne.name===N.group);W&&(V=W.id)}return{...N,id:N.id||crypto.randomUUID(),groupId:V}}),ingredientGroups:H}},[s]),R=E.ingredients,T=E.ingredientGroups,[C,D]=j.useState({title:s.title||"",description:s.description||"",image:s.image||"",imageFile:null,storeName:s.storeName||"",servings:s.servings||"",ingredients:R,ingredientGroups:T,steps:w,stepGroups:S,tags:s.tags||[""],course:s.course||"",category:s.category||"",type:s.type||"normal",flours:s.flours||[],breadIngredients:s.breadIngredients||[],sourceUrl:s.sourceUrl||""}),[J,G]=j.useState(!1);Zs(an(el,{activationConstraint:{distance:10}}),an(tl,{activationConstraint:{delay:1e3,tolerance:5}}),an(Aa,{coordinateGetter:al}));const $=(A,H="")=>{const F=new Map,ee=A.ingredients||[];ee.forEach(B=>{let ie=B.group||"";ie==="Main"&&(ie=""),F.has(ie)||F.set(ie,crypto.randomUUID())});const N=Array.from(F.entries()).map(([B,ie])=>({id:ie,name:B})),V=ee.map(B=>{let ie=B.group||"";ie==="Main"&&(ie="");let ce;return F.has(ie)&&(ce=F.get(ie)),{id:crypto.randomUUID(),name:B.name||"",quantity:B.quantity||"",unit:B.unit||"",cost:"",purchaseCost:"",groupId:ce}}),W=new Map,ne=A.steps||[];ne.forEach(B=>{typeof B=="object"&&B.group&&B.group!=="Main"&&(W.has(B.group)||W.set(B.group,crypto.randomUUID()))});const oe=Array.from(W.entries()).map(([B,ie])=>({id:ie,name:B})),O=ne.map(B=>{const ie=typeof B=="object",ce=ie?B.text||"":B,ve=ie?B.group:null;let ue;return ve&&W.has(ve)&&(ue=W.get(ve)),{id:crypto.randomUUID(),text:ce,groupId:ue}});D(B=>({...B,title:A.name||B.title,description:A.description||B.description,category:H?"URL":A.category||B.category,image:A.image||B.image,servings:A.recipeYield||B.servings,ingredients:V,ingredientGroups:N,steps:O,stepGroups:oe,ingredientSections:void 0,stepSections:void 0,sourceUrl:H||B.sourceUrl})),u(null)},U=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?G(!0):A.type==="dragleave"&&G(!1)},L=A=>{if(A.preventDefault(),A.stopPropagation(),G(!1),A.dataTransfer.files&&A.dataTransfer.files[0]){const H=A.dataTransfer.files[0];H.type.startsWith("image/")&&D(F=>({...F,imageFile:H,image:URL.createObjectURL(H)}))}},q=A=>{const{id:H,value:F}=A.target;D(ee=>({...ee,[H]:F}))},Q=A=>{const H=A.target.files[0];H&&D(F=>({...F,imageFile:H,image:URL.createObjectURL(H)}))},I=A=>{A.preventDefault();let H=[],F=[];if(C.type==="bread")H=C.ingredients.map(({id:oe,...O})=>O);else{const oe=C.ingredientSections||[];oe.length===0&&C.ingredients.length>0?H=C.ingredients.map(({id:O,...B})=>B):(H=oe.flatMap(O=>O.items.map(B=>({...B,groupId:O.id}))).map(({id:O,...B})=>B),F=oe.map(O=>({id:O.id,name:O.name})))}const ee=new Set(C.tags||[]);C.course&&ee.add(C.course),C.category&&ee.add(C.category),C.type==="bread"&&ee.add("");const N=Array.from(ee).filter(Boolean);let V=[],W=[];const ne=C.stepSections||[];ne.length===0&&C.steps.length>0?V=C.steps.map(oe=>typeof oe=="string"?{text:oe}:oe):(V=ne.flatMap(oe=>oe.items.map(O=>({text:O.text,groupId:oe.id}))),W=ne.map(oe=>({id:oe.id,name:oe.name}))),r({...C,ingredients:H,ingredientGroups:F,steps:V,stepGroups:W,image:C.imageFile||C.image,id:s.id||Date.now(),tags:N,ingredientSections:void 0,stepSections:void 0})};return c.jsxs("form",{className:"recipe-form fade-in",onSubmit:I,children:[o&&c.jsx(h0,{onClose:()=>u(null),onImport:$,initialMode:o}),c.jsxs("div",{className:"recipe-form__header",children:[c.jsx("h2",{className:"section-title",children:s.title?"":""}),c.jsxs("div",{className:"recipe-form__actions",children:[c.jsx(fe,{type:"button",variant:"ghost",onClick:n,children:""}),c.jsx(fe,{type:"submit",variant:"primary",children:""})]})]}),c.jsxs("div",{className:"recipe-form__grid",children:[c.jsxs("div",{className:"form-column",children:[c.jsxs(pt,{children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsx(st,{id:"course",value:C.course,onChange:q,placeholder:": , ",list:"course-options"}),c.jsxs("datalist",{id:"course-options",children:[c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsx(st,{id:"category",value:C.category,onChange:q,placeholder:": , ",list:"category-options"}),c.jsxs("datalist",{id:"category-options",children:[c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""})]})]})]}),c.jsx(st,{label:"",id:"title",value:C.title,onChange:q,placeholder:": ",required:!0}),c.jsx(st,{label:"",id:"description",textarea:!0,value:C.description,onChange:q,placeholder:"..."}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"URL"}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx(st,{id:"sourceUrl",value:C.sourceUrl||"",onChange:q,placeholder:"https://example.com/recipe/...",style:{flex:1}}),C.sourceUrl&&c.jsx(fe,{type:"button",variant:"ghost",onClick:()=>D(A=>({...A,sourceUrl:""})),title:"URL",style:{color:"var(--color-danger)"},children:""})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"hsl(var(--color-primary))"},children:""}),c.jsxs("div",{onDragEnter:U,onDragLeave:U,onDragOver:U,onDrop:L,style:{position:"relative",marginBottom:"1rem",borderRadius:"var(--radius-md)",overflow:"hidden",border:J?"2px dashed var(--color-primary)":"1px dashed hsl(var(--color-border))",backgroundColor:J?"#f0f9ff":"#f9f9f9",transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[C.image?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{width:"100%",height:"200px",backgroundColor:"#f0f0f0",position:"relative"},children:[c.jsx("img",{src:C.image,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",opacity:J?.5:1},onError:A=>{A.target.style.display="none",A.target.parentElement.textContent=""}}),c.jsx("button",{type:"button",onClick:A=>{A.preventDefault(),A.stopPropagation(),D(H=>({...H,image:"",imageFile:null}))},style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",lineHeight:1,zIndex:10},title:"",children:""})]}),c.jsx("div",{style:{padding:"0.5rem",fontSize:"0.8rem",color:"#666"},children:""})]}):c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:J?"":""}),c.jsx("input",{type:"file",accept:"image/*",onChange:Q,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",display:C.image?"none":"block"}}),C.image&&c.jsx("input",{type:"file",accept:"image/*",onChange:Q,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1}})]})]})]}),!s.id&&c.jsxs(pt,{className:"mb-md glass-card",children:[c.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"0.8rem",marginBottom:"0.8rem"},children:""}),c.jsxs("div",{className:"import-actions-row",children:[c.jsx(fe,{variant:"secondary",type:"button",onClick:()=>u("url"),className:"btn-import-web",children:" Web URL"}),c.jsx(fe,{variant:"secondary",type:"button",onClick:()=>u("image"),className:"btn-import-image",children:"  (Best Effort)"})]}),c.jsxs("div",{className:"image-upload-section",style:{marginTop:"0.2rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"#555",marginBottom:"0.4rem",display:"block"},children:""}),c.jsx("input",{type:"file",accept:"image/*",onChange:Q,style:{marginBottom:"0.5rem"}}),C.image&&c.jsx("div",{style:{marginTop:"0.5rem"},children:c.jsx("img",{src:C.image,alt:"Preview",style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"4px"}})})]})]}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:""}),c.jsx(st,{id:"storeName",value:C.storeName,onChange:q,placeholder:"",list:"store-options"}),c.jsx("datalist",{id:"store-options",children:uh.map(A=>c.jsx("option",{value:A},A))})]}),c.jsx(st,{label:"",id:"servings",value:C.servings,onChange:q,placeholder:"4"})]})]}),c.jsxs("div",{className:"form-column",children:[c.jsxs(pt,{className:"mb-md",style:{position:"relative",zIndex:10},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"mode-toggle",style:{display:"flex",gap:"0.5rem",background:"#eee",padding:"4px",borderRadius:"8px"},children:[c.jsx("button",{type:"button",onClick:()=>D(A=>({...A,type:"normal"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:C.type==="normal"?"white":"transparent",fontWeight:C.type==="normal"?"bold":"normal",boxShadow:C.type==="normal"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:""}),c.jsx("button",{type:"button",onClick:()=>D(A=>({...A,type:"bread"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:C.type==="bread"?"white":"transparent",fontWeight:C.type==="bread"?"bold":"normal",boxShadow:C.type==="bread"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",color:C.type==="bread"?"var(--color-primary)":"inherit"},children:" (Baker's %)"})]})]}),C.type==="bread"?c.jsx(YE,{formData:C,setFormData:D}):c.jsx(FE,{formData:C,setFormData:D,priceList:h})]}),c.jsxs(pt,{children:[c.jsx("h3",{children:""}),c.jsx(eC,{formData:C,setFormData:D})]})]})]})]})},tC="modulepreload",nC=function(r){return"/app/"+r},Vv={},ks=function(n,a,s){let o=Promise.resolve();if(a&&a.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");o=p(a.map(m=>{if(m=nC(m),m in Vv)return;Vv[m]=!0;const v=m.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":tC,v||(x.as="script"),x.crossOrigin="",x.href=m,g&&x.setAttribute("nonce",g),document.head.appendChild(x),v)return new Promise((w,S)=>{x.addEventListener("load",w),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return n().catch(u)})},rC=({onBack:r})=>{const[n,a]=j.useState(null),[s,o]=j.useState({type:"",message:""}),[u,h]=j.useState(!1),[g,p]=j.useState([]),[m,v]=j.useState(!1),[y,x]=j.useState(null),[w,S]=j.useState({key:"dateStr",direction:"desc"}),[E,R]=j.useState(""),T=q=>{let Q="asc";w.key===q&&w.direction==="asc"&&(Q="desc"),S({key:q,direction:Q})},C=Ee.useMemo(()=>{let q=[...g];if(E){const Q=E.toLowerCase().trim();q=q.filter(I=>I.name&&I.name.toLowerCase().includes(Q)||I.vendor&&I.vendor.toLowerCase().includes(Q)||I.dateStr&&I.dateStr.includes(Q))}return w.key&&q.sort((Q,I)=>{let A=Q[w.key]||"",H=I[w.key]||"";return A<H?w.direction==="asc"?-1:1:A>H?w.direction==="asc"?1:-1:0}),q},[g,w,E]),[D,J]=j.useState([]);j.useEffect(()=>{G()},[]);const G=async()=>{v(!0);try{const q=await Ta.getPriceListArray();p(q);const Q=await Ta.getFileList();J(Q)}catch(q){console.error("Failed to load price data",q)}finally{v(!1)}},$=q=>{q.target.files&&q.target.files[0]&&(a(q.target.files[0]),o({type:"",message:""}))},U=async()=>{if(!n)return;h(!0),o({type:"info",message:"..."});const q=await Ta.uploadPriceList(n);if(h(!1),q.success){o({type:"success",message:""}),a(null);const Q=document.getElementById("csv-upload-input");Q&&(Q.value=""),G()}else o({type:"error",message:`: ${q.error.message}`})},L=q=>{x({message:`${q}
`,onConfirm:async()=>{h(!0);const Q=await Ta.deletePriceFile(q);h(!1),Q.success?(o({type:"success",message:""}),G()):o({type:"error",message:`: ${Q.error.message}`})}})};return c.jsxs("div",{className:"dashboard-container fade-in",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("h2",{className:"section-title",style:{margin:0,fontSize:"1.5rem"},children:""}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#666",background:"#eee",padding:"2px 8px",borderRadius:"12px"},children:"Admin Mode"})]}),c.jsx(fe,{variant:"ghost",onClick:r,children:" "})]}),c.jsxs("div",{className:"dashboard-content",children:[c.jsxs("aside",{className:"dashboard-sidebar",children:[c.jsxs("div",{className:"sidebar-card",children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx("span",{children:""})," "]}),c.jsxs("div",{className:"upload-area",children:[c.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:["CSV (Shift-JIS)",c.jsx("br",{}),c.jsxs("span",{style:{fontSize:"0.75rem",color:"#888"},children:[" 1: , , , ",c.jsx("br",{})," 2:  (12.csv)"]})]}),c.jsx("input",{type:"file",accept:".csv",onChange:$,id:"csv-upload-input",className:"csv-input",style:{width:"100%",marginBottom:"0.5rem",fontSize:"0.85rem"}}),c.jsx(fe,{variant:"primary",onClick:U,disabled:!n||u,className:"upload-btn",size:"sm",block:!0,children:u?"...":""})]}),s.message&&c.jsx("div",{className:`status-msg ${s.type}`,children:s.message})]}),c.jsxs("div",{className:"sidebar-card",style:{flex:1},children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx("span",{children:""})," ",c.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal",marginLeft:"auto"},children:[D.length,""]})]}),D.length===0?c.jsx("p",{style:{color:"#aaa",fontStyle:"italic",fontSize:"0.85rem",textAlign:"center"},children:""}):c.jsx("div",{className:"file-list",children:D.map(q=>c.jsxs("div",{className:"file-list-item",children:[c.jsx("span",{className:"file-name",title:q.name,children:q.name}),c.jsx(fe,{variant:"danger",size:"sm",onClick:()=>L(q.name),disabled:u,style:{padding:"2px 8px",fontSize:"0.75rem",minWidth:"auto"},children:""})]},q.name))})]}),c.jsxs("div",{className:"sidebar-card",children:[c.jsx("div",{className:"sidebar-title",children:" "}),c.jsxs("ul",{style:{fontSize:"0.75rem",color:"#666",paddingLeft:"1.2rem",margin:0},children:[c.jsx("li",{style:{marginBottom:"4px"},children:""}),c.jsx("li",{style:{marginBottom:"4px"},children:""})]})]})]}),c.jsxs("main",{className:"dashboard-main",children:[c.jsxs("div",{className:"main-toolbar",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"#333"},children:""}),c.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},children:[" ",C.length.toLocaleString()," "]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx(st,{placeholder:" (, , )...",value:E,onChange:q=>R(q.target.value),style:{width:"250px",fontSize:"0.9rem"}}),c.jsx(fe,{variant:"secondary",size:"sm",onClick:G,children:" "})]})]}),c.jsx("div",{className:"table-wrapper",children:m?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:"#888"},children:"..."}):c.jsxs("table",{className:"enterprise-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsxs("th",{onClick:()=>T("dateStr"),style:{width:"120px"},children:[" ",w.key==="dateStr"&&(w.direction==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>T("vendor"),children:[" ",w.key==="vendor"&&(w.direction==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>T("name"),children:[" ",w.key==="name"&&(w.direction==="asc"?"":"")]}),c.jsx("th",{style:{textAlign:"right",width:"150px"},children:" ()"})]})}),c.jsx("tbody",{children:C.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"no-data",children:""})}):C.map((q,Q)=>c.jsxs("tr",{children:[c.jsx("td",{className:"col-date",children:q.dateStr||"-"}),c.jsx("td",{children:q.vendor||"-"}),c.jsx("td",{style:{fontWeight:"500"},children:q.name}),c.jsxs("td",{className:"col-number",children:[q.price?q.price.toLocaleString():"-",q.unit&&c.jsxs("span",{style:{color:"#888",fontSize:"0.85em",marginLeft:"4px"},children:["/ ",q.unit]})]})]},Q))})]})})]}),c.jsx("aside",{className:"dashboard-sidebar",children:c.jsxs("div",{className:"sidebar-card",style:{borderColor:"var(--color-primary)"},children:[c.jsxs("div",{className:"sidebar-title",style:{color:"var(--color-primary)"},children:[c.jsx("span",{children:""})," "]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:""}),c.jsx(fe,{variant:"secondary",size:"sm",block:!0,onClick:async()=>{try{const q=await ks(()=>Promise.resolve().then(()=>Tv),[]).then(H=>H.recipeService.exportAllRecipes()),Q=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),I=URL.createObjectURL(Q),A=document.createElement("a");A.href=I,A.download=`recipe_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(I)}catch(q){alert(""),console.error(q)}},children:" JSON"})]}),c.jsxs("div",{children:[c.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:" / "}),c.jsx("input",{type:"file",accept:".json",id:"backup-upload-input",style:{display:"none"},onChange:async q=>{const Q=q.target.files[0];if(Q){if(!window.confirm(`
`)){q.target.value="";return}try{o({type:"info",message:"..."}),h(!0);const I=await Q.text(),A=JSON.parse(I),{recipeService:H}=await ks(async()=>{const{recipeService:ee}=await Promise.resolve().then(()=>Tv);return{recipeService:ee}},void 0),F=await H.importRecipes(A);alert(`${F.count}${F.errors.length>0?`
: ${F.errors.length}`:""}`),o({type:"success",message:""})}catch(I){console.error(I),alert(""),o({type:"error",message:""})}finally{h(!1),q.target.value=""}}}}),c.jsx(fe,{variant:"secondary",size:"sm",block:!0,onClick:()=>document.getElementById("backup-upload-input").click(),disabled:u,children:" "})]})]})})]}),y&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,animation:"fadeIn 0.2s ease-out"},onClick:()=>x(null),children:c.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},onClick:q=>q.stopPropagation(),children:[c.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#333"},children:""}),c.jsx("p",{style:{whiteSpace:"pre-wrap",marginBottom:"24px",color:"#666"},children:y.message}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx(fe,{variant:"ghost",onClick:()=>x(null),children:""}),c.jsx(fe,{variant:"danger",onClick:()=>{y.onConfirm(),x(null)},children:""})]})]})})]})},aC=({recipes:r,recentIds:n,onSelect:a})=>{if(!n||n.length===0)return null;const s=n.map(o=>r.find(u=>u.id===o)).filter(Boolean).slice(0,7);return s.length===0?null:c.jsxs("div",{className:"recent-recipes",children:[c.jsx("h3",{className:"recent-header",children:""}),c.jsx("div",{className:"recent-list",children:s.map(o=>c.jsxs("div",{className:"recent-item",onClick:()=>a(o),children:[c.jsx("div",{className:"recent-thumbnail",children:o.image?c.jsx("img",{src:o.image,alt:o.title}):c.jsx("div",{className:"recent-placeholder"})}),c.jsx("div",{className:"recent-info",children:c.jsx("div",{className:"recent-title",children:o.title})})]},o.id))})]})},iC=({onBack:r})=>(j.useEffect(()=>{window.scrollTo(0,0)},[]),c.jsxs("div",{className:"levain-guide-container",children:[c.jsxs("header",{className:"levain-guide-header",children:[c.jsx("h1",{children:"LEVAIN GUIDE"}),c.jsx("p",{className:"subtitle",children:" "}),c.jsx("p",{className:"subtitle",children:""}),c.jsx("div",{className:"divider"})]}),c.jsxs("main",{className:"levain-guide-main",children:[c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("p",{children:"Levain"}),c.jsx("h3",{children:""}),c.jsx("p",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"Yeast"})," Saccharomyces cerevisiae, Saccharomyces pastorianus ",c.jsx("br",{}),c.jsx("strong",{children:"LAB"})," Lactobacillus plantarum, Lactobacillus brevis ",c.jsx("br",{}),c.jsx("strong",{children:""})," Acetobacter aceti "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:["",c.jsx("br",{}),c.jsxs("div",{className:"formula",children:["CHO  2CHOH + 2CO + ",c.jsx("br",{}),"(   +  + )"]}),"",c.jsx("br",{}),c.jsxs("div",{className:"formula",children:["CHO  2CHO",c.jsx("br",{}),"(  )"]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[" ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"- 7-10"}),c.jsxs("div",{className:"timeline",children:[c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 1-2 "}),c.jsx("p",{children:"100g + 100ml 20-22"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," "]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 3-4 "}),c.jsx("p",{children:"50%50g + 50ml "}),c.jsx("p",{children:"100g  50g50g + 50ml"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," pH 3.5-4.5"]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 5-6 2"}),c.jsx("p",{children:"50%50g + 50ml "}),c.jsxs("div",{className:"success-box",children:[" ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 7-10 3"}),c.jsx("p",{children:"1150%1:1"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," 15",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," pH 3.5-4.0"]})]})]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:"(g)"}),c.jsx("th",{children:"(ml)"}),c.jsx("th",{children:"(g)"}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"0"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"2"}),c.jsx("td",{children:"1"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"0"}),c.jsx("td",{children:""})]})]})]})})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"5-8"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"2-4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"15-18"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"1-2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"20-22"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"3-5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"25-28"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"2-3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"30"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"1-2"})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"1"}),c.jsx("br",{}),"100g50g + 50ml"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),"8-12"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),""]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"2%100ml2g"}),c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"2"}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 12 8:00"}),c.jsx("br",{}),"50g25g + 25ml "]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 1  14:00"}),c.jsx("br",{}),"25g + 25ml 2"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 1  20:00"}),c.jsx("br",{}),""]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:" "})," ",c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:" "})," pH",c.jsx("br",{}),"pH 3.5-4.0pH"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"18"}),c.jsx("td",{children:"16-24"}),c.jsx("td",{children:"1"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"20-22"}),c.jsx("td",{children:"12-16"}),c.jsx("td",{children:"2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"24-26"}),c.jsx("td",{children:"8-12"}),c.jsx("td",{children:"2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"28"}),c.jsx("td",{children:"4-8"}),c.jsx("td",{children:"2"})]})]})]})})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"1"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. 22",c.jsx("br",{}),"2. 12",c.jsx("br",{}),"3. 1",c.jsx("br",{}),"4. 1-2"]}),c.jsx("h3",{children:"2"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," pH",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," "]}),c.jsx("h3",{children:"3"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. ",c.jsx("br",{}),"2. 15",c.jsx("br",{}),"3. 80%"]}),c.jsx("h3",{children:"4"}),c.jsxs("div",{className:"success-box",children:["",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," "]}),c.jsx("h3",{children:"5"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. 1:0.8",c.jsx("br",{}),"2. ",c.jsx("br",{}),"3. "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"pH"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"pH4-8.0"}),c.jsx("br",{}),c.jsx("br",{})," pH 7.0",c.jsx("br",{})," pH 4.5-5.5",c.jsx("br",{})," pH 3.5-4.0",c.jsx("br",{})," pH 3.0"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:[c.jsx("strong",{children:"pH 3.8-4.0"})," ",c.jsx("br",{}),c.jsx("strong",{children:"pH 3.5"})," ",c.jsx("br",{}),c.jsx("strong",{children:"pH 4.5"})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," 1",c.jsx("br",{})," ",c.jsx("br",{})," -203"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"15-20"}),c.jsx("td",{children:"18-20"}),c.jsx("td",{children:"1-2"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"25+"}),c.jsx("td",{children:"22-24"}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"18-22"}),c.jsx("td",{children:"20-22"}),c.jsx("td",{children:"1-2"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"5-15"}),c.jsx("td",{children:"18"}),c.jsx("td",{children:"2-3"}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," 24",c.jsx("br",{})," ",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," 18",c.jsx("br",{})," "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),":=1:1 :=1:2 or 1:3"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),"100g + 50g + 150ml 12-24",c.jsx("br",{}),"11-2"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"100ml"}),c.jsx("br",{})," 110 to 110 CFU/ml",c.jsx("br",{})," 110 to 110 CFU/ml",c.jsx("br",{})," pH3.5-4.0",c.jsx("br",{})," 0.5-1.5%",c.jsx("br",{})," 0.3-0.8%"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"15-25% ()"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"5-15%"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"20-30%"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"30-50%"}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"formula",children:[" 18   - 8",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{})," 2018  (20-8) = 1.5",c.jsx("br",{})," 2418  (24-8) = 1.125",c.jsx("br",{})," 2818  (28-8) = 0.954"]})]})]})]}),c.jsxs("footer",{className:"levain-footer",children:[c.jsx("p",{children:" Maitriser le Levain, c'est comprendre la vie "}),c.jsx("p",{children:""})]}),c.jsxs("button",{className:"levain-back-button",onClick:r,children:[c.jsx("span",{children:""})," "]})]})),sC=({onBack:r})=>{const[n,a]=j.useState([]),[s,o]=j.useState(!0),[u,h]=j.useState(null);j.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0);const E=(await Ds.fetchAllUsers()).map(R=>{const T=`user_prefs_${R.id}`,C=JSON.parse(localStorage.getItem(T)||"{}");return C.show_master_recipes!==void 0?{...R,show_master_recipes:C.show_master_recipes}:R});a(E)}catch(S){console.error(S),h("")}finally{o(!1)}},[p,m]=j.useState(null),v=async()=>{if(p)try{await Ds.deleteUser(p.id),a(n.filter(S=>S.id!==p.id)),m(null)}catch(S){console.error(S),alert(`: ${S.message||""}`)}},y=n.filter(S=>S.id==="admin"),x=n.filter(S=>S.id!=="admin"),w=({user:S,isAdmin:E})=>c.jsxs(pt,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",backgroundColor:"white"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#333"},children:[S.id," ",E&&c.jsx("span",{style:{fontSize:"0.8rem",backgroundColor:"#e0e0e0",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",color:"#555"},children:""})]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[": ",new Date(S.created_at).toLocaleString()]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",S.last_login_at?new Date(S.last_login_at).toLocaleString():"---"]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",c.jsx("strong",{children:S.recipeCount||0})]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"#999",marginTop:"4px"},children:["Pass: ",S.password]})]}),!E&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.9rem",color:"#555"},children:[c.jsx("input",{type:"checkbox",checked:S.show_master_recipes||!1,onChange:async R=>{const T=R.target.checked;a(C=>C.map(D=>D.id===S.id?{...D,show_master_recipes:T}:D));try{const C=`user_prefs_${S.id}`,D=JSON.parse(localStorage.getItem(C)||"{}");D.show_master_recipes=T,localStorage.setItem(C,JSON.stringify(D))}catch(C){console.error(C)}try{await Ds.updateUser(S.id,{show_master_recipes:T})}catch(C){console.error(C)}}}),""]}),c.jsx(fe,{variant:"danger",onClick:()=>m(S),children:""})]})]},S.id);return c.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",height:"100%",overflowY:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",color:"var(--text-color)"},children:[c.jsx("h2",{children:""}),c.jsx(fe,{variant:"ghost",onClick:r,children:""})]}),u&&c.jsx("div",{style:{padding:"10px",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",marginBottom:"20px"},children:u}),p&&c.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(pt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",backgroundColor:"white",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"#dc3545"},children:""}),c.jsxs("p",{style:{color:"#333"},children:["",c.jsx("strong",{children:p.id}),"",c.jsx("br",{}),c.jsx("span",{style:{fontSize:"0.9em",color:"#666"},children:""})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(fe,{variant:"ghost",onClick:()=>m(null),children:""}),c.jsx(fe,{variant:"danger",onClick:v,children:""})]})]})}),s?c.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"..."}):c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[y.length>0&&c.jsxs("div",{children:[c.jsx("h3",{style:{borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--color-primary)"},children:""}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map(S=>c.jsx(w,{user:S,isAdmin:!0},S.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{borderBottom:"2px solid #ddd",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--text-color)"},children:""}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:x.length>0?x.map(S=>c.jsx(w,{user:S,isAdmin:!1},S.id)):c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:""})})]})]})]})},lC=()=>{const[r,n]=j.useState(!0),[a,s]=j.useState(!1),[o,u]=j.useState(""),[h,g]=j.useState(""),[p,m]=j.useState(""),[v,y]=j.useState(""),[x,w]=j.useState(1),[S,E]=j.useState(""),[R,T]=j.useState(""),[C,D]=j.useState(""),[J,G]=j.useState(!1),[$,U]=j.useState(""),[L,q]=j.useState(""),{login:Q,register:I}=Dh(),A=async ee=>{if(ee.preventDefault(),U(""),q(""),!o.trim()||!h.trim()){U("ID");return}try{await Q(o.trim(),h,J)}catch(N){U(N.message)}},H=async ee=>{if(ee.preventDefault(),U(""),!o.trim()||!h.trim()||!p.trim()||!v.trim()){U("");return}try{await I(o.trim(),h,p.trim(),v.trim()),q(""),n(!0),u(""),g("")}catch(N){U(N.message)}},F=async ee=>{ee.preventDefault(),U("");try{if(x===1){const N=await ks(()=>Promise.resolve().then(()=>kd),void 0).then(V=>V.userService.getSecurityQuestion(o.trim()));if(!N)throw new Error("");E(N),w(2)}else if(x===2)await ks(()=>Promise.resolve().then(()=>kd),void 0).then(V=>V.userService.verifySecurityAnswer(o.trim(),R.trim()))?w(3):U("");else if(x===3){if(!C.trim()){U("");return}await ks(()=>Promise.resolve().then(()=>kd),void 0).then(N=>N.userService.resetPassword(o.trim(),C.trim())),q(""),s(!1),n(!0),w(1),u(""),g("")}}catch(N){U(N.message||"")}};return a?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:c.jsxs(pt,{style:{width:"100%",maxWidth:"400px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[c.jsx("h2",{style:{textAlign:"center",color:"var(--color-primary)",marginBottom:"1.5rem"},children:""}),$&&c.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem"},children:$}),c.jsxs("form",{onSubmit:F,children:[x===1&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginBottom:"1rem"},children:"ID"}),c.jsx("input",{type:"text",value:o,onChange:ee=>u(ee.target.value),placeholder:"ID",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(fe,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]}),x===2&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{style:{marginBottom:"0.5rem",fontWeight:"bold"},children:[": ",S]}),c.jsx("input",{type:"text",value:R,onChange:ee=>T(ee.target.value),placeholder:"",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(fe,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]}),x===3&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginBottom:"1rem"},children:""}),c.jsx("input",{type:"password",value:C,onChange:ee=>D(ee.target.value),placeholder:"",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(fe,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]})]}),c.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:c.jsx("button",{onClick:()=>{s(!1),n(!0),U("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer"},children:""})})]})}):c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:c.jsxs(pt,{style:{width:"100%",maxWidth:"400px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsxs("h1",{style:{fontFamily:'"Pinyon Script", cursive',fontSize:"3rem",margin:0,color:"var(--color-primary)"},children:["Recipe",c.jsx("br",{}),"Management"]}),c.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:r?"":""})]}),$&&c.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:$}),L&&c.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:L}),c.jsxs("form",{onSubmit:r?A:H,children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"ID"}),c.jsx("input",{type:"text",value:o,onChange:ee=>u(ee.target.value),placeholder:"ID",autoComplete:"username",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),c.jsx("input",{type:"password",value:h,onChange:ee=>g(ee.target.value),placeholder:"",autoComplete:r?"current-password":"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!r&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:[" ",c.jsx("span",{style:{fontSize:"0.8em",fontWeight:"normal"},children:"()"})]}),c.jsxs("select",{value:p,onChange:ee=>m(ee.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0,children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),c.jsx("input",{type:"text",value:v,onChange:ee=>y(ee.target.value),placeholder:"",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]})]}),r&&c.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:"#333"},children:[c.jsx("input",{type:"checkbox",checked:J,onChange:ee=>G(ee.target.checked),style:{width:"18px",height:"18px",accentColor:"var(--color-primary)"}}),c.jsx("span",{children:""})]}),c.jsx("button",{type:"button",onClick:()=>{s(!0),U(""),q(""),u("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""})]}),c.jsx(fe,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.1rem"},children:r?"":""})]}),c.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:c.jsx("button",{onClick:()=>{n(!r),U(""),q(""),m(""),y("")},style:{background:"none",border:"none",color:"var(--color-primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:r?"":""})})]})})};function oC(){const{user:r,logout:n,loading:a}=Dh(),[s,o]=aS(),[u,h]=j.useState([]),[g,p]=j.useState(!0),[m,v]=j.useState(0),[y,x]=j.useState([]),w=s.get("view")||"list",S=s.get("id"),E=u.find(z=>String(z.id)===S)||null,[R,T]=j.useState(""),[C,D]=j.useState(null),[J,G]=j.useState(null),[$,U]=j.useState(""),[L,q]=j.useState(!1),[Q,I]=j.useState(!1),[A,H]=j.useState(new Set),[F,ee]=j.useState("normal"),[N,V]=j.useState(!1);j.useEffect(()=>{ie(),B(),oe(),B(),oe()},[]);const W=Zs(an(el,{activationConstraint:{distance:10}}),an(tl,{activationConstraint:{delay:1e3,tolerance:5}}),an(Aa,{coordinateGetter:al})),ne=z=>{const{active:se,over:le}=z;se.id!==le.id&&h(Se=>{const _e=Se.findIndex(pe=>pe.id===se.id),He=Se.findIndex(pe=>pe.id===le.id);if(_e===-1||He===-1)return Se;const ke=Di(Se,_e,He),Pe=ke.map((pe,Re)=>({id:pe.id,order_index:Re}));return It.updateOrder(Pe).catch(pe=>console.error("Order update failed",pe)),ke})},oe=async()=>{try{const z=await It.fetchRecentRecipes();x(z||[])}catch(z){console.error("Failed to load history:",z)}},O=async z=>{const se=[z,...y.filter(le=>le!==z)].slice(0,20);x(se);try{await It.addToHistory(z)}catch(le){console.error("Failed to sync history",le)}},B=async()=>{try{const z=await It.getDeletedCount();v(z||0)}catch(z){console.error("Failed to load trash count:",z)}},ie=async()=>{try{p(!0);const z=await It.fetchRecipes(r);h(z||[])}catch(z){console.error("Failed to fetch recipes:",z)}finally{p(!1)}},ce=[...new Set(u.map(z=>z.course).filter(Boolean))],ve=[...new Set(u.map(z=>z.category).filter(Boolean))],ue=u.reduce((z,se)=>(se.storeName&&(z[se.storeName]=(z[se.storeName]||0)+1),z),{}),Oe=u.reduce((z,se)=>(se.course&&(z[se.course]=(z[se.course]||0)+1),z),{}),Ve=u.reduce((z,se)=>(se.category&&(z[se.category]=(z[se.category]||0)+1),z),{}),De=u.filter(z=>{const se=R===""||R==="recent"&&y.includes(z.id)||z.tags&&z.tags.includes(R)||z.category&&z.category===R||z.storeName&&z.storeName===R,le=$.toLowerCase().trim(),Se=!le||z.title.toLowerCase().includes(le)||z.description&&z.description.toLowerCase().includes(le)||z.ingredients&&z.ingredients.some(_e=>_e.name.toLowerCase().includes(le));return se&&Se}),Ne=R===""&&!$.trim()&&w==="list",qt=z=>{o({view:"detail",id:z.id})},Ct=async(z,se=!1)=>{try{if(z.tags&&r.id!=="yoshito"&&r.id!=="admin"&&z.tags.some(Se=>Se==="owner:yoshito")){alert("");return}se?(await It.restoreRecipe(z.id),(w==="trash"||w==="detail")&&(o({view:"trash"}),Je()),alert("")):(await It.deleteRecipe(z.id),h(u.filter(le=>le.id!==z.id)),o({view:"list"}),B())}catch(le){console.error("Failed to delete/restore recipe:",le),alert("")}finally{B()}},sn=async z=>{try{await It.hardDeleteRecipe(z.id),h(u.filter(se=>se.id!==z.id)),o({view:"trash"}),alert(""),Je(),B()}catch(se){console.error("Failed to hard delete recipe:",se),alert("")}},Je=async()=>{try{p(!0);const z=await It.fetchDeletedRecipes();h(z||[]),T("")}catch(z){console.error("Failed to fetch deleted recipes:",z)}finally{p(!1)}},Pt=()=>{o({view:"trash"}),Je()},$t=()=>{o({view:"list"}),ie()},tr=async(z,se)=>{try{let le,Se=se;if(se&&r.id!=="admin"){const _e=z.tags?.find(ke=>ke.startsWith("owner:"));_e===`owner:${r.id}`||(console.log(`Editing Recipe (Owner Tag: ${_e||"None"}) as ${r.id}. Not the owner. Switching to Create mode (Copy).`),Se=!1)}Se?(le=await It.updateRecipe(z,r),h(u.map(_e=>_e.id===le.id?le:_e))):(le=await It.createRecipe(z,r),h([le,...u])),o(Se?{view:"detail",id:le.id}:{view:"detail",id:le.id})}catch(le){console.error("Failed to save recipe:",le),alert(`
: ${le.message||le.error_description||JSON.stringify(le)}`)}},yn=(z,se="")=>{const Se=["","baker","","","","dough","fermentation"].some(Xe=>(z.title||"").toLowerCase().includes(Xe)),_e=["flour","","","","","","","","",""],He=["yeast","","",""],ke=z.ingredients||[],Pe=ke.some(Xe=>He.some(gt=>(Xe.name||"").toLowerCase().includes(gt))),pe=ke.some(Xe=>_e.some(gt=>(Xe.name||"").toLowerCase().includes(gt))&&!Xe.name.includes(""));if(ke.some(Xe=>Xe.quantity&&String(Xe.quantity).includes("%")||Xe.unit&&String(Xe.unit).includes("%"))||Pe||Se&&pe){z.type="bread",z.flours=[],z.breadIngredients=[];const Xe=["flour","","","","","","","",""];if(ke.forEach(gt=>{Xe.some(wn=>(gt.name||"").includes(wn))?z.flours.push(gt):z.breadIngredients.push(gt)}),z.flours.length===0&&ke.length>0){const gt=ke[0];(gt.name||"").includes("")&&(z.flours.push(gt),z.breadIngredients=z.breadIngredients.filter(xn=>xn!==gt))}}z.sourceUrl=se,se&&(z.category="URL"),G(z),o({view:"create"})},Vt=()=>{I(!Q),H(new Set)},Nt=z=>{const se=new Set(A);se.has(z)?se.delete(z):se.add(z),H(se)},bn=()=>{V(!0)},Xn=()=>{V(!1)},nr=async()=>{V(!1);try{p(!0),w==="trash"?(await Promise.all(Array.from(A).map(z=>It.hardDeleteRecipe(z))),Je()):(await Promise.all(Array.from(A).map(z=>It.deleteRecipe(z))),h(u.filter(z=>!A.has(z.id))),B()),H(new Set),I(!1),alert("")}catch(z){console.error("Bulk delete failed",z),alert(""),w==="trash"?Je():ie()}finally{p(!1)}},at=async()=>{if(window.confirm(`${A.size}`))try{p(!0);for(const z of A)await It.restoreRecipe(z);h(u.filter(z=>!A.has(z.id))),B(),I(!1),H(new Set),alert(""),Je()}catch(z){console.error("Bulk restore failed",z),alert(""),Je()}finally{p(!1)}},rr=()=>{const z=De.map(se=>se.id);H(new Set(z))},de=z=>{h([z,...u]),o({view:"edit",id:z.id})};return j.useEffect(()=>{w==="trash"?Je():r&&ie()},[w,r]),a?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):r?c.jsxs(uS,{children:[N&&c.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(pt,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[c.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{children:""})," ",A.size,"",w==="trash"?"":""]}),c.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:w==="trash"?"":""}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(fe,{variant:"ghost",onClick:Xn,children:""}),c.jsx(fe,{variant:"danger",onClick:nr,children:w==="trash"?"":""})]})]})}),(w==="list"||w==="trash")&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"container-header",children:[c.jsxs("h2",{className:"section-title",children:[w==="trash"?" ()":"",w==="list"&&c.jsxs("span",{style:{fontSize:"0.8em",marginLeft:"8px",color:"#666",fontWeight:"normal"},children:["(",u.length,")"]})]}),c.jsx("div",{className:"header-actions",children:w==="list"||w==="trash"?c.jsxs(c.Fragment,{children:[Q?c.jsxs(c.Fragment,{children:[c.jsx(fe,{variant:"ghost",onClick:Vt,children:""}),c.jsx(fe,{variant:"secondary",onClick:rr,children:""}),w==="trash"&&c.jsxs(fe,{variant:"secondary",onClick:at,disabled:A.size===0,style:{marginRight:"8px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:[" (",A.size,")"]}),c.jsxs(fe,{variant:"danger",onClick:bn,disabled:A.size===0,children:[w==="trash"?"":""," (",A.size,")"]})]}):c.jsx(c.Fragment,{children:w==="list"?c.jsx(fe,{onClick:()=>o({view:"create"}),className:"primary-action-btn",children:"+ "}):c.jsx(fe,{variant:"ghost",onClick:$t,children:" "})}),c.jsx("button",{className:"mobile-menu-toggle",onClick:()=>q(!L),"aria-label":"",children:L?"":""}),c.jsxs("div",{className:`secondary-actions ${L?"open":""}`,children:[w==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs(fe,{variant:"secondary",onClick:()=>{D("url"),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," Web"]}),c.jsxs(fe,{variant:"secondary",onClick:()=>{D("image"),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsxs(fe,{variant:"secondary",onClick:()=>{o({view:"data"}),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsxs(fe,{variant:"secondary",onClick:()=>{o({view:"levain-guide"}),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),r?.id==="admin"&&c.jsxs(fe,{variant:"secondary",onClick:()=>{o({view:"users"}),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsx("div",{className:"menu-divider"})]}),!Q&&c.jsxs(fe,{variant:"ghost",onClick:()=>{Vt(),q(!1)},className:"danger-text",children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," ",w==="trash"?"":""]}),w==="list"&&c.jsxs(fe,{variant:"ghost",onClick:()=>{Pt(),q(!1)},style:{position:"relative"},children:[c.jsx("span",{style:{marginRight:"8px"},children:""}),"  ",m>0&&c.jsx("span",{className:"trash-badge",children:m})]}),c.jsxs(fe,{variant:"ghost",onClick:()=>{$t(),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsx("div",{className:"menu-divider"}),c.jsxs(fe,{variant:"ghost",onClick:()=>{n(),q(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]})]}),c.jsx("div",{className:`menu-backdrop ${L?"open":""}`,onClick:()=>q(!1),"aria-hidden":"true"})]}):null})]}),w==="list"&&c.jsxs("div",{className:"search-container",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",className:"search-input",placeholder:"...",value:$,onChange:z=>U(z.target.value)})]}),c.jsxs("div",{className:"tag-filter-container",children:[c.jsxs("select",{className:"store-filter-select",value:uh.includes(R)?R:"",onChange:z=>T(z.target.value||""),children:[c.jsx("option",{value:"",children:""}),uh.map(z=>c.jsxs("option",{value:z,children:[z," (",ue[z]||0,")"]},z))]}),c.jsxs("select",{className:"store-filter-select",value:ce.includes(R)?R:"",onChange:z=>T(z.target.value||""),children:[c.jsx("option",{value:"",children:""}),ce.sort().map(z=>c.jsxs("option",{value:z,children:[z," (",Oe[z]||0,")"]},z))]}),c.jsxs("select",{className:"store-filter-select",value:ve.includes(R)?R:"",onChange:z=>T(z.target.value||""),children:[c.jsx("option",{value:"",children:""}),ve.sort().map(z=>c.jsxs("option",{value:z,children:[z," (",Ve[z]||0,")"]},z))]}),c.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"16px",display:"flex",gap:"8px",borderLeft:"1px solid #ccc",paddingLeft:"16px"},children:[c.jsx("button",{className:`tag-filter-btn ${F==="normal"?"active":""}`,onClick:()=>ee("normal"),style:{minWidth:"auto",padding:"4px 12px"},children:""}),c.jsx("button",{className:`tag-filter-btn ${F==="all"?"active":""}`,onClick:()=>ee("all"),style:{minWidth:"auto",padding:"4px 12px"},children:""})]})]}),g?c.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"..."}):u.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#888"},children:[w==="trash"?"":"",R!==""&&c.jsx("p",{children:""})]}):c.jsxs("div",{className:"main-content-wrapper",children:[w==="list"&&c.jsx("div",{className:"recent-list-wrapper",children:c.jsx(aC,{recipes:u,recentIds:y,onSelect:qt})}),c.jsx("div",{className:"recipe-list-container",children:w==="list"?c.jsx(Bs,{sensors:W,collisionDetection:Xd,onDragEnd:ne,children:c.jsx(av,{recipes:De,onSelectRecipe:qt,isSelectMode:Q,selectedIds:A,onToggleSelection:Nt,disableDrag:!Ne,displayMode:F})}):c.jsx(av,{recipes:De,onSelectRecipe:qt,isSelectMode:Q,selectedIds:A,onToggleSelection:Nt,disableDrag:!0,displayMode:F})})]})]}),w==="detail"&&E&&c.jsx(VE,{recipe:E,isDeleted:!!E.deletedAt,onBack:()=>E.deletedAt?Pt():$t(),onEdit:()=>o({view:"edit",id:E.id}),onDelete:Ct,onView:O,onHardDelete:sn,onDuplicate:de}),w==="edit"&&E&&c.jsx(Pv,{initialData:E,onCancel:()=>o({view:"detail",id:E.id}),onSave:z=>tr(z,!0)},`edit-${E.id}`),w==="create"&&c.jsx(Pv,{initialData:J,onCancel:()=>{o({view:"list"}),G(null)},onSave:z=>tr(z,!1)},J?"create-form-imported":"create-form"),C&&c.jsx(h0,{initialMode:C,onClose:()=>D(null),onImport:yn}),w==="data"&&c.jsx(rC,{onBack:()=>o({view:"list"})}),w==="levain-guide"&&c.jsx(iC,{onBack:()=>o({view:"list"})}),w==="users"&&r?.id==="admin"&&c.jsx(sC,{onBack:()=>o({view:"list"})})]}):c.jsx(lC,{})}function cC(){return c.jsx(DE,{children:c.jsx(oC,{})})}class uC extends Ee.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a),this.setState({error:n,errorInfo:a})}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"2rem",color:"red"},children:[c.jsx("h1",{children:""}),c.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),c.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),c.jsx("br",{}),c.jsx("button",{onClick:()=>window.location.reload(),children:""})]}):this.props.children}}Dx.createRoot(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(uC,{children:c.jsx(Zw,{children:c.jsx(cC,{})})})}));
