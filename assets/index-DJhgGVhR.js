(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function Gv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ld={exports:{}},ws={};var wm;function bx(){if(wm)return ws;wm=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return ws.Fragment=n,ws.jsx=a,ws.jsxs=a,ws}var Sm;function xx(){return Sm||(Sm=1,ld.exports=bx()),ld.exports}var c=xx(),od={exports:{}},Re={};var _m;function wx(){if(_m)return Re;_m=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function C(O,L,ee){this.props=O,this.context=L,this.refs=T,this.updater=ee||j}C.prototype.isReactComponent={},C.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function E(){}E.prototype=C.prototype;function A(O,L,ee){this.props=O,this.context=L,this.refs=T,this.updater=ee||j}var B=A.prototype=new E;B.constructor=A,_(B,C.prototype),B.isPureReactComponent=!0;var D=Array.isArray;function I(){}var k={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function U(O,L,ee){var ie=ee.ref;return{$$typeof:r,type:O,key:L,ref:ie!==void 0?ie:null,props:ee}}function ne(O,L){return U(O.type,L,O.props)}function W(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function H(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return L[ee]})}var Z=/\/+/g;function re(O,L){return typeof O=="object"&&O!==null&&O.key!=null?H(""+O.key):L.toString(36)}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(I,I):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function z(O,L,ee,ie,me){var ve=typeof O;(ve==="undefined"||ve==="boolean")&&(O=null);var Ne=!1;if(O===null)Ne=!0;else switch(ve){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(O.$$typeof){case r:case n:Ne=!0;break;case v:return Ne=O._init,z(Ne(O._payload),L,ee,ie,me)}}if(Ne)return me=me(O),Ne=ie===""?"."+re(O,0):ie,D(me)?(ee="",Ne!=null&&(ee=Ne.replace(Z,"$&/")+"/"),z(me,L,ee,"",function(De){return De})):me!=null&&(W(me)&&(me=ne(me,ee+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(Z,"$&/")+"/")+Ne)),L.push(me)),1;Ne=0;var Ve=ie===""?".":ie+":";if(D(O))for(var ke=0;ke<O.length;ke++)ie=O[ke],ve=Ve+re(ie,ke),Ne+=z(ie,L,ee,ve,me);else if(ke=w(O),typeof ke=="function")for(O=ke.call(O),ke=0;!(ie=O.next()).done;)ie=ie.value,ve=Ve+re(ie,ke++),Ne+=z(ie,L,ee,ve,me);else if(ve==="object"){if(typeof O.then=="function")return z(te(O),L,ee,ie,me);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function J(O,L,ee){if(O==null)return O;var ie=[],me=0;return z(O,ie,"","",function(ve){return L.call(ee,ve,me++)}),ie}function ae(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var fe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},se={map:J,forEach:function(O,L,ee){J(O,function(){L.apply(this,arguments)},ee)},count:function(O){var L=0;return J(O,function(){L++}),L},toArray:function(O){return J(O,function(L){return L})||[]},only:function(O){if(!W(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Re.Activity=y,Re.Children=se,Re.Component=C,Re.Fragment=a,Re.Profiler=o,Re.PureComponent=A,Re.StrictMode=s,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Re.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},Re.cache=function(O){return function(){return O.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(O,L,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ie=_({},O.props),me=O.key;if(L!=null)for(ve in L.key!==void 0&&(me=""+L.key),L)!q.call(L,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&L.ref===void 0||(ie[ve]=L[ve]);var ve=arguments.length-2;if(ve===1)ie.children=ee;else if(1<ve){for(var Ne=Array(ve),Ve=0;Ve<ve;Ve++)Ne[Ve]=arguments[Ve+2];ie.children=Ne}return U(O.type,me,ie)},Re.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Re.createElement=function(O,L,ee){var ie,me={},ve=null;if(L!=null)for(ie in L.key!==void 0&&(ve=""+L.key),L)q.call(L,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(me[ie]=L[ie]);var Ne=arguments.length-2;if(Ne===1)me.children=ee;else if(1<Ne){for(var Ve=Array(Ne),ke=0;ke<Ne;ke++)Ve[ke]=arguments[ke+2];me.children=Ve}if(O&&O.defaultProps)for(ie in Ne=O.defaultProps,Ne)me[ie]===void 0&&(me[ie]=Ne[ie]);return U(O,ve,me)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:p,render:O}},Re.isValidElement=W,Re.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ae}},Re.memo=function(O,L){return{$$typeof:m,type:O,compare:L===void 0?null:L}},Re.startTransition=function(O){var L=k.T,ee={};k.T=ee;try{var ie=O(),me=k.S;me!==null&&me(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(I,fe)}catch(ve){fe(ve)}finally{L!==null&&ee.types!==null&&(L.types=ee.types),k.T=L}},Re.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Re.use=function(O){return k.H.use(O)},Re.useActionState=function(O,L,ee){return k.H.useActionState(O,L,ee)},Re.useCallback=function(O,L){return k.H.useCallback(O,L)},Re.useContext=function(O){return k.H.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O,L){return k.H.useDeferredValue(O,L)},Re.useEffect=function(O,L){return k.H.useEffect(O,L)},Re.useEffectEvent=function(O){return k.H.useEffectEvent(O)},Re.useId=function(){return k.H.useId()},Re.useImperativeHandle=function(O,L,ee){return k.H.useImperativeHandle(O,L,ee)},Re.useInsertionEffect=function(O,L){return k.H.useInsertionEffect(O,L)},Re.useLayoutEffect=function(O,L){return k.H.useLayoutEffect(O,L)},Re.useMemo=function(O,L){return k.H.useMemo(O,L)},Re.useOptimistic=function(O,L){return k.H.useOptimistic(O,L)},Re.useReducer=function(O,L,ee){return k.H.useReducer(O,L,ee)},Re.useRef=function(O){return k.H.useRef(O)},Re.useState=function(O){return k.H.useState(O)},Re.useSyncExternalStore=function(O,L,ee){return k.H.useSyncExternalStore(O,L,ee)},Re.useTransition=function(){return k.H.useTransition()},Re.version="19.2.3",Re}var jm;function Vs(){return jm||(jm=1,od.exports=wx()),od.exports}var R=Vs();const Ae=Gv(R);var cd={exports:{}},Ss={},ud={exports:{}},dd={};var Em;function Sx(){return Em||(Em=1,(function(r){function n(z,J){var ae=z.length;z.push(J);e:for(;0<ae;){var fe=ae-1>>>1,se=z[fe];if(0<o(se,J))z[fe]=J,z[ae]=se,ae=fe;else break e}}function a(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var J=z[0],ae=z.pop();if(ae!==J){z[0]=ae;e:for(var fe=0,se=z.length,O=se>>>1;fe<O;){var L=2*(fe+1)-1,ee=z[L],ie=L+1,me=z[ie];if(0>o(ee,ae))ie<se&&0>o(me,ee)?(z[fe]=me,z[ie]=ae,fe=ie):(z[fe]=ee,z[L]=ae,fe=L);else if(ie<se&&0>o(me,ae))z[fe]=me,z[ie]=ae,fe=ie;else break e}}return J}function o(z,J){var ae=z.sortIndex-J.sortIndex;return ae!==0?ae:z.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var g=[],m=[],v=1,y=null,x=3,w=!1,j=!1,_=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function B(z){for(var J=a(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=z)s(m),J.sortIndex=J.expirationTime,n(g,J);else break;J=a(m)}}function D(z){if(_=!1,B(z),!j)if(a(g)!==null)j=!0,I||(I=!0,H());else{var J=a(m);J!==null&&te(D,J.startTime-z)}}var I=!1,k=-1,q=5,U=-1;function ne(){return T?!0:!(r.unstable_now()-U<q)}function W(){if(T=!1,I){var z=r.unstable_now();U=z;var J=!0;try{e:{j=!1,_&&(_=!1,E(k),k=-1),w=!0;var ae=x;try{t:{for(B(z),y=a(g);y!==null&&!(y.expirationTime>z&&ne());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,x=y.priorityLevel;var se=fe(y.expirationTime<=z);if(z=r.unstable_now(),typeof se=="function"){y.callback=se,B(z),J=!0;break t}y===a(g)&&s(g),B(z)}else s(g);y=a(g)}if(y!==null)J=!0;else{var O=a(m);O!==null&&te(D,O.startTime-z),J=!1}}break e}finally{y=null,x=ae,w=!1}J=void 0}}finally{J?H():I=!1}}}var H;if(typeof A=="function")H=function(){A(W)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,re=Z.port2;Z.port1.onmessage=W,H=function(){re.postMessage(null)}}else H=function(){C(W,0)};function te(z,J){k=C(function(){z(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(z){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var ae=x;x=J;try{return z()}finally{x=ae}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=x;x=z;try{return J()}finally{x=ae}},r.unstable_scheduleCallback=function(z,J,ae){var fe=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?fe+ae:fe):ae=fe,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ae+se,z={id:v++,callback:J,priorityLevel:z,startTime:ae,expirationTime:se,sortIndex:-1},ae>fe?(z.sortIndex=ae,n(m,z),a(g)===null&&z===a(m)&&(_?(E(k),k=-1):_=!0,te(D,ae-fe))):(z.sortIndex=se,n(g,z),j||w||(j=!0,I||(I=!0,H()))),z},r.unstable_shouldYield=ne,r.unstable_wrapCallback=function(z){var J=x;return function(){var ae=x;x=J;try{return z.apply(this,arguments)}finally{x=ae}}}})(dd)),dd}var Rm;function _x(){return Rm||(Rm=1,ud.exports=Sx()),ud.exports}var hd={exports:{}},Jt={};var Tm;function jx(){if(Tm)return Jt;Tm=1;var r=Vs();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:g,containerInfo:m,implementation:v}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(g,m,null,v)},Jt.flushSync=function(g){var m=h.T,v=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=m,s.p=v,s.d.f()}},Jt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Jt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Jt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,y=p(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:w}):v==="script"&&s.d.X(g,{crossOrigin:y,integrity:x,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Jt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Jt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=p(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Jt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=p(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Jt.requestFormReset=function(g){s.d.r(g)},Jt.unstable_batchedUpdates=function(g,m){return g(m)},Jt.useFormState=function(g,m,v){return h.H.useFormState(g,m,v)},Jt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var Cm;function Pv(){if(Cm)return hd.exports;Cm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),hd.exports=jx(),hd.exports}var Am;function Ex(){if(Am)return Ss;Am=1;var r=_x(),n=Vs(),a=Pv();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return g(d),e;if(f===l)return g(d),t;f=f.sibling}throw Error(s(188))}if(i.return!==l.return)i=d,l=f;else{for(var b=!1,S=d.child;S;){if(S===i){b=!0,i=d,l=f;break}if(S===l){b=!0,l=d,i=f;break}S=S.sibling}if(!b){for(S=f.child;S;){if(S===i){b=!0,i=f,l=d;break}if(S===l){b=!0,l=f,i=d;break}S=S.sibling}if(!b)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Z?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case A:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}var te=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},fe=[],se=-1;function O(e){return{current:e}}function L(e){0>se||(e.current=fe[se],fe[se]=null,se--)}function ee(e,t){se++,fe[se]=e.current,e.current=t}var ie=O(null),me=O(null),ve=O(null),Ne=O(null);function Ve(e,t){switch(ee(ve,t),ee(me,e),ee(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Pp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Pp(t),e=Vp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(ie),ee(ie,e)}function ke(){L(ie),L(me),L(ve)}function De(e){e.memoizedState!==null&&ee(Ne,e);var t=ie.current,i=Vp(t,e.type);t!==i&&(ee(me,e),ee(ie,i))}function Pt(e){me.current===e&&(L(ie),L(me)),Ne.current===e&&(L(Ne),vs._currentValue=ae)}var At,un;function Xe(e){if(At===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);At=t&&t[1]||"",un=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+un}var Ot=!1;function Vt(e,t){if(!e||Ot)return"";Ot=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(K){var Y=K}Reflect.construct(e,[],F)}else{try{F.call()}catch(K){Y=K}e.call(F.prototype)}}else{try{throw Error()}catch(K){Y=K}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],S=f[1];if(b&&S){var N=b.split(`
`),P=S.split(`
`);for(d=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;if(l===N.length||d===P.length)for(l=N.length-1,d=P.length-1;1<=l&&0<=d&&N[l]!==P[d];)d--;for(;1<=l&&0<=d;l--,d--)if(N[l]!==P[d]){if(l!==1||d!==1)do if(l--,d--,0>d||N[l]!==P[d]){var Q=`
`+N[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=d);break}}}finally{Ot=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Xe(i):""}function Fn(e,t){switch(e.tag){case 26:case 27:case 5:return Xe(e.type);case 16:return Xe("Lazy");case 13:return e.child!==t&&t!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Vt(e.type,!1);case 11:return Vt(e.type.render,!1);case 1:return Vt(e.type,!0);case 31:return Xe("Activity");default:return""}}function er(e){try{var t="",i=null;do t+=Fn(e,i),i=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Qt=Object.prototype.hasOwnProperty,wt=r.unstable_scheduleCallback,le=r.unstable_cancelCallback,ue=r.unstable_shouldYield,xe=r.unstable_requestPaint,ge=r.unstable_now,gt=r.unstable_getCurrentPriorityLevel,pt=r.unstable_ImmediatePriority,V=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,je=r.unstable_LowPriority,ye=r.unstable_IdlePriority,Ee=r.log,St=r.unstable_setDisableYieldValue,nt=null,rt=null;function it(e){if(typeof Ee=="function"&&St(e),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(nt,e)}catch{}}var _t=Math.clz32?Math.clz32:Ra,Mt=Math.log,Yt=Math.LN2;function Ra(e){return e>>>=0,e===0?32:31-(Mt(e)/Yt|0)|0}var Tr=256,Ta=262144,ct=4194304;function ut(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nt(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~f,l!==0?d=ut(l):(b&=S,b!==0?d=ut(b):i||(i=S&~e,i!==0&&(d=ut(i))))):(S=l&~f,S!==0?d=ut(S):b!==0?d=ut(b):i||(i=l&~e,i!==0&&(d=ut(i)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:d}function Wt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ft(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kt(){var e=ct;return ct<<=1,(ct&62914560)===0&&(ct=4194304),e}function en(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Sn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jt(e,t,i,l,d,f){var b=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,N=e.expirationTimes,P=e.hiddenUpdates;for(i=b&~i;0<i;){var Q=31-_t(i),F=1<<Q;S[Q]=0,N[Q]=-1;var Y=P[Q];if(Y!==null)for(P[Q]=null,Q=0;Q<Y.length;Q++){var K=Y[Q];K!==null&&(K.lane&=-536870913)}i&=~F}l!==0&&In(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~t))}function In(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-_t(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function dn(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-_t(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}function _n(e,t){var i=t&-t;return i=(i&42)!==0?1:tr(i),(i&(e.suspendedLanes|t))!==0?0:i}function tr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function nr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qn(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:gm(e.type))}function Cr(e,t){var i=J.p;try{return J.p=e,t()}finally{J.p=i}}var jn=Math.random().toString(36).slice(2),zt="__reactFiber$"+jn,tn="__reactProps$"+jn,Ca="__reactContainer$"+jn,Wo="__reactEvents$"+jn,o0="__reactListeners$"+jn,c0="__reactHandles$"+jn,Oh="__reactResources$"+jn,Di="__reactMarker$"+jn;function Fo(e){delete e[zt],delete e[tn],delete e[Wo],delete e[o0],delete e[c0]}function Aa(e){var t=e[zt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ca]||i[zt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Wp(e);e!==null;){if(i=e[zt])return i;e=Wp(e)}return t}e=i,i=e.parentNode}return null}function Oa(e){if(e=e[zt]||e[Ca]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ki(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Na(e){var t=e[Oh];return t||(t=e[Oh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Dt(e){e[Di]=!0}var Nh=new Set,Dh={};function na(e,t){Da(e,t),Da(e+"Capture",t)}function Da(e,t){for(Dh[e]=t,e=0;e<t.length;e++)Nh.add(t[e])}var u0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kh={},Uh={};function d0(e){return Qt.call(Uh,e)?!0:Qt.call(kh,e)?!1:u0.test(e)?Uh[e]=!0:(kh[e]=!0,!1)}function il(e,t,i){if(d0(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function sl(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function rr(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}function En(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h0(e,t,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(b){i=""+b,f.call(this,b)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ec(e){if(!e._valueTracker){var t=Mh(e)?"checked":"value";e._valueTracker=h0(e,t,""+e[t])}}function zh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Mh(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function ll(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var f0=/[\n"\\]/g;function Rn(e){return e.replace(f0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function tc(e,t,i,l,d,f,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+En(t)):e.value!==""+En(t)&&(e.value=""+En(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?nc(e,b,En(t)):i!=null?nc(e,b,En(i)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+En(S):e.removeAttribute("name")}function Lh(e,t,i,l,d,f,b,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){ec(e);return}i=i!=null?""+En(i):"",t=t!=null?""+En(t):i,S||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ec(e)}function nc(e,t,i){t==="number"&&ll(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ka(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+En(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Bh(e,t,i){if(t!=null&&(t=""+En(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+En(i):""}function Ih(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(te(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=En(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),ec(e)}function Ua(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var g0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qh(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||g0.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function $h(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&i[d]!==l&&qh(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&qh(e,f,t[f])}function rc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),m0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ol(e){return m0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ar(){}var ac=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ma=null,za=null;function Hh(e){var t=Oa(e);if(t&&(e=t.stateNode)){var i=e[tn]||null;e:switch(e=t.stateNode,t.type){case"input":if(tc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Rn(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=l[tn]||null;if(!d)throw Error(s(90));tc(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&zh(l)}break e;case"textarea":Bh(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ka(e,!!i.multiple,t,!1)}}}var sc=!1;function Gh(e,t,i){if(sc)return e(t,i);sc=!0;try{var l=e(t);return l}finally{if(sc=!1,(Ma!==null||za!==null)&&(Ql(),Ma&&(t=Ma,e=za,za=Ma=null,Hh(t),e)))for(t=0;t<e.length;t++)Hh(e[t])}}function Ui(e,t){var i=e.stateNode;if(i===null)return null;var l=i[tn]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=!1;if(ir)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){lc=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{lc=!1}var Ar=null,oc=null,cl=null;function Ph(){if(cl)return cl;var e,t=oc,i=t.length,l,d="value"in Ar?Ar.value:Ar.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var b=i-e;for(l=1;l<=b&&t[i-l]===d[f-l];l++);return cl=d.slice(e,1<l?1-l:void 0)}function ul(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dl(){return!0}function Vh(){return!1}function nn(e){function t(i,l,d,f,b){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?dl:Vh,this.isPropagationStopped=Vh,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),t}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=nn(ra),zi=y({},ra,{view:0,detail:0}),v0=nn(zi),cc,uc,Li,fl=y({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Li&&(Li&&e.type==="mousemove"?(cc=e.screenX-Li.screenX,uc=e.screenY-Li.screenY):uc=cc=0,Li=e),cc)},movementY:function(e){return"movementY"in e?e.movementY:uc}}),Yh=nn(fl),y0=y({},fl,{dataTransfer:0}),b0=nn(y0),x0=y({},zi,{relatedTarget:0}),dc=nn(x0),w0=y({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=nn(w0),_0=y({},ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j0=nn(_0),E0=y({},ra,{data:0}),Kh=nn(E0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=C0[e])?!!t[e]:!1}function hc(){return A0}var O0=y({},zi,{key:function(e){if(e.key){var t=R0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ul(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hc,charCode:function(e){return e.type==="keypress"?ul(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ul(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N0=nn(O0),D0=y({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jh=nn(D0),k0=y({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hc}),U0=nn(k0),M0=y({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=nn(M0),L0=y({},fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=nn(L0),I0=y({},ra,{newState:0,oldState:0}),q0=nn(I0),$0=[9,13,27,32],fc=ir&&"CompositionEvent"in window,Bi=null;ir&&"documentMode"in document&&(Bi=document.documentMode);var H0=ir&&"TextEvent"in window&&!Bi,Qh=ir&&(!fc||Bi&&8<Bi&&11>=Bi),Xh=" ",Zh=!1;function Wh(e,t){switch(e){case"keyup":return $0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function G0(e,t){switch(e){case"compositionend":return Fh(t);case"keypress":return t.which!==32?null:(Zh=!0,Xh);case"textInput":return e=t.data,e===Xh&&Zh?null:e;default:return null}}function P0(e,t){if(La)return e==="compositionend"||!fc&&Wh(e,t)?(e=Ph(),cl=oc=Ar=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qh&&t.locale!=="ko"?null:t.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!V0[e.type]:t==="textarea"}function tf(e,t,i,l){Ma?za?za.push(l):za=[l]:Ma=l,t=no(t,"onChange"),0<t.length&&(i=new hl("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Ii=null,qi=null;function Y0(e){Bp(e,0)}function gl(e){var t=ki(e);if(zh(t))return e}function nf(e,t){if(e==="change")return t}var rf=!1;if(ir){var gc;if(ir){var pc="oninput"in document;if(!pc){var af=document.createElement("div");af.setAttribute("oninput","return;"),pc=typeof af.oninput=="function"}gc=pc}else gc=!1;rf=gc&&(!document.documentMode||9<document.documentMode)}function sf(){Ii&&(Ii.detachEvent("onpropertychange",lf),qi=Ii=null)}function lf(e){if(e.propertyName==="value"&&gl(qi)){var t=[];tf(t,qi,e,ic(e)),Gh(Y0,t)}}function K0(e,t,i){e==="focusin"?(sf(),Ii=t,qi=i,Ii.attachEvent("onpropertychange",lf)):e==="focusout"&&sf()}function J0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(qi)}function Q0(e,t){if(e==="click")return gl(t)}function X0(e,t){if(e==="input"||e==="change")return gl(t)}function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:Z0;function $i(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!Qt.call(t,d)||!hn(e[d],t[d]))return!1}return!0}function of(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cf(e,t){var i=of(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=of(i)}}function uf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function df(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ll(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ll(e.document)}return t}function mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var W0=ir&&"documentMode"in document&&11>=document.documentMode,Ba=null,vc=null,Hi=null,yc=!1;function hf(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;yc||Ba==null||Ba!==ll(l)||(l=Ba,"selectionStart"in l&&mc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Hi&&$i(Hi,l)||(Hi=l,l=no(vc,"onSelect"),0<l.length&&(t=new hl("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Ba)))}function aa(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ia={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},bc={},ff={};ir&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ia(e){if(bc[e])return bc[e];if(!Ia[e])return e;var t=Ia[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ff)return bc[e]=t[i];return e}var gf=ia("animationend"),pf=ia("animationiteration"),mf=ia("animationstart"),F0=ia("transitionrun"),eb=ia("transitionstart"),tb=ia("transitioncancel"),vf=ia("transitionend"),yf=new Map,xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xc.push("scrollEnd");function $n(e,t){yf.set(e,t),na(t,[e])}var pl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tn=[],qa=0,wc=0;function ml(){for(var e=qa,t=wc=qa=0;t<e;){var i=Tn[t];Tn[t++]=null;var l=Tn[t];Tn[t++]=null;var d=Tn[t];Tn[t++]=null;var f=Tn[t];if(Tn[t++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}f!==0&&bf(i,d,f)}}function vl(e,t,i,l){Tn[qa++]=e,Tn[qa++]=t,Tn[qa++]=i,Tn[qa++]=l,wc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Sc(e,t,i,l){return vl(e,t,i,l),yl(e)}function sa(e,t){return vl(e,null,null,t),yl(e)}function bf(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-_t(i),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=i|536870912),f):null}function yl(e){if(50<us)throw us=0,Nu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $a={};function nb(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,i,l){return new nb(e,t,i,l)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sr(e,t){var i=e.alternate;return i===null?(i=fn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function xf(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bl(e,t,i,l,d,f){var b=0;if(l=e,typeof e=="function")_c(e)&&(b=1);else if(typeof e=="string")b=lx(e,i,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=fn(31,i,t,d),e.elementType=U,e.lanes=f,e;case _:return la(i.children,d,f,t);case T:b=8,d|=24;break;case C:return e=fn(12,i,t,d|2),e.elementType=C,e.lanes=f,e;case D:return e=fn(13,i,t,d),e.elementType=D,e.lanes=f,e;case I:return e=fn(19,i,t,d),e.elementType=I,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:b=10;break e;case E:b=9;break e;case B:b=11;break e;case k:b=14;break e;case q:b=16,l=null;break e}b=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=fn(b,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function la(e,t,i,l){return e=fn(7,e,l,t),e.lanes=i,e}function jc(e,t,i){return e=fn(6,e,null,t),e.lanes=i,e}function wf(e){var t=fn(18,null,null,0);return t.stateNode=e,t}function Ec(e,t,i){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Sf=new WeakMap;function Cn(e,t){if(typeof e=="object"&&e!==null){var i=Sf.get(e);return i!==void 0?i:(t={value:e,source:t,stack:er(t)},Sf.set(e,t),t)}return{value:e,source:t,stack:er(t)}}var Ha=[],Ga=0,xl=null,Gi=0,An=[],On=0,Or=null,Qn=1,Xn="";function lr(e,t){Ha[Ga++]=Gi,Ha[Ga++]=xl,xl=e,Gi=t}function _f(e,t,i){An[On++]=Qn,An[On++]=Xn,An[On++]=Or,Or=e;var l=Qn;e=Xn;var d=32-_t(l)-1;l&=~(1<<d),i+=1;var f=32-_t(t)+d;if(30<f){var b=d-d%5;f=(l&(1<<b)-1).toString(32),l>>=b,d-=b,Qn=1<<32-_t(t)+d|i<<d|l,Xn=f+e}else Qn=1<<f|i<<d|l,Xn=e}function Rc(e){e.return!==null&&(lr(e,1),_f(e,1,0))}function Tc(e){for(;e===xl;)xl=Ha[--Ga],Ha[Ga]=null,Gi=Ha[--Ga],Ha[Ga]=null;for(;e===Or;)Or=An[--On],An[On]=null,Xn=An[--On],An[On]=null,Qn=An[--On],An[On]=null}function jf(e,t){An[On++]=Qn,An[On++]=Xn,An[On++]=Or,Qn=t.id,Xn=t.overflow,Or=e}var Lt=null,We=null,Be=!1,Nr=null,Nn=!1,Cc=Error(s(519));function Dr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pi(Cn(t,e)),Cc}function Ef(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[zt]=e,t[tn]=l,i){case"dialog":Me("cancel",t),Me("close",t);break;case"iframe":case"object":case"embed":Me("load",t);break;case"video":case"audio":for(i=0;i<hs.length;i++)Me(hs[i],t);break;case"source":Me("error",t);break;case"img":case"image":case"link":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"input":Me("invalid",t),Lh(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",t);break;case"textarea":Me("invalid",t),Ih(t,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||Hp(t.textContent,i)?(l.popover!=null&&(Me("beforetoggle",t),Me("toggle",t)),l.onScroll!=null&&Me("scroll",t),l.onScrollEnd!=null&&Me("scrollend",t),l.onClick!=null&&(t.onclick=ar),t=!0):t=!1,t||Dr(e,!0)}function Rf(e){for(Lt=e.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Lt=Lt.return}}function Pa(e){if(e!==Lt)return!1;if(!Be)return Rf(e),Be=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Yu(e.type,e.memoizedProps)),i=!i),i&&We&&Dr(e),Rf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));We=Zp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));We=Zp(e)}else t===27?(t=We,Yr(e.type)?(e=Zu,Zu=null,We=e):We=t):We=Lt?kn(e.stateNode.nextSibling):null;return!0}function oa(){We=Lt=null,Be=!1}function Ac(){var e=Nr;return e!==null&&(ln===null?ln=e:ln.push.apply(ln,e),Nr=null),e}function Pi(e){Nr===null?Nr=[e]:Nr.push(e)}var Oc=O(null),ca=null,or=null;function kr(e,t,i){ee(Oc,t._currentValue),t._currentValue=i}function cr(e){e._currentValue=Oc.current,L(Oc)}function Nc(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function Dc(e,t,i,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=d;for(var N=0;N<t.length;N++)if(S.context===t[N]){f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),Nc(f.return,i,e),l||(b=null);break e}f=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=i,f=b.alternate,f!==null&&(f.lanes|=i),Nc(b,i,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Va(e,t,i,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var S=d.type;hn(d.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(d===Ne.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(vs):e=[vs])}d=d.return}e!==null&&Dc(t,e,i,l),t.flags|=262144}function wl(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ua(e){ca=e,or=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bt(e){return Tf(ca,e)}function Sl(e,t){return ca===null&&ua(e),Tf(e,t)}function Tf(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},or===null){if(e===null)throw Error(s(308));or=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else or=or.next=t;return i}var rb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},ab=r.unstable_scheduleCallback,ib=r.unstable_NormalPriority,mt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kc(){return{controller:new rb,data:new Map,refCount:0}}function Vi(e){e.refCount--,e.refCount===0&&ab(ib,function(){e.controller.abort()})}var Yi=null,Uc=0,Ya=0,Ka=null;function sb(e,t){if(Yi===null){var i=Yi=[];Uc=0,Ya=Lu(),Ka={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Uc++,t.then(Cf,Cf),t}function Cf(){if(--Uc===0&&Yi!==null){Ka!==null&&(Ka.status="fulfilled");var e=Yi;Yi=null,Ya=0,Ka=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function lb(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<i.length;d++)(0,i[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),l}var Af=z.S;z.S=function(e,t){hp=ge(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&sb(e,t),Af!==null&&Af(e,t)};var da=O(null);function Mc(){var e=da.current;return e!==null?e:Qe.pooledCache}function _l(e,t){t===null?ee(da,da.current):ee(da,t.pool)}function Of(){var e=Mc();return e===null?null:{parent:mt._currentValue,pool:e}}var Ja=Error(s(460)),zc=Error(s(474)),jl=Error(s(542)),El={then:function(){}};function Nf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Df(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(ar,ar),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uf(e),e;default:if(typeof t.status=="string")t.then(ar,ar);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uf(e),e}throw fa=t,Ja}}function ha(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(fa=i,Ja):i}}var fa=null;function kf(){if(fa===null)throw Error(s(459));var e=fa;return fa=null,e}function Uf(e){if(e===Ja||e===jl)throw Error(s(483))}var Qa=null,Ki=0;function Rl(e){var t=Ki;return Ki+=1,Qa===null&&(Qa=[]),Df(Qa,e,t)}function Ji(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mf(e){function t($,M){if(e){var G=$.deletions;G===null?($.deletions=[M],$.flags|=16):G.push(M)}}function i($,M){if(!e)return null;for(;M!==null;)t($,M),M=M.sibling;return null}function l($){for(var M=new Map;$!==null;)$.key!==null?M.set($.key,$):M.set($.index,$),$=$.sibling;return M}function d($,M){return $=sr($,M),$.index=0,$.sibling=null,$}function f($,M,G){return $.index=G,e?(G=$.alternate,G!==null?(G=G.index,G<M?($.flags|=67108866,M):G):($.flags|=67108866,M)):($.flags|=1048576,M)}function b($){return e&&$.alternate===null&&($.flags|=67108866),$}function S($,M,G,X){return M===null||M.tag!==6?(M=jc(G,$.mode,X),M.return=$,M):(M=d(M,G),M.return=$,M)}function N($,M,G,X){var be=G.type;return be===_?Q($,M,G.props.children,X,G.key):M!==null&&(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===q&&ha(be)===M.type)?(M=d(M,G.props),Ji(M,G),M.return=$,M):(M=bl(G.type,G.key,G.props,null,$.mode,X),Ji(M,G),M.return=$,M)}function P($,M,G,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=Ec(G,$.mode,X),M.return=$,M):(M=d(M,G.children||[]),M.return=$,M)}function Q($,M,G,X,be){return M===null||M.tag!==7?(M=la(G,$.mode,X,be),M.return=$,M):(M=d(M,G),M.return=$,M)}function F($,M,G){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=jc(""+M,$.mode,G),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return G=bl(M.type,M.key,M.props,null,$.mode,G),Ji(G,M),G.return=$,G;case j:return M=Ec(M,$.mode,G),M.return=$,M;case q:return M=ha(M),F($,M,G)}if(te(M)||H(M))return M=la(M,$.mode,G,null),M.return=$,M;if(typeof M.then=="function")return F($,Rl(M),G);if(M.$$typeof===A)return F($,Sl($,M),G);Tl($,M)}return null}function Y($,M,G,X){var be=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return be!==null?null:S($,M,""+G,X);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===be?N($,M,G,X):null;case j:return G.key===be?P($,M,G,X):null;case q:return G=ha(G),Y($,M,G,X)}if(te(G)||H(G))return be!==null?null:Q($,M,G,X,null);if(typeof G.then=="function")return Y($,M,Rl(G),X);if(G.$$typeof===A)return Y($,M,Sl($,G),X);Tl($,G)}return null}function K($,M,G,X,be){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return $=$.get(G)||null,S(M,$,""+X,be);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return $=$.get(X.key===null?G:X.key)||null,N(M,$,X,be);case j:return $=$.get(X.key===null?G:X.key)||null,P(M,$,X,be);case q:return X=ha(X),K($,M,G,X,be)}if(te(X)||H(X))return $=$.get(G)||null,Q(M,$,X,be,null);if(typeof X.then=="function")return K($,M,G,Rl(X),be);if(X.$$typeof===A)return K($,M,G,Sl(M,X),be);Tl(M,X)}return null}function oe($,M,G,X){for(var be=null,qe=null,he=M,Oe=M=0,Le=null;he!==null&&Oe<G.length;Oe++){he.index>Oe?(Le=he,he=null):Le=he.sibling;var $e=Y($,he,G[Oe],X);if($e===null){he===null&&(he=Le);break}e&&he&&$e.alternate===null&&t($,he),M=f($e,M,Oe),qe===null?be=$e:qe.sibling=$e,qe=$e,he=Le}if(Oe===G.length)return i($,he),Be&&lr($,Oe),be;if(he===null){for(;Oe<G.length;Oe++)he=F($,G[Oe],X),he!==null&&(M=f(he,M,Oe),qe===null?be=he:qe.sibling=he,qe=he);return Be&&lr($,Oe),be}for(he=l(he);Oe<G.length;Oe++)Le=K(he,$,Oe,G[Oe],X),Le!==null&&(e&&Le.alternate!==null&&he.delete(Le.key===null?Oe:Le.key),M=f(Le,M,Oe),qe===null?be=Le:qe.sibling=Le,qe=Le);return e&&he.forEach(function(Zr){return t($,Zr)}),Be&&lr($,Oe),be}function we($,M,G,X){if(G==null)throw Error(s(151));for(var be=null,qe=null,he=M,Oe=M=0,Le=null,$e=G.next();he!==null&&!$e.done;Oe++,$e=G.next()){he.index>Oe?(Le=he,he=null):Le=he.sibling;var Zr=Y($,he,$e.value,X);if(Zr===null){he===null&&(he=Le);break}e&&he&&Zr.alternate===null&&t($,he),M=f(Zr,M,Oe),qe===null?be=Zr:qe.sibling=Zr,qe=Zr,he=Le}if($e.done)return i($,he),Be&&lr($,Oe),be;if(he===null){for(;!$e.done;Oe++,$e=G.next())$e=F($,$e.value,X),$e!==null&&(M=f($e,M,Oe),qe===null?be=$e:qe.sibling=$e,qe=$e);return Be&&lr($,Oe),be}for(he=l(he);!$e.done;Oe++,$e=G.next())$e=K(he,$,Oe,$e.value,X),$e!==null&&(e&&$e.alternate!==null&&he.delete($e.key===null?Oe:$e.key),M=f($e,M,Oe),qe===null?be=$e:qe.sibling=$e,qe=$e);return e&&he.forEach(function(yx){return t($,yx)}),Be&&lr($,Oe),be}function Je($,M,G,X){if(typeof G=="object"&&G!==null&&G.type===_&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var be=G.key;M!==null;){if(M.key===be){if(be=G.type,be===_){if(M.tag===7){i($,M.sibling),X=d(M,G.props.children),X.return=$,$=X;break e}}else if(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===q&&ha(be)===M.type){i($,M.sibling),X=d(M,G.props),Ji(X,G),X.return=$,$=X;break e}i($,M);break}else t($,M);M=M.sibling}G.type===_?(X=la(G.props.children,$.mode,X,G.key),X.return=$,$=X):(X=bl(G.type,G.key,G.props,null,$.mode,X),Ji(X,G),X.return=$,$=X)}return b($);case j:e:{for(be=G.key;M!==null;){if(M.key===be)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){i($,M.sibling),X=d(M,G.children||[]),X.return=$,$=X;break e}else{i($,M);break}else t($,M);M=M.sibling}X=Ec(G,$.mode,X),X.return=$,$=X}return b($);case q:return G=ha(G),Je($,M,G,X)}if(te(G))return oe($,M,G,X);if(H(G)){if(be=H(G),typeof be!="function")throw Error(s(150));return G=be.call(G),we($,M,G,X)}if(typeof G.then=="function")return Je($,M,Rl(G),X);if(G.$$typeof===A)return Je($,M,Sl($,G),X);Tl($,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,M!==null&&M.tag===6?(i($,M.sibling),X=d(M,G),X.return=$,$=X):(i($,M),X=jc(G,$.mode,X),X.return=$,$=X),b($)):i($,M)}return function($,M,G,X){try{Ki=0;var be=Je($,M,G,X);return Qa=null,be}catch(he){if(he===Ja||he===jl)throw he;var qe=fn(29,he,null,$.mode);return qe.lanes=X,qe.return=$,qe}}}var ga=Mf(!0),zf=Mf(!1),Ur=!1;function Lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Mr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zr(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=yl(e),bf(e,null,i),t}return vl(e,l,t,i),yl(e)}function Qi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,dn(e,i)}}function Ic(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var qc=!1;function Xi(){if(qc){var e=Ka;if(e!==null)throw e}}function Zi(e,t,i,l){qc=!1;var d=e.updateQueue;Ur=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,P=N.next;N.next=null,b===null?f=P:b.next=P,b=N;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==b&&(S===null?Q.firstBaseUpdate=P:S.next=P,Q.lastBaseUpdate=N))}if(f!==null){var F=d.baseState;b=0,Q=P=N=null,S=f;do{var Y=S.lane&-536870913,K=Y!==S.lane;if(K?(ze&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ya&&(qc=!0),Q!==null&&(Q=Q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var oe=e,we=S;Y=t;var Je=i;switch(we.tag){case 1:if(oe=we.payload,typeof oe=="function"){F=oe.call(Je,F,Y);break e}F=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=we.payload,Y=typeof oe=="function"?oe.call(Je,F,Y):oe,Y==null)break e;F=y({},F,Y);break e;case 2:Ur=!0}}Y=S.callback,Y!==null&&(e.flags|=64,K&&(e.flags|=8192),K=d.callbacks,K===null?d.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(P=Q=K,N=F):Q=Q.next=K,b|=Y;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;K=S,S=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);Q===null&&(N=F),d.baseState=N,d.firstBaseUpdate=P,d.lastBaseUpdate=Q,f===null&&(d.shared.lanes=0),$r|=b,e.lanes=b,e.memoizedState=F}}function Lf(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Bf(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Lf(i[e],t)}var Xa=O(null),Cl=O(0);function If(e,t){e=yr,ee(Cl,e),ee(Xa,t),yr=e|t.baseLanes}function $c(){ee(Cl,yr),ee(Xa,Xa.current)}function Hc(){yr=Cl.current,L(Xa),L(Cl)}var gn=O(null),Dn=null;function Lr(e){var t=e.alternate;ee(dt,dt.current&1),ee(gn,e),Dn===null&&(t===null||Xa.current!==null||t.memoizedState!==null)&&(Dn=e)}function Gc(e){ee(dt,dt.current),ee(gn,e),Dn===null&&(Dn=e)}function qf(e){e.tag===22?(ee(dt,dt.current),ee(gn,e),Dn===null&&(Dn=e)):Br()}function Br(){ee(dt,dt.current),ee(gn,gn.current)}function pn(e){L(gn),Dn===e&&(Dn=null),L(dt)}var dt=O(0);function Al(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Qu(i)||Xu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ur=0,Te=null,Ye=null,vt=null,Ol=!1,Za=!1,pa=!1,Nl=0,Wi=0,Wa=null,ob=0;function st(){throw Error(s(321))}function Pc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!hn(e[i],t[i]))return!1;return!0}function Vc(e,t,i,l,d,f){return ur=f,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?_g:su,pa=!1,f=i(l,d),pa=!1,Za&&(f=Hf(t,i,l,d)),$f(e),f}function $f(e){z.H=ts;var t=Ye!==null&&Ye.next!==null;if(ur=0,vt=Ye=Te=null,Ol=!1,Wi=0,Wa=null,t)throw Error(s(300));e===null||yt||(e=e.dependencies,e!==null&&wl(e)&&(yt=!0))}function Hf(e,t,i,l){Te=e;var d=0;do{if(Za&&(Wa=null),Wi=0,Za=!1,25<=d)throw Error(s(301));if(d+=1,vt=Ye=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}z.H=jg,f=t(i,l)}while(Za);return f}function cb(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?Fi(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Te.flags|=1024),t}function Yc(){var e=Nl!==0;return Nl=0,e}function Kc(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Jc(e){if(Ol){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ol=!1}ur=0,vt=Ye=Te=null,Za=!1,Wi=Nl=0,Wa=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Te.memoizedState=vt=e:vt=vt.next=e,vt}function ht(){if(Ye===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=vt===null?Te.memoizedState:vt.next;if(t!==null)vt=t,Ye=e;else{if(e===null)throw Te.alternate===null?Error(s(467)):Error(s(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},vt===null?Te.memoizedState=vt=e:vt=vt.next=e}return vt}function Dl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fi(e){var t=Wi;return Wi+=1,Wa===null&&(Wa=[]),e=Df(Wa,e,t),t=Te,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?_g:su),e}function kl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fi(e);if(e.$$typeof===A)return Bt(e)}throw Error(s(438,String(e)))}function Qc(e){var t=null,i=Te.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Dl(),Te.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=ne;return t.index++,i}function dr(e,t){return typeof t=="function"?t(e):t}function Ul(e){var t=ht();return Xc(t,Ye,e)}function Xc(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var S=b=null,N=null,P=t,Q=!1;do{var F=P.lane&-536870913;if(F!==P.lane?(ze&F)===F:(ur&F)===F){var Y=P.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),F===Ya&&(Q=!0);else if((ur&Y)===Y){P=P.next,Y===Ya&&(Q=!0);continue}else F={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},N===null?(S=N=F,b=f):N=N.next=F,Te.lanes|=Y,$r|=Y;F=P.action,pa&&i(f,F),f=P.hasEagerState?P.eagerState:i(f,F)}else Y={lane:F,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},N===null?(S=N=Y,b=f):N=N.next=Y,Te.lanes|=F,$r|=F;P=P.next}while(P!==null&&P!==t);if(N===null?b=f:N.next=S,!hn(f,e.memoizedState)&&(yt=!0,Q&&(i=Ka,i!==null)))throw i;e.memoizedState=f,e.baseState=b,e.baseQueue=N,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Zc(e){var t=ht(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);hn(f,t.memoizedState)||(yt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Gf(e,t,i){var l=Te,d=ht(),f=Be;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var b=!hn((Ye||d).memoizedState,i);if(b&&(d.memoizedState=i,yt=!0),d=d.queue,eu(Yf.bind(null,l,d,e),[e]),d.getSnapshot!==t||b||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,Fa(9,{destroy:void 0},Vf.bind(null,l,d,i,t),null),Qe===null)throw Error(s(349));f||(ur&127)!==0||Pf(l,t,i)}return i}function Pf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Te.updateQueue,t===null?(t=Dl(),Te.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Vf(e,t,i,l){t.value=i,t.getSnapshot=l,Kf(t)&&Jf(e)}function Yf(e,t,i){return i(function(){Kf(t)&&Jf(e)})}function Kf(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!hn(e,i)}catch{return!0}}function Jf(e){var t=sa(e,2);t!==null&&on(t,e,2)}function Wc(e){var t=Xt();if(typeof e=="function"){var i=e;if(e=i(),pa){it(!0);try{i()}finally{it(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:e},t}function Qf(e,t,i,l){return e.baseState=i,Xc(e,Ye,typeof l=="function"?l:dr)}function ub(e,t,i,l,d){if(Ll(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};z.T!==null?i(!0):f.isTransition=!1,l(f),i=t.pending,i===null?(f.next=t.pending=f,Xf(t,f)):(f.next=i.next,t.pending=i.next=f)}}function Xf(e,t){var i=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=z.T,b={};z.T=b;try{var S=i(d,l),N=z.S;N!==null&&N(b,S),Zf(e,t,S)}catch(P){Fc(e,t,P)}finally{f!==null&&b.types!==null&&(f.types=b.types),z.T=f}}else try{f=i(d,l),Zf(e,t,f)}catch(P){Fc(e,t,P)}}function Zf(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Wf(e,t,l)},function(l){return Fc(e,t,l)}):Wf(e,t,i)}function Wf(e,t,i){t.status="fulfilled",t.value=i,Ff(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Xf(e,i)))}function Fc(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,Ff(t),t=t.next;while(t!==l)}e.action=null}function Ff(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function eg(e,t){return t}function tg(e,t){if(Be){var i=Qe.formState;if(i!==null){e:{var l=Te;if(Be){if(We){t:{for(var d=We,f=Nn;d.nodeType!==8;){if(!f){d=null;break t}if(d=kn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){We=kn(d.nextSibling),l=d.data==="F!";break e}}Dr(l)}l=!1}l&&(t=i[0])}}return i=Xt(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:t},i.queue=l,i=xg.bind(null,Te,l),l.dispatch=i,l=Wc(!1),f=iu.bind(null,Te,!1,l.queue),l=Xt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,i=ub.bind(null,Te,d,f,i),d.dispatch=i,l.memoizedState=e,[t,i,!1]}function ng(e){var t=ht();return rg(t,Ye,e)}function rg(e,t,i){if(t=Xc(e,t,eg)[0],e=Ul(dr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Fi(t)}catch(b){throw b===Ja?jl:b}else l=t;t=ht();var d=t.queue,f=d.dispatch;return i!==t.memoizedState&&(Te.flags|=2048,Fa(9,{destroy:void 0},db.bind(null,d,i),null)),[l,f,e]}function db(e,t){e.action=t}function ag(e){var t=ht(),i=Ye;if(i!==null)return rg(t,i,e);ht(),t=t.memoizedState,i=ht();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function Fa(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=Te.updateQueue,t===null&&(t=Dl(),Te.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function ig(){return ht().memoizedState}function Ml(e,t,i,l){var d=Xt();Te.flags|=e,d.memoizedState=Fa(1|t,{destroy:void 0},i,l===void 0?null:l)}function zl(e,t,i,l){var d=ht();l=l===void 0?null:l;var f=d.memoizedState.inst;Ye!==null&&l!==null&&Pc(l,Ye.memoizedState.deps)?d.memoizedState=Fa(t,f,i,l):(Te.flags|=e,d.memoizedState=Fa(1|t,f,i,l))}function sg(e,t){Ml(8390656,8,e,t)}function eu(e,t){zl(2048,8,e,t)}function hb(e){Te.flags|=4;var t=Te.updateQueue;if(t===null)t=Dl(),Te.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function lg(e){var t=ht().memoizedState;return hb({ref:t,nextImpl:e}),function(){if((He&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function og(e,t){return zl(4,2,e,t)}function cg(e,t){return zl(4,4,e,t)}function ug(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dg(e,t,i){i=i!=null?i.concat([e]):null,zl(4,4,ug.bind(null,t,e),i)}function tu(){}function hg(e,t){var i=ht();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&Pc(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function fg(e,t){var i=ht();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&Pc(t,l[1]))return l[0];if(l=e(),pa){it(!0);try{e()}finally{it(!1)}}return i.memoizedState=[l,t],l}function nu(e,t,i){return i===void 0||(ur&1073741824)!==0&&(ze&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=gp(),Te.lanes|=e,$r|=e,i)}function gg(e,t,i,l){return hn(i,t)?i:Xa.current!==null?(e=nu(e,i,l),hn(e,t)||(yt=!0),e):(ur&42)===0||(ur&1073741824)!==0&&(ze&261930)===0?(yt=!0,e.memoizedState=i):(e=gp(),Te.lanes|=e,$r|=e,t)}function pg(e,t,i,l,d){var f=J.p;J.p=f!==0&&8>f?f:8;var b=z.T,S={};z.T=S,iu(e,!1,t,i);try{var N=d(),P=z.S;if(P!==null&&P(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=lb(N,l);es(e,t,Q,yn(e))}else es(e,t,l,yn(e))}catch(F){es(e,t,{then:function(){},status:"rejected",reason:F},yn())}finally{J.p=f,b!==null&&S.types!==null&&(b.types=S.types),z.T=b}}function fb(){}function ru(e,t,i,l){if(e.tag!==5)throw Error(s(476));var d=mg(e).queue;pg(e,d,t,ae,i===null?fb:function(){return vg(e),i(l)})}function mg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:ae},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function vg(e){var t=mg(e);t.next===null&&(t=e.alternate.memoizedState),es(e,t.next.queue,{},yn())}function au(){return Bt(vs)}function yg(){return ht().memoizedState}function bg(){return ht().memoizedState}function gb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=yn();e=Mr(i);var l=zr(t,e,i);l!==null&&(on(l,t,i),Qi(l,t,i)),t={cache:kc()},e.payload=t;return}t=t.return}}function pb(e,t,i){var l=yn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ll(e)?wg(t,i):(i=Sc(e,t,i,l),i!==null&&(on(i,e,l),Sg(i,t,l)))}function xg(e,t,i){var l=yn();es(e,t,i,l)}function es(e,t,i,l){var d={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ll(e))wg(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var b=t.lastRenderedState,S=f(b,i);if(d.hasEagerState=!0,d.eagerState=S,hn(S,b))return vl(e,t,d,0),Qe===null&&ml(),!1}catch{}if(i=Sc(e,t,d,l),i!==null)return on(i,e,l),Sg(i,t,l),!0}return!1}function iu(e,t,i,l){if(l={lane:2,revertLane:Lu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ll(e)){if(t)throw Error(s(479))}else t=Sc(e,i,l,2),t!==null&&on(t,e,2)}function Ll(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function wg(e,t){Za=Ol=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Sg(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,dn(e,i)}}var ts={readContext:Bt,use:kl,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};ts.useEffectEvent=st;var _g={readContext:Bt,use:kl,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:sg,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Ml(4194308,4,ug.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var i=Xt();t=t===void 0?null:t;var l=e();if(pa){it(!0);try{e()}finally{it(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Xt();if(i!==void 0){var d=i(t);if(pa){it(!0);try{i(t)}finally{it(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=pb.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=Wc(e);var t=e.queue,i=xg.bind(null,Te,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:tu,useDeferredValue:function(e,t){var i=Xt();return nu(i,e,t)},useTransition:function(){var e=Wc(!1);return e=pg.bind(null,Te,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=Te,d=Xt();if(Be){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Qe===null)throw Error(s(349));(ze&127)!==0||Pf(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,sg(Yf.bind(null,l,f,e),[e]),l.flags|=2048,Fa(9,{destroy:void 0},Vf.bind(null,l,f,i,t),null),i},useId:function(){var e=Xt(),t=Qe.identifierPrefix;if(Be){var i=Xn,l=Qn;i=(l&~(1<<32-_t(l)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Nl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=ob++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:au,useFormState:tg,useActionState:tg,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=iu.bind(null,Te,!0,i),i.dispatch=t,[e,t]},useMemoCache:Qc,useCacheRefresh:function(){return Xt().memoizedState=gb.bind(null,Te)},useEffectEvent:function(e){var t=Xt(),i={impl:e};return t.memoizedState=i,function(){if((He&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},su={readContext:Bt,use:kl,useCallback:hg,useContext:Bt,useEffect:eu,useImperativeHandle:dg,useInsertionEffect:og,useLayoutEffect:cg,useMemo:fg,useReducer:Ul,useRef:ig,useState:function(){return Ul(dr)},useDebugValue:tu,useDeferredValue:function(e,t){var i=ht();return gg(i,Ye.memoizedState,e,t)},useTransition:function(){var e=Ul(dr)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:Fi(e),t]},useSyncExternalStore:Gf,useId:yg,useHostTransitionStatus:au,useFormState:ng,useActionState:ng,useOptimistic:function(e,t){var i=ht();return Qf(i,Ye,e,t)},useMemoCache:Qc,useCacheRefresh:bg};su.useEffectEvent=lg;var jg={readContext:Bt,use:kl,useCallback:hg,useContext:Bt,useEffect:eu,useImperativeHandle:dg,useInsertionEffect:og,useLayoutEffect:cg,useMemo:fg,useReducer:Zc,useRef:ig,useState:function(){return Zc(dr)},useDebugValue:tu,useDeferredValue:function(e,t){var i=ht();return Ye===null?nu(i,e,t):gg(i,Ye.memoizedState,e,t)},useTransition:function(){var e=Zc(dr)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:Fi(e),t]},useSyncExternalStore:Gf,useId:yg,useHostTransitionStatus:au,useFormState:ag,useActionState:ag,useOptimistic:function(e,t){var i=ht();return Ye!==null?Qf(i,Ye,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Qc,useCacheRefresh:bg};jg.useEffectEvent=lg;function lu(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:y({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ou={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=yn(),d=Mr(l);d.payload=t,i!=null&&(d.callback=i),t=zr(e,d,l),t!==null&&(on(t,e,l),Qi(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=yn(),d=Mr(l);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=zr(e,d,l),t!==null&&(on(t,e,l),Qi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=yn(),l=Mr(i);l.tag=2,t!=null&&(l.callback=t),t=zr(e,l,i),t!==null&&(on(t,e,i),Qi(t,e,i))}};function Eg(e,t,i,l,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,b):t.prototype&&t.prototype.isPureReactComponent?!$i(i,l)||!$i(d,f):!0}function Rg(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&ou.enqueueReplaceState(t,t.state,null)}function ma(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}function Tg(e){pl(e)}function Cg(e){console.error(e)}function Ag(e){pl(e)}function Bl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Og(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function cu(e,t,i){return i=Mr(i),i.tag=3,i.payload={element:null},i.callback=function(){Bl(e,t)},i}function Ng(e){return e=Mr(e),e.tag=3,e}function Dg(e,t,i,l){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){Og(t,i,l)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Og(t,i,l),typeof d!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function mb(e,t,i,l,d){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&Va(t,i,d,!0),i=gn.current,i!==null){switch(i.tag){case 31:case 13:return Dn===null?Xl():i.alternate===null&&lt===0&&(lt=3),i.flags&=-257,i.flags|=65536,i.lanes=d,l===El?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),Uu(e,l,d)),!1;case 22:return i.flags|=65536,l===El?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),Uu(e,l,d)),!1}throw Error(s(435,i.tag))}return Uu(e,l,d),Xl(),!1}if(Be)return t=gn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Cc&&(e=Error(s(422),{cause:l}),Pi(Cn(e,i)))):(l!==Cc&&(t=Error(s(423),{cause:l}),Pi(Cn(t,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Cn(l,i),d=cu(e.stateNode,l,d),Ic(e,d),lt!==4&&(lt=2)),!1;var f=Error(s(520),{cause:l});if(f=Cn(f,i),cs===null?cs=[f]:cs.push(f),lt!==4&&(lt=2),t===null)return!0;l=Cn(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=cu(i.stateNode,l,e),Ic(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Hr===null||!Hr.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Ng(d),Dg(d,e,i,l),Ic(i,d),!1}i=i.return}while(i!==null);return!1}var uu=Error(s(461)),yt=!1;function It(e,t,i,l){t.child=e===null?zf(t,null,i,l):ga(t,e.child,i,l)}function kg(e,t,i,l,d){i=i.render;var f=t.ref;if("ref"in l){var b={};for(var S in l)S!=="ref"&&(b[S]=l[S])}else b=l;return ua(t),l=Vc(e,t,i,b,f,d),S=Yc(),e!==null&&!yt?(Kc(e,t,d),hr(e,t,d)):(Be&&S&&Rc(t),t.flags|=1,It(e,t,l,d),t.child)}function Ug(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!_c(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,Mg(e,t,f,l,d)):(e=bl(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!yu(e,d)){var b=f.memoizedProps;if(i=i.compare,i=i!==null?i:$i,i(b,l)&&e.ref===t.ref)return hr(e,t,d)}return t.flags|=1,e=sr(f,l),e.ref=t.ref,e.return=t,t.child=e}function Mg(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if($i(f,l)&&e.ref===t.ref)if(yt=!1,t.pendingProps=l=f,yu(e,d))(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,hr(e,t,d)}return du(e,t,i,l,d)}function zg(e,t,i,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return Lg(e,t,f,i,l)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&_l(t,f!==null?f.cachePool:null),f!==null?If(t,f):$c(),qf(t);else return l=t.lanes=536870912,Lg(e,t,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(_l(t,f.cachePool),If(t,f),Br(),t.memoizedState=null):(e!==null&&_l(t,null),$c(),Br());return It(e,t,d,i),t.child}function ns(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Lg(e,t,i,l,d){var f=Mc();return f=f===null?null:{parent:mt._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&_l(t,null),$c(),qf(t),e!==null&&Va(e,t,l,!0),t.childLanes=d,null}function Il(e,t){return t=$l({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Bg(e,t,i){return ga(t,e.child,null,i),e=Il(t,t.pendingProps),e.flags|=2,pn(t),t.memoizedState=null,e}function vb(e,t,i){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Be){if(l.mode==="hidden")return e=Il(t,l),t.lanes=536870912,ns(null,e);if(Gc(t),(e=We)?(e=Xp(e,Nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Or!==null?{id:Qn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},i=wf(e),i.return=t,t.child=i,Lt=t,We=null)):e=null,e===null)throw Dr(t);return t.lanes=536870912,null}return Il(t,l)}var f=e.memoizedState;if(f!==null){var b=f.dehydrated;if(Gc(t),d)if(t.flags&256)t.flags&=-257,t=Bg(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(yt||Va(e,t,i,!1),d=(i&e.childLanes)!==0,yt||d){if(l=Qe,l!==null&&(b=_n(l,i),b!==0&&b!==f.retryLane))throw f.retryLane=b,sa(e,b),on(l,e,b),uu;Xl(),t=Bg(e,t,i)}else e=f.treeContext,We=kn(b.nextSibling),Lt=t,Be=!0,Nr=null,Nn=!1,e!==null&&jf(t,e),t=Il(t,l),t.flags|=4096;return t}return e=sr(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ql(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function du(e,t,i,l,d){return ua(t),i=Vc(e,t,i,l,void 0,d),l=Yc(),e!==null&&!yt?(Kc(e,t,d),hr(e,t,d)):(Be&&l&&Rc(t),t.flags|=1,It(e,t,i,d),t.child)}function Ig(e,t,i,l,d,f){return ua(t),t.updateQueue=null,i=Hf(t,l,i,d),$f(e),l=Yc(),e!==null&&!yt?(Kc(e,t,f),hr(e,t,f)):(Be&&l&&Rc(t),t.flags|=1,It(e,t,i,f),t.child)}function qg(e,t,i,l,d){if(ua(t),t.stateNode===null){var f=$a,b=i.contextType;typeof b=="object"&&b!==null&&(f=Bt(b)),f=new i(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ou,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},Lc(t),b=i.contextType,f.context=typeof b=="object"&&b!==null?Bt(b):$a,f.state=t.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(lu(t,i,b,l),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&ou.enqueueReplaceState(f,f.state,null),Zi(t,l,f,d),Xi(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var S=t.memoizedProps,N=ma(i,S);f.props=N;var P=f.context,Q=i.contextType;b=$a,typeof Q=="object"&&Q!==null&&(b=Bt(Q));var F=i.getDerivedStateFromProps;Q=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||P!==b)&&Rg(t,f,l,b),Ur=!1;var Y=t.memoizedState;f.state=Y,Zi(t,l,f,d),Xi(),P=t.memoizedState,S||Y!==P||Ur?(typeof F=="function"&&(lu(t,i,F,l),P=t.memoizedState),(N=Ur||Eg(t,i,N,l,Y,P,b))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=P),f.props=l,f.state=P,f.context=b,l=N):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,Bc(e,t),b=t.memoizedProps,Q=ma(i,b),f.props=Q,F=t.pendingProps,Y=f.context,P=i.contextType,N=$a,typeof P=="object"&&P!==null&&(N=Bt(P)),S=i.getDerivedStateFromProps,(P=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==F||Y!==N)&&Rg(t,f,l,N),Ur=!1,Y=t.memoizedState,f.state=Y,Zi(t,l,f,d),Xi();var K=t.memoizedState;b!==F||Y!==K||Ur||e!==null&&e.dependencies!==null&&wl(e.dependencies)?(typeof S=="function"&&(lu(t,i,S,l),K=t.memoizedState),(Q=Ur||Eg(t,i,Q,l,Y,K,N)||e!==null&&e.dependencies!==null&&wl(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,K,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,K,N)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=K),f.props=l,f.state=K,f.context=N,l=Q):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,ql(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=ga(t,e.child,null,d),t.child=ga(t,null,i,d)):It(e,t,i,d),t.memoizedState=f.state,e=t.child):e=hr(e,t,d),e}function $g(e,t,i,l){return oa(),t.flags|=256,It(e,t,i,l),t.child}var hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(e){return{baseLanes:e,cachePool:Of()}}function gu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=vn),e}function Hg(e,t,i){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(dt.current&2)!==0),b&&(d=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(d?Lr(t):Br(),(e=We)?(e=Xp(e,Nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Or!==null?{id:Qn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},i=wf(e),i.return=t,t.child=i,Lt=t,We=null)):e=null,e===null)throw Dr(t);return Xu(e)?t.lanes=32:t.lanes=536870912,null}var S=l.children;return l=l.fallback,d?(Br(),d=t.mode,S=$l({mode:"hidden",children:S},d),l=la(l,d,i,null),S.return=t,l.return=t,S.sibling=l,t.child=S,l=t.child,l.memoizedState=fu(i),l.childLanes=gu(e,b,i),t.memoizedState=hu,ns(null,l)):(Lr(t),pu(t,S))}var N=e.memoizedState;if(N!==null&&(S=N.dehydrated,S!==null)){if(f)t.flags&256?(Lr(t),t.flags&=-257,t=mu(e,t,i)):t.memoizedState!==null?(Br(),t.child=e.child,t.flags|=128,t=null):(Br(),S=l.fallback,d=t.mode,l=$l({mode:"visible",children:l.children},d),S=la(S,d,i,null),S.flags|=2,l.return=t,S.return=t,l.sibling=S,t.child=l,ga(t,e.child,null,i),l=t.child,l.memoizedState=fu(i),l.childLanes=gu(e,b,i),t.memoizedState=hu,t=ns(null,l));else if(Lr(t),Xu(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var P=b.dgst;b=P,l=Error(s(419)),l.stack="",l.digest=b,Pi({value:l,source:null,stack:null}),t=mu(e,t,i)}else if(yt||Va(e,t,i,!1),b=(i&e.childLanes)!==0,yt||b){if(b=Qe,b!==null&&(l=_n(b,i),l!==0&&l!==N.retryLane))throw N.retryLane=l,sa(e,l),on(b,e,l),uu;Qu(S)||Xl(),t=mu(e,t,i)}else Qu(S)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,We=kn(S.nextSibling),Lt=t,Be=!0,Nr=null,Nn=!1,e!==null&&jf(t,e),t=pu(t,l.children),t.flags|=4096);return t}return d?(Br(),S=l.fallback,d=t.mode,N=e.child,P=N.sibling,l=sr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,P!==null?S=sr(P,S):(S=la(S,d,i,null),S.flags|=2),S.return=t,l.return=t,l.sibling=S,t.child=l,ns(null,l),l=t.child,S=e.child.memoizedState,S===null?S=fu(i):(d=S.cachePool,d!==null?(N=mt._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=Of(),S={baseLanes:S.baseLanes|i,cachePool:d}),l.memoizedState=S,l.childLanes=gu(e,b,i),t.memoizedState=hu,ns(e.child,l)):(Lr(t),i=e.child,e=i.sibling,i=sr(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=i,t.memoizedState=null,i)}function pu(e,t){return t=$l({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function $l(e,t){return e=fn(22,e,null,t),e.lanes=0,e}function mu(e,t,i){return ga(t,e.child,null,i),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gg(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Nc(e.return,t,i)}function vu(e,t,i,l,d,f){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d,treeForkCount:f}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=i,b.tailMode=d,b.treeForkCount=f)}function Pg(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var b=dt.current,S=(b&2)!==0;if(S?(b=b&1|2,t.flags|=128):b&=1,ee(dt,b),It(e,t,l,i),l=Be?Gi:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gg(e,i,t);else if(e.tag===19)Gg(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Al(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),vu(t,!1,d,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Al(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}vu(t,!0,i,null,f,l);break;case"together":vu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function hr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Va(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=sr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=sr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&wl(e)))}function yb(e,t,i){switch(t.tag){case 3:Ve(t,t.stateNode.containerInfo),kr(t,mt,e.memoizedState.cache),oa();break;case 27:case 5:De(t);break;case 4:Ve(t,t.stateNode.containerInfo);break;case 10:kr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Gc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Lr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Hg(e,t,i):(Lr(t),e=hr(e,t,i),e!==null?e.sibling:null);Lr(t);break;case 19:var d=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(Va(e,t,i,!1),l=(i&t.childLanes)!==0),d){if(l)return Pg(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(dt,dt.current),l)break;return null;case 22:return t.lanes=0,zg(e,t,i,t.pendingProps);case 24:kr(t,mt,e.memoizedState.cache)}return hr(e,t,i)}function Vg(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!yu(e,i)&&(t.flags&128)===0)return yt=!1,yb(e,t,i);yt=(e.flags&131072)!==0}else yt=!1,Be&&(t.flags&1048576)!==0&&_f(t,Gi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ha(t.elementType),t.type=e,typeof e=="function")_c(e)?(l=ma(e,l),t.tag=1,t=qg(null,t,e,l,i)):(t.tag=0,t=du(null,t,e,l,i));else{if(e!=null){var d=e.$$typeof;if(d===B){t.tag=11,t=kg(null,t,e,l,i);break e}else if(d===k){t.tag=14,t=Ug(null,t,e,l,i);break e}}throw t=re(e)||e,Error(s(306,t,""))}}return t;case 0:return du(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,d=ma(l,t.pendingProps),qg(e,t,l,d,i);case 3:e:{if(Ve(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,Bc(e,t),Zi(t,l,null,i);var b=t.memoizedState;if(l=b.cache,kr(t,mt,l),l!==f.cache&&Dc(t,[mt],i,!0),Xi(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=$g(e,t,l,i);break e}else if(l!==d){d=Cn(Error(s(424)),t),Pi(d),t=$g(e,t,l,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,We=kn(e.firstChild),Lt=t,Be=!0,Nr=null,Nn=!0,i=zf(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(oa(),l===d){t=hr(e,t,i);break e}It(e,t,l,i)}t=t.child}return t;case 26:return ql(e,t),e===null?(i=nm(t.type,null,t.pendingProps,null))?t.memoizedState=i:Be||(i=t.type,e=t.pendingProps,l=ro(ve.current).createElement(i),l[zt]=t,l[tn]=e,qt(l,i,e),Dt(l),t.stateNode=l):t.memoizedState=nm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return De(t),e===null&&Be&&(l=t.stateNode=Fp(t.type,t.pendingProps,ve.current),Lt=t,Nn=!0,d=We,Yr(t.type)?(Zu=d,We=kn(l.firstChild)):We=d),It(e,t,t.pendingProps.children,i),ql(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((d=l=We)&&(l=Jb(l,t.type,t.pendingProps,Nn),l!==null?(t.stateNode=l,Lt=t,We=kn(l.firstChild),Nn=!1,d=!0):d=!1),d||Dr(t)),De(t),d=t.type,f=t.pendingProps,b=e!==null?e.memoizedProps:null,l=f.children,Yu(d,f)?l=null:b!==null&&Yu(d,b)&&(t.flags|=32),t.memoizedState!==null&&(d=Vc(e,t,cb,null,null,i),vs._currentValue=d),ql(e,t),It(e,t,l,i),t.child;case 6:return e===null&&Be&&((e=i=We)&&(i=Qb(i,t.pendingProps,Nn),i!==null?(t.stateNode=i,Lt=t,We=null,e=!0):e=!1),e||Dr(t)),null;case 13:return Hg(e,t,i);case 4:return Ve(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ga(t,null,l,i):It(e,t,l,i),t.child;case 11:return kg(e,t,t.type,t.pendingProps,i);case 7:return It(e,t,t.pendingProps,i),t.child;case 8:return It(e,t,t.pendingProps.children,i),t.child;case 12:return It(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,kr(t,t.type,l.value),It(e,t,l.children,i),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,ua(t),d=Bt(d),l=l(d),t.flags|=1,It(e,t,l,i),t.child;case 14:return Ug(e,t,t.type,t.pendingProps,i);case 15:return Mg(e,t,t.type,t.pendingProps,i);case 19:return Pg(e,t,i);case 31:return vb(e,t,i);case 22:return zg(e,t,i,t.pendingProps);case 24:return ua(t),l=Bt(mt),e===null?(d=Mc(),d===null&&(d=Qe,f=kc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),t.memoizedState={parent:l,cache:d},Lc(t),kr(t,mt,d)):((e.lanes&i)!==0&&(Bc(e,t),Zi(t,null,null,i),Xi()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),kr(t,mt,l)):(l=f.cache,kr(t,mt,l),l!==d.cache&&Dc(t,[mt],i,!0))),It(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function fr(e){e.flags|=4}function bu(e,t,i,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(yp())e.flags|=8192;else throw fa=El,zc}else e.flags&=-16777217}function Yg(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!lm(t))if(yp())e.flags|=8192;else throw fa=El,zc}function Hl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Kt():536870912,e.lanes|=t,ri|=t)}function rs(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function bb(e,t,i){var l=t.pendingProps;switch(Tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),cr(mt),ke(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?fr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ac())),Fe(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(fr(t),f!==null?(Fe(t),Yg(t,f)):(Fe(t),bu(t,d,null,l,i))):f?f!==e.memoizedState?(fr(t),Fe(t),Yg(t,f)):(Fe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&fr(t),Fe(t),bu(t,d,e,l,i)),null;case 27:if(Pt(t),i=ve.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&fr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Fe(t),null}e=ie.current,Pa(t)?Ef(t):(e=Fp(d,l,i),t.stateNode=e,fr(t))}return Fe(t),null;case 5:if(Pt(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&fr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Fe(t),null}if(f=ie.current,Pa(t))Ef(t);else{var b=ro(ve.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?b.createElement(d,{is:l.is}):b.createElement(d)}}f[zt]=t,f[tn]=l;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=f;e:switch(qt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&fr(t)}}return Fe(t),bu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&fr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=ve.current,Pa(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,d=Lt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[zt]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Hp(e.nodeValue,i)),e||Dr(t,!0)}else e=ro(e).createTextNode(l),e[zt]=t,t.stateNode=e}return Fe(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(l=Pa(t),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[zt]=t}else oa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),e=!1}else i=Ac(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(pn(t),t):(pn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Fe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Pa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[zt]=t}else oa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),d=!1}else d=Ac(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(pn(t),t):(pn(t),null)}return pn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Hl(t,t.updateQueue),Fe(t),null);case 4:return ke(),e===null&&$u(t.stateNode.containerInfo),Fe(t),null;case 10:return cr(t.type),Fe(t),null;case 19:if(L(dt),l=t.memoizedState,l===null)return Fe(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)rs(l,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Al(e),f!==null){for(t.flags|=128,rs(l,!1),e=f.updateQueue,t.updateQueue=e,Hl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)xf(i,e),i=i.sibling;return ee(dt,dt.current&1|2),Be&&lr(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ge()>Kl&&(t.flags|=128,d=!0,rs(l,!1),t.lanes=4194304)}else{if(!d)if(e=Al(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Hl(t,e),rs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Be)return Fe(t),null}else 2*ge()-l.renderingStartTime>Kl&&i!==536870912&&(t.flags|=128,d=!0,rs(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ge(),e.sibling=null,i=dt.current,ee(dt,d?i&1|2:i&1),Be&&lr(t,l.treeForkCount),e):(Fe(t),null);case 22:case 23:return pn(t),Hc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),i=t.updateQueue,i!==null&&Hl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&L(da),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),cr(mt),Fe(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function xb(e,t){switch(Tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cr(mt),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Pt(t),null;case 31:if(t.memoizedState!==null){if(pn(t),t.alternate===null)throw Error(s(340));oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(pn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(dt),null;case 4:return ke(),null;case 10:return cr(t.type),null;case 22:case 23:return pn(t),Hc(),e!==null&&L(da),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return cr(mt),null;case 25:return null;default:return null}}function Kg(e,t){switch(Tc(t),t.tag){case 3:cr(mt),ke();break;case 26:case 27:case 5:Pt(t);break;case 4:ke();break;case 31:t.memoizedState!==null&&pn(t);break;case 13:pn(t);break;case 19:L(dt);break;case 10:cr(t.type);break;case 22:case 23:pn(t),Hc(),e!==null&&L(da);break;case 24:cr(mt)}}function as(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var d=l.next;i=d;do{if((i.tag&e)===e){l=void 0;var f=i.create,b=i.inst;l=f(),b.destroy=l}i=i.next}while(i!==d)}}catch(S){Pe(t,t.return,S)}}function Ir(e,t,i){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var b=l.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=t;var N=i,P=S;try{P()}catch(Q){Pe(d,N,Q)}}}l=l.next}while(l!==f)}}catch(Q){Pe(t,t.return,Q)}}function Jg(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Bf(t,i)}catch(l){Pe(e,e.return,l)}}}function Qg(e,t,i){i.props=ma(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Pe(e,t,l)}}function is(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(d){Pe(e,t,d)}}function Zn(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(d){Pe(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Pe(e,t,d)}else i.current=null}function Xg(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(d){Pe(e,e.return,d)}}function xu(e,t,i){try{var l=e.stateNode;Hb(l,e.type,i,t),l[tn]=t}catch(d){Pe(e,e.return,d)}}function Zg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Yr(e.type)||e.tag===4}function wu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Yr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Su(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ar));else if(l!==4&&(l===27&&Yr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Su(e,t,i),e=e.sibling;e!==null;)Su(e,t,i),e=e.sibling}function Gl(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&Yr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Gl(e,t,i),e=e.sibling;e!==null;)Gl(e,t,i),e=e.sibling}function Wg(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);qt(t,l,i),t[zt]=e,t[tn]=i}catch(f){Pe(e,e.return,f)}}var gr=!1,bt=!1,_u=!1,Fg=typeof WeakSet=="function"?WeakSet:Set,kt=null;function wb(e,t){if(e=e.containerInfo,Pu=uo,e=df(e),mc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var b=0,S=-1,N=-1,P=0,Q=0,F=e,Y=null;t:for(;;){for(var K;F!==i||d!==0&&F.nodeType!==3||(S=b+d),F!==f||l!==0&&F.nodeType!==3||(N=b+l),F.nodeType===3&&(b+=F.nodeValue.length),(K=F.firstChild)!==null;)Y=F,F=K;for(;;){if(F===e)break t;if(Y===i&&++P===d&&(S=b),Y===f&&++Q===l&&(N=b),(K=F.nextSibling)!==null)break;F=Y,Y=F.parentNode}F=K}i=S===-1||N===-1?null:{start:S,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vu={focusedElem:e,selectionRange:i},uo=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){switch(t=kt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)d=e[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,d=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var oe=ma(i.type,d);e=l.getSnapshotBeforeUpdate(oe,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(we){Pe(i,i.return,we)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Ju(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ju(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}}function ep(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:mr(e,i),l&4&&as(5,i);break;case 1:if(mr(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(b){Pe(i,i.return,b)}else{var d=ma(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Pe(i,i.return,b)}}l&64&&Jg(i),l&512&&is(i,i.return);break;case 3:if(mr(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Bf(e,t)}catch(b){Pe(i,i.return,b)}}break;case 27:t===null&&l&4&&Wg(i);case 26:case 5:mr(e,i),t===null&&l&4&&Xg(i),l&512&&is(i,i.return);break;case 12:mr(e,i);break;case 31:mr(e,i),l&4&&rp(e,i);break;case 13:mr(e,i),l&4&&ap(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Ob.bind(null,i),Xb(e,i))));break;case 22:if(l=i.memoizedState!==null||gr,!l){t=t!==null&&t.memoizedState!==null||bt,d=gr;var f=bt;gr=l,(bt=t)&&!f?vr(e,i,(i.subtreeFlags&8772)!==0):mr(e,i),gr=d,bt=f}break;case 30:break;default:mr(e,i)}}function tp(e){var t=e.alternate;t!==null&&(e.alternate=null,tp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Fo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var et=null,rn=!1;function pr(e,t,i){for(i=i.child;i!==null;)np(e,t,i),i=i.sibling}function np(e,t,i){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(nt,i)}catch{}switch(i.tag){case 26:bt||Zn(i,t),pr(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Zn(i,t);var l=et,d=rn;Yr(i.type)&&(et=i.stateNode,rn=!1),pr(e,t,i),gs(i.stateNode),et=l,rn=d;break;case 5:bt||Zn(i,t);case 6:if(l=et,d=rn,et=null,pr(e,t,i),et=l,rn=d,et!==null)if(rn)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(i.stateNode)}catch(f){Pe(i,t,f)}else try{et.removeChild(i.stateNode)}catch(f){Pe(i,t,f)}break;case 18:et!==null&&(rn?(e=et,Jp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),di(e)):Jp(et,i.stateNode));break;case 4:l=et,d=rn,et=i.stateNode.containerInfo,rn=!0,pr(e,t,i),et=l,rn=d;break;case 0:case 11:case 14:case 15:Ir(2,i,t),bt||Ir(4,i,t),pr(e,t,i);break;case 1:bt||(Zn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Qg(i,t,l)),pr(e,t,i);break;case 21:pr(e,t,i);break;case 22:bt=(l=bt)||i.memoizedState!==null,pr(e,t,i),bt=l;break;default:pr(e,t,i)}}function rp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{di(e)}catch(i){Pe(t,t.return,i)}}}function ap(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{di(e)}catch(i){Pe(t,t.return,i)}}function Sb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Fg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Fg),t;default:throw Error(s(435,e.tag))}}function Pl(e,t){var i=Sb(e);t.forEach(function(l){if(!i.has(l)){i.add(l);var d=Nb.bind(null,e,l);l.then(d,d)}})}function an(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l],f=e,b=t,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Yr(S.type)){et=S.stateNode,rn=!1;break e}break;case 5:et=S.stateNode,rn=!1;break e;case 3:case 4:et=S.stateNode.containerInfo,rn=!0;break e}S=S.return}if(et===null)throw Error(s(160));np(f,b,d),et=null,rn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ip(t,e),t=t.sibling}var Hn=null;function ip(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:an(t,e),sn(e),l&4&&(Ir(3,e,e.return),as(3,e),Ir(5,e,e.return));break;case 1:an(t,e),sn(e),l&512&&(bt||i===null||Zn(i,i.return)),l&64&&gr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var d=Hn;if(an(t,e),sn(e),l&512&&(bt||i===null||Zn(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Di]||f[zt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),qt(f,l,i),f[zt]=e,Dt(f),l=f;break e;case"link":var b=im("link","href",d).get(l+(i.href||""));if(b){for(var S=0;S<b.length;S++)if(f=b[S],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(S,1);break t}}f=d.createElement(l),qt(f,l,i),d.head.appendChild(f);break;case"meta":if(b=im("meta","content",d).get(l+(i.content||""))){for(S=0;S<b.length;S++)if(f=b[S],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(S,1);break t}}f=d.createElement(l),qt(f,l,i),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[zt]=e,Dt(f),l=f}e.stateNode=l}else sm(d,e.type,e.stateNode);else e.stateNode=am(d,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?sm(d,e.type,e.stateNode):am(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&xu(e,e.memoizedProps,i.memoizedProps)}break;case 27:an(t,e),sn(e),l&512&&(bt||i===null||Zn(i,i.return)),i!==null&&l&4&&xu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(an(t,e),sn(e),l&512&&(bt||i===null||Zn(i,i.return)),e.flags&32){d=e.stateNode;try{Ua(d,"")}catch(oe){Pe(e,e.return,oe)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,xu(e,d,i!==null?i.memoizedProps:d)),l&1024&&(_u=!0);break;case 6:if(an(t,e),sn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(oe){Pe(e,e.return,oe)}}break;case 3:if(so=null,d=Hn,Hn=ao(t.containerInfo),an(t,e),Hn=d,sn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{di(t.containerInfo)}catch(oe){Pe(e,e.return,oe)}_u&&(_u=!1,sp(e));break;case 4:l=Hn,Hn=ao(e.stateNode.containerInfo),an(t,e),sn(e),Hn=l;break;case 12:an(t,e),sn(e);break;case 31:an(t,e),sn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pl(e,l)));break;case 13:an(t,e),sn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Yl=ge()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pl(e,l)));break;case 22:d=e.memoizedState!==null;var N=i!==null&&i.memoizedState!==null,P=gr,Q=bt;if(gr=P||d,bt=Q||N,an(t,e),bt=Q,gr=P,sn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(i===null||N||gr||bt||va(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){N=i=t;try{if(f=N.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=N.stateNode;var F=N.memoizedProps.style,Y=F!=null&&F.hasOwnProperty("display")?F.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(oe){Pe(N,N.return,oe)}}}else if(t.tag===6){if(i===null){N=t;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(oe){Pe(N,N.return,oe)}}}else if(t.tag===18){if(i===null){N=t;try{var K=N.stateNode;d?Qp(K,!0):Qp(N.stateNode,!1)}catch(oe){Pe(N,N.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Pl(e,i))));break;case 19:an(t,e),sn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pl(e,l)));break;case 30:break;case 21:break;default:an(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(Zg(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var d=i.stateNode,f=wu(e);Gl(e,f,d);break;case 5:var b=i.stateNode;i.flags&32&&(Ua(b,""),i.flags&=-33);var S=wu(e);Gl(e,S,b);break;case 3:case 4:var N=i.stateNode.containerInfo,P=wu(e);Su(e,P,N);break;default:throw Error(s(161))}}catch(Q){Pe(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function mr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ep(e,t.alternate,t),t=t.sibling}function va(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ir(4,t,t.return),va(t);break;case 1:Zn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Qg(t,t.return,i),va(t);break;case 27:gs(t.stateNode);case 26:case 5:Zn(t,t.return),va(t);break;case 22:t.memoizedState===null&&va(t);break;case 30:va(t);break;default:va(t)}e=e.sibling}}function vr(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,b=f.flags;switch(f.tag){case 0:case 11:case 15:vr(d,f,i),as(4,f);break;case 1:if(vr(d,f,i),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(P){Pe(l,l.return,P)}if(l=f,d=l.updateQueue,d!==null){var S=l.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Lf(N[d],S)}catch(P){Pe(l,l.return,P)}}i&&b&64&&Jg(f),is(f,f.return);break;case 27:Wg(f);case 26:case 5:vr(d,f,i),i&&l===null&&b&4&&Xg(f),is(f,f.return);break;case 12:vr(d,f,i);break;case 31:vr(d,f,i),i&&b&4&&rp(d,f);break;case 13:vr(d,f,i),i&&b&4&&ap(d,f);break;case 22:f.memoizedState===null&&vr(d,f,i),is(f,f.return);break;case 30:break;default:vr(d,f,i)}t=t.sibling}}function ju(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Vi(i))}function Eu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vi(e))}function Gn(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lp(e,t,i,l),t=t.sibling}function lp(e,t,i,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Gn(e,t,i,l),d&2048&&as(9,t);break;case 1:Gn(e,t,i,l);break;case 3:Gn(e,t,i,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vi(e)));break;case 12:if(d&2048){Gn(e,t,i,l),e=t.stateNode;try{var f=t.memoizedProps,b=f.id,S=f.onPostCommit;typeof S=="function"&&S(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Pe(t,t.return,N)}}else Gn(e,t,i,l);break;case 31:Gn(e,t,i,l);break;case 13:Gn(e,t,i,l);break;case 23:break;case 22:f=t.stateNode,b=t.alternate,t.memoizedState!==null?f._visibility&2?Gn(e,t,i,l):ss(e,t):f._visibility&2?Gn(e,t,i,l):(f._visibility|=2,ei(e,t,i,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&ju(b,t);break;case 24:Gn(e,t,i,l),d&2048&&Eu(t.alternate,t);break;default:Gn(e,t,i,l)}}function ei(e,t,i,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,b=t,S=i,N=l,P=b.flags;switch(b.tag){case 0:case 11:case 15:ei(f,b,S,N,d),as(8,b);break;case 23:break;case 22:var Q=b.stateNode;b.memoizedState!==null?Q._visibility&2?ei(f,b,S,N,d):ss(f,b):(Q._visibility|=2,ei(f,b,S,N,d)),d&&P&2048&&ju(b.alternate,b);break;case 24:ei(f,b,S,N,d),d&&P&2048&&Eu(b.alternate,b);break;default:ei(f,b,S,N,d)}t=t.sibling}}function ss(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,d=l.flags;switch(l.tag){case 22:ss(i,l),d&2048&&ju(l.alternate,l);break;case 24:ss(i,l),d&2048&&Eu(l.alternate,l);break;default:ss(i,l)}t=t.sibling}}var ls=8192;function ti(e,t,i){if(e.subtreeFlags&ls)for(e=e.child;e!==null;)op(e,t,i),e=e.sibling}function op(e,t,i){switch(e.tag){case 26:ti(e,t,i),e.flags&ls&&e.memoizedState!==null&&ox(i,Hn,e.memoizedState,e.memoizedProps);break;case 5:ti(e,t,i);break;case 3:case 4:var l=Hn;Hn=ao(e.stateNode.containerInfo),ti(e,t,i),Hn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ls,ls=16777216,ti(e,t,i),ls=l):ti(e,t,i));break;default:ti(e,t,i)}}function cp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];kt=l,dp(l,e)}cp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)up(e),e=e.sibling}function up(e){switch(e.tag){case 0:case 11:case 15:os(e),e.flags&2048&&Ir(9,e,e.return);break;case 3:os(e);break;case 12:os(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vl(e)):os(e);break;default:os(e)}}function Vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];kt=l,dp(l,e)}cp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ir(8,t,t.return),Vl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Vl(t));break;default:Vl(t)}e=e.sibling}}function dp(e,t){for(;kt!==null;){var i=kt;switch(i.tag){case 0:case 11:case 15:Ir(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,kt=l;else e:for(i=e;kt!==null;){l=kt;var d=l.sibling,f=l.return;if(tp(l),l===i){kt=null;break e}if(d!==null){d.return=f,kt=d;break e}kt=f}}}var _b={getCacheForType:function(e){var t=Bt(mt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Bt(mt).controller.signal}},jb=typeof WeakMap=="function"?WeakMap:Map,He=0,Qe=null,Ue=null,ze=0,Ge=0,mn=null,qr=!1,ni=!1,Ru=!1,yr=0,lt=0,$r=0,ya=0,Tu=0,vn=0,ri=0,cs=null,ln=null,Cu=!1,Yl=0,hp=0,Kl=1/0,Jl=null,Hr=null,Et=0,Gr=null,ai=null,br=0,Au=0,Ou=null,fp=null,us=0,Nu=null;function yn(){return(He&2)!==0&&ze!==0?ze&-ze:z.T!==null?Lu():qn()}function gp(){if(vn===0)if((ze&536870912)===0||Be){var e=Ta;Ta<<=1,(Ta&3932160)===0&&(Ta=262144),vn=e}else vn=536870912;return e=gn.current,e!==null&&(e.flags|=32),vn}function on(e,t,i){(e===Qe&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(ii(e,0),Pr(e,ze,vn,!1)),Sn(e,i),((He&2)===0||e!==Qe)&&(e===Qe&&((He&2)===0&&(ya|=i),lt===4&&Pr(e,ze,vn,!1)),Wn(e))}function pp(e,t,i){if((He&6)!==0)throw Error(s(327));var l=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Wt(e,t),d=l?Tb(e,t):ku(e,t,!0),f=l;do{if(d===0){ni&&!l&&Pr(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!Eb(i)){d=ku(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var S=e;d=cs;var N=S.current.memoizedState.isDehydrated;if(N&&(ii(S,b).flags|=256),b=ku(S,b,!1),b!==2){if(Ru&&!N){S.errorRecoveryDisabledLanes|=f,ya|=f,d=4;break e}f=ln,ln=d,f!==null&&(ln===null?ln=f:ln.push.apply(ln,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){ii(e,0),Pr(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Pr(l,t,vn,!qr);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(d=Yl+300-ge(),10<d)){if(Pr(l,t,vn,!qr),Nt(l,0,!0)!==0)break e;br=t,l.timeoutHandle=Yp(mp.bind(null,l,i,ln,Jl,Cu,t,vn,ya,ri,qr,f,"Throttled",-0,0),d);break e}mp(l,i,ln,Jl,Cu,t,vn,ya,ri,qr,f,null,-0,0)}}break}while(!0);Wn(e)}function mp(e,t,i,l,d,f,b,S,N,P,Q,F,Y,K){if(e.timeoutHandle=-1,F=t.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ar},op(t,f,F);var oe=(f&62914560)===f?Yl-ge():(f&4194048)===f?hp-ge():0;if(oe=cx(F,oe),oe!==null){br=f,e.cancelPendingCommit=oe(jp.bind(null,e,t,f,i,l,d,b,S,N,Q,F,null,Y,K)),Pr(e,f,b,!P);return}}jp(e,t,f,i,l,d,b,S,N)}function Eb(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!hn(f(),d))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t,i,l){t&=~Tu,t&=~ya,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-_t(d),b=1<<f;l[f]=-1,d&=~b}i!==0&&In(e,i,t)}function Ql(){return(He&6)===0?(ds(0),!1):!0}function Du(){if(Ue!==null){if(Ge===0)var e=Ue.return;else e=Ue,or=ca=null,Jc(e),Qa=null,Ki=0,e=Ue;for(;e!==null;)Kg(e.alternate,e),e=e.return;Ue=null}}function ii(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Vb(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),br=0,Du(),Qe=e,Ue=i=sr(e.current,null),ze=t,Ge=0,mn=null,qr=!1,ni=Wt(e,t),Ru=!1,ri=vn=Tu=ya=$r=lt=0,ln=cs=null,Cu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-_t(l),f=1<<d;t|=e[d],l&=~f}return yr=t,ml(),i}function vp(e,t){Te=null,z.H=ts,t===Ja||t===jl?(t=kf(),Ge=3):t===zc?(t=kf(),Ge=4):Ge=t===uu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,mn=t,Ue===null&&(lt=1,Bl(e,Cn(t,e.current)))}function yp(){var e=gn.current;return e===null?!0:(ze&4194048)===ze?Dn===null:(ze&62914560)===ze||(ze&536870912)!==0?e===Dn:!1}function bp(){var e=z.H;return z.H=ts,e===null?ts:e}function xp(){var e=z.A;return z.A=_b,e}function Xl(){lt=4,qr||(ze&4194048)!==ze&&gn.current!==null||(ni=!0),($r&134217727)===0&&(ya&134217727)===0||Qe===null||Pr(Qe,ze,vn,!1)}function ku(e,t,i){var l=He;He|=2;var d=bp(),f=xp();(Qe!==e||ze!==t)&&(Jl=null,ii(e,t)),t=!1;var b=lt;e:do try{if(Ge!==0&&Ue!==null){var S=Ue,N=mn;switch(Ge){case 8:Du(),b=6;break e;case 3:case 2:case 9:case 6:gn.current===null&&(t=!0);var P=Ge;if(Ge=0,mn=null,si(e,S,N,P),i&&ni){b=0;break e}break;default:P=Ge,Ge=0,mn=null,si(e,S,N,P)}}Rb(),b=lt;break}catch(Q){vp(e,Q)}while(!0);return t&&e.shellSuspendCounter++,or=ca=null,He=l,z.H=d,z.A=f,Ue===null&&(Qe=null,ze=0,ml()),b}function Rb(){for(;Ue!==null;)wp(Ue)}function Tb(e,t){var i=He;He|=2;var l=bp(),d=xp();Qe!==e||ze!==t?(Jl=null,Kl=ge()+500,ii(e,t)):ni=Wt(e,t);e:do try{if(Ge!==0&&Ue!==null){t=Ue;var f=mn;t:switch(Ge){case 1:Ge=0,mn=null,si(e,t,f,1);break;case 2:case 9:if(Nf(f)){Ge=0,mn=null,Sp(t);break}t=function(){Ge!==2&&Ge!==9||Qe!==e||(Ge=7),Wn(e)},f.then(t,t);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Nf(f)?(Ge=0,mn=null,Sp(t)):(Ge=0,mn=null,si(e,t,f,7));break;case 5:var b=null;switch(Ue.tag){case 26:b=Ue.memoizedState;case 5:case 27:var S=Ue;if(b?lm(b):S.stateNode.complete){Ge=0,mn=null;var N=S.sibling;if(N!==null)Ue=N;else{var P=S.return;P!==null?(Ue=P,Zl(P)):Ue=null}break t}}Ge=0,mn=null,si(e,t,f,5);break;case 6:Ge=0,mn=null,si(e,t,f,6);break;case 8:Du(),lt=6;break e;default:throw Error(s(462))}}Cb();break}catch(Q){vp(e,Q)}while(!0);return or=ca=null,z.H=l,z.A=d,He=i,Ue!==null?0:(Qe=null,ze=0,ml(),lt)}function Cb(){for(;Ue!==null&&!ue();)wp(Ue)}function wp(e){var t=Vg(e.alternate,e,yr);e.memoizedProps=e.pendingProps,t===null?Zl(e):Ue=t}function Sp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Ig(i,t,t.pendingProps,t.type,void 0,ze);break;case 11:t=Ig(i,t,t.pendingProps,t.type.render,t.ref,ze);break;case 5:Jc(t);default:Kg(i,t),t=Ue=xf(t,yr),t=Vg(i,t,yr)}e.memoizedProps=e.pendingProps,t===null?Zl(e):Ue=t}function si(e,t,i,l){or=ca=null,Jc(t),Qa=null,Ki=0;var d=t.return;try{if(mb(e,d,t,i,ze)){lt=1,Bl(e,Cn(i,e.current)),Ue=null;return}}catch(f){if(d!==null)throw Ue=d,f;lt=1,Bl(e,Cn(i,e.current)),Ue=null;return}t.flags&32768?(Be||l===1?e=!0:ni||(ze&536870912)!==0?e=!1:(qr=e=!0,(l===2||l===9||l===3||l===6)&&(l=gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),_p(t,e)):Zl(t)}function Zl(e){var t=e;do{if((t.flags&32768)!==0){_p(t,qr);return}e=t.return;var i=bb(t.alternate,t,yr);if(i!==null){Ue=i;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);lt===0&&(lt=5)}function _p(e,t){do{var i=xb(e.alternate,e);if(i!==null){i.flags&=32767,Ue=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=i}while(e!==null);lt=6,Ue=null}function jp(e,t,i,l,d,f,b,S,N){e.cancelPendingCommit=null;do Wl();while(Et!==0);if((He&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=wc,jt(e,i,f,b,S,N),e===Qe&&(Ue=Qe=null,ze=0),ai=t,Gr=e,br=i,Au=f,Ou=d,fp=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Db(de,function(){return Ap(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,d=J.p,J.p=2,b=He,He|=4;try{wb(e,t,i)}finally{He=b,J.p=d,z.T=l}}Et=1,Ep(),Rp(),Tp()}}function Ep(){if(Et===1){Et=0;var e=Gr,t=ai,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=z.T,z.T=null;var l=J.p;J.p=2;var d=He;He|=4;try{ip(t,e);var f=Vu,b=df(e.containerInfo),S=f.focusedElem,N=f.selectionRange;if(b!==S&&S&&S.ownerDocument&&uf(S.ownerDocument.documentElement,S)){if(N!==null&&mc(S)){var P=N.start,Q=N.end;if(Q===void 0&&(Q=P),"selectionStart"in S)S.selectionStart=P,S.selectionEnd=Math.min(Q,S.value.length);else{var F=S.ownerDocument||document,Y=F&&F.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),oe=S.textContent.length,we=Math.min(N.start,oe),Je=N.end===void 0?we:Math.min(N.end,oe);!K.extend&&we>Je&&(b=Je,Je=we,we=b);var $=cf(S,we),M=cf(S,Je);if($&&M&&(K.rangeCount!==1||K.anchorNode!==$.node||K.anchorOffset!==$.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var G=F.createRange();G.setStart($.node,$.offset),K.removeAllRanges(),we>Je?(K.addRange(G),K.extend(M.node,M.offset)):(G.setEnd(M.node,M.offset),K.addRange(G))}}}}for(F=[],K=S;K=K.parentNode;)K.nodeType===1&&F.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<F.length;S++){var X=F[S];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}uo=!!Pu,Vu=Pu=null}finally{He=d,J.p=l,z.T=i}}e.current=t,Et=2}}function Rp(){if(Et===2){Et=0;var e=Gr,t=ai,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=z.T,z.T=null;var l=J.p;J.p=2;var d=He;He|=4;try{ep(e,t.alternate,t)}finally{He=d,J.p=l,z.T=i}}Et=3}}function Tp(){if(Et===4||Et===3){Et=0,xe();var e=Gr,t=ai,i=br,l=fp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Et=5:(Et=0,ai=Gr=null,Cp(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Hr=null),nr(i),t=t.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(nt,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=z.T,d=J.p,J.p=2,z.T=null;try{for(var f=e.onRecoverableError,b=0;b<l.length;b++){var S=l[b];f(S.value,{componentStack:S.stack})}}finally{z.T=t,J.p=d}}(br&3)!==0&&Wl(),Wn(e),d=e.pendingLanes,(i&261930)!==0&&(d&42)!==0?e===Nu?us++:(us=0,Nu=e):us=0,ds(0)}}function Cp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vi(t)))}function Wl(){return Ep(),Rp(),Tp(),Ap()}function Ap(){if(Et!==5)return!1;var e=Gr,t=Au;Au=0;var i=nr(br),l=z.T,d=J.p;try{J.p=32>i?32:i,z.T=null,i=Ou,Ou=null;var f=Gr,b=br;if(Et=0,ai=Gr=null,br=0,(He&6)!==0)throw Error(s(331));var S=He;if(He|=4,up(f.current),lp(f,f.current,b,i),He=S,ds(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(nt,f)}catch{}return!0}finally{J.p=d,z.T=l,Cp(e,t)}}function Op(e,t,i){t=Cn(i,t),t=cu(e.stateNode,t,2),e=zr(e,t,2),e!==null&&(Sn(e,2),Wn(e))}function Pe(e,t,i){if(e.tag===3)Op(e,e,i);else for(;t!==null;){if(t.tag===3){Op(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hr===null||!Hr.has(l))){e=Cn(i,e),i=Ng(2),l=zr(t,i,2),l!==null&&(Dg(i,l,t,e),Sn(l,2),Wn(l));break}}t=t.return}}function Uu(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new jb;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(Ru=!0,d.add(i),e=Ab.bind(null,e,t,i),t.then(e,e))}function Ab(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Qe===e&&(ze&i)===i&&(lt===4||lt===3&&(ze&62914560)===ze&&300>ge()-Yl?(He&2)===0&&ii(e,0):Tu|=i,ri===ze&&(ri=0)),Wn(e)}function Np(e,t){t===0&&(t=Kt()),e=sa(e,t),e!==null&&(Sn(e,t),Wn(e))}function Ob(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Np(e,i)}function Nb(e,t){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),Np(e,i)}function Db(e,t){return wt(e,t)}var Fl=null,li=null,Mu=!1,eo=!1,zu=!1,Vr=0;function Wn(e){e!==li&&e.next===null&&(li===null?Fl=li=e:li=li.next=e),eo=!0,Mu||(Mu=!0,Ub())}function ds(e,t){if(!zu&&eo){zu=!0;do for(var i=!1,l=Fl;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var b=l.suspendedLanes,S=l.pingedLanes;f=(1<<31-_t(42|e)+1)-1,f&=d&~(b&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Mp(l,f))}else f=ze,f=Nt(l,l===Qe?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Wt(l,f)||(i=!0,Mp(l,f));l=l.next}while(i);zu=!1}}function kb(){Dp()}function Dp(){eo=Mu=!1;var e=0;Vr!==0&&Pb()&&(e=Vr);for(var t=ge(),i=null,l=Fl;l!==null;){var d=l.next,f=kp(l,t);f===0?(l.next=null,i===null?Fl=d:i.next=d,d===null&&(li=i)):(i=l,(e!==0||(f&3)!==0)&&(eo=!0)),l=d}Et!==0&&Et!==5||ds(e),Vr!==0&&(Vr=0)}function kp(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-_t(f),S=1<<b,N=d[b];N===-1?((S&i)===0||(S&l)!==0)&&(d[b]=Ft(S,t)):N<=t&&(e.expiredLanes|=S),f&=~S}if(t=Qe,i=ze,i=Nt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&le(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Wt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&le(l),nr(i)){case 2:case 8:i=V;break;case 32:i=de;break;case 268435456:i=ye;break;default:i=de}return l=Up.bind(null,e),i=wt(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&le(l),e.callbackPriority=2,e.callbackNode=null,2}function Up(e,t){if(Et!==0&&Et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Wl()&&e.callbackNode!==i)return null;var l=ze;return l=Nt(e,e===Qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(pp(e,l,t),kp(e,ge()),e.callbackNode!=null&&e.callbackNode===i?Up.bind(null,e):null)}function Mp(e,t){if(Wl())return null;pp(e,t,!0)}function Ub(){Yb(function(){(He&6)!==0?wt(pt,kb):Dp()})}function Lu(){if(Vr===0){var e=Ya;e===0&&(e=Tr,Tr<<=1,(Tr&261888)===0&&(Tr=256)),Vr=e}return Vr}function zp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ol(""+e)}function Lp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Mb(e,t,i,l,d){if(t==="submit"&&i&&i.stateNode===d){var f=zp((d[tn]||null).action),b=l.submitter;b&&(t=(t=b[tn]||null)?zp(t.formAction):b.getAttribute("formAction"),t!==null&&(f=t,b=null));var S=new hl("action","action",null,l,d);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Vr!==0){var N=b?Lp(d,b):new FormData(d);ru(i,{pending:!0,data:N,method:d.method,action:f},null,N)}}else typeof f=="function"&&(S.preventDefault(),N=b?Lp(d,b):new FormData(d),ru(i,{pending:!0,data:N,method:d.method,action:f},f,N))},currentTarget:d}]})}}for(var Bu=0;Bu<xc.length;Bu++){var Iu=xc[Bu],zb=Iu.toLowerCase(),Lb=Iu[0].toUpperCase()+Iu.slice(1);$n(zb,"on"+Lb)}$n(gf,"onAnimationEnd"),$n(pf,"onAnimationIteration"),$n(mf,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(F0,"onTransitionRun"),$n(eb,"onTransitionStart"),$n(tb,"onTransitionCancel"),$n(vf,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hs));function Bp(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var b=l.length-1;0<=b;b--){var S=l[b],N=S.instance,P=S.currentTarget;if(S=S.listener,N!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=P;try{f(d)}catch(Q){pl(Q)}d.currentTarget=null,f=N}else for(b=0;b<l.length;b++){if(S=l[b],N=S.instance,P=S.currentTarget,S=S.listener,N!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=P;try{f(d)}catch(Q){pl(Q)}d.currentTarget=null,f=N}}}}function Me(e,t){var i=t[Wo];i===void 0&&(i=t[Wo]=new Set);var l=e+"__bubble";i.has(l)||(Ip(t,e,2,!1),i.add(l))}function qu(e,t,i){var l=0;t&&(l|=4),Ip(i,e,l,t)}var to="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[to]){e[to]=!0,Nh.forEach(function(i){i!=="selectionchange"&&(Bb.has(i)||qu(i,!1,e),qu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[to]||(t[to]=!0,qu("selectionchange",!1,t))}}function Ip(e,t,i,l){switch(gm(t)){case 2:var d=hx;break;case 8:d=fx;break;default:d=nd}i=d.bind(null,t,i,e),d=void 0,!lc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function Hu(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var S=l.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=l.return;b!==null;){var N=b.tag;if((N===3||N===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=Aa(S),b===null)return;if(N=b.tag,N===5||N===6||N===26||N===27){l=f=b;continue e}S=S.parentNode}}l=l.return}Gh(function(){var P=f,Q=ic(i),F=[];e:{var Y=yf.get(e);if(Y!==void 0){var K=hl,oe=e;switch(e){case"keypress":if(ul(i)===0)break e;case"keydown":case"keyup":K=N0;break;case"focusin":oe="focus",K=dc;break;case"focusout":oe="blur",K=dc;break;case"beforeblur":case"afterblur":K=dc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Yh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=U0;break;case gf:case pf:case mf:K=S0;break;case vf:K=z0;break;case"scroll":case"scrollend":K=v0;break;case"wheel":K=B0;break;case"copy":case"cut":case"paste":K=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Jh;break;case"toggle":case"beforetoggle":K=q0}var we=(t&4)!==0,Je=!we&&(e==="scroll"||e==="scrollend"),$=we?Y!==null?Y+"Capture":null:Y;we=[];for(var M=P,G;M!==null;){var X=M;if(G=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||G===null||$===null||(X=Ui(M,$),X!=null&&we.push(fs(M,X,G))),Je)break;M=M.return}0<we.length&&(Y=new K(Y,oe,null,i,Q),F.push({event:Y,listeners:we}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Y&&i!==ac&&(oe=i.relatedTarget||i.fromElement)&&(Aa(oe)||oe[Ca]))break e;if((K||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(oe=i.relatedTarget||i.toElement,K=P,oe=oe?Aa(oe):null,oe!==null&&(Je=u(oe),we=oe.tag,oe!==Je||we!==5&&we!==27&&we!==6)&&(oe=null)):(K=null,oe=P),K!==oe)){if(we=Yh,X="onMouseLeave",$="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(we=Jh,X="onPointerLeave",$="onPointerEnter",M="pointer"),Je=K==null?Y:ki(K),G=oe==null?Y:ki(oe),Y=new we(X,M+"leave",K,i,Q),Y.target=Je,Y.relatedTarget=G,X=null,Aa(Q)===P&&(we=new we($,M+"enter",oe,i,Q),we.target=G,we.relatedTarget=Je,X=we),Je=X,K&&oe)t:{for(we=Ib,$=K,M=oe,G=0,X=$;X;X=we(X))G++;X=0;for(var be=M;be;be=we(be))X++;for(;0<G-X;)$=we($),G--;for(;0<X-G;)M=we(M),X--;for(;G--;){if($===M||M!==null&&$===M.alternate){we=$;break t}$=we($),M=we(M)}we=null}else we=null;K!==null&&qp(F,Y,K,we,!1),oe!==null&&Je!==null&&qp(F,Je,oe,we,!0)}}e:{if(Y=P?ki(P):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var qe=nf;else if(ef(Y))if(rf)qe=X0;else{qe=J0;var he=K0}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?P&&rc(P.elementType)&&(qe=nf):qe=Q0;if(qe&&(qe=qe(e,P))){tf(F,qe,i,Q);break e}he&&he(e,Y,P),e==="focusout"&&P&&Y.type==="number"&&P.memoizedProps.value!=null&&nc(Y,"number",Y.value)}switch(he=P?ki(P):window,e){case"focusin":(ef(he)||he.contentEditable==="true")&&(Ba=he,vc=P,Hi=null);break;case"focusout":Hi=vc=Ba=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,hf(F,i,Q);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":hf(F,i,Q)}var Oe;if(fc)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else La?Wh(e,i)&&(Le="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(Qh&&i.locale!=="ko"&&(La||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&La&&(Oe=Ph()):(Ar=Q,oc="value"in Ar?Ar.value:Ar.textContent,La=!0)),he=no(P,Le),0<he.length&&(Le=new Kh(Le,e,null,i,Q),F.push({event:Le,listeners:he}),Oe?Le.data=Oe:(Oe=Fh(i),Oe!==null&&(Le.data=Oe)))),(Oe=H0?G0(e,i):P0(e,i))&&(Le=no(P,"onBeforeInput"),0<Le.length&&(he=new Kh("onBeforeInput","beforeinput",null,i,Q),F.push({event:he,listeners:Le}),he.data=Oe)),Mb(F,e,P,i,Q)}Bp(F,t)})}function fs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function no(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Ui(e,i),d!=null&&l.unshift(fs(e,d,f)),d=Ui(e,t),d!=null&&l.push(fs(e,d,f))),e.tag===3)return l;e=e.return}return[]}function Ib(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qp(e,t,i,l,d){for(var f=t._reactName,b=[];i!==null&&i!==l;){var S=i,N=S.alternate,P=S.stateNode;if(S=S.tag,N!==null&&N===l)break;S!==5&&S!==26&&S!==27||P===null||(N=P,d?(P=Ui(i,f),P!=null&&b.unshift(fs(i,P,N))):d||(P=Ui(i,f),P!=null&&b.push(fs(i,P,N)))),i=i.return}b.length!==0&&e.push({event:t,listeners:b})}var qb=/\r\n?/g,$b=/\u0000|\uFFFD/g;function $p(e){return(typeof e=="string"?e:""+e).replace(qb,`
`).replace($b,"")}function Hp(e,t){return t=$p(t),$p(e)===t}function Ke(e,t,i,l,d,f){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ua(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ua(e,""+l);break;case"className":sl(e,"class",l);break;case"tabIndex":sl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sl(e,i,l);break;case"style":$h(e,l,f);break;case"data":if(t!=="object"){sl(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ol(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Ke(e,t,"name",d.name,d,null),Ke(e,t,"formEncType",d.formEncType,d,null),Ke(e,t,"formMethod",d.formMethod,d,null),Ke(e,t,"formTarget",d.formTarget,d,null)):(Ke(e,t,"encType",d.encType,d,null),Ke(e,t,"method",d.method,d,null),Ke(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ol(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=ar);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ol(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Me("beforetoggle",e),Me("toggle",e),il(e,"popover",l);break;case"xlinkActuate":rr(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":rr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":rr(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":rr(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":rr(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":rr(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":rr(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":rr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":rr(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":il(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=p0.get(i)||i,il(e,i,l))}}function Gu(e,t,i,l,d,f){switch(i){case"style":$h(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Ua(e,l):(typeof l=="number"||typeof l=="bigint")&&Ua(e,""+l);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),t=i.slice(2,d?i.length-7:void 0),f=e[tn]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,d);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):il(e,i,l)}}}function qt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var l=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var b=i[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ke(e,t,f,b,i,null)}}d&&Ke(e,t,"srcSet",i.srcSet,i,null),l&&Ke(e,t,"src",i.src,i,null);return;case"input":Me("invalid",e);var S=f=b=d=null,N=null,P=null;for(l in i)if(i.hasOwnProperty(l)){var Q=i[l];if(Q!=null)switch(l){case"name":d=Q;break;case"type":b=Q;break;case"checked":N=Q;break;case"defaultChecked":P=Q;break;case"value":f=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,t));break;default:Ke(e,t,l,Q,i,null)}}Lh(e,f,S,N,P,b,d,!1);return;case"select":Me("invalid",e),l=b=f=null;for(d in i)if(i.hasOwnProperty(d)&&(S=i[d],S!=null))switch(d){case"value":f=S;break;case"defaultValue":b=S;break;case"multiple":l=S;default:Ke(e,t,d,S,i,null)}t=f,i=b,e.multiple=!!l,t!=null?ka(e,!!l,t,!1):i!=null&&ka(e,!!l,i,!0);return;case"textarea":Me("invalid",e),f=d=l=null;for(b in i)if(i.hasOwnProperty(b)&&(S=i[b],S!=null))switch(b){case"value":l=S;break;case"defaultValue":d=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Ke(e,t,b,S,i,null)}Ih(e,l,d,f);return;case"option":for(N in i)i.hasOwnProperty(N)&&(l=i[N],l!=null)&&(N==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Ke(e,t,N,l,i,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(l=0;l<hs.length;l++)Me(hs[l],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in i)if(i.hasOwnProperty(P)&&(l=i[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ke(e,t,P,l,i,null)}return;default:if(rc(t)){for(Q in i)i.hasOwnProperty(Q)&&(l=i[Q],l!==void 0&&Gu(e,t,Q,l,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(l=i[S],l!=null&&Ke(e,t,S,l,i,null))}function Hb(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,S=null,N=null,P=null,Q=null;for(K in i){var F=i[K];if(i.hasOwnProperty(K)&&F!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=F;default:l.hasOwnProperty(K)||Ke(e,t,K,null,l,F)}}for(var Y in l){var K=l[Y];if(F=i[Y],l.hasOwnProperty(Y)&&(K!=null||F!=null))switch(Y){case"type":f=K;break;case"name":d=K;break;case"checked":P=K;break;case"defaultChecked":Q=K;break;case"value":b=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,t));break;default:K!==F&&Ke(e,t,Y,K,l,F)}}tc(e,b,S,N,P,Q,f,d);return;case"select":K=b=S=Y=null;for(f in i)if(N=i[f],i.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":K=N;default:l.hasOwnProperty(f)||Ke(e,t,f,null,l,N)}for(d in l)if(f=l[d],N=i[d],l.hasOwnProperty(d)&&(f!=null||N!=null))switch(d){case"value":Y=f;break;case"defaultValue":S=f;break;case"multiple":b=f;default:f!==N&&Ke(e,t,d,f,l,N)}t=S,i=b,l=K,Y!=null?ka(e,!!i,Y,!1):!!l!=!!i&&(t!=null?ka(e,!!i,t,!0):ka(e,!!i,i?[]:"",!1));return;case"textarea":K=Y=null;for(S in i)if(d=i[S],i.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ke(e,t,S,null,l,d)}for(b in l)if(d=l[b],f=i[b],l.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":Y=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&Ke(e,t,b,d,l,f)}Bh(e,Y,K);return;case"option":for(var oe in i)Y=i[oe],i.hasOwnProperty(oe)&&Y!=null&&!l.hasOwnProperty(oe)&&(oe==="selected"?e.selected=!1:Ke(e,t,oe,null,l,Y));for(N in l)Y=l[N],K=i[N],l.hasOwnProperty(N)&&Y!==K&&(Y!=null||K!=null)&&(N==="selected"?e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Ke(e,t,N,Y,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in i)Y=i[we],i.hasOwnProperty(we)&&Y!=null&&!l.hasOwnProperty(we)&&Ke(e,t,we,null,l,Y);for(P in l)if(Y=l[P],K=i[P],l.hasOwnProperty(P)&&Y!==K&&(Y!=null||K!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,t));break;default:Ke(e,t,P,Y,l,K)}return;default:if(rc(t)){for(var Je in i)Y=i[Je],i.hasOwnProperty(Je)&&Y!==void 0&&!l.hasOwnProperty(Je)&&Gu(e,t,Je,void 0,l,Y);for(Q in l)Y=l[Q],K=i[Q],!l.hasOwnProperty(Q)||Y===K||Y===void 0&&K===void 0||Gu(e,t,Q,Y,l,K);return}}for(var $ in i)Y=i[$],i.hasOwnProperty($)&&Y!=null&&!l.hasOwnProperty($)&&Ke(e,t,$,null,l,Y);for(F in l)Y=l[F],K=i[F],!l.hasOwnProperty(F)||Y===K||Y==null&&K==null||Ke(e,t,F,Y,l,K)}function Gp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var d=i[l],f=d.transferSize,b=d.initiatorType,S=d.duration;if(f&&S&&Gp(b)){for(b=0,S=d.responseEnd,l+=1;l<i.length;l++){var N=i[l],P=N.startTime;if(P>S)break;var Q=N.transferSize,F=N.initiatorType;Q&&Gp(F)&&(N=N.responseEnd,b+=Q*(N<S?1:(S-P)/(N-P)))}if(--l,t+=8*(f+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Pu=null,Vu=null;function ro(e){return e.nodeType===9?e:e.ownerDocument}function Pp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ku=null;function Pb(){var e=window.event;return e&&e.type==="popstate"?e===Ku?!1:(Ku=e,!0):(Ku=null,!1)}var Yp=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(e){return Kp.resolve(null).then(e).catch(Kb)}:Yp;function Kb(e){setTimeout(function(){throw e})}function Yr(e){return e==="head"}function Jp(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(d),di(t);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")gs(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,gs(i);for(var f=i.firstChild;f;){var b=f.nextSibling,S=f.nodeName;f[Di]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=b}}else i==="body"&&gs(e.ownerDocument.body);i=d}while(i);di(t)}function Qp(e,t){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Ju(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ju(i),Fo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Jb(e,t,i,l){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Di])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function Qb(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=kn(e.nextSibling),e===null))return null;return e}function Xp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=kn(e.nextSibling),e===null))return null;return e}function Qu(e){return e.data==="$?"||e.data==="$~"}function Xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Xb(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Zu=null;function Zp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return kn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Wp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Fp(e,t,i){switch(t=ro(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fo(e)}var Un=new Map,em=new Set;function ao(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xr=J.d;J.d={f:Zb,r:Wb,D:Fb,C:ex,L:tx,m:nx,X:ax,S:rx,M:ix};function Zb(){var e=xr.f(),t=Ql();return e||t}function Wb(e){var t=Oa(e);t!==null&&t.tag===5&&t.type==="form"?vg(t):xr.r(e)}var oi=typeof document>"u"?null:document;function tm(e,t,i){var l=oi;if(l&&typeof t=="string"&&t){var d=Rn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),em.has(d)||(em.add(d),e={rel:e,crossOrigin:i,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),qt(t,"link",e),Dt(t),l.head.appendChild(t)))}}function Fb(e){xr.D(e),tm("dns-prefetch",e,null)}function ex(e,t){xr.C(e,t),tm("preconnect",e,t)}function tx(e,t,i){xr.L(e,t,i);var l=oi;if(l&&e&&t){var d='link[rel="preload"][as="'+Rn(t)+'"]';t==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Rn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Rn(i.imageSizes)+'"]')):d+='[href="'+Rn(e)+'"]';var f=d;switch(t){case"style":f=ci(e);break;case"script":f=ui(e)}Un.has(f)||(e=y({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Un.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(ps(f))||t==="script"&&l.querySelector(ms(f))||(t=l.createElement("link"),qt(t,"link",e),Dt(t),l.head.appendChild(t)))}}function nx(e,t){xr.m(e,t);var i=oi;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ui(e)}if(!Un.has(f)&&(e=y({rel:"modulepreload",href:e},t),Un.set(f,e),i.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ms(f)))return}l=i.createElement("link"),qt(l,"link",e),Dt(l),i.head.appendChild(l)}}}function rx(e,t,i){xr.S(e,t,i);var l=oi;if(l&&e){var d=Na(l).hoistableStyles,f=ci(e);t=t||"default";var b=d.get(f);if(!b){var S={loading:0,preload:null};if(b=l.querySelector(ps(f)))S.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Un.get(f))&&Wu(e,i);var N=b=l.createElement("link");Dt(N),qt(N,"link",e),N._p=new Promise(function(P,Q){N.onload=P,N.onerror=Q}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,io(b,t,l)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(f,b)}}}function ax(e,t){xr.X(e,t);var i=oi;if(i&&e){var l=Na(i).hoistableScripts,d=ui(e),f=l.get(d);f||(f=i.querySelector(ms(d)),f||(e=y({src:e,async:!0},t),(t=Un.get(d))&&Fu(e,t),f=i.createElement("script"),Dt(f),qt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function ix(e,t){xr.M(e,t);var i=oi;if(i&&e){var l=Na(i).hoistableScripts,d=ui(e),f=l.get(d);f||(f=i.querySelector(ms(d)),f||(e=y({src:e,async:!0,type:"module"},t),(t=Un.get(d))&&Fu(e,t),f=i.createElement("script"),Dt(f),qt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function nm(e,t,i,l){var d=(d=ve.current)?ao(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=ci(i.href),i=Na(d).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ci(i.href);var f=Na(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector(ps(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Un.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Un.set(e,i),f||sx(d,e,i,b.state))),t&&l===null)throw Error(s(528,""));return b}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ui(i),i=Na(d).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ci(e){return'href="'+Rn(e)+'"'}function ps(e){return'link[rel="stylesheet"]['+e+"]"}function rm(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function sx(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),qt(t,"link",i),Dt(t),e.head.appendChild(t))}function ui(e){return'[src="'+Rn(e)+'"]'}function ms(e){return"script[async]"+e}function am(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Rn(i.href)+'"]');if(l)return t.instance=l,Dt(l),l;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Dt(l),qt(l,"style",d),io(l,i.precedence,e),t.instance=l;case"stylesheet":d=ci(i.href);var f=e.querySelector(ps(d));if(f)return t.state.loading|=4,t.instance=f,Dt(f),f;l=rm(i),(d=Un.get(d))&&Wu(l,d),f=(e.ownerDocument||e).createElement("link"),Dt(f);var b=f;return b._p=new Promise(function(S,N){b.onload=S,b.onerror=N}),qt(f,"link",l),t.state.loading|=4,io(f,i.precedence,e),t.instance=f;case"script":return f=ui(i.src),(d=e.querySelector(ms(f)))?(t.instance=d,Dt(d),d):(l=i,(d=Un.get(f))&&(l=y({},i),Fu(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Dt(d),qt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,io(l,i.precedence,e));return t.instance}function io(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,b=0;b<l.length;b++){var S=l[b];if(S.dataset.precedence===t)f=S;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Wu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Fu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var so=null;function im(e,t,i){if(so===null){var l=new Map,d=so=new Map;d.set(i,l)}else d=so,l=d.get(i),l||(l=new Map,d.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[Di]||f[zt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(t)||"";b=e+b;var S=l.get(b);S?S.push(f):l.set(b,[f])}}return l}function sm(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function lx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function lm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ox(e,t,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=ci(l.href),f=t.querySelector(ps(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=lo.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,Dt(f);return}f=t.ownerDocument||t,l=rm(l),(d=Un.get(d))&&Wu(l,d),f=f.createElement("link"),Dt(f);var b=f;b._p=new Promise(function(S,N){b.onload=S,b.onerror=N}),qt(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=lo.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var ed=0;function cx(e,t){return e.stylesheets&&e.count===0&&co(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&co(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&ed===0&&(ed=62500*Gb());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&co(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>ed?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function lo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oo=null;function co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oo=new Map,t.forEach(ux,e),oo=null,lo.call(e))}function ux(e,t){if(!(t.state.loading&4)){var i=oo.get(e);if(i)var l=i.get(null);else{i=new Map,oo.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),l=b)}l&&i.set(null,l)}d=t.instance,b=d.getAttribute("data-precedence"),f=i.get(b)||l,f===l&&i.set(null,d),i.set(b,d),this.count++,l=lo.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var vs={$$typeof:A,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function dx(e,t,i,l,d,f,b,S,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function om(e,t,i,l,d,f,b,S,N,P,Q,F){return e=new dx(e,t,i,b,N,P,Q,F,S),t=1,f===!0&&(t|=24),f=fn(3,null,null,t),e.current=f,f.stateNode=e,t=kc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:t},Lc(f),e}function cm(e){return e?(e=$a,e):$a}function um(e,t,i,l,d,f){d=cm(d),l.context===null?l.context=d:l.pendingContext=d,l=Mr(t),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=zr(e,l,t),i!==null&&(on(i,e,t),Qi(i,e,t))}function dm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function td(e,t){dm(e,t),(e=e.alternate)&&dm(e,t)}function hm(e){if(e.tag===13||e.tag===31){var t=sa(e,67108864);t!==null&&on(t,e,67108864),td(e,67108864)}}function fm(e){if(e.tag===13||e.tag===31){var t=yn();t=tr(t);var i=sa(e,t);i!==null&&on(i,e,t),td(e,t)}}var uo=!0;function hx(e,t,i,l){var d=z.T;z.T=null;var f=J.p;try{J.p=2,nd(e,t,i,l)}finally{J.p=f,z.T=d}}function fx(e,t,i,l){var d=z.T;z.T=null;var f=J.p;try{J.p=8,nd(e,t,i,l)}finally{J.p=f,z.T=d}}function nd(e,t,i,l){if(uo){var d=rd(l);if(d===null)Hu(e,t,l,ho,i),pm(e,l);else if(px(d,e,t,i,l))l.stopPropagation();else if(pm(e,l),t&4&&-1<gx.indexOf(e)){for(;d!==null;){var f=Oa(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=ut(f.pendingLanes);if(b!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var N=1<<31-_t(b);S.entanglements[1]|=N,b&=~N}Wn(f),(He&6)===0&&(Kl=ge()+500,ds(0))}}break;case 31:case 13:S=sa(f,2),S!==null&&on(S,f,2),Ql(),td(f,2)}if(f=rd(l),f===null&&Hu(e,t,l,ho,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else Hu(e,t,l,null,i)}}function rd(e){return e=ic(e),ad(e)}var ho=null;function ad(e){if(ho=null,e=Aa(e),e!==null){var t=u(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=p(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ho=e,null}function gm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case pt:return 2;case V:return 8;case de:case je:return 32;case ye:return 268435456;default:return 32}default:return 32}}var id=!1,Kr=null,Jr=null,Qr=null,ys=new Map,bs=new Map,Xr=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pm(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function xs(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Oa(t),t!==null&&hm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function px(e,t,i,l,d){switch(t){case"focusin":return Kr=xs(Kr,e,t,i,l,d),!0;case"dragenter":return Jr=xs(Jr,e,t,i,l,d),!0;case"mouseover":return Qr=xs(Qr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return ys.set(f,xs(ys.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,bs.set(f,xs(bs.get(f)||null,e,t,i,l,d)),!0}return!1}function mm(e){var t=Aa(e.target);if(t!==null){var i=u(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,Cr(e.priority,function(){fm(i)});return}}else if(t===31){if(t=p(i),t!==null){e.blockedOn=t,Cr(e.priority,function(){fm(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=rd(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ac=l,i.target.dispatchEvent(l),ac=null}else return t=Oa(i),t!==null&&hm(t),e.blockedOn=i,!1;t.shift()}return!0}function vm(e,t,i){fo(e)&&i.delete(t)}function mx(){id=!1,Kr!==null&&fo(Kr)&&(Kr=null),Jr!==null&&fo(Jr)&&(Jr=null),Qr!==null&&fo(Qr)&&(Qr=null),ys.forEach(vm),bs.forEach(vm)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,id||(id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mx)))}var po=null;function ym(e){po!==e&&(po=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){po===e&&(po=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(ad(l||i)===null)continue;break}var f=Oa(i);f!==null&&(e.splice(t,3),t-=3,ru(f,{pending:!0,data:d,method:i.method,action:l},l,d))}}))}function di(e){function t(N){return go(N,e)}Kr!==null&&go(Kr,e),Jr!==null&&go(Jr,e),Qr!==null&&go(Qr,e),ys.forEach(t),bs.forEach(t);for(var i=0;i<Xr.length;i++){var l=Xr[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Xr.length&&(i=Xr[0],i.blockedOn===null);)mm(i),i.blockedOn===null&&Xr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var d=i[l],f=i[l+1],b=d[tn]||null;if(typeof f=="function")b||ym(i);else if(b){var S=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[tn]||null)S=b.formAction;else if(ad(d)!==null)continue}else S=b.action;typeof S=="function"?i[l+1]=S:(i.splice(l,3),l-=3),ym(i)}}}function bm(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function sd(e){this._internalRoot=e}mo.prototype.render=sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=yn();um(i,l,e,t,null,null)},mo.prototype.unmount=sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;um(e.current,2,null,e,null,null),Ql(),t[Ca]=null}};function mo(e){this._internalRoot=e}mo.prototype.unstable_scheduleHydration=function(e){if(e){var t=qn();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Xr.length&&t!==0&&t<Xr[i].priority;i++);Xr.splice(i,0,e),i===0&&mm(e)}};var xm=n.version;if(xm!=="19.2.3")throw Error(s(527,xm,"19.2.3"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var vx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{nt=vo.inject(vx),rt=vo}catch{}}return Ss.createRoot=function(e,t){if(!o(e))throw Error(s(299));var i=!1,l="",d=Tg,f=Cg,b=Ag;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=om(e,1,!1,null,null,i,l,null,d,f,b,bm),e[Ca]=t.current,$u(e),new sd(t)},Ss.hydrateRoot=function(e,t,i){if(!o(e))throw Error(s(299));var l=!1,d="",f=Tg,b=Cg,S=Ag,N=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(N=i.formState)),t=om(e,1,!0,t,i??null,l,d,N,f,b,S,bm),t.context=cm(null),i=t.current,l=yn(),l=tr(l),d=Mr(l),d.callback=null,zr(i,d,l),i=l,t.current.lanes=i,Sn(t,i),Wn(t),e[Ca]=t.current,$u(e),new mo(t)},Ss.version="19.2.3",Ss}var Om;function Rx(){if(Om)return cd.exports;Om=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),cd.exports=Ex(),cd.exports}var Tx=Rx();var Nm="popstate";function Cx(r={}){function n(s,o){let{pathname:u,search:h,hash:p}=s.location;return Gd("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(s,o){return typeof o=="string"?o:ks(o)}return Ox(n,a,null,r)}function Ct(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function zn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ax(){return Math.random().toString(36).substring(2,10)}function Dm(r,n){return{usr:r.state,key:r.key,idx:n}}function Gd(r,n,a=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?Ys(n):n,state:a,key:n&&n.key||s||Ax()}}function ks({pathname:r="/",search:n="",hash:a=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Ys(r){let n={};if(r){let a=r.indexOf("#");a>=0&&(n.hash=r.substring(a),r=r.substring(0,a));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function Ox(r,n,a,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,p="POP",g=null,m=v();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function v(){return(h.state||{idx:null}).idx}function y(){p="POP";let T=v(),C=T==null?null:T-m;m=T,g&&g({action:p,location:_.location,delta:C})}function x(T,C){p="PUSH";let E=Gd(_.location,T,C);m=v()+1;let A=Dm(E,m),B=_.createHref(E);try{h.pushState(A,"",B)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(B)}u&&g&&g({action:p,location:_.location,delta:1})}function w(T,C){p="REPLACE";let E=Gd(_.location,T,C);m=v();let A=Dm(E,m),B=_.createHref(E);h.replaceState(A,"",B),u&&g&&g({action:p,location:_.location,delta:0})}function j(T){return Nx(T)}let _={get action(){return p},get location(){return r(o,h)},listen(T){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nm,y),g=T,()=>{o.removeEventListener(Nm,y),g=null}},createHref(T){return n(o,T)},createURL:j,encodeLocation(T){let C=j(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:w,go(T){return h.go(T)}};return _}function Nx(r,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(a,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:ks(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function Vv(r,n,a="/"){return Dx(r,n,a,!1)}function Dx(r,n,a,s){let o=typeof n=="string"?Ys(n):n,u=_r(o.pathname||"/",a);if(u==null)return null;let h=Yv(r);kx(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let m=Px(u);p=Hx(h[g],m,s)}return p}function Yv(r,n=[],a=[],s="",o=!1){let u=(h,p,g=o,m)=>{let v={relativePath:m===void 0?h.path||"":m,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;Ct(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let y=Sr([s,v.relativePath]),x=a.concat(v);h.children&&h.children.length>0&&(Ct(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Yv(h.children,n,x,y,g)),!(h.path==null&&!h.index)&&n.push({path:y,score:qx(y,h.index),routesMeta:x})};return r.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of Kv(h.path))u(h,p,!0,g)}),n}function Kv(r){let n=r.split("/");if(n.length===0)return[];let[a,...s]=n,o=a.endsWith("?"),u=a.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Kv(s.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...h),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function kx(r){r.sort((n,a)=>n.score!==a.score?a.score-n.score:$x(n.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Ux=/^:[\w-]+$/,Mx=3,zx=2,Lx=1,Bx=10,Ix=-2,km=r=>r==="*";function qx(r,n){let a=r.split("/"),s=a.length;return a.some(km)&&(s+=Ix),n&&(s+=zx),a.filter(o=>!km(o)).reduce((o,u)=>o+(Ux.test(u)?Mx:u===""?Lx:Bx),s)}function $x(r,n){return r.length===n.length&&r.slice(0,-1).every((s,o)=>s===n[o])?r[r.length-1]-n[n.length-1]:0}function Hx(r,n,a=!1){let{routesMeta:s}=r,o={},u="/",h=[];for(let p=0;p<s.length;++p){let g=s[p],m=p===s.length-1,v=u==="/"?n:n.slice(u.length)||"/",y=Ao({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},v),x=g.route;if(!y&&m&&a&&!s[s.length-1].route.index&&(y=Ao({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!y)return null;Object.assign(o,y.params),h.push({params:o,pathname:Sr([u,y.pathname]),pathnameBase:Jx(Sr([u,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(u=Sr([u,y.pathnameBase]))}return h}function Ao(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,s]=Gx(r.path,r.caseSensitive,r.end),o=n.match(a);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((m,{paramName:v,isOptional:y},x)=>{if(v==="*"){let j=p[x]||"";h=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const w=p[x];return y&&!w?m[v]=void 0:m[v]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:h,pattern:r}}function Gx(r,n=!1,a=!0){zn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),s]}function Px(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return zn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function _r(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,s=r.charAt(a);return s&&s!=="/"?null:r.slice(a)||"/"}var Jv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=r=>Jv.test(r);function Yx(r,n="/"){let{pathname:a,search:s="",hash:o=""}=typeof r=="string"?Ys(r):r,u;if(a)if(Vx(a))u=a;else{if(a.includes("//")){let h=a;a=a.replace(/\/\/+/g,"/"),zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${a}`)}a.startsWith("/")?u=Um(a.substring(1),"/"):u=Um(a,n)}else u=n;return{pathname:u,search:Qx(s),hash:Xx(o)}}function Um(r,n){let a=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function fd(r,n,a,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kx(r){return r.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function Qv(r){let n=Kx(r);return n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase)}function Xv(r,n,a,s=!1){let o;typeof r=="string"?o=Ys(r):(o={...r},Ct(!o.pathname||!o.pathname.includes("?"),fd("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),fd("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),fd("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=a;else{let y=n.length-1;if(!s&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),y-=1;o.pathname=x.join("/")}p=y>=0?n[y]:"/"}let g=Yx(o,p),m=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&a.endsWith("/");return!g.pathname.endsWith("/")&&(m||v)&&(g.pathname+="/"),g}var Sr=r=>r.join("/").replace(/\/\/+/g,"/"),Jx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Qx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Xx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Zx=class{constructor(r,n,a,s=!1){this.status=r,this.statusText=n||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Wx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function Fx(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Wv(r,n){let a=r;if(typeof a!="string"||!Jv.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,o=!1;if(Zv)try{let u=new URL(window.location.href),h=a.startsWith("//")?new URL(u.protocol+a):new URL(a),p=_r(h.pathname,n);h.origin===u.origin&&p!=null?a=p+h.search+h.hash:o=!0}catch{zn(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Fv=["POST","PUT","PATCH","DELETE"];new Set(Fv);var ew=["GET",...Fv];new Set(ew);var Ti=R.createContext(null);Ti.displayName="DataRouter";var qo=R.createContext(null);qo.displayName="DataRouterState";var tw=R.createContext(!1),ey=R.createContext({isTransitioning:!1});ey.displayName="ViewTransition";var nw=R.createContext(new Map);nw.displayName="Fetchers";var rw=R.createContext(null);rw.displayName="Await";var Bn=R.createContext(null);Bn.displayName="Navigation";var $o=R.createContext(null);$o.displayName="Location";var jr=R.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var oh=R.createContext(null);oh.displayName="RouteError";var ty="REACT_ROUTER_ERROR",aw="REDIRECT",iw="ROUTE_ERROR_RESPONSE";function sw(r){if(r.startsWith(`${ty}:${aw}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function lw(r){if(r.startsWith(`${ty}:${iw}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new Zx(n.status,n.statusText,n.data)}catch{}}function ow(r,{relative:n}={}){Ct(Ks(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=R.useContext(Bn),{hash:o,pathname:u,search:h}=Js(r,{relative:n}),p=u;return a!=="/"&&(p=u==="/"?a:Sr([a,u])),s.createHref({pathname:p,search:h,hash:o})}function Ks(){return R.useContext($o)!=null}function Er(){return Ct(Ks(),"useLocation() may be used only in the context of a <Router> component."),R.useContext($o).location}var ny="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ry(r){R.useContext(Bn).static||R.useLayoutEffect(r)}function ay(){let{isDataRoute:r}=R.useContext(jr);return r?ww():cw()}function cw(){Ct(Ks(),"useNavigate() may be used only in the context of a <Router> component.");let r=R.useContext(Ti),{basename:n,navigator:a}=R.useContext(Bn),{matches:s}=R.useContext(jr),{pathname:o}=Er(),u=JSON.stringify(Qv(s)),h=R.useRef(!1);return ry(()=>{h.current=!0}),R.useCallback((g,m={})=>{if(zn(h.current,ny),!h.current)return;if(typeof g=="number"){a.go(g);return}let v=Xv(g,JSON.parse(u),o,m.relative==="path");r==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Sr([n,v.pathname])),(m.replace?a.replace:a.push)(v,m.state,m)},[n,a,u,o,r])}R.createContext(null);function Js(r,{relative:n}={}){let{matches:a}=R.useContext(jr),{pathname:s}=Er(),o=JSON.stringify(Qv(a));return R.useMemo(()=>Xv(r,JSON.parse(o),s,n==="path"),[r,o,s,n])}function uw(r,n,a,s,o){Ct(Ks(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=R.useContext(Bn),{matches:h}=R.useContext(jr),p=h[h.length-1],g=p?p.params:{},m=p?p.pathname:"/",v=p?p.pathnameBase:"/",y=p&&p.route;{let E=y&&y.path||"";sy(m,!y||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let x=Er(),w;w=x;let j=w.pathname||"/",_=j;if(v!=="/"){let E=v.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=Vv(r,{pathname:_});return zn(y||T!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),zn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),pw(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},g,E.params),pathname:Sr([v,u.encodeLocation?u.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?v:Sr([v,u.encodeLocation?u.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),h,a,s,o)}function dw(){let r=xw(),n=Wx(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},n),a?R.createElement("pre",{style:o},a):null,h)}var hw=R.createElement(dw,null),iy=class extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const a=lw(r.digest);a&&(r=a)}let n=r!==void 0?R.createElement(jr.Provider,{value:this.props.routeContext},R.createElement(oh.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?R.createElement(fw,{error:r},n):n}};iy.contextType=tw;var gd=new WeakMap;function fw({children:r,error:n}){let{basename:a}=R.useContext(Bn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=sw(n.digest);if(s){let o=gd.get(n);if(o)throw o;let u=Wv(s.location,a);if(Zv&&!gd.get(n))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw gd.set(n,h),h}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function gw({routeContext:r,match:n,children:a}){let s=R.useContext(Ti);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(jr.Provider,{value:r},a)}function pw(r,n=[],a=null,s=null,o=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let u=r,h=a?.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);Ct(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,g=-1;if(a)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=v),y.route.id){let{loaderData:x,errors:w}=a,j=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||j){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let m=a&&s?(v,y)=>{s(v,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Fx(a.matches),errorInfo:y})}:void 0;return u.reduceRight((v,y,x)=>{let w,j=!1,_=null,T=null;a&&(w=h&&y.route.id?h[y.route.id]:void 0,_=y.route.errorElement||hw,p&&(g<0&&x===0?(sy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,T=null):g===x&&(j=!0,T=y.route.hydrateFallbackElement||null)));let C=n.concat(u.slice(0,x+1)),E=()=>{let A;return w?A=_:j?A=T:y.route.Component?A=R.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=v,R.createElement(gw,{match:y,routeContext:{outlet:v,matches:C,isDataRoute:a!=null},children:A})};return a&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?R.createElement(iy,{location:a.location,revalidation:a.revalidation,component:_,error:w,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:m}):E()},null)}function ch(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mw(r){let n=R.useContext(Ti);return Ct(n,ch(r)),n}function vw(r){let n=R.useContext(qo);return Ct(n,ch(r)),n}function yw(r){let n=R.useContext(jr);return Ct(n,ch(r)),n}function uh(r){let n=yw(r),a=n.matches[n.matches.length-1];return Ct(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function bw(){return uh("useRouteId")}function xw(){let r=R.useContext(oh),n=vw("useRouteError"),a=uh("useRouteError");return r!==void 0?r:n.errors?.[a]}function ww(){let{router:r}=mw("useNavigate"),n=uh("useNavigate"),a=R.useRef(!1);return ry(()=>{a.current=!0}),R.useCallback(async(o,u={})=>{zn(a.current,ny),a.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:n,...u}))},[r,n])}var Mm={};function sy(r,n,a){!n&&!Mm[r]&&(Mm[r]=!0,zn(!1,a))}R.memo(Sw);function Sw({routes:r,future:n,state:a,onError:s}){return uw(r,void 0,a,s,n)}function _w({basename:r="/",children:n=null,location:a,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:h}){Ct(!Ks(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),g=R.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:h,future:{}}),[p,o,u,h]);typeof a=="string"&&(a=Ys(a));let{pathname:m="/",search:v="",hash:y="",state:x=null,key:w="default"}=a,j=R.useMemo(()=>{let _=_r(m,p);return _==null?null:{location:{pathname:_,search:v,hash:y,state:x,key:w},navigationType:s}},[p,m,v,y,x,w,s]);return zn(j!=null,`<Router basename="${p}"> is not able to match the URL "${m}${v}${y}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:R.createElement(Bn.Provider,{value:g},R.createElement($o.Provider,{children:n,value:j}))}var Ro="get",To="application/x-www-form-urlencoded";function Ho(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function jw(r){return Ho(r)&&r.tagName.toLowerCase()==="button"}function Ew(r){return Ho(r)&&r.tagName.toLowerCase()==="form"}function Rw(r){return Ho(r)&&r.tagName.toLowerCase()==="input"}function Tw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Cw(r,n){return r.button===0&&(!n||n==="_self")&&!Tw(r)}function Pd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((n,a)=>{let s=r[a];return n.concat(Array.isArray(s)?s.map(o=>[a,o]):[[a,s]])},[]))}function Aw(r,n){let a=Pd(r);return n&&n.forEach((s,o)=>{a.has(o)||n.getAll(o).forEach(u=>{a.append(o,u)})}),a}var yo=null;function Ow(){if(yo===null)try{new FormData(document.createElement("form"),0),yo=!1}catch{yo=!0}return yo}var Nw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pd(r){return r!=null&&!Nw.has(r)?(zn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${To}"`),null):r}function Dw(r,n){let a,s,o,u,h;if(Ew(r)){let p=r.getAttribute("action");s=p?_r(p,n):null,a=r.getAttribute("method")||Ro,o=pd(r.getAttribute("enctype"))||To,u=new FormData(r)}else if(jw(r)||Rw(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||p.getAttribute("action");if(s=g?_r(g,n):null,a=r.getAttribute("formmethod")||p.getAttribute("method")||Ro,o=pd(r.getAttribute("formenctype"))||pd(p.getAttribute("enctype"))||To,u=new FormData(p,r),!Ow()){let{name:m,type:v,value:y}=r;if(v==="image"){let x=m?`${m}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else m&&u.append(m,y)}}else{if(Ho(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ro,s=null,o=To,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:a.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dh(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function kw(r,n,a){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${a}`:n&&_r(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function Uw(r,n){if(r.id in n)return n[r.id];try{let a=await import(r.module);return n[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Mw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function zw(r,n,a){let s=await Promise.all(r.map(async o=>{let u=n.routes[o.route.id];if(u){let h=await Uw(u,a);return h.links?h.links():[]}return[]}));return qw(s.flat(1).filter(Mw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function zm(r,n,a,s,o,u){let h=(g,m)=>a[m]?g.route.id!==a[m].route.id:!0,p=(g,m)=>a[m].pathname!==g.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==g.params["*"];return u==="assets"?n.filter((g,m)=>h(g,m)||p(g,m)):u==="data"?n.filter((g,m)=>{let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(h(g,m)||p(g,m))return!0;if(g.route.shouldRevalidate){let y=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Lw(r,n,{includeHydrateFallback:a}={}){return Bw(r.map(s=>{let o=n.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Bw(r){return[...new Set(r)]}function Iw(r){let n={},a=Object.keys(r).sort();for(let s of a)n[s]=r[s];return n}function qw(r,n){let a=new Set;return new Set(n),r.reduce((s,o)=>{let u=JSON.stringify(Iw(o));return a.has(u)||(a.add(u),s.push({key:u,link:o})),s},[])}function ly(){let r=R.useContext(Ti);return dh(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function $w(){let r=R.useContext(qo);return dh(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var hh=R.createContext(void 0);hh.displayName="FrameworkContext";function oy(){let r=R.useContext(hh);return dh(r,"You must render this element inside a <HydratedRouter> element"),r}function Hw(r,n){let a=R.useContext(hh),[s,o]=R.useState(!1),[u,h]=R.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:m,onMouseLeave:v,onTouchStart:y}=n,x=R.useRef(null);R.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let _=C=>{C.forEach(E=>{h(E.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[r]),R.useEffect(()=>{if(s){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[s]);let w=()=>{o(!0)},j=()=>{o(!1),h(!1)};return a?r!=="intent"?[u,x,{}]:[u,x,{onFocus:_s(p,w),onBlur:_s(g,j),onMouseEnter:_s(m,w),onMouseLeave:_s(v,j),onTouchStart:_s(y,w)}]:[!1,x,{}]}function _s(r,n){return a=>{r&&r(a),a.defaultPrevented||n(a)}}function Gw({page:r,...n}){let{router:a}=ly(),s=R.useMemo(()=>Vv(a.routes,r,a.basename),[a.routes,r,a.basename]);return s?R.createElement(Vw,{page:r,matches:s,...n}):null}function Pw(r){let{manifest:n,routeModules:a}=oy(),[s,o]=R.useState([]);return R.useEffect(()=>{let u=!1;return zw(r,n,a).then(h=>{u||o(h)}),()=>{u=!0}},[r,n,a]),s}function Vw({page:r,matches:n,...a}){let s=Er(),{manifest:o,routeModules:u}=oy(),{basename:h}=ly(),{loaderData:p,matches:g}=$w(),m=R.useMemo(()=>zm(r,n,g,o,s,"data"),[r,n,g,o,s]),v=R.useMemo(()=>zm(r,n,g,o,s,"assets"),[r,n,g,o,s]),y=R.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let j=new Set,_=!1;if(n.forEach(C=>{let E=o.routes[C.route.id];!E||!E.hasLoader||(!m.some(A=>A.route.id===C.route.id)&&C.route.id in p&&u[C.route.id]?.shouldRevalidate||E.hasClientLoader?_=!0:j.add(C.route.id))}),j.size===0)return[];let T=kw(r,h,"data");return _&&j.size>0&&T.searchParams.set("_routes",n.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[h,p,s,o,m,n,r,u]),x=R.useMemo(()=>Lw(v,o),[v,o]),w=Pw(v);return R.createElement(R.Fragment,null,y.map(j=>R.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...a})),x.map(j=>R.createElement("link",{key:j,rel:"modulepreload",href:j,...a})),w.map(({key:j,link:_})=>R.createElement("link",{key:j,nonce:a.nonce,..._})))}function Yw(...r){return n=>{r.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kw&&(window.__reactRouterVersion="7.11.0")}catch{}function Jw({basename:r,children:n,unstable_useTransitions:a,window:s}){let o=R.useRef();o.current==null&&(o.current=Cx({window:s,v5Compat:!0}));let u=o.current,[h,p]=R.useState({action:u.action,location:u.location}),g=R.useCallback(m=>{a===!1?p(m):R.startTransition(()=>p(m))},[a]);return R.useLayoutEffect(()=>u.listen(g),[u,g]),R.createElement(_w,{basename:r,children:n,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:a})}var cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uy=R.forwardRef(function({onClick:n,discover:a="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:p,target:g,to:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},j){let{basename:_,unstable_useTransitions:T}=R.useContext(Bn),C=typeof m=="string"&&cy.test(m),E=Wv(m,_);m=E.to;let A=ow(m,{relative:o}),[B,D,I]=Hw(s,w),k=Ww(m,{replace:h,state:p,target:g,preventScrollReset:v,relative:o,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:T});function q(ne){n&&n(ne),ne.defaultPrevented||k(ne)}let U=R.createElement("a",{...w,...I,href:E.absoluteURL||A,onClick:E.isExternal||u?n:q,ref:Yw(j,D),target:g,"data-discover":!C&&a==="render"?"true":void 0});return B&&!C?R.createElement(R.Fragment,null,U,R.createElement(Gw,{page:A})):U});uy.displayName="Link";var Qw=R.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:p,children:g,...m},v){let y=Js(h,{relative:m.relative}),x=Er(),w=R.useContext(qo),{navigator:j,basename:_}=R.useContext(Bn),T=w!=null&&aS(y)&&p===!0,C=j.encodeLocation?j.encodeLocation(y).pathname:y.pathname,E=x.pathname,A=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(E=E.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&_&&(A=_r(A,_)||A);const B=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let D=E===C||!o&&E.startsWith(C)&&E.charAt(B)==="/",I=A!=null&&(A===C||!o&&A.startsWith(C)&&A.charAt(C.length)==="/"),k={isActive:D,isPending:I,isTransitioning:T},q=D?n:void 0,U;typeof s=="function"?U=s(k):U=[s,D?"active":null,I?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ne=typeof u=="function"?u(k):u;return R.createElement(uy,{...m,"aria-current":q,className:U,ref:v,style:ne,to:h,viewTransition:p},typeof g=="function"?g(k):g)});Qw.displayName="NavLink";var Xw=R.forwardRef(({discover:r="render",fetcherKey:n,navigate:a,reloadDocument:s,replace:o,state:u,method:h=Ro,action:p,onSubmit:g,relative:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},j)=>{let{unstable_useTransitions:_}=R.useContext(Bn),T=nS(),C=rS(p,{relative:m}),E=h.toLowerCase()==="get"?"get":"post",A=typeof p=="string"&&cy.test(p),B=D=>{if(g&&g(D),D.defaultPrevented)return;D.preventDefault();let I=D.nativeEvent.submitter,k=I?.getAttribute("formmethod")||h,q=()=>T(I||D.currentTarget,{fetcherKey:n,method:k,navigate:a,replace:o,state:u,relative:m,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:x});_&&a!==!1?R.startTransition(()=>q()):q()};return R.createElement("form",{ref:j,method:E,action:C,onSubmit:s?g:B,...w,"data-discover":!A&&r==="render"?"true":void 0})});Xw.displayName="Form";function Zw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dy(r){let n=R.useContext(Ti);return Ct(n,Zw(r)),n}function Ww(r,{target:n,replace:a,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let m=ay(),v=Er(),y=Js(r,{relative:u});return R.useCallback(x=>{if(Cw(x,n)){x.preventDefault();let w=a!==void 0?a:ks(v)===ks(y),j=()=>m(r,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?R.startTransition(()=>j()):j()}},[v,m,y,a,s,n,r,o,u,h,p,g])}function Fw(r){zn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=R.useRef(Pd(r)),a=R.useRef(!1),s=Er(),o=R.useMemo(()=>Aw(s.search,a.current?null:n.current),[s.search]),u=ay(),h=R.useCallback((p,g)=>{const m=Pd(typeof p=="function"?p(new URLSearchParams(o)):p);a.current=!0,u("?"+m,g)},[u,o]);return[o,h]}var eS=0,tS=()=>`__${String(++eS)}__`;function nS(){let{router:r}=dy("useSubmit"),{basename:n}=R.useContext(Bn),a=bw(),s=r.fetch,o=r.navigate;return R.useCallback(async(u,h={})=>{let{action:p,method:g,encType:m,formData:v,body:y}=Dw(u,n);if(h.navigate===!1){let x=h.fetcherKey||tS();await s(x,a,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:y,formMethod:h.method||g,formEncType:h.encType||m,flushSync:h.flushSync})}else await o(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:v,body:y,formMethod:h.method||g,formEncType:h.encType||m,replace:h.replace,state:h.state,fromRouteId:a,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,o,n,a])}function rS(r,{relative:n}={}){let{basename:a}=R.useContext(Bn),s=R.useContext(jr);Ct(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Js(r||".",{relative:n})},h=Er();if(r==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(v=>v==="")){p.delete("index"),g.filter(y=>y).forEach(y=>p.append("index",y));let v=p.toString();u.search=v?`?${v}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(u.pathname=u.pathname==="/"?a:Sr([a,u.pathname])),ks(u)}function aS(r,{relative:n}={}){let a=R.useContext(ey);Ct(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dy("useViewTransitionState"),o=Js(r,{relative:n});if(!a.isTransitioning)return!1;let u=_r(a.currentLocation.pathname,s)||a.currentLocation.pathname,h=_r(a.nextLocation.pathname,s)||a.nextLocation.pathname;return Ao(o.pathname,h)!=null||Ao(o.pathname,u)!=null}var Si=Pv();const ce=({children:r,variant:n="primary",size:a="md",isLoading:s,block:o,className:u="",...h})=>{const p=["btn",`btn--${n}`,`btn--${a}`,o?"btn--block":"",s?"btn--loading":"",u].filter(Boolean).join(" ");return c.jsxs("button",{className:p,disabled:s,...h,children:[s&&c.jsx("span",{className:"btn__spinner"}),c.jsx("span",{className:"btn__content",children:r})]})},iS=({children:r})=>(Er(),c.jsxs("div",{className:"app-layout",children:[c.jsx("header",{className:"app-header",children:c.jsx("div",{className:"container app-header__content",children:c.jsx("img",{src:"/app/header-logo.png",alt:"recipe management",className:"app-logo-image"})})}),c.jsx("main",{className:"container app-main",children:r}),c.jsx("footer",{className:"app-footer",children:c.jsx("div",{className:"container",children:c.jsx("p",{children:" 2026 recipe management"})})})]})),ft=({children:r,className:n="",hoverable:a=!1,...s})=>c.jsx("div",{className:`glass-card ${a?"glass-card--hoverable":""} ${n}`,...s,children:r});function sS(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return R.useMemo(()=>s=>{n.forEach(o=>o(s))},n)}const Go=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ci(r){const n=Object.prototype.toString.call(r);return n==="[object Window]"||n==="[object global]"}function fh(r){return"nodeType"in r}function Zt(r){var n,a;return r?Ci(r)?r:fh(r)&&(n=(a=r.ownerDocument)==null?void 0:a.defaultView)!=null?n:window:window}function gh(r){const{Document:n}=Zt(r);return r instanceof n}function Qs(r){return Ci(r)?!1:r instanceof Zt(r).HTMLElement}function hy(r){return r instanceof Zt(r).SVGElement}function Ai(r){return r?Ci(r)?r.document:fh(r)?gh(r)?r:Qs(r)||hy(r)?r.ownerDocument:document:document:document}const Kn=Go?R.useLayoutEffect:R.useEffect;function Po(r){const n=R.useRef(r);return Kn(()=>{n.current=r}),R.useCallback(function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n.current==null?void 0:n.current(...s)},[])}function lS(){const r=R.useRef(null),n=R.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),a=R.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[n,a]}function Us(r,n){n===void 0&&(n=[r]);const a=R.useRef(r);return Kn(()=>{a.current!==r&&(a.current=r)},n),a}function Xs(r,n){const a=R.useRef();return R.useMemo(()=>{const s=r(a.current);return a.current=s,s},[...n])}function Oo(r){const n=Po(r),a=R.useRef(null),s=R.useCallback(o=>{o!==a.current&&n?.(o,a.current),a.current=o},[]);return[a,s]}function No(r){const n=R.useRef();return R.useEffect(()=>{n.current=r},[r]),n.current}let md={};function Zs(r,n){return R.useMemo(()=>{if(n)return n;const a=md[r]==null?0:md[r]+1;return md[r]=a,r+"-"+a},[r,n])}function fy(r){return function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.reduce((u,h)=>{const p=Object.entries(h);for(const[g,m]of p){const v=u[g];v!=null&&(u[g]=v+r*m)}return u},{...n})}}const Ei=fy(1),Ms=fy(-1);function oS(r){return"clientX"in r&&"clientY"in r}function Vo(r){if(!r)return!1;const{KeyboardEvent:n}=Zt(r.target);return n&&r instanceof n}function cS(r){if(!r)return!1;const{TouchEvent:n}=Zt(r.target);return n&&r instanceof n}function Do(r){if(cS(r)){if(r.touches&&r.touches.length){const{clientX:n,clientY:a}=r.touches[0];return{x:n,y:a}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:n,clientY:a}=r.changedTouches[0];return{x:n,y:a}}}return oS(r)?{x:r.clientX,y:r.clientY}:null}const Ln=Object.freeze({Translate:{toString(r){if(!r)return;const{x:n,y:a}=r;return"translate3d("+(n?Math.round(n):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:n,scaleY:a}=r;return"scaleX("+n+") scaleY("+a+")"}},Transform:{toString(r){if(r)return[Ln.Translate.toString(r),Ln.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:n,duration:a,easing:s}=r;return n+" "+a+"ms "+s}}}),Lm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uS(r){return r.matches(Lm)?r:r.querySelector(Lm)}const dS={display:"none"};function hS(r){let{id:n,value:a}=r;return Ae.createElement("div",{id:n,style:dS},a)}function fS(r){let{id:n,announcement:a,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ae.createElement("div",{id:n,style:o,role:"status","aria-live":s,"aria-atomic":!0},a)}function gS(){const[r,n]=R.useState("");return{announce:R.useCallback(s=>{s!=null&&n(s)},[]),announcement:r}}const gy=R.createContext(null);function pS(r){const n=R.useContext(gy);R.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(r)},[r,n])}function mS(){const[r]=R.useState(()=>new Set),n=R.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[R.useCallback(s=>{let{type:o,event:u}=s;r.forEach(h=>{var p;return(p=h[o])==null?void 0:p.call(h,u)})},[r]),n]}const vS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yS={onDragStart(r){let{active:n}=r;return"Picked up draggable item "+n.id+"."},onDragOver(r){let{active:n,over:a}=r;return a?"Draggable item "+n.id+" was moved over droppable area "+a.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(r){let{active:n,over:a}=r;return a?"Draggable item "+n.id+" was dropped over droppable area "+a.id:"Draggable item "+n.id+" was dropped."},onDragCancel(r){let{active:n}=r;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function bS(r){let{announcements:n=yS,container:a,hiddenTextDescribedById:s,screenReaderInstructions:o=vS}=r;const{announce:u,announcement:h}=gS(),p=Zs("DndLiveRegion"),[g,m]=R.useState(!1);if(R.useEffect(()=>{m(!0)},[]),pS(R.useMemo(()=>({onDragStart(y){let{active:x}=y;u(n.onDragStart({active:x}))},onDragMove(y){let{active:x,over:w}=y;n.onDragMove&&u(n.onDragMove({active:x,over:w}))},onDragOver(y){let{active:x,over:w}=y;u(n.onDragOver({active:x,over:w}))},onDragEnd(y){let{active:x,over:w}=y;u(n.onDragEnd({active:x,over:w}))},onDragCancel(y){let{active:x,over:w}=y;u(n.onDragCancel({active:x,over:w}))}}),[u,n])),!g)return null;const v=Ae.createElement(Ae.Fragment,null,Ae.createElement(hS,{id:s,value:o.draggable}),Ae.createElement(fS,{id:p,announcement:h}));return a?Si.createPortal(v,a):v}var Tt;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Tt||(Tt={}));function ko(){}function cn(r,n){return R.useMemo(()=>({sensor:r,options:n??{}}),[r,n])}function Ws(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return R.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const Jn=Object.freeze({x:0,y:0});function ph(r,n){return Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))}function xS(r,n){const a=Do(r);if(!a)return"0 0";const s={x:(a.x-n.left)/n.width*100,y:(a.y-n.top)/n.height*100};return s.x+"% "+s.y+"%"}function mh(r,n){let{data:{value:a}}=r,{data:{value:s}}=n;return a-s}function wS(r,n){let{data:{value:a}}=r,{data:{value:s}}=n;return s-a}function Vd(r){let{left:n,top:a,height:s,width:o}=r;return[{x:n,y:a},{x:n+o,y:a},{x:n,y:a+s},{x:n+o,y:a+s}]}function py(r,n){if(!r||r.length===0)return null;const[a]=r;return a[n]}function Bm(r,n,a){return n===void 0&&(n=r.left),a===void 0&&(a=r.top),{x:n+r.width*.5,y:a+r.height*.5}}const Yd=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=Bm(n,n.left,n.top),u=[];for(const h of s){const{id:p}=h,g=a.get(p);if(g){const m=ph(Bm(g),o);u.push({id:p,data:{droppableContainer:h,value:m}})}}return u.sort(mh)},SS=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=Vd(n),u=[];for(const h of s){const{id:p}=h,g=a.get(p);if(g){const m=Vd(g),v=o.reduce((x,w,j)=>x+ph(m[j],w),0),y=Number((v/4).toFixed(4));u.push({id:p,data:{droppableContainer:h,value:y}})}}return u.sort(mh)};function _S(r,n){const a=Math.max(n.top,r.top),s=Math.max(n.left,r.left),o=Math.min(n.left+n.width,r.left+r.width),u=Math.min(n.top+n.height,r.top+r.height),h=o-s,p=u-a;if(s<o&&a<u){const g=n.width*n.height,m=r.width*r.height,v=h*p,y=v/(g+m-v);return Number(y.toFixed(4))}return 0}const jS=r=>{let{collisionRect:n,droppableRects:a,droppableContainers:s}=r;const o=[];for(const u of s){const{id:h}=u,p=a.get(h);if(p){const g=_S(p,n);g>0&&o.push({id:h,data:{droppableContainer:u,value:g}})}}return o.sort(wS)};function ES(r,n){const{top:a,left:s,bottom:o,right:u}=n;return a<=r.y&&r.y<=o&&s<=r.x&&r.x<=u}const my=r=>{let{droppableContainers:n,droppableRects:a,pointerCoordinates:s}=r;if(!s)return[];const o=[];for(const u of n){const{id:h}=u,p=a.get(h);if(p&&ES(s,p)){const m=Vd(p).reduce((y,x)=>y+ph(s,x),0),v=Number((m/4).toFixed(4));o.push({id:h,data:{droppableContainer:u,value:v}})}}return o.sort(mh)};function RS(r,n,a){return{...r,scaleX:n&&a?n.width/a.width:1,scaleY:n&&a?n.height/a.height:1}}function vy(r,n){return r&&n?{x:r.left-n.left,y:r.top-n.top}:Jn}function TS(r){return function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((h,p)=>({...h,top:h.top+r*p.y,bottom:h.bottom+r*p.y,left:h.left+r*p.x,right:h.right+r*p.x}),{...a})}}const CS=TS(1);function yy(r){if(r.startsWith("matrix3d(")){const n=r.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(r.startsWith("matrix(")){const n=r.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function AS(r,n,a){const s=yy(n);if(!s)return r;const{scaleX:o,scaleY:u,x:h,y:p}=s,g=r.left-h-(1-o)*parseFloat(a),m=r.top-p-(1-u)*parseFloat(a.slice(a.indexOf(" ")+1)),v=o?r.width/o:r.width,y=u?r.height/u:r.height;return{width:v,height:y,top:m,right:g+v,bottom:m+y,left:g}}const OS={ignoreTransform:!1};function Oi(r,n){n===void 0&&(n=OS);let a=r.getBoundingClientRect();if(n.ignoreTransform){const{transform:m,transformOrigin:v}=Zt(r).getComputedStyle(r);m&&(a=AS(a,m,v))}const{top:s,left:o,width:u,height:h,bottom:p,right:g}=a;return{top:s,left:o,width:u,height:h,bottom:p,right:g}}function Im(r){return Oi(r,{ignoreTransform:!0})}function NS(r){const n=r.innerWidth,a=r.innerHeight;return{top:0,left:0,right:n,bottom:a,width:n,height:a}}function DS(r,n){return n===void 0&&(n=Zt(r).getComputedStyle(r)),n.position==="fixed"}function kS(r,n){n===void 0&&(n=Zt(r).getComputedStyle(r));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=n[o];return typeof u=="string"?a.test(u):!1})}function Yo(r,n){const a=[];function s(o){if(n!=null&&a.length>=n||!o)return a;if(gh(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!Qs(o)||hy(o)||a.includes(o))return a;const u=Zt(r).getComputedStyle(o);return o!==r&&kS(o,u)&&a.push(o),DS(o,u)?a:s(o.parentNode)}return r?s(r):a}function by(r){const[n]=Yo(r,1);return n??null}function vd(r){return!Go||!r?null:Ci(r)?r:fh(r)?gh(r)||r===Ai(r).scrollingElement?window:Qs(r)?r:null:null}function xy(r){return Ci(r)?r.scrollX:r.scrollLeft}function wy(r){return Ci(r)?r.scrollY:r.scrollTop}function Kd(r){return{x:xy(r),y:wy(r)}}var Ut;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Ut||(Ut={}));function Sy(r){return!Go||!r?!1:r===document.scrollingElement}function _y(r){const n={x:0,y:0},a=Sy(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-a.width,y:r.scrollHeight-a.height},o=r.scrollTop<=n.y,u=r.scrollLeft<=n.x,h=r.scrollTop>=s.y,p=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:h,isRight:p,maxScroll:s,minScroll:n}}const US={x:.2,y:.2};function MS(r,n,a,s,o){let{top:u,left:h,right:p,bottom:g}=a;s===void 0&&(s=10),o===void 0&&(o=US);const{isTop:m,isBottom:v,isLeft:y,isRight:x}=_y(r),w={x:0,y:0},j={x:0,y:0},_={height:n.height*o.y,width:n.width*o.x};return!m&&u<=n.top+_.height?(w.y=Ut.Backward,j.y=s*Math.abs((n.top+_.height-u)/_.height)):!v&&g>=n.bottom-_.height&&(w.y=Ut.Forward,j.y=s*Math.abs((n.bottom-_.height-g)/_.height)),!x&&p>=n.right-_.width?(w.x=Ut.Forward,j.x=s*Math.abs((n.right-_.width-p)/_.width)):!y&&h<=n.left+_.width&&(w.x=Ut.Backward,j.x=s*Math.abs((n.left+_.width-h)/_.width)),{direction:w,speed:j}}function zS(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:h}=window;return{top:0,left:0,right:u,bottom:h,width:u,height:h}}const{top:n,left:a,right:s,bottom:o}=r.getBoundingClientRect();return{top:n,left:a,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function jy(r){return r.reduce((n,a)=>Ei(n,Kd(a)),Jn)}function LS(r){return r.reduce((n,a)=>n+xy(a),0)}function BS(r){return r.reduce((n,a)=>n+wy(a),0)}function Ey(r,n){if(n===void 0&&(n=Oi),!r)return;const{top:a,left:s,bottom:o,right:u}=n(r);by(r)&&(o<=0||u<=0||a>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const IS=[["x",["left","right"],LS],["y",["top","bottom"],BS]];class vh{constructor(n,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Yo(a),o=jy(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,h,p]of IS)for(const g of h)Object.defineProperty(this,g,{get:()=>{const m=p(s),v=o[u]-m;return this.rect[g]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rs{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=n}add(n,a,s){var o;(o=this.target)==null||o.addEventListener(n,a,s),this.listeners.push([n,a,s])}}function qS(r){const{EventTarget:n}=Zt(r);return r instanceof n?r:Ai(r)}function yd(r,n){const a=Math.abs(r.x),s=Math.abs(r.y);return typeof n=="number"?Math.sqrt(a**2+s**2)>n:"x"in n&&"y"in n?a>n.x&&s>n.y:"x"in n?a>n.x:"y"in n?s>n.y:!1}var Mn;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Mn||(Mn={}));function qm(r){r.preventDefault()}function $S(r){r.stopPropagation()}var Ie;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Ie||(Ie={}));const Ry={start:[Ie.Space,Ie.Enter],cancel:[Ie.Esc],end:[Ie.Space,Ie.Enter,Ie.Tab]},HS=(r,n)=>{let{currentCoordinates:a}=n;switch(r.code){case Ie.Right:return{...a,x:a.x+25};case Ie.Left:return{...a,x:a.x-25};case Ie.Down:return{...a,y:a.y+25};case Ie.Up:return{...a,y:a.y-25}}};class Ea{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:a}}=n;this.props=n,this.listeners=new Rs(Ai(a)),this.windowListeners=new Rs(Zt(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Mn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:a}=this.props,s=n.node.current;s&&Ey(s),a(Jn)}handleKeyDown(n){if(Vo(n)){const{active:a,context:s,options:o}=this.props,{keyboardCodes:u=Ry,coordinateGetter:h=HS,scrollBehavior:p="smooth"}=o,{code:g}=n;if(u.end.includes(g)){this.handleEnd(n);return}if(u.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:m}=s.current,v=m?{x:m.left,y:m.top}:Jn;this.referenceCoordinates||(this.referenceCoordinates=v);const y=h(n,{active:a,context:s.current,currentCoordinates:v});if(y){const x=Ms(y,v),w={x:0,y:0},{scrollableAncestors:j}=s.current;for(const _ of j){const T=n.code,{isTop:C,isRight:E,isLeft:A,isBottom:B,maxScroll:D,minScroll:I}=_y(_),k=zS(_),q={x:Math.min(T===Ie.Right?k.right-k.width/2:k.right,Math.max(T===Ie.Right?k.left:k.left+k.width/2,y.x)),y:Math.min(T===Ie.Down?k.bottom-k.height/2:k.bottom,Math.max(T===Ie.Down?k.top:k.top+k.height/2,y.y))},U=T===Ie.Right&&!E||T===Ie.Left&&!A,ne=T===Ie.Down&&!B||T===Ie.Up&&!C;if(U&&q.x!==y.x){const W=_.scrollLeft+x.x,H=T===Ie.Right&&W<=D.x||T===Ie.Left&&W>=I.x;if(H&&!x.y){_.scrollTo({left:W,behavior:p});return}H?w.x=_.scrollLeft-W:w.x=T===Ie.Right?_.scrollLeft-D.x:_.scrollLeft-I.x,w.x&&_.scrollBy({left:-w.x,behavior:p});break}else if(ne&&q.y!==y.y){const W=_.scrollTop+x.y,H=T===Ie.Down&&W<=D.y||T===Ie.Up&&W>=I.y;if(H&&!x.x){_.scrollTo({top:W,behavior:p});return}H?w.y=_.scrollTop-W:w.y=T===Ie.Down?_.scrollTop-D.y:_.scrollTop-I.y,w.y&&_.scrollBy({top:-w.y,behavior:p});break}}this.handleMove(n,Ei(Ms(y,this.referenceCoordinates),w))}}}handleMove(n,a){const{onMove:s}=this.props;n.preventDefault(),s(a)}handleEnd(n){const{onEnd:a}=this.props;n.preventDefault(),this.detach(),a()}handleCancel(n){const{onCancel:a}=this.props;n.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ea.activators=[{eventName:"onKeyDown",handler:(r,n,a)=>{let{keyboardCodes:s=Ry,onActivation:o}=n,{active:u}=a;const{code:h}=r.nativeEvent;if(s.start.includes(h)){const p=u.activatorNode.current;return p&&r.target!==p?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function $m(r){return!!(r&&"distance"in r)}function Hm(r){return!!(r&&"delay"in r)}class yh{constructor(n,a,s){var o;s===void 0&&(s=qS(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=a;const{event:u}=n,{target:h}=u;this.props=n,this.events=a,this.document=Ai(h),this.documentListeners=new Rs(this.document),this.listeners=new Rs(s),this.windowListeners=new Rs(Zt(h)),this.initialCoordinates=(o=Do(u))!=null?o:Jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.DragStart,qm),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),this.windowListeners.add(Mn.ContextMenu,qm),this.documentListeners.add(Mn.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Hm(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if($m(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,a){const{active:s,onPending:o}=this.props;o(s,n,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:n}=this,{onStart:a}=this.props;n&&(this.activated=!0,this.documentListeners.add(Mn.Click,$S,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mn.SelectionChange,this.removeTextSelection),a(n))}handleMove(n){var a;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:h,options:{activationConstraint:p}}=u;if(!o)return;const g=(a=Do(n))!=null?a:Jn,m=Ms(o,g);if(!s&&p){if($m(p)){if(p.tolerance!=null&&yd(m,p.tolerance))return this.handleCancel();if(yd(m,p.distance))return this.handleStart()}if(Hm(p)&&yd(m,p.tolerance))return this.handleCancel();this.handlePending(p,m);return}n.cancelable&&n.preventDefault(),h(g)}handleEnd(){const{onAbort:n,onEnd:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleCancel(){const{onAbort:n,onCancel:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleKeydown(n){n.code===Ie.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const GS={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bh extends yh{constructor(n){const{event:a}=n,s=Ai(a.target);super(n,GS,s)}}bh.activators=[{eventName:"onPointerDown",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const PS={move:{name:"mousemove"},end:{name:"mouseup"}};var Jd;(function(r){r[r.RightClick=2]="RightClick"})(Jd||(Jd={}));class Fs extends yh{constructor(n){super(n,PS,Ai(n.event.target))}}Fs.activators=[{eventName:"onMouseDown",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;return a.button===Jd.RightClick?!1:(s?.({event:a}),!0)}}];const bd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class el extends yh{constructor(n){super(n,bd)}static setup(){return window.addEventListener(bd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(bd.move.name,n)};function n(){}}}el.activators=[{eventName:"onTouchStart",handler:(r,n)=>{let{nativeEvent:a}=r,{onActivation:s}=n;const{touches:o}=a;return o.length>1?!1:(s?.({event:a}),!0)}}];var Ts;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Ts||(Ts={}));var Uo;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Uo||(Uo={}));function VS(r){let{acceleration:n,activator:a=Ts.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:h=5,order:p=Uo.TreeOrder,pointerCoordinates:g,scrollableAncestors:m,scrollableAncestorRects:v,delta:y,threshold:x}=r;const w=KS({delta:y,disabled:!u}),[j,_]=lS(),T=R.useRef({x:0,y:0}),C=R.useRef({x:0,y:0}),E=R.useMemo(()=>{switch(a){case Ts.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Ts.DraggableRect:return o}},[a,o,g]),A=R.useRef(null),B=R.useCallback(()=>{const I=A.current;if(!I)return;const k=T.current.x*C.current.x,q=T.current.y*C.current.y;I.scrollBy(k,q)},[]),D=R.useMemo(()=>p===Uo.TreeOrder?[...m].reverse():m,[p,m]);R.useEffect(()=>{if(!u||!m.length||!E){_();return}for(const I of D){if(s?.(I)===!1)continue;const k=m.indexOf(I),q=v[k];if(!q)continue;const{direction:U,speed:ne}=MS(I,q,E,n,x);for(const W of["x","y"])w[W][U[W]]||(ne[W]=0,U[W]=0);if(ne.x>0||ne.y>0){_(),A.current=I,j(B,h),T.current=ne,C.current=U;return}}T.current={x:0,y:0},C.current={x:0,y:0},_()},[n,B,s,_,u,h,JSON.stringify(E),JSON.stringify(w),j,m,D,v,JSON.stringify(x)])}const YS={x:{[Ut.Backward]:!1,[Ut.Forward]:!1},y:{[Ut.Backward]:!1,[Ut.Forward]:!1}};function KS(r){let{delta:n,disabled:a}=r;const s=No(n);return Xs(o=>{if(a||!s||!o)return YS;const u={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[Ut.Backward]:o.x[Ut.Backward]||u.x===-1,[Ut.Forward]:o.x[Ut.Forward]||u.x===1},y:{[Ut.Backward]:o.y[Ut.Backward]||u.y===-1,[Ut.Forward]:o.y[Ut.Forward]||u.y===1}}},[a,n,s])}function JS(r,n){const a=n!=null?r.get(n):void 0,s=a?a.node.current:null;return Xs(o=>{var u;return n==null?null:(u=s??o)!=null?u:null},[s,n])}function QS(r,n){return R.useMemo(()=>r.reduce((a,s)=>{const{sensor:o}=s,u=o.activators.map(h=>({eventName:h.eventName,handler:n(h.handler,s)}));return[...a,...u]},[]),[r,n])}var zs;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(zs||(zs={}));var Qd;(function(r){r.Optimized="optimized"})(Qd||(Qd={}));const Gm=new Map;function XS(r,n){let{dragging:a,dependencies:s,config:o}=n;const[u,h]=R.useState(null),{frequency:p,measure:g,strategy:m}=o,v=R.useRef(r),y=T(),x=Us(y),w=R.useCallback(function(C){C===void 0&&(C=[]),!x.current&&h(E=>E===null?C:E.concat(C.filter(A=>!E.includes(A))))},[x]),j=R.useRef(null),_=Xs(C=>{if(y&&!a)return Gm;if(!C||C===Gm||v.current!==r||u!=null){const E=new Map;for(let A of r){if(!A)continue;if(u&&u.length>0&&!u.includes(A.id)&&A.rect.current){E.set(A.id,A.rect.current);continue}const B=A.node.current,D=B?new vh(g(B),B):null;A.rect.current=D,D&&E.set(A.id,D)}return E}return C},[r,u,a,y,g]);return R.useEffect(()=>{v.current=r},[r]),R.useEffect(()=>{y||w()},[a,y]),R.useEffect(()=>{u&&u.length>0&&h(null)},[JSON.stringify(u)]),R.useEffect(()=>{y||typeof p!="number"||j.current!==null||(j.current=setTimeout(()=>{w(),j.current=null},p))},[p,y,w,...s]),{droppableRects:_,measureDroppableContainers:w,measuringScheduled:u!=null};function T(){switch(m){case zs.Always:return!1;case zs.BeforeDragging:return a;default:return!a}}}function xh(r,n){return Xs(a=>r?a||(typeof n=="function"?n(r):r):null,[n,r])}function ZS(r,n){return xh(r,n)}function WS(r){let{callback:n,disabled:a}=r;const s=Po(n),o=R.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,a]);return R.useEffect(()=>()=>o?.disconnect(),[o]),o}function Ko(r){let{callback:n,disabled:a}=r;const s=Po(n),o=R.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[a]);return R.useEffect(()=>()=>o?.disconnect(),[o]),o}function FS(r){return new vh(Oi(r),r)}function Pm(r,n,a){n===void 0&&(n=FS);const[s,o]=R.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var m;return(m=g??a)!=null?m:null}const v=n(r);return JSON.stringify(g)===JSON.stringify(v)?g:v})}const h=WS({callback(g){if(r)for(const m of g){const{type:v,target:y}=m;if(v==="childList"&&y instanceof HTMLElement&&y.contains(r)){u();break}}}}),p=Ko({callback:u});return Kn(()=>{u(),r?(p?.observe(r),h?.observe(document.body,{childList:!0,subtree:!0})):(p?.disconnect(),h?.disconnect())},[r]),s}function e1(r){const n=xh(r);return vy(r,n)}const Vm=[];function t1(r){const n=R.useRef(r),a=Xs(s=>r?s&&s!==Vm&&r&&n.current&&r.parentNode===n.current.parentNode?s:Yo(r):Vm,[r]);return R.useEffect(()=>{n.current=r},[r]),a}function n1(r){const[n,a]=R.useState(null),s=R.useRef(r),o=R.useCallback(u=>{const h=vd(u.target);h&&a(p=>p?(p.set(h,Kd(h)),new Map(p)):null)},[]);return R.useEffect(()=>{const u=s.current;if(r!==u){h(u);const p=r.map(g=>{const m=vd(g);return m?(m.addEventListener("scroll",o,{passive:!0}),[m,Kd(m)]):null}).filter(g=>g!=null);a(p.length?new Map(p):null),s.current=r}return()=>{h(r),h(u)};function h(p){p.forEach(g=>{const m=vd(g);m?.removeEventListener("scroll",o)})}},[o,r]),R.useMemo(()=>r.length?n?Array.from(n.values()).reduce((u,h)=>Ei(u,h),Jn):jy(r):Jn,[r,n])}function Ym(r,n){n===void 0&&(n=[]);const a=R.useRef(null);return R.useEffect(()=>{a.current=null},n),R.useEffect(()=>{const s=r!==Jn;s&&!a.current&&(a.current=r),!s&&a.current&&(a.current=null)},[r]),a.current?Ms(r,a.current):Jn}function r1(r){R.useEffect(()=>{if(!Go)return;const n=r.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of n)a?.()}},r.map(n=>{let{sensor:a}=n;return a}))}function a1(r,n){return R.useMemo(()=>r.reduce((a,s)=>{let{eventName:o,handler:u}=s;return a[o]=h=>{u(h,n)},a},{}),[r,n])}function Ty(r){return R.useMemo(()=>r?NS(r):null,[r])}const Km=[];function i1(r,n){n===void 0&&(n=Oi);const[a]=r,s=Ty(a?Zt(a):null),[o,u]=R.useState(Km);function h(){u(()=>r.length?r.map(g=>Sy(g)?s:new vh(n(g),g)):Km)}const p=Ko({callback:h});return Kn(()=>{p?.disconnect(),h(),r.forEach(g=>p?.observe(g))},[r]),o}function Cy(r){if(!r)return null;if(r.children.length>1)return r;const n=r.children[0];return Qs(n)?n:r}function s1(r){let{measure:n}=r;const[a,s]=R.useState(null),o=R.useCallback(m=>{for(const{target:v}of m)if(Qs(v)){s(y=>{const x=n(v);return y?{...y,width:x.width,height:x.height}:x});break}},[n]),u=Ko({callback:o}),h=R.useCallback(m=>{const v=Cy(m);u?.disconnect(),v&&u?.observe(v),s(v?n(v):null)},[n,u]),[p,g]=Oo(h);return R.useMemo(()=>({nodeRef:p,rect:a,setRef:g}),[a,p,g])}const l1=[{sensor:bh,options:{}},{sensor:Ea,options:{}}],o1={current:{}},Co={draggable:{measure:Im},droppable:{measure:Im,strategy:zs.WhileDragging,frequency:Qd.Optimized},dragOverlay:{measure:Oi}};class Cs extends Map{get(n){var a;return n!=null&&(a=super.get(n))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:a}=n;return!a})}getNodeFor(n){var a,s;return(a=(s=this.get(n))==null?void 0:s.node.current)!=null?a:void 0}}const c1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ko},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Co,measureDroppableContainers:ko,windowRect:null,measuringScheduled:!1},Ay={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ko,draggableNodes:new Map,over:null,measureDroppableContainers:ko},tl=R.createContext(Ay),Oy=R.createContext(c1);function u1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cs}}}function d1(r,n){switch(n.type){case Tt.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Tt.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:n.coordinates.x-r.draggable.initialCoordinates.x,y:n.coordinates.y-r.draggable.initialCoordinates.y}}};case Tt.DragEnd:case Tt.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tt.RegisterDroppable:{const{element:a}=n,{id:s}=a,o=new Cs(r.droppable.containers);return o.set(s,a),{...r,droppable:{...r.droppable,containers:o}}}case Tt.SetDroppableDisabled:{const{id:a,key:s,disabled:o}=n,u=r.droppable.containers.get(a);if(!u||s!==u.key)return r;const h=new Cs(r.droppable.containers);return h.set(a,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:h}}}case Tt.UnregisterDroppable:{const{id:a,key:s}=n,o=r.droppable.containers.get(a);if(!o||s!==o.key)return r;const u=new Cs(r.droppable.containers);return u.delete(a),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function h1(r){let{disabled:n}=r;const{active:a,activatorEvent:s,draggableNodes:o}=R.useContext(tl),u=No(s),h=No(a?.id);return R.useEffect(()=>{if(!n&&!s&&u&&h!=null){if(!Vo(u)||document.activeElement===u.target)return;const p=o.get(h);if(!p)return;const{activatorNode:g,node:m}=p;if(!g.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[g.current,m.current]){if(!v)continue;const y=uS(v);if(y){y.focus();break}}})}},[s,n,o,h,u]),null}function Ny(r,n){let{transform:a,...s}=n;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),a):a}function f1(r){return R.useMemo(()=>({draggable:{...Co.draggable,...r?.draggable},droppable:{...Co.droppable,...r?.droppable},dragOverlay:{...Co.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function g1(r){let{activeNode:n,measure:a,initialRect:s,config:o=!0}=r;const u=R.useRef(!1),{x:h,y:p}=typeof o=="boolean"?{x:o,y:o}:o;Kn(()=>{if(!h&&!p||!n){u.current=!1;return}if(u.current||!s)return;const m=n?.node.current;if(!m||m.isConnected===!1)return;const v=a(m),y=vy(v,s);if(h||(y.x=0),p||(y.y=0),u.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const x=by(m);x&&x.scrollBy({top:y.y,left:y.x})}},[n,h,p,s,a])}const Jo=R.createContext({...Jn,scaleX:1,scaleY:1});var Fr;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Fr||(Fr={}));const Ls=R.memo(function(n){var a,s,o,u;let{id:h,accessibility:p,autoScroll:g=!0,children:m,sensors:v=l1,collisionDetection:y=jS,measuring:x,modifiers:w,...j}=n;const _=R.useReducer(d1,void 0,u1),[T,C]=_,[E,A]=mS(),[B,D]=R.useState(Fr.Uninitialized),I=B===Fr.Initialized,{draggable:{active:k,nodes:q,translate:U},droppable:{containers:ne}}=T,W=k!=null?q.get(k):null,H=R.useRef({initial:null,translated:null}),Z=R.useMemo(()=>{var ct;return k!=null?{id:k,data:(ct=W?.data)!=null?ct:o1,rect:H}:null},[k,W]),re=R.useRef(null),[te,z]=R.useState(null),[J,ae]=R.useState(null),fe=Us(j,Object.values(j)),se=Zs("DndDescribedBy",h),O=R.useMemo(()=>ne.getEnabled(),[ne]),L=f1(x),{droppableRects:ee,measureDroppableContainers:ie,measuringScheduled:me}=XS(O,{dragging:I,dependencies:[U.x,U.y],config:L.droppable}),ve=JS(q,k),Ne=R.useMemo(()=>J?Do(J):null,[J]),Ve=Ta(),ke=ZS(ve,L.draggable.measure);g1({activeNode:k!=null?q.get(k):null,config:Ve.layoutShiftCompensation,initialRect:ke,measure:L.draggable.measure});const De=Pm(ve,L.draggable.measure,ke),Pt=Pm(ve?ve.parentElement:null),At=R.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:ne,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),un=ne.getNodeFor((a=At.current.over)==null?void 0:a.id),Xe=s1({measure:L.dragOverlay.measure}),Ot=(s=Xe.nodeRef.current)!=null?s:ve,Vt=I?(o=Xe.rect)!=null?o:De:null,Fn=!!(Xe.nodeRef.current&&Xe.rect),er=e1(Fn?null:De),Qt=Ty(Ot?Zt(Ot):null),wt=t1(I?un??ve:null),le=i1(wt),ue=Ny(w,{transform:{x:U.x-er.x,y:U.y-er.y,scaleX:1,scaleY:1},activatorEvent:J,active:Z,activeNodeRect:De,containerNodeRect:Pt,draggingNodeRect:Vt,over:At.current.over,overlayNodeRect:Xe.rect,scrollableAncestors:wt,scrollableAncestorRects:le,windowRect:Qt}),xe=Ne?Ei(Ne,U):null,ge=n1(wt),gt=Ym(ge),pt=Ym(ge,[De]),V=Ei(ue,gt),de=Vt?CS(Vt,ue):null,je=Z&&de?y({active:Z,collisionRect:de,droppableRects:ee,droppableContainers:O,pointerCoordinates:xe}):null,ye=py(je,"id"),[Ee,St]=R.useState(null),nt=Fn?ue:Ei(ue,pt),rt=RS(nt,(u=Ee?.rect)!=null?u:null,De),it=R.useRef(null),_t=R.useCallback((ct,ut)=>{let{sensor:Nt,options:Wt}=ut;if(re.current==null)return;const Ft=q.get(re.current);if(!Ft)return;const Kt=ct.nativeEvent,en=new Nt({active:re.current,activeNode:Ft,event:Kt,options:Wt,context:At,onAbort(jt){if(!q.get(jt))return;const{onDragAbort:dn}=fe.current,_n={id:jt};dn?.(_n),E({type:"onDragAbort",event:_n})},onPending(jt,In,dn,_n){if(!q.get(jt))return;const{onDragPending:nr}=fe.current,qn={id:jt,constraint:In,initialCoordinates:dn,offset:_n};nr?.(qn),E({type:"onDragPending",event:qn})},onStart(jt){const In=re.current;if(In==null)return;const dn=q.get(In);if(!dn)return;const{onDragStart:_n}=fe.current,tr={activatorEvent:Kt,active:{id:In,data:dn.data,rect:H}};Si.unstable_batchedUpdates(()=>{_n?.(tr),D(Fr.Initializing),C({type:Tt.DragStart,initialCoordinates:jt,active:In}),E({type:"onDragStart",event:tr}),z(it.current),ae(Kt)})},onMove(jt){C({type:Tt.DragMove,coordinates:jt})},onEnd:Sn(Tt.DragEnd),onCancel:Sn(Tt.DragCancel)});it.current=en;function Sn(jt){return async function(){const{active:dn,collisions:_n,over:tr,scrollAdjustedTranslate:nr}=At.current;let qn=null;if(dn&&nr){const{cancelDrop:Cr}=fe.current;qn={activatorEvent:Kt,active:dn,collisions:_n,delta:nr,over:tr},jt===Tt.DragEnd&&typeof Cr=="function"&&await Promise.resolve(Cr(qn))&&(jt=Tt.DragCancel)}re.current=null,Si.unstable_batchedUpdates(()=>{C({type:jt}),D(Fr.Uninitialized),St(null),z(null),ae(null),it.current=null;const Cr=jt===Tt.DragEnd?"onDragEnd":"onDragCancel";if(qn){const jn=fe.current[Cr];jn?.(qn),E({type:Cr,event:qn})}})}}},[q]),Mt=R.useCallback((ct,ut)=>(Nt,Wt)=>{const Ft=Nt.nativeEvent,Kt=q.get(Wt);if(re.current!==null||!Kt||Ft.dndKit||Ft.defaultPrevented)return;const en={active:Kt};ct(Nt,ut.options,en)===!0&&(Ft.dndKit={capturedBy:ut.sensor},re.current=Wt,_t(Nt,ut))},[q,_t]),Yt=QS(v,Mt);r1(v),Kn(()=>{De&&B===Fr.Initializing&&D(Fr.Initialized)},[De,B]),R.useEffect(()=>{const{onDragMove:ct}=fe.current,{active:ut,activatorEvent:Nt,collisions:Wt,over:Ft}=At.current;if(!ut||!Nt)return;const Kt={active:ut,activatorEvent:Nt,collisions:Wt,delta:{x:V.x,y:V.y},over:Ft};Si.unstable_batchedUpdates(()=>{ct?.(Kt),E({type:"onDragMove",event:Kt})})},[V.x,V.y]),R.useEffect(()=>{const{active:ct,activatorEvent:ut,collisions:Nt,droppableContainers:Wt,scrollAdjustedTranslate:Ft}=At.current;if(!ct||re.current==null||!ut||!Ft)return;const{onDragOver:Kt}=fe.current,en=Wt.get(ye),Sn=en&&en.rect.current?{id:en.id,rect:en.rect.current,data:en.data,disabled:en.disabled}:null,jt={active:ct,activatorEvent:ut,collisions:Nt,delta:{x:Ft.x,y:Ft.y},over:Sn};Si.unstable_batchedUpdates(()=>{St(Sn),Kt?.(jt),E({type:"onDragOver",event:jt})})},[ye]),Kn(()=>{At.current={activatorEvent:J,active:Z,activeNode:ve,collisionRect:de,collisions:je,droppableRects:ee,draggableNodes:q,draggingNode:Ot,draggingNodeRect:Vt,droppableContainers:ne,over:Ee,scrollableAncestors:wt,scrollAdjustedTranslate:V},H.current={initial:Vt,translated:de}},[Z,ve,je,de,q,Ot,Vt,ee,ne,Ee,wt,V]),VS({...Ve,delta:U,draggingRect:de,pointerCoordinates:xe,scrollableAncestors:wt,scrollableAncestorRects:le});const Ra=R.useMemo(()=>({active:Z,activeNode:ve,activeNodeRect:De,activatorEvent:J,collisions:je,containerNodeRect:Pt,dragOverlay:Xe,draggableNodes:q,droppableContainers:ne,droppableRects:ee,over:Ee,measureDroppableContainers:ie,scrollableAncestors:wt,scrollableAncestorRects:le,measuringConfiguration:L,measuringScheduled:me,windowRect:Qt}),[Z,ve,De,J,je,Pt,Xe,q,ne,ee,Ee,ie,wt,le,L,me,Qt]),Tr=R.useMemo(()=>({activatorEvent:J,activators:Yt,active:Z,activeNodeRect:De,ariaDescribedById:{draggable:se},dispatch:C,draggableNodes:q,over:Ee,measureDroppableContainers:ie}),[J,Yt,Z,De,C,se,q,Ee,ie]);return Ae.createElement(gy.Provider,{value:A},Ae.createElement(tl.Provider,{value:Tr},Ae.createElement(Oy.Provider,{value:Ra},Ae.createElement(Jo.Provider,{value:rt},m)),Ae.createElement(h1,{disabled:p?.restoreFocus===!1})),Ae.createElement(bS,{...p,hiddenTextDescribedById:se}));function Ta(){const ct=te?.autoScrollEnabled===!1,ut=typeof g=="object"?g.enabled===!1:g===!1,Nt=I&&!ct&&!ut;return typeof g=="object"?{...g,enabled:Nt}:{enabled:Nt}}}),p1=R.createContext(null),Jm="button",m1="Draggable";function v1(r){let{id:n,data:a,disabled:s=!1,attributes:o}=r;const u=Zs(m1),{activators:h,activatorEvent:p,active:g,activeNodeRect:m,ariaDescribedById:v,draggableNodes:y,over:x}=R.useContext(tl),{role:w=Jm,roleDescription:j="draggable",tabIndex:_=0}=o??{},T=g?.id===n,C=R.useContext(T?Jo:p1),[E,A]=Oo(),[B,D]=Oo(),I=a1(h,n),k=Us(a);Kn(()=>(y.set(n,{id:n,key:u,node:E,activatorNode:B,data:k}),()=>{const U=y.get(n);U&&U.key===u&&y.delete(n)}),[y,n]);const q=R.useMemo(()=>({role:w,tabIndex:_,"aria-disabled":s,"aria-pressed":T&&w===Jm?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[s,w,_,T,j,v.draggable]);return{active:g,activatorEvent:p,activeNodeRect:m,attributes:q,isDragging:T,listeners:s?void 0:I,node:E,over:x,setNodeRef:A,setActivatorNodeRef:D,transform:C}}function Dy(){return R.useContext(Oy)}const y1="Droppable",b1={timeout:25};function wh(r){let{data:n,disabled:a=!1,id:s,resizeObserverConfig:o}=r;const u=Zs(y1),{active:h,dispatch:p,over:g,measureDroppableContainers:m}=R.useContext(tl),v=R.useRef({disabled:a}),y=R.useRef(!1),x=R.useRef(null),w=R.useRef(null),{disabled:j,updateMeasurementsFor:_,timeout:T}={...b1,...o},C=Us(_??s),E=R.useCallback(()=>{if(!y.current){y.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{m(Array.isArray(C.current)?C.current:[C.current]),w.current=null},T)},[T]),A=Ko({callback:E,disabled:j||!h}),B=R.useCallback((q,U)=>{A&&(U&&(A.unobserve(U),y.current=!1),q&&A.observe(q))},[A]),[D,I]=Oo(B),k=Us(n);return R.useEffect(()=>{!A||!D.current||(A.disconnect(),y.current=!1,A.observe(D.current))},[D,A]),R.useEffect(()=>(p({type:Tt.RegisterDroppable,element:{id:s,key:u,disabled:a,node:D,rect:x,data:k}}),()=>p({type:Tt.UnregisterDroppable,key:u,id:s})),[s]),R.useEffect(()=>{a!==v.current.disabled&&(p({type:Tt.SetDroppableDisabled,id:s,key:u,disabled:a}),v.current.disabled=a)},[s,u,a,p]),{active:h,rect:x,isOver:g?.id===s,node:D,over:g,setNodeRef:I}}function x1(r){let{animation:n,children:a}=r;const[s,o]=R.useState(null),[u,h]=R.useState(null),p=No(a);return!a&&!s&&p&&o(p),Kn(()=>{if(!u)return;const g=s?.key,m=s?.props.id;if(g==null||m==null){o(null);return}Promise.resolve(n(m,u)).then(()=>{o(null)})},[n,s,u]),Ae.createElement(Ae.Fragment,null,a,s?R.cloneElement(s,{ref:h}):null)}const w1={x:0,y:0,scaleX:1,scaleY:1};function S1(r){let{children:n}=r;return Ae.createElement(tl.Provider,{value:Ay},Ae.createElement(Jo.Provider,{value:w1},n))}const _1={position:"fixed",touchAction:"none"},j1=r=>Vo(r)?"transform 250ms ease":void 0,E1=R.forwardRef((r,n)=>{let{as:a,activatorEvent:s,adjustScale:o,children:u,className:h,rect:p,style:g,transform:m,transition:v=j1}=r;if(!p)return null;const y=o?m:{...m,scaleX:1,scaleY:1},x={..._1,width:p.width,height:p.height,top:p.top,left:p.left,transform:Ln.Transform.toString(y),transformOrigin:o&&s?xS(s,p):void 0,transition:typeof v=="function"?v(s):v,...g};return Ae.createElement(a,{className:h,style:x,ref:n},u)}),Sh=r=>n=>{let{active:a,dragOverlay:s}=n;const o={},{styles:u,className:h}=r;if(u!=null&&u.active)for(const[p,g]of Object.entries(u.active))g!==void 0&&(o[p]=a.node.style.getPropertyValue(p),a.node.style.setProperty(p,g));if(u!=null&&u.dragOverlay)for(const[p,g]of Object.entries(u.dragOverlay))g!==void 0&&s.node.style.setProperty(p,g);return h!=null&&h.active&&a.node.classList.add(h.active),h!=null&&h.dragOverlay&&s.node.classList.add(h.dragOverlay),function(){for(const[g,m]of Object.entries(o))a.node.style.setProperty(g,m);h!=null&&h.active&&a.node.classList.remove(h.active)}},R1=r=>{let{transform:{initial:n,final:a}}=r;return[{transform:Ln.Transform.toString(n)},{transform:Ln.Transform.toString(a)}]},T1={duration:250,easing:"ease",keyframes:R1,sideEffects:Sh({styles:{active:{opacity:"0"}}})};function C1(r){let{config:n,draggableNodes:a,droppableContainers:s,measuringConfiguration:o}=r;return Po((u,h)=>{if(n===null)return;const p=a.get(u);if(!p)return;const g=p.node.current;if(!g)return;const m=Cy(h);if(!m)return;const{transform:v}=Zt(h).getComputedStyle(h),y=yy(v);if(!y)return;const x=typeof n=="function"?n:A1(n);return Ey(g,o.draggable.measure),x({active:{id:u,data:p.data,node:g,rect:o.draggable.measure(g)},draggableNodes:a,dragOverlay:{node:h,rect:o.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:o,transform:y})})}function A1(r){const{duration:n,easing:a,sideEffects:s,keyframes:o}={...T1,...r};return u=>{let{active:h,dragOverlay:p,transform:g,...m}=u;if(!n)return;const v={x:p.rect.left-h.rect.left,y:p.rect.top-h.rect.top},y={scaleX:g.scaleX!==1?h.rect.width*g.scaleX/p.rect.width:1,scaleY:g.scaleY!==1?h.rect.height*g.scaleY/p.rect.height:1},x={x:g.x-v.x,y:g.y-v.y,...y},w=o({...m,active:h,dragOverlay:p,transform:{initial:g,final:x}}),[j]=w,_=w[w.length-1];if(JSON.stringify(j)===JSON.stringify(_))return;const T=s?.({active:h,dragOverlay:p,...m}),C=p.node.animate(w,{duration:n,easing:a,fill:"forwards"});return new Promise(E=>{C.onfinish=()=>{T?.(),E()}})}}let Qm=0;function O1(r){return R.useMemo(()=>{if(r!=null)return Qm++,Qm},[r])}const ky=Ae.memo(r=>{let{adjustScale:n=!1,children:a,dropAnimation:s,style:o,transition:u,modifiers:h,wrapperElement:p="div",className:g,zIndex:m=999}=r;const{activatorEvent:v,active:y,activeNodeRect:x,containerNodeRect:w,draggableNodes:j,droppableContainers:_,dragOverlay:T,over:C,measuringConfiguration:E,scrollableAncestors:A,scrollableAncestorRects:B,windowRect:D}=Dy(),I=R.useContext(Jo),k=O1(y?.id),q=Ny(h,{activatorEvent:v,active:y,activeNodeRect:x,containerNodeRect:w,draggingNodeRect:T.rect,over:C,overlayNodeRect:T.rect,scrollableAncestors:A,scrollableAncestorRects:B,transform:I,windowRect:D}),U=xh(x),ne=C1({config:s,draggableNodes:j,droppableContainers:_,measuringConfiguration:E}),W=U?T.setRef:void 0;return Ae.createElement(S1,null,Ae.createElement(x1,{animation:ne},y&&k?Ae.createElement(E1,{key:k,id:y.id,ref:W,as:p,activatorEvent:v,adjustScale:n,className:g,transition:u,rect:U,style:{zIndex:m,...o},transform:q},a):null))});function Ni(r,n,a){const s=r.slice();return s.splice(a<0?s.length+a:a,0,s.splice(n,1)[0]),s}function N1(r,n){return r.reduce((a,s,o)=>{const u=n.get(s);return u&&(a[o]=u),a},Array(r.length))}function bo(r){return r!==null&&r>=0}function D1(r,n){if(r===n)return!0;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}function k1(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const _h=r=>{let{rects:n,activeIndex:a,overIndex:s,index:o}=r;const u=Ni(n,s,a),h=n[o],p=u[o];return!p||!h?null:{x:p.left-h.left,y:p.top-h.top,scaleX:p.width/h.width,scaleY:p.height/h.height}},xo={scaleX:1,scaleY:1},Mo=r=>{var n;let{activeIndex:a,activeNodeRect:s,index:o,rects:u,overIndex:h}=r;const p=(n=u[a])!=null?n:s;if(!p)return null;if(o===a){const m=u[h];return m?{x:0,y:a<h?m.top+m.height-(p.top+p.height):m.top-p.top,...xo}:null}const g=U1(u,o,a);return o>a&&o<=h?{x:0,y:-p.height-g,...xo}:o<a&&o>=h?{x:0,y:p.height+g,...xo}:{x:0,y:0,...xo}};function U1(r,n,a){const s=r[n],o=r[n-1],u=r[n+1];return s?a<n?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const Uy="Sortable",My=Ae.createContext({activeIndex:-1,containerId:Uy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_h,disabled:{draggable:!1,droppable:!1}});function Bs(r){let{children:n,id:a,items:s,strategy:o=_h,disabled:u=!1}=r;const{active:h,dragOverlay:p,droppableRects:g,over:m,measureDroppableContainers:v}=Dy(),y=Zs(Uy,a),x=p.rect!==null,w=R.useMemo(()=>s.map(I=>typeof I=="object"&&"id"in I?I.id:I),[s]),j=h!=null,_=h?w.indexOf(h.id):-1,T=m?w.indexOf(m.id):-1,C=R.useRef(w),E=!D1(w,C.current),A=T!==-1&&_===-1||E,B=k1(u);Kn(()=>{E&&j&&v(w)},[E,w,j,v]),R.useEffect(()=>{C.current=w},[w]);const D=R.useMemo(()=>({activeIndex:_,containerId:y,disabled:B,disableTransforms:A,items:w,overIndex:T,useDragOverlay:x,sortedRects:N1(w,g),strategy:o}),[_,y,B.draggable,B.droppable,A,w,T,g,x,o]);return Ae.createElement(My.Provider,{value:D},n)}const M1=r=>{let{id:n,items:a,activeIndex:s,overIndex:o}=r;return Ni(a,s,o).indexOf(n)},z1=r=>{let{containerId:n,isSorting:a,wasDragging:s,index:o,items:u,newIndex:h,previousItems:p,previousContainerId:g,transition:m}=r;return!m||!s||p!==u&&o===h?!1:a?!0:h!==o&&n===g},L1={duration:200,easing:"ease"},zy="transform",B1=Ln.Transition.toString({property:zy,duration:0,easing:"linear"}),I1={roleDescription:"sortable"};function q1(r){let{disabled:n,index:a,node:s,rect:o}=r;const[u,h]=R.useState(null),p=R.useRef(a);return Kn(()=>{if(!n&&a!==p.current&&s.current){const g=o.current;if(g){const m=Oi(s.current,{ignoreTransform:!0}),v={x:g.left-m.left,y:g.top-m.top,scaleX:g.width/m.width,scaleY:g.height/m.height};(v.x||v.y)&&h(v)}}a!==p.current&&(p.current=a)},[n,a,s,o]),R.useEffect(()=>{u&&h(null)},[u]),u}function nl(r){let{animateLayoutChanges:n=z1,attributes:a,disabled:s,data:o,getNewIndex:u=M1,id:h,strategy:p,resizeObserverConfig:g,transition:m=L1}=r;const{items:v,containerId:y,activeIndex:x,disabled:w,disableTransforms:j,sortedRects:_,overIndex:T,useDragOverlay:C,strategy:E}=R.useContext(My),A=$1(s,w),B=v.indexOf(h),D=R.useMemo(()=>({sortable:{containerId:y,index:B,items:v},...o}),[y,o,B,v]),I=R.useMemo(()=>v.slice(v.indexOf(h)),[v,h]),{rect:k,node:q,isOver:U,setNodeRef:ne}=wh({id:h,data:D,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...g}}),{active:W,activatorEvent:H,activeNodeRect:Z,attributes:re,setNodeRef:te,listeners:z,isDragging:J,over:ae,setActivatorNodeRef:fe,transform:se}=v1({id:h,data:D,attributes:{...I1,...a},disabled:A.draggable}),O=sS(ne,te),L=!!W,ee=L&&!j&&bo(x)&&bo(T),ie=!C&&J,me=ie&&ee?se:null,Ne=ee?me??(p??E)({rects:_,activeNodeRect:Z,activeIndex:x,overIndex:T,index:B}):null,Ve=bo(x)&&bo(T)?u({id:h,items:v,activeIndex:x,overIndex:T}):B,ke=W?.id,De=R.useRef({activeId:ke,items:v,newIndex:Ve,containerId:y}),Pt=v!==De.current.items,At=n({active:W,containerId:y,isDragging:J,isSorting:L,id:h,index:B,items:v,newIndex:De.current.newIndex,previousItems:De.current.items,previousContainerId:De.current.containerId,transition:m,wasDragging:De.current.activeId!=null}),un=q1({disabled:!At,index:B,node:q,rect:k});return R.useEffect(()=>{L&&De.current.newIndex!==Ve&&(De.current.newIndex=Ve),y!==De.current.containerId&&(De.current.containerId=y),v!==De.current.items&&(De.current.items=v)},[L,Ve,y,v]),R.useEffect(()=>{if(ke===De.current.activeId)return;if(ke!=null&&De.current.activeId==null){De.current.activeId=ke;return}const Ot=setTimeout(()=>{De.current.activeId=ke},50);return()=>clearTimeout(Ot)},[ke]),{active:W,activeIndex:x,attributes:re,data:D,rect:k,index:B,newIndex:Ve,items:v,isOver:U,isSorting:L,isDragging:J,listeners:z,node:q,overIndex:T,over:ae,setNodeRef:O,setActivatorNodeRef:fe,setDroppableNodeRef:ne,setDraggableNodeRef:te,transform:un??Ne,transition:Xe()};function Xe(){if(un||Pt&&De.current.newIndex===B)return B1;if(!(ie&&!Vo(H)||!m)&&(L||At))return Ln.Transition.toString({...m,property:zy})}}function $1(r,n){var a,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(a=r?.draggable)!=null?a:n.draggable,droppable:(s=r?.droppable)!=null?s:n.droppable}}function zo(r){if(!r)return!1;const n=r.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const H1=[Ie.Down,Ie.Right,Ie.Up,Ie.Left],rl=(r,n)=>{let{context:{active:a,collisionRect:s,droppableRects:o,droppableContainers:u,over:h,scrollableAncestors:p}}=n;if(H1.includes(r.code)){if(r.preventDefault(),!a||!s)return;const g=[];u.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const x=o.get(y.id);if(x)switch(r.code){case Ie.Down:s.top<x.top&&g.push(y);break;case Ie.Up:s.top>x.top&&g.push(y);break;case Ie.Left:s.left>x.left&&g.push(y);break;case Ie.Right:s.left<x.left&&g.push(y);break}});const m=SS({collisionRect:s,droppableRects:o,droppableContainers:g});let v=py(m,"id");if(v===h?.id&&m.length>1&&(v=m[1].id),v!=null){const y=u.get(a.id),x=u.get(v),w=x?o.get(x.id):null,j=x?.node.current;if(j&&w&&y&&x){const T=Yo(j).some((I,k)=>p[k]!==I),C=Ly(y,x),E=G1(y,x),A=T||!C?{x:0,y:0}:{x:E?s.width-w.width:0,y:E?s.height-w.height:0},B={x:w.left,y:w.top};return A.x&&A.y?B:Ms(B,A)}}}};function Ly(r,n){return!zo(r)||!zo(n)?!1:r.data.current.sortable.containerId===n.data.current.sortable.containerId}function G1(r,n){return!zo(r)||!zo(n)||!Ly(r,n)?!1:r.data.current.sortable.index<n.data.current.sortable.index}const Xm=r=>{if(!r)return"";const n=new Date(r);return`${n.getFullYear()}/${String(n.getMonth()+1).padStart(2,"0")}/${String(n.getDate()).padStart(2,"0")}`},P1=({recipe:r,isSelected:n,isSelectMode:a,onSelectRecipe:s,onToggleSelection:o,disableDrag:u})=>{const{attributes:h,listeners:p,setNodeRef:g,transform:m,transition:v,isDragging:y}=nl({id:r.id,disabled:u}),x={transform:Ln.Transform.toString(m),transition:v,opacity:y?.5:1,touchAction:"pan-y",height:"100%",outline:"none",cursor:u?"default":"grab"};return c.jsx("div",{ref:g,style:x,...h,...p,children:c.jsxs(ft,{hoverable:!0,className:`recipe-card ${n?"selected":""} ${r.type==="bread"?"recipe-card--bread":""} ${/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(w=>/|Dessert/i.test(w))?"recipe-card--dessert":""} ${r.category==="URL"||r.sourceUrl?"recipe-card--url":""}`,style:{height:"100%"},onClick:()=>{a?o(r.id):s(r)},children:[c.jsxs("div",{className:"recipe-card__image-wrapper",children:[r.image?c.jsx("img",{src:r.image,alt:r.title,className:"recipe-card__image"}):c.jsx("div",{className:"recipe-card__image placeholder"}),c.jsx("div",{className:"recipe-card__overlay"}),a&&c.jsx("div",{className:"recipe-card__selection-overlay",children:c.jsx("div",{className:`selection-checkbox ${n?"checked":""}`})}),c.jsx("div",{className:"recipe-card__tags",children:(()=>{if(!r.tags)return null;const w=r.tags.flatMap(T=>(T||"").split(/[,]/)).map(T=>T.trim()).filter(Boolean);return(w.includes("URL")?["URL"]:w).slice(0,1).map((T,C)=>c.jsx("span",{className:"recipe-tag",children:T},`${T}-${C}`))})()})]}),c.jsxs("div",{className:"recipe-card__content",children:[c.jsx("h3",{className:"recipe-title",children:r.title}),c.jsx("p",{className:"recipe-desc",children:r.description}),c.jsxs("div",{className:"recipe-meta",children:[r.storeName&&c.jsxs("span",{children:[" ",r.storeName]}),c.jsxs("div",{className:"recipe-dates",children:[c.jsxs("span",{className:"recipe-date",children:[" : ",Xm(r.created_at)]}),r.updated_at&&c.jsxs("span",{className:"recipe-date",children:[" : ",Xm(r.updated_at)]})]})]})]})]})})},Zm=r=>r.type==="bread"||r.tags&&r.tags.some(n=>/|Bread/i.test(n)),Wm=r=>{const n=a=>/|Dessert/i.test(a);return/|Dessert/i.test(r.category||"")||r.tags&&r.tags.some(n)},Fm=r=>/|Sauce/i.test(r.category||"")||r.tags&&r.tags.some(n=>/|Sauce/i.test(n)),ev=r=>/||Decor/i.test(r.category||"")||r.tags&&r.tags.some(n=>/||Decor/i.test(n)),tv=({recipes:r,onSelectRecipe:n,isSelectMode:a,selectedIds:s,onToggleSelection:o,disableDrag:u,displayMode:h="normal"})=>{const[p,g]=R.useState({}),m=q=>{g(U=>({...U,[q]:!U[q]}))},v=r.filter(q=>Zm(q)),y=r.filter(q=>!Zm(q)),x=y.filter(q=>Fm(q)),w=y.filter(q=>!Fm(q)),j=w.filter(q=>ev(q)),_=w.filter(q=>!ev(q)),T=q=>{const U=q.category||"",ne=q.tags||[];return/|Dressing||Vinaigrette||Mayonnaise/i.test(U)||ne.some(W=>/|Dressing||Vinaigrette||Mayonnaise/i.test(W))},C=_.filter(q=>T(q)),E=_.filter(q=>!T(q)),A=E.filter(q=>Wm(q)),B=E.filter(q=>!Wm(q)),[D,I]=R.useState(typeof window<"u"&&window.innerWidth>=1024?9:8);Ae.useEffect(()=>{const q=()=>{window.innerWidth>=1024?I(9):I(8)};return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const k=(q,U,ne,W)=>{if(U.length===0)return null;const H=h==="all";let Z=U,re=!1,te=!1;return H||(re=p[W],te=U.length>D,Z=re?U:U.slice(0,D)),c.jsxs("div",{className:"recipe-section",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{onClick:()=>!H&&te&&m(W),style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px",cursor:!H&&te?"pointer":"default",userSelect:"none"},children:[c.jsx("span",{children:ne})," ",q,c.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal"},children:["(",U.length,")"]}),!H&&te&&c.jsx("span",{className:"section-toggle-btn",children:re?" ":" "})]}),c.jsx("div",{className:"recipe-grid",children:c.jsx(Bs,{items:Z.map(z=>z.id),strategy:_h,children:Z.map(z=>{const J=s&&s.has(z.id);return c.jsx(P1,{recipe:z,isSelected:J,isSelectMode:a,onSelectRecipe:n,onToggleSelection:o,disableDrag:u},z.id)})})})]})};return c.jsxs("div",{className:"recipe-list-container",children:[k("",B,"","cooking"),k("",v,"","bread"),k("",A,"","dessert"),k("",x,"","sauce"),k("",C,"","dressing"),k("",j,"","decoration"),r.length===0&&c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:""})]})};function Qo(r,n){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(a[s[o]]=r[s[o]]);return a}function V1(r,n,a,s){function o(u){return u instanceof a?u:new a(function(h){h(u)})}return new(a||(a=Promise))(function(u,h){function p(v){try{m(s.next(v))}catch(y){h(y)}}function g(v){try{m(s.throw(v))}catch(y){h(y)}}function m(v){v.done?u(v.value):o(v.value).then(p,g)}m((s=s.apply(r,n||[])).next())})}const Y1=r=>r?(...n)=>r(...n):(...n)=>fetch(...n);class jh extends Error{constructor(n,a="FunctionsError",s){super(n),this.name=a,this.context=s}}class K1 extends jh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class nv extends jh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class rv extends jh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Xd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Xd||(Xd={}));class J1{constructor(n,{headers:a={},customFetch:s,region:o=Xd.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=Y1(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return V1(this,arguments,void 0,function*(a,s={}){var o;let u,h;try{const{headers:p,method:g,body:m,signal:v,timeout:y}=s;let x={},{region:w}=s;w||(w=this.region);const j=new URL(`${this.url}/${a}`);w&&w!=="any"&&(x["x-region"]=w,j.searchParams.set("forceFunctionRegion",w));let _;m&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",_=m):typeof m=="string"?(x["Content-Type"]="text/plain",_=m):typeof FormData<"u"&&m instanceof FormData?_=m:(x["Content-Type"]="application/json",_=JSON.stringify(m)):_=m;let T=v;y&&(h=new AbortController,u=setTimeout(()=>h.abort(),y),v?(T=h.signal,v.addEventListener("abort",()=>h.abort())):T=h.signal);const C=yield this.fetch(j.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),p),body:_,signal:T}).catch(D=>{throw new K1(D)}),E=C.headers.get("x-relay-error");if(E&&E==="true")throw new nv(C);if(!C.ok)throw new rv(C);let A=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),B;return A==="application/json"?B=yield C.json():A==="application/octet-stream"||A==="application/pdf"?B=yield C.blob():A==="text/event-stream"?B=C:A==="multipart/form-data"?B=yield C.formData():B=yield C.text(),{data:B,error:null,response:C}}catch(p){return{data:null,error:p,response:p instanceof rv||p instanceof nv?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var Q1=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},X1=class{constructor(r){var n,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(n=r.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,n){return this.headers=new Headers(this.headers),this.headers.set(r,n),this}then(r,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let h=null,p=null,g=null,m=u.status,v=u.statusText;if(u.ok){var y,x;if(a.method!=="HEAD"){var w;const C=await u.text();C===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((w=a.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?p=C:p=JSON.parse(C))}const _=(y=a.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),T=(x=u.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");_&&T&&T.length>1&&(g=parseInt(T[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,m=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var j;const _=await u.text();try{h=JSON.parse(_),Array.isArray(h)&&u.status===404&&(p=[],h=null,m=200,v="OK")}catch{u.status===404&&_===""?(m=204,v="No Content"):h={message:_}}if(h&&a.isMaybeSingle&&(!(h==null||(j=h.details)===null||j===void 0)&&j.includes("0 rows"))&&(h=null,m=200,v="OK"),h&&a.shouldThrowOnError)throw new Q1(h)}return{error:h,data:p,count:g,status:m,statusText:v}});return this.shouldThrowOnError||(o=o.catch(u=>{var h;let p="";const g=u?.cause;if(g){var m,v,y,x;const j=(m=g?.message)!==null&&m!==void 0?m:"",_=(v=g?.code)!==null&&v!==void 0?v:"";p=`${(y=u?.name)!==null&&y!==void 0?y:"FetchError"}: ${u?.message}`,p+=`

Caused by: ${(x=g?.name)!==null&&x!==void 0?x:"Error"}: ${j}`,_&&(p+=` (${_})`),g?.stack&&(p+=`
${g.stack}`)}else{var w;p=(w=u?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(h=u?.name)!==null&&h!==void 0?h:"FetchError"}: ${u?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,n)}returns(){return this}overrideTypes(){return this}},Z1=class extends X1{select(r){let n=!1;const a=(r??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:n=!0,nullsFirst:a,foreignTable:s,referencedTable:o=s}={}){const u=o?`${o}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${r}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:n,referencedTable:a=n}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,n,{foreignTable:a,referencedTable:s=a}={}){const o=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${n-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:n=!1,settings:a=!1,buffers:s=!1,wal:o=!1,format:u="text"}={}){var h;const p=[r?"analyze":null,n?"verbose":null,a?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${g}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const av=new RegExp("[,()]");var bi=class extends Z1{eq(r,n){return this.url.searchParams.append(r,`eq.${n}`),this}neq(r,n){return this.url.searchParams.append(r,`neq.${n}`),this}gt(r,n){return this.url.searchParams.append(r,`gt.${n}`),this}gte(r,n){return this.url.searchParams.append(r,`gte.${n}`),this}lt(r,n){return this.url.searchParams.append(r,`lt.${n}`),this}lte(r,n){return this.url.searchParams.append(r,`lte.${n}`),this}like(r,n){return this.url.searchParams.append(r,`like.${n}`),this}likeAllOf(r,n){return this.url.searchParams.append(r,`like(all).{${n.join(",")}}`),this}likeAnyOf(r,n){return this.url.searchParams.append(r,`like(any).{${n.join(",")}}`),this}ilike(r,n){return this.url.searchParams.append(r,`ilike.${n}`),this}ilikeAllOf(r,n){return this.url.searchParams.append(r,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(r,n){return this.url.searchParams.append(r,`ilike(any).{${n.join(",")}}`),this}regexMatch(r,n){return this.url.searchParams.append(r,`match.${n}`),this}regexIMatch(r,n){return this.url.searchParams.append(r,`imatch.${n}`),this}is(r,n){return this.url.searchParams.append(r,`is.${n}`),this}isDistinct(r,n){return this.url.searchParams.append(r,`isdistinct.${n}`),this}in(r,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&av.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&av.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cs.{${n.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(n)}`),this}containedBy(r,n){return typeof n=="string"?this.url.searchParams.append(r,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(r,`cd.{${n.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(n)}`),this}rangeGt(r,n){return this.url.searchParams.append(r,`sr.${n}`),this}rangeGte(r,n){return this.url.searchParams.append(r,`nxl.${n}`),this}rangeLt(r,n){return this.url.searchParams.append(r,`sl.${n}`),this}rangeLte(r,n){return this.url.searchParams.append(r,`nxr.${n}`),this}rangeAdjacent(r,n){return this.url.searchParams.append(r,`adj.${n}`),this}overlaps(r,n){return typeof n=="string"?this.url.searchParams.append(r,`ov.${n}`):this.url.searchParams.append(r,`ov.{${n.join(",")}}`),this}textSearch(r,n,{config:a,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${o}fts${u}.${n}`),this}match(r){return Object.entries(r).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(r,n,a){return this.url.searchParams.append(r,`not.${n}.${a}`),this}or(r,{foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,n,a){return this.url.searchParams.append(r,`${n}.${a}`),this}},W1=class{constructor(r,{headers:n={},schema:a,fetch:s}){this.url=r,this.headers=new Headers(n),this.schema=a,this.fetch=s}select(r,n){const{head:a=!1,count:s}=n??{},o=a?"HEAD":"GET";let u=!1;const h=(r??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),s&&this.headers.append("Prefer",`count=${s}`),new bi({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:n,defaultToNull:a=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new bi({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(r,{onConflict:n,ignoreDuplicates:a=!1,count:s,defaultToNull:o=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const p=r.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(p.length>0){const g=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new bi({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:n}={}){var a;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new bi({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var n;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new bi({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},F1=class By{constructor(n,{headers:a={},schema:s,fetch:o}={}){this.url=n,this.headers=new Headers(a),this.schemaName=s,this.fetch=o}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new W1(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new By(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,a={},{head:s=!1,get:o=!1,count:u}={}){var h;let p;const g=new URL(`${this.url}/rpc/${n}`);let m;s||o?(p=s?"HEAD":"GET",Object.entries(a).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{g.searchParams.append(y,x)})):(p="POST",m=a);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new bi({method:p,url:g,headers:v,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class e_{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const s=a.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const s=this.getWebSocketConstructor();return new s(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const t_="2.89.0",n_=`realtime-js/${t_}`,Iy="1.0.0",r_="2.0.0",iv=Iy,Zd=1e4,a_=1e3,i_=100;var ea;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ea||(ea={}));var Rt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Rt||(Rt={}));var Yn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Yn||(Yn={}));var Wd;(function(r){r.websocket="websocket"})(Wd||(Wd={}));var Sa;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Sa||(Sa={}));class s_{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(n,a,s){var o,u;const h=n.topic,p=(o=n.ref)!==null&&o!==void 0?o:"",g=(u=n.join_ref)!==null&&u!==void 0?u:"",m=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},y=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+h.length+m.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+x);let j=new DataView(w),_=0;j.setUint8(_++,this.KINDS.userBroadcastPush),j.setUint8(_++,g.length),j.setUint8(_++,p.length),j.setUint8(_++,h.length),j.setUint8(_++,m.length),j.setUint8(_++,y.length),j.setUint8(_++,a),Array.from(g,C=>j.setUint8(_++,C.charCodeAt(0))),Array.from(p,C=>j.setUint8(_++,C.charCodeAt(0))),Array.from(h,C=>j.setUint8(_++,C.charCodeAt(0))),Array.from(m,C=>j.setUint8(_++,C.charCodeAt(0))),Array.from(y,C=>j.setUint8(_++,C.charCodeAt(0)));var T=new Uint8Array(w.byteLength+s.byteLength);return T.set(new Uint8Array(w),0),T.set(new Uint8Array(s),w.byteLength),T.buffer}decode(n,a){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return a(s)}if(typeof n=="string"){const s=JSON.parse(n),[o,u,h,p,g]=s;return a({join_ref:o,ref:u,topic:h,event:p,payload:g})}return a({})}_binaryDecode(n){const a=new DataView(n),s=a.getUint8(0),o=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,a,o)}_decodeUserBroadcast(n,a,s){const o=a.getUint8(1),u=a.getUint8(2),h=a.getUint8(3),p=a.getUint8(4);let g=this.HEADER_LENGTH+4;const m=s.decode(n.slice(g,g+o));g=g+o;const v=s.decode(n.slice(g,g+u));g=g+u;const y=s.decode(n.slice(g,g+h));g=g+h;const x=n.slice(g,n.byteLength),w=p===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,j={type:this.BROADCAST_EVENT,event:v,payload:w};return h>0&&(j.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>a.includes(s)))}}class qy{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ze||(Ze={}));const sv=(r,n,a={})=>{var s;const o=(s=a.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((u,h)=>(u[h]=l_(h,r,n,o),u),{}):{}},l_=(r,n,a,s)=>{const o=n.find(p=>p.name===r),u=o?.type,h=a[r];return u&&!s.includes(u)?$y(u,h):Fd(h)},$y=(r,n)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return d_(n,a)}switch(r){case Ze.bool:return o_(n);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return c_(n);case Ze.json:case Ze.jsonb:return u_(n);case Ze.timestamp:return h_(n);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Fd(n);default:return Fd(n)}},Fd=r=>r,o_=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},c_=r=>{if(typeof r=="string"){const n=parseFloat(r);if(!Number.isNaN(n))return n}return r},u_=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},d_=(r,n)=>{if(typeof r!="string")return r;const a=r.length-1,s=r[a];if(r[0]==="{"&&s==="}"){let u;const h=r.slice(1,a);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>$y(n,p))}return r},h_=r=>typeof r=="string"?r.replace(" ","T"):r,Hy=r=>{const n=new URL(r);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class xd{constructor(n,a,s={},o=Zd){this.channel=n,this.event=a,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var s;return this._hasReceived(n)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var lv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(lv||(lv={}));class As{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,o,u,h),this.pendingDiffs.forEach(g=>{this.state=As.syncDiff(this.state,g,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(s.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=As.syncDiff(this.state,o,u,h),p())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,s,o){const u=this.cloneDeep(n),h=this.transformState(a),p={},g={};return this.map(u,(m,v)=>{h[m]||(g[m]=v)}),this.map(h,(m,v)=>{const y=u[m];if(y){const x=v.map(T=>T.presence_ref),w=y.map(T=>T.presence_ref),j=v.filter(T=>w.indexOf(T.presence_ref)<0),_=y.filter(T=>x.indexOf(T.presence_ref)<0);j.length>0&&(p[m]=j),_.length>0&&(g[m]=_)}else p[m]=v}),this.syncDiff(u,{joins:p,leaves:g},s,o)}static syncDiff(n,a,s,o){const{joins:u,leaves:h}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(u,(p,g)=>{var m;const v=(m=n[p])!==null&&m!==void 0?m:[];if(n[p]=this.cloneDeep(g),v.length>0){const y=n[p].map(w=>w.presence_ref),x=v.filter(w=>y.indexOf(w.presence_ref)<0);n[p].unshift(...x)}s(p,v,g)}),this.map(h,(p,g)=>{let m=n[p];if(!m)return;const v=g.map(y=>y.presence_ref);m=m.filter(y=>v.indexOf(y.presence_ref)<0),n[p]=m,o(p,m,g),m.length===0&&delete n[p]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(s=>a(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,s)=>{const o=n[s];return"metas"in o?a[s]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[s]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ov;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ov||(ov={}));var Os;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Os||(Os={}));var wr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(wr||(wr={}));class _i{constructor(n,a={config:{}},s){var o,u;if(this.topic=n,this.params=a,this.socket=s,this.bindings={},this.state=Rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new xd(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new qy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new As(this),this.broadcastEndpointURL=Hy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var s,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Rt.closed){const{config:{broadcast:h,presence:p,private:g}}=this.params,m=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Os.PRESENCE]&&this.bindings[Os.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,y={},x={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>n?.(wr.CHANNEL_ERROR,w)),this._onClose(()=>n?.(wr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:w})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){n?.(wr.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,T=(j=_?.length)!==null&&j!==void 0?j:0,C=[];for(let E=0;E<T;E++){const A=_[E],{filter:{event:B,schema:D,table:I,filter:k}}=A,q=w&&w[E];if(q&&q.event===B&&_i.isFilterValueEqual(q.schema,D)&&_i.isFilterValueEqual(q.table,I)&&_i.isFilterValueEqual(q.filter,k))C.push(Object.assign(Object.assign({},A),{id:q.id}));else{this.unsubscribe(),this.state=Rt.errored,n?.(wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(wr.SUBSCRIBED);return}}).receive("error",w=>{this.state=Rt.errored,n?.(wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n?.(wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,s){return this.state===Rt.joined&&n===Os.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,s)}async httpSend(n,a,s={}){var o;if(a==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const m=await p.json();g=m.error||m.message||g}catch{}return Promise.reject(new Error(g))}async send(n,a={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,g;const m=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Rt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new xd(this,Yn.leave,{},n),s.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rt.closed,this.bindings={}}async _fetchWithTimeout(n,a,s){const o=new AbortController,u=setTimeout(()=>o.abort(),s),h=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),h}_push(n,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new xd(this,n,a,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>i_){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,s){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,s){var o,u;const h=n.toLocaleLowerCase(),{close:p,error:g,leave:m,join:v}=Yn;if(s&&[p,g,m,v].indexOf(h)>=0&&s!==this._joinRef())return;let x=this._onMessage(h,a,s);if(a&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var j,_,T;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((T=(_=w.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(w=>w.callback(x,s)):(u=this.bindings[h])===null||u===void 0||u.filter(w=>{var j,_,T,C,E,A;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in w){const B=w.id,D=(j=w.filter)===null||j===void 0?void 0:j.event;return B&&((_=a.ids)===null||_===void 0?void 0:_.includes(B))&&(D==="*"||D?.toLocaleLowerCase()===((T=a.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const B=(E=(C=w?.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return B==="*"||B===((A=a?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===h}).map(w=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:_,table:T,commit_timestamp:C,type:E,errors:A}=j;x=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:C,eventType:E,new:{},old:{},errors:A}),this._getPayloadRecords(j))}w.callback(x,s)})}_isClosed(){return this.state===Rt.closed}_isJoined(){return this.state===Rt.joined}_isJoining(){return this.state===Rt.joining}_isLeaving(){return this.state===Rt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,s){const o=n.toLocaleLowerCase(),u={type:o,filter:a,callback:s};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,a){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===s&&_i.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const s in n)if(n[s]!==a[s])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Yn.close,{},n)}_onError(n){this._on(Yn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=sv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=sv(n.columns,n.old_record)),a}}const wd=()=>{},wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f_=[1e3,2e3,5e3,1e4],g_=1e4,p_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m_{constructor(n,a){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zd,this.transport=null,this.heartbeatIntervalMs=wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wd,this.ref=0,this.reconnectTimer=null,this.vsn=iv,this.logger=wd,this.conn=null,this.sendBuffer=[],this.serializer=new s_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((s=a?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${Wd.websocket}`,this.httpEndpoint=Hy(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e_.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,s){this.logger(n,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ea.connecting:return Sa.Connecting;case ea.open:return Sa.Open;case ea.closing:return Sa.Closing;default:return Sa.Closed}}isConnected(){return this.connectionState()===Sa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===s);if(o)return o;{const u=new _i(`realtime:${n}`,a,this);return this.channels.push(u),u}}push(n){const{topic:a,event:s,payload:o,ref:u}=n,h=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${a} ${s} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(a_,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:u,ref:h}=a,p=h?`(${h})`:"",g=u.status||"";this.log("receive",`${g} ${s} ${o} ${p}`.trim(),u),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(o,u,h)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===ea.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ea.open||this.conn.readyState===ea.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Yn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${s}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const s=new Blob([p_],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,s=!1;if(n)a=n,s=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:n_};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Yn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new qy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,s,o,u,h,p,g,m,v,y,x,w;switch(this.transport=(a=n?.transport)!==null&&a!==void 0?a:null,this.timeout=(s=n?.timeout)!==null&&s!==void 0?s:Zd,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:wo.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:wd,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:iv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=n?.reconnectAfterMs)!==null&&m!==void 0?m:(j=>f_[j-1]||g_),this.vsn){case Iy:this.encode=(v=n?.encode)!==null&&v!==void 0?v:((j,_)=>_(JSON.stringify(j))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:((j,_)=>_(JSON.parse(j)));break;case r_:this.encode=(x=n?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(w=n?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Is=class extends Error{constructor(r,n){super(r),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function v_(r,n,a){const s=new URL(n,r);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&s.searchParams.set(o,u);return s.toString()}async function y_(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function b_(r){const n=r.fetchImpl??globalThis.fetch;return{async request({method:a,path:s,query:o,body:u,headers:h}){const p=v_(r.baseUrl,s,o),g=await y_(r.auth),m=await n(p,{method:a,headers:{...u?{"Content-Type":"application/json"}:{},...g,...h},body:u?JSON.stringify(u):void 0}),v=await m.text(),y=(m.headers.get("content-type")||"").includes("application/json"),x=y&&v?JSON.parse(v):v;if(!m.ok){const w=y?x:void 0,j=w?.error;throw new Is(j?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:j?.type,icebergCode:j?.code,details:w})}return{status:m.status,headers:m.headers,data:x}}}}function So(r){return r.join("")}var x_=class{constructor(r,n=""){this.client=r,this.prefix=n}async listNamespaces(r){const n=r?{parent:So(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,n){const a={namespace:r.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${So(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${So(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${So(r.namespace)}`}),!0}catch(n){if(n instanceof Is&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(r,n){try{return await this.createNamespace(r,n)}catch(a){if(a instanceof Is&&a.status===409)return;throw a}}};function hi(r){return r.join("")}var w_=class{constructor(r,n="",a){this.client=r,this.prefix=n,this.accessDelegation=a}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables`})).data.identifiers}async createTable(r,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(r,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables/${r.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(r,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables/${r.name}`,headers:n})).data.metadata}async tableExists(r){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hi(r.namespace)}/tables/${r.name}`,headers:n}),!0}catch(a){if(a instanceof Is&&a.status===404)return!1;throw a}}async createTableIfNotExists(r,n){try{return await this.createTable(r,n)}catch(a){if(a instanceof Is&&a.status===409)return await this.loadTable({namespace:r.namespace,name:n.name});throw a}}},S_=class{constructor(r){let n="v1";r.catalogName&&(n+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=b_({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new x_(this.client,n),this.tableOps=new w_(this.client,n,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,n){return this.namespaceOps.createNamespace(r,n)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,n){return this.tableOps.createTable(r,n)}async updateTable(r,n){return this.tableOps.updateTable(r,n)}async dropTable(r,n){await this.tableOps.dropTable(r,n)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,n){return this.namespaceOps.createNamespaceIfNotExists(r,n)}async createTableIfNotExists(r,n){return this.tableOps.createTableIfNotExists(r,n)}},Xo=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function at(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var __=class extends Xo{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eh=class extends Xo{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}};const Eh=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),j_=()=>Response,th=r=>{if(Array.isArray(r))return r.map(a=>th(a));if(typeof r=="function"||r!==Object(r))return r;const n={};return Object.entries(r).forEach(([a,s])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=th(s)}),n},E_=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},R_=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function qs(r){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qs(r)}function T_(r,n){if(qs(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(qs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function C_(r){var n=T_(r,"string");return qs(n)=="symbol"?n:n+""}function A_(r,n,a){return(n=C_(n))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}function cv(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}function _e(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?cv(Object(a),!0).forEach(function(s){A_(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):cv(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const Sd=r=>{var n;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(n=r.error)===null||n===void 0?void 0:n.message)||JSON.stringify(r)},O_=async(r,n,a)=>{r instanceof await j_()&&!a?.noResolveJson?r.json().then(s=>{const o=r.status||500,u=s?.statusCode||o+"";n(new __(Sd(s),o,u))}).catch(s=>{n(new eh(Sd(s),s))}):n(new eh(Sd(r),r))},N_=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"||!s?o:(E_(s)?(o.headers=_e({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,n?.duplex&&(o.duplex=n.duplex),_e(_e({},o),a))};async function al(r,n,a,s,o,u){return new Promise((h,p)=>{r(a,N_(n,s,o,u)).then(g=>{if(!g.ok)throw g;return s?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>O_(g,p,s))})}async function $s(r,n,a,s){return al(r,"GET",n,a,s)}async function Vn(r,n,a,s,o){return al(r,"POST",n,s,o,a)}async function nh(r,n,a,s,o){return al(r,"PUT",n,s,o,a)}async function D_(r,n,a,s){return al(r,"HEAD",n,_e(_e({},a),{},{noResolveJson:!0}),s)}async function Rh(r,n,a,s,o){return al(r,"DELETE",n,s,o,a)}var k_=class{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}};let Gy;Gy=Symbol.toStringTag;var U_=class{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Gy]="BlobDownloadBuilder",this.promise=null}asStream(){return new k_(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}};const M_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var z_=class{constructor(r,n={},a,s){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=Eh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,n,a,s){var o=this;try{let u;const h=_e(_e({},uv),s);let p=_e(_e({},o.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),g&&u.append("metadata",o.encodeMetadata(g)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),g&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(g))):(u=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,g&&(p["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),s?.headers&&(p=_e(_e({},p),s.headers));const m=o._removeEmptyFolders(n),v=o._getFinalPath(m),y=await(r=="PUT"?nh:Vn)(o.fetch,`${o.url}/object/${v}`,u,_e({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(at(u))return{data:null,error:u};throw u}}async upload(r,n,a){return this.uploadOrUpdate("POST",r,n,a)}async uploadToSignedUrl(r,n,a,s){var o=this;const u=o._removeEmptyFolders(r),h=o._getFinalPath(u),p=new URL(o.url+`/object/upload/sign/${h}`);p.searchParams.set("token",n);try{let g;const m=_e({upsert:uv.upsert},s),v=_e(_e({},o.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",m.cacheControl)):(g=a,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:u,fullPath:(await nh(o.fetch,p.toString(),g,{headers:v})).Key},error:null}}catch(g){if(o.shouldThrowOnError)throw g;if(at(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(r,n){var a=this;try{let s=a._getFinalPath(r);const o=_e({},a.headers);n?.upsert&&(o["x-upsert"]="true");const u=await Vn(a.fetch,`${a.url}/object/upload/sign/${s}`,{},{headers:o}),h=new URL(a.url+u.url),p=h.searchParams.get("token");if(!p)throw new Xo("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}}async update(r,n,a){return this.uploadOrUpdate("PUT",r,n,a)}async move(r,n,a){var s=this;try{return{data:await Vn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async copy(r,n,a){var s=this;try{return{data:{path:(await Vn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async createSignedUrl(r,n,a){var s=this;try{let o=s._getFinalPath(r),u=await Vn(s.fetch,`${s.url}/object/sign/${o}`,_e({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:s.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${s.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async createSignedUrls(r,n,a){var s=this;try{const o=await Vn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:r},{headers:s.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(h=>_e(_e({},h),{},{signedUrl:h.signedURL?encodeURI(`${s.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}download(r,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),o=s?`?${s}`:"",u=this._getFinalPath(r),h=()=>$s(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new U_(h,this.shouldThrowOnError)}async info(r){var n=this;const a=n._getFinalPath(r);try{return{data:th(await $s(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}}async exists(r){var n=this;const a=n._getFinalPath(r);try{return await D_(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(at(s)&&s instanceof eh){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,n){const a=this._getFinalPath(r),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const u=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&s.push(h);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${p}`)}}}async remove(r){var n=this;try{return{data:await Rh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async list(r,n,a){var s=this;try{const o=_e(_e(_e({},M_),n),{},{prefix:r||""});return{data:await Vn(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},a),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async listV2(r,n){var a=this;try{const s=_e({},r);return{data:await Vn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,s,{headers:a.headers},n),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}};const Py="2.89.0",Vy={"X-Client-Info":`storage-js/${Py}`};var L_=class{constructor(r,n={},a,s){this.shouldThrowOnError=!1;const o=new URL(r);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=_e(_e({},Vy),n),this.fetch=Eh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var n=this;try{const a=n.listBucketOptionsToQueryString(r);return{data:await $s(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async getBucket(r){var n=this;try{return{data:await $s(n.fetch,`${n.url}/bucket/${r}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async createBucket(r,n={public:!1}){var a=this;try{return{data:await Vn(a.fetch,`${a.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}}async updateBucket(r,n){var a=this;try{return{data:await nh(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}}async emptyBucket(r){var n=this;try{return{data:await Vn(n.fetch,`${n.url}/bucket/${r}/empty`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await Rh(n.fetch,`${n.url}/bucket/${r}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},B_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=_e(_e({},Vy),n),this.fetch=Eh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var n=this;try{return{data:await Vn(n.fetch,`${n.url}/bucket`,{name:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async listBuckets(r){var n=this;try{const a=new URLSearchParams;r?.limit!==void 0&&a.set("limit",r.limit.toString()),r?.offset!==void 0&&a.set("offset",r.offset.toString()),r?.sortColumn&&a.set("sortColumn",r.sortColumn),r?.sortOrder&&a.set("sortOrder",r.sortOrder),r?.search&&a.set("search",r.search);const s=a.toString(),o=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return{data:await $s(n.fetch,o,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await Rh(n.fetch,`${n.url}/bucket/${r}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}}from(r){var n=this;if(!R_(r))throw new Xo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new S_({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const h=o[u];return typeof h!="function"?h:async(...p)=>{try{return{data:await h.apply(o,p),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}};const Th={"X-Client-Info":`storage-js/${Py}`,"Content-Type":"application/json"};var Yy=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function xn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var _d=class extends Yy{constructor(r,n,a){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},I_=class extends Yy{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}};const Ch=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),q_=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},dv=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),$_=async(r,n,a)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!a?.noResolveJson){const s=r.status||500,o=r;if(typeof o.json=="function")o.json().then(u=>{const h=u?.statusCode||u?.code||s+"";n(new _d(dv(u),s,h))}).catch(()=>{const u=s+"";n(new _d(o.statusText||`HTTP ${s} error`,s,u))});else{const u=s+"";n(new _d(o.statusText||`HTTP ${s} error`,s,u))}}else n(new I_(dv(r),r))},H_=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return s?(q_(s)?(o.headers=_e({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,_e(_e({},o),a)):o};async function G_(r,n,a,s,o,u){return new Promise((h,p)=>{r(a,H_(n,s,o,u)).then(g=>{if(!g.ok)throw g;if(s?.noResolveJson)return g;const m=g.headers.get("content-type");return!m||!m.includes("application/json")?{}:g.json()}).then(g=>h(g)).catch(g=>$_(g,p,s))})}async function wn(r,n,a,s,o){return G_(r,"POST",n,s,o,a)}var P_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=_e(_e({},Th),n),this.fetch=Ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/CreateIndex`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async getIndex(r,n){var a=this;try{return{data:await wn(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:a.headers}),error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(xn(s))return{data:null,error:s};throw s}}async listIndexes(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/ListIndexes`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async deleteIndex(r,n){var a=this;try{return{data:await wn(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:a.headers})||{},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(xn(s))return{data:null,error:s};throw s}}},V_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=_e(_e({},Th),n),this.fetch=Ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var n=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await wn(n.fetch,`${n.url}/PutVectors`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async getVectors(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/GetVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async listVectors(r){var n=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await wn(n.fetch,`${n.url}/ListVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async queryVectors(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/QueryVectors`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async deleteVectors(r){var n=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await wn(n.fetch,`${n.url}/DeleteVectors`,r,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}},Y_=class{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=_e(_e({},Th),n),this.fetch=Ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async getBucket(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:r},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async listBuckets(r={}){var n=this;try{return{data:await wn(n.fetch,`${n.url}/ListVectorBuckets`,r,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}async deleteBucket(r){var n=this;try{return{data:await wn(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(xn(a))return{data:null,error:a};throw a}}},K_=class extends Y_{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new J_(this.url,this.headers,r,this.fetch)}async createBucket(r){var n=()=>super.createBucket,a=this;return n().call(a,r)}async getBucket(r){var n=()=>super.getBucket,a=this;return n().call(a,r)}async listBuckets(r={}){var n=()=>super.listBuckets,a=this;return n().call(a,r)}async deleteBucket(r){var n=()=>super.deleteBucket,a=this;return n().call(a,r)}},J_=class extends P_{constructor(r,n,a,s){super(r,n,s),this.vectorBucketName=a}async createIndex(r){var n=()=>super.createIndex,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(r={}){var n=()=>super.listIndexes,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(r){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,r)}async deleteIndex(r){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,r)}index(r){return new Q_(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},Q_=class extends V_{constructor(r,n,a,s,o){super(r,n,o),this.vectorBucketName=a,this.indexName=s}async putVectors(r){var n=()=>super.putVectors,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(r){var n=()=>super.getVectors,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(r={}){var n=()=>super.listVectors,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(r){var n=()=>super.queryVectors,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(r){var n=()=>super.deleteVectors,a=this;return n().call(a,_e(_e({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},X_=class extends L_{constructor(r,n={},a,s){super(r,n,a,s)}from(r){return new z_(this.url,this.headers,r,this.fetch)}get vectors(){return new K_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new B_(this.url+"/iceberg",this.headers,this.fetch)}};const Ky="2.89.0",xi=30*1e3,rh=3,jd=rh*xi,Z_="http://localhost:9999",W_="supabase.auth.token",F_={"X-Client-Info":`gotrue-js/${Ky}`},ah="X-Supabase-Api-Version",Jy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ej=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tj=600*1e3;class Hs extends Error{constructor(n,a,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function pe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class nj extends Hs{constructor(n,a,s){super(n,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function rj(r){return pe(r)&&r.name==="AuthApiError"}class _a extends Hs{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class Rr extends Hs{constructor(n,a,s,o){super(n,s,o),this.name=a,this.status=s}}class bn extends Rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function aj(r){return pe(r)&&r.name==="AuthSessionMissingError"}class fi extends Rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _o extends Rr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class jo extends Rr{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ij(r){return pe(r)&&r.name==="AuthImplicitGrantRedirectError"}class hv extends Rr{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sj extends Rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ih extends Rr{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function Ed(r){return pe(r)&&r.name==="AuthRetryableFetchError"}class fv extends Rr{constructor(n,a,s){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class sh extends Rr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gv=` 	
\r=`.split(""),lj=(()=>{const r=new Array(128);for(let n=0;n<r.length;n+=1)r[n]=-1;for(let n=0;n<gv.length;n+=1)r[gv[n].charCodeAt(0)]=-2;for(let n=0;n<Lo.length;n+=1)r[Lo[n].charCodeAt(0)]=n;return r})();function pv(r,n,a){if(r!==null)for(n.queue=n.queue<<8|r,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Lo[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Lo[s]),n.queuedBits-=6}}function Qy(r,n,a){const s=lj[r];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function mv(r){const n=[],a=h=>{n.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{uj(h,s,a)};for(let h=0;h<r.length;h+=1)Qy(r.charCodeAt(h),o,u);return n.join("")}function oj(r,n){if(r<=127){n(r);return}else if(r<=2047){n(192|r>>6),n(128|r&63);return}else if(r<=65535){n(224|r>>12),n(128|r>>6&63),n(128|r&63);return}else if(r<=1114111){n(240|r>>18),n(128|r>>12&63),n(128|r>>6&63),n(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function cj(r,n){for(let a=0;a<r.length;a+=1){let s=r.charCodeAt(a);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}oj(s,n)}}function uj(r,n,a){if(n.utf8seq===0){if(r<=127){a(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=r&31;else if(n.utf8seq===3)n.codepoint=r&15;else if(n.utf8seq===4)n.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|r&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Ri(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<r.length;o+=1)Qy(r.charCodeAt(o),a,s);return new Uint8Array(n)}function dj(r){const n=[];return cj(r,a=>n.push(a)),new Uint8Array(n)}function ja(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};return r.forEach(o=>pv(o,a,s)),pv(null,a,s),n.join("")}function hj(r){return Math.round(Date.now()/1e3)+r}function fj(){return Symbol("auth-callback")}const Ht=()=>typeof window<"u"&&typeof document<"u",ba={tested:!1,writable:!1},Xy=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ba.tested)return ba.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ba.tested=!0,ba.writable=!0}catch{ba.tested=!0,ba.writable=!1}return ba.writable};function gj(r){const n={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return a.searchParams.forEach((s,o)=>{n[o]=s}),n}const Zy=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),pj=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",wi=async(r,n,a)=>{await r.setItem(n,JSON.stringify(a))},xa=async(r,n)=>{const a=await r.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},$t=async(r,n)=>{await r.removeItem(n)};class Zo{constructor(){this.promise=new Zo.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}Zo.promiseConstructor=Promise;function Rd(r){const n=r.split(".");if(n.length!==3)throw new sh("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!ej.test(n[s]))throw new sh("JWT not in base64url format");return{header:JSON.parse(mv(n[0])),payload:JSON.parse(mv(n[1])),signature:Ri(n[2]),raw:{header:n[0],payload:n[1]}}}async function mj(r){return await new Promise(n=>{setTimeout(()=>n(null),r)})}function vj(r,n){return new Promise((s,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await r(u);if(!n(u,null,h)){s(h);return}}catch(h){if(!n(u,h)){o(h);return}}})()})}function yj(r){return("0"+r.toString(16)).substr(-2)}function bj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,yj).join("")}async function xj(r){const a=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(s);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function wj(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=await xj(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gi(r,n,a=!1){const s=bj();let o=s;a&&(o+="/PASSWORD_RECOVERY"),await wi(r,`${n}-code-verifier`,o);const u=await wj(s);return[u,s===u?"plain":"s256"]}const Sj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _j(r){const n=r.headers.get(ah);if(!n||!n.match(Sj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function jj(r){if(!r)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(r<=n)throw new Error("JWT has expired")}function Ej(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Rj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pi(r){if(!Rj.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Td(){const r={};return new Proxy(r,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Tj(r,n){return new Proxy(r,{get:(a,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const u=s.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,s,o)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,s,o)}})}function vv(r){return JSON.parse(JSON.stringify(r))}const wa=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Cj=[502,503,504];async function yv(r){var n;if(!pj(r))throw new ih(wa(r),0);if(Cj.includes(r.status))throw new ih(wa(r),r.status);let a;try{a=await r.json()}catch(u){throw new _a(wa(u),u)}let s;const o=_j(r);if(o&&o.getTime()>=Jy["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new fv(wa(a),r.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new bn}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new fv(wa(a),r.status,a.weak_password.reasons);throw new nj(wa(a),r.status||500,s)}const Aj=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),a))};async function Se(r,n,a,s){var o;const u=Object.assign({},s?.headers);u[ah]||(u[ah]=Jy["2024-01-01"].name),s?.jwt&&(u.Authorization=`Bearer ${s.jwt}`);const h=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(h.redirect_to=s.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Oj(r,n,a+p,{headers:u,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(g):{data:Object.assign({},g),error:null}}async function Oj(r,n,a,s,o,u){const h=Aj(n,s,o,u);let p;try{p=await r(a,Object.assign({},h))}catch(g){throw console.error(g),new ih(wa(g),0)}if(p.ok||await yv(p),s?.noResolveJson)return p;try{return await p.json()}catch(g){await yv(g)}}function Pn(r){var n;let a=null;kj(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=hj(r.expires_in)));const s=(n=r.user)!==null&&n!==void 0?n:r;return{data:{session:a,user:s},error:null}}function bv(r){const n=Pn(r);return!n.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(n.data.weak_password=r.weak_password),n}function ta(r){var n;return{data:{user:(n=r.user)!==null&&n!==void 0?n:r},error:null}}function Nj(r){return{data:r,error:null}}function Dj(r){const{action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:u}=r,h=Qo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:u},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function xv(r){return r}function kj(r){return r.access_token&&r.refresh_token&&r.expires_in}const Cd=["global","local","others"];class Uj{constructor({url:n="",headers:a={},fetch:s}){this.url=n,this.headers=a,this.fetch=Zy(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Cd[0]){if(Cd.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cd.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,a={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:ta})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:a}=n,s=Qo(n,["options"]),o=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Dj,redirectTo:a?.redirectTo})}catch(a){if(pe(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:ta})}catch(a){if(pe(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,s,o,u,h,p,g;try{const m={nextPage:null,lastPage:0,total:0},v=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:xv});if(v.error)throw v.error;const y=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(g=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);m[`${T}Page`]=_}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(pe(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){pi(n);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:ta})}catch(a){if(pe(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){pi(n);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:ta})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,a=!1){pi(n);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:ta})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){pi(n.userId);try{const{data:a,error:s}=await Se(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:s}}catch(a){if(pe(a))return{data:null,error:a};throw a}}async _deleteFactor(n){pi(n.userId),pi(n.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,s,o,u,h,p,g;try{const m={nextPage:null,lastPage:0,total:0},v=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:xv});if(v.error)throw v.error;const y=await v.json(),x=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,w=(g=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);m[`${T}Page`]=_}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(pe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}}}function wv(r={}){return{getItem:n=>r[n]||null,setItem:(n,a)=>{r[n]=a},removeItem:n=>{delete r[n]}}}const mi={debug:!!(globalThis&&Xy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wy extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Mj extends Wy{}async function zj(r,n,a){mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),mi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await a()}finally{mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(n===0)throw mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Mj(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(mi.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function Lj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fy(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Bj(r){return parseInt(r,16)}function Ij(r){const n=new TextEncoder().encode(r);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function qj(r){var n;const{chainId:a,domain:s,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:g,resources:m,scheme:v,uri:y,version:x}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=r.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const w=Fy(r.address),j=v?`${v}://${s}`:s,_=r.statement?`${r.statement}
`:"",T=`${j} wants you to sign in with your Ethereum account:
${w}

${_}`;let C=`URI: ${y}
Version: ${x}
Chain ID: ${a}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),p&&(C+=`
Not Before: ${p.toISOString()}`),g&&(C+=`
Request ID: ${g}`),m){let E=`
Resources:`;for(const A of m){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);E+=`
- ${A}`}C+=E}return`${T}
${C}`}class xt extends Error{constructor({message:n,code:a,cause:s,name:o}){var u;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(u=o??(s instanceof Error?s.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class Bo extends xt{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function $j({error:r,options:n}){var a,s,o;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(n.mediation==="conditional"&&((s=u.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(e0(h)){if(u.rp.id!==h)return new xt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Hj({error:r,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(e0(s)){if(a.rpId!==s)return new xt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class Gj{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Pj=new Gj;function Vj(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:n,user:a,excludeCredentials:s}=r,o=Qo(r,["challenge","user","excludeCredentials"]),u=Ri(n).buffer,h=Object.assign(Object.assign({},a),{id:Ri(a.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:u,user:h});if(s&&s.length>0){p.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const m=s[g];p.excludeCredentials[g]=Object.assign(Object.assign({},m),{id:Ri(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return p}function Yj(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:n,allowCredentials:a}=r,s=Qo(r,["challenge","allowCredentials"]),o=Ri(n).buffer,u=Object.assign(Object.assign({},s),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const p=a[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:Ri(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function Kj(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:ja(new Uint8Array(r.response.attestationObject)),clientDataJSON:ja(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Jj(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,s=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ja(new Uint8Array(o.authenticatorData)),clientDataJSON:ja(new Uint8Array(o.clientDataJSON)),signature:ja(new Uint8Array(o.signature)),userHandle:o.userHandle?ja(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function e0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Sv(){var r,n;return!!(Ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Qj(r){try{const n=await navigator.credentials.create(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Bo("Browser returned unexpected credential type",n)}:{data:null,error:new Bo("Empty credential response",n)}}catch(n){return{data:null,error:$j({error:n,options:r})}}}async function Xj(r){try{const n=await navigator.credentials.get(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Bo("Browser returned unexpected credential type",n)}:{data:null,error:new Bo("Empty credential response",n)}}catch(n){return{data:null,error:Hj({error:n,options:r})}}}const Zj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Io(...r){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of r)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))s[u]=h;else if(a(h))s[u]=h;else if(n(h)){const p=s[u];n(p)?s[u]=Io(p,h):s[u]=Io(h)}else s[u]=h}return s}function Fj(r,n){return Io(Zj,r,n||{})}function eE(r,n){return Io(Wj,r,n||{})}class tE{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:s,signal:o},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!h)return{data:null,error:p};const g=o??Pj.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:m}=h.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(h.webauthn.type){case"create":{const m=Fj(h.webauthn.credential_options.publicKey,u?.create),{data:v,error:y}=await Qj({publicKey:m,signal:g});return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const m=eE(h.webauthn.credential_options.publicKey,u?.request),{data:v,error:y}=await Xj(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:m,signal:g}));return v?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new _a("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:a,webauthn:s}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Hs("rpId is required for WebAuthn authentication")};try{if(!Sv())return{data:null,error:new _a("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:s},signal:o},{request:u});if(!h)return{data:null,error:p};const{webauthn:g}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:g.type,rpId:a,rpOrigins:s,credential_response:g.credential_response}})}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new _a("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Hs("rpId is required for WebAuthn registration")};try{if(!Sv())return{data:null,error:new _a("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:g,error:m}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:a,rpOrigins:s},signal:o},{create:u});return g?this._verify({factorId:h.id,challengeId:g.challengeId,webauthn:{rpId:a,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:m}}catch(h){return pe(h)?{data:null,error:h}:{data:null,error:new _a("Unexpected error in register",h)}}}}Lj();const nE={url:Z_,storageKey:W_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _v(r,n,a){return await a()}const vi={};class Gs{get jwks(){var n,a;return(a=(n=vi[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){vi[this.storageKey]=Object.assign(Object.assign({},vi[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=vi[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){vi[this.storageKey]=Object.assign(Object.assign({},vi[this.storageKey]),{cachedAt:n})}constructor(n){var a,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},nE),n);if(this.storageKey=u.storageKey,this.instanceID=(a=Gs.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Gs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Ht()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Uj({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Zy(u.fetch),this.lock=u.lock||_v,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Ht()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=zj:this.lock=_v,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Xy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wv(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=wv(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ky}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},s="none";if(Ht()&&(a=gj(window.location.href),this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce")),Ht()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:u}=await this._getSessionFromURL(a,s);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),ij(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return pe(a)?this._returnResult({error:a}):this._returnResult({error:new _a("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,s,o;try{const u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Pn}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const g=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(u){if(pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var a,s,o;try{let u;if("email"in n){const{email:v,password:y,options:x}=n;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await gi(this.storage,this.storageKey)),u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:y,data:(a=x?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:j},xform:Pn})}else if("phone"in n){const{phone:v,password:y,options:x}=n;u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Pn})}else throw new _o("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return await $t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(u){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let a;if("email"in n){const{email:u,password:h,options:p}=n;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bv})}else if("phone"in n){const{phone:u,password:h,options:p}=n;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bv})}else throw new _o("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const u=new fi;return this._returnResult({data:{user:null,session:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,s,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,s,o,u,h,p,g,m,v,y,x;let w,j;if("message"in n)w=n.message,j=n.signature;else{const{chain:_,wallet:T,statement:C,options:E}=n;let A;if(Ht())if(typeof T=="object")A=T;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")A=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=T}const B=new URL((a=E?.url)!==null&&a!==void 0?a:window.location.href),D=await A.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Fy(D[0]);let k=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!k){const U=await A.request({method:"eth_chainId"});k=Bj(U)}const q={domain:B.host,address:I,statement:C,uri:B.href,version:"1",chainId:k,nonce:(o=E?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=E?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=E?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(m=E?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=E?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=qj(q),j=await A.request({method:"personal_sign",params:[Ij(w),I]})}try{const{data:_,error:T}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:j},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Pn});if(T)throw T;if(!_||!_.session||!_.user){const C=new fi;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(pe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(n){var a,s,o,u,h,p,g,m,v,y,x,w;let j,_;if("message"in n)j=n.message,_=n.signature;else{const{chain:T,wallet:C,statement:E,options:A}=n;let B;if(Ht())if(typeof C=="object")B=C;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))B=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=C}const D=new URL((a=A?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in B&&B.signIn){const I=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let k;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")k=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)k=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)j=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),_=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${D.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(s=A?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=A?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((g=A?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((m=A?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((y=(v=A?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...A.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const I=await B.signMessage(new TextEncoder().encode(j),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=I}}try{const{data:T,error:C}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ja(_)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Pn});if(C)throw C;if(!T||!T.session||!T.user){const E=new fi;return this._returnResult({data:{user:null,session:null},error:E})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(pe(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const a=await xa(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(a??"").split("/");try{if(!s&&this.flowType==="pkce")throw new sj;const{data:u,error:h}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:Pn});if(await $t(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new fi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:h})}catch(u){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:a,provider:s,token:o,access_token:u,nonce:h}=n,p=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Pn}),{data:g,error:m}=p;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g||!g.session||!g.user){const v=new fi;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:m})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,s,o,u,h;try{if("email"in n){const{email:p,options:g}=n;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await gi(this.storage,this.storageKey));const{error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(s=g?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in n){const{phone:p,options:g}=n,{data:m,error:v}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:v})}throw new _o("You must provide either an email or phone number.")}catch(p){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var a,s;try{let o,u;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,u=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:p}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Pn});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,m=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(o){if(pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var a,s,o,u,h;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await gi(this.storage,this.storageKey));const m=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:Nj});return!((u=m.data)===null||u===void 0)&&u.url&&Ht()&&!(!((h=n.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(p){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)throw s;if(!a)throw new bn;const{error:o}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:u}=n,{error:h}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:s,type:o,options:u}=n,{data:h,error:p}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new _o("You must provide either an email or phone number and a type")}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await xa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<jd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const h=await xa(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Td()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=Tj(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(-1,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:ta}):await this._useSession(async a=>{var s,o,u;const{data:h,error:p}=a;if(p)throw p;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bn}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:ta})})}catch(a){if(pe(a))return aj(a)&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async s=>{const{data:o,error:u}=s;if(u)throw u;if(!o.session)throw new bn;const h=o.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await gi(this.storage,this.storageKey));const{data:m,error:v}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:ta});if(v)throw v;return h.user=m.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new bn;const a=Date.now()/1e3;let s=a,o=!0,u=null;const{payload:h}=Rd(n.access_token);if(h.exp&&(s=h.exp,o=s<=a),o){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(pe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var s;if(!n){const{data:h,error:p}=a;if(p)throw p;n=(s=h.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new bn;const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!Ht())throw new jo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new jo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new hv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jo("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new hv("No code detected.");const{data:E,error:A}=await this._exchangeCodeForSession(n.code);if(A)throw A;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:p,expires_at:g,token_type:m}=n;if(!u||!p||!h||!m)throw new jo("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(p);let x=v+y;g&&(x=parseInt(g));const w=x-v;w*1e3<=xi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const j=x-y;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,v);const{data:_,error:T}=await this._getUser(u);if(T)throw T;const C={provider_token:s,provider_refresh_token:o,access_token:u,expires_in:y,expires_at:x,refresh_token:h,token_type:m,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(s){if(pe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await xa(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const h=(s=o.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(rj(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=fj(),s={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async a=>{var s,o;try{const{data:{session:u},error:h}=a;if(h)throw h;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,a={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await gi(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(u){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:s,error:o}=await this._useSession(async u=>{var h,p,g,m,v;const{data:y,error:x}=u;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Ht()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:n.provider,url:s?.url},error:null})}catch(s){if(pe(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var s;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:h,provider:p,token:g,access_token:m,nonce:v}=n,y=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=u?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:p,id_token:g,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Pn}),{data:x,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new fi}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(o){if(await $t(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var s,o;const{data:u,error:h}=a;if(h)throw h;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await vj(async o=>(o>0&&await mj(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Pn})),(o,u)=>{const h=200*Math.pow(2,o);return u&&Ed(u)&&Date.now()+h-s<xi})}catch(s){if(this._debug(a,"error",s),pe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",s),Ht()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await xa(this.storage,this.storageKey);if(o&&this.userStorage){let h=await xa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await wi(this.userStorage,this.storageKey+"-user",h)),o.user=(n=h?.user)!==null&&n!==void 0?n:Td()}else if(o&&!o.user&&!o.user){const h=await xa(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await $t(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,o)):o.user=Td()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<jd;if(this._debug(s,`session has${u?"":" not"} expired with margin of ${jd}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Ed(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(o.access_token);!p&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var a,s;if(!n)throw new bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Zo;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new bn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(o,"error",u),pe(u)){const h={data:null,error:u};return Ed(u)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:a});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,a)}catch(g){u.push(g)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await $t(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await wi(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const u=vv(o);await wi(this.storage,this.storageKey,u)}else{const o=vv(a);await wi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $t(this.storage,this.storageKey),await $t(this.storage,this.storageKey+"-code-verifier"),await $t(this.storage,this.storageKey+"-user"),this.userStorage&&await $t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ht()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),xi);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/xi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${xi}ms, refresh threshold is ${rh} ticks`),o<=rh&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Wy)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,s){const o=[`provider=${encodeURIComponent(a)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[u,h]=await gi(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(p.toString())}if(s?.queryParams){const u=new URLSearchParams(s.queryParams);o.push(u.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):await Se(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var s,o;const{data:u,error:h}=a;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:m}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(s=u?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Kj(n.webauthn.credential_response):Jj(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Vj(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Yj(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=a?.factors)!==null&&n!==void 0?n:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var n,a;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Rd(s.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((a=(n=s.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const m=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new bn})})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new bn});const h=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Ht()&&!a?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new bn});const h=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Ht()&&!a?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;return s?this._returnResult({data:null,error:s}):a?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new bn})})}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bn})})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let s=a.keys.find(p=>p.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(p=>p.kid===n),s&&this.jwks_cached_at+tj>o)return s;const{data:u,error:h}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,s=u.keys.find(p=>p.kid===n),!s)?null:s}async getClaims(n,a={}){try{let s=n;if(!s){const{data:w,error:j}=await this.getSession();if(j||!w.session)return this._returnResult({data:null,error:j});s=w.session.access_token}const{header:o,payload:u,signature:h,raw:{header:p,payload:g}}=Rd(s);a?.allowExpired||jj(u.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!m){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:u,header:o,signature:h},error:null}}const v=Ej(o.alg),y=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,h,dj(`${p}.${g}`)))throw new sh("Invalid JWT signature");return{data:{claims:u,header:o,signature:h},error:null}}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}}Gs.nextInstanceID={};const rE=Gs,aE="2.89.0";let Es="";typeof Deno<"u"?Es="deno":typeof document<"u"?Es="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Es="react-native":Es="node";const iE={"X-Client-Info":`supabase-js-${Es}/${aE}`},sE={headers:iE},lE={schema:"public"},oE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cE={};function Ps(r){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ps(r)}function uE(r,n){if(Ps(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Ps(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function dE(r){var n=uE(r,"string");return Ps(n)=="symbol"?n:n+""}function hE(r,n,a){return(n=dE(n))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}function jv(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}function ot(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?jv(Object(a),!0).forEach(function(s){hE(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):jv(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const fE=r=>r?(...n)=>r(...n):(...n)=>fetch(...n),gE=()=>Headers,pE=(r,n,a)=>{const s=fE(a),o=gE();return async(u,h)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:r;let m=new o(h?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),s(u,ot(ot({},h),{},{headers:m}))}};function mE(r){return r.endsWith("/")?r:r+"/"}function vE(r,n){var a,s;const{db:o,auth:u,realtime:h,global:p}=r,{db:g,auth:m,realtime:v,global:y}=n,x={db:ot(ot({},g),o),auth:ot(ot({},m),u),realtime:ot(ot({},v),h),storage:{},global:ot(ot(ot({},y),p),{},{headers:ot(ot({},(a=y?.headers)!==null&&a!==void 0?a:{}),(s=p?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?x.accessToken=r.accessToken:delete x.accessToken,x}function yE(r){const n=r?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mE(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var bE=class extends rE{constructor(r){super(r)}},xE=class{constructor(r,n,a){var s,o;this.supabaseUrl=r,this.supabaseKey=n;const u=yE(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:lE,realtime:cE,auth:ot(ot({},oE),{},{storageKey:h}),global:sE},g=vE(a??{},p);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=g.auth)!==null&&m!==void 0?m:{},this.headers,g.global.fetch)}this.fetch=pE(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(ot({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new F1(new URL("rest/v1",u).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new X_(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new J1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,n,a;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(n=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,storageKey:u,flowType:h,lock:p,debug:g,throwOnError:m},v,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bE({url:this.authUrl.href,headers:ot(ot({},x),v),storageKey:u,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,flowType:h,lock:p,debug:g,throwOnError:m,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new m_(this.realtimeUrl.href,ot(ot({},r),{},{params:ot(ot({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const wE=(r,n,a)=>new xE(r,n,a);function SE(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const n=r.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}SE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _E="https://hocbnifuactbvmyjraxy.supabase.co",jE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvY2JuaWZ1YWN0YnZteWpyYXh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNzQ2OTgsImV4cCI6MjA4Mjk1MDY5OH0.q33wfcASsQf0Fec3S6fa5CVG2KC9m5Q912Szu7KIyN0",Ce=wE(_E,jE),EE={async translateRecipe(r,n="EN-US"){const a=[];a.push(r.title||""),a.push(r.description||"");let s=2,o=2;if(r.type==="bread"){const h=r.flours||[],p=r.breadIngredients||[];h.forEach(g=>a.push(g.name||"")),p.forEach(g=>a.push(g.name||"")),o=s+h.length+p.length}else{const h=r.ingredients||[];h.forEach(p=>{const g=typeof p=="string"?p:p.name||"";a.push(g)}),o=s+h.length}const u=r.steps||[];if(u.forEach(h=>{const p=typeof h=="object"&&h!==null?h.text||"":h||"";a.push(p)}),a.length===0)return r;try{const h=await this.translateList(a,n),p={...r};if(p.title=h[0],p.description=h[1],r.type==="bread"){const g=(r.flours||[]).length,m=(r.breadIngredients||[]).length;p.flours=(r.flours||[]).map((v,y)=>({...v,name:h[s+y]})),p.breadIngredients=(r.breadIngredients||[]).map((v,y)=>({...v,name:h[s+g+y]}))}else p.ingredients=(r.ingredients||[]).map((g,m)=>{const v=h[s+m];return typeof g=="string"?v:{...g,name:v}});return p.steps=u.map((g,m)=>{const v=h[o+m];return typeof g=="object"&&g!==null?{...g,text:v}:v}),p}catch(h){throw console.error("Translation failed:",h),h}},async translateList(r,n){const{data:a,error:s}=await Ce.functions.invoke("translate",{body:{text:r,target_lang:n}});if(s)throw console.error("Supabase Function Invocation Error:",s),new Error(`Translation Error: ${s.message}`);if(a&&a.error)throw console.error("Edge Function returned error:",a.error),new Error(`Translation Error: ${a.error}`);return a.translations.map(o=>o.text)}},Gt={async fetchRecipes(r){let n=[];try{const{data:o,error:u}=await Ce.from("recipes").select("*, recipe_sources(url)").order("order_index",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});if(u)throw u;n=o.map(Wr)}catch(o){console.warn("Supabase fetch failed, falling back to LocalStorage:",o);try{const u=localStorage.getItem("local_recipes");u&&(n=JSON.parse(u).map(h=>typeof Wr=="function"?Wr(h):h))}catch(u){console.error("LocalStorage read error:",u),n=[]}}if(!r)return console.warn("fetchRecipes: No currentUser, returning empty list."),[];console.log("fetchRecipes: Filtering for user:",r);let a=!1;const s=`user_prefs_${r.id}`;try{const o=JSON.parse(localStorage.getItem(s)||"{}");o.show_master_recipes!==void 0&&(a=o.show_master_recipes===!0,console.log("Using LocalStorage preference:",a))}catch(o){console.warn("Local preference read error",o)}try{const{data:o}=await Ce.from("app_users").select("show_master_recipes").eq("id",r.id).single();o&&o.show_master_recipes!==null&&(a=o.show_master_recipes===!0)}catch(o){console.warn("Failed to fetch user preference from DB",o)}return n.filter(o=>{if(r.id==="admin")return!0;const u=o.tags||[],h=u.find(v=>v&&v.startsWith("owner:"));if(console.log(`Recipe ${o.title} tags:`,u,"OwnerTag:",h),!h)return u.includes("public")?!0:a?(console.log("Visible (Master/Implicit)"),!0):!1;const p=h===`owner:${r.id}`,g=u.includes("public"),m=h==="owner:yoshito";return!!(p||g||m&&a)})},_filterRecipesInApp(r,n){return this.fetchRecipes(n)},async uploadImage(r){const n=r.name.split(".").pop(),s=`${`${Date.now()}-${Math.random().toString(36).substring(7)}.${n}`}`,{error:o}=await Ce.storage.from("recipe-images").upload(s,r);if(o)throw o;const{data:u}=Ce.storage.from("recipe-images").getPublicUrl(s);return u.publicUrl},async createRecipe(r,n){console.log("createRecipe called with user:",n);const{id:a,created_at:s,sourceUrl:o,...u}=r;if(u.image instanceof File&&(u.image=await this.uploadImage(u.image)),n){const g=(u.tags||[]).filter(m=>!m.startsWith("owner:"));u.tags=[...g,`owner:${n.id}`],console.log("Added owner tag. New tags:",u.tags)}else console.warn("createRecipe: No currentUser provided! Recipe will be public.");const h=Ad(u);try{const{data:p,error:g}=await Ce.from("recipes").insert([h]).select().single();if(g)throw g;if(o){const{error:m}=await Ce.from("recipe_sources").insert([{recipe_id:p.id,url:o}]);m&&console.error("Failed to save source URL:",m)}return Wr({...p,recipe_sources:o?[{url:o}]:[]})}catch(p){console.warn("Supabase create failed, using LocalStorage fallback:",p);const g=Date.now(),m={...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),tags:u.tags||[]},v=Ad(m);v.id=g,v.created_at=m.created_at,console.log("Saving to LocalStorage:",v);try{const y=localStorage.getItem("local_recipes"),x=y?JSON.parse(y):[];x.push(v),localStorage.setItem("local_recipes",JSON.stringify(x)),console.log("Saved to LocalStorage success. Total recipes:",x.length)}catch(y){throw console.error("Failed to save to LocalStorage:",y),p}return Wr(v)}},async updateRecipe(r){const{id:n,created_at:a,sourceUrl:s,...o}=r;o.image instanceof File&&(o.image=await this.uploadImage(o.image));const u=Ad(o);try{const{data:h,error:p}=await Ce.from("recipes").update(u).eq("id",r.id).select().single();if(p)throw p;if(s!==void 0&&(await Ce.from("recipe_sources").delete().eq("recipe_id",r.id),s)){const{error:g}=await Ce.from("recipe_sources").insert([{recipe_id:r.id,url:s}]);g&&console.error("Failed to update source URL:",g)}return Wr({...h,recipe_sources:s?[{url:s}]:[]})}catch(h){console.warn("Supabase update failed, using LocalStorage fallback:",h);const p=localStorage.getItem("local_recipes");if(p){let g=JSON.parse(p);const m=g.findIndex(v=>v.id==r.id);if(m!==-1){const v={...g[m],...u,updated_at:new Date().toISOString()};return g[m]=v,localStorage.setItem("local_recipes",JSON.stringify(g)),Wr(v)}}throw h}},async duplicateRecipe(r,n){const{id:a,created_at:s,updated_at:o,image:u,...h}=r;h.title=`${h.title} ()`;let p=null;if(u)try{const g=u.split("/").pop(),m=`copy-${Date.now()}-${g}`,{error:v}=await Ce.storage.from("recipe-images").copy(g,m);if(v)console.warn("Image copy failed, using original URL:",v),p=u;else{const{data:y}=Ce.storage.from("recipe-images").getPublicUrl(m);p=y.publicUrl}}catch(g){console.warn("Image copy logic error:",g),p=u}return h.image=p,await this.createRecipe(h,n)},async fetchDeletedRecipes(){const{data:r,error:n}=await Ce.from("deleted_recipes").select("*").order("deleted_at",{ascending:!1});if(n)throw n;return r.map(RE)},async getDeletedCount(){const{count:r,error:n}=await Ce.from("deleted_recipes").select("*",{count:"exact",head:!0});if(n)throw n;return r},async deleteRecipe(r){try{const{data:n,error:a}=await Ce.from("recipes").select("*").eq("id",r).single();if(a)throw a;const{error:s}=await Ce.from("deleted_recipes").insert([{original_id:n.id,title:n.title,description:n.description,image:n.image,prep_time:n.prep_time,cook_time:n.cook_time,servings:n.servings,tags:n.tags,ingredients:n.ingredients,steps:n.steps,created_at:n.created_at}]);if(s)throw s;const{error:o}=await Ce.from("recipes").delete().eq("id",r);if(o)throw o;return!0}catch(n){console.warn("Supabase delete failed, using LocalStorage fallback:",n);const a=localStorage.getItem("local_recipes");if(a){let s=JSON.parse(a);const o=s.length;if(s=s.filter(u=>u.id!=r),s.length<o)return localStorage.setItem("local_recipes",JSON.stringify(s)),!0}throw n}},async restoreRecipe(r){const{data:n,error:a}=await Ce.from("deleted_recipes").select("*").eq("id",r).single();if(a)throw a;const{error:s}=await Ce.from("recipes").insert([{title:n.title,description:n.description,image:n.image,prep_time:n.prep_time,cook_time:n.cook_time,servings:n.servings,tags:n.tags,ingredients:n.ingredients,steps:n.steps,created_at:n.created_at}]);if(s)throw s;const{error:o}=await Ce.from("deleted_recipes").delete().eq("id",r);if(o)throw o;return!0},async hardDeleteRecipe(r){const{error:n}=await Ce.from("deleted_recipes").delete().eq("id",r);if(n)throw n;return!0},async fetchRecentRecipes(){const{data:r,error:n}=await Ce.from("recent_views").select("recipe_id").order("viewed_at",{ascending:!1}).limit(20);if(n)throw n;return r.map(a=>a.recipe_id)},async addToHistory(r){const{error:n}=await Ce.from("recent_views").upsert({recipe_id:r,viewed_at:new Date().toISOString()},{onConflict:"recipe_id"});if(n)throw n;return!0},async updateOrder(r){const n=r.map(a=>Ce.from("recipes").update({order_index:a.order_index}).eq("id",a.id));await Promise.all(n)},async exportAllRecipes(){return await this.fetchRecipes()},async importRecipes(r){if(!Array.isArray(r))throw new Error("Invalid backup format");let n=0,a=[];for(const s of r)try{await this.createRecipe(s),n++}catch(o){console.error("Import failed for recipe:",s.title,o),a.push({title:s.title,error:o.message})}return{success:!0,count:n,errors:a}}},Ad=r=>{let n=r.ingredients||[];const a={_meta:!0,type:r.type||"normal"};if(r.ingredientGroups&&r.ingredientGroups.length>0&&(a.groups=r.ingredientGroups),r.stepGroups&&r.stepGroups.length>0){const o=r.steps||[],u=r.stepGroups.map(h=>({...h,count:o.filter(p=>p.groupId===h.id).length}));a.stepGroups=u}if(r.type==="bread"){const o=(r.flours||[]).map(h=>({...h,_group:"flour"})),u=(r.breadIngredients||[]).map(h=>({...h,_group:"other"}));n=[a,...o,...u]}else n=[a,...n];const s=(r.steps||[]).map(o=>typeof o=="string"?o:o.text);return{title:r.title,description:r.description,image:r.image,servings:r.servings,course:r.course,category:r.category,store_name:r.storeName,ingredients:n,steps:s,tags:r.tags||[]}},Wr=r=>{const n=r.ingredients||[];let a="normal",s=[],o=[],u=[],h=[],p=n;if(Array.isArray(n)&&n.length>0&&n[0]._meta){const m=n[0];a=m.type||"normal",m.groups&&(u=m.groups),m.stepGroups&&(h=m.stepGroups);const v=n.slice(1);a==="bread"?(s=v.filter(y=>y._group==="flour").map(({_group:y,...x})=>x),o=v.filter(y=>y._group==="other").map(({_group:y,...x})=>x),p=[...s,...o]):p=v}let g=r.steps||[];if(h.length>0&&Array.isArray(g)){let m=0;g=g.map(y=>({text:y}));const v=[];for(h.forEach(y=>{const x=y.count||0;for(let w=0;w<x;w++)m<g.length&&(v.push({...g[m],text:g[m].text,groupId:y.id}),m++)});m<g.length;)v.push({...g[m],groupId:"default"}),m++;g=v}return{...r,prepTime:r.prep_time,cookTime:r.cook_time,storeName:r.store_name,type:a,flours:s,breadIngredients:o,ingredientGroups:u,stepGroups:h,ingredients:p,steps:g.length>0&&typeof g[0]=="object"?g:r.steps,sourceUrl:r.recipe_sources&&r.recipe_sources.length>0?r.recipe_sources[0].url:""}},RE=r=>({...Wr(r),deletedAt:r.deleted_at,originalId:r.original_id}),Ev=Object.freeze(Object.defineProperty({__proto__:null,recipeService:Gt},Symbol.toStringTag,{value:"Module"})),Ns={async fetchAllUsers(){const{data:r,error:n}=await Ce.from("app_users").select("*").order("created_at",{ascending:!1});if(n)throw n;const{data:a,error:s}=await Ce.rpc("get_user_recipe_counts");return s?(console.error("Failed to fetch counts via RPC",s),r.map(o=>({...o,recipeCount:0}))):r.map(o=>{const u=a.find(h=>h.user_id===o.id);return{...o,recipeCount:u?u.count:0}})},async deleteUser(r){const{error:n}=await Ce.from("app_users").delete().eq("id",r);if(n)throw n;return!0},async updateUser(r,n){const{data:a,error:s}=await Ce.from("app_users").update(n).eq("id",r).select("id, show_master_recipes").single();if(s)throw s;return a},async getSecurityQuestion(r){const{data:n,error:a}=await Ce.from("app_users").select("secret_question").eq("id",r).single();if(a||!n)throw new Error("");return n.secret_question},async verifySecurityAnswer(r,n){const{data:a,error:s}=await Ce.from("app_users").select("secret_answer").eq("id",r).single();if(s||!a)throw new Error("");return a.secret_answer===n},async resetPassword(r,n){const{error:a}=await Ce.from("app_users").update({password:n}).eq("id",r);if(a)throw a;return!0},async updateLastLogin(r){const{error:n}=await Ce.from("app_users").update({last_login_at:new Date}).eq("id",r);n&&console.error("Failed to update last login",n)}},Od=Object.freeze(Object.defineProperty({__proto__:null,userService:Ns},Symbol.toStringTag,{value:"Module"})),t0=R.createContext(null),TE=({children:r})=>{const[n,a]=R.useState(null),[s,o]=R.useState(!0);R.useEffect(()=>{const g=localStorage.getItem("recipe_app_user");g&&a(JSON.parse(g)),o(!1)},[]);const u=async(g,m,v)=>{try{const{data:y,error:x}=await Ce.from("app_users").select("id, password").eq("id",g).single();if(x||!y)throw new Error(" (ID)");if(y.password!==m)throw new Error("");if(y.password!==m)throw new Error("");const w={id:g};a(w),Ns.updateLastLogin(g).catch(j=>console.error(j)),v?localStorage.setItem("recipe_app_user",JSON.stringify(w)):localStorage.removeItem("recipe_app_user")}catch(y){throw y.message.includes("JSON")?y:(console.error("Login Error:",y),new Error(y.message===""?y.message:"ID"))}},h=async(g,m,v,y)=>{const{error:x}=await Ce.from("app_users").insert([{id:g,password:m,secret_question:v||null,secret_answer:y||null}]);if(x)throw console.error("Register Error:",x),x.code==="23505"?new Error("ID"):new Error(": "+(x.message||""));return!0},p=()=>{a(null),localStorage.removeItem("recipe_app_user")};return c.jsx(t0.Provider,{value:{user:n,login:u,logout:p,register:h,loading:s},children:r})},Ah=()=>R.useContext(t0),lh=["","MARUGO-D","MARUGO-OTTO","MARUGO-S","","","MARUGO","MARUGO2","MARUGO GRANDE","MARUGO MARUNOUCHI","","MARUGO YOTSUYA","371BAR","","BAR PELOTA","Claudia2","BISTRO CAVACAVA","eric'S","MITAN","","SOBA-JU","Bar Violet","X&C"," "],CE=[{code:"EN-US",label:" English",name:"English"},{code:"JA",label:" Japanese",name:"Japanese"},{code:"FR",label:" French",name:"French"},{code:"IT",label:" Italian",name:"Italian"},{code:"ES",label:" Spanish",name:"Spanish"},{code:"ZH",label:" Chinese",name:"Chinese"}];var yi={},Nd={exports:{}},Dd,Rv;function AE(){if(Rv)return Dd;Rv=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dd=r,Dd}var kd,Tv;function OE(){if(Tv)return kd;Tv=1;var r=AE();function n(){}function a(){}return a.resetWarningCache=n,kd=function(){function s(h,p,g,m,v,y){if(y!==r){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function o(){return s}var u={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:a,resetWarningCache:n};return u.PropTypes=u,u},kd}var Cv;function n0(){return Cv||(Cv=1,Nd.exports=OE()()),Nd.exports}var Ud,Av;function r0(){return Av||(Av=1,Ud={L:1,M:0,Q:3,H:2}),Ud}var Md,Ov;function a0(){return Ov||(Ov=1,Md={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Md}var zd,Nv;function NE(){if(Nv)return zd;Nv=1;var r=a0();function n(a){this.mode=r.MODE_8BIT_BYTE,this.data=a}return n.prototype={getLength:function(a){return this.data.length},write:function(a){for(var s=0;s<this.data.length;s++)a.put(this.data.charCodeAt(s),8)}},zd=n,zd}var Ld,Dv;function DE(){if(Dv)return Ld;Dv=1;var r=r0();function n(a,s){this.totalCount=a,this.dataCount=s}return n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(a,s){var o=n.getRsBlockTable(a,s);if(o==null)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+s);for(var u=o.length/3,h=new Array,p=0;p<u;p++)for(var g=o[p*3+0],m=o[p*3+1],v=o[p*3+2],y=0;y<g;y++)h.push(new n(m,v));return h},n.getRsBlockTable=function(a,s){switch(s){case r.L:return n.RS_BLOCK_TABLE[(a-1)*4+0];case r.M:return n.RS_BLOCK_TABLE[(a-1)*4+1];case r.Q:return n.RS_BLOCK_TABLE[(a-1)*4+2];case r.H:return n.RS_BLOCK_TABLE[(a-1)*4+3];default:return}},Ld=n,Ld}var Bd,kv;function kE(){if(kv)return Bd;kv=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(n){var a=Math.floor(n/8);return(this.buffer[a]>>>7-n%8&1)==1},put:function(n,a){for(var s=0;s<a;s++)this.putBit((n>>>a-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(n){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),n&&(this.buffer[a]|=128>>>this.length%8),this.length++}},Bd=r,Bd}var Id,Uv;function i0(){if(Uv)return Id;Uv=1;for(var r={glog:function(a){if(a<1)throw new Error("glog("+a+")");return r.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return r.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)r.EXP_TABLE[n]=1<<n;for(var n=8;n<256;n++)r.EXP_TABLE[n]=r.EXP_TABLE[n-4]^r.EXP_TABLE[n-5]^r.EXP_TABLE[n-6]^r.EXP_TABLE[n-8];for(var n=0;n<255;n++)r.LOG_TABLE[r.EXP_TABLE[n]]=n;return Id=r,Id}var qd,Mv;function s0(){if(Mv)return qd;Mv=1;var r=i0();function n(a,s){if(a.length==null)throw new Error(a.length+"/"+s);for(var o=0;o<a.length&&a[o]==0;)o++;this.num=new Array(a.length-o+s);for(var u=0;u<a.length-o;u++)this.num[u]=a[u+o]}return n.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var s=new Array(this.getLength()+a.getLength()-1),o=0;o<this.getLength();o++)for(var u=0;u<a.getLength();u++)s[o+u]^=r.gexp(r.glog(this.get(o))+r.glog(a.get(u)));return new n(s,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var s=r.glog(this.get(0))-r.glog(a.get(0)),o=new Array(this.getLength()),u=0;u<this.getLength();u++)o[u]=this.get(u);for(var u=0;u<a.getLength();u++)o[u]^=r.gexp(r.glog(a.get(u))+s);return new n(o,0).mod(a)}},qd=n,qd}var $d,zv;function UE(){if(zv)return $d;zv=1;var r=a0(),n=s0(),a=i0(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(u){for(var h=u<<10;o.getBCHDigit(h)-o.getBCHDigit(o.G15)>=0;)h^=o.G15<<o.getBCHDigit(h)-o.getBCHDigit(o.G15);return(u<<10|h)^o.G15_MASK},getBCHTypeNumber:function(u){for(var h=u<<12;o.getBCHDigit(h)-o.getBCHDigit(o.G18)>=0;)h^=o.G18<<o.getBCHDigit(h)-o.getBCHDigit(o.G18);return u<<12|h},getBCHDigit:function(u){for(var h=0;u!=0;)h++,u>>>=1;return h},getPatternPosition:function(u){return o.PATTERN_POSITION_TABLE[u-1]},getMask:function(u,h,p){switch(u){case s.PATTERN000:return(h+p)%2==0;case s.PATTERN001:return h%2==0;case s.PATTERN010:return p%3==0;case s.PATTERN011:return(h+p)%3==0;case s.PATTERN100:return(Math.floor(h/2)+Math.floor(p/3))%2==0;case s.PATTERN101:return h*p%2+h*p%3==0;case s.PATTERN110:return(h*p%2+h*p%3)%2==0;case s.PATTERN111:return(h*p%3+(h+p)%2)%2==0;default:throw new Error("bad maskPattern:"+u)}},getErrorCorrectPolynomial:function(u){for(var h=new n([1],0),p=0;p<u;p++)h=h.multiply(new n([1,a.gexp(p)],0));return h},getLengthInBits:function(u,h){if(1<=h&&h<10)switch(u){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+u)}else if(h<27)switch(u){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+u)}else if(h<41)switch(u){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+u)}else throw new Error("type:"+h)},getLostPoint:function(u){for(var h=u.getModuleCount(),p=0,g=0;g<h;g++)for(var m=0;m<h;m++){for(var v=0,y=u.isDark(g,m),x=-1;x<=1;x++)if(!(g+x<0||h<=g+x))for(var w=-1;w<=1;w++)m+w<0||h<=m+w||x==0&&w==0||y==u.isDark(g+x,m+w)&&v++;v>5&&(p+=3+v-5)}for(var g=0;g<h-1;g++)for(var m=0;m<h-1;m++){var j=0;u.isDark(g,m)&&j++,u.isDark(g+1,m)&&j++,u.isDark(g,m+1)&&j++,u.isDark(g+1,m+1)&&j++,(j==0||j==4)&&(p+=3)}for(var g=0;g<h;g++)for(var m=0;m<h-6;m++)u.isDark(g,m)&&!u.isDark(g,m+1)&&u.isDark(g,m+2)&&u.isDark(g,m+3)&&u.isDark(g,m+4)&&!u.isDark(g,m+5)&&u.isDark(g,m+6)&&(p+=40);for(var m=0;m<h;m++)for(var g=0;g<h-6;g++)u.isDark(g,m)&&!u.isDark(g+1,m)&&u.isDark(g+2,m)&&u.isDark(g+3,m)&&u.isDark(g+4,m)&&!u.isDark(g+5,m)&&u.isDark(g+6,m)&&(p+=40);for(var _=0,m=0;m<h;m++)for(var g=0;g<h;g++)u.isDark(g,m)&&_++;var T=Math.abs(100*_/h/h-50)/5;return p+=T*10,p}};return $d=o,$d}var Hd,Lv;function ME(){if(Lv)return Hd;Lv=1;var r=NE(),n=DE(),a=kE(),s=UE(),o=s0();function u(p,g){this.typeNumber=p,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=u.prototype;return h.addData=function(p){var g=new r(p);this.dataList.push(g),this.dataCache=null},h.isDark=function(p,g){if(p<0||this.moduleCount<=p||g<0||this.moduleCount<=g)throw new Error(p+","+g);return this.modules[p][g]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var g=n.getRSBlocks(p,this.errorCorrectLevel),m=new a,v=0,y=0;y<g.length;y++)v+=g[y].dataCount;for(var y=0;y<this.dataList.length;y++){var x=this.dataList[y];m.put(x.mode,4),m.put(x.getLength(),s.getLengthInBits(x.mode,p)),x.write(m)}if(m.getLengthInBits()<=v*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(p,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var m=0;m<this.moduleCount;m++){this.modules[m]=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++)this.modules[m][v]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,g),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},h.setupPositionProbePattern=function(p,g){for(var m=-1;m<=7;m++)if(!(p+m<=-1||this.moduleCount<=p+m))for(var v=-1;v<=7;v++)g+v<=-1||this.moduleCount<=g+v||(0<=m&&m<=6&&(v==0||v==6)||0<=v&&v<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=v&&v<=4?this.modules[p+m][g+v]=!0:this.modules[p+m][g+v]=!1)},h.getBestMaskPattern=function(){for(var p=0,g=0,m=0;m<8;m++){this.makeImpl(!0,m);var v=s.getLostPoint(this);(m==0||p>v)&&(p=v,g=m)}return g},h.createMovieClip=function(p,g,m){var v=p.createEmptyMovieClip(g,m),y=1;this.make();for(var x=0;x<this.modules.length;x++)for(var w=x*y,j=0;j<this.modules[x].length;j++){var _=j*y,T=this.modules[x][j];T&&(v.beginFill(0,100),v.moveTo(_,w),v.lineTo(_+y,w),v.lineTo(_+y,w+y),v.lineTo(_,w+y),v.endFill())}return v},h.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},h.setupPositionAdjustPattern=function(){for(var p=s.getPatternPosition(this.typeNumber),g=0;g<p.length;g++)for(var m=0;m<p.length;m++){var v=p[g],y=p[m];if(this.modules[v][y]==null)for(var x=-2;x<=2;x++)for(var w=-2;w<=2;w++)x==-2||x==2||w==-2||w==2||x==0&&w==0?this.modules[v+x][y+w]=!0:this.modules[v+x][y+w]=!1}},h.setupTypeNumber=function(p){for(var g=s.getBCHTypeNumber(this.typeNumber),m=0;m<18;m++){var v=!p&&(g>>m&1)==1;this.modules[Math.floor(m/3)][m%3+this.moduleCount-8-3]=v}for(var m=0;m<18;m++){var v=!p&&(g>>m&1)==1;this.modules[m%3+this.moduleCount-8-3][Math.floor(m/3)]=v}},h.setupTypeInfo=function(p,g){for(var m=this.errorCorrectLevel<<3|g,v=s.getBCHTypeInfo(m),y=0;y<15;y++){var x=!p&&(v>>y&1)==1;y<6?this.modules[y][8]=x:y<8?this.modules[y+1][8]=x:this.modules[this.moduleCount-15+y][8]=x}for(var y=0;y<15;y++){var x=!p&&(v>>y&1)==1;y<8?this.modules[8][this.moduleCount-y-1]=x:y<9?this.modules[8][15-y-1+1]=x:this.modules[8][15-y-1]=x}this.modules[this.moduleCount-8][8]=!p},h.mapData=function(p,g){for(var m=-1,v=this.moduleCount-1,y=7,x=0,w=this.moduleCount-1;w>0;w-=2)for(w==6&&w--;;){for(var j=0;j<2;j++)if(this.modules[v][w-j]==null){var _=!1;x<p.length&&(_=(p[x]>>>y&1)==1);var T=s.getMask(g,v,w-j);T&&(_=!_),this.modules[v][w-j]=_,y--,y==-1&&(x++,y=7)}if(v+=m,v<0||this.moduleCount<=v){v-=m,m=-m;break}}},u.PAD0=236,u.PAD1=17,u.createData=function(p,g,m){for(var v=n.getRSBlocks(p,g),y=new a,x=0;x<m.length;x++){var w=m[x];y.put(w.mode,4),y.put(w.getLength(),s.getLengthInBits(w.mode,p)),w.write(y)}for(var j=0,x=0;x<v.length;x++)j+=v[x].dataCount;if(y.getLengthInBits()>j*8)throw new Error("code length overflow. ("+y.getLengthInBits()+">"+j*8+")");for(y.getLengthInBits()+4<=j*8&&y.put(0,4);y.getLengthInBits()%8!=0;)y.putBit(!1);for(;!(y.getLengthInBits()>=j*8||(y.put(u.PAD0,8),y.getLengthInBits()>=j*8));)y.put(u.PAD1,8);return u.createBytes(y,v)},u.createBytes=function(p,g){for(var m=0,v=0,y=0,x=new Array(g.length),w=new Array(g.length),j=0;j<g.length;j++){var _=g[j].dataCount,T=g[j].totalCount-_;v=Math.max(v,_),y=Math.max(y,T),x[j]=new Array(_);for(var C=0;C<x[j].length;C++)x[j][C]=255&p.buffer[C+m];m+=_;var E=s.getErrorCorrectPolynomial(T),A=new o(x[j],E.getLength()-1),B=A.mod(E);w[j]=new Array(E.getLength()-1);for(var C=0;C<w[j].length;C++){var D=C+B.getLength()-w[j].length;w[j][C]=D>=0?B.get(D):0}}for(var I=0,C=0;C<g.length;C++)I+=g[C].totalCount;for(var k=new Array(I),q=0,C=0;C<v;C++)for(var j=0;j<g.length;j++)C<x[j].length&&(k[q++]=x[j][C]);for(var C=0;C<y;C++)for(var j=0;j<g.length;j++)C<w[j].length&&(k[q++]=w[j][C]);return k},Hd=u,Hd}var Eo={},Bv;function zE(){if(Bv)return Eo;Bv=1,Object.defineProperty(Eo,"__esModule",{value:!0});var r=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])}return m},n=n0(),a=u(n),s=Vs(),o=u(s);function u(m){return m&&m.__esModule?m:{default:m}}function h(m,v){var y={};for(var x in m)v.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(m,x)&&(y[x]=m[x]);return y}var p={bgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,bgD:a.default.string.isRequired,fgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,fgD:a.default.string.isRequired,size:a.default.number.isRequired,title:a.default.string,viewBoxSize:a.default.number.isRequired,xmlns:a.default.string},g=(0,s.forwardRef)(function(m,v){var y=m.bgColor,x=m.bgD,w=m.fgD,j=m.fgColor,_=m.size,T=m.title,C=m.viewBoxSize,E=m.xmlns,A=E===void 0?"http://www.w3.org/2000/svg":E,B=h(m,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return o.default.createElement("svg",r({},B,{height:_,ref:v,viewBox:"0 0 "+C+" "+C,width:_,xmlns:A}),T?o.default.createElement("title",null,T):null,o.default.createElement("path",{d:x,fill:y}),o.default.createElement("path",{d:w,fill:j}))});return g.displayName="QRCodeSvg",g.propTypes=p,Eo.default=g,Eo}var Iv;function LE(){if(Iv)return yi;Iv=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.QRCode=void 0;var r=Object.assign||function(_){for(var T=1;T<arguments.length;T++){var C=arguments[T];for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(_[E]=C[E])}return _},n=n0(),a=y(n),s=r0(),o=y(s),u=ME(),h=y(u),p=Vs(),g=y(p),m=zE(),v=y(m);function y(_){return _&&_.__esModule?_:{default:_}}function x(_,T){var C={};for(var E in _)T.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(_,E)&&(C[E]=_[E]);return C}var w={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},j=(0,p.forwardRef)(function(_,T){var C=_.bgColor,E=C===void 0?"#FFFFFF":C,A=_.fgColor,B=A===void 0?"#000000":A,D=_.level,I=D===void 0?"L":D,k=_.size,q=k===void 0?256:k,U=_.value,ne=x(_,["bgColor","fgColor","level","size","value"]),W=new h.default(-1,o.default[I]);W.addData(U),W.make();var H=W.modules;return g.default.createElement(v.default,r({},ne,{bgColor:E,bgD:H.map(function(Z,re){return Z.map(function(te,z){return te?"":"M "+z+" "+re+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:B,fgD:H.map(function(Z,re){return Z.map(function(te,z){return te?"M "+z+" "+re+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:T,size:q,viewBoxSize:H.length}))});return yi.QRCode=j,j.displayName="QRCode",j.propTypes=w,yi.default=j,yi}var BE=LE();const IE=Gv(BE),qv=r=>{if(!r)return"";const n=new Date(r);return`${n.getFullYear()}/${String(n.getMonth()+1).padStart(2,"0")}/${String(n.getDate()).padStart(2,"0")}`},qE=({recipe:r,onBack:n,onEdit:a,onDelete:s,onHardDelete:o,isDeleted:u,onView:h,onDuplicate:p})=>{const{user:g}=Ah(),[m,v]=Ae.useState(!1),[y,x]=Ae.useState(!1),[w,j]=Ae.useState(!1),[_,T]=Ae.useState(new Set),[C,E]=Ae.useState({}),[A,B]=Ae.useState("ORIGINAL"),[D,I]=Ae.useState(!1),[k,q]=Ae.useState(!0),[U,ne]=Ae.useState(""),[W,H]=Ae.useState(1),Z=(le,ue)=>{if(!le)return"";const xe=parseFloat(le);if(isNaN(xe))return le;const ge=xe*parseFloat(ue);return Number.isInteger(ge)?ge.toString():ge.toFixed(1).replace(/\.0$/,"")},re=(le,ue)=>{if(!le)return"";const xe=parseInt(le,10);return isNaN(xe)?le:Math.round(xe*parseFloat(ue)).toString()},te=A==="ORIGINAL"?r:C[A]||r,[z,J]=Ae.useState(r.tags?.includes("public")||!1),ae=g?.id==="admin"||r.tags&&r.tags.includes(`owner:${g?.id}`),se=!(r.tags&&r.tags.some(le=>le.startsWith("owner:")))||ae,O=async()=>{const le=!z;try{const ue=r.tags||[];let xe;le?xe=[...ue,"public"]:xe=ue.filter(ge=>ge!=="public"),J(le),await Gt.updateRecipe({...r,tags:xe})}catch(ue){console.error("Failed to toggle public",ue),alert(""),J(!le)}},L=(le,ue,xe=!1)=>A==="ORIGINAL"||!k||!ue||le===ue?le:c.jsxs(c.Fragment,{children:[le,xe?c.jsx("br",{}):" ",c.jsxs("span",{className:"original-text-sub",style:{opacity:.6,fontSize:"0.85em",fontWeight:"normal"},children:["(",ue,")"]})]}),ee=async le=>{const ue=le.target.value;if(B(ue),ue!=="ORIGINAL"&&!C[ue]){I(!0);try{const xe=await EE.translateRecipe(r,ue);E(ge=>({...ge,[ue]:xe}))}catch(xe){console.error(xe),alert(""),B("ORIGINAL")}finally{I(!1)}}},ie=le=>{T(ue=>{const xe=new Set(ue);return xe.has(le)?xe.delete(le):xe.add(le),xe})};Ae.useEffect(()=>{window.scrollTo(0,0),h&&r&&!u&&h(r.id);const le=document.title;return r&&r.title&&(document.title=r.title),E({}),B("ORIGINAL"),T(new Set),J(r.tags?.includes("public")||!1),()=>{document.title=le}},[r.id,r.title]);const me=()=>{v(!0)},ve=()=>{v(!1),s(r)},Ne=()=>{v(!1)},Ve=()=>{j(!0)},ke=()=>{j(!1),o(r)},De=()=>{j(!1)},Pt=()=>{x(!0)},At=async()=>{x(!1);try{const le=await Gt.duplicateRecipe(r,g);p&&p(le)}catch(le){console.error("Duplication failed",le),alert("")}},un=()=>{x(!1)},Xe=Ae.useRef(null),Ot=Ae.useRef(null),Vt=le=>{Ot.current=null,Xe.current=le.targetTouches[0].clientX},Fn=le=>{Ot.current=le.targetTouches[0].clientX},er=()=>{if(!Xe.current||!Ot.current)return;const le=Xe.current-Ot.current,ue=Xe.current<50,xe=le<-100;ue&&xe&&n()};if(!r)return null;const Qt=te.ingredients||[],wt=te.steps||[];return c.jsxs("div",{className:"recipe-detail fade-in",onTouchStart:Vt,onTouchMove:Fn,onTouchEnd:er,children:[y&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(ft,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-primary)"},children:""}),c.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:""}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(ce,{variant:"ghost",onClick:un,children:""}),c.jsx(ce,{variant:"primary",onClick:At,children:""})]})]})}),w&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(ft,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:" "}),c.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",c.jsx("br",{}),""]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(ce,{variant:"ghost",onClick:De,children:""}),c.jsx(ce,{variant:"danger",onClick:ke,children:""})]})]})}),m&&c.jsx("div",{className:"modal-overlay fade-in",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(ft,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"var(--color-danger)"},children:""}),c.jsxs("p",{style:{margin:"1rem 0",color:"#333"},children:["",c.jsx("br",{}),c.jsx("small",{style:{color:"#666"},children:""})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(ce,{variant:"ghost",onClick:Ne,children:""}),c.jsx(ce,{variant:"danger",onClick:ve,children:""})]})]})}),c.jsxs("div",{className:"recipe-detail__header",children:[c.jsx(ce,{variant:"secondary",onClick:n,size:"sm",children:" "}),!u&&c.jsxs("div",{className:"recipe-detail__actions",children:[se&&(g?.id==="yoshito"||g?.id==="admin")&&c.jsx("div",{style:{marginRight:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:c.jsxs("label",{className:"switch",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[c.jsx("input",{type:"checkbox",checked:z,onChange:O,style:{accentColor:"#4CAF50",transform:"scale(1.2)"}}),c.jsx("span",{style:{marginLeft:"4px",fontSize:"0.9rem",fontWeight:"bold",color:z?"#4CAF50":"#888"},children:z?"":""})]})}),!se&&c.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#e0e0e0",color:"#555",borderRadius:"4px",fontSize:"0.85rem",marginRight:"0.5rem"},children:"  ()"}),c.jsxs("select",{className:"language-select",value:A,onChange:ee,disabled:D,style:{padding:"0.4rem",borderRadius:"4px",border:"1px solid #ccc",marginRight:"0.5rem",cursor:"pointer"},children:[c.jsx("option",{value:"ORIGINAL",children:" Original ()"}),CE.map(le=>c.jsx("option",{value:le.code,children:le.label},le.code))]}),A!=="ORIGINAL"&&c.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"0.5rem",cursor:"pointer",fontSize:"0.9rem",userSelect:"none"},children:[c.jsx("input",{type:"checkbox",checked:k,onChange:le=>q(le.target.checked),style:{marginRight:"4px"}}),""]}),c.jsx(ce,{variant:"secondary",size:"sm",onClick:()=>{if(window.navigator.standalone===!0){alert(`iPhone
Safari`);return}window.print()},children:"  / PDF"}),c.jsx(ce,{variant:"secondary",size:"sm",onClick:Pt,children:""}),se&&c.jsxs(c.Fragment,{children:[c.jsx(ce,{variant:"secondary",size:"sm",onClick:a,children:""}),c.jsx(ce,{variant:"danger",size:"sm",onClick:me,style:{marginLeft:"0.5rem"},children:""})]}),c.jsx(ce,{variant:"primary",size:"sm",children:""})]}),u&&c.jsxs("div",{className:"recipe-detail__actions",children:[c.jsx(ce,{variant:"ghost",size:"sm",onClick:Ve,style:{color:"var(--color-danger)",marginRight:"auto"},children:""}),c.jsx(ce,{variant:"primary",size:"sm",onClick:()=>s(r,!0),children:""})]})]}),c.jsx("div",{className:"recipe-detail__hero",children:te.image?c.jsx("img",{src:te.image,alt:te.title,className:"recipe-detail__image"}):c.jsx("div",{className:"recipe-detail__image-placeholder",style:{height:"100%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:""})}),c.jsxs("div",{className:"recipe-detail__title-card glass-panel",children:[c.jsx("h1",{children:L(te.title,r.title)}),c.jsx("p",{className:"recipe-detail__desc",children:L(te.description,r.description,!0)}),c.jsxs("div",{className:"recipe-detail__meta",children:[te.course&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:L(te.course,r.course)})]}),te.category&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:L(te.category,r.category)})]}),te.storeName&&c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsx("span",{className:"meta-value",children:L(te.storeName,r.storeName)})]}),c.jsxs("div",{className:"meta-item",children:[c.jsx("span",{className:"meta-label",children:""}),c.jsxs("span",{className:"meta-value",children:[te.servings,""]})]})]}),te.sourceUrl&&c.jsxs("div",{className:"print-qr-container",style:{marginTop:"0.8rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx("div",{style:{fontSize:"0.85rem"},children:c.jsxs("a",{href:te.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px"},children:[" ",c.jsx("span",{className:"screen-only",children:""}),c.jsx("span",{className:"print-only",children:""})]})}),c.jsx("div",{style:{background:"white",padding:"4px",width:"fit-content"},children:c.jsx(IE,{value:te.sourceUrl,size:64,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]})]}),c.jsxs("div",{className:"recipe-detail-dates",style:{marginTop:"0.5rem",marginBottom:"1.5rem",borderTop:"none",paddingRight:"0.5rem"},children:[c.jsxs("span",{children:[" : ",qv(r.created_at)]}),r.updated_at&&c.jsxs("span",{children:[" : ",qv(r.updated_at)]})]}),c.jsx("div",{className:"recipe-detail__content",children:c.jsxs("div",{className:"recipe-detail__main",children:[c.jsxs("section",{className:"detail-section",children:[c.jsx("h2",{children:""}),c.jsx(ft,{className:"ingredients-card",children:te.type==="bread"?c.jsx("div",{className:"bread-detail-view",children:(()=>{const le=te.flours||[],ue=te.breadIngredients||[],xe=le.reduce((ye,Ee)=>ye+(parseFloat(Ee.quantity)||0),0),ge=xe+ue.reduce((ye,Ee)=>ye+(parseFloat(Ee.quantity)||0),0),gt=xe?(ge/xe*100).toFixed(1):"0.0",pt=ye=>xe?((parseFloat(ye)||0)/xe*100).toFixed(1):"0.0",V=parseFloat(U),de=V&&ge?V/ge:1,je=ye=>V?((parseFloat(ye)||0)*de).toFixed(1):ye;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"screen-only",style:{background:"#f1f3f5",padding:"0.4rem 0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem 1rem",flexWrap:"wrap",border:"1px solid #dee2e6",lineHeight:1.2},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),c.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#000"},children:[ge.toLocaleString(),"g"]}),c.jsxs("span",{style:{fontSize:"0.75rem",color:"#444"},children:["(",gt,"%)"]})]}),c.jsx("div",{style:{height:"16px",width:"1px",background:"#adb5bd"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("label",{htmlFor:"target-total-input",style:{fontSize:"0.8rem",fontWeight:"bold",color:"#000"},children:":"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{id:"target-total-input",type:"number",value:U,onChange:ye=>ne(ye.target.value),placeholder:"1000",style:{padding:"2px 20px 2px 6px",width:"80px",borderRadius:"4px",border:"1.5px solid #333",fontSize:"0.9rem",fontWeight:"bold",textAlign:"right",color:"#000",backgroundColor:"#fff"}}),c.jsx("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"0.75rem",color:"#333"},children:"g"})]}),U&&c.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>ne(""),style:{padding:"0 4px",fontSize:"0.7rem",color:"#555",height:"22px",border:"1px solid #dee2e6"},children:""})]}),U&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"bold",marginLeft:"auto"},children:[" : ",de.toFixed(3)," "]})]}),c.jsxs("div",{className:"bread-section",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px",marginBottom:"1rem",marginTop:0,display:"flex",justifyContent:"space-between",alignItems:"center",color:"var(--color-text-main)"},children:[c.jsx("span",{children:""}),c.jsxs("span",{style:{fontSize:"0.9rem",background:"var(--color-primary)",color:"white",padding:"4px 12px",borderRadius:"20px",fontWeight:"bold"},children:["Total: ",U?je(xe):xe,"g (100%)"]})]}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{style:{textAlign:"right"},children:" (g)"}),c.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),c.jsx("tbody",{children:le.map((ye,Ee)=>{const St=r.flours?.[Ee]||{};return c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`flour-${Ee}`}),c.jsx("label",{htmlFor:`flour-${Ee}`,children:L(ye.name,St?.name)})]})}),c.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:U?c.jsx("span",{style:{color:"var(--color-primary)"},children:je(ye.quantity)}):ye.quantity}),c.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-primary)"},children:[pt(ye.quantity),"%"]}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:ye.purchaseCost?`${ye.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:ye.cost?`${ye.cost}`:"-"})]},Ee)})})]})]}),c.jsxs("div",{className:"bread-section",style:{marginTop:"3rem"},children:[c.jsx("h3",{style:{fontSize:"1.2rem",borderLeft:"4px solid #f39c12",paddingLeft:"10px",marginBottom:"1rem",color:"var(--color-text-main)"},children:""}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{style:{textAlign:"right"},children:" (g)"}),c.jsx("th",{style:{textAlign:"center",width:"60px"},children:"%"}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""}),c.jsx("th",{style:{textAlign:"right",width:"80px"},children:""})]})}),c.jsx("tbody",{children:ue.map((ye,Ee)=>{const St=r.breadIngredients?.[Ee]||{};return c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ingredient-${Ee}`}),c.jsx("label",{htmlFor:`ingredient-${Ee}`,children:L(ye.name,St?.name)})]})}),c.jsx("td",{style:{textAlign:"right",fontWeight:"bold"},children:U?c.jsx("span",{style:{color:"var(--color-primary)"},children:je(ye.quantity)}):ye.quantity}),c.jsxs("td",{style:{textAlign:"center",fontWeight:"bold",color:"var(--color-text-muted)"},children:[pt(ye.quantity),"%"]}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:ye.purchaseCost?`${ye.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:ye.cost?`${ye.cost}`:"-"})]},Ee)})})]}),c.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--color-bg-surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",(()=>{const ye=le.reduce((nt,rt)=>nt+(parseInt(rt.cost)||0),0),Ee=ue.reduce((nt,rt)=>nt+(parseInt(rt.cost)||0),0),St=ye+Ee;return Math.round(St*de).toLocaleString()})()]})]})]})]})})()}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"screen-only no-print",style:{background:"#f8f9fa",color:"#333",padding:"0.8rem",borderRadius:"6px",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid #e9ecef"},children:[c.jsx("label",{htmlFor:"multiplier-input",style:{fontWeight:"bold",fontSize:"0.9rem",color:"#333"},children:":"}),c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold",marginRight:"4px",color:"#333"},children:""}),c.jsx("input",{id:"multiplier-input",type:"number",min:"0.1",step:"0.1",value:W,onChange:le=>H(le.target.value),style:{width:"60px",padding:"4px",fontSize:"1rem",fontWeight:"bold",textAlign:"center",borderRadius:"4px",border:"1px solid #ced4da",background:"#fff",color:"#333"}})]}),parseFloat(W)!==1&&c.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>H("1"),style:{fontSize:"0.8rem",padding:"2px 8px",height:"auto",color:"#555",borderColor:"#ccc",background:"#fff"},children:""})]}),(()=>{const le=te.ingredientGroups&&te.ingredientGroups.length>0?te.ingredientGroups:null;return le?le.map(ue=>{const xe=Qt.filter(ge=>ge.groupId===ue.id);return xe.length===0?null:c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{fontSize:"1rem",borderBottom:"2px solid var(--color-border)",paddingBottom:"0.5rem",marginBottom:"0.5rem",marginTop:"0.5rem",color:"var(--color-text-main)",display:["","Ingredients","ingredients"].includes(ue.name)?"none":"block"},children:ue.name}),c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"40%"},children:""}),c.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),c.jsx("tbody",{children:xe.map((ge,gt)=>{const pt=Qt.indexOf(ge),V=r.ingredients?.[pt],de=typeof ge=="string"?ge:ge.name,je=V?typeof V=="string"?V:V.name:"",ye=Z(ge.quantity,W),Ee=re(ge.cost,W),St=String(W)!=="1";return c.jsxs("tr",{className:"ingredient-row",children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ing-${ue.id}-${gt}`}),c.jsx("label",{htmlFor:`ing-${ue.id}-${gt}`,children:L(de,je)})]})}),c.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:St?"bold":"normal",color:St?"var(--color-primary)":"inherit"},children:ye}),c.jsx("td",{style:{paddingLeft:"0.5rem"},children:ge.unit}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:ge.purchaseCost?`${ge.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:Ee?`${Ee}`:"-"})]},gt)})})]})]},ue.id)}):c.jsxs("table",{className:"ingredients-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"40%"},children:""}),c.jsx("th",{style:{width:"20%",textAlign:"right",paddingRight:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",paddingLeft:"0.5rem"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""}),c.jsx("th",{style:{width:"15%",textAlign:"right"},children:""})]})}),c.jsx("tbody",{children:Qt.map((ue,xe)=>{const ge=r.ingredients?.[xe],gt=typeof ue=="string"?ue:ue.name,pt=ge?typeof ge=="string"?ge:ge.name:"",V=Z(ue.quantity,W),de=re(ue.cost,W),je=String(W)!=="1";return c.jsxs("tr",{className:"ingredient-row",children:[c.jsx("td",{children:c.jsxs("div",{className:"ingredient-name",children:[c.jsx("input",{type:"checkbox",id:`ing-${xe}`}),c.jsx("label",{htmlFor:`ing-${xe}`,children:L(gt,pt)})]})}),c.jsx("td",{style:{textAlign:"right",paddingRight:"0.5rem",fontWeight:je?"bold":"normal",color:je?"var(--color-primary)":"inherit"},children:V}),c.jsx("td",{style:{paddingLeft:"0.5rem"},children:ue.unit}),c.jsx("td",{style:{textAlign:"right",color:"#666"},children:ue.purchaseCost?`${ue.purchaseCost}`:"-"}),c.jsx("td",{style:{textAlign:"right"},children:de?`${de}`:"-"})]},xe)})})]})})(),c.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"2px dashed var(--color-border)",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:":"}),c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--color-primary)"},children:["",Qt.reduce((le,ue)=>le+(parseInt(re(ue.cost,W),10)||0),0).toLocaleString()]})]})]})})]}),c.jsxs("section",{className:"detail-section",children:[c.jsx("h2",{children:""}),(()=>{const le=te.stepGroups&&te.stepGroups.length>0?te.stepGroups:null;return le?c.jsx("div",{className:"steps-container",children:le.map(ue=>{const xe=wt.filter(ge=>(typeof ge=="object"?ge.groupId:null)===ue.id);return xe.length===0?null:c.jsxs("div",{className:"step-group",style:{marginBottom:"2rem"},children:[ue.name!==""&&ue.name!=="Steps"&&c.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"var(--color-text-main)",borderLeft:"4px solid var(--color-primary)",paddingLeft:"10px"},children:ue.name}),c.jsx("div",{className:"steps-list",children:xe.map((ge,gt)=>{const pt=wt.indexOf(ge),V=typeof ge=="object"?ge.text:ge,de=r.steps?.[pt],je=typeof de=="object"?de.text:de,ye=Ee=>Ee?Ee.replace(/<[^>]*>?/gm,""):"";return c.jsxs(ft,{className:`step-card ${_.has(pt)?"is-completed":""}`,onClick:()=>ie(pt),children:[c.jsx("div",{className:"step-number",children:pt+1}),c.jsx("p",{className:"step-text",children:L(ye(V),ye(je),!0)})]},gt)})})]},ue.id)})}):c.jsx("div",{className:"steps-list",children:wt.map((ue,xe)=>{const ge=typeof ue=="object"?ue.text:ue,gt=r.steps?.[xe],pt=typeof gt=="object"?gt.text:gt;return c.jsxs(ft,{className:`step-card ${_.has(xe)?"is-completed":""}`,onClick:()=>ie(xe),children:[c.jsx("div",{className:"step-number",children:xe+1}),c.jsx("p",{className:"step-text",children:L(ge,pt,!0)})]},xe)})})})()]})]})})]})},tt=({label:r,id:n,error:a,textarea:s,...o})=>{const u=s?"textarea":"input";return c.jsxs("div",{className:`input-group ${a?"input-group--error":""}`,children:[r&&c.jsx("label",{htmlFor:n,className:"input-label",children:r}),c.jsx(u,{id:n,className:`input-field ${o.className||""}`,...o}),a&&c.jsx("span",{className:"input-error",children:a})]})},js="app-data",ji={async fetchPriceList(){try{const{data:r,error:n}=await Ce.storage.from(js).list();if(n)return console.warn("Failed to list price files:",n.message),new Map;if(!r||r.length===0)return new Map;const a=new Map,s=r.filter(u=>u.name.endsWith(".csv")).map(async u=>{const{data:h,error:p}=await Ce.storage.from(js).download(u.name);if(p)return console.error(`Failed to download ${u.name}:`,p),null;const g=await h.arrayBuffer();return new TextDecoder("shift-jis").decode(g)}),o=await Promise.all(s);for(const u of o){if(!u)continue;const h=this.parseCSV(u);for(const[p,g]of h)if(a.has(p)){const m=a.get(p);g.dateStr>m.dateStr&&a.set(p,g)}else a.set(p,g)}return a}catch(r){return console.error("Error in fetchPriceList:",r),new Map}},async getFileList(){try{const{data:r,error:n}=await Ce.storage.from(js).list();if(n)throw n;return r.filter(a=>a.name.endsWith(".csv"))||[]}catch(r){return console.error("Error fetching file list:",r),[]}},async uploadPriceList(r){try{const n=r.name,{data:a,error:s}=await Ce.storage.from(js).upload(n,r,{upsert:!0,contentType:"text/csv"});if(s)throw s;return{success:!0,data:a}}catch(n){return console.error("Error uploading price list:",n),{success:!1,error:n}}},async deletePriceFile(r){try{const{data:n,error:a}=await Ce.storage.from(js).remove([r]);if(a)throw a;if(!n||n.length===0)throw new Error("");return{success:!0,data:n}}catch(n){return console.error("Error deleting price file:",n),{success:!1,error:n}}},parseCSV(r){const n=new Map,a=r.split(/\r?\n/).filter(o=>o.trim());if(a.length===0)return n;if(a.some(o=>o.startsWith("D,")||o.startsWith('"D",')))for(let o of a){const u=[];let h="",p=!1;for(let j=0;j<o.length;j++){const _=o[j];_==='"'?p=!p:_===","&&!p?(u.push(h),h=""):h+=_}u.push(h);const g=u.map(j=>(j=j.trim(),j.startsWith('"')&&j.endsWith('"')?j.slice(1,-1):j));if(g[0]!=="D")continue;const m=g[1],v=g[8],y=g[14],x=g[18],w=g[20];if(y&&x){const j=parseFloat(x);if(!isNaN(j)){const _={price:j,vendor:v,unit:w,dateStr:m};if(n.has(y)){const T=n.get(y);m>T.dateStr&&n.set(y,_)}else n.set(y,_)}}}else{let o={name:-1,price:-1,unit:-1,vendor:-1},u=0;if(a[0].split(",").map(g=>g.trim().replace(/^"|"$/g,"")).forEach((g,m)=>{["","","","","name","item"].some(v=>g.includes(v))&&(o.name=m),["","","","","price","cost"].some(v=>g.includes(v))&&(o.price=m),["","unit"].some(v=>g.includes(v))&&(o.unit=m),["","","","vendor","supplier"].some(v=>g.includes(v))&&(o.vendor=m)}),o.name===-1&&o.price===-1){o={name:0,price:1,unit:2,vendor:3};const g=a[0].split(",");isNaN(parseFloat(g[1]))&&(u=1)}else u=1;const p=new Date().toISOString().slice(0,10).replace(/-/g,"/");for(let g=u;g<a.length;g++){const m=a[g],v=[];let y="",x=!1;for(let E=0;E<m.length;E++){const A=m[E];A==='"'?x=!x:A===","&&!x?(v.push(y),y=""):y+=A}v.push(y);const w=v.map(E=>(E=E.trim(),E.startsWith('"')&&E.endsWith('"')?E.slice(1,-1):E)),j=o.name>-1?w[o.name]:null,_=o.price>-1?w[o.price]:null,T=o.unit>-1?w[o.unit]:"",C=o.vendor>-1?w[o.vendor]:"";if(j&&_){const E=parseFloat(_.replace(/[^0-9.]/g,""));isNaN(E)||n.set(j,{price:E,vendor:C,unit:T,dateStr:p})}}}return n},async getPriceListArray(){const r=await this.fetchPriceList(),n=[];for(const[a,s]of r.entries())typeof s=="object"?n.push({name:a,...s}):n.push({name:a,price:s});return n.sort((a,s)=>a.dateStr&&s.dateStr?s.dateStr.localeCompare(a.dateStr):a.name.localeCompare(s.name))}},$E=({formData:r,setFormData:n})=>{const[a,s]=R.useState(new Map),o=R.useMemo(()=>Array.from(a.keys()),[a]),[u,h]=R.useState(null),[p,g]=R.useState([]);R.useEffect(()=>{(async()=>{const I=await ji.fetchPriceList();s(I)})()},[]);const v=(D=>D.reduce((I,k)=>I+(parseFloat(k.quantity)||0),0))(r.flours||[]),y=D=>!v||v===0?0:((parseFloat(D)||0)/v*100).toFixed(1),x=(D,I,k)=>{const q=[...r.flours||[]];if(q[D]={...q[D],[I]:k},I==="name"){if(k.trim()){const ne=k.toLowerCase(),W=o.filter(H=>H.toLowerCase().includes(ne));g(W.slice(0,10)),h({type:"flour",index:D})}else g([]),h(null);const U=a.get(k);if(U){const ne=typeof U=="object"?U.price:U,W=typeof U=="object"?U.vendor:null;q[D].purchaseCostRef=ne,q[D].vendorRef=W}else q[D].purchaseCostRef=null,q[D].vendorRef=null}n(U=>({...U,flours:q}))},w=(D,I,k)=>{const q=[...r.breadIngredients||[]];if(q[D]={...q[D],[I]:k},I==="name"){if(k.trim()){const ne=k.toLowerCase(),W=o.filter(H=>H.toLowerCase().includes(ne));g(W.slice(0,10)),h({type:"ingredient",index:D})}else g([]),h(null);const U=a.get(k);if(U){const ne=typeof U=="object"?U.price:U,W=typeof U=="object"?U.vendor:null;q[D].purchaseCostRef=ne,q[D].vendorRef=W}else q[D].purchaseCostRef=null,q[D].vendorRef=null}n(U=>({...U,breadIngredients:q}))},j=()=>{n(D=>({...D,flours:[...D.flours||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}))},_=()=>{n(D=>({...D,breadIngredients:[...D.breadIngredients||[],{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}))},T=D=>{n(I=>({...I,flours:I.flours.filter((k,q)=>q!==D)}))},C=D=>{n(I=>({...I,breadIngredients:I.breadIngredients.filter((k,q)=>q!==D)}))},E=(D,I,k)=>{D==="flour"?x(I,"name",k):w(I,"name",k),h(null),g([])},A=Ws(cn(bh),cn(Ea,{coordinateGetter:rl})),B=D=>{const{active:I,over:k}=D;I.id!==k.id&&n(q=>{const ne=q.flours.some(Z=>Z.id===I.id)?"flours":"breadIngredients",W=q[ne].findIndex(Z=>Z.id===I.id),H=q[ne].findIndex(Z=>Z.id===k.id);return W!==-1&&H!==-1?{...q,[ne]:Ni(q[ne],W,H)}:q})};return R.useEffect(()=>{if(!r.flours)n(D=>({...D,flours:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const D=r.flours.map(I=>I.id?I:{...I,id:crypto.randomUUID()});JSON.stringify(D)!==JSON.stringify(r.flours)&&n(I=>({...I,flours:D}))}if(!r.breadIngredients)n(D=>({...D,breadIngredients:[{id:crypto.randomUUID(),name:"",quantity:"",unit:"g",cost:""}]}));else{const D=r.breadIngredients.map(I=>I.id?I:{...I,id:crypto.randomUUID()});JSON.stringify(D)!==JSON.stringify(r.breadIngredients)&&n(I=>({...I,breadIngredients:D}))}},[]),c.jsxs("div",{className:"bread-form",children:[c.jsxs(ft,{className:"mb-md bread-card",style:{position:"relative",zIndex:10},children:[c.jsxs("div",{className:"bread-header",children:[c.jsxs("h3",{children:[" (Total: ",v,"g)"]}),c.jsx("span",{className:"bread-badge",children:"Base (100%)"})]}),c.jsxs("div",{className:"bread-scroll-wrapper",children:[c.jsxs("div",{className:"bread-grid-header",children:[c.jsx("span",{})," ",c.jsx("span",{children:""}),c.jsx("span",{children:" (g)"}),c.jsx("span",{className:"text-center",children:"%"}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsx("div",{className:"bread-grid-body",children:c.jsx(Ls,{sensors:A,collisionDetection:Yd,onDragEnd:B,id:"flours-dnd",children:c.jsx(Bs,{items:r.flours||[],strategy:Mo,children:(r.flours||[]).map((D,I)=>c.jsx(HE,{id:D.id,index:I,item:D,onChange:x,onRemove:T,onSuggestionSelect:E,activeSuggestion:u,filteredSuggestions:p,setActiveSuggestion:h,setFilteredSuggestions:g,handleSuggestionSelect:E,allIngredientNames:o,calculatePercentage:y,floursLength:(r.flours||[]).length},D.id))})})})]}),c.jsx(ce,{type:"button",variant:"secondary",size:"sm",onClick:j,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]}),c.jsxs(ft,{className:"mb-md bread-card",style:{position:"relative",zIndex:5},children:[c.jsxs("div",{className:"bread-header",children:[c.jsx("h3",{children:""}),c.jsx("span",{className:"bread-subtitle",children:"Water, Salt, Yeast, etc."})]}),c.jsxs("div",{className:"bread-scroll-wrapper",children:[c.jsxs("div",{className:"bread-grid-header",children:[c.jsx("span",{})," ",c.jsx("span",{children:""}),c.jsx("span",{children:" (g)"}),c.jsx("span",{className:"text-center",children:"%"}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsx("div",{className:"bread-grid-body",children:c.jsx(Ls,{sensors:A,collisionDetection:Yd,onDragEnd:B,id:"breadIngredients-dnd",children:c.jsx(Bs,{items:r.breadIngredients||[],strategy:Mo,children:(r.breadIngredients||[]).map((D,I)=>c.jsx(GE,{id:D.id,index:I,item:D,onChange:w,onRemove:C,onSuggestionSelect:E,activeSuggestion:u,filteredSuggestions:p,setActiveSuggestion:h,setFilteredSuggestions:g,handleSuggestionSelect:E,allIngredientNames:o,calculatePercentage:y},D.id))})})})]}),c.jsx(ce,{type:"button",variant:"secondary",size:"sm",onClick:_,block:!0,style:{marginTop:"0.5rem"},children:"+ "})]})]})},HE=({id:r,index:n,item:a,onChange:s,onRemove:o,onSuggestionSelect:u,activeSuggestion:h,filteredSuggestions:p,setActiveSuggestion:g,setFilteredSuggestions:m,handleSuggestionSelect:v,allIngredientNames:y,calculatePercentage:x,floursLength:w})=>{const{attributes:j,listeners:_,setNodeRef:T,transform:C,transition:E,isDragging:A}=nl({id:r}),B={transform:Ln.Transform.toString(C),transition:E,opacity:A?.5:1,position:"relative",zIndex:A?999:"auto",backgroundColor:"white"};return c.jsxs("div",{ref:T,style:B,className:"bread-row",children:[c.jsx("div",{...j,..._,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),c.jsxs("div",{style:{position:"relative",zIndex:h?.type==="flour"&&h?.index===n?1e4:"auto"},children:[c.jsx(tt,{value:a.name,onChange:D=>{if(s(n,"name",D.target.value),D.target.value.trim()){const I=D.target.value.toLowerCase(),k=y.filter(q=>q.toLowerCase().includes(I));m(k.slice(0,10)),g({type:"flour",index:n})}else m([]),g(null)},onFocus:()=>{if(a.name.trim()){const D=a.name.toLowerCase(),I=y.filter(k=>k.toLowerCase().includes(D));m(I.slice(0,10)),g({type:"flour",index:n})}},onBlur:()=>setTimeout(()=>g(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),h&&h.type==="flour"&&h.index===n&&p.length>0&&c.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:p.map((D,I)=>c.jsx("li",{onMouseDown:()=>v("flour",n,D),style:{padding:"8px 12px",cursor:"pointer",borderBottom:I<p.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:k=>k.currentTarget.style.backgroundColor="white",children:D},I))})]}),c.jsx(tt,{type:"number",value:a.quantity,onChange:D=>s(n,"quantity",D.target.value),placeholder:"0",className:"bread-input qty"}),c.jsxs("div",{className:"bread-percent",children:[x(a.quantity),"%"]}),c.jsxs("div",{children:[c.jsx(tt,{type:"number",value:a.purchaseCost||"",onChange:D=>s(n,"purchaseCost",D.target.value),placeholder:a.purchaseCostRef?`Ref: ${a.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":""},min:"0",title:a.purchaseCostRef?`: ${a.purchaseCostRef}`:"No data"}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",a.purchaseCostRef," ",a.vendorRef&&`(${a.vendorRef})`]})]}),c.jsx(tt,{type:"number",value:a.cost||"",onChange:D=>s(n,"cost",D.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),w>1&&c.jsx("button",{type:"button",className:"bread-remove",onClick:()=>o(n),children:""})]})},GE=({id:r,index:n,item:a,onChange:s,onRemove:o,onSuggestionSelect:u,activeSuggestion:h,filteredSuggestions:p,setActiveSuggestion:g,setFilteredSuggestions:m,handleSuggestionSelect:v,allIngredientNames:y,calculatePercentage:x})=>{const{attributes:w,listeners:j,setNodeRef:_,transform:T,transition:C,isDragging:E}=nl({id:r}),A={transform:Ln.Transform.toString(T),transition:C,opacity:E?.5:1,position:"relative",zIndex:E?999:"auto",backgroundColor:"white"};return c.jsxs("div",{ref:_,style:A,className:"bread-row",children:[c.jsx("div",{...w,...j,className:"bread-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",height:"100%",touchAction:"none"},children:""}),c.jsxs("div",{style:{position:"relative",zIndex:h?.type==="ingredient"&&h?.index===n?1e4:"auto"},children:[c.jsx(tt,{value:a.name,onChange:B=>{if(s(n,"name",B.target.value),B.target.value.trim()){const D=B.target.value.toLowerCase(),I=y.filter(k=>k.toLowerCase().includes(D));m(I.slice(0,10)),g({type:"ingredient",index:n})}else m([]),g(null)},onFocus:()=>{if(a.name.trim()){const B=a.name.toLowerCase(),D=y.filter(I=>I.toLowerCase().includes(B));m(D.slice(0,10)),g({type:"ingredient",index:n})}},onBlur:()=>setTimeout(()=>g(null),200),placeholder:": ",className:"bread-input name",autoComplete:"off"}),h&&h.type==="ingredient"&&h.index===n&&p.length>0&&c.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",maxHeight:"150px",overflowY:"auto",zIndex:10001,padding:0,margin:0,listStyle:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:p.map((B,D)=>c.jsx("li",{onMouseDown:()=>v("ingredient",n,B),style:{padding:"8px 12px",cursor:"pointer",borderBottom:D<p.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333"},onMouseEnter:I=>I.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:I=>I.currentTarget.style.backgroundColor="white",children:B},D))})]}),c.jsx(tt,{type:"number",value:a.quantity,onChange:B=>s(n,"quantity",B.target.value),placeholder:"0",className:"bread-input qty"}),c.jsxs("div",{className:"bread-percent",children:[x(a.quantity),"%"]}),c.jsxs("div",{children:[c.jsx(tt,{type:"number",value:a.purchaseCost||"",onChange:B=>s(n,"purchaseCost",B.target.value),placeholder:a.purchaseCostRef?`Ref: ${a.purchaseCostRef}`:"",className:"bread-input cost",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":""},min:"0",title:a.purchaseCostRef?`: ${a.purchaseCostRef}`:"No data"}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all"},children:["",a.purchaseCostRef," ",a.vendorRef&&`(${a.vendorRef})`]})]}),c.jsx(tt,{type:"number",value:a.cost||"",onChange:B=>s(n,"cost",B.target.value),placeholder:"",className:"bread-input cost",style:{width:"100%"},min:"0"}),c.jsx("button",{type:"button",className:"bread-remove",onClick:()=>o(n),children:""})]})},PE=({id:r,index:n,item:a,groupId:s,onChange:o,onRemove:u,handleSuggestionSelect:h,allIngredientNames:p,priceList:g})=>{const{attributes:m,listeners:v,setNodeRef:y,transform:x,transition:w,isDragging:j}=nl({id:a.id,data:{groupId:s,index:n}}),_={transform:Ln.Translate.toString(x),transition:w,opacity:j?.3:1,position:"relative",zIndex:j?999:"auto"},[T,C]=R.useState([]),[E,A]=R.useState(!1),B=Ae.useRef(null),[D,I]=R.useState({});R.useEffect(()=>{if(E&&T.length>0&&B.current){const U=B.current.getBoundingClientRect();I({position:"fixed",top:`${U.bottom}px`,left:`${U.left}px`,width:`${U.width}px`,maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"0 0 4px 4px",zIndex:9999,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",listStyle:"none",padding:0,margin:0})}},[E,T.length]);const k=U=>{if(o(s,n,"name",U),U.trim()){const ne=p.filter(W=>W.toLowerCase().includes(U.toLowerCase())).slice(0,10);C(ne),A(!0)}else A(!1)},q=()=>{setTimeout(()=>A(!1),200)};return c.jsxs("div",{ref:y,style:_,className:"form-ingredient-row",children:[c.jsx("div",{...m,...v,className:"ingredient-drag-handle",style:{cursor:"grab",padding:"0 0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",touchAction:"none"},children:""}),c.jsxs("div",{className:"ingredient-name",ref:B,children:[c.jsx(tt,{value:a.name,onChange:U=>k(U.target.value),onFocus:()=>a.name&&k(a.name),onBlur:q,placeholder:"",style:{width:"100%"},autoComplete:"off"}),E&&T.length>0&&Si.createPortal(c.jsx("ul",{style:D,children:T.map((U,ne)=>c.jsx("li",{onMouseDown:()=>{h(s,n,U),A(!1)},style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",color:"#000"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:W=>W.currentTarget.style.backgroundColor="white",children:U},ne))}),document.body)]}),c.jsx("div",{className:"ingredient-qty",children:c.jsx(tt,{value:a.quantity,onChange:U=>o(s,n,"quantity",U.target.value),placeholder:"0",style:{width:"100%"}})}),c.jsx("div",{className:"ingredient-unit",children:c.jsx(tt,{value:a.unit,onChange:U=>o(s,n,"unit",U.target.value),placeholder:"",style:{width:"100%"}})}),c.jsxs("div",{className:"ingredient-cost",children:[c.jsx(tt,{type:"number",value:a.purchaseCost,onChange:U=>o(s,n,"purchaseCost",U.target.value),placeholder:a.purchaseCostRef?"Ref":"",style:{width:"100%",borderColor:a.purchaseCostRef&&!a.purchaseCost?"orange":""},title:a.purchaseCostRef?`: ${a.purchaseCostRef}${a.vendorRef?` (${a.vendorRef})`:""}`:"No data"}),a.purchaseCostRef&&c.jsxs("div",{style:{fontSize:"10px",color:"#666",lineHeight:"1.2",marginTop:"2px",wordBreak:"break-all",textAlign:"center"},children:["",a.purchaseCostRef]})]}),c.jsx("div",{className:"ingredient-cost",children:c.jsx(tt,{type:"number",value:a.cost,onChange:U=>o(s,n,"cost",U.target.value),placeholder:"",style:{width:"100%"}})}),c.jsx("div",{className:"remove-button-cell",children:c.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(s,n),children:""})})]})},VE=({section:r,sections:n,onSectionChange:a,onRemoveSection:s,children:o})=>{const{setNodeRef:u}=wh({id:r.id});return c.jsxs(ft,{className:"ingredient-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[c.jsx(tt,{value:r.name,onChange:h=>a(r.id,h.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),c.jsx("div",{style:{display:"flex",gap:"8px"},children:n.length>1&&c.jsx("button",{type:"button",onClick:()=>s(r.id),className:"group-delete-btn",children:""})})]}),c.jsxs("div",{className:"recipe-list-header",style:{marginBottom:"0.5rem"},children:[c.jsx("span",{}),c.jsx("span",{children:""}),c.jsx("span",{children:""}),c.jsx("span",{children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{style:{textAlign:"center"},children:""}),c.jsx("span",{})]}),c.jsxs("div",{ref:u,className:"section-ingredients-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[o,r.items.length===0&&c.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},YE=({formData:r,setFormData:n,priceList:a})=>{const s=Array.from(a.keys());R.useEffect(()=>{if(!r.ingredientSections){const _=r.ingredientGroups||[{id:"default",name:""}],T=r.ingredients||[],C=_.map(B=>({id:B.id,name:B.name,items:T.filter(D=>B.id==="default"&&!D.groupId?!0:D.groupId===B.id)})),E=new Set(C.flatMap(B=>B.items.map(D=>D.id))),A=T.filter(B=>!E.has(B.id));A.length>0&&(C.length>0?C[0].items.push(...A):C.push({id:"default",name:"",items:A})),C.length===0&&C.push({id:crypto.randomUUID(),name:"",items:[]}),n(B=>({...B,ingredientSections:C}))}},[r.ingredients,r.ingredientGroups,r.ingredientSections,n]);const o=r.ingredientSections||[],u=Ws(cn(Fs,{activationConstraint:{distance:10}}),cn(el,{activationConstraint:{delay:250,tolerance:5}}),cn(Ea,{coordinateGetter:rl})),h=({active:_,over:T})=>{if(!T)return;const C=_.id,E=T.id,A=o.find(D=>D.items.some(I=>I.id===C)),B=o.find(D=>D.items.some(I=>I.id===E))||o.find(D=>D.id===E);!A||!B||A===B||n(D=>{const I=A.items,k=B.items,q=I.findIndex(W=>W.id===C),U=k.findIndex(W=>W.id===E);let ne;if(E===B.id)ne=k.length+1;else{const H=T&&_.rect.current.translated&&_.rect.current.translated.top>T.rect.top+T.rect.height?1:0;ne=U>=0?U+H:k.length+1}return{...D,ingredientSections:D.ingredientSections.map(W=>W.id===A.id?{...W,items:I.filter(H=>H.id!==C)}:W.id===B.id?{...W,items:[...k.slice(0,ne),I[q],...k.slice(ne,k.length)]}:W)}})},p=({active:_,over:T})=>{if(!T)return;const C=_.id,E=T.id,A=o.find(D=>D.items.some(I=>I.id===C)),B=o.find(D=>D.items.some(I=>I.id===E))||o.find(D=>D.id===E);if(A&&B&&A===B){const D=A.items.findIndex(k=>k.id===C),I=B.items.findIndex(k=>k.id===E);D!==I&&n(k=>({...k,ingredientSections:k.ingredientSections.map(q=>q.id===A.id?{...q,items:Ni(q.items,D,I)}:q)}))}},g=(_,T,C,E)=>{n(A=>{const B=A.ingredientSections.map(D=>{if(D.id!==_)return D;const I=[...D.items],k={...I[T],[C]:E};if(I[T]=k,["quantity","purchaseCost","unit","name"].includes(C)){const q=parseFloat(k.quantity),U=parseFloat(k.purchaseCost);if(!isNaN(q)&&!isNaN(U)){let ne=0;const W=k.unit?k.unit.trim().toLowerCase():"";W==="g"||W===""?ne=Math.round(q/1e3*U):ne=Math.round(q*U),ne!==k.cost&&(k.cost=ne,I[T]=k)}}if(C==="name"){const q=a.get(E);if(q){const U=typeof q=="object"?q.price:q,ne=typeof q=="object"?q.vendor:null,W=typeof q=="object"?q.unit:null;k.purchaseCostRef=U,k.vendorRef=ne,k.purchaseCost||(k.purchaseCost=U),!k.unit&&W&&(k.unit=W);const H=parseFloat(k.quantity),Z=parseFloat(k.purchaseCost);if(!isNaN(H)&&!isNaN(Z)){const re=k.unit?k.unit.trim().toLowerCase():"";re==="g"||re===""?k.cost=Math.round(H/1e3*Z):k.cost=Math.round(H*Z)}}else k.purchaseCostRef=null,k.vendorRef=null;I[T]=k}return{...D,items:I}});return{...A,ingredientSections:B}})},m=(_,T,C)=>{g(_,T,"name",C)},v=(_,T)=>{n(C=>({...C,ingredientSections:C.ingredientSections.map(E=>E.id===_?{...E,items:E.items.filter((A,B)=>B!==T)}:E)}))},y=_=>{const T={id:crypto.randomUUID(),name:"",quantity:"",unit:"",cost:"",purchaseCost:""};n(C=>({...C,ingredientSections:C.ingredientSections.map(E=>E.id===_?{...E,items:[...E.items,T]}:E)}))},x=()=>{n(_=>({..._,ingredientSections:[..._.ingredientSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},w=_=>{n(T=>({...T,ingredientSections:T.ingredientSections.filter(C=>C.id!==_)}))},j=(_,T)=>{n(C=>({...C,ingredientSections:C.ingredientSections.map(E=>E.id===_?{...E,name:T}:E)}))};return c.jsxs(Ls,{sensors:u,collisionDetection:my,onDragOver:h,onDragEnd:p,children:[c.jsxs("div",{className:"recipe-form-ingredients",children:[o.map(_=>c.jsx(Bs,{id:_.id,items:_.items.map(T=>T.id),strategy:Mo,children:c.jsxs(VE,{section:_,sections:o,onSectionChange:j,onRemoveSection:w,children:[_.items.map((T,C)=>c.jsx(PE,{id:T.id,index:C,item:T,groupId:_.id,onChange:g,onRemove:v,handleSuggestionSelect:m,allIngredientNames:s,priceList:a},T.id)),c.jsx(ce,{type:"button",variant:"ghost",onClick:()=>y(_.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},_.id)),c.jsx(ce,{type:"button",variant:"secondary",onClick:x,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),c.jsx(ky,{dropAnimation:{sideEffects:Sh({styles:{active:{opacity:"0.5"}}})},children:null})]})},KE=({id:r,index:n,item:a,groupId:s,onChange:o,onRemove:u})=>{const{attributes:h,listeners:p,setNodeRef:g,transform:m,transition:v,isDragging:y}=nl({id:a.id,data:{groupId:s,index:n}}),x={transform:Ln.Translate.toString(m),transition:v,opacity:y?.3:1,position:"relative",zIndex:y?999:"auto"};return c.jsxs("div",{ref:g,style:{...x,display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"flex-start"},className:"step-row",children:[c.jsx("div",{...h,...p,className:"step-drag-handle",style:{cursor:"grab",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",alignSelf:"stretch",touchAction:"none"},children:""}),c.jsx("div",{className:"step-count",style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",borderRadius:"50%",background:"#eee",fontSize:"0.8rem",fontWeight:"bold",marginTop:"8px"},children:n+1}),c.jsx("div",{style:{flex:1},children:c.jsx(tt,{textarea:!0,value:a.text,onChange:w=>o(s,n,w.target.value),placeholder:` ${n+1}...`,style:{minHeight:"60px",width:"100%"}})}),c.jsx("div",{className:"remove-button-cell",children:c.jsx("button",{type:"button",className:"icon-btn-delete",onClick:()=>u(s,n),title:"",children:""})})]})},JE=({section:r,sections:n,onSectionChange:a,onRemoveSection:s,children:o})=>{const{setNodeRef:u}=wh({id:r.id});return c.jsxs(ft,{className:"step-section mb-md",style:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",borderBottom:"1px solid #f0f0f0",paddingBottom:"0.5rem"},children:[c.jsx(tt,{value:r.name,onChange:h=>a(r.id,h.target.value),placeholder:" (: )",className:"section-header-input",style:{fontWeight:"bold",border:"none",background:"transparent",fontSize:"1.05rem",padding:"4px",width:"70%"}}),c.jsx("div",{style:{display:"flex",gap:"8px"},children:n.length>1&&c.jsx("button",{type:"button",onClick:()=>s(r.id),className:"group-delete-btn",children:""})})]}),c.jsxs("div",{ref:u,className:"section-steps-list",style:{minHeight:"50px",transition:"min-height 0.2s",paddingBottom:"10px"},children:[o,r.items.length===0&&c.jsx("div",{style:{padding:"10px",textAlign:"center",color:"#aaa",fontSize:"0.85rem",border:"1px dashed #ddd",borderRadius:"4px"},children:""})]})]})},QE=({formData:r,setFormData:n})=>{R.useEffect(()=>{if(!r.stepSections){const x=r.stepGroups||[{id:"default",name:""}],j=(r.steps||[]||[]).map(E=>typeof E=="string"?{id:crypto.randomUUID(),text:E}:E),_=x.map(E=>({id:E.id,name:E.name,items:j.filter(A=>E.id==="default"&&!A.groupId?!0:A.groupId===E.id)})),T=new Set(_.flatMap(E=>E.items.map(A=>A.id))),C=j.filter(E=>!T.has(E.id));C.length>0&&(_.length>0?_[0].items.push(...C):_.push({id:"default",name:"",items:C})),_.length===0&&_.push({id:crypto.randomUUID(),name:"",items:[]}),n(E=>({...E,stepSections:_}))}},[r.steps,r.stepGroups,r.stepSections,n]);const a=r.stepSections||[],s=Ws(cn(Fs,{activationConstraint:{distance:10}}),cn(el,{activationConstraint:{delay:250,tolerance:5}}),cn(Ea,{coordinateGetter:rl})),o=({active:x,over:w})=>{if(!w)return;const j=x.id,_=w.id,T=a.find(E=>E.items.some(A=>A.id===j)),C=a.find(E=>E.items.some(A=>A.id===_))||a.find(E=>E.id===_);!T||!C||T===C||n(E=>{const A=T.items,B=C.items,D=A.findIndex(q=>q.id===j),I=B.findIndex(q=>q.id===_);let k;if(_===C.id)k=B.length+1;else{const U=w&&x.rect.current.translated&&x.rect.current.translated.top>w.rect.top+w.rect.height?1:0;k=I>=0?I+U:B.length+1}return{...E,stepSections:E.stepSections.map(q=>q.id===T.id?{...q,items:A.filter(U=>U.id!==j)}:q.id===C.id?{...q,items:[...B.slice(0,k),A[D],...B.slice(k,B.length)]}:q)}})},u=({active:x,over:w})=>{if(!w)return;const j=x.id,_=w.id,T=a.find(E=>E.items.some(A=>A.id===j)),C=a.find(E=>E.items.some(A=>A.id===_))||a.find(E=>E.id===_);if(T&&C&&T===C){const E=T.items.findIndex(B=>B.id===j),A=C.items.findIndex(B=>B.id===_);E!==A&&n(B=>({...B,stepSections:B.stepSections.map(D=>D.id===T.id?{...D,items:Ni(D.items,E,A)}:D)}))}},h=(x,w,j)=>{n(_=>({..._,stepSections:_.stepSections.map(T=>{if(T.id!==x)return T;const C=[...T.items];return C[w]={...C[w],text:j},{...T,items:C}})}))},p=(x,w)=>{n(j=>({...j,stepSections:j.stepSections.map(_=>_.id===x?{..._,items:_.items.filter((T,C)=>C!==w)}:_)}))},g=x=>{const w={id:crypto.randomUUID(),text:""};n(j=>({...j,stepSections:j.stepSections.map(_=>_.id===x?{..._,items:[..._.items,w]}:_)}))},m=()=>{n(x=>({...x,stepSections:[...x.stepSections,{id:crypto.randomUUID(),name:"",items:[]}]}))},v=x=>{n(w=>({...w,stepSections:w.stepSections.filter(j=>j.id!==x)}))},y=(x,w)=>{n(j=>({...j,stepSections:j.stepSections.map(_=>_.id===x?{..._,name:w}:_)}))};return c.jsxs(Ls,{sensors:s,collisionDetection:my,onDragOver:o,onDragEnd:u,children:[c.jsxs("div",{className:"recipe-form-steps",children:[a.map(x=>c.jsx(Bs,{id:x.id,items:x.items.map(w=>w.id),strategy:Mo,children:c.jsxs(JE,{section:x,sections:a,onSectionChange:y,onRemoveSection:v,children:[x.items.map((w,j)=>c.jsx(KE,{id:w.id,index:j,item:w,groupId:x.id,onChange:h,onRemove:p},w.id)),c.jsx(ce,{type:"button",variant:"ghost",onClick:()=>g(x.id),style:{width:"100%",marginTop:"0.5rem",borderStyle:"dashed"},children:"+ "})]})},x.id)),c.jsx(ce,{type:"button",variant:"secondary",onClick:m,style:{width:"100%",marginTop:"1rem",padding:"1rem"},children:"+ "})]}),c.jsx(ky,{dropAnimation:{sideEffects:Sh({styles:{active:{opacity:"0.5"}}})},children:null})]})},l0=({onClose:r,onImport:n,initialMode:a="url"})=>{const[s,o]=R.useState(a),[u,h]=R.useState(null),[p,g]=R.useState(""),[m,v]=R.useState(""),[y,x]=R.useState(null),[w,j]=R.useState(null),[_,T]=R.useState(!1),[C,E]=R.useState(null),[A,B]=R.useState(!1),D=H=>{H.preventDefault(),H.stopPropagation(),H.type==="dragenter"||H.type==="dragover"?B(!0):H.type==="dragleave"&&B(!1)},I=H=>{if(H.preventDefault(),H.stopPropagation(),B(!1),H.dataTransfer.files&&H.dataTransfer.files[0]){const Z=H.dataTransfer.files[0];Z.type.startsWith("image/")&&(x(Z),j(URL.createObjectURL(Z)))}},k=H=>/[---]/.test(H||""),q=async H=>{try{const Z=[];Z.push(H.name||""),Z.push(H.description||"");const re=[];Array.isArray(H.ingredients)&&H.ingredients.forEach((O,L)=>{O.name&&(Z.push(O.name),re.push(L))});const te=[];if(Array.isArray(H.steps)&&H.steps.forEach((O,L)=>{Z.push(O),te.push(L)}),Z.length===0)return H;const{data:z,error:J}=await Ce.functions.invoke("translate",{body:{text:Z,target_lang:"JA"}});if(J)throw J;const ae=z.translations.map(O=>O.text);let fe=0;const se={...H};return se.name=ae[fe++]||se.name,se.description=ae[fe++]||se.description,re.length>0&&(se.ingredients=se.ingredients.map((O,L)=>{const ee=re.indexOf(L);return ee!==-1?{...O,name:ae[fe+ee]}:O}),fe+=re.length),te.length>0&&(se.steps=se.steps.map((O,L)=>{const ee=te.indexOf(L);return ee!==-1?ae[fe+ee]:O})),se}catch(Z){return console.error("Translation failed:",Z),alert(""),H}},U=async()=>{T(!0),E(null);try{let H,Z="";if(s==="url"){if(!m)return;Z=m;const{data:z,error:J}=await Ce.functions.invoke("scrape-recipe",{body:{url:m}});if(J)throw J;H=z}else{if(!y)return;const z=new FormData;z.append("image",y);const{data:J,error:ae}=await Ce.functions.invoke("analyze-image",{body:z});if(ae)throw ae;H=J}if(H.error)throw new Error(H.error);if(!H.recipe)throw new Error("No recipe found");let re=H.recipe;re.name=re.name||re.title||"",re.recipeYield=re.recipeYield||re.servings||"",re.description=re.description||"";const te=(re.name||"")+(re.steps?re.steps.slice(0,3).join(""):"");if(te&&!k(te)){h(re),g(Z),o("confirm-translation"),T(!1);return}n(re,Z),r()}catch(H){console.error("Import failed details:",H);const Z=H.message||"Import failed. Please try again.";E(Z)}finally{s!=="confirm-translation"&&T(!1)}},ne=async H=>{T(!0);try{let Z=u;H&&(Z=await q(u)),n(Z,p),r()}catch(Z){console.error("Translation flow error:",Z),E("Translation failed. Importing original."),n(u,p),r()}finally{T(!1)}},W=H=>{const Z=H.target.files[0];Z&&(x(Z),j(URL.createObjectURL(Z)))};return c.jsx("div",{className:"modal-overlay fade-in",children:c.jsxs(ft,{className:"import-modal-card",children:[c.jsx("h3",{className:"modal-title",children:s==="confirm-translation"?"":""}),s==="confirm-translation"?c.jsxs("div",{className:"translation-confirm-content",children:[c.jsxs("div",{style:{textAlign:"center",padding:"1rem 0",marginBottom:"1rem"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"  "}),c.jsx("p",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:""}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#666"},children:["",c.jsx("br",{}),c.jsx("span",{style:{fontSize:"0.8rem"},children:"(DeepL)"})]})]}),c.jsxs("div",{className:"modal-actions",style:{flexDirection:"column",gap:"8px"},children:[c.jsx(ce,{type:"button",variant:"primary",onClick:()=>ne(!0),isLoading:_,style:{width:"100%"},children:""}),c.jsx(ce,{type:"button",variant:"secondary",onClick:()=>ne(!1),disabled:_,style:{width:"100%"},children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"import-mode-tabs",children:[c.jsx("button",{type:"button",onClick:()=>o("url"),className:`tab-btn tab-import-web ${s==="url"?"active":""}`,children:" Web URL"}),c.jsx("button",{type:"button",onClick:()=>o("image"),className:`tab-btn tab-import-image ${s==="image"?"active":""}`,children:"  (Best Effort)"})]}),s==="url"?c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"URL"}),c.jsx("input",{type:"url",placeholder:"https://...",value:m,onChange:H=>v(H.target.value),className:"import-url-input",autoFocus:!0})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{children:""}),c.jsxs("div",{className:"image-upload-wrapper",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:W,id:"recipe-image-upload",className:"image-upload-input"}),c.jsx("label",{htmlFor:"recipe-image-upload",onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:I,className:`image-upload-label ${A?"drag-active":""}`,children:w?c.jsx("img",{src:w,alt:"Preview",className:"image-upload-preview"}):A?"":""})]})]}),C&&c.jsx("p",{className:"error-text",children:C}),c.jsxs("div",{className:"modal-actions",children:[c.jsx(ce,{type:"button",variant:"ghost",onClick:r,disabled:_,children:""}),c.jsx(ce,{type:"button",variant:"primary",onClick:U,isLoading:_,disabled:s==="url"?!m:!y,children:""})]})]})]})})},$v=({onSave:r,onCancel:n,initialData:a})=>{const s=a||{},[o,u]=R.useState(null),[h,p]=R.useState(new Map);R.useMemo(()=>Array.from(h.keys()),[h]);const[g,m]=R.useState(null),[v,y]=R.useState([]);Ae.useEffect(()=>{(async()=>{const Z=await ji.fetchPriceList();p(Z)})()},[]);const x=R.useMemo(()=>{const H=s.steps||[""];let Z=s.stepGroups||[];const re=H.some(z=>typeof z=="object"&&z.group);if(Z.length===0&&re){const z=new Map;H.forEach(J=>{typeof J=="object"&&J.group&&!z.has(J.group)&&z.set(J.group,crypto.randomUUID())}),Z=Array.from(z.entries()).map(([J,ae])=>({id:ae,name:J}))}return{steps:H.map(z=>{const J=typeof z=="string"?z:z.text||"",ae=typeof z=="object"&&z.id?z.id:crypto.randomUUID();let fe=typeof z=="object"?z.groupId:void 0;const se=typeof z=="object"?z.group:void 0;if(!fe&&se&&Z.length>0){const O=Z.find(L=>L.name===se);O&&(fe=O.id)}return{id:ae,text:J,groupId:fe}}),stepGroups:Z}},[s]),w=x.steps,j=x.stepGroups,_=R.useMemo(()=>{const H=s.ingredients||[{name:"",quantity:"",unit:"",cost:"",purchaseCost:""}];let Z=s.ingredientGroups||[];if(Z.length===0&&H.some(te=>te.group)){const te=new Map;H.forEach(z=>{z.group&&!te.has(z.group)&&te.set(z.group,crypto.randomUUID())}),Z=Array.from(te.entries()).map(([z,J])=>({id:J,name:z})),te.size>0&&H.some(z=>!z.group)}return{ingredients:H.map(te=>{const z=typeof te=="string"?{name:te,quantity:"",unit:"",cost:"",purchaseCost:""}:{...te,cost:te.cost||"",purchaseCost:te.purchaseCost||""};let J=z.groupId;if(!J&&z.group&&Z.length>0){const ae=Z.find(fe=>fe.name===z.group);ae&&(J=ae.id)}return{...z,id:z.id||crypto.randomUUID(),groupId:J}}),ingredientGroups:Z}},[s]),T=_.ingredients,C=_.ingredientGroups,[E,A]=R.useState({title:s.title||"",description:s.description||"",image:s.image||"",imageFile:null,storeName:s.storeName||"",servings:s.servings||"",ingredients:T,ingredientGroups:C,steps:w,stepGroups:j,tags:s.tags||[""],course:s.course||"",category:s.category||"",type:s.type||"normal",flours:s.flours||[],breadIngredients:s.breadIngredients||[],sourceUrl:s.sourceUrl||""}),[B,D]=R.useState(!1);Ws(cn(Fs,{activationConstraint:{distance:10}}),cn(el,{activationConstraint:{delay:1e3,tolerance:5}}),cn(Ea,{coordinateGetter:rl}));const I=(H,Z="")=>{const re=new Map,te=H.ingredients||[];te.forEach(L=>{let ee=L.group||"";ee==="Main"&&(ee=""),re.has(ee)||re.set(ee,crypto.randomUUID())});const z=Array.from(re.entries()).map(([L,ee])=>({id:ee,name:L})),J=te.map(L=>{let ee=L.group||"";ee==="Main"&&(ee="");let ie;return re.has(ee)&&(ie=re.get(ee)),{id:crypto.randomUUID(),name:L.name||"",quantity:L.quantity||"",unit:L.unit||"",cost:"",purchaseCost:"",groupId:ie}}),ae=new Map,fe=H.steps||[];fe.forEach(L=>{typeof L=="object"&&L.group&&L.group!=="Main"&&(ae.has(L.group)||ae.set(L.group,crypto.randomUUID()))});const se=Array.from(ae.entries()).map(([L,ee])=>({id:ee,name:L})),O=fe.map(L=>{const ee=typeof L=="object",ie=ee?L.text||"":L,me=ee?L.group:null;let ve;return me&&ae.has(me)&&(ve=ae.get(me)),{id:crypto.randomUUID(),text:ie,groupId:ve}});A(L=>({...L,title:H.name||L.title,description:H.description||L.description,category:Z?"URL":H.category||L.category,image:H.image||L.image,servings:H.recipeYield||L.servings,ingredients:J,ingredientGroups:z,steps:O,stepGroups:se,ingredientSections:void 0,stepSections:void 0,sourceUrl:Z||L.sourceUrl})),u(null)},k=H=>{H.preventDefault(),H.stopPropagation(),H.type==="dragenter"||H.type==="dragover"?D(!0):H.type==="dragleave"&&D(!1)},q=H=>{if(H.preventDefault(),H.stopPropagation(),D(!1),H.dataTransfer.files&&H.dataTransfer.files[0]){const Z=H.dataTransfer.files[0];Z.type.startsWith("image/")&&A(re=>({...re,imageFile:Z,image:URL.createObjectURL(Z)}))}},U=H=>{const{id:Z,value:re}=H.target;A(te=>({...te,[Z]:re}))},ne=H=>{const Z=H.target.files[0];Z&&A(re=>({...re,imageFile:Z,image:URL.createObjectURL(Z)}))},W=H=>{H.preventDefault();let Z=[],re=[];if(E.type==="bread")Z=E.ingredients.map(({id:se,...O})=>O);else{const se=E.ingredientSections||[];se.length===0&&E.ingredients.length>0?Z=E.ingredients.map(({id:O,...L})=>L):(Z=se.flatMap(O=>O.items.map(L=>({...L,groupId:O.id}))).map(({id:O,...L})=>L),re=se.map(O=>({id:O.id,name:O.name})))}const te=new Set(E.tags||[]);E.course&&te.add(E.course),E.category&&te.add(E.category),E.type==="bread"&&te.add("");const z=Array.from(te).filter(Boolean);let J=[],ae=[];const fe=E.stepSections||[];fe.length===0&&E.steps.length>0?J=E.steps.map(se=>typeof se=="string"?{text:se}:se):(J=fe.flatMap(se=>se.items.map(O=>({text:O.text,groupId:se.id}))),ae=fe.map(se=>({id:se.id,name:se.name}))),r({...E,ingredients:Z,ingredientGroups:re,steps:J,stepGroups:ae,image:E.imageFile||E.image,id:s.id||Date.now(),tags:z,ingredientSections:void 0,stepSections:void 0})};return c.jsxs("form",{className:"recipe-form fade-in",onSubmit:W,children:[o&&c.jsx(l0,{onClose:()=>u(null),onImport:I,initialMode:o}),c.jsxs("div",{className:"recipe-form__header",children:[c.jsx("h2",{className:"section-title",children:s.title?"":""}),c.jsxs("div",{className:"recipe-form__actions",children:[c.jsx(ce,{type:"button",variant:"ghost",onClick:n,children:""}),c.jsx(ce,{type:"submit",variant:"primary",children:""})]})]}),c.jsxs("div",{className:"recipe-form__grid",children:[c.jsxs("div",{className:"form-column",children:[c.jsxs(ft,{children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsx(tt,{id:"course",value:E.course,onChange:U,placeholder:": , ",list:"course-options"}),c.jsxs("datalist",{id:"course-options",children:[c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsx(tt,{id:"category",value:E.category,onChange:U,placeholder:": , ",list:"category-options"}),c.jsxs("datalist",{id:"category-options",children:[c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""}),c.jsx("option",{value:""})]})]})]}),c.jsx(tt,{label:"",id:"title",value:E.title,onChange:U,placeholder:": ",required:!0}),c.jsx(tt,{label:"",id:"description",textarea:!0,value:E.description,onChange:U,placeholder:"..."}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"URL"}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx(tt,{id:"sourceUrl",value:E.sourceUrl||"",onChange:U,placeholder:"https://example.com/recipe/...",style:{flex:1}}),E.sourceUrl&&c.jsx(ce,{type:"button",variant:"ghost",onClick:()=>A(H=>({...H,sourceUrl:""})),title:"URL",style:{color:"var(--color-danger)"},children:""})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"hsl(var(--color-primary))"},children:""}),c.jsxs("div",{onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:q,style:{position:"relative",marginBottom:"1rem",borderRadius:"var(--radius-md)",overflow:"hidden",border:B?"2px dashed var(--color-primary)":"1px dashed hsl(var(--color-border))",backgroundColor:B?"#f0f9ff":"#f9f9f9",transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[E.image?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{width:"100%",height:"200px",backgroundColor:"#f0f0f0",position:"relative"},children:[c.jsx("img",{src:E.image,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",opacity:B?.5:1},onError:H=>{H.target.style.display="none",H.target.parentElement.textContent=""}}),c.jsx("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation(),A(Z=>({...Z,image:"",imageFile:null}))},style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",lineHeight:1,zIndex:10},title:"",children:""})]}),c.jsx("div",{style:{padding:"0.5rem",fontSize:"0.8rem",color:"#666"},children:""})]}):c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:B?"":""}),c.jsx("input",{type:"file",accept:"image/*",onChange:ne,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",display:E.image?"none":"block"}}),E.image&&c.jsx("input",{type:"file",accept:"image/*",onChange:ne,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1}})]})]})]}),!s.id&&c.jsxs(ft,{className:"mb-md glass-card",children:[c.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"0.8rem",marginBottom:"0.8rem"},children:""}),c.jsxs("div",{className:"import-actions-row",children:[c.jsx(ce,{variant:"secondary",type:"button",onClick:()=>u("url"),className:"btn-import-web",children:" Web URL"}),c.jsx(ce,{variant:"secondary",type:"button",onClick:()=>u("image"),className:"btn-import-image",children:"  (Best Effort)"})]}),c.jsxs("div",{className:"image-upload-section",style:{marginTop:"0.2rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"#555",marginBottom:"0.4rem",display:"block"},children:""}),c.jsx("input",{type:"file",accept:"image/*",onChange:ne,style:{marginBottom:"0.5rem"}}),E.image&&c.jsx("div",{style:{marginTop:"0.5rem"},children:c.jsx("img",{src:E.image,alt:"Preview",style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"4px"}})})]})]}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:""}),c.jsx(tt,{id:"storeName",value:E.storeName,onChange:U,placeholder:"",list:"store-options"}),c.jsx("datalist",{id:"store-options",children:lh.map(H=>c.jsx("option",{value:H},H))})]}),c.jsx(tt,{label:"",id:"servings",value:E.servings,onChange:U,placeholder:"4"})]})]}),c.jsxs("div",{className:"form-column",children:[c.jsxs(ft,{className:"mb-md",style:{position:"relative",zIndex:10},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"mode-toggle",style:{display:"flex",gap:"0.5rem",background:"#eee",padding:"4px",borderRadius:"8px"},children:[c.jsx("button",{type:"button",onClick:()=>A(H=>({...H,type:"normal"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:E.type==="normal"?"white":"transparent",fontWeight:E.type==="normal"?"bold":"normal",boxShadow:E.type==="normal"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:""}),c.jsx("button",{type:"button",onClick:()=>A(H=>({...H,type:"bread"})),style:{padding:"4px 12px",borderRadius:"6px",border:"none",background:E.type==="bread"?"white":"transparent",fontWeight:E.type==="bread"?"bold":"normal",boxShadow:E.type==="bread"?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",color:E.type==="bread"?"var(--color-primary)":"inherit"},children:" (Baker's %)"})]})]}),E.type==="bread"?c.jsx($E,{formData:E,setFormData:A}):c.jsx(YE,{formData:E,setFormData:A,priceList:h})]}),c.jsxs(ft,{children:[c.jsx("h3",{children:""}),c.jsx(QE,{formData:E,setFormData:A})]})]})]})]})},XE="modulepreload",ZE=function(r){return"/app/"+r},Hv={},Ds=function(n,a,s){let o=Promise.resolve();if(a&&a.length>0){let m=function(v){return Promise.all(v.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var h=m;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");o=m(a.map(v=>{if(v=ZE(v),v in Hv)return;Hv[v]=!0;const y=v.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":XE,y||(w.as="script"),w.crossOrigin="",w.href=v,g&&w.setAttribute("nonce",g),document.head.appendChild(w),y)return new Promise((j,_)=>{w.addEventListener("load",j),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return o.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return n().catch(u)})},WE=({onBack:r})=>{const[n,a]=R.useState(null),[s,o]=R.useState({type:"",message:""}),[u,h]=R.useState(!1),[p,g]=R.useState([]),[m,v]=R.useState(!1),[y,x]=R.useState(null),[w,j]=R.useState({key:"dateStr",direction:"desc"}),[_,T]=R.useState(""),C=U=>{let ne="asc";w.key===U&&w.direction==="asc"&&(ne="desc"),j({key:U,direction:ne})},E=Ae.useMemo(()=>{let U=[...p];if(_){const ne=_.toLowerCase().trim();U=U.filter(W=>W.name&&W.name.toLowerCase().includes(ne)||W.vendor&&W.vendor.toLowerCase().includes(ne)||W.dateStr&&W.dateStr.includes(ne))}return w.key&&U.sort((ne,W)=>{let H=ne[w.key]||"",Z=W[w.key]||"";return H<Z?w.direction==="asc"?-1:1:H>Z?w.direction==="asc"?1:-1:0}),U},[p,w,_]),[A,B]=R.useState([]);R.useEffect(()=>{D()},[]);const D=async()=>{v(!0);try{const U=await ji.getPriceListArray();g(U);const ne=await ji.getFileList();B(ne)}catch(U){console.error("Failed to load price data",U)}finally{v(!1)}},I=U=>{U.target.files&&U.target.files[0]&&(a(U.target.files[0]),o({type:"",message:""}))},k=async()=>{if(!n)return;h(!0),o({type:"info",message:"..."});const U=await ji.uploadPriceList(n);if(h(!1),U.success){o({type:"success",message:""}),a(null);const ne=document.getElementById("csv-upload-input");ne&&(ne.value=""),D()}else o({type:"error",message:`: ${U.error.message}`})},q=U=>{x({message:`${U}
`,onConfirm:async()=>{h(!0);const ne=await ji.deletePriceFile(U);h(!1),ne.success?(o({type:"success",message:""}),D()):o({type:"error",message:`: ${ne.error.message}`})}})};return c.jsxs("div",{className:"dashboard-container fade-in",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("h2",{className:"section-title",style:{margin:0,fontSize:"1.5rem"},children:""}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#666",background:"#eee",padding:"2px 8px",borderRadius:"12px"},children:"Admin Mode"})]}),c.jsx(ce,{variant:"ghost",onClick:r,children:" "})]}),c.jsxs("div",{className:"dashboard-content",children:[c.jsxs("aside",{className:"dashboard-sidebar",children:[c.jsxs("div",{className:"sidebar-card",children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx("span",{children:""})," "]}),c.jsxs("div",{className:"upload-area",children:[c.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:["CSV (Shift-JIS)",c.jsx("br",{}),c.jsxs("span",{style:{fontSize:"0.75rem",color:"#888"},children:[" 1: , , , ",c.jsx("br",{})," 2:  (12.csv)"]})]}),c.jsx("input",{type:"file",accept:".csv",onChange:I,id:"csv-upload-input",className:"csv-input",style:{width:"100%",marginBottom:"0.5rem",fontSize:"0.85rem"}}),c.jsx(ce,{variant:"primary",onClick:k,disabled:!n||u,className:"upload-btn",size:"sm",block:!0,children:u?"...":""})]}),s.message&&c.jsx("div",{className:`status-msg ${s.type}`,children:s.message})]}),c.jsxs("div",{className:"sidebar-card",style:{flex:1},children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx("span",{children:""})," ",c.jsxs("span",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"normal",marginLeft:"auto"},children:[A.length,""]})]}),A.length===0?c.jsx("p",{style:{color:"#aaa",fontStyle:"italic",fontSize:"0.85rem",textAlign:"center"},children:""}):c.jsx("div",{className:"file-list",children:A.map(U=>c.jsxs("div",{className:"file-list-item",children:[c.jsx("span",{className:"file-name",title:U.name,children:U.name}),c.jsx(ce,{variant:"danger",size:"sm",onClick:()=>q(U.name),disabled:u,style:{padding:"2px 8px",fontSize:"0.75rem",minWidth:"auto"},children:""})]},U.name))})]}),c.jsxs("div",{className:"sidebar-card",children:[c.jsx("div",{className:"sidebar-title",children:" "}),c.jsxs("ul",{style:{fontSize:"0.75rem",color:"#666",paddingLeft:"1.2rem",margin:0},children:[c.jsx("li",{style:{marginBottom:"4px"},children:""}),c.jsx("li",{style:{marginBottom:"4px"},children:""})]})]})]}),c.jsxs("main",{className:"dashboard-main",children:[c.jsxs("div",{className:"main-toolbar",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"#333"},children:""}),c.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},children:[" ",E.length.toLocaleString()," "]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx(tt,{placeholder:" (, , )...",value:_,onChange:U=>T(U.target.value),style:{width:"250px",fontSize:"0.9rem"}}),c.jsx(ce,{variant:"secondary",size:"sm",onClick:D,children:" "})]})]}),c.jsx("div",{className:"table-wrapper",children:m?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:"#888"},children:"..."}):c.jsxs("table",{className:"enterprise-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsxs("th",{onClick:()=>C("dateStr"),style:{width:"120px"},children:[" ",w.key==="dateStr"&&(w.direction==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>C("vendor"),children:[" ",w.key==="vendor"&&(w.direction==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>C("name"),children:[" ",w.key==="name"&&(w.direction==="asc"?"":"")]}),c.jsx("th",{style:{textAlign:"right",width:"150px"},children:" ()"})]})}),c.jsx("tbody",{children:E.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"no-data",children:""})}):E.map((U,ne)=>c.jsxs("tr",{children:[c.jsx("td",{className:"col-date",children:U.dateStr||"-"}),c.jsx("td",{children:U.vendor||"-"}),c.jsx("td",{style:{fontWeight:"500"},children:U.name}),c.jsxs("td",{className:"col-number",children:[U.price?U.price.toLocaleString():"-",U.unit&&c.jsxs("span",{style:{color:"#888",fontSize:"0.85em",marginLeft:"4px"},children:["/ ",U.unit]})]})]},ne))})]})})]}),c.jsx("aside",{className:"dashboard-sidebar",children:c.jsxs("div",{className:"sidebar-card",style:{borderColor:"var(--color-primary)"},children:[c.jsxs("div",{className:"sidebar-title",style:{color:"var(--color-primary)"},children:[c.jsx("span",{children:""})," "]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:""}),c.jsx(ce,{variant:"secondary",size:"sm",block:!0,onClick:async()=>{try{const U=await Ds(()=>Promise.resolve().then(()=>Ev),[]).then(Z=>Z.recipeService.exportAllRecipes()),ne=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),W=URL.createObjectURL(ne),H=document.createElement("a");H.href=W,H.download=`recipe_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(W)}catch(U){alert(""),console.error(U)}},children:" JSON"})]}),c.jsxs("div",{children:[c.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:" / "}),c.jsx("input",{type:"file",accept:".json",id:"backup-upload-input",style:{display:"none"},onChange:async U=>{const ne=U.target.files[0];if(ne){if(!window.confirm(`
`)){U.target.value="";return}try{o({type:"info",message:"..."}),h(!0);const W=await ne.text(),H=JSON.parse(W),{recipeService:Z}=await Ds(async()=>{const{recipeService:te}=await Promise.resolve().then(()=>Ev);return{recipeService:te}},void 0),re=await Z.importRecipes(H);alert(`${re.count}${re.errors.length>0?`
: ${re.errors.length}`:""}`),o({type:"success",message:""})}catch(W){console.error(W),alert(""),o({type:"error",message:""})}finally{h(!1),U.target.value=""}}}}),c.jsx(ce,{variant:"secondary",size:"sm",block:!0,onClick:()=>document.getElementById("backup-upload-input").click(),disabled:u,children:" "})]})]})})]}),y&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,animation:"fadeIn 0.2s ease-out"},onClick:()=>x(null),children:c.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},onClick:U=>U.stopPropagation(),children:[c.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#333"},children:""}),c.jsx("p",{style:{whiteSpace:"pre-wrap",marginBottom:"24px",color:"#666"},children:y.message}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx(ce,{variant:"ghost",onClick:()=>x(null),children:""}),c.jsx(ce,{variant:"danger",onClick:()=>{y.onConfirm(),x(null)},children:""})]})]})})]})},FE=({recipes:r,recentIds:n,onSelect:a})=>{if(!n||n.length===0)return null;const s=n.map(o=>r.find(u=>u.id===o)).filter(Boolean).slice(0,7);return s.length===0?null:c.jsxs("div",{className:"recent-recipes",children:[c.jsx("h3",{className:"recent-header",children:""}),c.jsx("div",{className:"recent-list",children:s.map(o=>c.jsxs("div",{className:"recent-item",onClick:()=>a(o),children:[c.jsx("div",{className:"recent-thumbnail",children:o.image?c.jsx("img",{src:o.image,alt:o.title}):c.jsx("div",{className:"recent-placeholder"})}),c.jsx("div",{className:"recent-info",children:c.jsx("div",{className:"recent-title",children:o.title})})]},o.id))})]})},eR=({onBack:r})=>(R.useEffect(()=>{window.scrollTo(0,0)},[]),c.jsxs("div",{className:"levain-guide-container",children:[c.jsxs("header",{className:"levain-guide-header",children:[c.jsx("h1",{children:"LEVAIN GUIDE"}),c.jsx("p",{className:"subtitle",children:" "}),c.jsx("p",{className:"subtitle",children:""}),c.jsx("div",{className:"divider"})]}),c.jsxs("main",{className:"levain-guide-main",children:[c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("p",{children:"Levain"}),c.jsx("h3",{children:""}),c.jsx("p",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"Yeast"})," Saccharomyces cerevisiae, Saccharomyces pastorianus ",c.jsx("br",{}),c.jsx("strong",{children:"LAB"})," Lactobacillus plantarum, Lactobacillus brevis ",c.jsx("br",{}),c.jsx("strong",{children:""})," Acetobacter aceti "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:["",c.jsx("br",{}),c.jsxs("div",{className:"formula",children:["CHO  2CHOH + 2CO + ",c.jsx("br",{}),"(   +  + )"]}),"",c.jsx("br",{}),c.jsxs("div",{className:"formula",children:["CHO  2CHO",c.jsx("br",{}),"(  )"]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[" ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"- 7-10"}),c.jsxs("div",{className:"timeline",children:[c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 1-2 "}),c.jsx("p",{children:"100g + 100ml 20-22"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," "]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 3-4 "}),c.jsx("p",{children:"50%50g + 50ml "}),c.jsx("p",{children:"100g  50g50g + 50ml"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," pH 3.5-4.5"]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 5-6 2"}),c.jsx("p",{children:"50%50g + 50ml "}),c.jsxs("div",{className:"success-box",children:[" ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]}),c.jsxs("div",{className:"timeline-item",children:[c.jsx("span",{className:"timeline-label",children:"Day 7-10 3"}),c.jsx("p",{children:"1150%1:1"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," 15",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," pH 3.5-4.0"]})]})]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:"(g)"}),c.jsx("th",{children:"(ml)"}),c.jsx("th",{children:"(g)"}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"0"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"2"}),c.jsx("td",{children:"1"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"100"}),c.jsx("td",{children:"0"}),c.jsx("td",{children:""})]})]})]})})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"5-8"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"2-4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"15-18"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"1-2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"20-22"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"3-5"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"25-28"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"2-3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"30"}),c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:"1-2"})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"1"}),c.jsx("br",{}),"100g50g + 50ml"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),"8-12"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),""]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"2%100ml2g"}),c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"2"}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 12 8:00"}),c.jsx("br",{}),"50g25g + 25ml "]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 1  14:00"}),c.jsx("br",{}),"25g + 25ml 2"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:"Day 1  20:00"}),c.jsx("br",{}),""]})]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:" "})," ",c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:" "})," pH",c.jsx("br",{}),"pH 3.5-4.0pH"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"18"}),c.jsx("td",{children:"16-24"}),c.jsx("td",{children:"1"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"20-22"}),c.jsx("td",{children:"12-16"}),c.jsx("td",{children:"2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"24-26"}),c.jsx("td",{children:"8-12"}),c.jsx("td",{children:"2"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"28"}),c.jsx("td",{children:"4-8"}),c.jsx("td",{children:"2"})]})]})]})})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"1"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. 22",c.jsx("br",{}),"2. 12",c.jsx("br",{}),"3. 1",c.jsx("br",{}),"4. 1-2"]}),c.jsx("h3",{children:"2"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," pH",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," "]}),c.jsx("h3",{children:"3"}),c.jsxs("div",{className:"warning-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. ",c.jsx("br",{}),"2. 15",c.jsx("br",{}),"3. 80%"]}),c.jsx("h3",{children:"4"}),c.jsxs("div",{className:"success-box",children:["",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""})," "]}),c.jsx("h3",{children:"5"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{}),"1. 1:0.8",c.jsx("br",{}),"2. ",c.jsx("br",{}),"3. "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:"pH"}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"pH4-8.0"}),c.jsx("br",{}),c.jsx("br",{})," pH 7.0",c.jsx("br",{})," pH 4.5-5.5",c.jsx("br",{})," pH 3.5-4.0",c.jsx("br",{})," pH 3.0"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"science-box",children:[c.jsx("strong",{children:"pH 3.8-4.0"})," ",c.jsx("br",{}),c.jsx("strong",{children:"pH 3.5"})," ",c.jsx("br",{}),c.jsx("strong",{children:"pH 4.5"})," "]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," 1",c.jsx("br",{})," ",c.jsx("br",{})," -203"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"15-20"}),c.jsx("td",{children:"18-20"}),c.jsx("td",{children:"1-2"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"25+"}),c.jsx("td",{children:"22-24"}),c.jsx("td",{children:""}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"18-22"}),c.jsx("td",{children:"20-22"}),c.jsx("td",{children:"1-2"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"5-15"}),c.jsx("td",{children:"18"}),c.jsx("td",{children:"2-3"}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," 24",c.jsx("br",{})," ",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," 18",c.jsx("br",{})," "]}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"step-list",children:[c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""})," ",c.jsx("br",{}),":=1:1 :=1:2 or 1:3"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{}),"100g + 50g + 150ml 12-24",c.jsx("br",{}),"11-2"]}),c.jsxs("div",{className:"step",children:[c.jsx("strong",{children:""}),c.jsx("br",{})," ",c.jsx("br",{})," ",c.jsx("br",{})," "]})]})]})]}),c.jsxs("div",{className:"levain-section",children:[c.jsx("h2",{children:""}),c.jsxs("div",{className:"levain-content",children:[c.jsx("h3",{children:""}),c.jsxs("div",{className:"highlight-box",children:[c.jsx("strong",{children:"100ml"}),c.jsx("br",{})," 110 to 110 CFU/ml",c.jsx("br",{})," 110 to 110 CFU/ml",c.jsx("br",{})," pH3.5-4.0",c.jsx("br",{})," 0.5-1.5%",c.jsx("br",{})," 0.3-0.8%"]}),c.jsx("h3",{children:""}),c.jsx("div",{className:"comparison-table-container",children:c.jsxs("table",{className:"levain-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:""}),c.jsx("th",{children:""}),c.jsx("th",{children:""})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"15-25% ()"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"5-15%"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"20-30%"}),c.jsx("td",{children:""})]}),c.jsxs("tr",{children:[c.jsx("td",{children:""}),c.jsx("td",{children:"30-50%"}),c.jsx("td",{children:""})]})]})]})}),c.jsx("h3",{children:""}),c.jsxs("div",{className:"formula",children:[" 18   - 8",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{})," 2018  (20-8) = 1.5",c.jsx("br",{})," 2418  (24-8) = 1.125",c.jsx("br",{})," 2818  (28-8) = 0.954"]})]})]})]}),c.jsxs("footer",{className:"levain-footer",children:[c.jsx("p",{children:" Maitriser le Levain, c'est comprendre la vie "}),c.jsx("p",{children:""})]}),c.jsxs("button",{className:"levain-back-button",onClick:r,children:[c.jsx("span",{children:""})," "]})]})),tR=({onBack:r})=>{const[n,a]=R.useState([]),[s,o]=R.useState(!0),[u,h]=R.useState(null);R.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0);const _=(await Ns.fetchAllUsers()).map(T=>{const C=`user_prefs_${T.id}`,E=JSON.parse(localStorage.getItem(C)||"{}");return E.show_master_recipes!==void 0?{...T,show_master_recipes:E.show_master_recipes}:T});a(_)}catch(j){console.error(j),h("")}finally{o(!1)}},[g,m]=R.useState(null),v=async()=>{if(g)try{await Ns.deleteUser(g.id),a(n.filter(j=>j.id!==g.id)),m(null)}catch(j){console.error(j),alert(`: ${j.message||""}`)}},y=n.filter(j=>j.id==="admin"),x=n.filter(j=>j.id!=="admin"),w=({user:j,isAdmin:_})=>c.jsxs(ft,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",backgroundColor:"white"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#333"},children:[j.id," ",_&&c.jsx("span",{style:{fontSize:"0.8rem",backgroundColor:"#e0e0e0",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",color:"#555"},children:""})]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[": ",new Date(j.created_at).toLocaleString()]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",j.last_login_at?new Date(j.last_login_at).toLocaleString():"---"]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"2px"},children:[": ",c.jsx("strong",{children:j.recipeCount||0})]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"#999",marginTop:"4px"},children:["Pass: ",j.password]})]}),!_&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.9rem",color:"#555"},children:[c.jsx("input",{type:"checkbox",checked:j.show_master_recipes||!1,onChange:async T=>{const C=T.target.checked;a(E=>E.map(A=>A.id===j.id?{...A,show_master_recipes:C}:A));try{const E=`user_prefs_${j.id}`,A=JSON.parse(localStorage.getItem(E)||"{}");A.show_master_recipes=C,localStorage.setItem(E,JSON.stringify(A))}catch(E){console.error(E)}try{await Ns.updateUser(j.id,{show_master_recipes:C})}catch(E){console.error(E)}}}),""]}),c.jsx(ce,{variant:"danger",onClick:()=>m(j),children:""})]})]},j.id);return c.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",height:"100%",overflowY:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",color:"var(--text-color)"},children:[c.jsx("h2",{children:""}),c.jsx(ce,{variant:"ghost",onClick:r,children:""})]}),u&&c.jsx("div",{style:{padding:"10px",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",marginBottom:"20px"},children:u}),g&&c.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(ft,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",backgroundColor:"white",color:"#333"},children:[c.jsx("h3",{style:{marginTop:0,color:"#dc3545"},children:""}),c.jsxs("p",{style:{color:"#333"},children:["",c.jsx("strong",{children:g.id}),"",c.jsx("br",{}),c.jsx("span",{style:{fontSize:"0.9em",color:"#666"},children:""})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(ce,{variant:"ghost",onClick:()=>m(null),children:""}),c.jsx(ce,{variant:"danger",onClick:v,children:""})]})]})}),s?c.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"..."}):c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[y.length>0&&c.jsxs("div",{children:[c.jsx("h3",{style:{borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--color-primary)"},children:""}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map(j=>c.jsx(w,{user:j,isAdmin:!0},j.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{borderBottom:"2px solid #ddd",paddingBottom:"0.5rem",marginBottom:"1rem",color:"var(--text-color)"},children:""}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:x.length>0?x.map(j=>c.jsx(w,{user:j,isAdmin:!1},j.id)):c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:""})})]})]})]})},nR=()=>{const[r,n]=R.useState(!0),[a,s]=R.useState(!1),[o,u]=R.useState(""),[h,p]=R.useState(""),[g,m]=R.useState(""),[v,y]=R.useState(""),[x,w]=R.useState(1),[j,_]=R.useState(""),[T,C]=R.useState(""),[E,A]=R.useState(""),[B,D]=R.useState(!1),[I,k]=R.useState(""),[q,U]=R.useState(""),{login:ne,register:W}=Ah(),H=async te=>{if(te.preventDefault(),k(""),U(""),!o.trim()||!h.trim()){k("ID");return}try{await ne(o.trim(),h,B)}catch(z){k(z.message)}},Z=async te=>{if(te.preventDefault(),k(""),!o.trim()||!h.trim()||!g.trim()||!v.trim()){k("");return}try{await W(o.trim(),h,g.trim(),v.trim()),U(""),n(!0),u(""),p("")}catch(z){k(z.message)}},re=async te=>{te.preventDefault(),k("");try{if(x===1){const z=await Ds(()=>Promise.resolve().then(()=>Od),void 0).then(J=>J.userService.getSecurityQuestion(o.trim()));if(!z)throw new Error("");_(z),w(2)}else if(x===2)await Ds(()=>Promise.resolve().then(()=>Od),void 0).then(J=>J.userService.verifySecurityAnswer(o.trim(),T.trim()))?w(3):k("");else if(x===3){if(!E.trim()){k("");return}await Ds(()=>Promise.resolve().then(()=>Od),void 0).then(z=>z.userService.resetPassword(o.trim(),E.trim())),U(""),s(!1),n(!0),w(1),u(""),p("")}}catch(z){k(z.message||"")}};return a?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:c.jsxs(ft,{style:{width:"100%",maxWidth:"400px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[c.jsx("h2",{style:{textAlign:"center",color:"var(--color-primary)",marginBottom:"1.5rem"},children:""}),I&&c.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem"},children:I}),c.jsxs("form",{onSubmit:re,children:[x===1&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginBottom:"1rem"},children:"ID"}),c.jsx("input",{type:"text",value:o,onChange:te=>u(te.target.value),placeholder:"ID",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(ce,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]}),x===2&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{style:{marginBottom:"0.5rem",fontWeight:"bold"},children:[": ",j]}),c.jsx("input",{type:"text",value:T,onChange:te=>C(te.target.value),placeholder:"",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(ce,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]}),x===3&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginBottom:"1rem"},children:""}),c.jsx("input",{type:"password",value:E,onChange:te=>A(te.target.value),placeholder:"",style:{width:"100%",padding:"12px",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"},required:!0}),c.jsx(ce,{type:"submit",variant:"primary",style:{width:"100%"},children:""})]})]}),c.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:c.jsx("button",{onClick:()=>{s(!1),n(!0),k("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer"},children:""})})]})}):c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#353535",padding:"20px"},children:c.jsxs(ft,{style:{width:"100%",maxWidth:"400px",padding:"2rem",backgroundColor:"white",color:"#333"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsxs("h1",{style:{fontFamily:'"Pinyon Script", cursive',fontSize:"3rem",margin:0,color:"var(--color-primary)"},children:["Recipe",c.jsx("br",{}),"Management"]}),c.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:r?"":""})]}),I&&c.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:I}),q&&c.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.9rem"},children:q}),c.jsxs("form",{onSubmit:r?H:Z,children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"ID"}),c.jsx("input",{type:"text",value:o,onChange:te=>u(te.target.value),placeholder:"ID",autoComplete:"username",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),c.jsx("input",{type:"password",value:h,onChange:te=>p(te.target.value),placeholder:"",autoComplete:r?"current-password":"new-password",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]}),!r&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:[" ",c.jsx("span",{style:{fontSize:"0.8em",fontWeight:"normal"},children:"()"})]}),c.jsxs("select",{value:g,onChange:te=>m(te.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0,children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"",children:""})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:""}),c.jsx("input",{type:"text",value:v,onChange:te=>y(te.target.value),placeholder:"",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",color:"#333",backgroundColor:"#fff"},required:!0})]})]}),r&&c.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:"#333"},children:[c.jsx("input",{type:"checkbox",checked:B,onChange:te=>D(te.target.checked),style:{width:"18px",height:"18px",accentColor:"var(--color-primary)"}}),c.jsx("span",{children:""})]}),c.jsx("button",{type:"button",onClick:()=>{s(!0),k(""),U(""),u("")},style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:""})]}),c.jsx(ce,{type:"submit",variant:"primary",style:{width:"100%",padding:"12px",fontSize:"1.1rem"},children:r?"":""})]}),c.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:c.jsx("button",{onClick:()=>{n(!r),k(""),U(""),m(""),y("")},style:{background:"none",border:"none",color:"var(--color-primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:r?"":""})})]})})};function rR(){const{user:r,logout:n,loading:a}=Ah(),[s,o]=Fw(),[u,h]=R.useState([]),[p,g]=R.useState(!0),[m,v]=R.useState(0),[y,x]=R.useState([]),w=s.get("view")||"list",j=s.get("id"),_=u.find(V=>String(V.id)===j)||null,[T,C]=R.useState(""),[E,A]=R.useState(null),[B,D]=R.useState(null),[I,k]=R.useState(""),[q,U]=R.useState(!1),[ne,W]=R.useState(!1),[H,Z]=R.useState(new Set),[re,te]=R.useState("normal"),[z,J]=R.useState(!1);R.useEffect(()=>{ee(),L(),se(),L(),se()},[]);const ae=Ws(cn(Fs,{activationConstraint:{distance:10}}),cn(el,{activationConstraint:{delay:1e3,tolerance:5}}),cn(Ea,{coordinateGetter:rl})),fe=V=>{const{active:de,over:je}=V;de.id!==je.id&&h(ye=>{const Ee=ye.findIndex(it=>it.id===de.id),St=ye.findIndex(it=>it.id===je.id);if(Ee===-1||St===-1)return ye;const nt=Ni(ye,Ee,St),rt=nt.map((it,_t)=>({id:it.id,order_index:_t}));return Gt.updateOrder(rt).catch(it=>console.error("Order update failed",it)),nt})},se=async()=>{try{const V=await Gt.fetchRecentRecipes();x(V||[])}catch(V){console.error("Failed to load history:",V)}},O=async V=>{const de=[V,...y.filter(je=>je!==V)].slice(0,20);x(de);try{await Gt.addToHistory(V)}catch(je){console.error("Failed to sync history",je)}},L=async()=>{try{const V=await Gt.getDeletedCount();v(V||0)}catch(V){console.error("Failed to load trash count:",V)}},ee=async()=>{try{g(!0);const V=await Gt.fetchRecipes(r);h(V||[])}catch(V){console.error("Failed to fetch recipes:",V)}finally{g(!1)}},ie=[...new Set(u.map(V=>V.course).filter(Boolean))],me=[...new Set(u.map(V=>V.category).filter(Boolean))],ve=u.reduce((V,de)=>(de.storeName&&(V[de.storeName]=(V[de.storeName]||0)+1),V),{}),Ne=u.reduce((V,de)=>(de.course&&(V[de.course]=(V[de.course]||0)+1),V),{}),Ve=u.reduce((V,de)=>(de.category&&(V[de.category]=(V[de.category]||0)+1),V),{}),ke=u.filter(V=>{const de=T===""||T==="recent"&&y.includes(V.id)||V.tags&&V.tags.includes(T)||V.category&&V.category===T||V.storeName&&V.storeName===T,je=I.toLowerCase().trim(),ye=!je||V.title.toLowerCase().includes(je)||V.description&&V.description.toLowerCase().includes(je)||V.ingredients&&V.ingredients.some(Ee=>Ee.name.toLowerCase().includes(je));return de&&ye}),De=T===""&&!I.trim()&&w==="list",Pt=V=>{o({view:"detail",id:V.id})},At=async(V,de=!1)=>{try{if(V.tags&&r.id!=="yoshito"&&r.id!=="admin"&&V.tags.some(ye=>ye==="owner:yoshito")){alert("");return}de?(await Gt.restoreRecipe(V.id),(w==="trash"||w==="detail")&&(o({view:"trash"}),Xe()),alert("")):(await Gt.deleteRecipe(V.id),h(u.filter(je=>je.id!==V.id)),o({view:"list"}),L())}catch(je){console.error("Failed to delete/restore recipe:",je),alert("")}finally{L()}},un=async V=>{try{await Gt.hardDeleteRecipe(V.id),h(u.filter(de=>de.id!==V.id)),o({view:"trash"}),alert(""),Xe(),L()}catch(de){console.error("Failed to hard delete recipe:",de),alert("")}},Xe=async()=>{try{g(!0);const V=await Gt.fetchDeletedRecipes();h(V||[]),C("")}catch(V){console.error("Failed to fetch deleted recipes:",V)}finally{g(!1)}},Ot=()=>{o({view:"trash"}),Xe()},Vt=()=>{o({view:"list"}),ee()},Fn=async(V,de)=>{try{let je,ye=de;if(de&&r.id!=="admin"){const Ee=V.tags?.find(nt=>nt.startsWith("owner:"));Ee===`owner:${r.id}`||(console.log(`Editing Recipe (Owner Tag: ${Ee||"None"}) as ${r.id}. Not the owner. Switching to Create mode (Copy).`),ye=!1)}ye?(je=await Gt.updateRecipe(V,r),h(u.map(Ee=>Ee.id===je.id?je:Ee))):(je=await Gt.createRecipe(V,r),h([je,...u])),o(ye?{view:"detail",id:je.id}:{view:"detail",id:je.id})}catch(je){console.error("Failed to save recipe:",je),alert(`
: ${je.message||je.error_description||JSON.stringify(je)}`)}},er=(V,de="")=>{const ye=["","baker","","","","dough","fermentation"].some(Mt=>(V.title||"").toLowerCase().includes(Mt)),Ee=["flour","","","","","","","","",""],St=["yeast","","",""],nt=V.ingredients||[],rt=nt.some(Mt=>St.some(Yt=>(Mt.name||"").toLowerCase().includes(Yt))),it=nt.some(Mt=>Ee.some(Yt=>(Mt.name||"").toLowerCase().includes(Yt))&&!Mt.name.includes(""));if(nt.some(Mt=>Mt.quantity&&String(Mt.quantity).includes("%")||Mt.unit&&String(Mt.unit).includes("%"))||rt||ye&&it){V.type="bread",V.flours=[],V.breadIngredients=[];const Mt=["flour","","","","","","","",""];if(nt.forEach(Yt=>{Mt.some(Tr=>(Yt.name||"").includes(Tr))?V.flours.push(Yt):V.breadIngredients.push(Yt)}),V.flours.length===0&&nt.length>0){const Yt=nt[0];(Yt.name||"").includes("")&&(V.flours.push(Yt),V.breadIngredients=V.breadIngredients.filter(Ra=>Ra!==Yt))}}V.sourceUrl=de,de&&(V.category="URL"),D(V),o({view:"create"})},Qt=()=>{W(!ne),Z(new Set)},wt=V=>{const de=new Set(H);de.has(V)?de.delete(V):de.add(V),Z(de)},le=()=>{J(!0)},ue=()=>{J(!1)},xe=async()=>{J(!1);try{g(!0),w==="trash"?(await Promise.all(Array.from(H).map(V=>Gt.hardDeleteRecipe(V))),fetchTrash()):(await Promise.all(Array.from(H).map(V=>Gt.deleteRecipe(V))),h(u.filter(V=>!H.has(V.id))),L()),Z(new Set),W(!1),alert("")}catch(V){console.error("Bulk delete failed",V),alert(""),w==="trash"?fetchTrash():ee()}finally{g(!1)}},ge=async()=>{if(window.confirm(`${H.size}`))try{g(!0);for(const V of H)await Gt.restoreRecipe(V);h(u.filter(V=>!H.has(V.id))),L(),W(!1),Z(new Set),alert(""),fetchTrash()}catch(V){console.error("Bulk restore failed",V),alert(""),fetchTrash()}finally{g(!1)}},gt=()=>{const V=ke.map(de=>de.id);Z(new Set(V))},pt=V=>{h([V,...u]),o({view:"edit",id:V.id})};return R.useEffect(()=>{w==="trash"?fetchTrash():r&&ee()},[w,r]),a?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):r?c.jsxs(iS,{children:[z&&c.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(ft,{style:{width:"90%",maxWidth:"400px",padding:"1.5rem",border:"2px solid var(--color-danger)",backgroundColor:"white"},children:[c.jsxs("h3",{style:{marginTop:0,color:"#dc3545",display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{children:""})," ",H.size,"",w==="trash"?"":""]}),c.jsx("p",{style:{margin:"1rem 0",color:"#333"},children:w==="trash"?"":""}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[c.jsx(ce,{variant:"ghost",onClick:ue,children:""}),c.jsx(ce,{variant:"danger",onClick:xe,children:w==="trash"?"":""})]})]})}),(w==="list"||w==="trash")&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"container-header",children:[c.jsxs("h2",{className:"section-title",children:[w==="trash"?" ()":"",w==="list"&&c.jsxs("span",{style:{fontSize:"0.8em",marginLeft:"8px",color:"#666",fontWeight:"normal"},children:["(",u.length,")"]})]}),c.jsx("div",{className:"header-actions",children:w==="list"||w==="trash"?c.jsxs(c.Fragment,{children:[ne?c.jsxs(c.Fragment,{children:[c.jsx(ce,{variant:"ghost",onClick:Qt,children:""}),c.jsx(ce,{variant:"secondary",onClick:gt,children:""}),w==="trash"&&c.jsxs(ce,{variant:"secondary",onClick:ge,disabled:H.size===0,style:{marginRight:"8px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:[" (",H.size,")"]}),c.jsxs(ce,{variant:"danger",onClick:le,disabled:H.size===0,children:[w==="trash"?"":""," (",H.size,")"]})]}):c.jsx(c.Fragment,{children:w==="list"?c.jsx(ce,{onClick:()=>o({view:"create"}),className:"primary-action-btn",children:"+ "}):c.jsx(ce,{variant:"ghost",onClick:Vt,children:" "})}),c.jsx("button",{className:"mobile-menu-toggle",onClick:()=>U(!q),"aria-label":"",children:q?"":""}),c.jsxs("div",{className:`secondary-actions ${q?"open":""}`,children:[w==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs(ce,{variant:"secondary",onClick:()=>{A("url"),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," Web"]}),c.jsxs(ce,{variant:"secondary",onClick:()=>{A("image"),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsxs(ce,{variant:"secondary",onClick:()=>{o({view:"data"}),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsxs(ce,{variant:"secondary",onClick:()=>{o({view:"levain-guide"}),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),r?.id==="admin"&&c.jsxs(ce,{variant:"secondary",onClick:()=>{o({view:"users"}),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsx("div",{className:"menu-divider"})]}),!ne&&c.jsxs(ce,{variant:"ghost",onClick:()=>{Qt(),U(!1)},className:"danger-text",children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," ",w==="trash"?"":""]}),w==="list"&&c.jsxs(ce,{variant:"ghost",onClick:()=>{Ot(),U(!1)},style:{position:"relative"},children:[c.jsx("span",{style:{marginRight:"8px"},children:""}),"  ",m>0&&c.jsx("span",{className:"trash-badge",children:m})]}),c.jsxs(ce,{variant:"ghost",onClick:()=>{Vt(),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]}),c.jsx("div",{className:"menu-divider"}),c.jsxs(ce,{variant:"ghost",onClick:()=>{n(),U(!1)},children:[c.jsx("span",{style:{marginRight:"8px"},children:""})," "]})]}),c.jsx("div",{className:`menu-backdrop ${q?"open":""}`,onClick:()=>U(!1),"aria-hidden":"true"})]}):null})]}),w==="list"&&c.jsxs("div",{className:"search-container",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",className:"search-input",placeholder:"...",value:I,onChange:V=>k(V.target.value)})]}),c.jsxs("div",{className:"tag-filter-container",children:[c.jsxs("select",{className:"store-filter-select",value:lh.includes(T)?T:"",onChange:V=>C(V.target.value||""),children:[c.jsx("option",{value:"",children:""}),lh.map(V=>c.jsxs("option",{value:V,children:[V," (",ve[V]||0,")"]},V))]}),c.jsxs("select",{className:"store-filter-select",value:ie.includes(T)?T:"",onChange:V=>C(V.target.value||""),children:[c.jsx("option",{value:"",children:""}),ie.sort().map(V=>c.jsxs("option",{value:V,children:[V," (",Ne[V]||0,")"]},V))]}),c.jsxs("select",{className:"store-filter-select",value:me.includes(T)?T:"",onChange:V=>C(V.target.value||""),children:[c.jsx("option",{value:"",children:""}),me.sort().map(V=>c.jsxs("option",{value:V,children:[V," (",Ve[V]||0,")"]},V))]}),c.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"16px",display:"flex",gap:"8px",borderLeft:"1px solid #ccc",paddingLeft:"16px"},children:[c.jsx("button",{className:`tag-filter-btn ${re==="normal"?"active":""}`,onClick:()=>te("normal"),style:{minWidth:"auto",padding:"4px 12px"},children:""}),c.jsx("button",{className:`tag-filter-btn ${re==="all"?"active":""}`,onClick:()=>te("all"),style:{minWidth:"auto",padding:"4px 12px"},children:""})]})]}),p?c.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"..."}):u.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#888"},children:[w==="trash"?"":"",T!==""&&c.jsx("p",{children:""})]}):c.jsxs("div",{className:"main-content-wrapper",children:[w==="list"&&c.jsx("div",{className:"recent-list-wrapper",children:c.jsx(FE,{recipes:u,recentIds:y,onSelect:Pt})}),c.jsx("div",{className:"recipe-list-container",children:w==="list"?c.jsx(Ls,{sensors:ae,collisionDetection:Yd,onDragEnd:fe,children:c.jsx(tv,{recipes:ke,onSelectRecipe:Pt,isSelectMode:ne,selectedIds:H,onToggleSelection:wt,disableDrag:!De,displayMode:re})}):c.jsx(tv,{recipes:ke,onSelectRecipe:Pt,isSelectMode:ne,selectedIds:H,onToggleSelection:wt,disableDrag:!0,displayMode:re})})]})]}),w==="detail"&&_&&c.jsx(qE,{recipe:_,isDeleted:!!_.deletedAt,onBack:()=>_.deletedAt?Ot():Vt(),onEdit:()=>o({view:"edit",id:_.id}),onDelete:At,onView:O,onHardDelete:un,onDuplicate:pt}),w==="edit"&&_&&c.jsx($v,{initialData:_,onCancel:()=>o({view:"detail",id:_.id}),onSave:V=>Fn(V,!0)},`edit-${_.id}`),w==="create"&&c.jsx($v,{initialData:B,onCancel:()=>{o({view:"list"}),D(null)},onSave:V=>Fn(V,!1)},B?"create-form-imported":"create-form"),E&&c.jsx(l0,{initialMode:E,onClose:()=>A(null),onImport:er}),w==="data"&&c.jsx(WE,{onBack:()=>o({view:"list"})}),w==="levain-guide"&&c.jsx(eR,{onBack:()=>o({view:"list"})}),w==="users"&&r?.id==="admin"&&c.jsx(tR,{onBack:()=>o({view:"list"})})]}):c.jsx(nR,{})}function aR(){return c.jsx(TE,{children:c.jsx(rR,{})})}class iR extends Ae.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a),this.setState({error:n,errorInfo:a})}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"2rem",color:"red"},children:[c.jsx("h1",{children:""}),c.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),c.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),c.jsx("br",{}),c.jsx("button",{onClick:()=>window.location.reload(),children:""})]}):this.props.children}}Tx.createRoot(document.getElementById("root")).render(c.jsx(R.StrictMode,{children:c.jsx(iR,{children:c.jsx(Jw,{children:c.jsx(aR,{})})})}));
