# レシピ管理アプリ 操作説明書（詳細版）

最終更新: 2026-02-09

このドキュメントは、**現場運用者**と**管理者（Admin）**が、アプリ内の各機能を迷わず使えるようにするための説明書です。

---

## 目次

1. このアプリでできること（全体像）
2. ログイン・権限（一般ユーザー / 管理者）
3. 画面遷移と共通操作（メニュー / 検索 / タブ / モーダル）
4. レシピ一覧（検索 / フィルタ / 公開 / 並び替え / 一括操作）
5. レシピ詳細（倍率・原価・翻訳・QR・複製・削除）
6. レシピ作成・編集（手入力 / URL取り込み / 画像取り込み）
7. 材料入力（候補検索 / 原価計算 / 税率 / 歩留まり / グループ）
8. 作り方入力（手順 / グループ）
9. データ管理（価格データ / 材料マスター / CSV取込 / 重複アイテム / バックアップ）
10. 価格データ（CSVアップロード / マージ / 検索 / ファイル管理 / 他アカウントへコピー）
11. 材料マスター管理（区分タブ / 業者 / 内容量 / 仕入れ値 / 歩留まり / 元の単位（CSV） / 手入力タブ / 他アカウントへコピー）
12. CSV取込（価格CSV → 材料マスター一括登録）
13. 重複アイテム（価格履歴の確認）
14. 在庫管理（棚卸し）（入力を速くするコツ / 税率10% / 発注推奨 / 履歴 / 月次統合 / CSV出力）
15. 仕込みカレンダー（Planner）（予定の作成・移動・削除）
16. 発注リスト（OrderList）（期間指定・算出ルール・印刷/コピー）
17. ユーザー管理（管理者のみ）（マスターレシピ表示 / パスワード再設定）
18. ルヴァンガイド（Levain Guide）
19. よくあるトラブルと対処

---

## 1. このアプリでできること（全体像）

- レシピの登録・編集・閲覧・削除（ゴミ箱あり）
- 仕込み倍率の計算（通常レシピ）
- Baker's % の計算（パン・生地レシピ）
- 仕入れCSV（価格データ）を取り込み、レシピの原価を自動入力・自動計算
- 材料マスター（内容量・袋単価・歩留まり・区分・業者）を整備し、在庫/発注/原価の計算を安定させる
- 在庫管理（棚卸し入力、棚卸し履歴、月次統合、CSV出力、税率8/10%）
- 仕込みカレンダー（いつ何を仕込むか）
- 発注リスト（必要量と在庫から発注量を算出）
- 公開レシピ（他ユーザーに共有できる仕組み）
- 管理者向け: ユーザー管理、データの共有（コピー）など

---

## 2. ログイン・権限（一般ユーザー / 管理者）

### 2.1 ログイン

- メールアドレスとパスワードでログインします（Supabase Auth）。
- パスワードを忘れた場合は、ログイン画面の「パスワード再設定」から再設定メールを送信できます。

### 2.2 権限（ロール）

- 一般ユーザー: 基本機能（レシピ、在庫、発注、仕込みカレンダー、データ閲覧）
- 管理者（Admin）: ユーザー管理が使えます。さらに、**データ管理で「他アカウントへコピー」**などの共有（複製）機能が表示されます。

---

## 3. 画面遷移と共通操作（メニュー / 検索 / タブ / モーダル）

### 3.1 メニューの開き方

- レシピ一覧の右上にある「☰」でメニューを開きます。
- メニューから移動できる主な画面:
  - 在庫管理
  - 仕込みカレンダー
  - データ管理
  - 発注リスト
  - ゴミ箱
  - （管理者のみ）ユーザー管理

### 3.2 「PCかタブレット推奨」の画面

以下の画面は操作量が多いため、スマホではなく**PCかタブレット**を推奨します。

- 在庫管理
- 仕込みカレンダー
- データ管理
- ユーザー管理
- 発注リスト

### 3.3 タブ・フィルタの考え方

- タブ: 「表示の切替（分類）」に使います（例: 材料マスターの「食材/アルコール/…」）。
- フィルタ: 「絞り込み」に使います（例: 業者選択、検索、未登録/登録済みなど）。

### 3.4 確認ダイアログ（モーダル）

削除・コピー・税率変更など、重要操作は**アプリ内のモーダル**で確認してから実行します。

---

## 4. レシピ一覧（検索 / フィルタ / 公開 / 並び替え / 一括操作）

### 4.1 検索

- 上部検索欄で、レシピ名・材料・メモなどから検索できます。

### 4.2 フィルタ（店舗 / コース / カテゴリー）

- 「店舗」「コース」「カテゴリー」で絞り込みできます。
- プルダウンには件数が表示されます（例: `店舗名 (12)`）。

### 4.3 表示モード（通常 / 全表示）

- 通常: 重要セクション（パン/デザート等）の折りたたみ表示を前提に、作業しやすい表示
- 全表示: すべて表示（折りたたみなし）

### 4.4 公開レシピ（自分公開中 / 他ユーザー公開）

- 「🟢 自分公開中」: 自分が `public` にしたレシピを表示
- 「🌐 他ユーザー公開」: 他ユーザーが `public` にしたレシピを表示
- 「✕ 公開非表示」: 公開枠を閉じる

### 4.5 最近見たレシピ

- 一覧上部に「最近見たレシピ」が出ます（頻繁に見るレシピの再アクセス用）。

### 4.6 並び替え（ドラッグ&ドロップ）

- PC: ドラッグで並び替えできます。
- スマホ/タブレット: 誤操作防止のため、**長押し**でドラッグ開始します。

### 4.7 一括操作（複数選択）

- メニューの「一括削除」または「一括操作」を押すと、複数選択モードになります。
- 一括操作でできること:
  - 一覧: 一括削除（ゴミ箱へ）
  - ゴミ箱: 一括復元 / 一括完全削除

---

## 5. レシピ詳細（倍率・原価・翻訳・QR・複製・削除）

### 5.1 分量の計算（通常レシピ）

- 倍率（例: `×2`）で材料が自動計算されます。

### 5.2 Baker's %（パン・生地）

- パン系レシピは Baker's % で再計算できます（狙いの総重量を入れると再計算）。

### 5.3 原価（材料費）

- 価格データ（CSV）と材料マスターをもとに、材料行の原価・レシピ全体の原価が計算されます。

### 5.4 翻訳表示

- 言語切り替えで翻訳表示できます。
- 原文も併記できます（設定がある場合）。

### 5.5 QRコード

- 詳細画面にはQRが表示され、共有や印刷物での参照がしやすくなっています。

### 5.6 複製

- 「複製」で、同じレシピをコピーして新規レシピとして作成できます。

### 5.7 削除（ゴミ箱）と完全削除

- 削除: ゴミ箱へ移動（復元可能）
- 完全削除: ゴミ箱からさらに削除（元に戻せません）

---

## 6. レシピ作成・編集（手入力 / URL取り込み / 画像取り込み）

### 6.1 新規レシピ作成

- レシピ一覧で「+ レシピ追加」を押します。

### 6.2 URL取り込み

- メニューの「🌐 Webから追加」を押します。
- URLを貼り付けると解析し、材料・手順が自動入力されます。
- 取り込み後は、材料名や単位がズレることがあるので、必ず確認してください。

### 6.3 画像取り込み

- メニューの「📷 画像から追加」を押します。
- 画像からテキストを抽出して材料・手順に反映します。
- 画像の解像度や写りで精度が変わります。取り込み後に必ず修正してください。

---

## 7. 材料入力（候補検索 / 原価計算 / 税率 / 歩留まり / グループ）

### 7.1 材料名の候補（オートコンプリート）

- 材料名欄は候補が表示されます。
- 主に参照するデータ:
  - 材料マスター（登録済み材料）
  - 価格データ（仕入れCSV）
  - 手入力で追加された材料

### 7.2 仕入れ（購入単価）と原価

- 「仕入れ」: 仕入れ単価（または単位換算した単価）
- 「原価」: 分量を掛けた材料費（必要に応じて歩留まりを適用）
- 🧮 ボタン: 原価計算アシスト（換算・単位計算を補助）

### 7.3 税率（10%チェック）

- 材料行の「10%」は、税率10%対象の場合にチェックします。
- 区分（アルコール/備品など）が設定されている材料は、税率が自動判定されるためチェックが固定されます。

### 7.4 歩留まり（可食率）

- 材料マスターで「歩留まり（%）」が100%未満の材料は、原価計算時に歩留まりが適用されます。
- 100%未満の場合は、原価欄の下に小さく `歩留まり: 50%` のように表示されます。

### 7.5 グループ（材料のまとまり）

- 材料はグループ（例: ソース、仕上げ、盛り付け）で分けられます。
- 「+ 新しいグループを追加」でグループを増やせます。
- 行はドラッグで並び替えできます。

---

## 8. 作り方入力（手順 / グループ）

- 作り方もグループ化できます（セクションを分けたい場合）。
- 手順はチェックして進捗管理できます（現場用）。

---

## 9. データ管理（価格データ / 材料マスター / CSV取込 / 重複アイテム / バックアップ）

データ管理は、原価・在庫・発注の計算精度を上げるための画面です。

タブ:

- 価格データ
- 材料マスター
- CSV取込
- 重複アイテム

加えて、レシピのバックアップ（JSON）の入出力もあります。

### 9.1 レシピバックアップ（JSON）

目的:

- 万一に備えて、全レシピをJSONで保存します。
- 別端末・別アカウントへ移す前の退避としても使えます。

できること:

- 📥 JSON形式でダウンロード（バックアップ作成）
- 📤 バックアップから復元（取り込み）

注意:

- 取り込みは**上書きではなく追加**です。
- 既存レシピは維持され、バックアップ内のレシピが新規追加されます。

手順（ダウンロード）:

1. データ管理 → 価格データ
2. サイドバー「🔄 レシピバックアップ」→「📥 JSON形式でダウンロード」

手順（復元 / 追加）:

1. データ管理 → 価格データ
2. サイドバー「🔄 レシピバックアップ」→「📤 バックアップから復元」
3. JSONファイルを選択
4. 内容確認モーダルで「この内容で復元」を押す
5. 処理が完了するまで待つ（大量データの場合は数十秒かかることがあります）

---

## 10. 価格データ（CSVアップロード / マージ / 検索 / ファイル管理 / 他アカウントへコピー）

### 10.1 価格データとは

- 仕入れCSVをアップロードし、材料名から単価・業者名などを参照できるようにします。
- 複数のCSVがある場合、データはマージされます（基本は最新が優先）。

### 10.2 CSVアップロード手順

1. データ管理 → 「価格データ」
2. CSVを選択
3. 「アップロード実行」

アップロード後はレシピの原価が再計算されます。

### 10.3 検索・並び替え

- 検索: 日付、材料名、業者名で検索できます。
- 並び替え: テーブルヘッダ（納品日/業者名/材料名）をクリックします。

### 10.4 保存済みファイルの管理

- 保存済みファイル一覧から削除できます。
- 削除すると、マージ結果も変わります（注意）。

### 10.5 他アカウントへコピー（管理者のみ）

目的:

- 価格データ（保存済みCSVファイル）を、別アカウントへ**複製**したいときに使います。

仕様:

- **同期はされません（1回コピー）**です。
- 同名ファイルがある場合は自動で `_copy` を付けた名前で保存します。

手順:

1. データ管理 → 「価格データ」
2. サイドバー「共有（コピー）」→「他アカウントへコピー」
3. コピー先アカウントを選択
4. 確認画面で「コピー開始」
5. 進捗が表示され、完了すると結果が出ます

---

## 11. 材料マスター管理（区分タブ / 業者 / 内容量 / 仕入れ値 / 歩留まり / 元の単位（CSV） / 手入力タブ / 他アカウントへコピー）

材料マスターは、在庫・発注・原価計算の「基準データ」です。

### 11.1 タブ（区分）と件数表示

- 全て
- 食材
- アルコール
- ソフトドリンク
- 備品
- 手入力（CSVに存在しない材料）

各タブには件数が表示されます。

### 11.2 新規材料登録

1. 「+ 新規材料」
2. 入力する項目:
   - 材料名
   - 業者名（任意）
   - 内容量（例: 1000）
   - 単位（例: g / ml / 本 など）
   - 仕入れ値（1袋/1本の価格）
   - 歩留まり（%）: 食材のみ（肉・魚などで可食率を反映したい場合）
   - 区分（食材/アルコール/ソフトドリンク/備品）
3. 保存

### 11.3 編集・削除

- 「編集」で編集モードに入ります。
- 保存 / キャンセル / 削除ができます。

### 11.4 元の単位（CSV）

意味:

- CSV側の「発注単位（袋/本/箱…）」を表します。

編集:

- 「元の単位（CSV）」は、**編集モードのときだけ**編集できます。
- CSVに単位が無い、または誤っている場合の補正に使います。

### 11.5 換算単価

- 内容量と仕入れ値から、参考として `¥xxx/kg` や `¥xxx/L` のように表示します。

### 11.6 手入力タブ（任意追加した材料）

- 「手入力」タブには、CSV価格データに存在しない材料（任意で追加した材料）がまとまって表示されます。

### 11.7 他アカウントへコピー（管理者のみ）

目的:

- 材料マスターを別アカウントへ複製したいときに使います。

仕様:

- **同期はされません（1回コピー）**です。
- 「同名材料がある場合は上書きする」をONにすると、コピー先の既存材料を上書きします。

手順:

1. データ管理 → 「材料マスター」
2. 「他アカウントへコピー」
3. コピー先を選択
4. 上書き有無を選択
5. 確認画面で実行

---

## 12. CSV取込（価格CSV → 材料マスター一括登録）

「CSV取込」は、価格データ（CSV）にある材料を材料マスターへ登録するための画面です。

できること:

- CSVにある材料を一覧で見ながら、材料マスターの「内容量/単位/仕入れ値/区分」を整備できる
- 未登録だけを抽出できる
- 複数件を一括保存できる（進捗表示あり）

基本手順:

1. データ管理 → 「CSV取込」
2. 検索・絞り込み（未登録/登録済み、業者、区分、検索語）
3. 内容量・単位・区分などを入力
4. 1件ずつ登録、または一括登録

---

## 13. 重複アイテム（価格履歴の確認）

目的:

- 同じ材料名で複数の価格が存在する場合に、入荷日ごとの価格変化や表記揺れを確認します。

使い方:

1. データ管理 → 「重複アイテム」
2. 材料を選択
3. 必要なら月で絞り込み

---

## 14. 在庫管理（棚卸し）

### 14.1 画面の構成

- 業者選択: 業者で絞り込みできます（「すべて」「その他」あり）
- 在庫検索: 品名で検索できます
- 操作タブ:
  - ✅ 棚卸し一覧: 入力対象の一覧（在庫数入力が中心）
  - 📊 統合: 月次統合（棚卸し履歴から集計）
  - 📥 CSV出力: 一覧をCSVで保存
  - 🖨️ 印刷: 棚卸し一覧（チェック画面）を印刷/PDF保存

### 14.1.1 行ごとの操作（編集 / 除外 / 単位同期）

- ✎ 編集: アイテムの基本情報（発注点など）を編集します
- 🗑️ 除外: そのアイテムを**棚卸し一覧から一時的に非表示**にします（マスターやCSV自体は消えません）
- ↺ 単位同期: 在庫の単位が材料マスターとズレている場合に、マスター単位へ合わせます（ズレがある行にだけ表示）
- 業者名ソート: 一覧の「業者名」見出しをクリックすると、業者名で並び替えできます

### 14.1.2 新規アイテム追加（+ アイテム追加）

- CSVにない材料を棚卸し対象にしたい場合は「+ アイテム追加」から手入力で登録できます。

### 14.2 在庫数の入力を速くする（キーボード操作）

在庫数入力欄で以下が使えます。

- `Enter`: 次の在庫数入力欄へ移動
- `Shift + Enter`: ひとつ上の在庫数入力欄へ移動
- `Tab`: 次の在庫数入力欄へ移動（通常のTab移動より少ないキー操作で進みます）
- `Shift + Tab`: ひとつ上へ移動

コツ:

- 入力欄をクリックすると数値が全選択されるので、そのまま打ち替えできます。

### 14.3 税率（10%チェック）

- 一覧の左端に「10%」チェックがあります。
- 10%へ切り替える場合は、確認モーダルが出ます（誤操作防止）。

### 14.4 発注推奨バッジ

- 在庫が「発注点以下」になると、品名横に `発注推奨` バッジが表示されます。
- バッジにホバーすると、ツールチップで `発注点以下` と表示されます。

### 14.5 棚卸し完了（履歴保存）

1. 「🎉 棚卸し完了」を押す
2. 保存名（タイトル）を確認・変更
3. 棚卸し後の在庫数:
   - 0にリセットする
   - そのまま保持する
4. 保存を実行

### 14.6 履歴

- 「📜 履歴」で保存済み棚卸しを一覧表示します。
- 履歴からできること:
  - 詳細表示（その棚卸し時点の明細）
  - CSV出力
  - ゴミ箱へ移動
  - ゴミ箱から復元
  - 完全削除（確認入力が必要）

### 14.7 月次統合（📊 統合）

目的:

- 月内に複数回棚卸しした場合も、**月次の集計**を作れます。

特徴:

- 同名品目は月内の**最新データを採用**して集計します。
- 業者別の合計、内訳（食材/ドリンク/備品）を確認できます。
- CSV出力できます。

---

## 15. 仕込みカレンダー（Planner）

目的:

- いつ、どのレシピを仕込むかを登録します（発注リストの入力元になります）。

できること:

- 左のレシピ一覧から、日付へドラッグして予定を追加
- 既存予定をドラッグして別日に移動
- 予定の削除（確認あり）

---

## 16. 発注リスト（OrderList）

目的:

- 仕込み予定（Planner）と在庫から、発注すべき材料と量を算出します。

使い方:

1. 期間（開始日/終了日）を指定
2. 「生成」して発注リストを作成
3. 必要に応じてコピー・印刷

算出の考え方（概要）:

- 期間内の仕込み予定の材料を合算します。
- 在庫を差し引きます。
- 材料マスターの「内容量（1袋/1本）」がある材料は、残在庫が「1単位の2割」を切ると発注対象になります。
- 発注単位ラベル（袋/本/箱…）は「元の単位（CSV）」を優先します。

---

## 17. ユーザー管理（管理者のみ）

### 17.1 ユーザー一覧

- 管理者と一般ユーザーが一覧表示されます。

### 17.2 マスターレシピ表示

- 各ユーザーに「マスターレシピ表示」のON/OFFがあります。
- 共有レシピ（マスター）を見せるかどうかの運用スイッチです。

### 17.3 パスワード再設定

- 「パスワード再設定」から実行できます。
- 方法は2種類:
  - 再設定メールを送信
  - 管理者が新しいパスワードを直接設定

---

## 18. ルヴァンガイド（Levain Guide）

メニューから「LEVAIN GUIDE」を開くと、ルヴァン種の解説ページを閲覧できます。

- ルヴァン種の基礎
- 作成方法
- 日常管理
- トラブルシュート

---

## 19. よくあるトラブルと対処

### 19.1 価格がレシピに反映されない

- 価格データ（CSV）をアップロード後、少し待ってから再読み込みしてください。
- 材料名の表記ゆれ（全角/半角、末尾スペース）で一致しない場合があります。

### 19.2 在庫に同じ商品がダブって見える

- 業者名と品名が同じものは、表示側で重複が出ないように調整されています。
- それでもダブる場合は、品名表記（空白違い等）を確認してください。

### 19.3 単位や桁が合わない（原価/在庫/発注）

- 材料マスターの「内容量」「単位」「仕入れ値」が未整備の可能性があります。
- 「CSV取込」で未登録を整備するのが最短です。

### 19.4 手入力した材料がどこにあるか分からない

- 材料マスターの「手入力」タブにまとまって表示されます。
